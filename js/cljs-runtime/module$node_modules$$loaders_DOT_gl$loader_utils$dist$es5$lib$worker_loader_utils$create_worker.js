shadow$provide.module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_loader_utils$create_worker=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=
1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function parseData(_x2){return _parseData.apply(this,arguments)}function _parseData(){_parseData=
(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(_ref3){var loader,arraybuffer,options,context,data,parser,textDecoder;return _regenerator["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:loader=_ref3.loader;arraybuffer=_ref3.arraybuffer;options=_ref3.options;context=_ref3.context;if(!loader.parseSync&&!loader.parse){_context2.next=6;break}data=arraybuffer;parser=loader.parseSync||loader.parse;_context2.next=13;break;case 6:if(!loader.parseTextSync){_context2.next=
12;break}textDecoder=new TextDecoder;data=textDecoder.decode(arraybuffer);parser=loader.parseTextSync;_context2.next=13;break;case 12:throw Error("Could not load data with ".concat(loader.name," loader"));case 13:return options=_objectSpread(_objectSpread({},options),{},{modules:loader&&loader.options&&loader.options.modules||{},worker:!1}),_context2.next=16,parser(data,_objectSpread({},options),context,loader);case 16:return _context2.abrupt("return",_context2.sent);case 17:case "end":return _context2.stop()}},
_callee2)}));return _parseData.apply(this,arguments)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=function(loader){if("undefined"!==typeof self){var requestId=0,parse=function(arraybuffer){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},url=2<arguments.length?arguments[2]:void 0;return new Promise(function(resolve,reject){var id=requestId++;self.addEventListener("message",
function onMessage(_ref){if((_ref=_ref.data)&&_ref.id===id)switch(_ref.type){case "parse-done":self.removeEventListener("message",onMessage);resolve(_ref.result);break;case "parse-error":self.removeEventListener("message",onMessage),reject(_ref.message)}});self.postMessage({type:"parse",id,arraybuffer,options,url},[arraybuffer])})};self.onmessage=function(){var _ref2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(evt){var data,arraybuffer,_data$byteOffset,byteOffset,
_data$byteLength,byteLength,_data$options,options,result,transferList;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:data=evt.data;_context.prev=1;if(data&&"parse"===data.type&&data.source&&data.source.startsWith("loaders.gl")){_context.next=4;break}return _context.abrupt("return");case 4:return(0,_validateLoaderVersion.validateLoaderVersion)(loader,data.source.split("@")[1]),arraybuffer=data.arraybuffer,_data$byteOffset=data.byteOffset,byteOffset=
void 0===_data$byteOffset?0:_data$byteOffset,_data$byteLength=data.byteLength,byteLength=void 0===_data$byteLength?0:_data$byteLength,_data$options=data.options,options=void 0===_data$options?{}:_data$options,_context.next=8,parseData({loader,arraybuffer,byteOffset,byteLength,options,context:{parse}});case 8:result=_context.sent;transferList=(0,_getTransferList.getTransferList)(result);self.postMessage({type:"done",result},transferList);_context.next=16;break;case 13:_context.prev=13,_context.t0=
_context["catch"](1),self.postMessage({type:"error",message:_context.t0.message});case 16:case "end":return _context.stop()}},_callee,null,[[1,13]])}));return function(_x){return _ref2.apply(this,arguments)}}()}};var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_getTransferList=
require("module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$get_transfer_list"),_validateLoaderVersion=require("module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_loader_utils$validate_loader_version")}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_loader_utils$create_worker.js.map
