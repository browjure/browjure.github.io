{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_animator.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/experimental/dist/es5/gltf/gltf-animator.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_animator\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = exports.ATTRIBUTE_TYPE_TO_COMPONENTS = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _core = require(\"@math.gl/core\");\n\nvar ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexports.ATTRIBUTE_TYPE_TO_COMPONENTS = ATTRIBUTE_TYPE_TO_COMPONENTS;\nvar ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexports.ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY;\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    var length = components * accessor.count;\n    var _accessor$bufferView$ = accessor.bufferView.data,\n        buffer = _accessor$bufferView$.buffer,\n        byteOffset = _accessor$bufferView$.byteOffset;\n    var array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      var slicedArray = [];\n\n      for (var i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\nvar helperMatrix = new _core.Matrix4();\n\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    var rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nvar quaternion = new _core.Quaternion();\n\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    quaternion.slerp({\n      start: start,\n      target: stop,\n      ratio: ratio\n    });\n\n    for (var i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    for (var _i = 0; _i < start.length; _i++) {\n      target[path][_i] = ratio * stop[_i] + (1 - ratio) * start[_i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, _ref) {\n  var p0 = _ref.p0,\n      outTangent0 = _ref.outTangent0,\n      inTangent1 = _ref.inTangent1,\n      p1 = _ref.p1,\n      tDiff = _ref.tDiff,\n      t = _ref.ratio;\n\n  for (var i = 0; i < target[path].length; i++) {\n    var m0 = outTangent0[i] * tDiff;\n    var m1 = inTangent1[i] * tDiff;\n    target[path][i] = (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] + (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 + (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] + (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (var i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, _ref2, target, path) {\n  var input = _ref2.input,\n      interpolation = _ref2.interpolation,\n      output = _ref2.output;\n  var maxTime = input[input.length - 1];\n  var animationTime = time % maxTime;\n  var nextIndex = input.findIndex(function (t) {\n    return t >= animationTime;\n  });\n  var previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        _webgl.log.warn(\"Bad animation path \".concat(path))();\n\n    }\n  }\n\n  (0, _webgl.assert)(target[path].length === output[previousIndex].length);\n  var previousTime = input[previousIndex];\n  var nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        var ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        var _ratio = (animationTime - previousTime) / (nextTime - previousTime);\n\n        var tDiff = nextTime - previousTime;\n        var p0 = output[3 * previousIndex + 1];\n        var outTangent0 = output[3 * previousIndex + 2];\n        var inTangent1 = output[3 * nextIndex + 0];\n        var p1 = output[3 * nextIndex + 1];\n        cubicsplineInterpolate(target, path, {\n          p0: p0,\n          outTangent0: outTangent0,\n          inTangent1: inTangent1,\n          p1: p1,\n          tDiff: tDiff,\n          ratio: _ratio\n        });\n      }\n\n      break;\n\n    default:\n      _webgl.log.warn(\"Interpolation \".concat(interpolation, \" not supported\"))();\n\n      break;\n  }\n}\n\nvar GLTFAnimation = function () {\n  function GLTFAnimation(props) {\n    (0, _classCallCheck2[\"default\"])(this, GLTFAnimation);\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n    this.channels = [];\n    Object.assign(this, props);\n  }\n\n  (0, _createClass2[\"default\"])(GLTFAnimation, [{\n    key: \"animate\",\n    value: function animate(timeMs) {\n      if (!this.playing) {\n        return;\n      }\n\n      var absTime = timeMs / 1000;\n      var time = (absTime - this.startTime) * this.speed;\n      this.channels.forEach(function (_ref3) {\n        var sampler = _ref3.sampler,\n            target = _ref3.target,\n            path = _ref3.path;\n        interpolate(time, sampler, target, path);\n        applyTranslationRotationScale(target, target._node);\n      });\n    }\n  }]);\n  return GLTFAnimation;\n}();\n\nvar GLTFAnimator = function () {\n  function GLTFAnimator(gltf) {\n    (0, _classCallCheck2[\"default\"])(this, GLTFAnimator);\n    this.animations = gltf.animations.map(function (animation, index) {\n      var name = animation.name || \"Animation-\".concat(index);\n      var samplers = animation.samplers.map(function (_ref4) {\n        var input = _ref4.input,\n            _ref4$interpolation = _ref4.interpolation,\n            interpolation = _ref4$interpolation === void 0 ? 'LINEAR' : _ref4$interpolation,\n            output = _ref4.output;\n        return {\n          input: accessorToJsArray(gltf.accessors[input]),\n          interpolation: interpolation,\n          output: accessorToJsArray(gltf.accessors[output])\n        };\n      });\n      var channels = animation.channels.map(function (_ref5) {\n        var sampler = _ref5.sampler,\n            target = _ref5.target;\n        return {\n          sampler: samplers[sampler],\n          target: gltf.nodes[target.node],\n          path: target.path\n        };\n      });\n      return new GLTFAnimation({\n        name: name,\n        channels: channels\n      });\n    });\n  }\n\n  (0, _createClass2[\"default\"])(GLTFAnimator, [{\n    key: \"animate\",\n    value: function animate(time) {\n      this.setTime(time);\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.animations.forEach(function (animation) {\n        return animation.animate(time);\n      });\n    }\n  }, {\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      return this.animations;\n    }\n  }]);\n  return GLTFAnimator;\n}();\n\nexports[\"default\"] = GLTFAnimator;\n//# sourceMappingURL=gltf-animator.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","accessorToJsArray","accessor","_animation","components","ATTRIBUTE_TYPE_TO_COMPONENTS","type","_accessor$bufferView$","bufferView","data","array","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","ArrayType","componentType","buffer","byteOffset","count","Array","from","slicedArray","i","length","push","slice","linearInterpolate","target","path","start","stop","ratio","quaternion","slerp","_i","cubicsplineInterpolate","_ref","p0","outTangent0","inTangent1","p1","tDiff","t","Math","pow","stepInterpolate","value","interpolate","time","_ref2","input","interpolation","output","animationTime","maxTime","nextIndex","findIndex","previousIndex","max","isArray","_webgl","log","warn","concat","assert","previousTime","nextTime","_interopRequireDefault","Object","defineProperty","_classCallCheck2","_createClass2","_core","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","Int8Array","Uint8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","helperMatrix","Matrix4","Quaternion","GLTFAnimation","props","startTime","playing","speed","channels","assign","key","animate","timeMs","forEach","_ref3","sampler","_node","node","matrix","identity","translation","translate","rotation","rotationMatrix","fromQuaternion","multiplyRight","scale","GLTFAnimator","gltf","animations","map","animation","index","name","samplers","_ref4","_ref4$interpolation","accessors","_ref5","nodes","setTime","getAnimations"]
}
