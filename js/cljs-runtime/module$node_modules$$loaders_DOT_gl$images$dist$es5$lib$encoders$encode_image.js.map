{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$encoders$encode_image.js",
"lineCount":7,
"mappings":"AAAAA,cAAA,CAAe,6EAAf,CAAkG,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAwB1IC,QAASA,aAAY,EAAG,CACtBA,YAAA,CAAe,CAAC,CAAA,CAAGC,kBAAA,CAAmB,SAAnB,CAAJ,EAAmCC,YAAA,CAAa,SAAb,CAAA,CAAwBC,IAAxB,CAA6BC,QAASA,QAAO,CAACC,KAAD,CAAQC,OAAR,CAAiB,CAC9G,MAAOJ,aAAA,CAAa,SAAb,CAAA,CAAwBK,IAAxB,CAA6BC,QAAiB,CAACC,SAAD,CAAY,CAC/D,IAAA,CAAA,CAAA,CACE,OAAQA,SAAR,CAAkBC,IAAlB,CAAyBD,SAAzB,CAAmCE,IAAnC,EACE,KAAK,CAAL,CAGE,MAFAL,QAEO,CAFGA,OAEH,EAFc,EAEd,CADPA,OACO,CADCD,KACD,CADSC,OACT,CADiBD,KACjB,EAD0B,EAC1B,CAAAI,SAAA,CAAUG,MAAV,CAAiB,QAAjB,CAA2BC,gBAAA,CAAmBA,gBAAA,CAAiBR,KAAjB,CAAwB,CAC3ES,KAAMR,OAANQ,CAAcT,KAAdS,CAAoBC,QADuD,CAAxB,CAAnB;AAE7BC,oBAAA,CAAqBX,KAArB,CAA4BC,OAA5B,CAFE,CAIT,MAAK,CAAL,CACA,KAAK,KAAL,CACE,MAAOG,UAAA,CAAUQ,IAAV,EAVX,CAF6D,CAA1D,CAeJb,OAfI,CADuG,CAA9D,CAAnC,CAkBf,OAAOJ,aAAA,CAAakB,KAAb,CAAmB,IAAnB,CAAyBC,SAAzB,CAnBe,CAwBxBH,QAASA,qBAAoB,CAACI,GAAD,CAAMC,GAAN,CAAW,CACtC,MAAOC,sBAAA,CAAsBJ,KAAtB,CAA4B,IAA5B,CAAkCC,SAAlC,CAD+B,CAIxCG,QAASA,sBAAqB,EAAG,CAC/BA,qBAAA,CAAwB,CAAC,CAAA,CAAGrB,kBAAA,CAAmB,SAAnB,CAAJ,EAAmCC,YAAA,CAAa,SAAb,CAAA,CAAwBC,IAAxB,CAA6BoB,QAASA,SAAQ,CAAClB,KAAD,CAAQC,OAAR,CAAiB,CAAA,IACpHkB,cADoH,CACpGT,QADoG,CAC1FU,WAD0F,CAC7EC,aAD6E,CAC9DC,KAD8D,CACvDC,MADuD,CAC/CC,MAD+C,CACvCC,IAEjF,OAAO5B,aAAA,CAAa,SAAb,CAAA,CAAwBK,IAAxB,CAA6BwB,QAAkB,CAACC,SAAD,CAAY,CAChE,IAAA,CAAA,CAAA,CACE,OAAQA,SAAR,CAAkBtB,IAAlB;AAAyBsB,SAAzB,CAAmCrB,IAAnC,EACE,KAAK,CAAL,CAQE,MAPAa,eAOO,CAPUlB,OAOV,CAPkBD,KAOlB,CAPyBU,QAOzB,CAPoCS,cAOpC,CAPmDT,QAOnD,CAP6DU,WAO7D,CAP2ED,cAO3E,CAP0FC,WAO1F,CANPC,aAMO,CANS,CAAC,CAAA,CAAGO,eAAH,CAAmBC,YAApB,EAAkC7B,KAAlC,CAMT,CANmDsB,KAMnD,CAN2DD,aAM3D,CANyEC,KAMzE,CANgFC,MAMhF,CANyFF,aAMzF,CANuGE,MAMvG,CALPC,MAKO,CALEM,QAAA,CAASC,aAAT,CAAuB,QAAvB,CAKF,CAJPP,MAIO,CAJAF,KAIA,CAJQA,KAIR,CAHPE,MAGO,CAHAD,MAGA,CAHSA,MAGT,CAFPS,iBAAA,CAAkBhC,KAAlB,CAAyBwB,MAAzB,CAEO,CADPG,SACO,CADGrB,IACH,CADU,CACV,CAAA,IAAI2B,OAAJ,CAAY,QAAS,CAACC,OAAD,CAAUC,MAAV,CAAkB,CAC5C,GAAIf,WAAJ,EAAmBgB,qBAAnB,CACE,GAAI,CACFZ,MAAA,CAAOa,MAAP,CAAcH,OAAd,CAAuBxB,QAAvB,CAAiCU,WAAjC,CACA,OAFE,CAGF,MAAOkB,KAAP,CAAc,CACdF,qBAAA;AAAwB,CAAA,CADV,CAKlBZ,MAAA,CAAOa,MAAP,CAAcH,OAAd,CAAuBxB,QAAvB,CAV4C,CAAvC,CAaT,MAAK,CAAL,CAGE,MAFAe,KAEO,CAFAE,SAEA,CAFUY,IAEV,CADPZ,SACO,CADGrB,IACH,CADU,EACV,CAAAmB,IAAA,CAAKe,WAAL,EAET,MAAK,EAAL,CACE,MAAOb,UAAA,CAAUpB,MAAV,CAAiB,QAAjB,CAA2BoB,SAA3B,CAAqCY,IAArC,CAET,MAAK,EAAL,CACA,KAAK,KAAL,CACE,MAAOZ,UAAA,CAAUf,IAAV,EAhCX,CAF8D,CAA3D,CAqCJM,QArCI,CAHiH,CAA/D,CAAnC,CA0CxB,OAAOD,sBAAA,CAAsBJ,KAAtB,CAA4B,IAA5B,CAAkCC,SAAlC,CA3CwB,CA8CjCkB,QAASA,kBAAiB,CAAChC,KAAD,CAAQwB,MAAR,CAAgB,CAExC,IAAIiB,EAAuB,CAAnB,CAAA3B,SAAA,CAAU4B,MAAV,EAAyCC,IAAAA,EAAzC,GAAwB7B,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,CAE5E,IAAU,CAAV,IAH2B,CAAnB8B,CAAA9B,SAAA8B,CAAUF,MAAVE,EAAyCD,IAAAA,EAAzCC,GAAwB9B,SAAA,CAAU,CAAV,CAAxB8B,CAAqD9B,SAAA,CAAU,CAAV,CAArD8B,CAAoE,CAG5E,GAAqB,CAArB,GAAeH,CAAf,EAAiD,WAAjD,GAA0B,MAAOI,YAAjC,EAAgE7C,KAAhE;AAAiF6C,WAAjF,GACMC,CADN,CACiBtB,MAAA,CAAOuB,UAAP,CAAkB,gBAAlB,CADjB,EAMI,MAFAD,EAAA,CAASE,uBAAT,CAAiChD,KAAjC,CAEOwB,CAAAA,MAIPyB,EAAAA,CAAUzB,MAAA,CAAOuB,UAAP,CAAkB,IAAlB,CAEd,IAAI/C,KAAJ,CAAUkD,IAAV,CAAgB,CACd,IAAIC,aAAe,IAAIC,iBAAJ,CAAsBpD,KAAtB,CAA4BkD,IAA5B,CACfG,aAAAA,CAAY,IAAIC,SAAJ,CAAcH,YAAd,CAA4BnD,KAA5B,CAAkCsB,KAAlC,CAAyCtB,KAAzC,CAA+CuB,MAA/C,CAChB0B,EAAA,CAAQM,YAAR,CAAqBF,YAArB,CAAgC,CAAhC,CAAmC,CAAnC,CACA,OAAO7B,OAJO,CAOhByB,CAAA,CAAQO,SAAR,CAAkBxD,KAAlB,CAAyB,CAAzB,CAA4B,CAA5B,CACA,OAAOwB,OAxBiC,CA/FtCiC,MAAAA,CAAyBjE,OAAA,CAAQ,kEAAR,CAE7BkE,OAAA,CAAOC,cAAP,CAAsBjE,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CkE,MAAO,CAAA,CADoC,CAA7C,CAGAlE,QAAA,CAAQmE,WAAR,CAYAA,QAAoB,CAACC,EAAD;AAAKC,GAAL,CAAU,CAC5B,MAAOpE,aAAA,CAAakB,KAAb,CAAmB,IAAnB,CAAyBC,SAAzB,CADqB,CAV9B,KAAIjB,aAAe4D,MAAA,CAAuBjE,OAAA,CAAQ,sDAAR,CAAvB,CAAnB,CAEII,mBAAqB6D,MAAA,CAAuBjE,OAAA,CAAQ,6DAAR,CAAvB,CAErBwE,QAAAA,CAAWxE,OAAA,CAAQ,uEAAR,CAEf,KAAIoC,gBAAkBpC,OAAA,CAAQ,uFAAR,CAAtB,CAEIgB,iBAAmBwD,OAAnBxD,CAA4BjB,MAA5BiB,CAAmCA,gBAFvC,CA8BI4B;AAAwB,CAAA,CA9C8G;",
"sources":["node_modules/@loaders_DOT_gl/images/dist/es5/lib/encoders/encode-image.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$encoders$encode_image\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encodeImage = encodeImage;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _globals = require(\"../utils/globals\");\n\nvar _parsedImageApi = require(\"../category-api/parsed-image-api\");\n\nvar _encodeImageNode = _globals.global._encodeImageNode;\n\nfunction encodeImage(_x, _x2) {\n  return _encodeImage.apply(this, arguments);\n}\n\nfunction _encodeImage() {\n  _encodeImage = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(image, options) {\n    return _regenerator[\"default\"].wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = options || {};\n            options.image = options.image || {};\n            return _context2.abrupt(\"return\", _encodeImageNode ? _encodeImageNode(image, {\n              type: options.image.mimeType\n            }) : encodeImageInBrowser(image, options));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _encodeImage.apply(this, arguments);\n}\n\nvar qualityParamSupported = true;\n\nfunction encodeImageInBrowser(_x3, _x4) {\n  return _encodeImageInBrowser.apply(this, arguments);\n}\n\nfunction _encodeImageInBrowser() {\n  _encodeImageInBrowser = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee2(image, options) {\n    var _options$image, mimeType, jpegQuality, _getImageSize, width, height, canvas, blob;\n\n    return _regenerator[\"default\"].wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _options$image = options.image, mimeType = _options$image.mimeType, jpegQuality = _options$image.jpegQuality;\n            _getImageSize = (0, _parsedImageApi.getImageSize)(image), width = _getImageSize.width, height = _getImageSize.height;\n            canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            drawImageToCanvas(image, canvas);\n            _context3.next = 8;\n            return new Promise(function (resolve, reject) {\n              if (jpegQuality && qualityParamSupported) {\n                try {\n                  canvas.toBlob(resolve, mimeType, jpegQuality);\n                  return;\n                } catch (error) {\n                  qualityParamSupported = false;\n                }\n              }\n\n              canvas.toBlob(resolve, mimeType);\n            });\n\n          case 8:\n            blob = _context3.sent;\n            _context3.next = 11;\n            return blob.arrayBuffer();\n\n          case 11:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _encodeImageInBrowser.apply(this, arguments);\n}\n\nfunction drawImageToCanvas(image, canvas) {\n  var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n  if (x === 0 && y === 0 && typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    var _context = canvas.getContext('bitmaprenderer');\n\n    if (_context) {\n      _context.transferFromImageBitmap(image);\n\n      return canvas;\n    }\n  }\n\n  var context = canvas.getContext('2d');\n\n  if (image.data) {\n    var clampedArray = new Uint8ClampedArray(image.data);\n    var imageData = new ImageData(clampedArray, image.width, image.height);\n    context.putImageData(imageData, 0, 0);\n    return canvas;\n  }\n\n  context.drawImage(image, 0, 0);\n  return canvas;\n}\n//# sourceMappingURL=encode-image.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_encodeImage","_asyncToGenerator2","_regenerator","mark","_callee","image","options","wrap","_callee$","_context2","prev","next","abrupt","_encodeImageNode","type","mimeType","encodeImageInBrowser","stop","apply","arguments","_x3","_x4","_encodeImageInBrowser","_callee2","_options$image","jpegQuality","_getImageSize","width","height","canvas","blob","_callee2$","_context3","_parsedImageApi","getImageSize","document","createElement","drawImageToCanvas","Promise","resolve","reject","qualityParamSupported","toBlob","error","sent","arrayBuffer","y","length","undefined","x","ImageBitmap","_context","getContext","transferFromImageBitmap","context","data","clampedArray","Uint8ClampedArray","imageData","ImageData","putImageData","drawImage","_interopRequireDefault","Object","defineProperty","value","encodeImage","_x","_x2","_globals"]
}
