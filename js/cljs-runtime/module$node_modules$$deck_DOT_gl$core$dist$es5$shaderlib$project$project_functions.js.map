{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$project_functions.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/shaderlib/project/project-functions.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$project_functions\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWorldPosition = getWorldPosition;\nexports.projectPosition = projectPosition;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _constants = require(\"../../lib/constants\");\n\nvar _viewportUniforms = require(\"./viewport-uniforms\");\n\nvar _webMercatorViewport = _interopRequireDefault(require(\"../../viewports/web-mercator-viewport\"));\n\nvar vec4 = _interopRequireWildcard(require(\"gl-matrix/vec4\"));\n\nvar vec3 = _interopRequireWildcard(require(\"gl-matrix/vec3\"));\n\nvar _webMercator = require(\"@math.gl/web-mercator\");\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport) {\n  var offsetMode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof _webMercatorViewport[\"default\"]) {\n    var _lngLatZ = (0, _slicedToArray2[\"default\"])(lngLatZ, 3),\n        longitude = _lngLatZ[0],\n        latitude = _lngLatZ[1],\n        _lngLatZ$ = _lngLatZ[2],\n        z = _lngLatZ$ === void 0 ? 0 : _lngLatZ$;\n\n    var distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  var normalizedParams = Object.assign({}, opts);\n  var coordinateSystem = opts.coordinateSystem;\n  var viewport = opts.viewport,\n      coordinateOrigin = opts.coordinateOrigin,\n      fromCoordinateSystem = opts.fromCoordinateSystem,\n      fromCoordinateOrigin = opts.fromCoordinateOrigin;\n\n  if (coordinateSystem === _constants.COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? _constants.COORDINATE_SYSTEM.LNGLAT : _constants.COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nfunction getWorldPosition(position, _ref) {\n  var viewport = _ref.viewport,\n      modelMatrix = _ref.modelMatrix,\n      coordinateSystem = _ref.coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      offsetMode = _ref.offsetMode;\n\n  var _position = (0, _slicedToArray2[\"default\"])(position, 3),\n      x = _position[0],\n      y = _position[1],\n      _position$ = _position[2],\n      z = _position$ === void 0 ? 0 : _position$;\n\n  if (modelMatrix) {\n    var _vec4$transformMat = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n\n    var _vec4$transformMat2 = (0, _slicedToArray2[\"default\"])(_vec4$transformMat, 3);\n\n    x = _vec4$transformMat2[0];\n    y = _vec4$transformMat2[1];\n    z = _vec4$transformMat2[2];\n  }\n\n  switch (coordinateSystem) {\n    case _constants.COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case _constants.COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition((0, _webMercator.addMetersToLngLat)(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case _constants.COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\n\nfunction projectPosition(position, params) {\n  var _normalizeParameters = normalizeParameters(params),\n      viewport = _normalizeParameters.viewport,\n      coordinateSystem = _normalizeParameters.coordinateSystem,\n      coordinateOrigin = _normalizeParameters.coordinateOrigin,\n      modelMatrix = _normalizeParameters.modelMatrix,\n      fromCoordinateSystem = _normalizeParameters.fromCoordinateSystem,\n      fromCoordinateOrigin = _normalizeParameters.fromCoordinateOrigin;\n\n  var _getOffsetOrigin = (0, _viewportUniforms.getOffsetOrigin)(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  var worldPosition = getWorldPosition(position, {\n    viewport: viewport,\n    modelMatrix: modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode: offsetMode\n  });\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","lngLatZToWorldPosition","lngLatZ","viewport","offsetMode","arguments","length","undefined","p","projectPosition","_webMercatorViewport","_lngLatZ","_slicedToArray2","_lngLatZ$","z","distanceScales","getDistanceScales","longitude","latitude","unitsPerMeter","getWorldPosition","position","_ref","modelMatrix","coordinateSystem","coordinateOrigin","_position","x","y","_position$","_vec4$transformMat","vec4","transformMat4","_vec4$transformMat2","_constants","COORDINATE_SYSTEM","LNGLAT","LNGLAT_OFFSETS","METER_OFFSETS","_webMercator","addMetersToLngLat","isGeospatial","_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","value","params","normalizedParams","assign","fromCoordinateSystem","fromCoordinateOrigin","DEFAULT","CARTESIAN","_getOffsetOrigin","_viewportUniforms","getOffsetOrigin","geospatialOrigin","shaderCoordinateOrigin","worldPosition","positionCommonSpace","vec3","sub"]
}
