shadow$provide.module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$program_configuration=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_accessor=global(require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$accessor")),
_gltools=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$index"),_attributeUtils=require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$webgl_utils$attribute_utils");require=function(){function ProgramConfiguration(program){(0,_classCallCheck2["default"])(this,ProgramConfiguration);this.id=program.id;this.attributeInfos=[];this.attributeInfosByName={};this.attributeInfosByLocation=[];this.varyingInfos=[];this.varyingInfosByName={};Object.seal(this);this._readAttributesFromProgram(program);
this._readVaryingsFromProgram(program)}(0,_createClass2["default"])(ProgramConfiguration,[{key:"getAttributeInfo",value:function(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}},{key:"getAttributeLocation",value:function(locationOrName){return(locationOrName=this.getAttributeInfo(locationOrName))?locationOrName.location:-1}},{key:"getAttributeAccessor",value:function(locationOrName){return(locationOrName=
this.getAttributeInfo(locationOrName))?locationOrName.accessor:null}},{key:"getVaryingInfo",value:function(locationOrName){var location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}},{key:"getVaryingIndex",value:function(locationOrName){return(locationOrName=this.getVaryingInfo())?locationOrName.location:-1}},{key:"getVaryingAccessor",value:function(locationOrName){return(locationOrName=this.getVaryingInfo())?locationOrName.accessor:
null}},{key:"_readAttributesFromProgram",value:function(program){for(var gl=program.gl,count=gl.getProgramParameter(program.handle,35721),index=0;index<count;index++){var _gl$getActiveAttrib=gl.getActiveAttrib(program.handle,index),name=_gl$getActiveAttrib.name,type=_gl$getActiveAttrib.type;_gl$getActiveAttrib=_gl$getActiveAttrib.size;var location=gl.getAttribLocation(program.handle,name);0<=location&&this._addAttribute(location,name,type,_gl$getActiveAttrib)}this.attributeInfos.sort(function(a,b){return a.location-
b.location})}},{key:"_readVaryingsFromProgram",value:function(program){var gl=program.gl;if((0,_gltools.isWebGL2)(gl)){for(var count=gl.getProgramParameter(program.handle,35971),location=0;location<count;location++){var _gl$getTransformFeedb=gl.getTransformFeedbackVarying(program.handle,location);this._addVarying(location,_gl$getTransformFeedb.name,_gl$getTransformFeedb.type,_gl$getTransformFeedb.size)}this.varyingInfos.sort(function(a,b){return a.location-b.location})}}},{key:"_addAttribute",value:function(location,
name,compositeType,size){compositeType=(0,_attributeUtils.decomposeCompositeGLType)(compositeType);size={type:compositeType.type,size:size*compositeType.components};this._inferProperties(location,name,size);name={location,name,accessor:new _accessor["default"](size)};this.attributeInfos.push(name);this.attributeInfosByLocation[location]=name;this.attributeInfosByName[name.name]=name}},{key:"_inferProperties",value:function(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}},{key:"_addVarying",
value:function(location,name,compositeType,size){compositeType=(0,_attributeUtils.decomposeCompositeGLType)(compositeType);size=new _accessor["default"]({type:compositeType.type,size:size*compositeType.components});location={location,name,accessor:size};this.varyingInfos.push(location);this.varyingInfosByName[location.name]=location}}]);return ProgramConfiguration}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$program_configuration.js.map
