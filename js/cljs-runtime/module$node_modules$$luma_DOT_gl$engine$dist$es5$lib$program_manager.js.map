{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$program_manager.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/lib/program-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$program_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _shadertools = require(\"@luma.gl/shadertools\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar ProgramManager = function () {\n  (0, _createClass2[\"default\"])(ProgramManager, null, [{\n    key: \"getDefaultProgramManager\",\n    value: function getDefaultProgramManager(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n      return gl.luma.defaultProgramManager;\n    }\n  }]);\n\n  function ProgramManager(gl) {\n    (0, _classCallCheck2[\"default\"])(this, ProgramManager);\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  (0, _createClass2[\"default\"])(ProgramManager, [{\n    key: \"addDefaultModule\",\n    value: function addDefaultModule(module) {\n      if (!this._defaultModules.find(function (m) {\n        return m.name === module.name;\n      })) {\n        this._defaultModules.push(module);\n      }\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"removeDefaultModule\",\n    value: function removeDefaultModule(module) {\n      var moduleName = typeof module === 'string' ? module : module.name;\n      this._defaultModules = this._defaultModules.filter(function (m) {\n        return m.name !== moduleName;\n      });\n      this.stateHash++;\n    }\n  }, {\n    key: \"addShaderHook\",\n    value: function addShaderHook(hook, opts) {\n      if (opts) {\n        hook = Object.assign(opts, {\n          hook: hook\n        });\n      }\n\n      this._hookFunctions.push(hook);\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$vs = props.vs,\n          vs = _props$vs === void 0 ? '' : _props$vs,\n          _props$fs = props.fs,\n          fs = _props$fs === void 0 ? '' : _props$fs,\n          _props$defines = props.defines,\n          defines = _props$defines === void 0 ? {} : _props$defines,\n          _props$inject = props.inject,\n          inject = _props$inject === void 0 ? {} : _props$inject,\n          _props$varyings = props.varyings,\n          varyings = _props$varyings === void 0 ? [] : _props$varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? 0x8c8d : _props$bufferMode,\n          _props$transpileToGLS = props.transpileToGLSL100,\n          transpileToGLSL100 = _props$transpileToGLS === void 0 ? false : _props$transpileToGLS;\n\n      var modules = this._getModuleList(props.modules);\n\n      var vsHash = this._getHash(vs);\n\n      var fsHash = this._getHash(fs);\n\n      var moduleHashes = modules.map(function (m) {\n        return _this._getHash(m.name);\n      }).sort();\n      var varyingHashes = varyings.map(function (v) {\n        return _this._getHash(v);\n      });\n      var defineKeys = Object.keys(defines).sort();\n      var injectKeys = Object.keys(inject).sort();\n      var defineHashes = [];\n      var injectHashes = [];\n\n      var _iterator = _createForOfIteratorHelper(defineKeys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          defineHashes.push(this._getHash(key));\n          defineHashes.push(this._getHash(defines[key]));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(injectKeys),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _key = _step2.value;\n          injectHashes.push(this._getHash(_key));\n          injectHashes.push(this._getHash(inject[_key]));\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n      if (!this._programCache[hash]) {\n        var assembled = (0, _shadertools.assembleShaders)(this.gl, {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          hookFunctions: this._hookFunctions,\n          transpileToGLSL100: transpileToGLSL100\n        });\n        this._programCache[hash] = new _webgl.Program(this.gl, {\n          hash: hash,\n          vs: assembled.vs,\n          fs: assembled.fs,\n          varyings: varyings,\n          bufferMode: bufferMode\n        });\n\n        this._getUniforms[hash] = assembled.getUniforms || function (x) {};\n\n        this._useCounts[hash] = 0;\n      }\n\n      this._useCounts[hash]++;\n      return this._programCache[hash];\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(program) {\n      return this._getUniforms[program.hash] || null;\n    }\n  }, {\n    key: \"release\",\n    value: function release(program) {\n      var hash = program.hash;\n      this._useCounts[hash]--;\n\n      if (this._useCounts[hash] === 0) {\n        this._programCache[hash][\"delete\"]();\n\n        delete this._programCache[hash];\n        delete this._getUniforms[hash];\n        delete this._useCounts[hash];\n      }\n    }\n  }, {\n    key: \"_getHash\",\n    value: function _getHash(key) {\n      if (this._hashes[key] === undefined) {\n        this._hashes[key] = this._hashCounter++;\n      }\n\n      return this._hashes[key];\n    }\n  }, {\n    key: \"_getModuleList\",\n    value: function _getModuleList() {\n      var appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var modules = new Array(this._defaultModules.length + appModules.length);\n      var seen = {};\n      var count = 0;\n\n      for (var i = 0, len = this._defaultModules.length; i < len; ++i) {\n        var module = this._defaultModules[i];\n        var name = module.name;\n        modules[count++] = module;\n        seen[name] = true;\n      }\n\n      for (var _i = 0, _len = appModules.length; _i < _len; ++_i) {\n        var _module = appModules[_i];\n        var _name = _module.name;\n\n        if (!seen[_name]) {\n          modules[count++] = _module;\n          seen[_name] = true;\n        }\n      }\n\n      modules.length = count;\n      return modules;\n    }\n  }]);\n  return ProgramManager;\n}();\n\nexports[\"default\"] = ProgramManager;\n//# sourceMappingURL=program-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_interopRequireDefault","defineProperty","_classCallCheck2","_createClass2","_shadertools","_webgl","ProgramManager","gl","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","stateHash","_hashCounter","_useCounts","key","getDefaultProgramManager","luma","defaultProgramManager","addDefaultModule","find","m","push","removeDefaultModule","moduleName","filter","addShaderHook","hook","opts","assign","get","_this","props","arguments","undefined","_props$vs","vs","_props$fs","fs","_props$defines","defines","_props$inject","inject","_props$varyings","varyings","_props$bufferMode","bufferMode","_props$transpileToGLS","transpileToGLSL100","modules","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","map","sort","varyingHashes","v","defineKeys","keys","injectKeys","defineHashes","injectHashes","_iterator","_step","_iterator2","_step2","_key","hash","concat","join","assembled","assembleShaders","hookFunctions","Program","getUniforms","x","program","release","appModules","seen","count","_i","_len","_module","_name"]
}
