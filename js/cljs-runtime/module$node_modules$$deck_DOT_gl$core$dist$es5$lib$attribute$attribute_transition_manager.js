shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_core=
require("module$node_modules$$luma_DOT_gl$core$dist$es5$index");module=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_interpolation_transition"));var _gpuSpringTransition=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_spring_transition")),_log=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$log")),TRANSITION_TYPES={interpolation:module["default"],spring:_gpuSpringTransition["default"]};require=function(){function AttributeTransitionManager(gl,
_ref){var id=_ref.id;_ref=_ref.timeline;(0,_classCallCheck2["default"])(this,AttributeTransitionManager);this.id=id;this.gl=gl;this.timeline=_ref;this.transitions={};this.needsRedraw=!1;this.numInstances=1;this.isSupported=_core.Transform.isSupported(gl)}(0,_createClass2["default"])(AttributeTransitionManager,[{key:"finalize",value:function(){for(var attributeName in this.transitions)this._removeTransition(attributeName)}},{key:"update",value:function(_ref2){var attributes=_ref2.attributes,transitions=
_ref2.transitions;this.numInstances=_ref2.numInstances||1;for(var attributeName in attributes){_ref2=attributes[attributeName];var settings=_ref2.getTransitionSetting(transitions);settings&&this._updateAttribute(attributeName,_ref2,settings)}for(var _attributeName in this.transitions)(attributeName=attributes[_attributeName])&&attributeName.getTransitionSetting(transitions)||this._removeTransition(_attributeName)}},{key:"hasAttribute",value:function(attributeName){return(attributeName=this.transitions[attributeName])&&
attributeName.inProgress}},{key:"getAttributes",value:function(){var animatedAttributes={},attributeName;for(attributeName in this.transitions){var transition=this.transitions[attributeName];transition.inProgress&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var attributeName in this.transitions)this.transitions[attributeName].update()&&(this.needsRedraw=!0);attributeName=
this.needsRedraw;this.needsRedraw=!1;return attributeName}},{key:"_removeTransition",value:function(attributeName){this.transitions[attributeName].cancel();delete this.transitions[attributeName]}},{key:"_updateAttribute",value:function(attributeName,attribute,settings){var transition=this.transitions[attributeName],isNew=!transition||transition.type!==settings.type;if(isNew){if(!this.isSupported){_log["default"].warn("WebGL2 not supported by this browser. Transition for ".concat(attributeName," is disabled."))();
return}transition&&this._removeTransition(attributeName);(transition=TRANSITION_TYPES[settings.type])?this.transitions[attributeName]=new transition({attribute,timeline:this.timeline,gl:this.gl}):(_log["default"].error("unsupported transition type '".concat(settings.type,"'"))(),isNew=!1)}if(isNew||attribute.needsRedraw())this.needsRedraw=!0,this.transitions[attributeName].start(settings,this.numInstances)}}]);return AttributeTransitionManager}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager.js.map
