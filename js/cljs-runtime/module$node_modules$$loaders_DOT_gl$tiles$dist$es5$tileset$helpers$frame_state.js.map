{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$helpers$frame_state.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/tiles/dist/es5/tileset/helpers/frame-state.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$helpers$frame_state\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFrameState = getFrameState;\n\nvar _core = require(\"@math.gl/core\");\n\nvar _culling = require(\"@math.gl/culling\");\n\nvar _geospatial = require(\"@math.gl/geospatial\");\n\nvar scratchVector = new _core.Vector3();\nvar scratchPosition = new _core.Vector3();\nvar cullingVolume = new _culling.CullingVolume([new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane(), new _culling.Plane()]);\n\nfunction getFrameState(viewport, frameNumber) {\n  var cameraDirection = viewport.cameraDirection,\n      cameraUp = viewport.cameraUp,\n      height = viewport.height;\n  var metersPerUnit = viewport.distanceScales.metersPerUnit;\n  var viewportCenterCartographic = [viewport.longitude, viewport.latitude, 0];\n\n  var viewportCenterCartesian = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(viewportCenterCartographic, new _core.Vector3());\n\n  var enuToFixedTransform = _geospatial.Ellipsoid.WGS84.eastNorthUpToFixedFrame(viewportCenterCartesian);\n\n  var cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n\n  var cameraPositionCartesian = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(cameraPositionCartographic, new _core.Vector3());\n\n  var cameraDirectionCartesian = new _core.Vector3(enuToFixedTransform.transformAsVector(new _core.Vector3(cameraDirection).scale(metersPerUnit))).normalize();\n  var cameraUpCartesian = new _core.Vector3(enuToFixedTransform.transformAsVector(new _core.Vector3(cameraUp).scale(metersPerUnit))).normalize();\n  commonSpacePlanesToWGS84(viewport, viewportCenterCartesian);\n  return {\n    camera: {\n      position: cameraPositionCartesian,\n      direction: cameraDirectionCartesian,\n      up: cameraUpCartesian\n    },\n    viewport: viewport,\n    height: height,\n    cullingVolume: cullingVolume,\n    frameNumber: frameNumber,\n    sseDenominator: 1.15\n  };\n}\n\nfunction commonSpacePlanesToWGS84(viewport, viewportCenterCartesian) {\n  var frustumPlanes = viewport.getFrustumPlanes();\n  var i = 0;\n\n  for (var dir in frustumPlanes) {\n    var plane = frustumPlanes[dir];\n    var distanceToCenter = plane.normal.dot(viewport.center);\n    scratchPosition.copy(plane.normal).scale(plane.distance - distanceToCenter).add(viewport.center);\n    var cartographicPos = viewport.unprojectPosition(scratchPosition);\n\n    var cartesianPos = _geospatial.Ellipsoid.WGS84.cartographicToCartesian(cartographicPos, new _core.Vector3());\n\n    cullingVolume.planes[i++].fromPointNormal(cartesianPos, scratchVector.copy(viewportCenterCartesian).subtract(cartesianPos));\n  }\n}\n//# sourceMappingURL=frame-state.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","getFrameState","viewport","frameNumber","cameraDirection","cameraUp","height","metersPerUnit","distanceScales","viewportCenterCartesian","_geospatial","Ellipsoid","WGS84","cartographicToCartesian","viewportCenterCartographic","longitude","latitude","_core","Vector3","enuToFixedTransform","eastNorthUpToFixedFrame","cameraPositionCartographic","unprojectPosition","cameraPosition","cameraPositionCartesian","cameraDirectionCartesian","transformAsVector","scale","normalize","cameraUpCartesian","frustumPlanes","getFrustumPlanes","i","dir","plane","distanceToCenter","normal","dot","center","scratchPosition","copy","distance","add","cartographicPos","cartesianPos","cullingVolume","planes","fromPointNormal","scratchVector","subtract","camera","position","direction","up","sseDenominator","_culling","CullingVolume","Plane"]
}
