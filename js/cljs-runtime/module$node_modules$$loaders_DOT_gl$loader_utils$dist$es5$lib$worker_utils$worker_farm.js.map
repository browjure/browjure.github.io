{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_farm.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/loader-utils/dist/es5/lib/worker-utils/worker-farm.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_farm\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _workerPool = _interopRequireDefault(require(\"./worker-pool\"));\n\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  (0, _createClass2[\"default\"])(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        _ref$onMessage = _ref.onMessage,\n        onMessage = _ref$onMessage === void 0 ? null : _ref$onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug,\n        _ref$reuseWorkers = _ref.reuseWorkers,\n        reuseWorkers = _ref$reuseWorkers === void 0 ? true : _ref$reuseWorkers;\n    (0, _classCallCheck2[\"default\"])(this, WorkerFarm);\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n    this.reuseWorkers = reuseWorkers;\n  }\n\n  (0, _createClass2[\"default\"])(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n\n      if ('reuseWorkers' in props) {\n        this.reuseWorkers = props.reuseWorkers;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new _workerPool[\"default\"]({\n          source: workerSource,\n          name: workerName,\n          onMessage: onWorkerMessage.bind(null, this.onMessage),\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug,\n          reuseWorkers: this.reuseWorkers\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n  return WorkerFarm;\n}();\n\nexports[\"default\"] = WorkerFarm;\n\nfunction onWorkerMessage(onMessage, _ref2) {\n  var worker = _ref2.worker,\n      data = _ref2.data,\n      resolve = _ref2.resolve,\n      reject = _ref2.reject;\n\n  if (onMessage) {\n    onMessage({\n      worker: worker,\n      data: data,\n      resolve: resolve,\n      reject: reject\n    });\n    return;\n  }\n\n  switch (data.type) {\n    case 'done':\n      resolve(data.result);\n      break;\n\n    case 'error':\n      reject(data.message);\n      break;\n\n    default:\n  }\n}\n//# sourceMappingURL=worker-farm.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","onWorkerMessage","onMessage","_ref2","worker","data","resolve","reject","type","result","message","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_workerPool","WorkerFarm","_ref","_ref$maxConcurrency","maxConcurrency","DEFAULT_MAX_CONCURRENCY","_ref$onMessage","_ref$onDebug","onDebug","_ref$reuseWorkers","reuseWorkers","workerPools","Map","key","isSupported","Worker","setProps","props","destroy","forEach","workerPool","_process","mark","_callee","workerSource","workerName","wrap","_callee$","_context","prev","next","_getWorkerPool","abrupt","process","stop","_x","_x2","_x3","apply","arguments","get","source","name","bind","set"]
}
