shadow$provide.module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$filesystems$browser_filesystem=function(global,require,module,exports){function readFileSlice(_x9,_x10,_x11){return _readFileSlice.apply(this,arguments)}function _readFileSlice(){_readFileSlice=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(file,start,end){var slice;return _regenerator["default"].wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return slice=file.slice(start,
end),_context8.next=3,new Promise(function(resolve,reject){var fileReader=new FileReader;fileReader.onload=function(event){return resolve(event.target&&event.target.result)};fileReader.onerror=function(error){return reject(error)};fileReader.readAsArrayBuffer(slice)});case 3:return _context8.abrupt("return",_context8.sent);case 4:case "end":return _context8.stop()}},_callee8)}));return _readFileSlice.apply(this,arguments)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass"));require=function(){function BrowserFileSystem(files){var options=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2["default"])(this,BrowserFileSystem);this._fetch=options.fetch||fetch;this.files={};for(options=0;options<files.length;++options){var file=files[options];this.files[file.name]=file}this.fetch=this.fetch.bind(this)}(0,_createClass2["default"])(BrowserFileSystem,[{key:"fetch",value:function(){var _fetch=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(path){var options,fallbackFetch,file,response,
_args=arguments;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:options=1<_args.length&&void 0!==_args[1]?_args[1]:{};if(!path.includes("://")){_context.next=4;break}fallbackFetch=options.fetch||this._fetch;return _context.abrupt("return",fallbackFetch(path,options));case 4:file=this.files[path];if(!file){_context.next=9;break}response=new Response(this.files[path]);Object.defineProperty(response,"url",{value:path});return _context.abrupt("return",
response);case 9:return _context.abrupt("return",new Response(path,{status:400,statusText:"NOT FOUND"}));case 10:case "end":return _context.stop()}},_callee,this)}));return function(_x){return _fetch.apply(this,arguments)}}()},{key:"readdir",value:function(){var _readdir=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){var files,path;return _regenerator["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:files=[];for(path in this.files)files.push(path);
return _context2.abrupt("return",files);case 3:case "end":return _context2.stop()}},_callee2,this)}));return function(){return _readdir.apply(this,arguments)}}()},{key:"stat",value:function(){var _stat=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(path,options){var file;return _regenerator["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(file=this.files[path]){_context3.next=3;break}throw Error("No such file: ".concat(path));
case 3:return _context3.abrupt("return",{size:file.size});case 4:case "end":return _context3.stop()}},_callee3,this)}));return function(_x2,_x3){return _stat.apply(this,arguments)}}()},{key:"unlink",value:function(){var _unlink=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(pathname){return _regenerator["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:delete this.files[pathname];case 1:case "end":return _context4.stop()}},_callee4,
this)}));return function(_x4){return _unlink.apply(this,arguments)}}()},{key:"open",value:function(){var _open=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(pathname){return _regenerator["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.files[pathname]);case 1:case "end":return _context5.stop()}},_callee5,this)}));return function(_x5){return _open.apply(this,arguments)}}()},{key:"read",value:function(){var _read=
(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(fd,_ref){var _ref$buffer,buffer,_ref$length,length,_ref$position,position,file,arrayBuffer;return _regenerator["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _ref$buffer=_ref.buffer,buffer=void 0===_ref$buffer?null:_ref$buffer,_ref$length=_ref.length,length=void 0===_ref$length?buffer.byteLength:_ref$length,_ref$position=_ref.position,position=void 0===_ref$position?null:
_ref$position,file=fd,_context6.next=4,readFileSlice(file,position,position+length);case 4:return arrayBuffer=_context6.sent,_context6.abrupt("return",arrayBuffer);case 6:case "end":return _context6.stop()}},_callee6)}));return function(_x6,_x7){return _read.apply(this,arguments)}}()},{key:"close",value:function(){var _close=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(fd){return _regenerator["default"].wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:case "end":return _context7.stop()}},
_callee7)}));return function(_x8){return _close.apply(this,arguments)}}()}]);return BrowserFileSystem}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$filesystems$browser_filesystem.js.map
