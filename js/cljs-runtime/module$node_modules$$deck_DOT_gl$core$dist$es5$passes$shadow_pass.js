shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=
(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,
[],function(){})),!0}catch(e){return!1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_get2=global(require("module$node_modules$$babel$runtime$helpers$get")),
_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf"));global=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$passes$layers_pass"));var _core=require("module$node_modules$$luma_DOT_gl$core$dist$es5$index");require=function(_LayersPass){function ShadowPass(gl,
props){var _parameters,_attachments;(0,_classCallCheck2["default"])(this,ShadowPass);props=_super.call(this,gl,props);props.shadowMap=new _core.Texture2D(gl,{width:1,height:1,parameters:(_parameters={},(0,_defineProperty2["default"])(_parameters,10241,9729),(0,_defineProperty2["default"])(_parameters,10240,9729),(0,_defineProperty2["default"])(_parameters,10242,33071),(0,_defineProperty2["default"])(_parameters,10243,33071),_parameters)});props.depthBuffer=new _core.Renderbuffer(gl,{format:33189,
width:1,height:1});props.fbo=new _core.Framebuffer(gl,{id:"shadowmap",width:1,height:1,attachments:(_attachments={},(0,_defineProperty2["default"])(_attachments,36064,props.shadowMap),(0,_defineProperty2["default"])(_attachments,36096,props.depthBuffer),_attachments)});return props}(0,_inherits2["default"])(ShadowPass,_LayersPass);var _super=_createSuper(ShadowPass);(0,_createClass2["default"])(ShadowPass,[{key:"render",value:function(params){var _this2=this,target=this.fbo;(0,_core.withParameters)(this.gl,
{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var viewport=params.viewports[0],pixelRatio=(0,_core.cssToDeviceRatio)(_this2.gl),width=viewport.width*pixelRatio;viewport=viewport.height*pixelRatio;width===target.width&&viewport===target.height||target.resize({width,height:viewport});(0,_get2["default"])((0,_getPrototypeOf2["default"])(ShadowPass.prototype),"render",_this2).call(_this2,_objectSpread(_objectSpread({},params),{},{target,pass:"shadow"}))})}},{key:"shouldDrawLayer",
value:function(layer){return!1!==layer.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo["delete"](),this.fbo=null);this.shadowMap&&(this.shadowMap["delete"](),this.shadowMap=null);this.depthBuffer&&(this.depthBuffer["delete"](),this.depthBuffer=null)}}]);return ShadowPass}(global["default"]);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass.js.map
