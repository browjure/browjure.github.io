{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$component_state.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lifecycle/component-state.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lifecycle$component_state\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _asyncIterator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncIterator\"));\n\nvar _log = _interopRequireDefault(require(\"../utils/log\"));\n\nvar _iterableUtils = require(\"../utils/iterable-utils\");\n\nvar _constants = require(\"./constants\");\n\nvar ASYNC_ORIGINAL = _constants.PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = _constants.PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = _constants.PROP_SYMBOLS.ASYNC_DEFAULTS;\nvar EMPTY_PROPS = Object.freeze({});\n\nvar ComponentState = function () {\n  function ComponentState() {\n    var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    (0, _classCallCheck2[\"default\"])(this, ComponentState);\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = function () {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  (0, _createClass2[\"default\"])(ComponentState, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var propName in this.asyncProps) {\n        var asyncProp = this.asyncProps[propName];\n\n        if (asyncProp.type && asyncProp.type.release) {\n          asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n        }\n      }\n    }\n  }, {\n    key: \"getOldProps\",\n    value: function getOldProps() {\n      return this.oldAsyncProps || this.oldProps;\n    }\n  }, {\n    key: \"resetOldProps\",\n    value: function resetOldProps() {\n      this.oldAsyncProps = null;\n      this.oldProps = this.component.props;\n    }\n  }, {\n    key: \"freezeAsyncOldProps\",\n    value: function freezeAsyncOldProps() {\n      if (!this.oldAsyncProps) {\n        this.oldProps = this.oldProps || this.component.props;\n        this.oldAsyncProps = Object.create(this.oldProps);\n\n        for (var propName in this.asyncProps) {\n          Object.defineProperty(this.oldAsyncProps, propName, {\n            enumerable: true,\n            value: this.oldProps[propName]\n          });\n        }\n      }\n    }\n  }, {\n    key: \"hasAsyncProp\",\n    value: function hasAsyncProp(propName) {\n      return propName in this.asyncProps;\n    }\n  }, {\n    key: \"getAsyncProp\",\n    value: function getAsyncProp(propName) {\n      var asyncProp = this.asyncProps[propName];\n      return asyncProp && asyncProp.resolvedValue;\n    }\n  }, {\n    key: \"isAsyncPropLoading\",\n    value: function isAsyncPropLoading(propName) {\n      if (propName) {\n        var asyncProp = this.asyncProps[propName];\n        return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n      }\n\n      for (var key in this.asyncProps) {\n        if (this.isAsyncPropLoading(key)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"reloadAsyncProp\",\n    value: function reloadAsyncProp(propName, value) {\n      this._watchPromise(propName, Promise.resolve(value));\n    }\n  }, {\n    key: \"setAsyncProps\",\n    value: function setAsyncProps(props) {\n      var resolvedValues = props[ASYNC_RESOLVED] || {};\n      var originalValues = props[ASYNC_ORIGINAL] || props;\n      var defaultValues = props[ASYNC_DEFAULTS] || {};\n\n      for (var propName in resolvedValues) {\n        var value = resolvedValues[propName];\n\n        this._createAsyncPropData(propName, defaultValues[propName]);\n\n        this._updateAsyncProp(propName, value);\n\n        resolvedValues[propName] = this.getAsyncProp(propName);\n      }\n\n      for (var _propName in originalValues) {\n        var _value2 = originalValues[_propName];\n\n        this._createAsyncPropData(_propName, defaultValues[_propName]);\n\n        this._updateAsyncProp(_propName, _value2);\n      }\n    }\n  }, {\n    key: \"_updateAsyncProp\",\n    value: function _updateAsyncProp(propName, value) {\n      if (!this._didAsyncInputValueChange(propName, value)) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        var fetch = this.layer && this.layer.props.fetch;\n        var url = value;\n\n        if (fetch) {\n          value = fetch(url, {\n            propName: propName,\n            layer: this.layer\n          });\n        }\n      }\n\n      if (value instanceof Promise) {\n        this._watchPromise(propName, value);\n\n        return;\n      }\n\n      if ((0, _iterableUtils.isAsyncIterable)(value)) {\n        this._resolveAsyncIterable(propName, value);\n\n        return;\n      }\n\n      this._setPropValue(propName, value);\n    }\n  }, {\n    key: \"_didAsyncInputValueChange\",\n    value: function _didAsyncInputValueChange(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n        return false;\n      }\n\n      asyncProp.lastValue = value;\n      return true;\n    }\n  }, {\n    key: \"_setPropValue\",\n    value: function _setPropValue(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n      value = this._postProcessValue(asyncProp, value);\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }, {\n    key: \"_setAsyncPropValue\",\n    value: function _setAsyncPropValue(propName, value, loadCount) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n        this.freezeAsyncOldProps();\n        asyncProp.resolvedValue = value;\n        asyncProp.resolvedLoadCount = loadCount;\n        this.onAsyncPropUpdated(propName, value);\n      }\n    }\n  }, {\n    key: \"_watchPromise\",\n    value: function _watchPromise(propName, promise) {\n      var _this = this;\n\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.pendingLoadCount++;\n      var loadCount = asyncProp.pendingLoadCount;\n      promise.then(function (data) {\n        data = _this._postProcessValue(asyncProp, data);\n\n        _this._setAsyncPropValue(propName, data, loadCount);\n\n        var onDataLoad = _this.layer && _this.layer.props.onDataLoad;\n\n        if (propName === 'data' && onDataLoad) {\n          onDataLoad(data, {\n            propName: propName,\n            layer: _this.layer\n          });\n        }\n      })[\"catch\"](function (error) {\n        return _log[\"default\"].error(error)();\n      });\n    }\n  }, {\n    key: \"_resolveAsyncIterable\",\n    value: function () {\n      var _resolveAsyncIterable2 = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(propName, iterable) {\n        var asyncProp, loadCount, data, count, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, _ref, dataTransform, onDataLoad;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (propName !== 'data') {\n                  this._setPropValue(propName, iterable);\n                }\n\n                asyncProp = this.asyncProps[propName];\n                asyncProp.pendingLoadCount++;\n                loadCount = asyncProp.pendingLoadCount;\n                data = [];\n                count = 0;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context.prev = 8;\n                _iterator = (0, _asyncIterator2[\"default\"])(iterable);\n\n              case 10:\n                _context.next = 12;\n                return _iterator.next();\n\n              case 12:\n                _step = _context.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context.next = 16;\n                return _step.value;\n\n              case 16:\n                _value = _context.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context.next = 27;\n                  break;\n                }\n\n                chunk = _value;\n                _ref = this.component ? this.component.props : {}, dataTransform = _ref.dataTransform;\n\n                if (dataTransform) {\n                  data = dataTransform(chunk, data);\n                } else {\n                  data = data.concat(chunk);\n                }\n\n                Object.defineProperty(data, '__diff', {\n                  enumerable: false,\n                  value: [{\n                    startRow: count,\n                    endRow: data.length\n                  }]\n                });\n                count = data.length;\n\n                this._setAsyncPropValue(propName, data, loadCount);\n\n              case 24:\n                _iteratorNormalCompletion = true;\n                _context.next = 10;\n                break;\n\n              case 27:\n                _context.next = 33;\n                break;\n\n              case 29:\n                _context.prev = 29;\n                _context.t0 = _context[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 33:\n                _context.prev = 33;\n                _context.prev = 34;\n\n                if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n                  _context.next = 38;\n                  break;\n                }\n\n                _context.next = 38;\n                return _iterator[\"return\"]();\n\n              case 38:\n                _context.prev = 38;\n\n                if (!_didIteratorError) {\n                  _context.next = 41;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 41:\n                return _context.finish(38);\n\n              case 42:\n                return _context.finish(33);\n\n              case 43:\n                onDataLoad = this.layer && this.layer.props.onDataLoad;\n\n                if (onDataLoad) {\n                  onDataLoad(data, {\n                    propName: propName,\n                    layer: this.layer\n                  });\n                }\n\n              case 45:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 29, 33, 43], [34,, 38, 42]]);\n      }));\n\n      function _resolveAsyncIterable(_x, _x2) {\n        return _resolveAsyncIterable2.apply(this, arguments);\n      }\n\n      return _resolveAsyncIterable;\n    }()\n  }, {\n    key: \"_postProcessValue\",\n    value: function _postProcessValue(asyncProp, value) {\n      var propType = asyncProp.type;\n\n      if (propType) {\n        if (propType.release) {\n          propType.release(asyncProp.resolvedValue, propType, this.component);\n        }\n\n        if (propType.transform) {\n          return propType.transform(value, propType, this.component);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"_createAsyncPropData\",\n    value: function _createAsyncPropData(propName, defaultValue) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (!asyncProp) {\n        var propTypes = this.component && this.component.constructor._propTypes;\n        this.asyncProps[propName] = {\n          type: propTypes && propTypes[propName],\n          lastValue: null,\n          resolvedValue: defaultValue,\n          pendingLoadCount: 0,\n          resolvedLoadCount: 0\n        };\n      }\n    }\n  }]);\n  return ComponentState;\n}();\n\nexports[\"default\"] = ComponentState;\n//# sourceMappingURL=component-state.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_asyncIterator2","_log","_iterableUtils","_constants","ASYNC_ORIGINAL","PROP_SYMBOLS","ASYNC_RESOLVED","ASYNC_DEFAULTS","EMPTY_PROPS","freeze","ComponentState","component","arguments","length","undefined","asyncProps","onAsyncPropUpdated","this.onAsyncPropUpdated","oldProps","oldAsyncProps","key","finalize","propName","asyncProp","type","release","resolvedValue","getOldProps","resetOldProps","props","freezeAsyncOldProps","create","enumerable","hasAsyncProp","getAsyncProp","isAsyncPropLoading","pendingLoadCount","resolvedLoadCount","reloadAsyncProp","_watchPromise","Promise","resolve","setAsyncProps","resolvedValues","originalValues","defaultValues","_createAsyncPropData","_updateAsyncProp","_propName","_value2","_didAsyncInputValueChange","fetch","layer","url","isAsyncIterable","_resolveAsyncIterable","_setPropValue","lastValue","_postProcessValue","_setAsyncPropValue","loadCount","promise","_this","then","data","onDataLoad","error","_resolveAsyncIterable2","mark","_callee","iterable","count","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","chunk","_ref","dataTransform","wrap","_callee$","_context","prev","next","sent","done","concat","startRow","endRow","t0","finish","stop","_x","_x2","apply","propType","transform","defaultValue","propTypes","constructor","_propTypes"]
}
