shadow$provide.module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_header=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_classCallCheck2=
global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_core=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index");require=function(){function Tile2DHeader(_ref){var x=_ref.x,y=_ref.y,z=_ref.z,onTileLoad=_ref.onTileLoad;_ref=_ref.onTileError;(0,_classCallCheck2["default"])(this,Tile2DHeader);this.x=x;this.y=y;this.z=z;this.isSelected=this.isVisible=!1;this.parent=null;this.children=
[];this.content=null;this._isCancelled=this._isLoaded=!1;this.onTileLoad=onTileLoad;this.onTileError=_ref}(0,_createClass2["default"])(Tile2DHeader,[{key:"_loadData",value:function(){var _loadData2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(getTileData,requestScheduler){var x,y,z,bbox,signal,requestToken,tileData,error;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return x=this.x,y=this.y,z=this.z,bbox=
this.bbox,this._abortController=new AbortController,signal=this._abortController.signal,_context.next=5,requestScheduler.scheduleRequest(this,function(tile){return tile.isSelected?1:-1});case 5:if(requestToken=_context.sent){_context.next=9;break}this._isCancelled=!0;return _context.abrupt("return");case 9:if(!this._isCancelled){_context.next=12;break}requestToken.done();return _context.abrupt("return");case 12:return _context.prev=12,_context.next=15,getTileData({x,y,z,bbox,signal});case 15:tileData=
_context.sent;_context.next=21;break;case 18:_context.prev=18,_context.t0=_context["catch"](12),error=_context.t0||!0;case 21:return _context.prev=21,requestToken.done(),this._isCancelled&&!tileData?this._isLoaded=!1:(this._isLoaded=!0,this._isCancelled=!1),_context.finish(21);case 25:if(this._isLoaded){_context.next=27;break}return _context.abrupt("return");case 27:if(error)this.onTileError(error,this);else this.content=tileData,this.onTileLoad(this);case 28:case "end":return _context.stop()}},_callee,
this,[[12,18,21,25]])}));return function(_x,_x2){return _loadData2.apply(this,arguments)}}()},{key:"loadData",value:function(getTileData,requestScheduler){var _this=this;getTileData&&(this._isCancelled=!1,this._loader=this._loadData(getTileData,requestScheduler),this._loader["finally"](function(){_this._loader=void 0}))}},{key:"abort",value:function(){this.isLoaded||(this._isCancelled=!0,this._abortController.abort())}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},
{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isLoading",get:function(){return!!this._loader}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var result=this.content?this.content.byteLength:0;Number.isFinite(result)||_core.log.error("byteLength not defined in tile data")();return result}}]);return Tile2DHeader}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_header.js.map
