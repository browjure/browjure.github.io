shadow$provide.module$node_modules$$math_DOT_gl$culling$dist$es5$lib$perspective_off_center_frustum=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function update(frustum){(0,_core.assert)(Number.isFinite(frustum.right)&&Number.isFinite(frustum.left)&&Number.isFinite(frustum.top)&&
Number.isFinite(frustum.bottom)&&Number.isFinite(frustum.near)&&Number.isFinite(frustum.far));var top=frustum.top,bottom=frustum.bottom,right=frustum.right,left=frustum.left,near=frustum.near,far=frustum.far;if(top!==frustum._top||bottom!==frustum._bottom||left!==frustum._left||right!==frustum._right||near!==frustum._near||far!==frustum._far)(0,_core.assert)(0<frustum.near&&frustum.near<frustum.far,"near must be greater than zero and less than far."),frustum._left=left,frustum._right=right,frustum._top=
top,frustum._bottom=bottom,frustum._near=near,frustum._far=far,frustum._perspectiveMatrix=(new _core.Matrix4).frustum({left,right,bottom,top,near,far}),frustum._infinitePerspective=(new _core.Matrix4).frustum({left,right,bottom,top,near,far:Infinity})}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),
_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_core=require("module$node_modules$$math_DOT_gl$core$dist$es5$index"),_cullingVolume=global(require("module$node_modules$$math_DOT_gl$culling$dist$es5$lib$culling_volume")),_plane=global(require("module$node_modules$$math_DOT_gl$culling$dist$es5$lib$plane")),scratchPlaneUpVector=new _core.Vector3,scratchPlaneRightVector=
new _core.Vector3,scratchPlaneNearCenter=new _core.Vector3,scratchPlaneFarCenter=new _core.Vector3,scratchPlaneNormal=new _core.Vector3;require=function(){function PerspectiveOffCenterFrustum(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2["default"])(this,PerspectiveOffCenterFrustum);options=_objectSpread({near:1,far:5E8},options);this.left=options.left;this._left=void 0;this.right=options.right;this._right=void 0;this.top=options.top;this._top=void 0;
this.bottom=options.bottom;this._bottom=void 0;this._near=this.near=options.near;this._far=this.far=options.far;this._cullingVolume=new _cullingVolume["default"]([new _plane["default"],new _plane["default"],new _plane["default"],new _plane["default"],new _plane["default"],new _plane["default"]]);this._perspectiveMatrix=new _core.Matrix4;this._infinitePerspective=new _core.Matrix4}(0,_createClass2["default"])(PerspectiveOffCenterFrustum,[{key:"clone",value:function(){return new PerspectiveOffCenterFrustum({right:this.right,
left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(other){return other&&other instanceof PerspectiveOffCenterFrustum&&this.right===other.right&&this.left===other.left&&this.top===other.top&&this.bottom===other.bottom&&this.near===other.near&&this.far===other.far}},{key:"computeCullingVolume",value:function(position,direction,up){(0,_core.assert)(position,"position is required.");(0,_core.assert)(direction,"direction is required.");(0,_core.assert)(up,
"up is required.");var planes=this._cullingVolume.planes;up=scratchPlaneUpVector.copy(up).normalize();var right=scratchPlaneRightVector.copy(direction).cross(up).normalize(),nearCenter=scratchPlaneNearCenter.copy(direction).multiplyByScalar(this.near).add(position),farCenter=scratchPlaneFarCenter.copy(direction).multiplyByScalar(this.far).add(position),normal=scratchPlaneNormal;normal.copy(right).multiplyByScalar(this.left).add(nearCenter).subtract(position).cross(up);planes[0].fromPointNormal(position,
normal);normal.copy(right).multiplyByScalar(this.right).add(nearCenter).subtract(position).cross(up).negate();planes[1].fromPointNormal(position,normal);normal.copy(up).multiplyByScalar(this.bottom).add(nearCenter).subtract(position).cross(right).negate();planes[2].fromPointNormal(position,normal);normal.copy(up).multiplyByScalar(this.top).add(nearCenter).subtract(position).cross(right);planes[3].fromPointNormal(position,normal);normal=(new _core.Vector3).copy(direction);planes[4].fromPointNormal(nearCenter,
normal);normal.negate();planes[5].fromPointNormal(farCenter,normal);return this._cullingVolume}},{key:"getPixelDimensions",value:function(drawingBufferWidth,drawingBufferHeight,distance,result){update(this);(0,_core.assert)(Number.isFinite(drawingBufferWidth)&&Number.isFinite(drawingBufferHeight));(0,_core.assert)(0<drawingBufferWidth);(0,_core.assert)(0<drawingBufferHeight);(0,_core.assert)(0<distance);(0,_core.assert)(result);var inverseNear=1/this.near,tanTheta=this.top*inverseNear;drawingBufferHeight=
2*distance*tanTheta/drawingBufferHeight;tanTheta=this.right*inverseNear;result.x=2*distance*tanTheta/drawingBufferWidth;result.y=drawingBufferHeight;return result}},{key:"projectionMatrix",get:function(){update(this);return this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){update(this);return this._infinitePerspective}}]);return PerspectiveOffCenterFrustum}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$math_DOT_gl$culling$dist$es5$lib$perspective_off_center_frustum.js.map
