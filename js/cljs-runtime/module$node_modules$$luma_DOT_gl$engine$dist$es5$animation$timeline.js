shadow$provide.module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline=function(global,require,module,exports){function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e;
},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(_e2){didErr=!0;err=_e2},f:function(){try{if(!normalCompletion&&null!=it["return"])it["return"]()}finally{if(didErr)throw err;}}}}function _unsupportedIterableToArray(o,
minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports.Timeline=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),channelHandles=1,animationHandles=1;require=function(){function Timeline(){(0,_classCallCheck2["default"])(this,Timeline);this.time=0;this.channels=
new Map;this.animations=new Map;this.playing=!1;this.lastEngineTime=-1}(0,_createClass2["default"])(Timeline,[{key:"addChannel",value:function(props){var _props$delay=props.delay,_props$duration=props.duration;_props$duration=void 0===_props$duration?Number.POSITIVE_INFINITY:_props$duration;var _props$rate=props.rate,_props$repeat=props.repeat;props=channelHandles++;_props$delay={time:0,delay:void 0===_props$delay?0:_props$delay,duration:_props$duration,rate:void 0===_props$rate?1:_props$rate,repeat:void 0===
_props$repeat?1:_props$repeat};this._setChannelTime(_props$delay,this.time);this.channels.set(props,_props$delay);return props}},{key:"removeChannel",value:function(handle){this.channels["delete"](handle);var _iterator=_createForOfIteratorHelper(this.animations),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=(0,_slicedToArray2["default"])(_step.value,2),animationHandle=_step$value[0];_step$value[1].channel===handle&&this.detachAnimation(animationHandle)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},
{key:"isFinished",value:function(handle){handle=this.channels.get(handle);return void 0===handle?!1:this.time>=handle.delay+handle.duration*handle.repeat}},{key:"getTime",value:function(handle){if(void 0===handle)return this.time;handle=this.channels.get(handle);return void 0===handle?-1:handle.time}},{key:"setTime",value:function(time){this.time=Math.max(0,time);time=this.channels.values();time=_createForOfIteratorHelper(time);var _step2;try{for(time.s();!(_step2=time.n()).done;)this._setChannelTime(_step2.value,
this.time)}catch(err){time.e(err)}finally{time.f()}_step2=this.animations.values();_step2=_createForOfIteratorHelper(_step2);var _step3;try{for(_step2.s();!(_step3=_step2.n()).done;){var animationData=_step3.value;animationData.animation.setTime(this.getTime(animationData.channel))}}catch(err){_step2.e(err)}finally{_step2.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1;this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",
value:function(animation,channelHandle){var animationHandle=animationHandles++;this.animations.set(animationHandle,{animation,channel:channelHandle});animation.setTime(this.getTime(channelHandle));return animationHandle}},{key:"detachAnimation",value:function(handle){this.animations["delete"](handle)}},{key:"update",value:function(engineTime){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=engineTime),this.setTime(this.time+(engineTime-this.lastEngineTime)),this.lastEngineTime=engineTime)}},
{key:"_setChannelTime",value:function(channel,time){time-=channel.delay;time>=channel.duration*channel.repeat?channel.time=channel.duration*channel.rate:(channel.time=Math.max(0,time)%channel.duration,channel.time*=channel.rate)}}]);return Timeline}();exports.Timeline=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$engine$dist$es5$animation$timeline.js.map
