shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$query_object=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getClosestObject=function(_ref){var pickedColors=_ref.pickedColors,layers=_ref.layers,deviceX=_ref.deviceX,deviceY=_ref.deviceY,deviceRadius=_ref.deviceRadius,deviceRect=_ref.deviceRect;if(pickedColors){_ref=deviceRect.x;var y=deviceRect.y,
width=deviceRect.width;deviceRect=deviceRect.height;var minSquareDistanceToCenter=deviceRadius*deviceRadius;deviceRadius=-1;for(var i=0,row=0;row<deviceRect;row++){var dy=row+y-deviceY;dy*=dy;if(dy>minSquareDistanceToCenter)i+=4*width;else for(var col=0;col<width;col++){if(0<=pickedColors[i+3]-1){var dx=col+_ref-deviceX;dx=dx*dx+dy;dx<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=dx,deviceRadius=i)}i+=4}}if(0<=deviceRadius){deviceX=pickedColors[deviceRadius+3]-1;pickedColors=pickedColors.slice(deviceRadius,
deviceRadius+4);if(layers=layers[deviceX])return deviceX=layers.decodePickingColor(pickedColors),deviceY=Math.floor(deviceRadius/4/width),{pickedColor:pickedColors,pickedLayer:layers,pickedObjectIndex:deviceX,pickedX:_ref+(deviceRadius/4-deviceY*width),pickedY:y+deviceY};_log["default"].error("Picked non-existent layer. Is picking buffer corrupt?")()}}return NO_PICKED_OBJECT};exports.getUniqueObjects=function(_ref2){var pickedColors=_ref2.pickedColors;_ref2=_ref2.layers;var uniqueColors=new Map;if(pickedColors)for(var i=
0;i<pickedColors.length;i+=4){var pickedLayerIndex=pickedColors[i+3]-1;if(0<=pickedLayerIndex){var pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");uniqueColors.has(colorKey)||((pickedLayerIndex=_ref2[pickedLayerIndex])?uniqueColors.set(colorKey,{pickedColor,pickedLayer:pickedLayerIndex,pickedObjectIndex:pickedLayerIndex.decodePickingColor(pickedColor)}):_log["default"].error("Picked non-existent layer. Is picking buffer corrupt?")())}}return Array.from(uniqueColors.values())};
var _log=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$log")),NO_PICKED_OBJECT={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1}}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$query_object.js.map
