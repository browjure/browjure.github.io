shadow$provide.module$node_modules$$math_DOT_gl$web_mercator$dist$es5$web_mercator_utils=function(global,require,module,exports){function scaleToZoom(scale){return Math.log2(scale)}function lngLatToWorld(_ref){var _ref2=(0,_slicedToArray2["default"])(_ref,2);_ref=_ref2[0];_ref2=_ref2[1];(0,_assert["default"])(Number.isFinite(_ref));(0,_assert["default"])(Number.isFinite(_ref2)&&-90<=_ref2&&90>=_ref2,"invalid latitude");return[TILE_SIZE*(_ref*DEGREES_TO_RADIANS+PI)/(2*PI),TILE_SIZE*(PI+Math.log(Math.tan(PI_4+
_ref2*DEGREES_TO_RADIANS*.5)))/(2*PI)]}function worldToLngLat(_ref3){_ref3=(0,_slicedToArray2["default"])(_ref3,2);return[(_ref3[0]/TILE_SIZE*2*PI-PI)*RADIANS_TO_DEGREES,2*(Math.atan(Math.exp(_ref3[1]/TILE_SIZE*2*PI-PI))-PI_4)*RADIANS_TO_DEGREES]}function getDistanceScales(_ref6){var latitude=_ref6.latitude,longitude=_ref6.longitude;_ref6=_ref6.highPrecision;var highPrecision=void 0===_ref6?!1:_ref6;(0,_assert["default"])(Number.isFinite(latitude)&&Number.isFinite(longitude));longitude={};var worldSize=
TILE_SIZE,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);_ref6=worldSize/360;var unitsPerDegreeY=_ref6/latCosine,altUnitsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine;longitude.unitsPerMeter=[altUnitsPerMeter,altUnitsPerMeter,altUnitsPerMeter];longitude.metersPerUnit=[1/altUnitsPerMeter,1/altUnitsPerMeter,1/altUnitsPerMeter];longitude.unitsPerDegree=[_ref6,unitsPerDegreeY,altUnitsPerMeter];longitude.degreesPerUnit=[1/_ref6,1/unitsPerDegreeY,1/altUnitsPerMeter];highPrecision&&(latitude=DEGREES_TO_RADIANS*
Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,highPrecision=worldSize/EARTH_CIRCUMFERENCE*latitude,unitsPerDegreeY=highPrecision/unitsPerDegreeY*altUnitsPerMeter,longitude.unitsPerDegree2=[0,_ref6*latitude/2,highPrecision],longitude.unitsPerMeter2=[unitsPerDegreeY,0,unitsPerDegreeY]);return longitude}function getProjectionParameters(_ref8){var _ref8$altitude=_ref8.altitude;_ref8$altitude=void 0===_ref8$altitude?DEFAULT_ALTITUDE:_ref8$altitude;var _ref8$pitch=_ref8.pitch,_ref8$nearZMultiplier=_ref8.nearZMultiplier,
_ref8$farZMultiplier=_ref8.farZMultiplier;_ref8$pitch=(void 0===_ref8$pitch?0:_ref8$pitch)*DEGREES_TO_RADIANS;var halfFov=Math.atan(.5/_ref8$altitude);return{fov:2*halfFov,aspect:_ref8.width/_ref8.height,focalDistance:_ref8$altitude,near:void 0===_ref8$nearZMultiplier?1:_ref8$nearZMultiplier,far:(Math.sin(halfFov)*_ref8$altitude/Math.sin(Math.min(Math.max(Math.PI/2-_ref8$pitch-halfFov,.01),Math.PI-.01))*Math.sin(_ref8$pitch)+_ref8$altitude)*(void 0===_ref8$farZMultiplier?1:_ref8$farZMultiplier)}}
global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.zoomToScale=function(zoom){return Math.pow(2,zoom)};exports.scaleToZoom=scaleToZoom;exports.lngLatToWorld=lngLatToWorld;exports.worldToLngLat=worldToLngLat;exports.getMeterZoom=function(_ref5){_ref5=_ref5.latitude;(0,_assert["default"])(Number.isFinite(_ref5));return scaleToZoom(EARTH_CIRCUMFERENCE*
Math.cos(_ref5*DEGREES_TO_RADIANS))-9};exports.getDistanceScales=getDistanceScales;exports.addMetersToLngLat=function(lngLatZ,xyz){var _lngLatZ=(0,_slicedToArray2["default"])(lngLatZ,3),longitude=_lngLatZ[0],latitude=_lngLatZ[1];_lngLatZ=_lngLatZ[2];xyz=(0,_slicedToArray2["default"])(xyz,3);var x=xyz[0],y=xyz[1];xyz=xyz[2];latitude=getDistanceScales({longitude,latitude,highPrecision:!0});longitude=latitude.unitsPerMeter;latitude=latitude.unitsPerMeter2;lngLatZ=lngLatToWorld(lngLatZ);lngLatZ[0]+=x*
(longitude[0]+latitude[0]*y);lngLatZ[1]+=y*(longitude[1]+latitude[1]*y);lngLatZ=worldToLngLat(lngLatZ);x=(_lngLatZ||0)+(xyz||0);return Number.isFinite(_lngLatZ)||Number.isFinite(xyz)?[lngLatZ[0],lngLatZ[1],x]:lngLatZ};exports.getViewMatrix=function(_ref7){var height=_ref7.height,pitch=_ref7.pitch,bearing=_ref7.bearing,altitude=_ref7.altitude,scale=_ref7.scale;_ref7=_ref7.center;_ref7=void 0===_ref7?null:_ref7;var vm=(0,_mathUtils.createMat4)();mat4.translate(vm,vm,[0,0,-altitude]);mat4.rotateX(vm,
vm,-pitch*DEGREES_TO_RADIANS);mat4.rotateZ(vm,vm,bearing*DEGREES_TO_RADIANS);scale/=height;mat4.scale(vm,vm,[scale,scale,scale]);_ref7&&mat4.translate(vm,vm,vec3.negate([],_ref7));return vm};exports.getProjectionParameters=getProjectionParameters;exports.getProjectionMatrix=function(_ref9){_ref9=getProjectionParameters({width:_ref9.width,height:_ref9.height,altitude:_ref9.altitude,pitch:_ref9.pitch,nearZMultiplier:_ref9.nearZMultiplier,farZMultiplier:_ref9.farZMultiplier});return mat4.perspective([],
_ref9.fov,_ref9.aspect,_ref9.near,_ref9.far)};exports.worldToPixels=function(xyz,pixelProjectionMatrix){var _xyz2=(0,_slicedToArray2["default"])(xyz,3);xyz=_xyz2[0];var y=_xyz2[1];_xyz2=_xyz2[2];_xyz2=void 0===_xyz2?0:_xyz2;(0,_assert["default"])(Number.isFinite(xyz)&&Number.isFinite(y)&&Number.isFinite(_xyz2));return(0,_mathUtils.transformVector)(pixelProjectionMatrix,[xyz,y,_xyz2,1])};exports.pixelsToWorld=function(xyz,pixelUnprojectionMatrix){var targetZ=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:0,_xyz3=(0,_slicedToArray2["default"])(xyz,3),x=_xyz3[0],y=_xyz3[1];_xyz3=_xyz3[2];(0,_assert["default"])(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate");if(Number.isFinite(_xyz3))return(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,_xyz3,1]);_xyz3=(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,0,1]);x=(0,_mathUtils.transformVector)(pixelUnprojectionMatrix,[x,y,1,1]);y=_xyz3[2];var z1=x[2];return vec2.lerp([],_xyz3,x,y===z1?0:((targetZ||0)-
y)/(z1-y))};var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_mathUtils=require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$math_utils"),mat4=global(require("module$node_modules$gl_matrix$cjs$mat4")),vec2=global(require("module$node_modules$gl_matrix$cjs$vec2")),vec3=global(require("module$node_modules$gl_matrix$cjs$vec3")),_assert=module(require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$assert")),PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=
PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003E4,DEFAULT_ALTITUDE=1.5}
//# sourceMappingURL=module$node_modules$$math_DOT_gl$web_mercator$dist$es5$web_mercator_utils.js.map
