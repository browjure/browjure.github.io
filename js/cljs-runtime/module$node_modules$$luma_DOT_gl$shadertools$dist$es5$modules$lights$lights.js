shadow$provide.module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights=function(global,require,module,exports){function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e;
},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(_e2){didErr=!0;err=_e2},f:function(){try{if(!normalCompletion&&null!=it["return"])it["return"]()}finally{if(didErr)throw err;}}}}function _unsupportedIterableToArray(o,
minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function convertColor(){var _ref=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_ref$color=_ref.color;_ref=_ref.intensity;var intensity=void 0===_ref?1:_ref;return(void 0===_ref$color?[0,0,0]:_ref$color).map(function(component){return component*intensity/255})}function getLightSourceUniforms(_ref2){var ambientLight=_ref2.ambientLight,_ref2$pointLights=_ref2.pointLights;_ref2$pointLights=void 0===_ref2$pointLights?[]:_ref2$pointLights;_ref2=_ref2.directionalLights;_ref2=void 0===_ref2?[]:_ref2;var lightSourceUniforms={};
lightSourceUniforms["lighting_uAmbientLight.color"]=ambientLight?convertColor(ambientLight):[0,0,0];_ref2$pointLights.forEach(function(pointLight,index){lightSourceUniforms["lighting_uPointLight[".concat(index,"].color")]=convertColor(pointLight);lightSourceUniforms["lighting_uPointLight[".concat(index,"].position")]=pointLight.position;lightSourceUniforms["lighting_uPointLight[".concat(index,"].attenuation")]=pointLight.attenuation||[1,0,0]});lightSourceUniforms.lighting_uPointLightCount=_ref2$pointLights.length;
_ref2.forEach(function(directionalLight,index){lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].color")]=convertColor(directionalLight);lightSourceUniforms["lighting_uDirectionalLight[".concat(index,"].direction")]=directionalLight.direction});lightSourceUniforms.lighting_uDirectionalLightCount=_ref2.length;return lightSourceUniforms}function getUniforms(){var opts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:INITIAL_MODULE_OPTIONS;if("lightSources"in opts){var _ref3=opts.lightSources||
{},ambientLight=_ref3.ambientLight,pointLights=_ref3.pointLights;_ref3=_ref3.directionalLights;return ambientLight||pointLights&&0<pointLights.length||_ref3&&0<_ref3.length?Object.assign({},getLightSourceUniforms({ambientLight,pointLights,directionalLights:_ref3}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in opts){ambientLight={pointLights:[],directionalLights:[]};opts=_createForOfIteratorHelper(opts.lights||[]);try{for(opts.s();!(pointLights=opts.n()).done;)switch(_ref3=pointLights.value,
_ref3.type){case "ambient":ambientLight.ambientLight=_ref3;break;case "directional":ambientLight.directionalLights.push(_ref3);break;case "point":ambientLight.pointLights.push(_ref3)}}catch(err){opts.e(err)}finally{opts.f()}return getUniforms({lightSources:ambientLight})}return{}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.lights=void 0;require=global(require("module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights_glsl"));
var INITIAL_MODULE_OPTIONS={lightSources:{}};exports.lights={name:"lights",vs:require["default"],fs:require["default"],getUniforms,defines:{MAX_LIGHTS:3}}}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights.js.map
