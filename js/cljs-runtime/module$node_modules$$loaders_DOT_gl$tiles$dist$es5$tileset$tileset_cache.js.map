{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$tileset_cache.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/tiles/dist/es5/tileset/tileset-cache.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$tiles$dist$es5$tileset$tileset_cache\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _doublyLinkedList = _interopRequireDefault(require(\"../utils/doubly-linked-list\"));\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nvar TilesetCache = function () {\n  function TilesetCache() {\n    (0, _classCallCheck2[\"default\"])(this, TilesetCache);\n    this._list = new _doublyLinkedList[\"default\"]();\n    this._sentinel = this._list.add('sentinel');\n    this._trimTiles = false;\n  }\n\n  (0, _createClass2[\"default\"])(TilesetCache, [{\n    key: \"reset\",\n    value: function reset() {\n      this._list.splice(this._list.tail, this._sentinel);\n    }\n  }, {\n    key: \"touch\",\n    value: function touch(tile) {\n      var node = tile._cacheNode;\n\n      if (defined(node)) {\n        this._list.splice(this._sentinel, node);\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(tileset, tile, addCallback) {\n      if (!defined(tile._cacheNode)) {\n        tile._cacheNode = this._list.add(tile);\n\n        if (addCallback) {\n          addCallback(tileset, tile);\n        }\n      }\n    }\n  }, {\n    key: \"unloadTile\",\n    value: function unloadTile(tileset, tile, unloadCallback) {\n      var node = tile._cacheNode;\n\n      if (!defined(node)) {\n        return;\n      }\n\n      this._list.remove(node);\n\n      tile._cacheNode = undefined;\n\n      if (unloadCallback) {\n        unloadCallback(tileset, tile);\n      }\n    }\n  }, {\n    key: \"unloadTiles\",\n    value: function unloadTiles(tileset, unloadCallback) {\n      var trimTiles = this._trimTiles;\n      this._trimTiles = false;\n      var list = this._list;\n      var maximumMemoryUsageInBytes = tileset.maximumMemoryUsage * 1024 * 1024;\n      var sentinel = this._sentinel;\n      var node = list.head;\n\n      while (node !== sentinel && (tileset.gpuMemoryUsageInBytes > maximumMemoryUsageInBytes || trimTiles)) {\n        var tile = node.item;\n        node = node.next;\n        this.unloadTile(tileset, tile, unloadCallback);\n      }\n    }\n  }, {\n    key: \"trim\",\n    value: function trim() {\n      this._trimTiles = true;\n    }\n  }]);\n  return TilesetCache;\n}();\n\nexports[\"default\"] = TilesetCache;\n//# sourceMappingURL=tileset-cache.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","defined","x","undefined","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_doublyLinkedList","TilesetCache","_list","_sentinel","add","_trimTiles","key","reset","splice","tail","touch","tile","node","_cacheNode","tileset","addCallback","unloadTile","unloadCallback","remove","unloadTiles","trimTiles","maximumMemoryUsageInBytes","maximumMemoryUsage","sentinel","head","gpuMemoryUsageInBytes","item","next","trim"]
}
