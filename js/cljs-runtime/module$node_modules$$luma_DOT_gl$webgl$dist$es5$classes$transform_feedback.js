shadow$provide.module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$transform_feedback=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_assertThisInitialized2=global(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_gltools=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$index");
module=global(require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$resource"));var _buffer=global(require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$buffer")),_utils=require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$utils$index");require=function(_Resource){function TransformFeedback(gl){var props=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck2["default"])(this,TransformFeedback);(0,_gltools.assertWebGL2Context)(gl);var _this=_super.call(this,
gl,props);_this.initialize(props);_this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]);Object.seal((0,_assertThisInitialized2["default"])(_this));return _this}(0,_inherits2["default"])(TransformFeedback,_Resource);var _super=_createSuper(TransformFeedback);(0,_createClass2["default"])(TransformFeedback,null,[{key:"isSupported",value:function(gl){return(0,_gltools.isWebGL2)(gl)}}]);(0,_createClass2["default"])(TransformFeedback,[{key:"initialize",value:function(){var _this2=this,
props=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.buffers={};this.unused={};this.configuration=null;this.bindOnUse=!0;(0,_utils.isObjectEmpty)(this.buffers)||this.bind(function(){return _this2._unbindBuffers()});this.setProps(props);return this}},{key:"setProps",value:function(props){"program"in props&&(this.configuration=props.program&&props.program.configuration);"configuration"in props&&(this.configuration=props.configuration);"bindOnUse"in props&&(props=props.bindOnUse);"buffers"in
props&&this.setBuffers(props.buffers)}},{key:"setBuffers",value:function(){var _this3=this,buffers=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.bind(function(){for(var bufferName in buffers)_this3.setBuffer(bufferName,buffers[bufferName])});return this}},{key:"setBuffer",value:function(locationOrName,bufferOrParams){var _this4=this,location=this._getVaryingIndex(locationOrName),_this$_getBufferParam=this._getBufferParams(bufferOrParams),buffer=_this$_getBufferParam.buffer,byteSize=
_this$_getBufferParam.byteSize;_this$_getBufferParam=_this$_getBufferParam.byteOffset;if(0>location)return this.unused[locationOrName]=buffer,_gltools.log.warn(function(){return"".concat(_this4.id," unused varying buffer ").concat(locationOrName)})(),this;this.buffers[location]=bufferOrParams;this.bindOnUse||this._bindBuffer(location,buffer,_this$_getBufferParam,byteSize);return this}},{key:"begin",value:function(){var primitiveMode=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.gl.bindTransformFeedback(36386,
this.handle);this._bindBuffers();this.gl.beginTransformFeedback(primitiveMode);return this}},{key:"end",value:function(){this.gl.endTransformFeedback();this._unbindBuffers();this.gl.bindTransformFeedback(36386,null);return this}},{key:"_getBufferParams",value:function(bufferOrParams){if(!1===bufferOrParams instanceof _buffer["default"]){var buffer=bufferOrParams.buffer;var byteSize=bufferOrParams.byteSize;var byteOffset=bufferOrParams.byteOffset}else buffer=bufferOrParams;if(void 0!==byteOffset||
void 0!==byteSize)byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset;return{buffer,byteOffset,byteSize}}},{key:"_getVaryingInfo",value:function(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}},{key:"_getVaryingIndex",value:function(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;locationOrName=Number(locationOrName);return Number.isFinite(locationOrName)?locationOrName:-1}},
{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var bufferIndex in this.buffers){var _this$_getBufferParam2=this._getBufferParams(this.buffers[bufferIndex]);this._bindBuffer(bufferIndex,_this$_getBufferParam2.buffer,_this$_getBufferParam2.byteOffset,_this$_getBufferParam2.byteSize)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}},{key:"_bindBuffer",value:function(index,buffer){var byteOffset=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,byteSize=3<arguments.length?arguments[3]:void 0,handle=buffer&&buffer.handle;handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle);return this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(handle){this.gl.bindTransformFeedback(36386,
this.handle)}}]);return TransformFeedback}(module["default"]);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$transform_feedback.js.map
