shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_interpolation_transition=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||
(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e;},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},
n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(_e2){didErr=!0;err=_e2},f:function(){try{if(!normalCompletion&&null!=it["return"])it["return"]()}finally{if(didErr)throw err;}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,
minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_core=require("module$node_modules$$luma_DOT_gl$core$dist$es5$index"),_attribute=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute")),_attributeTransitionUtils=require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_utils"),_transition=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$transition"));require=function(){function GPUInterpolationTransition(_ref){var gl=
_ref.gl,attribute=_ref.attribute;_ref=_ref.timeline;(0,_classCallCheck2["default"])(this,GPUInterpolationTransition);this.gl=gl;this.type="interpolation";this.transition=new _transition["default"](_ref);this.attribute=attribute;this.attributeInTransition=new _attribute["default"](gl,attribute.settings);this.currentStartIndices=attribute.startIndices;this.currentLength=0;attribute=(0,_attributeTransitionUtils.getAttributeTypeFromSize)(attribute.size);this.transform=new _core.Transform(gl,{vs,defines:{ATTRIBUTE_TYPE:attribute},
varyings:["vCurrent"]});attribute={byteLength:0,usage:35050};this.buffers=[new _core.Buffer(gl,attribute),new _core.Buffer(gl,attribute)]}(0,_createClass2["default"])(GPUInterpolationTransition,[{key:"start",value:function(transitionSettings,numInstances){if(0>=transitionSettings.duration)this.transition.cancel();else{var gl=this.gl,buffers=this.buffers,attribute=this.attribute;(0,_attributeTransitionUtils.cycleBuffers)(buffers);var padBufferOpts={numInstances,attribute,fromLength:this.currentLength,
fromStartIndices:this.currentStartIndices,getData:transitionSettings.enter},_iterator=_createForOfIteratorHelper(buffers),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var buffer=_step.value;(0,_attributeTransitionUtils.padBuffer)(_objectSpread({buffer},padBufferOpts))}}catch(err){_iterator.e(err)}finally{_iterator.f()}this.currentStartIndices=attribute.startIndices;this.currentLength=(0,_attributeTransitionUtils.getAttributeBufferLength)(attribute,numInstances);this.attributeInTransition.update({buffer:buffers[1],
value:attribute.value});this.transition.start(transitionSettings);this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aFrom:buffers[0],aTo:(0,_attributeTransitionUtils.getSourceBufferAttribute)(gl,attribute)},feedbackBuffers:{vCurrent:buffers[1]}})}}},{key:"update",value:function(){var updated=this.transition.update();if(updated){var _this$transition=this.transition,_this$transition$sett=_this$transition.settings,easing=_this$transition$sett.easing;_this$transition=
easing(_this$transition.time/_this$transition$sett.duration);this.transform.run({uniforms:{time:_this$transition}})}return updated}},{key:"cancel",value:function(){this.transition.cancel();for(this.transform["delete"]();this.buffers.length;)this.buffers.pop()["delete"]()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]);return GPUInterpolationTransition}();exports["default"]=require;var vs="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent \x3d mix(aFrom, aTo, time);\n  gl_Position \x3d vec4(0.0);\n}\n"}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_interpolation_transition.js.map
