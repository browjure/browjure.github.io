shadow$provide.module$node_modules$$luma_DOT_gl$gltools$dist$es5$polyfill$polyfill_vertex_array_object=function(global,require,module,exports){function wrapGLError(gl){var f=gl.getError;gl.getError=function(){do{var err=f.apply(gl);0!==err&&(glErrorShadow[err]=!0)}while(0!==err);for(err in glErrorShadow)if(glErrorShadow[err])return delete glErrorShadow[err],parseInt(err,10);return 0}}Object.defineProperty(exports,"__esModule",{value:!0});exports.polyfillVertexArrayObject=function(gl){if("function"!==
typeof gl.createVertexArray){var original_getSupportedExtensions=gl.getSupportedExtensions;gl.getSupportedExtensions=function(){var list=original_getSupportedExtensions.call(this)||[];0>list.indexOf("OES_vertex_array_object")&&list.push("OES_vertex_array_object");return list};var original_getExtension=gl.getExtension;gl.getExtension=function(name){var ext=original_getExtension.call(this,name);if(ext)return ext;if("OES_vertex_array_object"!==name)return null;gl.__OESVertexArrayObject||(this.__OESVertexArrayObject=
new OESVertexArrayObject(this));return this.__OESVertexArrayObject}}};var _env=require("module$node_modules$probe_DOT_gl$env"),glErrorShadow={},WebGLVertexArrayObjectOES$jscomp$0=function WebGLVertexArrayObjectOES(ext){var gl=ext.gl;this.ext=ext;this.isAlive=!0;this.hasBeenBound=!1;this.elementArrayBuffer=null;this.attribs=Array(ext.maxVertexAttribs);for(ext=0;ext<this.attribs.length;ext++){var attrib=new WebGLVertexArrayObjectOES.VertexAttrib(gl);this.attribs[ext]=attrib}this.maxAttrib=0};WebGLVertexArrayObjectOES$jscomp$0.VertexAttrib=
function(gl){this.enabled=!1;this.buffer=null;this.size=4;this.type=5126;this.normalized=!1;this.stride=16;this.offset=0;this.cached="";this.recache()};WebGLVertexArrayObjectOES$jscomp$0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var OESVertexArrayObject=function(gl){var self=this;this.gl=gl;wrapGLError(gl);var original=this.original={getParameter:gl.getParameter,enableVertexAttribArray:gl.enableVertexAttribArray,
disableVertexAttribArray:gl.disableVertexAttribArray,bindBuffer:gl.bindBuffer,getVertexAttrib:gl.getVertexAttrib,vertexAttribPointer:gl.vertexAttribPointer};gl.getParameter=function(pname){return pname===self.VERTEX_ARRAY_BINDING_OES?self.currentVertexArrayObject===self.defaultVertexArrayObject?null:self.currentVertexArrayObject:original.getParameter.apply(this,arguments)};gl.enableVertexAttribArray=function(index){var vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);
vao.attribs[index].enabled=!0;return original.enableVertexAttribArray.apply(this,arguments)};gl.disableVertexAttribArray=function(index){var vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);vao.attribs[index].enabled=!1;return original.disableVertexAttribArray.apply(this,arguments)};gl.bindBuffer=function(target,buffer){switch(target){case 34962:self.currentArrayBuffer=buffer;break;case 34963:self.currentVertexArrayObject.elementArrayBuffer=buffer}return original.bindBuffer.apply(this,
arguments)};gl.getVertexAttrib=function(index,pname){var attrib=self.currentVertexArrayObject.attribs[index];switch(pname){case 34975:return attrib.buffer;case 34338:return attrib.enabled;case 34339:return attrib.size;case 34340:return attrib.stride;case 34341:return attrib.type;case 34922:return attrib.normalized;default:return original.getVertexAttrib.apply(this,arguments)}};gl.vertexAttribPointer=function(indx,size,type,normalized,stride,offset){var vao=self.currentVertexArrayObject;vao.maxAttrib=
Math.max(vao.maxAttrib,indx);vao=vao.attribs[indx];vao.buffer=self.currentArrayBuffer;vao.size=size;vao.type=type;vao.normalized=normalized;vao.stride=stride;vao.offset=offset;vao.recache();return original.vertexAttribPointer.apply(this,arguments)};gl.instrumentExtension&&gl.instrumentExtension(this,"OES_vertex_array_object");gl.canvas&&gl.canvas.addEventListener("webglcontextrestored",function(){_env.global.console&&_env.global.console.log&&_env.global.console.log("OESVertexArrayObject emulation library context restored");
self.reset_()},!0);this.reset_()};OESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES=34229;OESVertexArrayObject.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var ii=0;ii<this.vertexArrayObjects.length;++ii)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921);this.defaultVertexArrayObject=new WebGLVertexArrayObjectOES$jscomp$0(this);this.currentArrayBuffer=this.currentVertexArrayObject=null;this.vertexArrayObjects=[this.defaultVertexArrayObject];
this.bindVertexArrayOES(null)};OESVertexArrayObject.prototype.createVertexArrayOES=function(){var arrayObject=new WebGLVertexArrayObjectOES$jscomp$0(this);this.vertexArrayObjects.push(arrayObject);return arrayObject};OESVertexArrayObject.prototype.deleteVertexArrayOES=function(arrayObject){arrayObject.isAlive=!1;this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject),1);this.currentVertexArrayObject===arrayObject&&this.bindVertexArrayOES(null)};OESVertexArrayObject.prototype.isVertexArrayOES=
function(arrayObject){return arrayObject&&arrayObject instanceof WebGLVertexArrayObjectOES$jscomp$0&&arrayObject.hasBeenBound&&arrayObject.ext===this?!0:!1};OESVertexArrayObject.prototype.bindVertexArrayOES=function(arrayObject){var gl=this.gl;if(arrayObject&&!arrayObject.isAlive)glErrorShadow[1282]=!0,_env.global.console&&_env.global.console.error&&_env.global.console.error("bindVertexArrayOES: attempt to bind deleted arrayObject");else{var original=this.original,oldVAO=this.currentVertexArrayObject;
this.currentVertexArrayObject=arrayObject||this.defaultVertexArrayObject;this.currentVertexArrayObject.hasBeenBound=!0;arrayObject=this.currentVertexArrayObject;if(oldVAO!==arrayObject){oldVAO&&arrayObject.elementArrayBuffer===oldVAO.elementArrayBuffer||original.bindBuffer.call(gl,34963,arrayObject.elementArrayBuffer);for(var currentBinding=this.currentArrayBuffer,maxAttrib=Math.max(oldVAO?oldVAO.maxAttrib:0,arrayObject.maxAttrib),n=0;n<=maxAttrib;n++){var attrib=arrayObject.attribs[n],oldAttrib=
oldVAO?oldVAO.attribs[n]:null;oldVAO&&attrib.enabled===oldAttrib.enabled||(attrib.enabled?original.enableVertexAttribArray.call(gl,n):original.disableVertexAttribArray.call(gl,n));if(attrib.enabled){var bufferChanged=!1;oldVAO&&attrib.buffer===oldAttrib.buffer||(currentBinding!==attrib.buffer&&(original.bindBuffer.call(gl,34962,attrib.buffer),currentBinding=attrib.buffer),bufferChanged=!0);(bufferChanged||attrib.cached!==oldAttrib.cached)&&original.vertexAttribPointer.call(gl,n,attrib.size,attrib.type,
attrib.normalized,attrib.stride,attrib.offset)}}this.currentArrayBuffer!==currentBinding&&original.bindBuffer.call(gl,34962,this.currentArrayBuffer)}}}}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$gltools$dist$es5$polyfill$polyfill_vertex_array_object.js.map
