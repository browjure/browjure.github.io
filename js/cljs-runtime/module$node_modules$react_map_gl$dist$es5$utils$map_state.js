shadow$provide.module$node_modules$react_map_gl$dist$es5$utils$map_state=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=exports.MAPBOX_LIMITS=void 0;var _defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_viewportMercatorProject=global(require("module$node_modules$viewport_mercator_project$index")),
_mathUtils=require("module$node_modules$react_map_gl$dist$es5$utils$math_utils"),_assert=module(require("module$node_modules$react_map_gl$dist$es5$utils$assert")),MAPBOX_LIMITS={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85};exports.MAPBOX_LIMITS=MAPBOX_LIMITS;require=function(){function MapState(_ref){var width=_ref.width,height=_ref.height,latitude=_ref.latitude,longitude=_ref.longitude,zoom=_ref.zoom,_ref$bearing=_ref.bearing;_ref$bearing=void 0===_ref$bearing?0:_ref$bearing;var _ref$pitch=_ref.pitch;
_ref$pitch=void 0===_ref$pitch?0:_ref$pitch;var _ref$altitude=_ref.altitude;_ref$altitude=void 0===_ref$altitude?1.5:_ref$altitude;var _ref$maxZoom=_ref.maxZoom;_ref$maxZoom=void 0===_ref$maxZoom?MAPBOX_LIMITS.maxZoom:_ref$maxZoom;var _ref$minZoom=_ref.minZoom;_ref$minZoom=void 0===_ref$minZoom?MAPBOX_LIMITS.minZoom:_ref$minZoom;var _ref$maxPitch=_ref.maxPitch;_ref$maxPitch=void 0===_ref$maxPitch?MAPBOX_LIMITS.maxPitch:_ref$maxPitch;var _ref$minPitch=_ref.minPitch;_ref$minPitch=void 0===_ref$minPitch?
MAPBOX_LIMITS.minPitch:_ref$minPitch;var transitionDuration=_ref.transitionDuration,transitionEasing=_ref.transitionEasing,transitionInterpolator=_ref.transitionInterpolator,transitionInterruption=_ref.transitionInterruption,startPanLngLat=_ref.startPanLngLat,startZoomLngLat=_ref.startZoomLngLat,startRotatePos=_ref.startRotatePos,startBearing=_ref.startBearing,startPitch=_ref.startPitch;_ref=_ref.startZoom;(0,_classCallCheck2["default"])(this,MapState);(0,_assert["default"])(Number.isFinite(width),
"`width` must be supplied");(0,_assert["default"])(Number.isFinite(height),"`height` must be supplied");(0,_assert["default"])(Number.isFinite(longitude),"`longitude` must be supplied");(0,_assert["default"])(Number.isFinite(latitude),"`latitude` must be supplied");(0,_assert["default"])(Number.isFinite(zoom),"`zoom` must be supplied");this._viewportProps=this._applyConstraints({width,height,latitude,longitude,zoom,bearing:_ref$bearing,pitch:_ref$pitch,altitude:_ref$altitude,maxZoom:_ref$maxZoom,
minZoom:_ref$minZoom,maxPitch:_ref$maxPitch,minPitch:_ref$minPitch,transitionDuration,transitionEasing,transitionInterpolator,transitionInterruption});this._state={startPanLngLat,startZoomLngLat,startRotatePos,startBearing,startPitch,startZoom:_ref}}(0,_createClass2["default"])(MapState,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(_ref2){return this._getUpdatedMapState({startPanLngLat:this._unproject(_ref2.pos)})}},
{key:"pan",value:function(_ref3){var pos=_ref3.pos;_ref3=_ref3.startPos;_ref3=this._state.startPanLngLat||this._unproject(_ref3);if(!_ref3)return this;pos=this._calculateNewLngLat({startPanLngLat:_ref3,pos});pos=(0,_slicedToArray2["default"])(pos,2);return this._getUpdatedMapState({longitude:pos[0],latitude:pos[1]})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(_ref4){return this._getUpdatedMapState({startRotatePos:_ref4.pos,
startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(_ref5){var pos=_ref5.pos,_ref5$deltaAngleX=_ref5.deltaAngleX;_ref5$deltaAngleX=void 0===_ref5$deltaAngleX?0:_ref5$deltaAngleX;_ref5=_ref5.deltaAngleY;_ref5=void 0===_ref5?0:_ref5;var _this$_state=this._state,startRotatePos=_this$_state.startRotatePos,startBearing=_this$_state.startBearing;_this$_state=_this$_state.startPitch;if(!Number.isFinite(startBearing)||!Number.isFinite(_this$_state))return this;
pos=pos?this._calculateNewPitchAndBearing(_objectSpread(_objectSpread({},this._getRotationParams(pos,startRotatePos)),{},{startBearing,startPitch:_this$_state})):{bearing:startBearing+_ref5$deltaAngleX,pitch:_this$_state+_ref5};return this._getUpdatedMapState(pos)}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(_ref6){return this._getUpdatedMapState({startZoomLngLat:this._unproject(_ref6.pos),startZoom:this._viewportProps.zoom})}},
{key:"zoom",value:function(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos;_ref7=_ref7.scale;(0,_assert["default"])(0<_ref7,"`scale` must be a positive number");var _this$_state2=this._state,startZoom=_this$_state2.startZoom;_this$_state2=_this$_state2.startZoomLngLat;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom,_this$_state2=this._unproject(startPos)||this._unproject(pos));(0,_assert["default"])(_this$_state2,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");
startPos=this._calculateNewZoom({scale:_ref7,startZoom:startZoom||0});pos=(new _viewportMercatorProject["default"](Object.assign({},this._viewportProps,{zoom:startPos}))).getMapCenterByLngLatPosition({lngLat:_this$_state2,pos});pos=(0,_slicedToArray2["default"])(pos,2);return this._getUpdatedMapState({zoom:startPos,longitude:pos[0],latitude:pos[1]})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(newProps){return new MapState(Object.assign({},
this._viewportProps,this._state,newProps))}},{key:"_applyConstraints",value:function(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom;props.zoom=(0,_mathUtils.clamp)(zoom,minZoom,maxZoom);maxZoom=props.maxPitch;minZoom=props.minPitch;zoom=props.pitch;props.pitch=(0,_mathUtils.clamp)(zoom,minZoom,maxZoom);Object.assign(props,(0,_viewportMercatorProject.normalizeViewportProps)(props));return props}},{key:"_unproject",value:function(pos){var viewport=new _viewportMercatorProject["default"](this._viewportProps);
return pos&&viewport.unproject(pos)}},{key:"_calculateNewLngLat",value:function(_ref8){var startPanLngLat=_ref8.startPanLngLat;_ref8=_ref8.pos;return(new _viewportMercatorProject["default"](this._viewportProps)).getMapCenterByLngLatPosition({lngLat:startPanLngLat,pos:_ref8})}},{key:"_calculateNewZoom",value:function(_ref9){var _this$_viewportProps=this._viewportProps,maxZoom=_this$_viewportProps.maxZoom;_this$_viewportProps=_this$_viewportProps.minZoom;_ref9=_ref9.startZoom+Math.log2(_ref9.scale);
return(0,_mathUtils.clamp)(_ref9,_this$_viewportProps,maxZoom)}},{key:"_calculateNewPitchAndBearing",value:function(_ref10){var deltaScaleX=_ref10.deltaScaleX,deltaScaleY=_ref10.deltaScaleY,startBearing=_ref10.startBearing;_ref10=_ref10.startPitch;deltaScaleY=(0,_mathUtils.clamp)(deltaScaleY,-1,1);var _this$_viewportProps2=this._viewportProps,minPitch=_this$_viewportProps2.minPitch;_this$_viewportProps2=_this$_viewportProps2.maxPitch;var pitch=_ref10;0<deltaScaleY?pitch=_ref10+deltaScaleY*(_this$_viewportProps2-
_ref10):0>deltaScaleY&&(pitch=_ref10-deltaScaleY*(minPitch-_ref10));return{pitch,bearing:startBearing+180*deltaScaleX}}},{key:"_getRotationParams",value:function(pos,startPos){var deltaX=pos[0]-startPos[0],deltaY=pos[1]-startPos[1];pos=pos[1];startPos=startPos[1];var _this$_viewportProps3=this._viewportProps,width=_this$_viewportProps3.width;_this$_viewportProps3=_this$_viewportProps3.height;var deltaScaleY=0;0<deltaY?5<Math.abs(_this$_viewportProps3-startPos)&&(deltaScaleY=deltaY/(startPos-_this$_viewportProps3)*
1.2):0>deltaY&&5<startPos&&(deltaScaleY=1-pos/startPos);deltaScaleY=Math.min(1,Math.max(-1,deltaScaleY));return{deltaScaleX:deltaX/width,deltaScaleY}}}]);return MapState}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$react_map_gl$dist$es5$utils$map_state.js.map
