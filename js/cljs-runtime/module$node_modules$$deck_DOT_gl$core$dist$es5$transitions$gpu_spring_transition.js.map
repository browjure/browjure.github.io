{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_spring_transition.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/transitions/gpu-spring-transition.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$gpu_spring_transition\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _attributeTransitionUtils = require(\"../lib/attribute/attribute-transition-utils\");\n\nvar _attribute = _interopRequireDefault(require(\"../lib/attribute/attribute\"));\n\nvar _transition = _interopRequireDefault(require(\"./transition\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar GPUSpringTransition = function () {\n  function GPUSpringTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n    (0, _classCallCheck2[\"default\"])(this, GPUSpringTransition);\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new _transition[\"default\"](timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new _attribute[\"default\"](gl, Object.assign({}, attribute.settings, {\n      normalized: false\n    }));\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new _core.Buffer(gl, bufferOpts), new _core.Buffer(gl, bufferOpts), new _core.Buffer(gl, bufferOpts)];\n  }\n\n  (0, _createClass2[\"default\"])(GPUSpringTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n\n      var _iterator = _createForOfIteratorHelper(buffers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var buffer = _step.value;\n          (0, _attributeTransitionUtils.padBuffer)(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = (0, _attributeTransitionUtils.getAttributeBufferLength)(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aTo: (0, _attributeTransitionUtils.getSourceBufferAttribute)(gl, attribute)\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var buffers = this.buffers,\n          transform = this.transform,\n          framebuffer = this.framebuffer,\n          transition = this.transition;\n      var updated = transition.update();\n\n      if (!updated) {\n        return false;\n      }\n\n      transform.update({\n        sourceBuffers: {\n          aPrev: buffers[0],\n          aCur: buffers[1]\n        },\n        feedbackBuffers: {\n          vNext: buffers[2]\n        }\n      });\n      transform.run({\n        framebuffer: framebuffer,\n        discard: false,\n        clearRenderTarget: true,\n        uniforms: {\n          stiffness: transition.settings.stiffness,\n          damping: transition.settings.damping\n        },\n        parameters: {\n          depthTest: false,\n          blend: true,\n          viewport: [0, 0, 1, 1],\n          blendFunc: [1, 1],\n          blendEquation: [32776, 32776]\n        }\n      });\n      (0, _attributeTransitionUtils.cycleBuffers)(buffers);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: this.attribute.value\n      });\n      var isTransitioning = (0, _core.readPixelsToArray)(framebuffer)[0] > 0;\n\n      if (!isTransitioning) {\n        transition.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n\n      this.texture[\"delete\"]();\n      this.texture = null;\n      this.framebuffer[\"delete\"]();\n      this.framebuffer = null;\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n  return GPUSpringTransition;\n}();\n\nexports[\"default\"] = GPUSpringTransition;\n\nfunction getTransform(gl, attribute, framebuffer) {\n  var attributeType = (0, _attributeTransitionUtils.getAttributeTypeFromSize)(attribute.size);\n  return new _core.Transform(gl, {\n    framebuffer: framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new _core.Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new _core.Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: (0, _defineProperty2[\"default\"])({}, 36064, texture)\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_interopRequireDefault","_classCallCheck2","_createClass2","_core","_attributeTransitionUtils","_attribute","_transition","GPUSpringTransition","_ref","gl","attribute","timeline","type","transition","attributeInTransition","assign","settings","normalized","currentStartIndices","startIndices","currentLength","texture","Texture2D","data","Uint8Array","format","border","mipmaps","dataFormat","width","height","framebuffer","Framebuffer","id","attachments","attributeType","getAttributeTypeFromSize","size","transform","Transform","vs","fs","defines","ATTRIBUTE_TYPE","varyings","bufferOpts","byteLength","usage","buffers","Buffer","start","transitionSettings","numInstances","padBufferOpts","fromLength","fromStartIndices","getData","enter","_iterator","_step","buffer","padBuffer","getAttributeBufferLength","update","elementCount","Math","floor","sourceBuffers","aTo","getSourceBufferAttribute","updated","aPrev","aCur","feedbackBuffers","vNext","run","discard","clearRenderTarget","uniforms","stiffness","damping","parameters","depthTest","blend","viewport","blendFunc","blendEquation","cycleBuffers","readPixelsToArray","end","cancel","pop","get","inProgress"]
}
