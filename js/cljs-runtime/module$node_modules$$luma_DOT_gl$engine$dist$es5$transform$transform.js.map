{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$transform.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/transform/transform.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$transform\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _shadertools = require(\"@luma.gl/shadertools\");\n\nvar _bufferTransform = _interopRequireDefault(require(\"./buffer-transform\"));\n\nvar _textureTransform = _interopRequireDefault(require(\"./texture-transform\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _model = _interopRequireDefault(require(\"../lib/model\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar Transform = function () {\n  (0, _createClass2[\"default\"])(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return (0, _gltools.isWebGL2)(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Transform);\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  (0, _createClass2[\"default\"])(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      var model = this.model,\n          bufferTransform = this.bufferTransform,\n          textureTransform = this.textureTransform;\n\n      if (model) {\n        model[\"delete\"]();\n      }\n\n      if (bufferTransform) {\n        bufferTransform[\"delete\"]();\n      }\n\n      if (textureTransform) {\n        textureTransform[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n\n      var updatedOpts = this._updateDrawOptions(opts);\n\n      if (clearRenderTarget && updatedOpts.framebuffer) {\n        updatedOpts.framebuffer.clear({\n          color: true\n        });\n      }\n\n      this.model.transform(updatedOpts);\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      var swapped = false;\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator = _createForOfIteratorHelper(resourceTransforms),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var resourceTransform = _step.value;\n          swapped = swapped || resourceTransform.swap();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      (0, _webgl.assert)(swapped, 'Nothing to swap');\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator2 = _createForOfIteratorHelper(resourceTransforms),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var resourceTransform = _step2.value;\n          var data = resourceTransform.getData(opts);\n\n          if (data) {\n            return data;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.textureTransform && this.textureTransform.getFramebuffer();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ('elementCount' in opts) {\n        this.model.setVertexCount(opts.elementCount);\n      }\n\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator3 = _createForOfIteratorHelper(resourceTransforms),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var resourceTransform = _step3.value;\n          resourceTransform.update(opts);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.gl;\n\n      this._buildResourceTransforms(gl, props);\n\n      props = this._updateModelProps(props);\n      this.model = new _model[\"default\"](gl, Object.assign({}, props, {\n        fs: props.fs || (0, _shadertools.getPassthroughFS)({\n          version: (0, _webgl.getShaderVersion)(props.vs)\n        }),\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        vertexCount: props.elementCount\n      }));\n      this.bufferTransform && this.bufferTransform.setupResources({\n        model: this.model\n      });\n    }\n  }, {\n    key: \"_updateModelProps\",\n    value: function _updateModelProps(props) {\n      var updatedProps = Object.assign({}, props);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator4 = _createForOfIteratorHelper(resourceTransforms),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var resourceTransform = _step4.value;\n          updatedProps = resourceTransform.updateModelProps(updatedProps);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      return updatedProps;\n    }\n  }, {\n    key: \"_buildResourceTransforms\",\n    value: function _buildResourceTransforms(gl, props) {\n      if (canCreateBufferTransform(props)) {\n        this.bufferTransform = new _bufferTransform[\"default\"](gl, props);\n      }\n\n      if (canCreateTextureTransform(props)) {\n        this.textureTransform = new _textureTransform[\"default\"](gl, props);\n      }\n\n      (0, _webgl.assert)(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n    }\n  }, {\n    key: \"_updateDrawOptions\",\n    value: function _updateDrawOptions(opts) {\n      var updatedOpts = Object.assign({}, opts);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator5 = _createForOfIteratorHelper(resourceTransforms),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var resourceTransform = _step5.value;\n          updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      return updatedOpts;\n    }\n  }]);\n  return Transform;\n}();\n\nexports[\"default\"] = Transform;\n\nfunction canCreateBufferTransform(props) {\n  if (!(0, _webgl.isObjectEmpty)(props.feedbackBuffers) || !(0, _webgl.isObjectEmpty)(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!(0, _webgl.isObjectEmpty)(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_interopRequireDefault","defineProperty","_classCallCheck2","_createClass2","_shadertools","_bufferTransform","_textureTransform","_gltools","_webgl","_model","Transform","gl","props","arguments","undefined","model","elementCount","elementIDBuffer","textureTransform","bufferTransform","_initialize","seal","key","isSupported","isWebGL2","_delete","run","opts","_opts$clearRenderTarg","clearRenderTarget","updatedOpts","_updateDrawOptions","framebuffer","clear","color","transform","swap","swapped","resourceTransforms","filter","Boolean","_iterator","_step","resourceTransform","assert","getBuffer","varyingName","getData","_iterator2","_step2","data","getFramebuffer","update","setVertexCount","_iterator3","_step3","_buildResourceTransforms","_updateModelProps","assign","fs","getPassthroughFS","version","getShaderVersion","vs","id","drawMode","vertexCount","setupResources","updatedProps","_iterator4","_step4","updateModelProps","isObjectEmpty","feedbackBuffers","feedbackMap","varyings","_sourceTextures","_targetTexture","_targetTextureVarying","_iterator5","_step5","getDrawOptions"]
}
