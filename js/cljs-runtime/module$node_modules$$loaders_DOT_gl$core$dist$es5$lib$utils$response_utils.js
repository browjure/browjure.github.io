shadow$provide.module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$utils$response_utils=function(global,require,module,exports){function _makeResponse(){_makeResponse=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(resource){var headers,contentLength,_getResourceUrlAndTyp,url,type,initialDataUrl,response;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(0,_isType.isResponse)(resource)){_context.next=2;break}return _context.abrupt("return",
resource);case 2:return headers={},contentLength=(0,_resourceUtils.getResourceContentLength)(resource),0<=contentLength&&(headers["content-length"]=String(contentLength)),_getResourceUrlAndTyp=(0,_resourceUtils.getResourceUrlAndType)(resource),url=_getResourceUrlAndTyp.url,(type=_getResourceUrlAndTyp.type)&&(headers["content-type"]=type),_context.next=9,getInitialDataUrl(resource);case 9:return(initialDataUrl=_context.sent)&&(headers["x-first-bytes"]=initialDataUrl),"string"===typeof resource&&(resource=
(new TextEncoder).encode(resource)),response=new Response(resource,{headers}),Object.defineProperty(response,"url",{value:url}),_context.abrupt("return",response);case 15:case "end":return _context.stop()}},_callee)}));return _makeResponse.apply(this,arguments)}function _checkResponse(){_checkResponse=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(response){var message;return _regenerator["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(response.ok){_context2.next=
5;break}_context2.next=3;return getResponseError(response);case 3:throw message=_context2.sent,Error(message);case 5:case "end":return _context2.stop()}},_callee2)}));return _checkResponse.apply(this,arguments)}function getResponseError(_x3){return _getResponseError.apply(this,arguments)}function _getResponseError(){_getResponseError=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(response){var message,contentType,text;return _regenerator["default"].wrap(function(_context3){for(;;)switch(_context3.prev=
_context3.next){case 0:message="Failed to fetch resource ".concat(response.url," (").concat(response.status,"): ");_context3.prev=1;contentType=response.headers.get("Content-Type");text=response.statusText;if(!contentType.includes("application/json")){_context3.next=11;break}_context3.t0=text;_context3.t1=" ";_context3.next=9;return response.text();case 9:_context3.t2=_context3.sent,text=_context3.t0+=_context3.t1.concat.call(_context3.t1,_context3.t2);case 11:message+=text;message=60<message.length?
"".concat(message.slice(60),"..."):message;_context3.next=17;break;case 15:_context3.prev=15,_context3.t3=_context3["catch"](1);case 17:return _context3.abrupt("return",message);case 18:case "end":return _context3.stop()}},_callee3,null,[[1,15]])}));return _getResponseError.apply(this,arguments)}function getInitialDataUrl(_x4){return _getInitialDataUrl.apply(this,arguments)}function _getInitialDataUrl(){_getInitialDataUrl=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(resource){var INITIAL_DATA_LENGTH,
blobSlice,slice,base64;return _regenerator["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:INITIAL_DATA_LENGTH=5;if("string"!==typeof resource){_context4.next=3;break}return _context4.abrupt("return","data:,".concat(resource.slice(0,INITIAL_DATA_LENGTH)));case 3:if(!(resource instanceof Blob)){_context4.next=8;break}blobSlice=resource.slice(0,5);_context4.next=7;return new Promise(function(resolve){var reader=new FileReader;reader.onload=function(event){return resolve(event.target&&
event.target.result)};reader.readAsDataURL(blobSlice)});case 7:return _context4.abrupt("return",_context4.sent);case 8:if(!(resource instanceof ArrayBuffer)){_context4.next=12;break}slice=resource.slice(0,INITIAL_DATA_LENGTH);base64=arrayBufferToBase64(slice);return _context4.abrupt("return","data:base64,".concat(base64));case 12:return _context4.abrupt("return",null);case 13:case "end":return _context4.stop()}},_callee4)}));return _getInitialDataUrl.apply(this,arguments)}function arrayBufferToBase64(buffer){var binary=
"";buffer=new Uint8Array(buffer);for(var i=0;i<buffer.byteLength;i++)binary+=String.fromCharCode(buffer[i]);return btoa(binary)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.makeResponse=function(_x){return _makeResponse.apply(this,arguments)};exports.checkResponse=function(_x2){return _checkResponse.apply(this,arguments)};exports.checkResponseSync=function(response){if(!response.ok)throw response=
"".concat(response.status," ").concat(response.statusText),response=60<response.length?"".concat(response.slice(60),"..."):response,Error(response);};var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_isType=require("module$node_modules$$loaders_DOT_gl$core$dist$es5$javascript_utils$is_type"),_resourceUtils=require("module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$utils$resource_utils")}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$utils$response_utils.js.map
