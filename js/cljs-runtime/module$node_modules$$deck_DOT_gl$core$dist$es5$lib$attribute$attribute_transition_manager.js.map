{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/attribute/attribute-transition-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nvar _gpuInterpolationTransition = _interopRequireDefault(require(\"../../transitions/gpu-interpolation-transition\"));\n\nvar _gpuSpringTransition = _interopRequireDefault(require(\"../../transitions/gpu-spring-transition\"));\n\nvar _log = _interopRequireDefault(require(\"../../utils/log\"));\n\nvar TRANSITION_TYPES = {\n  interpolation: _gpuInterpolationTransition[\"default\"],\n  spring: _gpuSpringTransition[\"default\"]\n};\n\nvar AttributeTransitionManager = function () {\n  function AttributeTransitionManager(gl, _ref) {\n    var id = _ref.id,\n        timeline = _ref.timeline;\n    (0, _classCallCheck2[\"default\"])(this, AttributeTransitionManager);\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = _core.Transform.isSupported(gl);\n  }\n\n  (0, _createClass2[\"default\"])(AttributeTransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.transitions) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var attributes = _ref2.attributes,\n          transitions = _ref2.transitions,\n          numInstances = _ref2.numInstances;\n      this.numInstances = numInstances || 1;\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var settings = attribute.getTransitionSetting(transitions);\n        if (!settings) continue;\n\n        this._updateAttribute(attributeName, attribute, settings);\n      }\n\n      for (var _attributeName in this.transitions) {\n        var _attribute = attributes[_attributeName];\n\n        if (!_attribute || !_attribute.getTransitionSetting(transitions)) {\n          this._removeTransition(_attributeName);\n        }\n      }\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      var transition = this.transitions[attributeName];\n      return transition && transition.inProgress;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      var animatedAttributes = {};\n\n      for (var attributeName in this.transitions) {\n        var transition = this.transitions[attributeName];\n\n        if (transition.inProgress) {\n          animatedAttributes[attributeName] = transition.attributeInTransition;\n        }\n      }\n\n      return animatedAttributes;\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (!this.isSupported || this.numInstances === 0) {\n        return false;\n      }\n\n      for (var attributeName in this.transitions) {\n        var updated = this.transitions[attributeName].update();\n\n        if (updated) {\n          this.needsRedraw = true;\n        }\n      }\n\n      var needsRedraw = this.needsRedraw;\n      this.needsRedraw = false;\n      return needsRedraw;\n    }\n  }, {\n    key: \"_removeTransition\",\n    value: function _removeTransition(attributeName) {\n      this.transitions[attributeName].cancel();\n      delete this.transitions[attributeName];\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(attributeName, attribute, settings) {\n      var transition = this.transitions[attributeName];\n      var isNew = !transition || transition.type !== settings.type;\n\n      if (isNew) {\n        if (!this.isSupported) {\n          _log[\"default\"].warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n\n          return;\n        }\n\n        if (transition) {\n          this._removeTransition(attributeName);\n        }\n\n        var TransitionType = TRANSITION_TYPES[settings.type];\n\n        if (TransitionType) {\n          this.transitions[attributeName] = new TransitionType({\n            attribute: attribute,\n            timeline: this.timeline,\n            gl: this.gl\n          });\n        } else {\n          _log[\"default\"].error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n\n          isNew = false;\n        }\n      }\n\n      if (isNew || attribute.needsRedraw()) {\n        this.needsRedraw = true;\n        this.transitions[attributeName].start(settings, this.numInstances);\n      }\n    }\n  }]);\n  return AttributeTransitionManager;\n}();\n\nexports[\"default\"] = AttributeTransitionManager;\n//# sourceMappingURL=attribute-transition-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_core","_gpuInterpolationTransition","_gpuSpringTransition","_log","TRANSITION_TYPES","interpolation","spring","AttributeTransitionManager","gl","_ref","id","timeline","transitions","needsRedraw","numInstances","isSupported","Transform","key","finalize","attributeName","_removeTransition","update","_ref2","attributes","attribute","settings","getTransitionSetting","_updateAttribute","_attributeName","_attribute","hasAttribute","transition","inProgress","getAttributes","animatedAttributes","attributeInTransition","run","updated","cancel","isNew","type","warn","concat","TransitionType","error","start"]
}
