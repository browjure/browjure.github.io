{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$mvt$dist$es5$lib$parse_mvt.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/mvt/dist/es5/lib/parse-mvt.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$mvt$dist$es5$lib$parse_mvt\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = parseMVT;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _vectorTile = _interopRequireDefault(require(\"./mapbox-vector-tile/vector-tile\"));\n\nvar _gis = require(\"@loaders.gl/gis\");\n\nvar _pbf = _interopRequireDefault(require(\"pbf\"));\n\nvar _transformToLocalRange = require(\"./transform-to-local-range\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction parseMVT(arrayBuffer, options) {\n  options = options || {};\n  options.mvt = options.mvt || {};\n  options.gis = options.gis || {};\n  var features = [];\n\n  if (arrayBuffer.byteLength > 0) {\n    var tile = new _vectorTile[\"default\"](new _pbf[\"default\"](arrayBuffer));\n    var loaderOptions = options.mvt;\n    var selectedLayers = Array.isArray(loaderOptions.layers) ? loaderOptions.layers : Object.keys(tile.layers);\n    selectedLayers.forEach(function (layerName) {\n      var vectorTileLayer = tile.layers[layerName];\n\n      var featureOptions = _objectSpread(_objectSpread({}, loaderOptions), {}, {\n        layerName: layerName\n      });\n\n      if (!vectorTileLayer) {\n        return;\n      }\n\n      for (var i = 0; i < vectorTileLayer.length; i++) {\n        var vectorTileFeature = vectorTileLayer.feature(i);\n        var decodedFeature = getDecodedFeature(vectorTileFeature, featureOptions);\n        features.push(decodedFeature);\n      }\n    });\n  }\n\n  if (options.gis.format === 'binary') {\n    var data = (0, _gis.geojsonToBinary)(features);\n    data.byteLength = arrayBuffer.byteLength;\n    return data;\n  }\n\n  return features;\n}\n\nfunction getDecodedFeature(feature) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var wgs84Coordinates = options.coordinates === 'wgs84';\n  var hasTileIndex = options.tileIndex && Number.isFinite(options.tileIndex.x) && Number.isFinite(options.tileIndex.y) && Number.isFinite(options.tileIndex.z);\n\n  if (wgs84Coordinates && !hasTileIndex) {\n    throw new Error('MVT Loader: WGS84 coordinates need tileIndex property. Check documentation.');\n  }\n\n  var decodedFeature = wgs84Coordinates && hasTileIndex ? feature.toGeoJSON(options.tileIndex.x, options.tileIndex.y, options.tileIndex.z) : (0, _transformToLocalRange.transformCoordinates)(feature, _transformToLocalRange.transformToLocalCoordinates);\n\n  if (options.layerProperty) {\n    decodedFeature.properties[options.layerProperty] = options.layerName;\n  }\n\n  return decodedFeature;\n}\n//# sourceMappingURL=parse-mvt.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","getDecodedFeature","feature","options","undefined","wgs84Coordinates","coordinates","hasTileIndex","tileIndex","Number","isFinite","x","y","z","Error","decodedFeature","toGeoJSON","_transformToLocalRange","transformCoordinates","transformToLocalCoordinates","layerProperty","properties","layerName","_interopRequireDefault","value","parseMVT","arrayBuffer","mvt","gis","features","byteLength","tile","_vectorTile","_pbf","loaderOptions","Array","isArray","layers","selectedLayers","vectorTileLayer","featureOptions","vectorTileFeature","format","data","_gis","geojsonToBinary"]
}
