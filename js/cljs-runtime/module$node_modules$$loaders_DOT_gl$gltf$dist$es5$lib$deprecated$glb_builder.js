shadow$provide.module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$deprecated$glb_builder=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_loaderUtils=require("module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$index"),
_images=require("module$node_modules$$loaders_DOT_gl$images$dist$es5$index"),_gltfUtils=require("module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$gltf_utils$gltf_utils"),_encodeGlb=global(require("module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$encode_glb"));require=function(){function GLBBuilder(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2["default"])(this,GLBBuilder);this.byteLength=0;this.json={buffers:[{byteLength:0}],bufferViews:[],accessors:[],
images:[],meshes:[]};this.sourceBuffers=[];this.log=options.log||console}(0,_createClass2["default"])(GLBBuilder,[{key:"getByteLength",value:function(){return this.byteLength}},{key:"isImage",value:function(imageData){return(0,_images.isImage)(imageData)}},{key:"encodeSync",value:function(){return this.encodeAsGLB(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"encodeAsGLB",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._packBinaryChunk();
options.magic&&console.warn("Custom glTF magic number no longer supported");var glb={version:2,json:this.json,binary:this.arrayBuffer},byteLength=(0,_encodeGlb["default"])(glb,null,0,options);byteLength=new ArrayBuffer(byteLength);var dataView=new DataView(byteLength);(0,_encodeGlb["default"])(glb,dataView,0,options);return byteLength}},{key:"addApplicationData",value:function(key,data){this.json[key]=data;return this}},{key:"addBuffer",value:function(sourceBuffer){var accessor=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{size:3},bufferViewIndex=this.addBufferView(sourceBuffer),accessorDefaults={size:accessor.size,componentType:(0,_gltfUtils.getComponentTypeFromArray)(sourceBuffer),count:Math.round(sourceBuffer.length/accessor.size)};return this.addAccessor(bufferViewIndex,Object.assign(accessorDefaults,accessor))}},{key:"addBufferView",value:function(buffer){var byteLength=buffer.byteLength||buffer.length;this.json.bufferViews.push({buffer:0,byteOffset:this.byteLength,byteLength});
this.byteLength+=(0,_loaderUtils.padTo4Bytes)(byteLength);this.sourceBuffers.push(buffer);return this.json.bufferViews.length-1}},{key:"addAccessor",value:function(bufferViewIndex,accessor){this.json.accessors.push({bufferView:bufferViewIndex,type:(0,_gltfUtils.getAccessorTypeFromSize)(accessor.size),componentType:accessor.componentType,count:accessor.count});return this.json.accessors.length-1}},{key:"_pack",value:function(){this._packBinaryChunk();return{arrayBuffer:this.arrayBuffer,json:this.json}}},
{key:"_packBinaryChunk",value:function(){if(!this.arrayBuffer){for(var totalByteLength=this.byteLength,arrayBuffer=new ArrayBuffer(totalByteLength),targetArray=new Uint8Array(arrayBuffer),dstByteOffset=0,i=0;i<this.sourceBuffers.length;i++){var sourceBuffer=this.sourceBuffers[i];dstByteOffset=(0,_loaderUtils.copyToArray)(sourceBuffer,targetArray,dstByteOffset)}this.json.buffers[0].byteLength=totalByteLength;this.arrayBuffer=arrayBuffer;this.sourceBuffers=[]}}},{key:"_getInternalCounts",value:function(){return{buffers:this.json.buffers.length,
bufferViews:this.json.bufferViews.length,accessors:this.json.accessors.length,images:this.json.images.length}}}]);return GLBBuilder}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$deprecated$glb_builder.js.map
