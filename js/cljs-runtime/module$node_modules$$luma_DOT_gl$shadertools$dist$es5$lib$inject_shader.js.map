{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$inject_shader.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/lib/inject-shader.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$inject_shader\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = injectShader;\nexports.combineInjects = combineInjects;\nexports.DECLARATION_INJECT_MARKER = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _moduleInjectors = require(\"../modules/module-injectors\");\n\nvar _constants = require(\"./constants\");\n\nvar _utils = require(\"../utils\");\n\nvar _MODULE_INJECTORS;\n\nvar MODULE_INJECTORS = (_MODULE_INJECTORS = {}, (0, _defineProperty2[\"default\"])(_MODULE_INJECTORS, _constants.VERTEX_SHADER, _moduleInjectors.MODULE_INJECTORS_VS), (0, _defineProperty2[\"default\"])(_MODULE_INJECTORS, _constants.FRAGMENT_SHADER, _moduleInjectors.MODULE_INJECTORS_FS), _MODULE_INJECTORS);\nvar DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nexports.DECLARATION_INJECT_MARKER = DECLARATION_INJECT_MARKER;\nvar REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nvar REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nvar fragments = [];\n\nfunction injectShader(source, type, inject) {\n  var injectStandardStubs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var isVertex = type === _constants.VERTEX_SHADER;\n\n  var _loop = function _loop(key) {\n    var fragmentData = inject[key];\n    fragmentData.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    fragments.length = fragmentData.length;\n\n    for (var i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    var fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, function (match) {\n          return match + fragmentString;\n        });\n    }\n  };\n\n  for (var key in inject) {\n    _loop(key);\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, function (match) {\n      return match + MODULE_INJECTORS[type];\n    });\n  }\n\n  return source;\n}\n\nfunction combineInjects(injects) {\n  var result = {};\n  (0, _utils.assert)(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(function (inject) {\n    for (var key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","injectShader","source","type","inject","injectStandardStubs","arguments","length","undefined","isVertex","_constants","VERTEX_SHADER","_loop","key","fragmentData","sort","a","b","order","fragments","i","len","injection","fragmentString","concat","join","replace","DECLARATION_INJECT_MARKER","REGEX_START_OF_MAIN","match","REGEX_END_OF_MAIN","MODULE_INJECTORS","combineInjects","injects","result","_utils","assert","Array","isArray","forEach","_defineProperty2","_moduleInjectors","_MODULE_INJECTORS","MODULE_INJECTORS_VS","FRAGMENT_SHADER","MODULE_INJECTORS_FS"]
}
