{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$framebuffer.js",
"lineCount":38,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/webgl/dist/es5/classes/framebuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$framebuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = exports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _resource = _interopRequireDefault(require(\"./resource\"));\n\nvar _texture2d = _interopRequireDefault(require(\"./texture-2d\"));\n\nvar _renderbuffer = _interopRequireDefault(require(\"./renderbuffer\"));\n\nvar _clear2 = require(\"./clear\");\n\nvar _copyAndBlit = require(\"./copy-and-blit.js\");\n\nvar _features = require(\"../features\");\n\nvar _webglUtils = require(\"../webgl-utils\");\n\nvar _utils = require(\"../utils\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = function (_Resource) {\n  (0, _inherits2[\"default\"])(Framebuffer, _Resource);\n\n  var _super = _createSuper(Framebuffer);\n\n  (0, _createClass2[\"default\"])(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      var gl2 = (0, _gltools.assertWebGL2Context)(this.gl);\n      return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      var gl2 = (0, _gltools.assertWebGL2Context)(this.gl);\n      return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var colorBufferFloat = options.colorBufferFloat,\n          colorBufferHalfFloat = options.colorBufferHalfFloat;\n      var supported = true;\n\n      if (colorBufferFloat) {\n        supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n      }\n\n      if (colorBufferHalfFloat) {\n        supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n      }\n\n      return supported;\n    }\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      });\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Framebuffer);\n    _this = _super.call(this, gl, opts);\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n    _this.ownResources = [];\n\n    _this.initialize(opts);\n\n    Object.seal((0, _assertThisInitialized2[\"default\"])(_this));\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var _ref$width = _ref.width,\n          width = _ref$width === void 0 ? 1 : _ref$width,\n          _ref$height = _ref.height,\n          height = _ref$height === void 0 ? 1 : _ref$height,\n          _ref$attachments = _ref.attachments,\n          attachments = _ref$attachments === void 0 ? null : _ref$attachments,\n          _ref$color = _ref.color,\n          color = _ref$color === void 0 ? true : _ref$color,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? true : _ref$depth,\n          _ref$stencil = _ref.stencil,\n          stencil = _ref$stencil === void 0 ? false : _ref$stencil,\n          _ref$check = _ref.check,\n          check = _ref$check === void 0 ? true : _ref$check,\n          _ref$readBuffer = _ref.readBuffer,\n          readBuffer = _ref$readBuffer === void 0 ? undefined : _ref$readBuffer,\n          _ref$drawBuffers = _ref.drawBuffers,\n          drawBuffers = _ref$drawBuffers === void 0 ? undefined : _ref$drawBuffers;\n      (0, _utils.assert)(width >= 0 && height >= 0, 'Width and height need to be integers');\n      this.width = width;\n      this.height = height;\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      });\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _iterator = _createForOfIteratorHelper(this.ownResources),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var resource = _step.value;\n          resource[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(Framebuffer.prototype), \"delete\", this).call(this);\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? {} : _ref2$attachments,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers,\n          _ref2$clearAttachment = _ref2.clearAttachments,\n          clearAttachments = _ref2$clearAttachment === void 0 ? false : _ref2$clearAttachment,\n          _ref2$resizeAttachmen = _ref2.resizeAttachments,\n          resizeAttachments = _ref2$resizeAttachmen === void 0 ? true : _ref2$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var width = options.width,\n          height = options.height;\n\n      if (this.handle === null) {\n        (0, _utils.assert)(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _gltools.log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n\n      var newAttachments = {};\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      }\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      for (var key in newAttachments) {\n        (0, _utils.assert)(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof _renderbuffer[\"default\"]) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = (0, _slicedToArray2[\"default\"])(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        }\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var status = this.getStatus();\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return status;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var color = options.color,\n          depth = options.depth,\n          stencil = options.stencil,\n          _options$drawBuffers = options.drawBuffers,\n          drawBuffers = _options$drawBuffers === void 0 ? [] : _options$drawBuffers;\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        (0, _clear2.clear)(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        (0, _clear2.clearBuffer)({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n\n      return null;\n    }\n  }, {\n    key: \"blit\",\n    value: function blit() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _gltools.log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n\n      return null;\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref4) {\n      var _ref4$attachments = _ref4.attachments,\n          attachments = _ref4$attachments === void 0 ? [] : _ref4$attachments,\n          _ref4$x = _ref4.x,\n          x = _ref4$x === void 0 ? 0 : _ref4$x,\n          _ref4$y = _ref4.y,\n          y = _ref4$y === void 0 ? 0 : _ref4$y,\n          width = _ref4.width,\n          height = _ref4.height;\n      var gl2 = (0, _gltools.assertWebGL2Context)(this.gl);\n      var prevHandle = gl2.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl2.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl2.bindFramebuffer(36008, prevHandle);\n      return this;\n    }\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = (0, _webglUtils.getKey)(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n\n      var _iterator2 = _createForOfIteratorHelper(parameters),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var pname = _step2.value;\n          var key = keys ? (0, _webglUtils.getKey)(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments);\n      var parameters = {};\n\n      for (var _i = 0, _attachments = attachments; _i < _attachments.length; _i++) {\n        var attachmentName = _attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? (0, _webglUtils.getKey)(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (typeof window !== 'undefined') {\n        window.open((0, _copyAndBlit.copyToDataUrl)(this), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (logLevel > _gltools.log.level || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = (0, _copyAndBlit.copyToDataUrl)(this, {\n        targetMaxHeight: 100\n      });\n\n      _gltools.log.image({\n        logLevel: logLevel,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$target = _ref5.target,\n          target = _ref5$target === void 0 ? 36160 : _ref5$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$target = _ref6.target,\n          target = _ref6$target === void 0 ? 36160 : _ref6$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    }\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null;\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new _texture2d[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          mipmaps: false,\n          parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters)\n        });\n        this.ownResources.push(defaultAttachments[36064]);\n      }\n\n      if (depth && stencil) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new _renderbuffer[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        });\n        this.ownResources.push(defaultAttachments[33306]);\n      } else if (depth) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new _renderbuffer[\"default\"](this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n        this.ownResources.push(defaultAttachments[36096]);\n      } else if (stencil) {\n        (0, _utils.assert)(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof _renderbuffer[\"default\"]) {\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref7) {\n      var _ref7$attachment = _ref7.attachment,\n          attachment = _ref7$attachment === void 0 ? 36064 : _ref7$attachment,\n          renderbuffer = _ref7.renderbuffer;\n      var gl = this.gl;\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n      this.attachments[attachment] = renderbuffer;\n    }\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref8) {\n      var _ref8$attachment = _ref8.attachment,\n          attachment = _ref8$attachment === void 0 ? 36064 : _ref8$attachment,\n          texture = _ref8.texture,\n          layer = _ref8.layer,\n          level = _ref8.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          var gl2 = (0, _gltools.assertWebGL2Context)(gl);\n          gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          (0, _utils.assert)(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    }\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(readBuffer) {\n      var gl2 = (0, _gltools.getWebGL2Context)(this.gl);\n\n      if (gl2) {\n        gl2.readBuffer(readBuffer);\n      } else {\n        (0, _utils.assert)(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    }\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(drawBuffers) {\n      var gl = this.gl;\n      var gl2 = (0, _gltools.assertWebGL2Context)(gl);\n\n      if (gl2) {\n        gl2.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL_draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          (0, _utils.assert)(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    }\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = (0, _features.getFeatures)(this.gl);\n\n      switch (pname) {\n        case 36052:\n          return !caps.WEBGL2 ? 0 : null;\n\n        case 33298:\n        case 33299:\n        case 33300:\n        case 33301:\n        case 33302:\n        case 33303:\n          return !caps.WEBGL2 ? 8 : null;\n\n        case 33297:\n          return !caps.WEBGL2 ? 5125 : null;\n\n        case 33296:\n          return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n  return Framebuffer;\n}(_resource[\"default\"]);\n\nexports[\"default\"] = Framebuffer;\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nvar FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nexports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","NewTarget","result","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Date","_interopRequireDefault","defineProperty","FRAMEBUFFER_ATTACHMENT_PARAMETERS","_defineProperty2","_slicedToArray2","_classCallCheck2","_assertThisInitialized2","_get2","_createClass2","_inherits2","_gltools","_resource","_texture2d","_renderbuffer","_clear2","_copyAndBlit","_features","_webglUtils","_utils","Framebuffer","_Resource","gl","opts","undefined","_this","_super","width","height","attachments","readBuffer","drawBuffers","ownResources","initialize","seal","key","get","gl2","assertWebGL2Context","getParameter","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","isSupported","options","colorBufferHalfFloat","supported","colorBufferFloat","getExtension","getDefaultFramebuffer","luma","defaultFramebuffer","id","handle","_ref","_ref$width","_ref$height","_ref$attachments","_ref$color","color","_ref$depth","depth","_ref$stencil","stencil","_ref$check","check","_ref$readBuffer","_ref$drawBuffers","assert","attachment","target","object","resize","_createDefaultAttachments","update","clearAttachments","checkStatus","_delete","_iterator","_step","_ref2","_ref2$attachments","_ref2$clearAttachment","_ref2$resizeAttachmen","resizeAttachments","attach","prevHandle","bindFramebuffer","_setReadBuffer","_setDrawBuffers","drawingBufferWidth","drawingBufferHeight","log","concat","attachmentPoint","_this2","_ref3","_ref3$clearAttachment","_ref3$resizeAttachmen","newAttachments","keys","forEach","assign","Number","descriptor","_attachRenderbuffer","renderbuffer","_descriptor","texture","_descriptor$","layer","_descriptor$2","level","_attachTexture","_unattach","filter","status","getStatus","Error","STATUS","checkFramebufferStatus","clear","_options$drawBuffers","drawBuffer","clearBuffer","readPixels","error","readPixelsToBuffer","copyToDataUrl","copyToImage","copyToTexture","blit","invalidate","_ref4","_ref4$attachments","_ref4$x","x","_ref4$y","y","invalidateFramebuffer","getAttachmentParameter","pname","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","getKey","getAttachmentParameters","values","_iterator2","parameters","ATTACHMENT_PARAMETERS","_step2","getParameters","_i","_attachments","attachmentName","show","window","open","logLevel","message","image","targetMaxHeight","bind","_ref5$target","_ref5","unbind","_ref6$target","_ref6","defaultAttachments","_parameters","pixels","format","type","mipmaps","push","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref7","_ref7$attachment","_ref8","_ref8$attachment","bindTexture","framebufferTextureLayer","face","getWebGL2Context","ERR_MULTIPLE_RENDERTARGETS","ext","drawBuffersWEBGL","caps","getFeatures","WEBGL2","EXT_sRGB","_createHandle","createFramebuffer","_deleteHandle","deleteFramebuffer","_bindHandle"]
}
