shadow$provide.module$node_modules$$deck_DOT_gl$layers$dist$es5$solid_polygon_layer$polygon_tesselator=function(global,require,module,exports){function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},
e:function(_e){throw _e;},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(_e2){didErr=!0;err=_e2},f:function(){try{if(!normalCompletion&&null!=it["return"])it["return"]()}finally{if(didErr)throw err;}}}}function _unsupportedIterableToArray(o,
minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=
Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?
Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,
NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_get2=module(require("module$node_modules$$babel$runtime$helpers$get")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),
_possibleConstructorReturn2=module(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=module(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),Polygon=global(require("module$node_modules$$deck_DOT_gl$layers$dist$es5$solid_polygon_layer$polygon"));global=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index");var _polygon2=require("module$node_modules$$math_DOT_gl$polygon$dist$es5$index");require=function(_Tesselator){function PolygonTesselator(opts){(0,
_classCallCheck2["default"])(this,PolygonTesselator);var fp64=opts.fp64,_opts$IndexType=opts.IndexType;_opts$IndexType=void 0===_opts$IndexType?Uint32Array:_opts$IndexType;return _super.call(this,_objectSpread(_objectSpread({},opts),{},{attributes:{positions:{size:3,type:fp64?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:_opts$IndexType,size:1}}}))}(0,_inherits2["default"])(PolygonTesselator,_Tesselator);var _super=_createSuper(PolygonTesselator);(0,_createClass2["default"])(PolygonTesselator,
[{key:"get",value:function(attributeName){var attributes=this.attributes;return"indices"===attributeName?attributes.indices&&attributes.indices.subarray(0,this.vertexCount):attributes[attributeName]}},{key:"updateGeometry",value:function(opts){(0,_get2["default"])((0,_getPrototypeOf2["default"])(PolygonTesselator.prototype),"updateGeometry",this).call(this,opts);if(opts=this.buffers.indices)this.vertexCount=(opts.value||opts).length}},{key:"normalizeGeometry",value:function(polygon){if(this.normalize){polygon=
Polygon.normalize(polygon,this.positionSize);if(this.opts.resolution)return(0,_polygon2.cutPolygonByGrid)(polygon.positions||polygon,polygon.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return(0,_polygon2.cutPolygonByMercatorBounds)(polygon.positions||polygon,polygon.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return polygon}},{key:"getGeometrySize",value:function(polygon){if(Array.isArray(polygon)&&!Number.isFinite(polygon[0])){var size=
0;polygon=_createForOfIteratorHelper(polygon);var _step;try{for(polygon.s();!(_step=polygon.n()).done;)size+=this.getGeometrySize(_step.value)}catch(err){polygon.e(err)}finally{polygon.f()}return size}return(polygon.positions||polygon).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(buffer){return this.normalize||!this.buffers.indices?(0,_get2["default"])((0,_getPrototypeOf2["default"])(PolygonTesselator.prototype),"getGeometryFromBuffer",this).call(this,buffer):function(){return null}}},
{key:"updateGeometryAttributes",value:function(polygon,context){if(Array.isArray(polygon)&&!Number.isFinite(polygon[0])){polygon=_createForOfIteratorHelper(polygon);var _step2;try{for(polygon.s();!(_step2=polygon.n()).done;){var subPolygon=_step2.value,geometrySize=this.getGeometrySize(subPolygon);context.geometrySize=geometrySize;this.updateGeometryAttributes(subPolygon,context);context.vertexStart+=geometrySize;context.indexStart=this.indexStarts[context.geometryIndex+1]}}catch(err){polygon.e(err)}finally{polygon.f()}}else this._updateIndices(polygon,
context),this._updatePositions(polygon,context),this._updateVertexValid(polygon,context)}},{key:"_updateIndices",value:function(polygon,_ref){var geometryIndex=_ref.geometryIndex,offset=_ref.vertexStart;_ref=_ref.indexStart;var attributes=this.attributes,indexStarts=this.indexStarts,typedArrayManager=this.typedArrayManager,target=attributes.indices;if(target){var i=_ref;polygon=Polygon.getSurfaceIndices(polygon,this.positionSize,this.opts.preproject);target=typedArrayManager.allocate(target,_ref+
polygon.length,{copy:!0});for(typedArrayManager=0;typedArrayManager<polygon.length;typedArrayManager++)target[i++]=polygon[typedArrayManager]+offset;indexStarts[geometryIndex+1]=_ref+polygon.length;attributes.indices=target}}},{key:"_updatePositions",value:function(polygon,_ref2){var geometrySize=_ref2.geometrySize,positions=this.attributes.positions,positionSize=this.positionSize;if(positions){polygon=polygon.positions||polygon;_ref2=_ref2.vertexStart;for(var j=0;j<geometrySize;_ref2++,j++){var y=
polygon[j*positionSize+1],z=2<positionSize?polygon[j*positionSize+2]:0;positions[3*_ref2]=polygon[j*positionSize];positions[3*_ref2+1]=y;positions[3*_ref2+2]=z}}}},{key:"_updateVertexValid",value:function(polygon,_ref3){var vertexStart=_ref3.vertexStart;_ref3=_ref3.geometrySize;var vertexValid=this.attributes.vertexValid,positionSize=this.positionSize,holeIndices=polygon&&polygon.holeIndices;polygon&&polygon.edgeTypes?vertexValid.set(polygon.edgeTypes,vertexStart):vertexValid.fill(1,vertexStart,vertexStart+
_ref3);if(holeIndices)for(polygon=0;polygon<holeIndices.length;polygon++)vertexValid[vertexStart+holeIndices[polygon]/positionSize-1]=0;vertexValid[vertexStart+_ref3-1]=0}}]);return PolygonTesselator}(global.Tesselator);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$layers$dist$es5$solid_polygon_layer$polygon_tesselator.js.map
