shadow$provide.module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$progress$fetch_progress=function(global,require,module,exports){function _fetchProgress(){_fetchProgress=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(response,onProgress){var onDone,onError,body,contentLength,totalBytes,progressStream,_args=arguments;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return onDone=2<_args.length&&void 0!==_args[2]?
_args[2]:function(){},onError=3<_args.length&&void 0!==_args[3]?_args[3]:function(){},_context.next=4,response;case 4:response=_context.sent;if(response.ok){_context.next=7;break}return _context.abrupt("return",response);case 7:if(body=response.body){_context.next=10;break}return _context.abrupt("return",response);case 10:totalBytes=(contentLength=response.headers.get("content-length"))&&parseInt(contentLength,10);if(0<contentLength){_context.next=14;break}return _context.abrupt("return",response);
case 14:if("undefined"!==typeof ReadableStream&&body.getReader){_context.next=16;break}return _context.abrupt("return",response);case 16:return progressStream=new ReadableStream({start:function(controller){var reader=body.getReader();read(controller,reader,0,totalBytes,onProgress,onDone,onError)}}),_context.abrupt("return",new Response(progressStream));case 18:case "end":return _context.stop()}},_callee)}));return _fetchProgress.apply(this,arguments)}function read(_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _read.apply(this,
arguments)}function _read(){_read=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(controller,reader,loadedBytes,totalBytes,onProgress,onDone,onError){var _yield$reader$read,done,value,percent;return _regenerator["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,reader.read();case 3:_yield$reader$read=_context2.sent;done=_yield$reader$read.done;value=_yield$reader$read.value;if(!done){_context2.next=
10;break}onDone();controller.close();return _context2.abrupt("return");case 10:return loadedBytes+=value.byteLength,percent=Math.round(loadedBytes/totalBytes*100),onProgress(percent,{loadedBytes,totalBytes}),controller.enqueue(value),_context2.next=16,read(controller,reader,loadedBytes,totalBytes,onProgress,onDone,onError);case 16:_context2.next=22;break;case 18:_context2.prev=18,_context2.t0=_context2["catch"](0),controller.error(_context2.t0),onError(_context2.t0);case 22:case "end":return _context2.stop()}},
_callee2,null,[[0,18]])}));return _read.apply(this,arguments)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=function(_x,_x2){return _fetchProgress.apply(this,arguments)};var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator"))}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$progress$fetch_progress.js.map
