{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/passes/shadow-pass.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$passes$shadow_pass\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _layersPass = _interopRequireDefault(require(\"./layers-pass\"));\n\nvar _core = require(\"@luma.gl/core\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar ShadowPass = function (_LayersPass) {\n  (0, _inherits2[\"default\"])(ShadowPass, _LayersPass);\n\n  var _super = _createSuper(ShadowPass);\n\n  function ShadowPass(gl, props) {\n    var _parameters, _attachments;\n\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ShadowPass);\n    _this = _super.call(this, gl, props);\n    _this.shadowMap = new _core.Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters)\n    });\n    _this.depthBuffer = new _core.Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    _this.fbo = new _core.Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: (_attachments = {}, (0, _defineProperty2[\"default\"])(_attachments, 36064, _this.shadowMap), (0, _defineProperty2[\"default\"])(_attachments, 36096, _this.depthBuffer), _attachments)\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ShadowPass, [{\n    key: \"render\",\n    value: function render(params) {\n      var _this2 = this;\n\n      var target = this.fbo;\n      (0, _core.withParameters)(this.gl, {\n        depthRange: [0, 1],\n        depthTest: true,\n        blend: false,\n        clearColor: [1, 1, 1, 1]\n      }, function () {\n        var viewport = params.viewports[0];\n        var pixelRatio = (0, _core.cssToDeviceRatio)(_this2.gl);\n        var width = viewport.width * pixelRatio;\n        var height = viewport.height * pixelRatio;\n\n        if (width !== target.width || height !== target.height) {\n          target.resize({\n            width: width,\n            height: height\n          });\n        }\n\n        (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(ShadowPass.prototype), \"render\", _this2).call(_this2, _objectSpread(_objectSpread({}, params), {}, {\n          target: target,\n          pass: 'shadow'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.shadowEnabled !== false;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        drawToShadowMap: true\n      };\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.fbo) {\n        this.fbo[\"delete\"]();\n        this.fbo = null;\n      }\n\n      if (this.shadowMap) {\n        this.shadowMap[\"delete\"]();\n        this.shadowMap = null;\n      }\n\n      if (this.depthBuffer) {\n        this.depthBuffer[\"delete\"]();\n        this.depthBuffer = null;\n      }\n    }\n  }]);\n  return ShadowPass;\n}(_layersPass[\"default\"]);\n\nexports[\"default\"] = ShadowPass;\n//# sourceMappingURL=shadow-pass.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","NewTarget","constructor","result","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Date","prototype","toString","call","e","_interopRequireDefault","value","_classCallCheck2","_createClass2","_get2","_inherits2","_layersPass","_core","ShadowPass","_LayersPass","gl","props","_parameters","_attachments","_this","_super","shadowMap","Texture2D","width","height","parameters","depthBuffer","Renderbuffer","format","fbo","Framebuffer","id","attachments","render","params","_this2","withParameters","depthRange","depthTest","blend","clearColor","viewport","viewports","pixelRatio","cssToDeviceRatio","resize","pass","shouldDrawLayer","layer","shadowEnabled","getModuleParameters","drawToShadowMap","_delete"]
}
