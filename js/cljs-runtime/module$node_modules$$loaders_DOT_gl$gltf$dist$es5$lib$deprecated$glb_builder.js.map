{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$deprecated$glb_builder.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/gltf/dist/es5/lib/deprecated/glb-builder.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$gltf$dist$es5$lib$deprecated$glb_builder\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _loaderUtils = require(\"@loaders.gl/loader-utils\");\n\nvar _images = require(\"@loaders.gl/images\");\n\nvar _gltfUtils = require(\"../gltf-utils/gltf-utils\");\n\nvar _encodeGlb = _interopRequireDefault(require(\"../encode-glb\"));\n\nvar GLBBuilder = function () {\n  function GLBBuilder() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck2[\"default\"])(this, GLBBuilder);\n    this.byteLength = 0;\n    this.json = {\n      buffers: [{\n        byteLength: 0\n      }],\n      bufferViews: [],\n      accessors: [],\n      images: [],\n      meshes: []\n    };\n    this.sourceBuffers = [];\n    this.log = options.log || console;\n  }\n\n  (0, _createClass2[\"default\"])(GLBBuilder, [{\n    key: \"getByteLength\",\n    value: function getByteLength() {\n      return this.byteLength;\n    }\n  }, {\n    key: \"isImage\",\n    value: function isImage(imageData) {\n      return (0, _images.isImage)(imageData);\n    }\n  }, {\n    key: \"encodeSync\",\n    value: function encodeSync() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.encodeAsGLB(options);\n    }\n  }, {\n    key: \"encodeAsGLB\",\n    value: function encodeAsGLB() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._packBinaryChunk();\n\n      if (options.magic) {\n        console.warn('Custom glTF magic number no longer supported');\n      }\n\n      var glb = {\n        version: 2,\n        json: this.json,\n        binary: this.arrayBuffer\n      };\n      var byteLength = (0, _encodeGlb[\"default\"])(glb, null, 0, options);\n      var glbArrayBuffer = new ArrayBuffer(byteLength);\n      var dataView = new DataView(glbArrayBuffer);\n      (0, _encodeGlb[\"default\"])(glb, dataView, 0, options);\n      return glbArrayBuffer;\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      var packOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addBuffer\",\n    value: function addBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: (0, _gltfUtils.getComponentTypeFromArray)(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength || buffer.length;\n      this.json.bufferViews.push({\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      });\n      this.byteLength += (0, _loaderUtils.padTo4Bytes)(byteLength);\n      this.sourceBuffers.push(buffer);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      this.json.accessors.push({\n        bufferView: bufferViewIndex,\n        type: (0, _gltfUtils.getAccessorTypeFromSize)(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      });\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"_pack\",\n    value: function _pack() {\n      this._packBinaryChunk();\n\n      return {\n        arrayBuffer: this.arrayBuffer,\n        json: this.json\n      };\n    }\n  }, {\n    key: \"_packBinaryChunk\",\n    value: function _packBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = (0, _loaderUtils.copyToArray)(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_getInternalCounts\",\n    value: function _getInternalCounts() {\n      return {\n        buffers: this.json.buffers.length,\n        bufferViews: this.json.bufferViews.length,\n        accessors: this.json.accessors.length,\n        images: this.json.images.length\n      };\n    }\n  }]);\n  return GLBBuilder;\n}();\n\nexports[\"default\"] = GLBBuilder;\n//# sourceMappingURL=glb-builder.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_loaderUtils","_images","_gltfUtils","_encodeGlb","GLBBuilder","options","arguments","length","undefined","byteLength","json","buffers","bufferViews","accessors","images","meshes","sourceBuffers","log","console","key","getByteLength","isImage","imageData","encodeSync","encodeAsGLB","_packBinaryChunk","magic","warn","glb","version","binary","arrayBuffer","glbArrayBuffer","ArrayBuffer","dataView","DataView","addApplicationData","data","addBuffer","sourceBuffer","accessor","size","bufferViewIndex","addBufferView","accessorDefaults","componentType","getComponentTypeFromArray","count","Math","round","addAccessor","assign","buffer","push","byteOffset","padTo4Bytes","bufferView","type","getAccessorTypeFromSize","_pack","totalByteLength","targetArray","Uint8Array","dstByteOffset","i","copyToArray","_getInternalCounts"]
}
