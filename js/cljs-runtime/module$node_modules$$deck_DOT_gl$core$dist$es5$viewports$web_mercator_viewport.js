shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$viewports$web_mercator_viewport=function(global,require,module,exports){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=
null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=
(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,
[],function(){})),!0}catch(e){return!1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),
_assertThisInitialized2=module(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=module(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=module(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf"));module=module(require("module$node_modules$$deck_DOT_gl$core$dist$es5$viewports$viewport"));var _webMercator=
require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$index"),vec2=global(require("module$node_modules$gl_matrix$cjs$vec2")),_math=require("module$node_modules$math_DOT_gl$dist$es5$index");require=function(_Viewport){function WebMercatorViewport(){var _this=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2["default"])(this,WebMercatorViewport);var _opts$latitude=_this.latitude;_opts$latitude=void 0===_opts$latitude?0:_opts$latitude;var _opts$longitude=_this.longitude;
_opts$longitude=void 0===_opts$longitude?0:_opts$longitude;var _opts$zoom=_this.zoom;_opts$zoom=void 0===_opts$zoom?11:_opts$zoom;var _opts$pitch=_this.pitch;_opts$pitch=void 0===_opts$pitch?0:_opts$pitch;var _opts$bearing=_this.bearing;_opts$bearing=void 0===_opts$bearing?0:_opts$bearing;var _opts$nearZMultiplier=_this.nearZMultiplier,nearZMultiplier=void 0===_opts$nearZMultiplier?.1:_opts$nearZMultiplier;_opts$nearZMultiplier=_this.farZMultiplier;var farZMultiplier=void 0===_opts$nearZMultiplier?
1.01:_opts$nearZMultiplier;_opts$nearZMultiplier=_this.orthographic;_opts$nearZMultiplier=void 0===_opts$nearZMultiplier?!1:_opts$nearZMultiplier;var _opts$repeat=_this.repeat;_opts$repeat=void 0===_opts$repeat?!1:_opts$repeat;var _opts$worldOffset=_this.worldOffset,worldOffset=void 0===_opts$worldOffset?0:_opts$worldOffset,width=_this.width,height=_this.height;_opts$worldOffset=_this.altitude;var scale=Math.pow(2,_opts$zoom);width=width||1;height=height||1;_opts$worldOffset=Math.max(.75,void 0===
_opts$worldOffset?1.5:_opts$worldOffset);var _getProjectionParamet=(0,_webMercator.getProjectionParameters)({width,height,pitch:_opts$pitch,altitude:_opts$worldOffset,nearZMultiplier,farZMultiplier});nearZMultiplier=_getProjectionParamet.fov;farZMultiplier=_getProjectionParamet.aspect;var focalDistance=_getProjectionParamet.focalDistance,near=_getProjectionParamet.near;_getProjectionParamet=_getProjectionParamet.far;scale=(0,_webMercator.getViewMatrix)({height,pitch:_opts$pitch,bearing:_opts$bearing,
scale,altitude:_opts$worldOffset});worldOffset&&(scale=(new _math.Matrix4).translate([512*worldOffset,0,0]).multiplyLeft(scale));_this=Object.assign({},_this,{width,height,viewMatrix:scale,longitude:_opts$longitude,latitude:_opts$latitude,zoom:_opts$zoom,orthographic:_opts$nearZMultiplier,fovyRadians:nearZMultiplier,aspect:farZMultiplier,focalDistance:_opts$nearZMultiplier?focalDistance:1,near,far:_getProjectionParamet});_this=_super.call(this,_this);_this.latitude=_opts$latitude;_this.longitude=
_opts$longitude;_this.zoom=_opts$zoom;_this.pitch=_opts$pitch;_this.bearing=_opts$bearing;_this.altitude=_opts$worldOffset;_this.orthographic=_opts$nearZMultiplier;_this._subViewports=_opts$repeat?[]:null;Object.freeze((0,_assertThisInitialized2["default"])(_this));return _this}(0,_inherits2["default"])(WebMercatorViewport,_Viewport);var _super=_createSuper(WebMercatorViewport);(0,_createClass2["default"])(WebMercatorViewport,[{key:"addMetersToLngLat",value:function(lngLatZ,xyz){return(0,_webMercator.addMetersToLngLat)(lngLatZ,
xyz)}},{key:"getMapCenterByLngLatPosition",value:function(_ref){var lngLat=_ref.lngLat;_ref=_ref.pos;_ref=(0,_webMercator.pixelsToWorld)(_ref,this.pixelUnprojectionMatrix);lngLat=this.projectFlat(lngLat);lngLat=vec2.add([],lngLat,vec2.negate([],_ref));lngLat=vec2.add([],this.center,lngLat);return this.unprojectFlat(lngLat)}},{key:"getBounds",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};options=(0,_webMercator.getBounds)(this,options.z||0);return[Math.min(options[0][0],
options[1][0],options[2][0],options[3][0]),Math.min(options[0][1],options[1][1],options[2][1],options[3][1]),Math.max(options[0][0],options[1][0],options[2][0],options[3][0]),Math.max(options[0][1],options[1][1],options[2][1],options[3][1])]}},{key:"fitBounds",value:function(bounds){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},width=this.width,height=this.height;options=(0,_webMercator.fitBounds)(Object.assign({width,height,bounds},options));return new WebMercatorViewport({width,
height,longitude:options.longitude,latitude:options.latitude,zoom:options.zoom})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length){var bounds=this.getBounds(),maxOffset=Math.ceil((bounds[2]-180)/360);for(bounds=Math.floor((bounds[0]+180)/360);bounds<=maxOffset;bounds++){var offsetViewport=bounds?new WebMercatorViewport(_objectSpread(_objectSpread({},this),{},{worldOffset:bounds})):this;this._subViewports.push(offsetViewport)}}return this._subViewports}}]);return WebMercatorViewport}(module["default"]);
exports["default"]=require;require.displayName="WebMercatorViewport"}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$viewports$web_mercator_viewport.js.map
