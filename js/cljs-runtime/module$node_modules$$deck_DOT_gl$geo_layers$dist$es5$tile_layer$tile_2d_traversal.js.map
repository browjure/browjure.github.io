{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_traversal.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/geo-layers/dist/es5/tile-layer/tile-2d-traversal.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_traversal\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getOSMTileIndices = getOSMTileIndices;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _culling = require(\"@math.gl/culling\");\n\nvar _math = require(\"math.gl\");\n\nvar _utils = require(\"./utils\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar TILE_SIZE = 512;\nvar MAX_MAPS = 3;\n\nvar OSMNode = function () {\n  function OSMNode(x, y, z) {\n    (0, _classCallCheck2[\"default\"])(this, OSMNode);\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  (0, _createClass2[\"default\"])(OSMNode, [{\n    key: \"update\",\n    value: function update(params) {\n      var viewport = params.viewport,\n          cullingVolume = params.cullingVolume,\n          elevationBounds = params.elevationBounds,\n          minZ = params.minZ,\n          maxZ = params.maxZ,\n          offset = params.offset,\n          project = params.project;\n      var boundingVolume = this.getBoundingVolume(elevationBounds, offset, project);\n      var isInside = cullingVolume.computeVisibility(boundingVolume);\n\n      if (isInside < 0) {\n        return false;\n      }\n\n      if (!this.childVisible) {\n        var z = this.z;\n\n        if (z < maxZ && z >= minZ) {\n          var distance = boundingVolume.distanceTo(viewport.cameraPosition) * viewport.scale / viewport.height;\n          z += Math.floor(Math.log2(distance));\n        }\n\n        if (z >= maxZ) {\n          this.selected = true;\n          return true;\n        }\n      }\n\n      this.selected = false;\n      this.childVisible = true;\n\n      var _iterator = _createForOfIteratorHelper(this.children),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var child = _step.value;\n          child.update(params);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"getSelected\",\n    value: function getSelected() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (this.selected) {\n        result.push(this);\n      }\n\n      if (this._children) {\n        var _iterator2 = _createForOfIteratorHelper(this._children),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var node = _step2.value;\n            node.getSelected(result);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getBoundingVolume\",\n    value: function getBoundingVolume(zRange, worldOffset, project) {\n      if (project) {\n        var corner0 = (0, _utils.osmTile2lngLat)(this.x, this.y, this.z);\n        var corner1 = (0, _utils.osmTile2lngLat)(this.x + 1, this.y + 1, this.z);\n        var center = (0, _utils.osmTile2lngLat)(this.x + 0.5, this.y + 0.5, this.z);\n        corner0.z = zRange[1];\n        corner1.z = zRange[1];\n        center.z = zRange[0];\n        var cornerPos0 = project(corner0);\n        var cornerPos1 = project(corner1);\n        var centerPos = new _math.Vector3(project(center));\n        var R = Math.max(centerPos.distance(cornerPos0), centerPos.distance(cornerPos1));\n        return new _culling.BoundingSphere(centerPos, R);\n      }\n\n      var scale = Math.pow(2, this.z);\n      var extent = TILE_SIZE / scale;\n      var originX = this.x * extent + worldOffset * TILE_SIZE;\n      var originY = TILE_SIZE - (this.y + 1) * extent;\n      return new _culling.AxisAlignedBoundingBox([originX, originY, zRange[0]], [originX + extent, originY + extent, zRange[1]]);\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      if (!this._children) {\n        var x = this.x * 2;\n        var y = this.y * 2;\n        var z = this.z + 1;\n        this._children = [new OSMNode(x, y, z), new OSMNode(x, y + 1, z), new OSMNode(x + 1, y, z), new OSMNode(x + 1, y + 1, z)];\n      }\n\n      return this._children;\n    }\n  }]);\n  return OSMNode;\n}();\n\nfunction getOSMTileIndices(viewport, maxZ, zRange) {\n  var project = viewport.resolution ? viewport.projectPosition : null;\n  var planes = Object.values(viewport.getFrustumPlanes()).map(function (_ref) {\n    var normal = _ref.normal,\n        distance = _ref.distance;\n    return new _culling.Plane(normal.clone().negate(), distance);\n  });\n  var cullingVolume = new _culling.CullingVolume(planes);\n  var unitsPerMeter = viewport.distanceScales.unitsPerMeter[2];\n  var elevationMin = zRange && zRange[0] * unitsPerMeter || 0;\n  var elevationMax = zRange && zRange[1] * unitsPerMeter || 0;\n  var minZ = viewport.pitch <= 60 ? maxZ : 0;\n  var root = new OSMNode(0, 0, 0);\n  var traversalParams = {\n    viewport: viewport,\n    project: project,\n    cullingVolume: cullingVolume,\n    elevationBounds: [elevationMin, elevationMax],\n    minZ: minZ,\n    maxZ: maxZ,\n    offset: 0\n  };\n  root.update(traversalParams);\n\n  if (viewport.subViewports && viewport.subViewports.length > 1) {\n    traversalParams.offset = -1;\n\n    while (root.update(traversalParams)) {\n      if (--traversalParams.offset < -MAX_MAPS) {\n        break;\n      }\n    }\n\n    traversalParams.offset = 1;\n\n    while (root.update(traversalParams)) {\n      if (++traversalParams.offset > MAX_MAPS) {\n        break;\n      }\n    }\n  }\n\n  return root.getSelected();\n}\n//# sourceMappingURL=tile-2d-traversal.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","_interopRequireDefault","defineProperty","getOSMTileIndices","viewport","maxZ","zRange","project","resolution","projectPosition","planes","values","getFrustumPlanes","map","_ref","distance","_culling","Plane","normal","clone","negate","cullingVolume","CullingVolume","unitsPerMeter","distanceScales","elevationMin","elevationMax","minZ","pitch","root","OSMNode","traversalParams","elevationBounds","offset","update","subViewports","MAX_MAPS","getSelected","_classCallCheck2","_createClass2","_math","_utils","x","y","z","key","params","boundingVolume","getBoundingVolume","isInside","computeVisibility","childVisible","distanceTo","cameraPosition","scale","height","Math","floor","log2","selected","_iterator","children","_step","result","arguments","undefined","push","_children","_iterator2","_step2","worldOffset","corner0","osmTile2lngLat","corner1","center","cornerPos0","cornerPos1","centerPos","Vector3","R","max","BoundingSphere","extent","TILE_SIZE","pow","originX","originY","AxisAlignedBoundingBox","get"]
}
