{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_utils.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/attribute/attribute-transition-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$attribute$attribute_transition_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeTransitionSettings = normalizeTransitionSettings;\nexports.getSourceBufferAttribute = getSourceBufferAttribute;\nexports.getAttributeTypeFromSize = getAttributeTypeFromSize;\nexports.cycleBuffers = cycleBuffers;\nexports.getAttributeBufferLength = getAttributeBufferLength;\nexports.padBuffer = padBuffer;\n\nvar _arrayUtils = require(\"../../utils/array-utils\");\n\nvar DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: function easing(t) {\n      return t;\n    }\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\n\nfunction normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return Object.assign({}, DEFAULT_TRANSITION_SETTINGS[userSettings.type], layerSettings, userSettings);\n}\n\nfunction getSourceBufferAttribute(gl, attribute) {\n  var buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\n\nfunction getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\n\nfunction cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\n\nfunction getAttributeBufferLength(attribute, numInstances) {\n  var doublePrecision = attribute.doublePrecision,\n      settings = attribute.settings,\n      value = attribute.value,\n      size = attribute.size;\n  var multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\n\nfunction padBuffer(_ref) {\n  var buffer = _ref.buffer,\n      numInstances = _ref.numInstances,\n      attribute = _ref.attribute,\n      fromLength = _ref.fromLength,\n      fromStartIndices = _ref.fromStartIndices,\n      _ref$getData = _ref.getData,\n      getData = _ref$getData === void 0 ? function (x) {\n    return x;\n  } : _ref$getData;\n  var precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  var size = attribute.size * precisionMultiplier;\n  var byteOffset = attribute.byteOffset;\n  var toStartIndices = attribute.startIndices;\n  var hasStartIndices = fromStartIndices && toStartIndices;\n  var toLength = getAttributeBufferLength(attribute, numInstances);\n  var isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  var toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    var getter = getData;\n\n    getData = function getData(value, chunk) {\n      return attribute._normalizeConstant(getter(value, chunk));\n    };\n  }\n\n  var getMissingData = isConstant ? function (i, chunk) {\n    return getData(toData, chunk);\n  } : function (i, chunk) {\n    return getData(toData.subarray(i, i + size), chunk);\n  };\n  var source = buffer.getData({\n    length: fromLength\n  });\n  var data = new Float32Array(toLength);\n  (0, _arrayUtils.padArray)({\n    source: source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size: size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data: data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getAttributeBufferLength","attribute","numInstances","value","size","settings","noAlloc","length","multiplier","doublePrecision","Float64Array","Object","defineProperty","normalizeTransitionSettings","userSettings","layerSettings","Number","isFinite","duration","type","assign","DEFAULT_TRANSITION_SETTINGS","getSourceBufferAttribute","gl","buffer","getBuffer","divisor","normalized","getAttributeTypeFromSize","Error","concat","cycleBuffers","buffers","push","shift","padBuffer","_ref","fromLength","fromStartIndices","_ref$getData","getData","x","precisionMultiplier","byteOffset","toStartIndices","startIndices","hasStartIndices","toLength","isConstant","state","constant","toData","srcByteOffset","getter","chunk","_normalizeConstant","getMissingData","i","subarray","source","data","Float32Array","_arrayUtils","padArray","target","sourceStartIndices","targetStartIndices","byteLength","reallocate","subData","offset","interpolation","easing","t","spring","stiffness","damping"]
}
