{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$scale_utils.js",
"lineCount":11,
"mappings":"AAAAA,cAAA,CAAe,8EAAf,CAAmG,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAuB3IC,QAASA,2BAA0B,CAACC,CAAD,CAAIC,cAAJ,CAAoB,CAAE,IAAIC,EAAI,IAAsB,WAAtB,GAAI,MAAOC,OAAX,EAA2D,IAA3D,EAAqCH,CAAA,CAAEG,MAAF,CAASC,QAAT,CAArC,CAAiE,CAAE,GAAIC,KAAA,CAAMC,OAAN,CAAcN,CAAd,CAAJ,GAAyBE,EAAzB,CAA8BK,2BAAA,CAA4BP,CAA5B,CAA9B,GAAiEC,cAAjE,EAAmFD,CAAnF,EAA4G,QAA5G,GAAwF,MAAOA,EAAP,CAASQ,MAAjG,CAAsH,CAAMN,EAAJ,GAAQF,CAAR,CAAYE,EAAZ,CAAgB,KAAIO,EAAI,CAAOC,eAAAA,CAAIA,QAAU,EAAG,EAAI,OAAO,CAAEC,EAAGD,cAAL,CAAQE,EAAGA,QAAU,EAAG,CAAE,MAAIH,EAAJ,EAAST,CAAT,CAAWQ,MAAX,CAA0B,CAAEK,KAAM,CAAA,CAAR,CAA1B,CAAiD,CAAEA,KAAM,CAAA,CAAR,CAAeC,MAAOd,CAAA,CAAES,CAAA,EAAF,CAAtB,CAAnD,CAAxB,CAA8GM,EAAGA,QAAU,CAACC,EAAD,CAAK,CAAE,KAAMA,GAAN;AAAF,CAAhI,CAA+IC,EAAGP,cAAlJ,CAA7D,CAAsN,KAAM,KAAIQ,SAAJ,CAAc,uIAAd,CAAN,CAA9U,CAA3E,IAA6jBC,iBAAmB,CAAA,CAAhlB,CAAslBC,OAAS,CAAA,CAA/lB,CAAsmBC,GAAK,OAAO,CAAEV,EAAGA,QAAU,EAAG,CAAET,EAAA,CAAKF,CAAA,CAAEG,MAAF,CAASC,QAAT,CAAA,EAAP,CAAlB,CAAkDQ,EAAGA,QAAU,EAAG,CAAE,IAAIU,KAAOpB,EAAA,CAAGqB,IAAH,EAAWJ,iBAAA,CAAmBG,IAAnB,CAAwBT,IAAM,OAAOS,KAA7D,CAAlE,CAAwIP,EAAGA,QAAU,CAACS,GAAD,CAAM,CAAEJ,MAAA,CAAS,CAAA,CAAMC,IAAA,CAAMG,GAAvB,CAA3J,CAA0LP,EAAGA,QAAU,EAAG,CAAE,GAAI,CAAE,GAAI,CAACE,gBAAL,EAAyC,IAAzC,EAAyBjB,EAAA,CAAG,QAAH,CAAzB,CAA+CA,EAAA,CAAG,QAAH,CAAA,EAAjD,CAAJ,OAA+E,CAAE,GAAIkB,MAAJ,CAAY,KAAMC,IAAN,CAAd,CAAjF,CAA1M,CAAlnB,CAEvDd,QAASA,4BAA2B,CAACP,CAAD;AAAIyB,MAAJ,CAAY,CAAE,GAAKzB,CAAL,CAAA,CAAgB,GAAiB,QAAjB,GAAI,MAAOA,EAAX,CAA2B,MAAO0B,kBAAA,CAAkB1B,CAAlB,CAAqByB,MAArB,CAA8B,KAAIb,EAAIe,MAAA,CAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+B9B,CAA/B,CAAA,CAAkC+B,KAAlC,CAAwC,CAAxC,CAA2C,EAA3C,CAA0D,SAAV,GAAInB,CAAJ,EAAsBZ,CAAtB,CAAwBgC,WAAxB,GAAqCpB,CAArC,CAAyCZ,CAAzC,CAA2CgC,WAA3C,CAAuDC,IAAvD,CAA6D,IAAU,KAAV,GAAIrB,CAAJ,EAAyB,KAAzB,GAAmBA,CAAnB,CAAgC,MAAOP,MAAA,CAAM6B,IAAN,CAAWlC,CAAX,CAAe,IAAU,WAAV,GAAIY,CAAJ,EAAyB,0CAAA,CAA2CuB,IAA3C,CAAgDvB,CAAhD,CAAzB,CAA6E,MAAOc,kBAAA,CAAkB1B,CAAlB,CAAqByB,MAArB,CAA/U,CAAF,CAEhDC,QAASA,kBAAiB,CAACU,GAAD,CAAMC,GAAN,CAAW,CAAE,GAAW,IAAX,EAAIA,GAAJ,EAAmBA,GAAnB,CAAyBD,GAAzB,CAA6B5B,MAA7B,CAAqC6B,GAAA,CAAMD,GAAN,CAAU5B,MAAQ,KAAzD,IAAkEC,EAAI,CAAtE,CAAyE6B,KAAWjC,KAAJ,CAAUgC,GAAV,CAAvB,CAAuC5B,CAAvC,CAA2C4B,GAA3C,CAAgD5B,CAAA,EAAhD,CAAuD6B,IAAA,CAAK7B,CAAL,CAAA,CAAU2B,GAAA,CAAI3B,CAAJ,CAAU,OAAO6B,KAA3I,CAErCC,QAASA,SAAQ,CAACC,MAAD,CAASC,KAAT;AAAgBC,aAAhB,CAA+B,CAClCA,aAEZ,CAAMF,MAAN,CAAeG,QAAS,EAAG,CACzB,MAAOH,OADkB,CAFfE,cAMZ,CAAMD,KAAN,CAAcG,QAAS,EAAG,CACxB,MAAOH,MADiB,CAI1B,OAVYC,cADkC,CAchDG,QAASA,iBAAgB,CAACL,MAAD,CAASC,KAAT,CAAgB,CAKvC,MAAOF,SAAA,CAASC,MAAT,CAAiBC,KAAjB,CAJaC,QAAsB,CAAC5B,KAAD,CAAQ,CAChD,MAAOgC,cAAA,CAAcN,MAAd,CAAsBC,KAAtB,CAA6B3B,KAA7B,CADyC,CAI3C,CALgC,CAQzCiC,QAASA,eAAc,CAACP,MAAD,CAASC,KAAT,CAAgB,CAKrC,MAAOF,SAAA,CAASC,MAAT,CAAiBC,KAAjB,CAJaC,QAAsB,CAAC5B,KAAD,CAAQ,CAChD,MAAOkC,YAAA,CAAYR,MAAZ,CAAoBC,KAApB,CAA2B3B,KAA3B,CADyC,CAI3C,CAL8B,CAQvCmC,QAASA,iBAAgB,CAACT,MAAD,CAASC,KAAT,CAAgB,CAMvC,IALA,IAAIS,aAAeV,MAAA,CAAOW,IAAP,CAAYC,SAAZ,CAAnB,CACI3C,EAAI,CADR,CAEIG,EAAIyC,IAAA,CAAKC,GAAL,CAAS,CAAT,CAAYb,KAAZ,CAAkBjC,MAAlB,CAFR,CAGI+C;AAAiBlD,KAAJ,CAAUO,CAAV,CAAc,CAAd,CAEjB,CAAO,EAAEH,CAAT,CAAaG,CAAb,CAAA,CACE2C,UAAA,CAAW9C,CAAX,CAAe,CAAf,CAAA,CAAoB+C,SAAA,CAAUN,YAAV,CAAwBzC,CAAxB,CAA4BG,CAA5B,CAGlB8B,aAAAA,CAAgBA,QAAsB,CAAC5B,KAAD,CAAQ,CAqClD,IAHA,IAAI2C,GAAK,CAAT,CACIC,GAlCqBH,UAkCrBG,CAAOlD,MAEX,CAAOiD,EAAP,CAAYC,EAAZ,CAAA,CAAgB,CACd,IAAIC,IAAMF,EAANE,CAAWD,EAAXC,GAAkB,CAEK,EAA3B,CAvCuBJ,UAuCTK,CAAED,GAAFC,CAAd,CAvC0C9C,KAuC1C,CACE4C,EADF,CACOC,GADP,CAGEF,EAHF,CAGOE,GAHP,CAGa,CANC,CApCd,MAAmClB,MAkD9B,CAJAgB,EAIA,CAnD2C,CAIlDf,aAAA,CAAca,UAAd,CAA2BM,QAAS,EAAG,CACrC,MAAON,WAD8B,CAIvC,OAAOhB,SAAA,CAASC,MAAT,CAAiBC,KAAjB,CAAwBC,YAAxB,CAlBgC,CAqBzCU,QAASA,UAAS,CAACQ,CAAD,CAAIE,CAAJ,CAAO,CACvB,MAAOF,EAAP,CAAWE,CADY,CAIzBN,QAASA,UAAS,CAAChB,MAAD,CAASuB,QAAT,CAAmB,CACnC,IAAIC,aAAexB,MAAfwB,CAAsBxD,MAE1B,IAAgB,CAAhB,EAAIuD,QAAJ,EAAoC,CAApC,CAAqBC,YAArB,CACE,MAAOxB,OAAA,CAAO,CAAP,CAGT,IAAgB,CAAhB,EAAIuB,QAAJ,CACE,MAAOvB,OAAA,CAAOwB,YAAP,CAAsB,CAAtB,CAGLC;QAAAA,EAAkBD,YAAlBC,CAAiC,CACjCC,aAAAA,CAAWb,IAAA,CAAKc,KAAL,CAAWF,QAAX,CACf,KAAIG,IAAM5B,MAAA,CAAO0B,YAAP,CAEV,OAAOE,IAAP,EADW5B,MAAA6B,CAAOH,YAAPG,CAAkB,CAAlBA,CACX,CAAqBD,GAArB,GAA6BH,QAA7B,CAA8CC,YAA9C,CAfmC,CAmDrCI,QAASA,gBAAe,CAAC9B,MAAD,CAASC,KAAT,CAAgB,CACtC,IAAI8B,UAAY,IAAIC,GAApB,CACIC,aAAe,EADnB,CAGIC,UAAY3E,0BAAA,CAA2ByC,MAA3B,CAHhB,CAIImC,KAEJ,IAAI,CACF,IAAKD,SAAA,CAAU/D,CAAV,EAAL,CAAoB,EAAEgE,KAAF,CAAUD,SAAA,CAAU9D,CAAV,EAAV,EAAyBC,IAA7C,CAAA,CAAoD,CAClD,IAAI+D,WAAID,KAAJC,CAAU9D,KAAd,CACI+D,aAAMC,EAAA,CAAGA,MAAH,CAAUF,UAAV,CAELL,UAAA,CAAUQ,GAAV,CAAcF,YAAd,CAAL,EACEN,SAAA,CAAUS,GAAV,CAAcH,YAAd,CAAmBJ,YAAA,CAAaQ,IAAb,CAAkBL,UAAlB,CAAnB,CALgD,CADlD,CASF,MAAOvD,GAAP,CAAY,CACZqD,SAAA,CAAU3D,CAAV,CAAYM,GAAZ,CADY,CATd,OAWU,CACRqD,SAAA,CAAUzD,CAAV,EADQ,CAQV,MAAOsB,SAAA,CAASC,MAAT;AAAiBC,KAAjB,CAJaC,QAAsB,CAAC5B,KAAD,CAAQ,CAjClD,IAAI+D,IAAMC,EAAA,CAAGA,MAAH,CAkC4ChE,KAlC5C,CAAV,CACI8D,EAiCgCL,SAjC5B,CAAUW,GAAV,CAAcL,GAAd,CAEEM,KAAAA,EAAV,GAAIP,CAAJ,GACEA,CACA,CA6BoBH,YA9BhB,CAAOQ,IAAP,CA8BgDnE,KA9BhD,CACJ,CA6BkCyD,SA7BlC,CAAUS,GAAV,CAAcH,GAAd,CAAmBD,CAAnB,CAFF,CA+BE,OAA6CnC,MA1BxC,EAAOmC,CAAP,CAAW,CAAX,EA0BwCnC,KA1BxC,CAAsBjC,MAAtB,CAyB2C,CAI3C,CA1B+B,CA6BxCsC,QAASA,cAAa,CAACN,MAAD,CAASC,KAAT,CAAgB3B,KAAhB,CAAuB,CAC3C,IAAIsE,YAAc5C,MAAA,CAAO,CAAP,CAAd4C,CAA0B5C,MAAA,CAAO,CAAP,CAE9B,OAAmB,EAAnB,EAAI4C,WAAJ,EACEC,KAAA,CAAMC,GAAN,CAAUC,IAAV,CAAe,mDAAf,CAAA,EAEO,CAAA9C,KAAA,CAAM,CAAN,CAHT,EASOA,KAAA,CADQY,IAAAmC,CAAKlC,GAALkC,CAASnC,IAAA,CAAKoC,GAAL,CADdpC,IAAAqC,CAAKvB,KAALuB,EAAY5E,KAAZ4E,CAAoBlD,MAAA,CAAO,CAAP,CAApBkD,GADCN,WACDM,CADejD,KACfiD,CADqBlF,MACrBkF,EACc,CAAcjD,KAAd,CAAoBjC,MAApB,CAA6B,CAA7B,CAATgF,CAA0C,CAA1CA,CACR,CAZoC,CAe7CxC,QAASA,YAAW,CAACR,MAAD,CAASC,KAAT,CAAgB3B,KAAhB,CAAuB,CACzC,OAAQA,KAAR;AAAgB0B,MAAA,CAAO,CAAP,CAAhB,GAA8BA,MAAA,CAAO,CAAP,CAA9B,CAA0CA,MAAA,CAAO,CAAP,CAA1C,GAAwDC,KAAA,CAAM,CAAN,CAAxD,CAAmEA,KAAA,CAAM,CAAN,CAAnE,EAA+EA,KAAA,CAAM,CAAN,CADtC,CAI3CkD,QAASA,mBAAkB,CAACf,CAAD,CAAI,CAC7B,MAAaO,KAAAA,EAAb,GAAOP,CAAP,EAAgC,IAAhC,GAA0BA,CADG,CAI/BgB,QAASA,OAAM,CAACC,MAAD,CAAS,CACtB,IAAIC,QAAU,EACdD,OAAA,CAAOE,OAAP,CAAe,QAAS,CAACC,CAAD,CAAI,CACtB,CAACF,OAAA,CAAQG,QAAR,CAAiBD,CAAjB,CAAL,EAA4BL,kBAAA,CAAmBK,CAAnB,CAA5B,EACEF,OAAA,CAAQb,IAAR,CAAae,CAAb,CAFwB,CAA5B,CAKA,OAAOF,QAPe,CAUxBI,QAASA,gBAAe,CAACC,IAAD,CAAOC,aAAP,CAAsB,CAE5C,MAAO,CAD+B,UAAzBP,GAAA,MAAOO,cAAPP,CAAsCM,IAAA,CAAKE,GAAL,CAASD,aAAT,CAAtCP,CAAgEM,IACtE,EAAOG,MAAP,CAAcX,kBAAd,CAFqC,CAK9CY,QAASA,gBAAe,CAACJ,IAAD,CAAOC,aAAP,CAAsB,CACxCI,IAAAA,CAASN,eAAA,CAAgBC,IAAhB,CAAsBC,aAAtB,CAAA,CAAqCjD,IAArC,EACb;MAAOqD,KAAA,CAAOhG,MAAP,CAAgB,CAACgG,IAAA,CAAO,CAAP,CAAD,CAAYA,IAAA,CAAOA,IAAP,CAAchG,MAAd,CAAuB,CAAvB,CAAZ,CAAhB,CAAyD,CAAC,CAAD,CAAI,CAAJ,CAFpB,CAS9CiG,QAASA,iBAAgB,CAACN,IAAD,CAAOC,aAAP,CAAsB,CAC7C,MAAOR,OAAA,CAAOM,eAAA,CAAgBC,IAAhB,CAAsBC,aAAtB,CAAP,CADsC,CAhN/CzE,MAAA,CAAO+E,cAAP,CAAsB5G,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CgB,MAAO,CAAA,CADoC,CAA7C,CAGAhB,QAAA,CAAQyC,QAAR,CAAmBA,QACnBzC,QAAA,CAAQ+C,gBAAR,CAA2BA,gBAC3B/C,QAAA,CAAQiD,cAAR,CAAyBA,cACzBjD,QAAA,CAAQmD,gBAAR,CAA2BA,gBAC3BnD,QAAA,CAAQwE,eAAR,CAA0BA,eAC1BxE,QAAA,CAAQgD,aAAR,CAAwBA,aACxBhD,QAAA,CAAQkD,WAAR,CAAsBA,WACtBlD,QAAA,CAAQ8F,MAAR,CAAiBA,MACjB9F,QAAA,CAAQyG,eAAR;AAA0BA,eAC1BzG,QAAA,CAAQ6G,iBAAR,CAgMAA,QAA0B,CAACR,IAAD,CAAOC,aAAP,CAAsB,CAC9C,MAAOF,gBAAA,CAAgBC,IAAhB,CAAsBC,aAAtB,CADuC,CA/LhDtG,QAAA,CAAQ2G,gBAAR,CAA2BA,gBAC3B3G,QAAA,CAAQ8G,cAAR,CAsMAA,QAAuB,CAACC,SAAD,CAAYV,IAAZ,CAAkBC,aAAlB,CAAiC,CACtD,OAAQS,SAAR,EACE,KAAK,UAAL,CACA,KAAK,QAAL,CACE,MAAON,gBAAA,CAAgBJ,IAAhB,CAAsBC,aAAtB,CAET,MAAK,UAAL,CACE,MAdGF,gBAAA,CAcsBC,IAdtB,CAc4BC,aAd5B,CAgBL,MAAK,SAAL,CACE,MAAOK,iBAAA,CAAiBN,IAAjB,CAAuBC,aAAvB,CAET,SACE,MAAOG,gBAAA,CAAgBJ,IAAhB,CAAsBC,aAAtB,CAZX,CADsD,CArMxDtG,QAAA,CAAQgH,KAAR,CAsNAA,QAAc,CAAChG,KAAD;AAAQ2E,GAAR,CAAanC,GAAb,CAAkB,CAC9B,MAAOD,KAAA,CAAKC,GAAL,CAASmC,GAAT,CAAcpC,IAAA,CAAKoC,GAAL,CAASnC,GAAT,CAAcxC,KAAd,CAAd,CADuB,CArNhChB,QAAA,CAAQiH,2BAAR,CAyNAA,QAAoC,CAACF,SAAD,CAAY,CAC9C,OAAQA,SAAR,EACE,KAAK,UAAL,CACE,MAAOhE,iBAET,MAAK,QAAL,CACE,MAAOE,eAET,MAAK,UAAL,CACE,MAAOE,iBAET,MAAK,SAAL,CACE,MAAOqB,gBAET,SACE,MAAOzB,iBAdX,CAD8C,CAvNhD,KAAIwC,MAAQzF,OAAA,CAAQ,sDAAR,CArB+H;",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/scale-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$scale_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getScale = getScale;\nexports.getQuantizeScale = getQuantizeScale;\nexports.getLinearScale = getLinearScale;\nexports.getQuantileScale = getQuantileScale;\nexports.getOrdinalScale = getOrdinalScale;\nexports.quantizeScale = quantizeScale;\nexports.linearScale = linearScale;\nexports.unique = unique;\nexports.getLinearDomain = getLinearDomain;\nexports.getQuantileDomain = getQuantileDomain;\nexports.getOrdinalDomain = getOrdinalDomain;\nexports.getScaleDomain = getScaleDomain;\nexports.clamp = clamp;\nexports.getScaleFunctionByScaleType = getScaleFunctionByScaleType;\n\nvar _core = require(\"@deck.gl/core\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction getScale(domain, range, scaleFunction) {\n  var scale = scaleFunction;\n\n  scale.domain = function () {\n    return domain;\n  };\n\n  scale.range = function () {\n    return range;\n  };\n\n  return scale;\n}\n\nfunction getQuantizeScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return quantizeScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction getLinearScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return linearScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction getQuantileScale(domain, range) {\n  var sortedDomain = domain.sort(ascending);\n  var i = 0;\n  var n = Math.max(1, range.length);\n  var thresholds = new Array(n - 1);\n\n  while (++i < n) {\n    thresholds[i - 1] = threshold(sortedDomain, i / n);\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return thresholdsScale(thresholds, range, value);\n  };\n\n  scaleFunction.thresholds = function () {\n    return thresholds;\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction ascending(a, b) {\n  return a - b;\n}\n\nfunction threshold(domain, fraction) {\n  var domainLength = domain.length;\n\n  if (fraction <= 0 || domainLength < 2) {\n    return domain[0];\n  }\n\n  if (fraction >= 1) {\n    return domain[domainLength - 1];\n  }\n\n  var domainFraction = (domainLength - 1) * fraction;\n  var lowIndex = Math.floor(domainFraction);\n  var low = domain[lowIndex];\n  var high = domain[lowIndex + 1];\n  return low + (high - low) * (domainFraction - lowIndex);\n}\n\nfunction bisectRight(a, x) {\n  var lo = 0;\n  var hi = a.length;\n\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (ascending(a[mid], x) > 0) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  return lo;\n}\n\nfunction thresholdsScale(thresholds, range, value) {\n  return range[bisectRight(thresholds, value)];\n}\n\nfunction ordinalScale(domain, domainMap, range, value) {\n  var key = \"\".concat(value);\n  var d = domainMap.get(key);\n\n  if (d === undefined) {\n    d = domain.push(value);\n    domainMap.set(key, d);\n  }\n\n  return range[(d - 1) % range.length];\n}\n\nfunction getOrdinalScale(domain, range) {\n  var domainMap = new Map();\n  var uniqueDomain = [];\n\n  var _iterator = _createForOfIteratorHelper(domain),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var d = _step.value;\n      var key = \"\".concat(d);\n\n      if (!domainMap.has(key)) {\n        domainMap.set(key, uniqueDomain.push(d));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return ordinalScale(uniqueDomain, domainMap, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction quantizeScale(domain, range, value) {\n  var domainRange = domain[1] - domain[0];\n\n  if (domainRange <= 0) {\n    _core.log.warn('quantizeScale: invalid domain, returning range[0]')();\n\n    return range[0];\n  }\n\n  var step = domainRange / range.length;\n  var idx = Math.floor((value - domain[0]) / step);\n  var clampIdx = Math.max(Math.min(idx, range.length - 1), 0);\n  return range[clampIdx];\n}\n\nfunction linearScale(domain, range, value) {\n  return (value - domain[0]) / (domain[1] - domain[0]) * (range[1] - range[0]) + range[0];\n}\n\nfunction notNullOrUndefined(d) {\n  return d !== undefined && d !== null;\n}\n\nfunction unique(values) {\n  var results = [];\n  values.forEach(function (v) {\n    if (!results.includes(v) && notNullOrUndefined(v)) {\n      results.push(v);\n    }\n  });\n  return results;\n}\n\nfunction getTruthyValues(data, valueAccessor) {\n  var values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(notNullOrUndefined);\n}\n\nfunction getLinearDomain(data, valueAccessor) {\n  var sorted = getTruthyValues(data, valueAccessor).sort();\n  return sorted.length ? [sorted[0], sorted[sorted.length - 1]] : [0, 0];\n}\n\nfunction getQuantileDomain(data, valueAccessor) {\n  return getTruthyValues(data, valueAccessor);\n}\n\nfunction getOrdinalDomain(data, valueAccessor) {\n  return unique(getTruthyValues(data, valueAccessor));\n}\n\nfunction getScaleDomain(scaleType, data, valueAccessor) {\n  switch (scaleType) {\n    case 'quantize':\n    case 'linear':\n      return getLinearDomain(data, valueAccessor);\n\n    case 'quantile':\n      return getQuantileDomain(data, valueAccessor);\n\n    case 'ordinal':\n      return getOrdinalDomain(data, valueAccessor);\n\n    default:\n      return getLinearDomain(data, valueAccessor);\n  }\n}\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction getScaleFunctionByScaleType(scaleType) {\n  switch (scaleType) {\n    case 'quantize':\n      return getQuantizeScale;\n\n    case 'linear':\n      return getLinearScale;\n\n    case 'quantile':\n      return getQuantileScale;\n\n    case 'ordinal':\n      return getOrdinalScale;\n\n    default:\n      return getQuantizeScale;\n  }\n}\n//# sourceMappingURL=scale-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","getScale","domain","range","scaleFunction","scale.domain","scale.range","getQuantizeScale","quantizeScale","getLinearScale","linearScale","getQuantileScale","sortedDomain","sort","ascending","Math","max","thresholds","threshold","lo","hi","mid","a","scaleFunction.thresholds","b","fraction","domainLength","domainFraction","lowIndex","floor","low","high","getOrdinalScale","domainMap","Map","uniqueDomain","_iterator","_step","d","key","concat","has","set","push","get","undefined","domainRange","_core","log","warn","clampIdx","min","idx","notNullOrUndefined","unique","values","results","forEach","v","includes","getTruthyValues","data","valueAccessor","map","filter","getLinearDomain","sorted","getOrdinalDomain","defineProperty","getQuantileDomain","getScaleDomain","scaleType","clamp","getScaleFunctionByScaleType"]
}
