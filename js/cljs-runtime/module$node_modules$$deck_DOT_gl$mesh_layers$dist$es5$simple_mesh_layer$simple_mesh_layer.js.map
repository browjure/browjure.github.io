{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$simple_mesh_layer$simple_mesh_layer.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/mesh-layers/dist/es5/simple-mesh-layer/simple-mesh-layer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$mesh_layers$dist$es5$simple_mesh_layer$simple_mesh_layer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _core = require(\"@deck.gl/core\");\n\nvar _core2 = require(\"@luma.gl/core\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _matrix = require(\"../utils/matrix\");\n\nvar _simpleMeshLayerVertex = _interopRequireDefault(require(\"./simple-mesh-layer-vertex.glsl\"));\n\nvar _simpleMeshLayerFragment = _interopRequireDefault(require(\"./simple-mesh-layer-fragment.glsl\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction validateGeometryAttributes(attributes, useMeshColors) {\n  var hasColorAttribute = attributes.COLOR_0 || attributes.colors;\n  var useColorAttribute = hasColorAttribute && useMeshColors;\n\n  if (!useColorAttribute) {\n    attributes.colors = {\n      constant: true,\n      value: new Float32Array([1, 1, 1])\n    };\n  }\n\n  _core.log.assert(attributes.positions || attributes.POSITION, 'SimpleMeshLayer requires \"postions\" or \"POSITION\" attribute in mesh property.');\n}\n\nfunction getGeometry(data, useMeshColors) {\n  if (data.attributes) {\n    validateGeometryAttributes(data.attributes, useMeshColors);\n\n    if (data instanceof _core2.Geometry) {\n      return data;\n    } else {\n      return new _core2.Geometry(data);\n    }\n  } else if (data.positions || data.POSITION) {\n    validateGeometryAttributes(data, useMeshColors);\n    return new _core2.Geometry({\n      attributes: data\n    });\n  }\n\n  throw Error('Invalid mesh');\n}\n\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  mesh: {\n    value: null,\n    type: 'object',\n    async: true\n  },\n  texture: {\n    type: 'image',\n    value: null,\n    async: true\n  },\n  sizeScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  _useMeshColors: {\n    type: 'boolean',\n    value: false\n  },\n  _instanced: true,\n  wireframe: false,\n  material: true,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getOrientation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getScale: {\n    type: 'accessor',\n    value: [1, 1, 1]\n  },\n  getTranslation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getTransformMatrix: {\n    type: 'accessor',\n    value: []\n  }\n};\n\nvar SimpleMeshLayer = function (_Layer) {\n  (0, _inherits2[\"default\"])(SimpleMeshLayer, _Layer);\n\n  var _super = _createSuper(SimpleMeshLayer);\n\n  function SimpleMeshLayer() {\n    (0, _classCallCheck2[\"default\"])(this, SimpleMeshLayer);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2[\"default\"])(SimpleMeshLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      var transpileToGLSL100 = !(0, _core2.isWebGL2)(this.context.gl);\n      var defines = {};\n\n      if ((0, _webgl.hasFeature)(this.context.gl, _webgl.FEATURES.GLSL_DERIVATIVES)) {\n        defines.DERIVATIVES_AVAILABLE = 1;\n      }\n\n      return (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"getShaders\", this).call(this, {\n        vs: _simpleMeshLayerVertex[\"default\"],\n        fs: _simpleMeshLayerFragment[\"default\"],\n        modules: [_core.project32, _core.phongLighting, _core.picking],\n        transpileToGLSL100: transpileToGLSL100,\n        defines: defines\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instancePositions: {\n          transition: true,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          size: 3,\n          accessor: 'getPosition'\n        },\n        instanceColors: {\n          type: 5121,\n          transition: true,\n          size: this.props.colorFormat.length,\n          normalized: true,\n          accessor: 'getColor',\n          defaultValue: [0, 0, 0, 255]\n        },\n        instanceModelMatrix: _matrix.MATRIX_ATTRIBUTES\n      });\n      this.setState({\n        emptyTexture: new _core2.Texture2D(this.context.gl, {\n          data: new Uint8Array(4),\n          width: 1,\n          height: 1\n        })\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (props.mesh !== oldProps.mesh || changeFlags.extensionsChanged) {\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        if (props.mesh) {\n          this.setState({\n            model: this.getModel(props.mesh)\n          });\n          var attributes = props.mesh.attributes || props.mesh;\n          this.setState({\n            hasNormals: Boolean(attributes.NORMAL || attributes.normals)\n          });\n        }\n\n        this.getAttributeManager().invalidateAll();\n      }\n\n      if (props.texture !== oldProps.texture) {\n        this.setTexture(props.texture);\n      }\n\n      if (this.state.model) {\n        this.state.model.setDrawMode(this.props.wireframe ? 3 : 4);\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      (0, _get2[\"default\"])((0, _getPrototypeOf2[\"default\"])(SimpleMeshLayer.prototype), \"finalizeState\", this).call(this);\n      this.state.emptyTexture[\"delete\"]();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n\n      if (!this.state.model) {\n        return;\n      }\n\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          sizeScale = _this$props.sizeScale,\n          coordinateSystem = _this$props.coordinateSystem,\n          _instanced = _this$props._instanced;\n      this.state.model.draw({\n        uniforms: Object.assign({}, uniforms, {\n          sizeScale: sizeScale,\n          composeModelMatrix: !_instanced || (0, _matrix.shouldComposeModelMatrix)(viewport, coordinateSystem),\n          flatShading: !this.state.hasNormals\n        })\n      });\n    }\n  }, {\n    key: \"getModel\",\n    value: function getModel(mesh) {\n      var model = new _core2.Model(this.context.gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        geometry: getGeometry(mesh, this.props._useMeshColors),\n        isInstanced: true\n      }));\n      var texture = this.props.texture;\n      var emptyTexture = this.state.emptyTexture;\n      model.setUniforms({\n        sampler: texture || emptyTexture,\n        hasTexture: Boolean(texture)\n      });\n      return model;\n    }\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(texture) {\n      var gl = this.context.gl;\n      var _this$state = this.state,\n          emptyTexture = _this$state.emptyTexture,\n          model = _this$state.model;\n\n      if (model) {\n        model.setUniforms({\n          sampler: texture || emptyTexture,\n          hasTexture: Boolean(texture)\n        });\n      }\n    }\n  }]);\n  return SimpleMeshLayer;\n}(_core.Layer);\n\nexports[\"default\"] = SimpleMeshLayer;\nSimpleMeshLayer.layerName = 'SimpleMeshLayer';\nSimpleMeshLayer.defaultProps = defaultProps;\n//# sourceMappingURL=simple-mesh-layer.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","NewTarget","constructor","result","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Date","prototype","toString","call","e","validateGeometryAttributes","attributes","useMeshColors","COLOR_0","colors","constant","value","Float32Array","_core","log","assert","positions","POSITION","getGeometry","data","_core2","Geometry","Error","_interopRequireDefault","Object","defineProperty","_classCallCheck2","_createClass2","_get2","_inherits2","_webgl","_matrix","_simpleMeshLayerVertex","_simpleMeshLayerFragment","SimpleMeshLayer","_Layer","_super","key","getShaders","transpileToGLSL100","isWebGL2","context","gl","defines","hasFeature","FEATURES","GLSL_DERIVATIVES","DERIVATIVES_AVAILABLE","vs","fs","modules","project32","phongLighting","picking","initializeState","attributeManager","getAttributeManager","addInstanced","instancePositions","transition","type","fp64","use64bitPositions","size","accessor","instanceColors","props","colorFormat","length","normalized","defaultValue","instanceModelMatrix","MATRIX_ATTRIBUTES","setState","emptyTexture","Texture2D","Uint8Array","width","height","updateState","_ref","oldProps","changeFlags","mesh","extensionsChanged","state","model","getModel","hasNormals","NORMAL","normals","invalidateAll","texture","setTexture","setDrawMode","wireframe","finalizeState","draw","_ref2","viewport","_this$props","coordinateSystem","uniforms","assign","sizeScale","composeModelMatrix","_instanced","shouldComposeModelMatrix","flatShading","Model","id","geometry","_useMeshColors","isInstanced","setUniforms","sampler","hasTexture","_this$state","Layer","layerName","defaultProps","async","min","material","getPosition","x","position","getColor","DEFAULT_COLOR","getOrientation","getScale","getTranslation","getTransformMatrix"]
}
