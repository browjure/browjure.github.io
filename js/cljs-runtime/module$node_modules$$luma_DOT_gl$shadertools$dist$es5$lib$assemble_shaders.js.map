{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$assemble_shaders.js",
"lineCount":16,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/lib/assemble-shaders.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$assemble_shaders\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assembleShaders = assembleShaders;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _constants = require(\"./constants\");\n\nvar _resolveModules = require(\"./resolve-modules\");\n\nvar _platformDefines = require(\"./platform-defines\");\n\nvar _injectShader = _interopRequireWildcard(require(\"./inject-shader\"));\n\nvar _transpileShader = _interopRequireDefault(require(\"./transpile-shader\"));\n\nvar _utils = require(\"../utils\");\n\nvar _SHADER_TYPE;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(_injectShader.DECLARATION_INJECT_MARKER, \"\\n\\n\");\nvar SHADER_TYPE = (_SHADER_TYPE = {}, (0, _defineProperty2[\"default\"])(_SHADER_TYPE, _constants.VERTEX_SHADER, 'vertex'), (0, _defineProperty2[\"default\"])(_SHADER_TYPE, _constants.FRAGMENT_SHADER, 'fragment'), _SHADER_TYPE);\nvar FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\n\nfunction assembleShaders(gl, opts) {\n  var vs = opts.vs,\n      fs = opts.fs;\n  var modules = (0, _resolveModules.resolveModules)(opts.modules || []);\n  return {\n    gl: gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: _constants.VERTEX_SHADER,\n      modules: modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: _constants.FRAGMENT_SHADER,\n      modules: modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  var id = _ref.id,\n      source = _ref.source,\n      type = _ref.type,\n      modules = _ref.modules,\n      _ref$defines = _ref.defines,\n      defines = _ref$defines === void 0 ? {} : _ref$defines,\n      _ref$hookFunctions = _ref.hookFunctions,\n      hookFunctions = _ref$hookFunctions === void 0 ? [] : _ref$hookFunctions,\n      _ref$inject = _ref.inject,\n      inject = _ref$inject === void 0 ? {} : _ref$inject,\n      _ref$transpileToGLSL = _ref.transpileToGLSL100,\n      transpileToGLSL100 = _ref$transpileToGLSL === void 0 ? false : _ref$transpileToGLSL,\n      _ref$prologue = _ref.prologue,\n      prologue = _ref$prologue === void 0 ? true : _ref$prologue,\n      log = _ref.log;\n  (0, _utils.assert)(typeof source === 'string', 'shader source must be a string');\n  var isVertex = type === _constants.VERTEX_SHADER;\n  var sourceLines = source.split('\\n');\n  var glslVersion = 100;\n  var versionLine = '';\n  var coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  var allDefines = {};\n  modules.forEach(function (module) {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  var assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id: id,\n    source: source,\n    type: type\n  }), \"\\n\").concat(getShaderType({\n    type: type\n  }), \"\\n\").concat((0, _platformDefines.getPlatformShaderDefines)(gl), \"\\n\").concat((0, _platformDefines.getVersionDefines)(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  var hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  var hookInjections = {};\n  var declInjections = {};\n  var mainInjections = {};\n\n  for (var key in inject) {\n    var injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    var match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      var hash = match[2];\n      var name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  var _iterator = _createForOfIteratorHelper(modules),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var module = _step.value;\n\n      if (log) {\n        module.checkDeprecations(coreSource, log);\n      }\n\n      var moduleSource = module.getModuleSource(type, glslVersion);\n      assembledSource += moduleSource;\n      var injections = module.injections[type];\n\n      for (var _key in injections) {\n        var _match = _key.match(/^(v|f)s:#([\\w-]+)$/);\n\n        if (_match) {\n          var _name = _match[2];\n          var injectionType = _name === 'decl' ? declInjections : mainInjections;\n          injectionType[_key] = injectionType[_key] || [];\n\n          injectionType[_key].push(injections[_key]);\n        } else {\n          hookInjections[_key] = hookInjections[_key] || [];\n\n          hookInjections[_key].push(injections[_key]);\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = (0, _injectShader[\"default\"])(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = (0, _injectShader[\"default\"])(assembledSource, type, mainInjections);\n  assembledSource = (0, _transpileShader[\"default\"])(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    var uniforms = {};\n\n    var _iterator2 = _createForOfIteratorHelper(modules),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var module = _step2.value;\n        var moduleUniforms = module.getUniforms(opts, uniforms);\n        Object.assign(uniforms, moduleUniforms);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  var type = _ref2.type;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  var id = _ref3.id,\n      source = _ref3.source,\n      type = _ref3.type;\n  var injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  var defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var count = 0;\n  var sourceText = '';\n\n  for (var define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    var value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  var result = '';\n\n  for (var hookName in hookFunctions) {\n    var hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      var injections = hookInjections[hookName];\n      injections.sort(function (a, b) {\n        return a.order - b.order;\n      });\n\n      var _iterator3 = _createForOfIteratorHelper(injections),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var injection = _step3.value;\n          result += \"  \".concat(injection.injection, \"\\n\");\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(function (hook) {\n    var opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n\n    var _hook$split = hook.split(':'),\n        _hook$split2 = (0, _slicedToArray2[\"default\"])(_hook$split, 2),\n        stage = _hook$split2[0],\n        signature = _hook$split2[1];\n\n    var name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature: signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","assembleShader","gl","_ref","id","source","type","modules","_ref$defines","defines","_ref$hookFunctions","hookFunctions","_ref$inject","inject","_ref$transpileToGLSL","transpileToGLSL100","_ref$prologue","prologue","log","_utils","assert","isVertex","_constants","VERTEX_SHADER","sourceLines","split","glslVersion","versionLine","coreSource","indexOf","join","concat","allDefines","forEach","assign","getDefines","assembledSource","getShaderName","SHADER_TYPE","toUpperCase","_platformDefines","getPlatformShaderDefines","getVersionDefines","getApplicationDefines","FRAGMENT_SHADER_PROLOGUE","hookFunctionMap","normalizeHookFunctions","hookInjections","declInjections","mainInjections","key","injection","order","match","hash","_iterator","_step","checkDeprecations","moduleSource","getModuleSource","injections","_key","_match","injectionType","_name","push","INJECT_SHADER_DECLARATIONS","_injectShader","getHookFunctions","_transpileShader","assembleGetUniforms","getUniforms","opts","uniforms","_iterator2","_step2","moduleUniforms","_ref3","arguments","undefined","count","sourceText","define","Number","isFinite","result","hookName","hookFunction","signature","header","sort","a","b","_iterator3","_step3","footer","vs","fs","hook","trim","_hook$split","_hook$split2","_slicedToArray2","stage","replace","_interopRequireDefault","_interopRequireWildcard","defineProperty","assembleShaders","_resolveModules","resolveModules","FRAGMENT_SHADER","_defineProperty2","_SHADER_TYPE","DECLARATION_INJECT_MARKER"]
}
