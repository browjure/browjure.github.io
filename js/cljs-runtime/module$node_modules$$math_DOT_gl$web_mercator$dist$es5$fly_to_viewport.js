shadow$provide.module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport=function(global,require,module,exports){function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"===typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"===typeof o.length){it&&(o=it);var i=0;allowArrayLike=function(){};return{s:allowArrayLike,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e;
},f:allowArrayLike}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=!0,didErr=!1,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(_e2){didErr=!0;err=_e2},f:function(){try{if(!normalCompletion&&null!=it["return"])it["return"]()}finally{if(didErr)throw err;}}}}function _unsupportedIterableToArray(o,
minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getFlyToTransitionParams(startProps,
endProps,opts){opts=Object.assign({},DEFAULT_OPTS,opts);opts=opts.curve;var startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=(0,_webMercatorUtils.zoomToScale)(startZoom),endZoom=endProps.zoom;endProps=[endProps.longitude,endProps.latitude];endZoom=(0,_webMercatorUtils.zoomToScale)(endZoom-startZoom);startCenter=(0,_webMercatorUtils.lngLatToWorld)(startCenter);endProps=(0,_webMercatorUtils.lngLatToWorld)(endProps);endProps=vec2.sub([],endProps,startCenter);
startProps=Math.max(startProps.width,startProps.height);var w1=startProps/endZoom;startScale*=vec2.length(endProps);var _u1=Math.max(startScale,EPSILON);endZoom=opts*opts;var b0=(w1*w1-startProps*startProps+endZoom*endZoom*_u1*_u1)/(2*startProps*endZoom*_u1);w1=(w1*w1-startProps*startProps-endZoom*endZoom*_u1*_u1)/(2*w1*endZoom*_u1);b0=Math.log(Math.sqrt(b0*b0+1)-b0);w1=Math.log(Math.sqrt(w1*w1+1)-w1);return{startZoom,startCenterXY:startCenter,uDelta:endProps,w0:startProps,u1:startScale,S:(w1-b0)/
opts,rho:opts,rho2:endZoom,r0:b0,r1:w1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=function(startProps,endProps,t){var viewport={},_getFlyToTransitionPa=getFlyToTransitionParams(startProps,endProps,3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}),startZoom=_getFlyToTransitionPa.startZoom,startCenterXY=_getFlyToTransitionPa.startCenterXY,uDelta=_getFlyToTransitionPa.uDelta,w0=
_getFlyToTransitionPa.w0,u1=_getFlyToTransitionPa.u1,S=_getFlyToTransitionPa.S,rho=_getFlyToTransitionPa.rho,rho2=_getFlyToTransitionPa.rho2;_getFlyToTransitionPa=_getFlyToTransitionPa.r0;if(u1<EPSILON){startCenterXY=_createForOfIteratorHelper(VIEWPORT_TRANSITION_PROPS);var _step;try{for(startCenterXY.s();!(_step=startCenterXY.n()).done;){var key=_step.value,startValue=startProps[key],endValue=endProps[key];viewport[key]=(0,_mathUtils.lerp)(startValue,endValue,t)}}catch(err){startCenterXY.e(err)}finally{startCenterXY.f()}return viewport}_step=
t*S;w0=(Math.cosh(_getFlyToTransitionPa)*Math.tanh(_getFlyToTransitionPa+rho*_step)-Math.sinh(_getFlyToTransitionPa))/rho2*w0/u1;rho=1/(Math.cosh(_getFlyToTransitionPa)/Math.cosh(_getFlyToTransitionPa+rho*_step));startZoom+=(0,_webMercatorUtils.scaleToZoom)(rho);uDelta=vec2.scale([],uDelta,w0);vec2.add(uDelta,uDelta,startCenterXY);startCenterXY=(0,_webMercatorUtils.worldToLngLat)(uDelta);viewport.longitude=startCenterXY[0];viewport.latitude=startCenterXY[1];viewport.zoom=startZoom;return viewport};
exports.getFlyToDuration=function(startProps,endProps){var opts=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_opts=opts=Object.assign({},DEFAULT_OPTS,opts),screenSpeed=_opts.screenSpeed,speed=_opts.speed;_opts=_opts.maxDuration;var _getFlyToTransitionPa2=getFlyToTransitionParams(startProps,endProps,opts);opts=_getFlyToTransitionPa2.rho;_getFlyToTransitionPa2=1E3*_getFlyToTransitionPa2.S;screenSpeed=Number.isFinite(screenSpeed)?_getFlyToTransitionPa2/(screenSpeed/opts):_getFlyToTransitionPa2/
speed;return Number.isFinite(_opts)&&screenSpeed>_opts?0:screenSpeed};var _mathUtils=require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$math_utils"),_webMercatorUtils=require("module$node_modules$$math_DOT_gl$web_mercator$dist$es5$web_mercator_utils"),vec2=global(require("module$node_modules$gl_matrix$cjs$vec2")),EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"],DEFAULT_OPTS={curve:1.414,speed:1.2}}
//# sourceMappingURL=module$node_modules$$math_DOT_gl$web_mercator$dist$es5$fly_to_viewport.js.map
