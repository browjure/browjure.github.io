shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$orbit_controller=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _interopRequireDefault=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=exports.OrbitState=void 0;var _classCallCheck2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_math=require("module$node_modules$math_DOT_gl$dist$es5$index");
global=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$controller"));module=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$view_state"));_interopRequireDefault=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$linear_interpolator"));var _transitionManager=require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager"),_mathUtils=require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$math_utils"),
JSCompiler_object_inline_target_2669=[0,0,0],LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _interopRequireDefault["default"](["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK},OrbitState=function(_ViewState){function OrbitState(_ref){var makeViewport=_ref.makeViewport;var _this=_ref.width;var height=_ref.height,_ref$orbitAxis=_ref.orbitAxis;_ref$orbitAxis=void 0===_ref$orbitAxis?
"Z":_ref$orbitAxis;var _ref$rotationX=_ref.rotationX;_ref$rotationX=void 0===_ref$rotationX?0:_ref$rotationX;var _ref$rotationOrbit=_ref.rotationOrbit;_ref$rotationOrbit=void 0===_ref$rotationOrbit?0:_ref$rotationOrbit;var _ref$target=_ref.target;_ref$target=void 0===_ref$target?JSCompiler_object_inline_target_2669:_ref$target;var _ref$zoom=_ref.zoom;_ref$zoom=void 0===_ref$zoom?0:_ref$zoom;var _ref$minRotationX=_ref.minRotationX;_ref$minRotationX=void 0===_ref$minRotationX?-90:_ref$minRotationX;
var _ref$maxRotationX=_ref.maxRotationX;_ref$maxRotationX=void 0===_ref$maxRotationX?90:_ref$maxRotationX;var _ref$minZoom=_ref.minZoom;_ref$minZoom=void 0===_ref$minZoom?-Infinity:_ref$minZoom;var _ref$maxZoom=_ref.maxZoom,maxZoom=void 0===_ref$maxZoom?Infinity:_ref$maxZoom;_ref$maxZoom=_ref.startPanPosition;var startTarget=_ref.startTarget,startRotatePos=_ref.startRotatePos,startRotationX=_ref.startRotationX,startRotationOrbit=_ref.startRotationOrbit,startZoomPosition=_ref.startZoomPosition;_ref=
_ref.startZoom;(0,_classCallCheck2["default"])(this,OrbitState);_this=_super.call(this,{width:_this,height,orbitAxis:_ref$orbitAxis,rotationX:_ref$rotationX,rotationOrbit:_ref$rotationOrbit,target:_ref$target,zoom:_ref$zoom,minRotationX:_ref$minRotationX,maxRotationX:_ref$maxRotationX,minZoom:_ref$minZoom,maxZoom});_this._state={startPanPosition:_ref$maxZoom,startTarget,startRotatePos,startRotationX,startRotationOrbit,startZoomPosition,startZoom:_ref};_this.makeViewport=makeViewport;return _this}
(0,_inherits2["default"])(OrbitState,_ViewState);var _super=_createSuper(OrbitState);(0,_createClass2["default"])(OrbitState,[{key:"panStart",value:function(_ref2){return this._getUpdatedState({startPanPosition:_ref2.pos,startTarget:this._viewportProps.target})}},{key:"pan",value:function(_ref3){var _this$_state=this._state,startPanPosition=_this$_state.startPanPosition;_this$_state=_this$_state.startTarget;_ref3=(new _math.Vector2(_ref3.pos)).subtract(startPanPosition);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:_this$_state,
pixelOffset:_ref3})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(_ref4){return this._getUpdatedState({startRotatePos:_ref4.pos,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(_ref5){var pos=_ref5.pos,_ref5$deltaAngleX=_ref5.deltaAngleX;_ref5$deltaAngleX=void 0===_ref5$deltaAngleX?0:_ref5$deltaAngleX;_ref5=_ref5.deltaAngleY;
var deltaAngleY=void 0===_ref5?0:_ref5,_this$_state2=this._state,startRotatePos=_this$_state2.startRotatePos;_ref5=_this$_state2.startRotationX;_this$_state2=_this$_state2.startRotationOrbit;var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width;_this$_viewportProps=_this$_viewportProps.height;if(!startRotatePos||!Number.isFinite(_ref5)||!Number.isFinite(_this$_state2))return this;if(pos){_ref5$deltaAngleX=(pos[0]-startRotatePos[0])/width;pos=(pos[1]-startRotatePos[1])/_this$_viewportProps;
if(-90>_ref5||90<_ref5)_ref5$deltaAngleX*=-1;pos={rotationX:_ref5+180*pos,rotationOrbit:_this$_state2+180*_ref5$deltaAngleX}}else pos={rotationX:_ref5+deltaAngleY,rotationOrbit:_this$_state2+_ref5$deltaAngleX};return this._getUpdatedState(pos)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(viewState){viewState=viewState.getViewportProps();var props=Object.assign({},this._viewportProps),rotationOrbit=
props.rotationOrbit;180<Math.abs(rotationOrbit-viewState.rotationOrbit)&&(props.rotationOrbit=0>rotationOrbit?rotationOrbit+360:rotationOrbit-360);return props}},{key:"zoomStart",value:function(_ref6){return this._getUpdatedState({startZoomPosition:_ref6.pos,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref7){var pos=_ref7.pos,startPos=_ref7.startPos,scale=_ref7.scale,_this$_viewportProps2=this._viewportProps,zoom=_this$_viewportProps2.zoom;
_ref7=_this$_viewportProps2.width;var height=_this$_viewportProps2.height,target=_this$_viewportProps2.target,_this$_state3=this._state,startZoom=_this$_state3.startZoom;_this$_viewportProps2=_this$_state3.startZoomPosition;_this$_state3=_this$_state3.startTarget;Number.isFinite(startZoom)||(startZoom=zoom,_this$_state3=target,_this$_viewportProps2=startPos||pos);pos=this._calculateNewZoom({scale,startZoom});startPos=Math.pow(2,startZoom);scale=Math.pow(2,pos);return this._getUpdatedState({zoom:pos,
target:this._calculateNewTarget({startTarget:_this$_state3,zoom:pos,pixelOffset:[(_ref7/2-_this$_viewportProps2[0])*(scale/startPos-1),(height/2-_this$_viewportProps2[1])*(scale/startPos-1)]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:0<arguments.length&&void 0!==arguments[0]?arguments[0]:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:2)})})}},{key:"moveLeft",value:function(){return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:[-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:50),0]})})}},{key:"moveRight",value:function(){return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:[0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,0]})})}},{key:"moveUp",value:function(){return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:[0,
-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:50)]})})}},{key:"moveDown",value:function(){return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:[0,0<arguments.length&&void 0!==arguments[0]?arguments[0]:50]})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:15)})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:15)})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10)})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10)})}},{key:"_calculateNewZoom",value:function(_ref8){var scale=_ref8.scale,startZoom=_ref8.startZoom,_this$_viewportProps3=
this._viewportProps;_ref8=_this$_viewportProps3.maxZoom;_this$_viewportProps3=_this$_viewportProps3.minZoom;Number.isFinite(startZoom)||(startZoom=this._viewportProps.zoom);scale=startZoom+Math.log2(scale);return(0,_math.clamp)(scale,_this$_viewportProps3,_ref8)}},{key:"_calculateNewTarget",value:function(_ref9){var startTarget=_ref9.startTarget,zoom=_ref9.zoom;_ref9=_ref9.pixelOffset;var viewportProps=Object.assign({},this._viewportProps);Number.isFinite(zoom)&&(viewportProps.zoom=zoom);startTarget&&
(viewportProps.target=startTarget);startTarget=this.makeViewport(viewportProps);zoom=startTarget.project(viewportProps.target);return startTarget.unproject([zoom[0]-_ref9[0],zoom[1]-_ref9[1],zoom[2]])}},{key:"_getUpdatedState",value:function(newProps){return new OrbitState(Object.assign({},this._viewportProps,this._state,newProps))}},{key:"_applyConstraints",value:function(props){var maxZoom=props.maxZoom,minZoom=props.minZoom,zoom=props.zoom,maxRotationX=props.maxRotationX,minRotationX=props.minRotationX,
rotationOrbit=props.rotationOrbit;props.zoom=(0,_math.clamp)(zoom,minZoom,maxZoom);props.rotationX=(0,_math.clamp)(props.rotationX,minRotationX,maxRotationX);if(-180>rotationOrbit||180<rotationOrbit)props.rotationOrbit=(0,_mathUtils.mod)(rotationOrbit+180,360)-180;return props}}]);return OrbitState}(module["default"]);exports.OrbitState=OrbitState;require=function(_Controller){function OrbitController(props){(0,_classCallCheck2["default"])(this,OrbitController);return _super2.call(this,OrbitState,
props)}(0,_inherits2["default"])(OrbitController,_Controller);var _super2=_createSuper(OrbitController);(0,_createClass2["default"])(OrbitController,[{key:"_getTransitionProps",value:function(){return LINEAR_TRANSITION_PROPS}}]);return OrbitController}(global["default"]);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$orbit_controller.js.map
