shadow$provide.module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$grid_aggregation_utils=function(global,require,module,exports){function toFinite(n){return Number.isFinite(n)?n:0}function alignToCell(inValue,cellSize){var sign=0>inValue?-1:1;inValue=0>sign?Math.abs(inValue)+cellSize:Math.abs(inValue);inValue=Math.floor(inValue/cellSize)*cellSize;return inValue*sign}function getGridOffset(boundingBox,cellSize){return 2<arguments.length&&void 0!==arguments[2]&&!arguments[2]?{xOffset:cellSize,
yOffset:cellSize}:{yOffset:cellSize/R_EARTH*(180/Math.PI),xOffset:cellSize/R_EARTH*(180/Math.PI)/Math.cos((boundingBox.yMin+boundingBox.yMax)/2*Math.PI/180)}}Object.defineProperty(exports,"__esModule",{value:!0});exports.getBoundingBox=function(attributes,vertexCount){attributes=attributes.positions.value;for(var yMin=Infinity,yMax=-Infinity,xMin=Infinity,xMax=-Infinity,y,x,i=0;i<vertexCount;i++)x=attributes[3*i],y=attributes[3*i+1],yMin=y<yMin?y:yMin,yMax=y>yMax?y:yMax,xMin=x<xMin?x:xMin,xMax=x>
xMax?x:xMax;return{xMin:toFinite(xMin),xMax:toFinite(xMax),yMin:toFinite(yMin),yMax:toFinite(yMax)}};exports.alignToCell=alignToCell;exports.getGridOffset=getGridOffset;exports.getGridParams=function(boundingBox,cellSize,viewport,coordinateSystem){cellSize=getGridOffset(boundingBox,cellSize,coordinateSystem!==_core.COORDINATE_SYSTEM.CARTESIAN);var width=viewport.width;viewport=viewport.height;viewport=coordinateSystem===_core.COORDINATE_SYSTEM.CARTESIAN?[-width/2,-viewport/2]:[-180,-90];_core.log.assert([_core.COORDINATE_SYSTEM.CARTESIAN,
_core.COORDINATE_SYSTEM.LNGLAT,_core.COORDINATE_SYSTEM.DEFAULT].includes(coordinateSystem));coordinateSystem=boundingBox.yMin;coordinateSystem=[-1*(alignToCell(boundingBox.xMin-viewport[0],cellSize.xOffset)+viewport[0]),-1*(alignToCell(coordinateSystem-viewport[1],cellSize.yOffset)+viewport[1])];viewport=boundingBox.xMax-boundingBox.xMin+cellSize.xOffset;boundingBox=boundingBox.yMax-boundingBox.yMin+cellSize.yOffset;return{gridOffset:cellSize,translation:coordinateSystem,width:viewport,height:boundingBox,
numCol:Math.ceil(viewport/cellSize.xOffset),numRow:Math.ceil(boundingBox/cellSize.yOffset)}};var _core=require("module$node_modules$$deck_DOT_gl$core$dist$es5$index"),R_EARTH=6378E3}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$grid_aggregation_utils.js.map
