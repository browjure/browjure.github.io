{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$model.js",
"lineCount":24,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/lib/model.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$model\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _programManager = _interopRequireDefault(require(\"./program-manager\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _modelUtils = require(\"./model-utils\");\n\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000;\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nvar NOOP = function NOOP() {};\n\nvar DRAW_PARAMS = {};\n\nvar Model = function () {\n  function Model(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, Model);\n    var _props$id = props.id,\n        id = _props$id === void 0 ? (0, _webgl.uid)('model') : _props$id;\n    (0, _webgl.assert)((0, _gltools.isWebGL)(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || (0, _webgl.uid)('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  (0, _createClass2[\"default\"])(Model, [{\n    key: \"initialize\",\n    value: function initialize(props) {\n      this.props = {};\n      this.programManager = props.programManager || _programManager[\"default\"].getDefaultProgramManager(this.gl);\n      this._programManagerState = -1;\n      this._managedProgram = false;\n      var _props$program = props.program,\n          program = _props$program === void 0 ? null : _props$program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this.program = null;\n      this.vertexArray = null;\n      this._programDirty = true;\n      this.userData = {};\n      this.needsRedraw = true;\n      this._attributes = {};\n      this.attributes = {};\n      this.uniforms = {};\n      this.pickable = true;\n\n      this._checkProgram();\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n      this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n      this.vertexCount = props.vertexCount || 0;\n      this.geometryBuffers = {};\n      this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n      this._setModelProps(props);\n\n      this.geometry = {};\n      (0, _webgl.assert)(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setModelProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key][\"delete\"]();\n        }\n      }\n\n      if (this._managedProgram) {\n        this.programManager.release(this.program);\n        this._managedProgram = false;\n      }\n\n      this.vertexArray[\"delete\"]();\n\n      this._deleteGeometryBuffers();\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"setProgram\",\n    value: function setProgram(props) {\n      var program = props.program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this._programDirty = true;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.uniforms;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.drawMode = drawMode;\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      (0, _webgl.assert)(Number.isFinite(vertexCount));\n      this.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      (0, _webgl.assert)(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.drawMode = geometry.drawMode;\n      this.vertexCount = geometry.getVertexCount();\n\n      this._deleteGeometryBuffers();\n\n      this.geometryBuffers = (0, _modelUtils.getBuffersFromGeometry)(this.gl, geometry);\n      this.vertexArray.setAttributes(this.geometryBuffers);\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ((0, _webgl.isObjectEmpty)(attributes)) {\n        return this;\n      }\n\n      var normalizedAttributes = {};\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n      }\n\n      this.vertexArray.setAttributes(normalizedAttributes);\n      return this;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.uniforms, uniforms);\n      return this;\n    }\n  }, {\n    key: \"getModuleUniforms\",\n    value: function getModuleUniforms(opts) {\n      this._checkProgram();\n\n      var getUniforms = this.programManager.getUniforms(this.program);\n\n      if (getUniforms) {\n        return getUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      (0, _webgl.clear)(this.program.gl, opts);\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._checkProgram();\n\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray;\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms);\n      var logPriority;\n\n      if (_webgl.log.priority >= LOG_DRAW_PRIORITY) {\n        logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n      }\n\n      var drawParams = this.vertexArray.getDrawParams();\n      var _this$props = this.props,\n          _this$props$isIndexed = _this$props.isIndexed,\n          isIndexed = _this$props$isIndexed === void 0 ? drawParams.isIndexed : _this$props$isIndexed,\n          _this$props$indexType = _this$props.indexType,\n          indexType = _this$props$indexType === void 0 ? drawParams.indexType : _this$props$indexType,\n          _this$props$indexOffs = _this$props.indexOffset,\n          indexOffset = _this$props$indexOffs === void 0 ? drawParams.indexOffset : _this$props$indexOffs,\n          _this$props$vertexArr = _this$props.vertexArrayInstanced,\n          vertexArrayInstanced = _this$props$vertexArr === void 0 ? drawParams.isInstanced : _this$props$vertexArr;\n\n      if (vertexArrayInstanced && !this.isInstanced) {\n        _webgl.log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      var _this$props2 = this.props,\n          _this$props2$onBefore = _this$props2.onBeforeRender,\n          onBeforeRender = _this$props2$onBefore === void 0 ? NOOP : _this$props2$onBefore,\n          _this$props2$onAfterR = _this$props2.onAfterRender,\n          onAfterRender = _this$props2$onAfterR === void 0 ? NOOP : _this$props2$onAfterR;\n      onBeforeRender();\n      this.program.setUniforms(this.uniforms);\n      var didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount,\n        offset: isIndexed ? indexOffset : 0\n      }));\n      onAfterRender();\n\n      if (_webgl.log.priority >= LOG_DRAW_PRIORITY) {\n        this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n      }\n\n      return didDraw;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, (0, _defineProperty2[\"default\"])({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _webgl.log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n\n      return this.setUniforms(uniforms).draw();\n    }\n  }, {\n    key: \"_setModelProps\",\n    value: function _setModelProps(props) {\n      Object.assign(this.props, props);\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n    }\n  }, {\n    key: \"_checkProgram\",\n    value: function _checkProgram() {\n      var needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n      if (!needsUpdate) {\n        return;\n      }\n\n      var program = this.programProps.program;\n\n      if (program) {\n        this._managedProgram = false;\n      } else {\n        var _this$programProps = this.programProps,\n            vs = _this$programProps.vs,\n            fs = _this$programProps.fs,\n            modules = _this$programProps.modules,\n            inject = _this$programProps.inject,\n            defines = _this$programProps.defines,\n            varyings = _this$programProps.varyings,\n            bufferMode = _this$programProps.bufferMode,\n            transpileToGLSL100 = _this$programProps.transpileToGLSL100;\n        program = this.programManager.get({\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          varyings: varyings,\n          bufferMode: bufferMode,\n          transpileToGLSL100: transpileToGLSL100\n        });\n\n        if (this.program && this._managedProgram) {\n          this.programManager.release(this.program);\n        }\n\n        this._programManagerState = this.programManager.stateHash;\n        this._managedProgram = true;\n      }\n\n      (0, _webgl.assert)(program instanceof _webgl.Program, 'Model needs a program');\n      this._programDirty = false;\n\n      if (program === this.program) {\n        return;\n      }\n\n      this.program = program;\n\n      if (this.vertexArray) {\n        this.vertexArray.setProps({\n          program: this.program,\n          attributes: this.vertexArray.attributes\n        });\n      } else {\n        this.vertexArray = new _webgl.VertexArray(this.gl, {\n          program: this.program\n        });\n      }\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n    }\n  }, {\n    key: \"_deleteGeometryBuffers\",\n    value: function _deleteGeometryBuffers() {\n      for (var name in this.geometryBuffers) {\n        var buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n        if (buffer instanceof _webgl.Buffer) {\n          buffer[\"delete\"]();\n        }\n      }\n    }\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      if (this.animated) {\n        (0, _webgl.assert)(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n      }\n    }\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ((0, _webgl.isObjectEmpty)(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new _webgl.TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      return this;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(logLevel) {\n      var logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n\n      _webgl.log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: _webgl.log.level <= 2\n      })();\n\n      return logLevel;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n      if (logLevel === undefined) {\n        return;\n      }\n\n      var attributeTable = (0, _webgl.getDebugTableForVertexArray)({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = (0, _webgl.getDebugTableForUniforms)({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount;\n\n      var _getDebugTableForUnif2 = (0, _webgl.getDebugTableForUniforms)({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        _webgl.log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n      }\n\n      if (unusedCount > 0) {\n        _webgl.log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n      }\n\n      var configTable = (0, _webgl.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);\n\n      _webgl.log.table(logLevel, attributeTable)();\n\n      _webgl.log.table(logLevel, uniformTable)();\n\n      _webgl.log.table(logLevel + 1, configTable)();\n\n      if (framebuffer) {\n        framebuffer.log({\n          logLevel: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      _webgl.log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }]);\n  return Model;\n}();\n\nexports[\"default\"] = Model;\n//# sourceMappingURL=model.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_defineProperty2","_classCallCheck2","_createClass2","_gltools","_programManager","_webgl","_modelUtils","NOOP","DRAW_PARAMS","Model","gl","props","arguments","length","undefined","_props$id","id","uid","assert","isWebGL","lastLogTime","animated","initialize","key","programManager","getDefaultProgramManager","_programManagerState","_managedProgram","_props$program","program","programProps","vs","fs","modules","defines","inject","varyings","bufferMode","transpileToGLSL100","vertexArray","_programDirty","userData","needsRedraw","_attributes","attributes","uniforms","pickable","_checkProgram","setUniforms","assign","getModuleUniforms","moduleSettings","drawMode","vertexCount","geometryBuffers","isInstanced","instanced","instanceCount","_setModelProps","geometry","Number","isFinite","ERR_MODEL_PARAMS","setProps","_delete","release","_deleteGeometryBuffers","getDrawMode","getVertexCount","getInstanceCount","getAttributes","getProgram","setProgram","getUniforms","setDrawMode","setVertexCount","setInstanceCount","setGeometry","getBuffersFromGeometry","setAttributes","isObjectEmpty","normalizedAttributes","name","attribute","getValue","opts","updateModuleSettings","clear","draw","_opts$moduleSettings","framebuffer","_opts$uniforms","_opts$attributes","_opts$transformFeedba","transformFeedback","_opts$parameters","parameters","_opts$vertexArray","logPriority","LOG_DRAW_PRIORITY","log","priority","_logDrawCallStart","drawParams","getDrawParams","_this$props","_this$props$isIndexed","isIndexed","_this$props$indexType","indexType","_this$props$indexOffs","indexOffset","_this$props$vertexArr","vertexArrayInstanced","warn","_this$props2","_this$props2$onBefore","onBeforeRender","_this$props2$onAfterR","onAfterRender","didDraw","offset","_logDrawCallEnd","transform","_opts$discard","discard","feedbackBuffers","_opts$unbindModels","unbindModels","_setFeedbackBuffers","forEach","model","unbindBuffers","bindBuffers","render","_feedbackBuffers","stateHash","_this$programProps","get","Program","VertexArray","buffer","Buffer","_setAnimationProps","animationProps","TransformFeedback","setBuffers","logLevel","logDrawTimeout","LOG_DRAW_TIMEOUT","Date","now","group","concat","collapsed","level","attributeTable","getDebugTableForVertexArray","header","_getDebugTableForUnif","getDebugTableForUniforms","uniformTable","table","unusedTable","unusedCount","_getDebugTableForUnif2","undefinedOnly","missingTable","count","keys","configTable","getDebugTableForProgramConfiguration","configuration","message","groupEnd"]
}
