shadow$provide.module$node_modules$react_map_gl$dist$es5$utils$transition_manager=function(global,require,module,exports){function cropEasingFunction(easing,x0){var y0=easing(x0);return function(t){return 1/(1-y0)*(easing(t*(1-x0)+x0)-y0)}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.cropEasingFunction=cropEasingFunction;exports["default"]=exports.TRANSITION_EVENTS=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_assert=global(require("module$node_modules$react_map_gl$dist$es5$utils$assert"));module=require("module$node_modules$react_map_gl$dist$es5$utils$transition$index");var _mapState=global(require("module$node_modules$react_map_gl$dist$es5$utils$map_state")),noop=function(){},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3,
UPDATE:4};exports.TRANSITION_EVENTS=TRANSITION_EVENTS;require={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new module.LinearInterpolator,transitionInterruption:TRANSITION_EVENTS.BREAK,onTransitionStart:noop,onTransitionInterrupt:noop,onTransitionEnd:noop,onViewportChange:noop,onStateChange:noop};global=function(){function TransitionManager(){var _this=this,opts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck2["default"])(this,TransitionManager);
(0,_defineProperty2["default"])(this,"_animationFrame",null);(0,_defineProperty2["default"])(this,"_onTransitionFrame",function(){_this._animationFrame=requestAnimationFrame(_this._onTransitionFrame);_this._updateViewport()});this.props=null;this.onViewportChange=opts.onViewportChange||noop;this.onStateChange=opts.onStateChange||noop;this.time=opts.getTime||Date.now}(0,_createClass2["default"])(TransitionManager,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:
null}},{key:"processViewportChange",value:function(nextProps){var currentProps=this.props;this.props=nextProps;if(!currentProps||this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){var startProps=Object.assign({},currentProps);nextProps=Object.assign({},nextProps);if(this._isTransitionInProgress()&&(currentProps.onTransitionInterrupt(),this.state.interruption===TRANSITION_EVENTS.SNAP_TO_END?Object.assign(startProps,this.state.endProps):Object.assign(startProps,
this.state.propsInTransition),this.state.interruption===TRANSITION_EVENTS.UPDATE)){currentProps=this.time();var x0=(currentProps-this.state.startTime)/this.state.duration;nextProps.transitionDuration=this.state.duration-(currentProps-this.state.startTime);nextProps.transitionEasing=cropEasingFunction(this.state.easing,x0);nextProps.transitionInterpolator=startProps.transitionInterpolator}nextProps.onTransitionStart();this._triggerTransition(startProps,nextProps);return!0}this._isTransitionInProgress()&&
(currentProps.onTransitionInterrupt(),this._endTransition());return!1}},{key:"_isTransitionInProgress",value:function(){return!!this._animationFrame}},{key:"_isTransitionEnabled",value:function(props){var transitionDuration=props.transitionDuration;props=props.transitionInterpolator;return(0<transitionDuration||"auto"===transitionDuration)&&!!props}},{key:"_isUpdateDueToCurrentTransition",value:function(props){return this.state.propsInTransition?this.state.interpolator.arePropsEqual(props,this.state.propsInTransition):
!1}},{key:"_shouldIgnoreViewportChange",value:function(currentProps,nextProps){return currentProps?this._isTransitionInProgress()?this.state.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):this._isTransitionEnabled(nextProps)?nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps):!0:!0}},{key:"_triggerTransition",value:function(startProps,endProps){(0,_assert["default"])(this._isTransitionEnabled(endProps));this._animationFrame&&cancelAnimationFrame(this._animationFrame);
var transitionInterpolator=endProps.transitionInterpolator;transitionInterpolator=transitionInterpolator.getDuration?transitionInterpolator.getDuration(startProps,endProps):endProps.transitionDuration;if(0!==transitionInterpolator){var initialProps=endProps.transitionInterpolator.initializeProps(startProps,endProps);startProps={inTransition:!0,isZooming:startProps.zoom!==endProps.zoom,isPanning:startProps.longitude!==endProps.longitude||startProps.latitude!==endProps.latitude,isRotating:startProps.bearing!==
endProps.bearing||startProps.pitch!==endProps.pitch};this.state={duration:transitionInterpolator,easing:endProps.transitionEasing,interpolator:endProps.transitionInterpolator,interruption:endProps.transitionInterruption,startTime:this.time(),startProps:initialProps.start,endProps:initialProps.end,animation:null,propsInTransition:{}};this._onTransitionFrame();this.onStateChange(startProps)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=
null);this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var currentTime=this.time(),_this$state=this.state,easing=_this$state.easing,interpolator=_this$state.interpolator,startProps=_this$state.startProps,endProps=_this$state.endProps,shouldEnd=!1;currentTime=(currentTime-_this$state.startTime)/_this$state.duration;1<=currentTime&&(currentTime=1,shouldEnd=!0);currentTime=easing(currentTime);easing=interpolator.interpolateProps(startProps,
endProps,currentTime);easing=new _mapState["default"](Object.assign({},this.props,easing));this.state.propsInTransition=easing.getViewportProps();this.onViewportChange(this.state.propsInTransition,this.props);shouldEnd&&(this._endTransition(),this.props.onTransitionEnd())}}]);return TransitionManager}();exports["default"]=global;(0,_defineProperty2["default"])(global,"defaultProps",require)}
//# sourceMappingURL=module$node_modules$react_map_gl$dist$es5$utils$transition_manager.js.map
