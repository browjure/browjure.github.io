{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$texture_transform.js",
"lineCount":19,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/transform/texture-transform.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$transform$texture_transform\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _shadertools = require(\"@luma.gl/shadertools\");\n\nvar _transformShaderUtils = require(\"./transform-shader-utils\");\n\nvar _SRC_TEX_PARAMETER_OV;\n\nvar SRC_TEX_PARAMETER_OVERRIDES = (_SRC_TEX_PARAMETER_OV = {}, (0, _defineProperty2[\"default\"])(_SRC_TEX_PARAMETER_OV, 10241, 9728), (0, _defineProperty2[\"default\"])(_SRC_TEX_PARAMETER_OV, 10240, 9728), (0, _defineProperty2[\"default\"])(_SRC_TEX_PARAMETER_OV, 10242, 33071), (0, _defineProperty2[\"default\"])(_SRC_TEX_PARAMETER_OV, 10243, 33071), _SRC_TEX_PARAMETER_OV);\nvar FS_OUTPUT_VARIABLE = 'transform_output';\n\nvar TextureTransform = function () {\n  function TextureTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, TextureTransform);\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  (0, _createClass2[\"default\"])(TextureTransform, [{\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var updatedModelProps = this._processVertexShader(props);\n\n      return Object.assign({}, props, updatedModelProps);\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c = this.bindings[this.currentIndex],\n          sourceBuffers = _this$bindings$this$c.sourceBuffers,\n          sourceTextures = _this$bindings$this$c.sourceTextures,\n          framebuffer = _this$bindings$this$c.framebuffer,\n          targetTexture = _this$bindings$this$c.targetTexture;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      var uniforms = Object.assign({}, opts.uniforms);\n      var parameters = Object.assign({}, opts.parameters);\n      var discard = opts.discard;\n\n      if (this.hasSourceTextures || this.hasTargetTexture) {\n        attributes.transform_elementID = this.elementIDBuffer;\n\n        for (var sampler in this.samplerTextureMap) {\n          var textureName = this.samplerTextureMap[sampler];\n          uniforms[sampler] = sourceTextures[textureName];\n        }\n\n        this._setSourceTextureParameters();\n\n        var sizeUniforms = (0, _transformShaderUtils.getSizeUniforms)({\n          sourceTextureMap: sourceTextures,\n          targetTextureVarying: this.targetTextureVarying,\n          targetTexture: targetTexture\n        });\n        Object.assign(uniforms, sizeUniforms);\n      }\n\n      if (this.hasTargetTexture) {\n        discard = false;\n        parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n      }\n\n      return {\n        attributes: attributes,\n        framebuffer: framebuffer,\n        uniforms: uniforms,\n        discard: discard,\n        parameters: parameters\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this._swapTexture) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupTextures(opts);\n    }\n  }, {\n    key: \"getTargetTexture\",\n    value: function getTargetTexture() {\n      var targetTexture = this.bindings[this.currentIndex].targetTexture;\n      return targetTexture;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$packed = _ref.packed,\n          packed = _ref$packed === void 0 ? false : _ref$packed;\n\n      var framebuffer = this.bindings[this.currentIndex].framebuffer;\n      var pixels = (0, _webgl.readPixelsToArray)(framebuffer);\n\n      if (!packed) {\n        return pixels;\n      }\n\n      var ArrayType = pixels.constructor;\n      var channelCount = (0, _shadertools.typeToChannelCount)(this.targetTextureType);\n      var packedPixels = new ArrayType(pixels.length * channelCount / 4);\n      var packCount = 0;\n\n      for (var i = 0; i < pixels.length; i += 4) {\n        for (var j = 0; j < channelCount; j++) {\n          packedPixels[packCount++] = pixels[i + j];\n        }\n      }\n\n      return packedPixels;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      var currentResources = this.bindings[this.currentIndex];\n      return currentResources.framebuffer;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      if (this.elementIDBuffer) {\n        this.elementIDBuffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      this._swapTexture = _swapTexture;\n      this.targetTextureVarying = _targetTextureVarying;\n      this.hasTargetTexture = _targetTextureVarying;\n\n      this._setupTextures(props);\n    }\n  }, {\n    key: \"_createTargetTexture\",\n    value: function _createTargetTexture(props) {\n      var sourceTextures = props.sourceTextures,\n          textureOrReference = props.textureOrReference;\n\n      if (textureOrReference instanceof _webgl.Texture2D) {\n        return textureOrReference;\n      }\n\n      var refTexture = sourceTextures[textureOrReference];\n\n      if (!refTexture) {\n        return null;\n      }\n\n      this._targetRefTexName = textureOrReference;\n      return this._createNewTexture(refTexture);\n    }\n  }, {\n    key: \"_setupTextures\",\n    value: function _setupTextures() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var sourceBuffers = props.sourceBuffers,\n          _props$_sourceTexture = props._sourceTextures,\n          _sourceTextures = _props$_sourceTexture === void 0 ? {} : _props$_sourceTexture,\n          _targetTexture = props._targetTexture;\n\n      var targetTexture = this._createTargetTexture({\n        sourceTextures: _sourceTextures,\n        textureOrReference: _targetTexture\n      });\n\n      this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        sourceTextures: _sourceTextures,\n        targetTexture: targetTexture\n      });\n\n      if ('elementCount' in props) {\n        this._updateElementIDBuffer(props.elementCount);\n      }\n    }\n  }, {\n    key: \"_updateElementIDBuffer\",\n    value: function _updateElementIDBuffer(elementCount) {\n      if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n        return;\n      }\n\n      var elementIds = new Float32Array(elementCount);\n      elementIds.forEach(function (_, index, array) {\n        array[index] = index;\n      });\n\n      if (!this.elementIDBuffer) {\n        this.elementIDBuffer = new _webgl.Buffer(this.gl, {\n          data: elementIds,\n          accessor: {\n            size: 1\n          }\n        });\n      } else {\n        this.elementIDBuffer.setData({\n          data: elementIds\n        });\n      }\n\n      this.elementCount = elementCount;\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this._swapTexture) {\n        var _this$_swapTextures = this._swapTextures(this.bindings[this.currentIndex]),\n            sourceTextures = _this$_swapTextures.sourceTextures,\n            targetTexture = _this$_swapTextures.targetTexture;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceTextures: sourceTextures,\n          targetTexture: targetTexture\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      var sourceBuffers = opts.sourceBuffers,\n          sourceTextures = opts.sourceTextures,\n          targetTexture = opts.targetTexture;\n\n      if (!binding) {\n        binding = {\n          sourceBuffers: {},\n          sourceTextures: {},\n          targetTexture: null\n        };\n      }\n\n      Object.assign(binding.sourceTextures, sourceTextures);\n      Object.assign(binding.sourceBuffers, sourceBuffers);\n\n      if (targetTexture) {\n        binding.targetTexture = targetTexture;\n        var width = targetTexture.width,\n            height = targetTexture.height;\n        var _binding = binding,\n            framebuffer = _binding.framebuffer;\n\n        if (framebuffer) {\n          framebuffer.update({\n            attachments: (0, _defineProperty2[\"default\"])({}, 36064, targetTexture),\n            resizeAttachments: false\n          });\n          framebuffer.resize({\n            width: width,\n            height: height\n          });\n        } else {\n          binding.framebuffer = new _webgl.Framebuffer(this.gl, {\n            id: \"transform-framebuffer\",\n            width: width,\n            height: height,\n            attachments: (0, _defineProperty2[\"default\"])({}, 36064, targetTexture)\n          });\n        }\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_setSourceTextureParameters\",\n    value: function _setSourceTextureParameters() {\n      var index = this.currentIndex;\n      var sourceTextures = this.bindings[index].sourceTextures;\n\n      for (var name in sourceTextures) {\n        sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n      }\n    }\n  }, {\n    key: \"_swapTextures\",\n    value: function _swapTextures(opts) {\n      if (!this._swapTexture) {\n        return null;\n      }\n\n      var sourceTextures = Object.assign({}, opts.sourceTextures);\n      sourceTextures[this._swapTexture] = opts.targetTexture;\n      var targetTexture = opts.sourceTextures[this._swapTexture];\n      return {\n        sourceTextures: sourceTextures,\n        targetTexture: targetTexture\n      };\n    }\n  }, {\n    key: \"_createNewTexture\",\n    value: function _createNewTexture(refTexture) {\n      var _parameters;\n\n      var texture = (0, _webgl.cloneTextureFrom)(refTexture, {\n        parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10241, 9728), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9728), (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), _parameters),\n        pixelStore: (0, _defineProperty2[\"default\"])({}, 37440, false)\n      });\n\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      this.ownTexture = texture;\n      return texture;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }, {\n    key: \"_processVertexShader\",\n    value: function _processVertexShader() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c2 = this.bindings[this.currentIndex],\n          sourceTextures = _this$bindings$this$c2.sourceTextures,\n          targetTexture = _this$bindings$this$c2.targetTexture;\n\n      var _updateForTextures = (0, _transformShaderUtils.updateForTextures)({\n        vs: props.vs,\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture: targetTexture\n      }),\n          vs = _updateForTextures.vs,\n          uniforms = _updateForTextures.uniforms,\n          targetTextureType = _updateForTextures.targetTextureType,\n          inject = _updateForTextures.inject,\n          samplerTextureMap = _updateForTextures.samplerTextureMap;\n\n      var combinedInject = (0, _shadertools.combineInjects)([props.inject || {}, inject]);\n      this.targetTextureType = targetTextureType;\n      this.samplerTextureMap = samplerTextureMap;\n      var fs = props._fs || (0, _shadertools.getPassthroughFS)({\n        version: (0, _webgl.getShaderVersion)(vs),\n        input: this.targetTextureVarying,\n        inputType: targetTextureType,\n        output: FS_OUTPUT_VARIABLE\n      });\n      var modules = this.hasSourceTextures || this.targetTextureVarying ? [_shadertools._transform].concat(props.modules || []) : props.modules;\n      return {\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        uniforms: uniforms,\n        inject: combinedInject\n      };\n    }\n  }]);\n  return TextureTransform;\n}();\n\nexports[\"default\"] = TextureTransform;\n//# sourceMappingURL=texture-transform.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_classCallCheck2","_createClass2","_defineProperty2","_webgl","_shadertools","_transformShaderUtils","_SRC_TEX_PARAMETER_OV","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","gl","props","arguments","length","undefined","id","currentIndex","samplerTextureMap","targetTextureType","targetTextureVarying","_swapTexture","bindings","resources","_initialize","seal","key","updateModelProps","updatedModelProps","_processVertexShader","assign","getDrawOptions","opts","_this$bindings$this$c","sourceTextures","framebuffer","targetTexture","attributes","sourceBuffers","uniforms","parameters","discard","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","textureName","_setSourceTextureParameters","sizeUniforms","getSizeUniforms","sourceTextureMap","viewport","width","height","swap","_getNextIndex","update","_setupTextures","getTargetTexture","getData","_ref$packed","_ref","packed","pixels","readPixelsToArray","ArrayType","constructor","channelCount","typeToChannelCount","packedPixels","packCount","i","j","getFramebuffer","currentResources","_delete","ownTexture","_targetTextureVarying","_createTargetTexture","textureOrReference","Texture2D","refTexture","_targetRefTexName","_createNewTexture","_props$_sourceTexture","_sourceTextures","_targetTexture","keys","_updateBindings","_updateElementIDBuffer","elementCount","elementIds","Float32Array","forEach","_","index","array","setData","data","Buffer","accessor","size","_updateBinding","_this$_swapTextures","_swapTextures","nextIndex","binding","attachments","resizeAttachments","resize","Framebuffer","name","setParameters","_parameters","texture","cloneTextureFrom","pixelStore","_this$bindings$this$c2","_updateForTextures","updateForTextures","vs","inject","combinedInject","combineInjects","fs","_fs","getPassthroughFS","version","getShaderVersion","input","inputType","output","FS_OUTPUT_VARIABLE","modules","_transform","concat"]
}
