{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$s2_layer$s2_utils.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/geo-layers/dist/es5/s2-layer/s2-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$s2_layer$s2_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getS2QuadKey = getS2QuadKey;\nexports.getS2Polygon = getS2Polygon;\n\nvar _s2Geometry = require(\"./s2-geometry\");\n\nvar _long = _interopRequireDefault(require(\"long\"));\n\nfunction getIdFromToken(token) {\n  var paddedToken = token.padEnd(16, '0');\n  return _long[\"default\"].fromString(paddedToken, 16);\n}\n\nvar MAX_RESOLUTION = 100;\n\nfunction getGeoBounds(_ref) {\n  var face = _ref.face,\n      ij = _ref.ij,\n      level = _ref.level;\n  var offsets = [[0, 0], [0, 1], [1, 1], [1, 0], [0, 0]];\n  var resolution = Math.max(1, Math.ceil(MAX_RESOLUTION * Math.pow(2, -level)));\n  var result = new Float64Array(4 * resolution * 2 + 2);\n  var ptIndex = 0;\n  var prevLng = 0;\n\n  for (var i = 0; i < 4; i++) {\n    var offset = offsets[i].slice(0);\n    var nextOffset = offsets[i + 1];\n    var stepI = (nextOffset[0] - offset[0]) / resolution;\n    var stepJ = (nextOffset[1] - offset[1]) / resolution;\n\n    for (var j = 0; j < resolution; j++) {\n      offset[0] += stepI;\n      offset[1] += stepJ;\n      var st = (0, _s2Geometry.IJToST)(ij, level, offset);\n      var uv = (0, _s2Geometry.STToUV)(st);\n      var xyz = (0, _s2Geometry.FaceUVToXYZ)(face, uv);\n      var lngLat = (0, _s2Geometry.XYZToLngLat)(xyz);\n\n      if (Math.abs(lngLat[1]) > 89.999) {\n        lngLat[0] = prevLng;\n      }\n\n      var deltaLng = lngLat[0] - prevLng;\n      lngLat[0] += deltaLng > 180 ? -360 : deltaLng < -180 ? 360 : 0;\n      result[ptIndex++] = lngLat[0];\n      result[ptIndex++] = lngLat[1];\n      prevLng = lngLat[0];\n    }\n  }\n\n  result[ptIndex++] = result[0];\n  result[ptIndex++] = result[1];\n  return result;\n}\n\nfunction getS2QuadKey(token) {\n  if (typeof token === 'string') {\n    if (token.indexOf('/') > 0) {\n      return token;\n    }\n\n    token = getIdFromToken(token);\n  }\n\n  return (0, _s2Geometry.toHilbertQuadkey)(token.toString());\n}\n\nfunction getS2Polygon(token) {\n  var key = getS2QuadKey(token);\n  var s2cell = (0, _s2Geometry.FromHilbertQuadKey)(key);\n  return getGeoBounds(s2cell);\n}\n//# sourceMappingURL=s2-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getS2QuadKey","token","indexOf","paddedToken","padEnd","_long","fromString","_s2Geometry","toHilbertQuadkey","toString","_interopRequireDefault","Object","defineProperty","value","getS2Polygon","key","s2cell","FromHilbertQuadKey","face","ij","level","offsets","resolution","Math","max","ceil","MAX_RESOLUTION","pow","result","Float64Array","ptIndex","prevLng","i","offset","slice","nextOffset","stepI","stepJ","j","st","IJToST","uv","STToUV","xyz","FaceUVToXYZ","lngLat","XYZToLngLat","abs","deltaLng"]
}
