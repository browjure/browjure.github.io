{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$aggregation_operation_utils.js",
"lineCount":5,
"mappings":"AAAAA,cAAA,CAAe,8FAAf,CAAmH,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAqB3JC,QAASA,WAAU,CAACC,IAAD,CAAOC,GAAP,CAAY,CAC7B,MAAOD,KAAP,CAAcC,GADe,CAI/BC,QAASA,WAAU,CAACF,IAAD,CAAOC,GAAP,CAAY,CAC7B,MAAOA,IAAA,CAAMD,IAAN,CAAaC,GAAb,CAAmBD,IADG,CAI/BG,QAASA,WAAU,CAACH,IAAD,CAAOC,GAAP,CAAY,CAC7B,MAAOA,IAAA,CAAMD,IAAN,CAAaC,GAAb,CAAmBD,IADG,CAI/BI,QAASA,QAAO,CAACC,GAAD,CAAMC,QAAN,CAAgB,CAC9B,GAAIC,MAAA,CAAOC,QAAP,CAAgBF,QAAhB,CAAJ,CACE,MAAOD,IAAA,CAAII,MAAJ,CAAaH,QAAb,CAAwB,IAG7BI,IAAAA,CAAWL,GAAA,CAAIM,GAAJ,CAAQL,QAAR,CAAA,CAAkBM,MAAlB,CAAyBL,MAAzB,CAAgCC,QAAhC,CACf,OAAOE,IAAA,CAASD,MAAT,CAAkBC,GAAA,CAASG,MAAT,CAAgBd,UAAhB,CAA4B,CAA5B,CAAlB,CAAmDW,GAAnD,CAA4DD,MAA5D,CAAqE,IAN9C;AAShCK,QAASA,OAAM,CAACT,GAAD,CAAMC,QAAN,CAAgB,CAC7B,GAAIC,MAAA,CAAOC,QAAP,CAAgBF,QAAhB,CAAJ,CACE,MAAOD,IAAA,CAAII,MAAJ,CAAaJ,GAAb,CAAiBI,MAAjB,CAA0BH,QAA1B,CAAqC,IAG1CI,IAAAA,CAAWL,GAAA,CAAIM,GAAJ,CAAQL,QAAR,CAAA,CAAkBM,MAAlB,CAAyBL,MAAzB,CAAgCC,QAAhC,CACf,OAAOE,IAAA,CAASD,MAAT,CAAkBC,GAAA,CAASG,MAAT,CAAgBd,UAAhB,CAA4B,CAA5B,CAAlB,CAAmD,IAN7B,CAS/BgB,QAASA,OAAM,CAACV,GAAD,CAAMC,QAAN,CAAgB,CAC7B,GAAIC,MAAA,CAAOC,QAAP,CAAgBF,QAAhB,CAAJ,CACE,MAAOD,IAAA,CAAII,MAAJ,CAAaH,QAAb,CAAwB,IAG7BI,IAAAA,CAAWL,GAAA,CAAIM,GAAJ,CAAQL,QAAR,CAAA,CAAkBM,MAAlB,CAAyBL,MAAzB,CAAgCC,QAAhC,CACf,OAAOE,IAAA,CAASD,MAAT,CAAkBC,GAAA,CAASG,MAAT,CAAgBX,UAAhB,CAA4B,CAACc,QAA7B,CAAlB,CAA2D,IANrC,CAS/BC,QAASA,OAAM,CAACZ,GAAD,CAAMC,QAAN,CAAgB,CAC7B,GAAIC,MAAA,CAAOC,QAAP,CAAgBF,QAAhB,CAAJ,CACE,MAAOD,IAAA,CAAII,MAAJ,CAAaH,QAAb,CAAwB,IAG7BI,IAAAA,CAAWL,GAAA,CAAIM,GAAJ,CAAQL,QAAR,CAAA,CAAkBM,MAAlB,CAAyBL,MAAzB,CAAgCC,QAAhC,CACf;MAAOE,IAAA,CAASD,MAAT,CAAkBC,GAAA,CAASG,MAAT,CAAgBV,UAAhB,CAA4Ba,QAA5B,CAAlB,CAA0D,IANpC,CAuC/BE,QAASA,aAAY,CAACZ,QAAD,CAAW,CAC9B,IAAIa,QAA6B,CAAnB,CAAAC,SAAA,CAAUX,MAAV,EAAyCY,IAAAA,EAAzC,GAAwBD,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,EAElF,OAAIb,OAAA,CAAOC,QAAP,CAAgBF,QAAhB,CAAJ,CACSA,QADT,CAIO,QAAS,CAACgB,EAAD,CAAK,CACnBH,OAAA,CAAQI,KAAR,CAAgBD,EAAhB,CAAmBC,KACnB,OAAOjB,SAAA,CAASgB,EAAT,CAAYE,MAAZ,CAAoBL,OAApB,CAFY,CAPS,CAhGhCM,MAAA,CAAOC,cAAP,CAAsB5B,OAAtB,CAA+B,YAA/B,CAA6C,CAC3C6B,MAAO,CAAA,CADoC,CAA7C,CAGA7B,QAAA,CAAQM,OAAR,CAAkBA,OAClBN,QAAA,CAAQgB,MAAR,CAAiBA,MACjBhB,QAAA,CAAQiB,MAAR,CAAiBA,MACjBjB,QAAA,CAAQmB,MAAR,CAAiBA,MACjBnB,QAAA,CAAQ8B,YAAR,CA2DAA,QAAqB,CAACC,WAAD,CAAcvB,QAAd,CAAwBa,OAAxB,CAAiC,CAChDW,WAAAA,CAAKC,qBAAA,CAAsBF,WAAtB,CAALC;AAA2CC,qBAA3CD,CAAiEE,GACrE1B,SAAA,CAAWY,YAAA,CAAaZ,QAAb,CAAuBa,OAAvB,CAEX,QAAQW,WAAR,EACE,KAAKC,qBAAL,CAA2BE,GAA3B,CACE,MAAO,SAAS,CAAC5B,GAAD,CAAM,CACpB,MAAOY,OAAA,CAAOZ,GAAP,CAAYC,QAAZ,CADa,CAIxB,MAAKyB,qBAAL,CAA2BC,GAA3B,CACE,MAAO,SAAS,CAAC3B,GAAD,CAAM,CACpB,MAAOS,OAAA,CAAOT,GAAP,CAAYC,QAAZ,CADa,CAIxB,MAAKyB,qBAAL,CAA2BG,IAA3B,CACE,MAAO,SAAS,CAAC7B,GAAD,CAAM,CACpB,MAAOD,QAAA,CAAQC,GAAR,CAAaC,QAAb,CADa,CAIxB,MAAKyB,qBAAL,CAA2BI,GAA3B,CACE,MAAO,SAAS,CAAC9B,GAAD,CAAM,CACpB,MAAOU,OAAA,CAAOV,GAAP,CAAYC,QAAZ,CADa,CAIxB,SACE,MAAO,KAtBX,CAJoD,CA1DtDR,QAAA,CAAQsC,gBAAR,CAqGAA,QAAyB,CAACC,QAAD,CAAW,CAClC,IAAIlB,QAA6B,CAAnB,CAAAC,SAAA,CAAUX,MAAV;AAAyCY,IAAAA,EAAzC,GAAwBD,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,EAClF,OAAO,SAAS,CAACf,GAAD,CAAM,CACpBc,OAAA,CAAQmB,OAAR,CAAkBjC,GAAA,CAAIM,GAAJ,CAAQ,QAAS,CAACW,EAAD,CAAK,CACtC,MAAOA,GAAP,CAAUC,KAD4B,CAAtB,CAGlB,OAAOc,SAAA,CAAShC,GAAA,CAAIM,GAAJ,CAAQ,QAAS,CAACW,EAAD,CAAK,CACpC,MAAOA,GAAP,CAAUE,MAD0B,CAAtB,CAAT,CAEHL,OAFG,CAJa,CAFY,CApGpCrB,QAAA,CAAQiC,qBAAR,CAAgC,IAAK,EACrC,KAAIA,sBAAwB,CAC1BC,IAAK,CADqB,CAE1BE,KAAM,CAFoB,CAG1BD,IAAK,CAHqB,CAI1BE,IAAK,CAJqB,CAM5BrC,QAAA,CAAQiC,qBAAR,CAAgCA,qBAnB2H;",
"sources":["node_modules/@deck_DOT_gl/aggregation-layers/dist/es5/utils/aggregation-operation-utils.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$aggregation_layers$dist$es5$utils$aggregation_operation_utils\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMean = getMean;\nexports.getSum = getSum;\nexports.getMax = getMax;\nexports.getMin = getMin;\nexports.getValueFunc = getValueFunc;\nexports.wrapGetValueFunc = wrapGetValueFunc;\nexports.AGGREGATION_OPERATION = void 0;\nvar AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\nexports.AGGREGATION_OPERATION = AGGREGATION_OPERATION;\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nfunction getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\n\nfunction getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\n\nfunction getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\n\nfunction getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\n\nfunction getValueFunc(aggregation, accessor, context) {\n  var op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return function (pts) {\n        return getMin(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.SUM:\n      return function (pts) {\n        return getSum(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.MEAN:\n      return function (pts) {\n        return getMean(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.MAX:\n      return function (pts) {\n        return getMax(pts, accessor);\n      };\n\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n\n  return function (pt) {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nfunction wrapGetValueFunc(getValue) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (pts) {\n    context.indices = pts.map(function (pt) {\n      return pt.index;\n    });\n    return getValue(pts.map(function (pt) {\n      return pt.source;\n    }), context);\n  };\n}\n//# sourceMappingURL=aggregation-operation-utils.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","sumReducer","accu","cur","maxReducer","minReducer","getMean","pts","accessor","Number","isFinite","length","filtered","map","filter","reduce","getSum","getMax","Infinity","getMin","wrapAccessor","context","arguments","undefined","pt","index","source","Object","defineProperty","value","getValueFunc","aggregation","op","AGGREGATION_OPERATION","SUM","MIN","MEAN","MAX","wrapGetValueFunc","getValue","indices"]
}
