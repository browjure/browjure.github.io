{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$loader_utils$parse_with_worker.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/core/dist/es5/lib/loader-utils/parse-with-worker.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$core$dist$es5$lib$loader_utils$parse_with_worker\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canParseWithWorker = canParseWithWorker;\nexports[\"default\"] = parseWithWorker;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _loaderUtils = require(\"@loaders.gl/loader-utils\");\n\nvar _parse = require(\"../api/parse\");\n\nvar VERSION = typeof \"2.3.13\" !== 'undefined' ? \"2.3.13\" : 'latest';\n\nfunction canParseWithWorker(loader, data, options, context) {\n  if (!_loaderUtils._WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\n\nfunction parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: (0, _loaderUtils.toArrayBuffer)(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\n\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if ('reuseWorkers' in options) {\n    props.reuseWorkers = options.reuseWorkers;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new _loaderUtils._WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return (0, _parse.parse)(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, (0, _loaderUtils.getTransferList)(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-with-worker.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getWorkerFarm","options","arguments","length","undefined","props","maxConcurrency","onDebug","reuseWorkers","_workerFarm","_loaderUtils","_WorkerFarm","onMessage","onWorkerMessage","setProps","_x","_onWorkerMessage","apply","_asyncToGenerator2","_regenerator","mark","_callee","_ref2","worker","data","resolve","reject","result","wrap","_callee$","_context","prev","next","t0","type","abrupt","_parse","parse","arraybuffer","url","sent","postMessage","id","getTransferList","t1","message","stop","_interopRequireDefault","Object","defineProperty","value","canParseWithWorker","loader","context","isSupported","loaderOptions","localWorkerUrl","workerUrl","useWorker","parseWithWorker","workerSource","concat","workerName","name","workerFarm","JSON","stringify","warning","version","VERSION","process","toArrayBuffer","source"]
}
