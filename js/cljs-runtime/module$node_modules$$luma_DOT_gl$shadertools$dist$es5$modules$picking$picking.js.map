{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$picking$picking.js",
"lineCount":4,
"mappings":"AAAAA,cAAA,CAAe,6EAAf,CAAkG,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAG1IC,MAAA,CAAOC,cAAP,CAAsBF,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CG,MAAO,CAAA,CADoC,CAA7C,CAGAH,QAAA,CAAQI,OAAR,CAAkB,IAAK,EAEvB,KAAIC,uBAAyB,CAC3BC,qBAAsB,IADK,CAE3BC,sBAH4BC,IAAIC,UAAJD,CAAe,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAAc,GAAd,CAAfA,CACD,CAG3BE,cAAe,CAAA,CAHY,CAI3BC,iBAAkB,CAAA,CAJS,CAiD7BX,QAAA,CAAQI,OAAR,CANcA,CACZQ,KAAM,SADMR,CAEZS,GAJOA,4tCAEKT;AAGZU,GAJOA,4iCACKV;AAIZW,YAxCFA,QAAoB,EAAG,CACrB,IAAIC,KAA0B,CAAnB,CAAAC,SAAA,CAAUC,MAAV,EAAyCC,IAAAA,EAAzC,GAAwBF,SAAA,CAAU,CAAV,CAAxB,CAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoEZ,sBAA/E,CACIe,SAAW,EAEf,IAAkCD,IAAAA,EAAlC,GAAIH,IAAJ,CAASV,oBAAT,CACE,GAAKU,IAAL,CAAUV,oBAAV,CAEO,CACL,IAAIe,cAAgBL,IAAA,CAAKV,oBAAL,CAA0BgB,KAA1B,CAAgC,CAAhC,CAAmC,CAAnC,CACpBF,SAAA,CAASG,2BAAT,CAAuC,CACvCH,SAAA,CAASI,sBAAT,CAAkCH,aAH7B,CAFP,IACED,SAAA,CAASG,2BAAT,CAAuC,CAQvCP,KAAJ,CAAST,qBAAT,GACMkB,aAQJ,CARYC,KAAA,CAAMC,IAAN,CAAWX,IAAX,CAAgBT,qBAAhB,CAAuC,QAAS,CAACqB,CAAD,CAAI,CAC9D,MAAOA,EAAP,CAAW,GADmD,CAApD,CAQZ,CAJKC,MAAA,CAAOC,QAAP,CAAgBL,aAAA,CAAM,CAAN,CAAhB,CAIL;CAHEA,aAAA,CAAM,CAAN,CAGF,CAHa,CAGb,EAAAL,QAAA,CAASW,uBAAT,CAAmCN,aATrC,CAY2BN,KAAAA,EAA3B,GAAIH,IAAJ,CAASN,aAAT,GACEU,QACA,CADSY,eACT,CAD2B,CAAA,CAAQhB,IAAR,CAAaN,aACxC,CAAAU,QAAA,CAASa,kBAAT,CAA8B,CAAA,CAAQjB,IAAR,CAAaL,gBAF7C,CAKA,OAAOS,SA/Bc,CAoCThB,CAnD4H;",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/modules/picking/picking.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$picking$picking\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.picking = void 0;\nvar DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nvar DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      var selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    var color = Array.from(opts.pickingHighlightColor, function (x) {\n      return x / 255;\n    });\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nvar vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nvar fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nvar picking = {\n  name: 'picking',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms\n};\nexports.picking = picking;\n//# sourceMappingURL=picking.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","picking","DEFAULT_MODULE_OPTIONS","pickingSelectedColor","pickingHighlightColor","DEFAULT_HIGHLIGHT_COLOR","Uint8Array","pickingActive","pickingAttribute","name","vs","fs","getUniforms","opts","arguments","length","undefined","uniforms","selectedColor","slice","picking_uSelectedColorValid","picking_uSelectedColor","color","Array","from","x","Number","isFinite","picking_uHighlightColor","picking_uActive","picking_uAttribute"]
}
