shadow$provide.module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$shader=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.FragmentShader=exports.VertexShader=exports.Shader=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=global(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=global(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=global(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf")),_gltools=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$index"),_glslUtils=require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$glsl_utils$index"),
_utils=require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$utils$index");require=function(_Resource){function Shader(gl,props){(0,_classCallCheck2["default"])(this,Shader);(0,_gltools.assertWebGLContext)(gl);(0,_utils.assert)("string"===typeof props.source,"Shader: GLSL source code must be a JavaScript string");var id=(0,_glslUtils.getShaderName)(props.source,null)||props.id||(0,_utils.uid)("unnamed ".concat(Shader.getTypeName(props.shaderType)));gl=_super.call(this,gl,{id});gl.shaderType=props.shaderType;
gl.source=props.source;gl.initialize(props);return gl}(0,_inherits2["default"])(Shader,_Resource);var _super=_createSuper(Shader);(0,_createClass2["default"])(Shader,null,[{key:"getTypeName",value:function(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,_utils.assert)(!1),"unknown"}}}]);(0,_createClass2["default"])(Shader,[{key:"initialize",value:function(_ref){_ref=_ref.source;var shaderName=(0,_glslUtils.getShaderName)(_ref,null);
shaderName&&(this.id=(0,_utils.uid)(shaderName));this._compile(_ref)}},{key:"getParameter",value:function(pname){return this.gl.getShaderParameter(this.handle,pname)}},{key:"toString",value:function(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,_glslUtils.getShaderName)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var extension=
this.gl.getExtension("WEBGL_debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var source=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.source;source.startsWith("#version ")||(source="#version 100\n".concat(source));this.source=source;this.gl.shaderSource(this.handle,this.source);this.gl.compileShader(this.handle);if(!this.getParameter(35713)){source=
this.gl.getShaderInfoLog(this.handle);var _parseGLSLCompilerErr=(0,_glslUtils.parseGLSLCompilerError)(source,this.source,this.shaderType,this.id);source=_parseGLSLCompilerErr.shaderName;var errors=_parseGLSLCompilerErr.errors;_parseGLSLCompilerErr=_parseGLSLCompilerErr.warnings;_gltools.log.error("GLSL compilation errors in ".concat(source,"\n").concat(errors))();_gltools.log.warn("GLSL compilation warnings in ".concat(source,"\n").concat(_parseGLSLCompilerErr))();throw Error("GLSL compilation errors in ".concat(source));
}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]);return Shader}(global(require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$resource"))["default"]);exports.Shader=require;global=function(_Shader){function VertexShader(gl,props){(0,_classCallCheck2["default"])(this,VertexShader);"string"===typeof props&&(props={source:props});return _super2.call(this,
gl,Object.assign({},props,{shaderType:35633}))}(0,_inherits2["default"])(VertexShader,_Shader);var _super2=_createSuper(VertexShader);(0,_createClass2["default"])(VertexShader,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]);return VertexShader}(require);exports.VertexShader=global;require=function(_Shader2){function FragmentShader(gl,props){(0,_classCallCheck2["default"])(this,FragmentShader);"string"===typeof props&&(props={source:props});return _super3.call(this,gl,
Object.assign({},props,{shaderType:35632}))}(0,_inherits2["default"])(FragmentShader,_Shader2);var _super3=_createSuper(FragmentShader);(0,_createClass2["default"])(FragmentShader,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]);return FragmentShader}(require);exports.FragmentShader=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$shader.js.map
