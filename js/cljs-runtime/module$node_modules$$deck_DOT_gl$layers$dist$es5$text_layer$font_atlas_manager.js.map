{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$layers$dist$es5$text_layer$font_atlas_manager.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/layers/dist/es5/text-layer/font-atlas-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$layers$dist$es5$text_layer$font_atlas_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.DEFAULT_RADIUS = exports.DEFAULT_CUTOFF = exports.DEFAULT_BUFFER = exports.DEFAULT_FONT_SIZE = exports.DEFAULT_FONT_WEIGHT = exports.DEFAULT_FONT_FAMILY = exports.DEFAULT_CHAR_SET = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _tinySdf = _interopRequireDefault(require(\"@mapbox/tiny-sdf\"));\n\nvar _utils = require(\"./utils\");\n\nvar _lruCache = _interopRequireDefault(require(\"./lru-cache\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction getDefaultCharacterSet() {\n  var charSet = [];\n\n  for (var i = 32; i < 128; i++) {\n    charSet.push(String.fromCharCode(i));\n  }\n\n  return charSet;\n}\n\nvar DEFAULT_CHAR_SET = getDefaultCharacterSet();\nexports.DEFAULT_CHAR_SET = DEFAULT_CHAR_SET;\nvar DEFAULT_FONT_FAMILY = 'Monaco, monospace';\nexports.DEFAULT_FONT_FAMILY = DEFAULT_FONT_FAMILY;\nvar DEFAULT_FONT_WEIGHT = 'normal';\nexports.DEFAULT_FONT_WEIGHT = DEFAULT_FONT_WEIGHT;\nvar DEFAULT_FONT_SIZE = 64;\nexports.DEFAULT_FONT_SIZE = DEFAULT_FONT_SIZE;\nvar DEFAULT_BUFFER = 2;\nexports.DEFAULT_BUFFER = DEFAULT_BUFFER;\nvar DEFAULT_CUTOFF = 0.25;\nexports.DEFAULT_CUTOFF = DEFAULT_CUTOFF;\nvar DEFAULT_RADIUS = 3;\nexports.DEFAULT_RADIUS = DEFAULT_RADIUS;\nvar MAX_CANVAS_WIDTH = 1024;\nvar BASELINE_SCALE = 0.9;\nvar HEIGHT_SCALE = 1.2;\nvar CACHE_LIMIT = 3;\nvar cache = new _lruCache[\"default\"](CACHE_LIMIT);\nvar VALID_PROPS = ['fontFamily', 'fontWeight', 'characterSet', 'fontSize', 'sdf', 'buffer', 'cutoff', 'radius'];\n\nfunction getNewChars(key, characterSet) {\n  var cachedFontAtlas = cache.get(key);\n\n  if (!cachedFontAtlas) {\n    return characterSet;\n  }\n\n  var newChars = [];\n  var cachedMapping = cachedFontAtlas.mapping;\n  var cachedCharSet = Object.keys(cachedMapping);\n  cachedCharSet = new Set(cachedCharSet);\n  var charSet = characterSet;\n\n  if (charSet instanceof Array) {\n    charSet = new Set(charSet);\n  }\n\n  charSet.forEach(function (_char) {\n    if (!cachedCharSet.has(_char)) {\n      newChars.push(_char);\n    }\n  });\n  return newChars;\n}\n\nfunction populateAlphaChannel(alphaChannel, imageData) {\n  for (var i = 0; i < alphaChannel.length; i++) {\n    imageData.data[4 * i + 3] = alphaChannel[i];\n  }\n}\n\nfunction setTextStyle(ctx, fontFamily, fontSize, fontWeight) {\n  ctx.font = \"\".concat(fontWeight, \" \").concat(fontSize, \"px \").concat(fontFamily);\n  ctx.fillStyle = '#000';\n  ctx.textBaseline = 'baseline';\n  ctx.textAlign = 'left';\n}\n\nvar FontAtlasManager = function () {\n  function FontAtlasManager() {\n    (0, _classCallCheck2[\"default\"])(this, FontAtlasManager);\n    this.props = {\n      fontFamily: DEFAULT_FONT_FAMILY,\n      fontWeight: DEFAULT_FONT_WEIGHT,\n      characterSet: DEFAULT_CHAR_SET,\n      fontSize: DEFAULT_FONT_SIZE,\n      buffer: DEFAULT_BUFFER,\n      sdf: false,\n      cutoff: DEFAULT_CUTOFF,\n      radius: DEFAULT_RADIUS\n    };\n    this._key = null;\n    this._atlas = null;\n  }\n\n  (0, _createClass2[\"default\"])(FontAtlasManager, [{\n    key: \"setProps\",\n    value: function setProps() {\n      var _this = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      VALID_PROPS.forEach(function (prop) {\n        if (prop in props) {\n          _this.props[prop] = props[prop];\n        }\n      });\n      var oldKey = this._key;\n      this._key = this._getKey();\n      var charSet = getNewChars(this._key, this.props.characterSet);\n      var cachedFontAtlas = cache.get(this._key);\n\n      if (cachedFontAtlas && charSet.length === 0) {\n        if (this._key !== oldKey) {\n          this._atlas = cachedFontAtlas;\n        }\n\n        return;\n      }\n\n      var fontAtlas = this._generateFontAtlas(this._key, charSet, cachedFontAtlas);\n\n      this._atlas = fontAtlas;\n      cache.set(this._key, fontAtlas);\n    }\n  }, {\n    key: \"_generateFontAtlas\",\n    value: function _generateFontAtlas(key, characterSet, cachedFontAtlas) {\n      var _this$props = this.props,\n          fontFamily = _this$props.fontFamily,\n          fontWeight = _this$props.fontWeight,\n          fontSize = _this$props.fontSize,\n          buffer = _this$props.buffer,\n          sdf = _this$props.sdf,\n          radius = _this$props.radius,\n          cutoff = _this$props.cutoff;\n      var canvas = cachedFontAtlas && cachedFontAtlas.data;\n\n      if (!canvas) {\n        canvas = document.createElement('canvas');\n        canvas.width = MAX_CANVAS_WIDTH;\n      }\n\n      var ctx = canvas.getContext('2d');\n      setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n\n      var _buildMapping = (0, _utils.buildMapping)(Object.assign({\n        getFontWidth: function getFontWidth(_char2) {\n          return ctx.measureText(_char2).width;\n        },\n        fontHeight: fontSize * HEIGHT_SCALE,\n        buffer: buffer,\n        characterSet: characterSet,\n        maxCanvasWidth: MAX_CANVAS_WIDTH\n      }, cachedFontAtlas && {\n        mapping: cachedFontAtlas.mapping,\n        xOffset: cachedFontAtlas.xOffset,\n        yOffset: cachedFontAtlas.yOffset\n      })),\n          mapping = _buildMapping.mapping,\n          canvasHeight = _buildMapping.canvasHeight,\n          xOffset = _buildMapping.xOffset,\n          yOffset = _buildMapping.yOffset;\n\n      if (canvas.height !== canvasHeight) {\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        canvas.height = canvasHeight;\n        ctx.putImageData(imageData, 0, 0);\n      }\n\n      setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n\n      if (sdf) {\n        var tinySDF = new _tinySdf[\"default\"](fontSize, buffer, radius, cutoff, fontFamily, fontWeight);\n\n        var _imageData = ctx.getImageData(0, 0, tinySDF.size, tinySDF.size);\n\n        var _iterator = _createForOfIteratorHelper(characterSet),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _char3 = _step.value;\n            populateAlphaChannel(tinySDF.draw(_char3), _imageData);\n            ctx.putImageData(_imageData, mapping[_char3].x - buffer, mapping[_char3].y - buffer);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        var _iterator2 = _createForOfIteratorHelper(characterSet),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _char4 = _step2.value;\n            ctx.fillText(_char4, mapping[_char4].x, mapping[_char4].y + fontSize * BASELINE_SCALE);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      return {\n        xOffset: xOffset,\n        yOffset: yOffset,\n        mapping: mapping,\n        data: canvas,\n        width: canvas.width,\n        height: canvas.height\n      };\n    }\n  }, {\n    key: \"_getKey\",\n    value: function _getKey() {\n      var _this$props2 = this.props,\n          fontFamily = _this$props2.fontFamily,\n          fontWeight = _this$props2.fontWeight,\n          fontSize = _this$props2.fontSize,\n          buffer = _this$props2.buffer,\n          sdf = _this$props2.sdf,\n          radius = _this$props2.radius,\n          cutoff = _this$props2.cutoff;\n\n      if (sdf) {\n        return \"\".concat(fontFamily, \" \").concat(fontWeight, \" \").concat(fontSize, \" \").concat(buffer, \" \").concat(radius, \" \").concat(cutoff);\n      }\n\n      return \"\".concat(fontFamily, \" \").concat(fontWeight, \" \").concat(fontSize, \" \").concat(buffer);\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this._atlas;\n    }\n  }, {\n    key: \"mapping\",\n    get: function get() {\n      return this._atlas && this._atlas.mapping;\n    }\n  }, {\n    key: \"scale\",\n    get: function get() {\n      return HEIGHT_SCALE;\n    }\n  }]);\n  return FontAtlasManager;\n}();\n\nexports[\"default\"] = FontAtlasManager;\n//# sourceMappingURL=font-atlas-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","getNewChars","key","characterSet","cachedFontAtlas","cache","get","newChars","cachedCharSet","keys","mapping","Set","charSet","forEach","_char","has","push","populateAlphaChannel","alphaChannel","imageData","data","setTextStyle","ctx","fontFamily","fontSize","fontWeight","font","concat","fillStyle","textBaseline","textAlign","_interopRequireDefault","defineProperty","DEFAULT_RADIUS","DEFAULT_CUTOFF","DEFAULT_BUFFER","DEFAULT_FONT_SIZE","DEFAULT_FONT_WEIGHT","DEFAULT_FONT_FAMILY","DEFAULT_CHAR_SET","_classCallCheck2","_createClass2","_tinySdf","_utils","_lruCache","getDefaultCharacterSet","String","fromCharCode","CACHE_LIMIT","VALID_PROPS","FontAtlasManager","props","buffer","sdf","cutoff","radius","_atlas","_key","setProps","_this","arguments","undefined","prop","oldKey","_getKey","fontAtlas","_generateFontAtlas","set","_this$props","canvas","document","createElement","width","MAX_CANVAS_WIDTH","getContext","_buildMapping","buildMapping","assign","getFontWidth","_char2","measureText","fontHeight","HEIGHT_SCALE","maxCanvasWidth","xOffset","yOffset","canvasHeight","height","getImageData","putImageData","tinySDF","_imageData","size","_iterator","_step","_char3","draw","x","y","_iterator2","_step2","_char4","fillText","BASELINE_SCALE","_this$props2"]
}
