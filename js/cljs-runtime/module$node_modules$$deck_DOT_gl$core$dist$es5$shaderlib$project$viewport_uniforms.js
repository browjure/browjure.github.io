shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$viewport_uniforms=function(global,require,module,exports){function getOffsetOrigin(viewport,coordinateSystem){var coordinateOrigin=2<arguments.length&&void 0!==arguments[2]?arguments[2]:DEFAULT_COORDINATE_ORIGIN,shaderCoordinateOrigin=coordinateOrigin,offsetMode=!0;var geospatialOrigin=coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS||coordinateSystem===_constants.COORDINATE_SYSTEM.METER_OFFSETS?coordinateOrigin:
viewport.isGeospatial?[Math.fround(viewport.longitude),Math.fround(viewport.latitude),0]:null;switch(viewport.projectionMode){case _constants.PROJECTION_MODE.WEB_MERCATOR:if(coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT||coordinateSystem===_constants.COORDINATE_SYSTEM.CARTESIAN)offsetMode=!1;break;case _constants.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:coordinateSystem===_constants.COORDINATE_SYSTEM.LNGLAT?shaderCoordinateOrigin=geospatialOrigin:coordinateSystem===_constants.COORDINATE_SYSTEM.CARTESIAN&&
(shaderCoordinateOrigin=[Math.fround(viewport.center[0]),Math.fround(viewport.center[1]),0],geospatialOrigin=viewport.unprojectPosition(shaderCoordinateOrigin),shaderCoordinateOrigin[0]-=coordinateOrigin[0],shaderCoordinateOrigin[1]-=coordinateOrigin[1],shaderCoordinateOrigin[2]-=coordinateOrigin[2]);break;case _constants.PROJECTION_MODE.IDENTITY:shaderCoordinateOrigin=viewport.position.map(Math.fround);break;case _constants.PROJECTION_MODE.GLOBE:offsetMode=!1;geospatialOrigin=null;break;default:offsetMode=
!1}shaderCoordinateOrigin[2]=shaderCoordinateOrigin[2]||0;return{geospatialOrigin,shaderCoordinateOrigin,offsetMode}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:!0});exports.getOffsetOrigin=getOffsetOrigin;exports.getUniformsFromViewport=function(){var _ref=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},viewport=_ref.viewport,
_ref$devicePixelRatio=_ref.devicePixelRatio;_ref$devicePixelRatio=void 0===_ref$devicePixelRatio?1:_ref$devicePixelRatio;var _ref$modelMatrix=_ref.modelMatrix;_ref$modelMatrix=void 0===_ref$modelMatrix?null:_ref$modelMatrix;var _ref$coordinateSystem=_ref.coordinateSystem;_ref$coordinateSystem=void 0===_ref$coordinateSystem?_constants.COORDINATE_SYSTEM.DEFAULT:_ref$coordinateSystem;var coordinateOrigin=_ref.coordinateOrigin;_ref=_ref.autoWrapLongitude;_ref=void 0===_ref?!1:_ref;(0,_assert["default"])(viewport);
_ref$coordinateSystem===_constants.COORDINATE_SYSTEM.DEFAULT&&(_ref$coordinateSystem=viewport.isGeospatial?_constants.COORDINATE_SYSTEM.LNGLAT:_constants.COORDINATE_SYSTEM.CARTESIAN);viewport=getMemoizedViewportUniforms({viewport,devicePixelRatio:_ref$devicePixelRatio,coordinateSystem:_ref$coordinateSystem,coordinateOrigin});viewport.project_uWrapLongitude=_ref;viewport.project_uModelMatrix=_ref$modelMatrix||IDENTITY_MATRIX;return viewport};var mat4=module(require("module$node_modules$gl_matrix$cjs$mat4")),
vec4=module(require("module$node_modules$gl_matrix$cjs$vec4")),_constants=require("module$node_modules$$deck_DOT_gl$core$dist$es5$lib$constants");exports=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$memoize"));var _assert=global(require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$assert")),ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=
[0,0,0],getMemoizedViewportUniforms=(0,exports["default"])(function(_ref2){var viewport=_ref2.viewport,devicePixelRatio=_ref2.devicePixelRatio,coordinateSystem=_ref2.coordinateSystem;var JSCompiler_object_inline_viewProjectionMatrix_2636=viewport.viewMatrixUncentered;var JSCompiler_object_inline_projectionCenter_2637=viewport.projectionMatrix;var viewMatrix=viewport.viewMatrix,viewProjectionMatrix=viewport.viewProjectionMatrix,projectionCenter=ZERO_VECTOR;var JSCompiler_object_inline_cameraPosCommon_2638=
viewport.cameraPosition;var _getOffsetOrigin=getOffsetOrigin(viewport,coordinateSystem,_ref2.coordinateOrigin);_ref2=_getOffsetOrigin.geospatialOrigin;var shaderCoordinateOrigin=_getOffsetOrigin.shaderCoordinateOrigin;_getOffsetOrigin.offsetMode&&(projectionCenter=viewport.projectPosition(_ref2||shaderCoordinateOrigin),JSCompiler_object_inline_cameraPosCommon_2638=[JSCompiler_object_inline_cameraPosCommon_2638[0]-projectionCenter[0],JSCompiler_object_inline_cameraPosCommon_2638[1]-projectionCenter[1],
JSCompiler_object_inline_cameraPosCommon_2638[2]-projectionCenter[2]],projectionCenter[3]=1,projectionCenter=vec4.transformMat4([],projectionCenter,viewProjectionMatrix),viewProjectionMatrix=mat4.multiply([],JSCompiler_object_inline_projectionCenter_2637,JSCompiler_object_inline_viewProjectionMatrix_2636||viewMatrix),viewProjectionMatrix=mat4.multiply([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX));JSCompiler_object_inline_viewProjectionMatrix_2636=viewProjectionMatrix;JSCompiler_object_inline_projectionCenter_2637=
projectionCenter;viewMatrix=viewport.getDistanceScales();devicePixelRatio={project_uCoordinateSystem:coordinateSystem,project_uProjectionMode:viewport.projectionMode,project_uCoordinateOrigin:shaderCoordinateOrigin,project_uCenter:JSCompiler_object_inline_projectionCenter_2637,project_uViewportSize:[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:viewport.focalDistance||1,project_uCommonUnitsPerMeter:viewMatrix.unitsPerMeter,
project_uCommonUnitsPerWorldUnit:viewMatrix.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uViewProjectionMatrix:JSCompiler_object_inline_viewProjectionMatrix_2636,project_uCameraPosition:JSCompiler_object_inline_cameraPosCommon_2638};if(_ref2)switch(viewport=viewport.getDistanceScales(_ref2),coordinateSystem){case _constants.COORDINATE_SYSTEM.METER_OFFSETS:devicePixelRatio.project_uCommonUnitsPerWorldUnit=viewport.unitsPerMeter;devicePixelRatio.project_uCommonUnitsPerWorldUnit2=
viewport.unitsPerMeter2;break;case _constants.COORDINATE_SYSTEM.LNGLAT:case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:devicePixelRatio.project_uCommonUnitsPerWorldUnit=viewport.unitsPerDegree;devicePixelRatio.project_uCommonUnitsPerWorldUnit2=viewport.unitsPerDegree2;break;case _constants.COORDINATE_SYSTEM.CARTESIAN:devicePixelRatio.project_uCommonUnitsPerWorldUnit=[1,1,viewport.unitsPerMeter[2]],devicePixelRatio.project_uCommonUnitsPerWorldUnit2=[0,0,viewport.unitsPerMeter2[2]]}return devicePixelRatio})}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$viewport_uniforms.js.map
