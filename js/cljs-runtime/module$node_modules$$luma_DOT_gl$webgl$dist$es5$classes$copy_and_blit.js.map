{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$copy_and_blit.js",
"lineCount":22,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/webgl/dist/es5/classes/copy-and-blit.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$webgl$dist$es5$classes$copy_and_blit\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.readPixelsToArray = readPixelsToArray;\nexports.readPixelsToBuffer = readPixelsToBuffer;\nexports.copyToDataUrl = copyToDataUrl;\nexports.copyToImage = copyToImage;\nexports.copyToTexture = copyToTexture;\nexports.blit = blit;\n\nvar _buffer = _interopRequireDefault(require(\"./buffer\"));\n\nvar _framebuffer = _interopRequireDefault(require(\"./framebuffer\"));\n\nvar _texture = _interopRequireDefault(require(\"./texture\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _webglUtils = require(\"../webgl-utils\");\n\nvar _typedArrayUtils = require(\"../webgl-utils/typed-array-utils\");\n\nvar _formatUtils = require(\"../webgl-utils/format-utils\");\n\nvar _textureUtils = require(\"../webgl-utils/texture-utils\");\n\nvar _utils = require(\"../utils\");\n\nfunction readPixelsToArray(source) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$sourceX = options.sourceX,\n      sourceX = _options$sourceX === void 0 ? 0 : _options$sourceX,\n      _options$sourceY = options.sourceY,\n      sourceY = _options$sourceY === void 0 ? 0 : _options$sourceY,\n      _options$sourceFormat = options.sourceFormat,\n      sourceFormat = _options$sourceFormat === void 0 ? 6408 : _options$sourceFormat;\n  var _options$sourceAttach = options.sourceAttachment,\n      sourceAttachment = _options$sourceAttach === void 0 ? 36064 : _options$sourceAttach,\n      _options$target = options.target,\n      target = _options$target === void 0 ? null : _options$target,\n      sourceWidth = options.sourceWidth,\n      sourceHeight = options.sourceHeight,\n      sourceType = options.sourceType;\n\n  var _getFramebuffer = getFramebuffer(source),\n      framebuffer = _getFramebuffer.framebuffer,\n      deleteFramebuffer = _getFramebuffer.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle,\n      attachments = framebuffer.attachments;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  (0, _utils.assert)(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || (0, _typedArrayUtils.getGLTypeFromTypedArray)(target);\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\n\nfunction readPixelsToBuffer(source, _ref) {\n  var _ref$sourceX = _ref.sourceX,\n      sourceX = _ref$sourceX === void 0 ? 0 : _ref$sourceX,\n      _ref$sourceY = _ref.sourceY,\n      sourceY = _ref$sourceY === void 0 ? 0 : _ref$sourceY,\n      _ref$sourceFormat = _ref.sourceFormat,\n      sourceFormat = _ref$sourceFormat === void 0 ? 6408 : _ref$sourceFormat,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? null : _ref$target,\n      _ref$targetByteOffset = _ref.targetByteOffset,\n      targetByteOffset = _ref$targetByteOffset === void 0 ? 0 : _ref$targetByteOffset,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      sourceType = _ref.sourceType;\n\n  var _getFramebuffer2 = getFramebuffer(source),\n      framebuffer = _getFramebuffer2.framebuffer,\n      deleteFramebuffer = _getFramebuffer2.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  var gl2 = (0, _gltools.assertWebGL2Context)(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    var components = (0, _formatUtils.glFormatToComponents)(sourceFormat);\n    var byteCount = (0, _formatUtils.glTypeToBytes)(sourceType);\n    var byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new _buffer[\"default\"](gl2, {\n      byteLength: byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  (0, _gltools.withParameters)(gl2, {\n    framebuffer: framebuffer\n  }, function () {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\n\nfunction copyToDataUrl(source) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$sourceAttachmen = _ref2.sourceAttachment,\n      sourceAttachment = _ref2$sourceAttachmen === void 0 ? 36064 : _ref2$sourceAttachmen,\n      _ref2$targetMaxHeight = _ref2.targetMaxHeight,\n      targetMaxHeight = _ref2$targetMaxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref2$targetMaxHeight;\n\n  var data = readPixelsToArray(source, {\n    sourceAttachment: sourceAttachment\n  });\n  var width = source.width,\n      height = source.height;\n\n  while (height > targetMaxHeight) {\n    var _scalePixels = (0, _webglUtils.scalePixels)({\n      data: data,\n      width: width,\n      height: height\n    });\n\n    data = _scalePixels.data;\n    width = _scalePixels.width;\n    height = _scalePixels.height;\n  }\n\n  (0, _webglUtils.flipRows)({\n    data: data,\n    width: width,\n    height: height\n  });\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var context = canvas.getContext('2d');\n  var imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\n\nfunction copyToImage(source) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$sourceAttachmen = _ref3.sourceAttachment,\n      sourceAttachment = _ref3$sourceAttachmen === void 0 ? 36064 : _ref3$sourceAttachmen,\n      _ref3$targetImage = _ref3.targetImage,\n      targetImage = _ref3$targetImage === void 0 ? null : _ref3$targetImage;\n\n  var dataUrl = copyToDataUrl(source, {\n    sourceAttachment: sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\n\nfunction copyToTexture(source, target) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$sourceX2 = options.sourceX,\n      sourceX = _options$sourceX2 === void 0 ? 0 : _options$sourceX2,\n      _options$sourceY2 = options.sourceY,\n      sourceY = _options$sourceY2 === void 0 ? 0 : _options$sourceY2,\n      _options$targetMipmap = options.targetMipmaplevel,\n      targetMipmaplevel = _options$targetMipmap === void 0 ? 0 : _options$targetMipmap,\n      _options$targetIntern = options.targetInternalFormat,\n      targetInternalFormat = _options$targetIntern === void 0 ? 6408 : _options$targetIntern;\n  var targetX = options.targetX,\n      targetY = options.targetY,\n      targetZ = options.targetZ,\n      width = options.width,\n      height = options.height;\n\n  var _getFramebuffer3 = getFramebuffer(source),\n      framebuffer = _getFramebuffer3.framebuffer,\n      deleteFramebuffer = _getFramebuffer3.deleteFramebuffer;\n\n  (0, _utils.assert)(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle;\n  var isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  (0, _utils.assert)(target);\n  var texture = null;\n\n  if (target instanceof _texture[\"default\"]) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        var gl2 = (0, _gltools.assertWebGL2Context)(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return texture;\n}\n\nfunction blit(source, target) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$sourceX3 = options.sourceX0,\n      sourceX0 = _options$sourceX3 === void 0 ? 0 : _options$sourceX3,\n      _options$sourceY3 = options.sourceY0,\n      sourceY0 = _options$sourceY3 === void 0 ? 0 : _options$sourceY3,\n      _options$targetX = options.targetX0,\n      targetX0 = _options$targetX === void 0 ? 0 : _options$targetX,\n      _options$targetY = options.targetY0,\n      targetY0 = _options$targetY === void 0 ? 0 : _options$targetY,\n      _options$color = options.color,\n      color = _options$color === void 0 ? true : _options$color,\n      _options$depth = options.depth,\n      depth = _options$depth === void 0 ? false : _options$depth,\n      _options$stencil = options.stencil,\n      stencil = _options$stencil === void 0 ? false : _options$stencil,\n      _options$filter = options.filter,\n      filter = _options$filter === void 0 ? 9728 : _options$filter;\n  var sourceX1 = options.sourceX1,\n      sourceY1 = options.sourceY1,\n      targetX1 = options.targetX1,\n      targetY1 = options.targetY1,\n      _options$sourceAttach2 = options.sourceAttachment,\n      sourceAttachment = _options$sourceAttach2 === void 0 ? 36064 : _options$sourceAttach2,\n      _options$mask = options.mask,\n      mask = _options$mask === void 0 ? 0 : _options$mask;\n\n  var _getFramebuffer4 = getFramebuffer(source),\n      srcFramebuffer = _getFramebuffer4.framebuffer,\n      deleteSrcFramebuffer = _getFramebuffer4.deleteFramebuffer;\n\n  var _getFramebuffer5 = getFramebuffer(target),\n      dstFramebuffer = _getFramebuffer5.framebuffer,\n      deleteDstFramebuffer = _getFramebuffer5.deleteFramebuffer;\n\n  (0, _utils.assert)(srcFramebuffer);\n  (0, _utils.assert)(dstFramebuffer);\n  var gl = dstFramebuffer.gl,\n      handle = dstFramebuffer.handle,\n      width = dstFramebuffer.width,\n      height = dstFramebuffer.height,\n      readBuffer = dstFramebuffer.readBuffer;\n  var gl2 = (0, _gltools.assertWebGL2Context)(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n\n      _gltools.log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  (0, _utils.assert)(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  var prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer[\"delete\"]();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer[\"delete\"]();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof _framebuffer[\"default\"])) {\n    return {\n      framebuffer: (0, _textureUtils.toFramebuffer)(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  var ArrayType = (0, _typedArrayUtils.getTypedArrayFromGLType)(type, {\n    clamped: false\n  });\n  var components = (0, _formatUtils.glFormatToComponents)(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","readPixelsToArray","source","options","arguments","length","undefined","_options$sourceX","sourceX","_options$sourceY","sourceY","_options$sourceFormat","sourceFormat","_options$sourceAttach","sourceAttachment","_options$target","target","sourceWidth","sourceHeight","sourceType","_getFramebuffer","getFramebuffer","framebuffer","deleteFramebuffer","_utils","assert","gl","handle","attachments","width","height","type","ArrayType","_typedArrayUtils","getTypedArrayFromGLType","clamped","components","_formatUtils","glFormatToComponents","getGLTypeFromTypedArray","prevHandle","bindFramebuffer","readPixels","copyToDataUrl","_ref2","_ref2$sourceAttachmen","_ref2$targetMaxHeight","targetMaxHeight","Number","MAX_SAFE_INTEGER","data","_scalePixels","_webglUtils","scalePixels","flipRows","canvas","document","createElement","context","getContext","imageData","createImageData","set","putImageData","toDataURL","_framebuffer","_textureUtils","toFramebuffer","_interopRequireDefault","Object","defineProperty","value","readPixelsToBuffer","_ref","_ref$sourceX","_ref$sourceY","_ref$sourceFormat","_ref$target","_ref$targetByteOffset","targetByteOffset","_getFramebuffer2","gl2","_gltools","assertWebGL2Context","byteCount","glTypeToBytes","_buffer","byteLength","accessor","size","bind","withParameters","unbind","copyToImage","_ref3","_ref3$sourceAttachmen","_ref3$targetImage","targetImage","dataUrl","Image","src","copyToTexture","_options$sourceX2","_options$sourceY2","_options$targetMipmap","targetMipmaplevel","_options$targetIntern","targetInternalFormat","targetX","targetY","targetZ","_getFramebuffer3","isSubCopy","texture","_texture","isFinite","copyTexSubImage2D","copyTexSubImage3D","copyTexImage2D","blit","_options$sourceX3","sourceX0","_options$sourceY3","sourceY0","_options$targetX","targetX0","_options$targetY","targetY0","_options$color","color","_options$depth","depth","_options$stencil","stencil","_options$filter","filter","sourceX1","sourceY1","targetX1","targetY1","_options$sourceAttach2","_options$mask","mask","_getFramebuffer4","srcFramebuffer","deleteSrcFramebuffer","_getFramebuffer5","dstFramebuffer","deleteDstFramebuffer","readBuffer","log","warn","prevDrawHandle","prevReadHandle","blitFramebuffer"]
}
