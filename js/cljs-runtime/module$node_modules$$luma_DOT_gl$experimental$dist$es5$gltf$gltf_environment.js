shadow$provide.module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_environment=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=
global(require("module$node_modules$$babel$runtime$helpers$createClass")),_webgl=require("module$node_modules$$luma_DOT_gl$webgl$dist$es5$index"),_images=require("module$node_modules$$loaders_DOT_gl$images$dist$es5$index");require=function(){function GLTFEnvironment(gl,_ref){var brdfLutUrl=_ref.brdfLutUrl,getTexUrl=_ref.getTexUrl;_ref=_ref.specularMipLevels;_ref=void 0===_ref?10:_ref;(0,_classCallCheck2["default"])(this,GLTFEnvironment);this.gl=gl;this.brdfLutUrl=brdfLutUrl;this.getTexUrl=getTexUrl;
this.specularMipLevels=_ref}(0,_createClass2["default"])(GLTFEnvironment,[{key:"makeCube",value:function(_ref2){var id=_ref2.id,getTextureForFace=_ref2.getTextureForFace;_ref2=_ref2.parameters;var pixels={};_webgl.TextureCube.FACES.forEach(function(face){pixels[face]=getTextureForFace(face)});return new _webgl.TextureCube(this.gl,{id,mipmaps:!1,parameters:_ref2,pixels})}},{key:"getDiffuseEnvSampler",value:function(){var _this=this;if(!this._DiffuseEnvSampler){var _parameters;this._DiffuseEnvSampler=
this.makeCube({id:"DiffuseEnvSampler",getTextureForFace:function(dir){return(0,_images.loadImage)(_this.getTexUrl("diffuse",dir,0))},parameters:(_parameters={},(0,_defineProperty2["default"])(_parameters,10242,33071),(0,_defineProperty2["default"])(_parameters,10243,33071),(0,_defineProperty2["default"])(_parameters,10241,9729),(0,_defineProperty2["default"])(_parameters,10240,9729),_parameters)})}return this._DiffuseEnvSampler}},{key:"getSpecularEnvSampler",value:function(){var _this2=this;if(!this._SpecularEnvSampler){var _parameters2;
this._SpecularEnvSampler=this.makeCube({id:"SpecularEnvSampler",getTextureForFace:function(dir){for(var imageArray=[],lod=0;lod<=_this2.specularMipLevels-1;lod++)imageArray.push((0,_images.loadImage)(_this2.getTexUrl("specular",dir,lod)));return imageArray},parameters:(_parameters2={},(0,_defineProperty2["default"])(_parameters2,10242,33071),(0,_defineProperty2["default"])(_parameters2,10243,33071),(0,_defineProperty2["default"])(_parameters2,10241,9987),(0,_defineProperty2["default"])(_parameters2,
10240,9729),_parameters2)})}return this._SpecularEnvSampler}},{key:"getBrdfTexture",value:function(){if(!this._BrdfTexture){var _parameters3;this._BrdfTexture=new _webgl.Texture2D(this.gl,{id:"brdfLUT",parameters:(_parameters3={},(0,_defineProperty2["default"])(_parameters3,10242,33071),(0,_defineProperty2["default"])(_parameters3,10243,33071),(0,_defineProperty2["default"])(_parameters3,10241,9729),(0,_defineProperty2["default"])(_parameters3,10240,9729),_parameters3),data:(0,_images.loadImage)(this.brdfLutUrl)})}return this._BrdfTexture}},
{key:"delete",value:function(){this._DiffuseEnvSampler&&(this._DiffuseEnvSampler["delete"](),this._DiffuseEnvSampler=null);this._SpecularEnvSampler&&(this._SpecularEnvSampler["delete"](),this._SpecularEnvSampler=null);this._BrdfTexture&&(this._BrdfTexture["delete"](),this._BrdfTexture=null)}}]);return GLTFEnvironment}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_environment.js.map
