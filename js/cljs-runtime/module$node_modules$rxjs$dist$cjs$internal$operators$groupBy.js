shadow$provide.module$node_modules$rxjs$dist$cjs$internal$operators$groupBy=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}if("function"!==
typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.groupBy=void 0;var Observable_1=require("module$node_modules$rxjs$dist$cjs$internal$Observable"),Subject_1=require("module$node_modules$rxjs$dist$cjs$internal$Subject"),lift_1=require("module$node_modules$rxjs$dist$cjs$internal$util$lift"),
OperatorSubscriber_1=require("module$node_modules$rxjs$dist$cjs$internal$operators$OperatorSubscriber");exports.groupBy=function(keySelector,elementSelector,durationSelector,subjectSelector){return lift_1.operate(function(source,subscriber){function createGroupedObservable(key,groupSubject){var result=new Observable_1.Observable(function(groupSubscriber){groupBySourceSubscriber.activeGroups++;var innerSub=groupSubject.subscribe(groupSubscriber);return function(){innerSub.unsubscribe();0===--groupBySourceSubscriber.activeGroups&&
groupBySourceSubscriber.teardownAttempted&&groupBySourceSubscriber.unsubscribe()}});result.key=key;return result}var groups=new Map,notify=function(cb){groups.forEach(cb);cb(subscriber)},handleError=function(err){return notify(function(consumer){return consumer.error(err)})},groupBySourceSubscriber=new GroupBySubscriber(subscriber,function(value){try{var key_1=keySelector(value),group_1=groups.get(key_1);if(!group_1){groups.set(key_1,group_1=subjectSelector?subjectSelector():new Subject_1.Subject);
var grouped=createGroupedObservable(key_1,group_1);subscriber.next(grouped);if(durationSelector){var durationSubscriber_1=new OperatorSubscriber_1.OperatorSubscriber(group_1,function(){group_1.complete();null===durationSubscriber_1||void 0===durationSubscriber_1?void 0:durationSubscriber_1.unsubscribe()},void 0,void 0,function(){return groups.delete(key_1)});groupBySourceSubscriber.add(durationSelector(grouped).subscribe(durationSubscriber_1))}}group_1.next(elementSelector?elementSelector(value):
value)}catch(err){handleError(err)}},handleError,function(){return notify(function(consumer){return consumer.complete()})},function(){return groups.clear()});source.subscribe(groupBySourceSubscriber)})};var GroupBySubscriber=function(_super){function GroupBySubscriber(){var _this=null!==_super&&_super.apply(this,arguments)||this;_this.activeGroups=0;_this.teardownAttempted=!1;return _this}__extends(GroupBySubscriber,_super);GroupBySubscriber.prototype.unsubscribe=function(){this.teardownAttempted=
!0;0===this.activeGroups&&_super.prototype.unsubscribe.call(this)};return GroupBySubscriber}(OperatorSubscriber_1.OperatorSubscriber)}
//# sourceMappingURL=module$node_modules$rxjs$dist$cjs$internal$operators$groupBy.js.map
