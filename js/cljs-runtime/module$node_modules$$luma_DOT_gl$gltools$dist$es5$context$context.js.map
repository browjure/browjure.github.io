{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$gltools$dist$es5$context$context.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/gltools/dist/es5/context/context.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$gltools$dist$es5$context$context\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGLContext = createGLContext;\nexports.instrumentGLContext = instrumentGLContext;\nexports.getContextDebugInfo = getContextDebugInfo;\nexports.resizeGLContext = resizeGLContext;\n\nvar _env = require(\"probe.gl/env\");\n\nvar _trackContextState = require(\"../state-tracker/track-context-state\");\n\nvar _log2 = require(\"../utils/log\");\n\nvar _assert = require(\"../utils/assert\");\n\nvar _devicePixels = require(\"../utils/device-pixels\");\n\nvar _webglChecks = require(\"../utils/webgl-checks\");\n\nvar isBrowser = (0, _env.isBrowser)();\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\n\nfunction createGLContext() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  (0, _assert.assert)(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options = options,\n      width = _options.width,\n      height = _options.height;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  var gl;\n  var _options2 = options,\n      canvas = _options2.canvas;\n  var targetCanvas = getCanvas({\n    canvas: canvas,\n    width: width,\n    height: height,\n    onError: onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\n\nfunction instrumentGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options3 = options,\n      manageState = _options3.manageState,\n      debug = _options3.debug;\n\n  if (manageState) {\n    (0, _trackContextState.trackContextState)(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _log2.log.log.apply(_log2.log, [1].concat(args))();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!_env.global.makeDebugContext) {\n      _log2.log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = _env.global.makeDebugContext(gl, options);\n      _log2.log.level = Math.max(_log2.log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\n\nfunction getContextDebugInfo(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\n\nfunction resizeGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    var devicePixelRatio = (0, _devicePixels.getDevicePixelRatio)(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  var onError = options.onError;\n  var errorMessage = null;\n\n  var onCreateError = function onCreateError(error) {\n    return errorMessage = error.statusMessage || errorMessage;\n  };\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  var _options$webgl = options.webgl1,\n      webgl1 = _options$webgl === void 0 ? true : _options$webgl,\n      _options$webgl2 = options.webgl2,\n      webgl2 = _options$webgl2 === void 0 ? true : _options$webgl2;\n  var gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  var canvas = _ref.canvas,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      onError = _ref.onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    var isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  var webGL = (0, _webglChecks.isWebGL2)(gl) ? 'WebGL2' : 'WebGL1';\n  var info = getContextDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _log2.log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  var clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  var clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    _log2.log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  var cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    var clampedPixelRatio = devicePixelRatio;\n    var canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    var canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      _log2.log.warn(\"Device pixel ratio clamped\")();\n\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth: clientWidth,\n      clientHeight: clientHeight,\n      devicePixelRatio: devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","instrumentGLContext","gl","options","arguments","length","undefined","_instrumented","_version","WebGL2RenderingContext","luma","canvasSizeInfo","_options3","Object","assign","CONTEXT_DEFAULTS","debug","manageState","_trackContextState","trackContextState","copyState","log","_len","args","Array","_key","_log2","apply","concat","isBrowser","_env","makeDebugContext","level","Math","max","warn","getContextDebugInfo","vendorMasked","getParameter","rendererMasked","ext","getExtension","vendorUnmasked","UNMASKED_VENDOR_WEBGL","rendererUnmasked","UNMASKED_RENDERER_WEBGL","vendor","renderer","version","shadingLanguageVersion","createBrowserContext","canvas","onError","errorMessage","onCreateError","error","statusMessage","addEventListener","_options$webgl","webgl1","_options$webgl2","webgl2","getContext","removeEventListener","onContextLost","onContextRestored","getCanvas","_ref","_ref$width","width","_ref$height","height","isPage","document","readyState","targetCanvas","getElementById","createElement","id","style","Number","isFinite","body","insertBefore","firstChild","logInfo","webGL","_webglChecks","isWebGL2","info","driver","defineProperty","value","createGLContext","message","throwOnError","Error","console","_assert","assert","_options","resizeGLContext","devicePixelRatio","_devicePixels","getDevicePixelRatio","useDevicePixels","clientWidth","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","floor","canvasHeight","drawingBufferWidth","drawingBufferHeight","min","resize"]
}
