shadow$provide.module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils=function(global,require,module,exports){function transformBox(bbox,modelMatrix){bbox=[modelMatrix.transformPoint([bbox[0],bbox[1]]),modelMatrix.transformPoint([bbox[2],bbox[1]]),modelMatrix.transformPoint([bbox[0],bbox[3]]),modelMatrix.transformPoint([bbox[2],bbox[3]])];return[Math.min.apply(Math,(0,_toConsumableArray2["default"])(bbox.map(function(i){return i[0]}))),Math.min.apply(Math,(0,_toConsumableArray2["default"])(bbox.map(function(i){return i[1]}))),
Math.max.apply(Math,(0,_toConsumableArray2["default"])(bbox.map(function(i){return i[0]}))),Math.max.apply(Math,(0,_toConsumableArray2["default"])(bbox.map(function(i){return i[1]})))]}function getIndexingCoords(bbox,scale,modelMatrixInverse){return modelMatrixInverse?transformBox(bbox,modelMatrixInverse).map(function(i){return i*scale/TILE_SIZE}):bbox.map(function(i){return i*scale/TILE_SIZE})}function osmTile2lngLat(x,y,z){z=Math.pow(2,z);y=Math.PI-2*Math.PI*y/z;return[x/z*360-180,180/Math.PI*Math.atan(.5*
(Math.exp(y)-Math.exp(-y)))]}function tile2XY(x,y,z){z=Math.pow(2,z);return[x/z*TILE_SIZE,y/z*TILE_SIZE]}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.getURLFromTemplate=function(template,properties){if(!template||!template.length)return null;Array.isArray(template)&&(template=template[Math.abs(properties.x+properties.y)%template.length]);var y=properties.y,z=properties.z;return template.replace("{x}",
properties.x).replace("{y}",y).replace("{z}",z).replace("{-y}",Math.pow(2,z)-y-1)};exports.osmTile2lngLat=osmTile2lngLat;exports.tileToBoundingBox=function(viewport,x,y,z){if(viewport.isGeospatial){viewport=osmTile2lngLat(x,y,z);var _osmTile2lngLat2=(0,_slicedToArray2["default"])(viewport,2);viewport=_osmTile2lngLat2[0];_osmTile2lngLat2=_osmTile2lngLat2[1];x=osmTile2lngLat(x+1,y+1,z);x=(0,_slicedToArray2["default"])(x,2);return{west:viewport,north:_osmTile2lngLat2,east:x[0],south:x[1]}}viewport=tile2XY(x,
y,z);_osmTile2lngLat2=(0,_slicedToArray2["default"])(viewport,2);viewport=_osmTile2lngLat2[0];_osmTile2lngLat2=_osmTile2lngLat2[1];x=tile2XY(x+1,y+1,z);x=(0,_slicedToArray2["default"])(x,2);return{left:viewport,top:_osmTile2lngLat2,right:x[0],bottom:x[1]}};exports.getTileIndices=function(_ref){var viewport=_ref.viewport,maxZoom=_ref.maxZoom,minZoom=_ref.minZoom,zRange=_ref.zRange,extent=_ref.extent,_ref$tileSize=_ref.tileSize,modelMatrix=_ref.modelMatrix;_ref=_ref.modelMatrixInverse;_ref$tileSize=
Math.round(viewport.zoom+Math.log2(TILE_SIZE/(void 0===_ref$tileSize?TILE_SIZE:_ref$tileSize)));if(Number.isFinite(minZoom)&&_ref$tileSize<minZoom){if(!extent)return[];_ref$tileSize=minZoom}Number.isFinite(maxZoom)&&_ref$tileSize>maxZoom&&(_ref$tileSize=maxZoom);maxZoom=extent;modelMatrix&&_ref&&extent&&!viewport.isGeospatial&&(maxZoom=transformBox(extent,modelMatrix));if(viewport.isGeospatial)viewport=(0,_tile2dTraversal.getOSMTileIndices)(viewport,_ref$tileSize,zRange,extent||DEFAULT_EXTENT);else{zRange=
_ref$tileSize;extent=maxZoom||DEFAULT_EXTENT;modelMatrix=viewport.getBounds();viewport=getIndexingCoords(viewport.isGeospatial?[Math.max(modelMatrix[0],extent[0]),Math.max(modelMatrix[1],extent[1]),Math.min(modelMatrix[2],extent[2]),Math.min(modelMatrix[3],extent[3])]:[Math.max(Math.min(modelMatrix[0],extent[2]),extent[0]),Math.max(Math.min(modelMatrix[1],extent[3]),extent[1]),Math.min(Math.max(modelMatrix[2],extent[0]),extent[2]),Math.min(Math.max(modelMatrix[3],extent[1]),extent[3])],Math.pow(2,
zRange),_ref);maxZoom=(0,_slicedToArray2["default"])(viewport,4);viewport=maxZoom[1];_ref=maxZoom[2];extent=maxZoom[3];modelMatrix=[];for(maxZoom=Math.floor(maxZoom[0]);maxZoom<_ref;maxZoom++)for(minZoom=Math.floor(viewport);minZoom<extent;minZoom++)modelMatrix.push({x:maxZoom,y:minZoom,z:zRange});viewport=modelMatrix}return viewport};exports.isURLTemplate=function(s){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(s)};exports.urlType=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_tile2dTraversal=require("module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$tile_2d_traversal"),TILE_SIZE=512,DEFAULT_EXTENT=[-Infinity,-Infinity,Infinity,Infinity];exports.urlType={type:"url",value:"",validate:function(value){return"string"===typeof value||Array.isArray(value)&&value.every(function(url){return"string"===typeof url})},equals:function(value1,value2){if(value1===value2)return!0;
if(!Array.isArray(value1)||!Array.isArray(value2))return!1;var len=value1.length;if(len!==value2.length)return!1;for(var i=0;i<len;i++)if(value1[i]!==value2[i])return!1;return!0}}}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$geo_layers$dist$es5$tile_layer$utils.js.map
