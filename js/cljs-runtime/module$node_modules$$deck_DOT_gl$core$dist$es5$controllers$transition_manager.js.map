{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager.js",
"lineCount":10,
"mappings":"AAAAA,cAAA,CAAe,6EAAf,CAAkG,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAGtIC,MAAAA,CAAyBH,OAAA,CAAQ,kEAAR,CAE7BI,OAAA,CAAOC,cAAP,CAAsBH,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CI,MAAO,CAAA,CADoC,CAA7C,CAGAJ,QAAA,CAAQ,SAAR,CAAA,CAAqBA,OAArB,CAA6BK,iBAA7B,CAAiD,IAAK,EAEtD,KAAIC,iBAAmBL,MAAA,CAAuBH,OAAA,CAAQ,2DAAR,CAAvB,CAAvB,CAEIS,cAAgBN,MAAA,CAAuBH,OAAA,CAAQ,wDAAR,CAAvB,CAFpB;AAIIU,YAAcP,MAAA,CAAuBH,OAAA,CAAQ,uEAAR,CAAvB,CAJlB,CAMIW,KAAOA,QAAa,EAAG,EAN3B,CAQIJ,kBAAoB,CACtBK,MAAO,CADe,CAEtBC,YAAa,CAFS,CAGtBC,OAAQ,CAHc,CAKxBZ,QAAA,CAAQK,iBAAR,CAA4BA,iBAC5B,KAAIQ,cAAgB,CAClBC,iBAAkBA,QAAyB,CAACC,CAAD,CAAI,CAC7C,MAAOA,EADsC,CAD7B,CAIlBC,uBAAwBX,iBAAxBW,CAA0CN,KAJxB,CAKlBO,kBAAmBR,IALD,CAMlBS,sBAAuBT,IANL,CAOlBU,gBAAiBV,IAPC,CAUhBW,QAAAA,CAAoB,QAAS,EAAG,CAClCA,QAASA,kBAAiB,CAACC,eAAD,CAAkB,CAC1C,IAAIC,MAA2B,CAAnB,CAAAC,SAAA,CAAUC,MAAV,EAAyCC,IAAAA,EAAzC,GAAwBF,SAAA,CAAU,CAAV,CAAxB;AAAqDA,SAAA,CAAU,CAAV,CAArD,CAAoE,EAChF,EAAC,CAAA,CAAGjB,gBAAA,CAAiB,SAAjB,CAAJ,EAAiC,IAAjC,CAAuCc,iBAAvC,CACA,KAAA,CAAKC,eAAL,CAAuBA,eACvB,KAAA,CAAKC,KAAL,CAAapB,MAAA,CAAOwB,MAAP,CAAc,EAAd,CAAkBb,aAAlB,CAAiCS,KAAjC,CACb,KAAA,CAAKK,iBAAL,CAAyB,IACzB,KAAA,CAAKC,UAAL,CAAkB,IAAIpB,WAAA,CAAY,SAAZ,CAAJ,CAA2Bc,KAA3B,CAAiCO,QAAjC,CAClB,KAAA,CAAKC,iBAAL,CAAyBR,KAAzB,CAA+BQ,iBAA/B,EAAoDrB,IACpD,KAAA,CAAKsB,aAAL,CAAqBT,KAArB,CAA2BS,aAA3B,EAA4CtB,IAC5C,KAAA,CAAKuB,mBAAL,CAA2B,IAAA,CAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CATe,CAY5C,CAAC,CAAA,CAAG1B,aAAA,CAAc,SAAd,CAAJ,EAA8Ba,iBAA9B,CAAiD,CAAC,CAChDc,IAAK,UAD2C,CAEhD9B,MAAO+B,QAAiB,EAAG,CACzB,IAAA,CAAKP,UAAL,CAAgBQ,MAAhB,EADyB,CAFqB,CAAD;AAK9C,CACDF,IAAK,yBADJ,CAED9B,MAAOiC,QAAgC,EAAG,CACxC,MAAO,KAAP,CAAYV,iBAD4B,CAFzC,CAL8C,CAU9C,CACDO,IAAK,wBADJ,CAED9B,MAAOkC,QAA+B,CAACC,SAAD,CAAY,CAChD,IAAIC,oBAAsB,CAAA,CAA1B,CACIC,aAAe,IAAfA,CAAoBnB,KAExB,KAAA,CAAKA,KAAL,CADAiB,SACA,CADYrC,MAAA,CAAOwB,MAAP,CAAc,EAAd,CAAkBb,aAAlB,CAAiC0B,SAAjC,CAGZ,IAAI,IAAA,CAAKG,2BAAL,CAAiCD,YAAjC,CAA+CF,SAA/C,CAAJ,CACE,MAAOC,oBAGT,IAAI,IAAA,CAAKG,oBAAL,CAA0BJ,SAA1B,CAAJ,CAA0C,CACpCK,mBAAAA,CAAwB,IAAxBA,CAA6BhB,UAA7BgB,CAAwCC,QAA5C,KAEIC,SAAWF,mBAAXE,CAAiCA,QACjCC,aAAAA,CAAa7C,MAAA,CAAOwB,MAAP,CAAc,EAAd,CAAkBe,YAAlB;AAFEG,mBAE8B,CAFRI,YAEQ,GAAiB3C,iBAAjB,CAAmCM,WAAnC,CAAiDmC,QAAjD,CAA4D,IAA5D,CAAiEnB,iBAAjE,EAAsFc,YAAtH,CAEjB,KAAA,CAAKQ,kBAAL,CAAwBF,YAAxB,CAAoCR,SAApC,CAEAC,oBAAA,CAAsB,CAAA,CARkB,CAA1C,IAUE,KAAA,CAAKZ,UAAL,CAAgBQ,MAAhB,EAGF,OAAOI,oBAvByC,CAFjD,CAV8C,CAqC9C,CACDN,IAAK,kBADJ,CAED9B,MAAO8C,QAAyB,EAAG,CACjC,IAAA,CAAKtB,UAAL,CAAgBuB,MAAhB,EADiC,CAFlC,CArC8C,CA0C9C,CACDjB,IAAK,sBADJ,CAED9B,MAAOuC,QAA6B,CAACrB,KAAD,CAAQ,CAAA,IACtC8B,mBAAqB9B,KAArB8B,CAA2BA,kBAC3BC,MAAAA,CAAyB/B,KAAzB+B,CAA+BA,sBACnC,QAA6B,CAA7B,CAAQD,kBAAR,EAAyD,MAAzD,GAAkCA,kBAAlC;AAAoE,CAAA,CAAQC,KAHlC,CAF3C,CA1C8C,CAiD9C,CACDnB,IAAK,iCADJ,CAED9B,MAAOkD,QAAwC,CAAChC,KAAD,CAAQ,CACrD,MAAI,KAAJ,CAASM,UAAT,CAAoB2B,UAApB,CACS,IAAA,CAAK3B,UAAL,CAAgBiB,QAAhB,CAAyBW,YAAzB,CAAsCC,aAAtC,CAAoDnC,KAApD,CAA2D,IAA3D,CAAgEK,iBAAhE,CADT,CAIO,CAAA,CAL8C,CAFtD,CAjD8C,CA0D9C,CACDO,IAAK,6BADJ,CAED9B,MAAOsC,QAAoC,CAACD,YAAD,CAAeF,SAAf,CAA0B,CACnE,MAAI,KAAJ,CAASX,UAAT,CAAoB2B,UAApB,CACS,IADT,CACc3B,UADd,CACyBiB,QADzB,CACkCG,YADlC,GACmD3C,iBADnD,CACqEO,MADrE,EAC+E,IAAA,CAAK0C,+BAAL,CAAqCf,SAArC,CAD/E,CAEW,IAAA,CAAKI,oBAAL,CAA0BJ,SAA1B,CAAJ,CACEA,SAAA,CAAUc,sBAAV,CAAiCI,aAAjC,CAA+ChB,YAA/C;AAA6DF,SAA7D,CADF,CAIA,CAAA,CAP4D,CAFpE,CA1D8C,CAqE9C,CACDL,IAAK,oBADJ,CAED9B,MAAO6C,QAA2B,CAACF,UAAD,CAAaD,QAAb,CAAuB,CACvD,IAAIY,eAAiB,IAAI,IAAJ,CAASrC,eAAT,CAAyB0B,UAAzB,CACjBY,eAAAA,CAAoB,CAAA,IAAI,IAAJ,CAAStC,eAAT,CAAyByB,QAAzB,CAAA,EAAmCc,gBAAnC,CAAoDF,cAApD,CACxB,KAAIL,uBAAyBP,QAAzBO,CAAkCA,sBAClCQ,uBAAAA,CAAWR,sBAAA,CAAuBS,WAAvB,CAAqCT,sBAAA,CAAuBS,WAAvB,CAAmCf,UAAnC,CAA+CD,QAA/C,CAArC,CAAgGA,QAAhG,CAAyGM,kBAEvG,EAAjB,GAAIS,sBAAJ,GAIIE,UAkBJ,CAlBmBjB,QAAA,CAASO,sBAAT,CAAgCW,eAAhC,CAAgDjB,UAAhD;AAA4DY,cAA5D,CAkBnB,CAjBA,IAiBA,CAjBKhC,iBAiBL,CAjByB,EAiBzB,CAhBA,IAgBA,CAhBKkC,QAgBL,CAhBgBA,sBAgBhB,CAfA,IAAA,CAAKjC,UAAL,CAAgBqC,KAAhB,CAAsB,CACpBJ,SAAUA,sBADU,CAEpBK,OAAQpB,QAARoB,CAAiBpD,gBAFG,CAGpB0C,aAAcV,QAAdU,CAAuBH,sBAHH,CAIpBL,aAAcF,QAAdE,CAAuBhC,sBAJH,CAKpB+B,WAAYgB,UAAZhB,CAAyBkB,KALL,CAMpBnB,SAAUiB,UAAVjB,CAAuBqB,GANH,CAOpBC,QAAStB,QAATsB,CAAkBnD,iBAPE,CAQpBoD,SAAU,IAAVA,CAAerC,mBARK,CASpBsC,YAAa,IAAA,CAAKC,gBAAL,CAAsBzB,QAAtB,CAA+B5B,qBAA/B,CATO,CAUpBsD,MAAO,IAAA,CAAKD,gBAAL,CAAsBzB,QAAtB,CAA+B3B,eAA/B,CAVa,CAAtB,CAeA,CAHA,IAAA,CAAKY,aAAL,CAAmB,CACjB0C,aAAc,CAAA,CADG,CAAnB,CAGA;AAAA,IAAA,CAAKvB,gBAAL,EAtBA,CANuD,CAFxD,CArE8C,CAqG9C,CACDhB,IAAK,kBADJ,CAED9B,MAAOmE,QAAyB,CAACG,QAAD,CAAW,CACzC,IAAIC,MAAQ,IAEZ,OAAO,SAAS,CAAC/C,UAAD,CAAa,CAC3B+C,KAAA,CAAMhD,iBAAN,CAA0B,IAE1BgD,MAAA,CAAM5C,aAAN,CAAoB,CAClB0C,aAAc,CAAA,CADI,CAElBG,UAAW,CAAA,CAFO,CAGlBC,UAAW,CAAA,CAHO,CAIlBC,WAAY,CAAA,CAJM,CAApB,CAOAJ,SAAA,CAAS9C,UAAT,CAV2B,CAHY,CAF1C,CArG8C,CAuH9C,CACDM,IAAK,qBADJ,CAED9B,MAAO4B,QAA4B,CAACJ,UAAD,CAAa,CAAA,IAE1CmD,qBAAuBnD,UAAvBmD,CAAkClC,QAFQ,CAG1CW,aAAeuB,oBAAfvB,CAAoCA,YAHM,CAI1CT,WAAagC,oBAAbhC,CAAkCA,UAJQ,CAK1CD,SAAWiC,oBAAXjC,CAAgCA,QALU,CAO1CoB,OAASa,oBAATb,CAA8BA,MAC9BnD;UAAAA,CAAImD,MAAA,CAPGtC,UAOH,CAPcoD,IAOd,CAFOD,oBAEP,CAF4BlB,QAE5B,CACJoB,aAAAA,CAAWzB,YAAA,CAAa0B,gBAAb,CAA8BnC,UAA9B,CAA0CD,QAA1C,CAAoD/B,UAApD,CACf,KAAA,CAAKY,iBAAL,CAAyB,CAAA,IAAI,IAAJ,CAASN,eAAT,CAAyBnB,MAAA,CAAOwB,MAAP,CAAc,EAAd,CAAkB,IAAlB,CAAuBJ,KAAvB,CAA8B2D,YAA9B,CAAzB,CAAA,EAAkEE,gBAAlE,EACzB,KAAA,CAAKrD,iBAAL,CAAuB,CACrBsD,UAAW,IAAXA,CAAgBzD,iBADK,CAErB0D,aAAc,IAAdA,CAAmB/D,KAFE,CAAvB,CAX8C,CAF/C,CAvH8C,CAAjD,CA0IA,OAAOF,kBAvJ2B,CAAZ,EA0JxBpB,QAAA,CAAQ,SAAR,CAAA,CAAqBoB,OA5LqH;",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/controllers/transition-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.TRANSITION_EVENTS = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _transition = _interopRequireDefault(require(\"../transitions/transition\"));\n\nvar noop = function noop() {};\n\nvar TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nexports.TRANSITION_EVENTS = TRANSITION_EVENTS;\nvar DEFAULT_PROPS = {\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(ControllerState) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    (0, _classCallCheck2[\"default\"])(this, TransitionManager);\n    this.ControllerState = ControllerState;\n    this.props = Object.assign({}, DEFAULT_PROPS, props);\n    this.propsInTransition = null;\n    this.transition = new _transition[\"default\"](props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  (0, _createClass2[\"default\"])(TransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.transition.cancel();\n    }\n  }, {\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this.propsInTransition;\n    }\n  }, {\n    key: \"processViewStateChange\",\n    value: function processViewStateChange(nextProps) {\n      var transitionTriggered = false;\n      var currentProps = this.props;\n      nextProps = Object.assign({}, DEFAULT_PROPS, nextProps);\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return transitionTriggered;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var _this$transition$sett = this.transition.settings,\n            interruption = _this$transition$sett.interruption,\n            endProps = _this$transition$sett.endProps;\n        var startProps = Object.assign({}, currentProps, interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps);\n\n        this._triggerTransition(startProps, nextProps);\n\n        transitionTriggered = true;\n      } else {\n        this.transition.cancel();\n      }\n\n      return transitionTriggered;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transition.update();\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      } else if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      var startViewstate = new this.ControllerState(startProps);\n      var endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n      if (duration === 0) {\n        return;\n      }\n\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n      this.propsInTransition = {};\n      this.duration = duration;\n      this.transition.start({\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        onStart: endProps.onTransitionStart,\n        onUpdate: this._onTransitionUpdate,\n        onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n        onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n      });\n      this.onStateChange({\n        inTransition: true\n      });\n      this.updateTransition();\n    }\n  }, {\n    key: \"_onTransitionEnd\",\n    value: function _onTransitionEnd(callback) {\n      var _this = this;\n\n      return function (transition) {\n        _this.propsInTransition = null;\n\n        _this.onStateChange({\n          inTransition: false,\n          isZooming: false,\n          isPanning: false,\n          isRotating: false\n        });\n\n        callback(transition);\n      };\n    }\n  }, {\n    key: \"_onTransitionUpdate\",\n    value: function _onTransitionUpdate(transition) {\n      var time = transition.time,\n          _transition$settings = transition.settings,\n          interpolator = _transition$settings.interpolator,\n          startProps = _transition$settings.startProps,\n          endProps = _transition$settings.endProps,\n          duration = _transition$settings.duration,\n          easing = _transition$settings.easing;\n      var t = easing(time / duration);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = new this.ControllerState(Object.assign({}, this.props, viewport)).getViewportProps();\n      this.onViewStateChange({\n        viewState: this.propsInTransition,\n        oldViewState: this.props\n      });\n    }\n  }]);\n  return TransitionManager;\n}();\n\nexports[\"default\"] = TransitionManager;\n//# sourceMappingURL=transition-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","TRANSITION_EVENTS","_classCallCheck2","_createClass2","_transition","noop","BREAK","SNAP_TO_END","IGNORE","DEFAULT_PROPS","transitionEasing","t","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","props","arguments","length","undefined","assign","propsInTransition","transition","timeline","onViewStateChange","onStateChange","_onTransitionUpdate","bind","key","finalize","cancel","getViewportInTransition","processViewStateChange","nextProps","transitionTriggered","currentProps","_shouldIgnoreViewportChange","_isTransitionEnabled","_this$transition$sett","settings","endProps","startProps","interruption","_triggerTransition","updateTransition","update","transitionDuration","transitionInterpolator","_isUpdateDueToCurrentTransition","inProgress","interpolator","arePropsEqual","startViewstate","endViewStateProps","shortestPathFrom","duration","getDuration","initialProps","initializeProps","start","easing","end","onStart","onUpdate","onInterrupt","_onTransitionEnd","onEnd","inTransition","callback","_this","isZooming","isPanning","isRotating","_transition$settings","time","viewport","interpolateProps","getViewportProps","viewState","oldViewState"]
}
