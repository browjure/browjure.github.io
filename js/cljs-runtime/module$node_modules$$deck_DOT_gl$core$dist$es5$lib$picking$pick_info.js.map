{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$pick_info.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/picking/pick-info.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$picking$pick_info\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEmptyPickingInfo = getEmptyPickingInfo;\nexports.processPickInfo = processPickInfo;\nexports.getLayerPickingInfo = getLayerPickingInfo;\n\nfunction getEmptyPickingInfo(_ref) {\n  var pickInfo = _ref.pickInfo,\n      mode = _ref.mode,\n      viewports = _ref.viewports,\n      layerFilter = _ref.layerFilter,\n      pixelRatio = _ref.pixelRatio,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z;\n  var layer = pickInfo && pickInfo.pickedLayer;\n\n  var viewportFilter = layerFilter && layer && function (v) {\n    return layerFilter({\n      layer: layer,\n      viewport: v,\n      isPicking: true,\n      renderPass: \"picking:\".concat(mode)\n    });\n  };\n\n  var viewport = getViewportFromCoordinates(viewports, {\n    x: x,\n    y: y\n  }, viewportFilter);\n  var coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport: viewport,\n    index: -1,\n    picked: false,\n    x: x,\n    y: y,\n    pixel: [x, y],\n    coordinate: coordinate,\n    devicePixel: pickInfo && [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio: pixelRatio\n  };\n}\n\nfunction processPickInfo(opts) {\n  var pickInfo = opts.pickInfo,\n      lastPickedInfo = opts.lastPickedInfo,\n      mode = opts.mode,\n      layers = opts.layers;\n  var pickedColor = pickInfo.pickedColor,\n      pickedLayer = pickInfo.pickedLayer,\n      pickedObjectIndex = pickInfo.pickedObjectIndex;\n  var affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    var lastPickedObjectIndex = lastPickedInfo.index;\n    var lastPickedLayerId = lastPickedInfo.layerId;\n    var pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        var lastPickedLayer = layers.find(function (layer) {\n          return layer.props.id === lastPickedLayerId;\n        });\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  var baseInfo = getEmptyPickingInfo(opts);\n  var infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(function (layer) {\n    var info = Object.assign({}, baseInfo);\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer: layer,\n      info: info,\n      mode: mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    if (info) {\n      infos.set(info.layer.id, info);\n    }\n\n    if (mode === 'hover' && layer.props.autoHighlight) {\n      var pickingModuleParameters = {\n        pickingSelectedColor: pickedLayer === layer ? pickedColor : null\n      };\n      var highlightColor = layer.props.highlightColor;\n\n      if (pickedLayer === layer && typeof highlightColor === 'function') {\n        pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n      }\n\n      layer.setModuleParameters(pickingModuleParameters);\n      layer.setNeedsRedraw();\n    }\n  });\n  return infos;\n}\n\nfunction getLayerPickingInfo(_ref2) {\n  var layer = _ref2.layer,\n      info = _ref2.info,\n      mode = _ref2.mode;\n\n  while (layer && info) {\n    var sourceLayer = info.layer || layer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info: info,\n      mode: mode,\n      sourceLayer: sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel, filter) {\n  for (var i = viewports.length - 1; i >= 0; i--) {\n    var viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel) && (!filter || filter(viewport))) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getEmptyPickingInfo","_ref","pickInfo","mode","layerFilter","pixelRatio","x","y","z","layer","pickedLayer","coordinate","viewport","getViewportFromCoordinates","viewports","v","isPicking","renderPass","concat","unproject","targetZ","color","index","picked","pixel","devicePixel","pickedX","pickedY","getLayerPickingInfo","_ref2","info","sourceLayer","getPickingInfo","parent","filter","i","length","containsPixel","Object","defineProperty","value","processPickInfo","opts","lastPickedInfo","layers","pickedColor","pickedObjectIndex","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","layerId","pickedLayerId","props","id","lastPickedLayer","find","unshift","baseInfo","infos","Map","set","forEach","assign","autoHighlight","pickingModuleParameters","pickingSelectedColor","highlightColor","pickingHighlightColor","setModuleParameters","setNeedsRedraw"]
}
