{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_material_parser.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/experimental/dist/es5/gltf/gltf-material-parser.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_material_parser\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar GLTFMaterialParser = function () {\n  function GLTFMaterialParser(gl, _ref) {\n    var attributes = _ref.attributes,\n        material = _ref.material,\n        pbrDebug = _ref.pbrDebug,\n        imageBasedLightingEnvironment = _ref.imageBasedLightingEnvironment,\n        lights = _ref.lights,\n        useTangents = _ref.useTangents;\n    (0, _classCallCheck2[\"default\"])(this, GLTFMaterialParser);\n    this.gl = gl;\n    this.defines = {\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if ((0, _webgl.hasFeature)(gl, _webgl.FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      u_Camera: [0, 0, 0],\n      u_MetallicRoughnessValues: [1, 1]\n    };\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  (0, _createClass2[\"default\"])(GLTFMaterialParser, [{\n    key: \"defineIfPresent\",\n    value: function defineIfPresent(value, name) {\n      if (value) {\n        this.defines[name] = 1;\n      }\n    }\n  }, {\n    key: \"parseTexture\",\n    value: function parseTexture(gltfTexture, name) {\n      var define = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var parameters = gltfTexture.texture && gltfTexture.texture.sampler && gltfTexture.texture.sampler.parameters || {};\n      var texture = new _webgl.Texture2D(this.gl, {\n        id: gltfTexture.name || gltfTexture.id,\n        parameters: parameters,\n        pixelStore: (0, _defineProperty2[\"default\"])({}, this.gl.UNPACK_FLIP_Y_WEBGL, false),\n        data: gltfTexture.texture.source.image\n      });\n      this.uniforms[name] = texture;\n      this.defineIfPresent(define, define);\n      this.generatedTextures.push(texture);\n    }\n  }, {\n    key: \"parsePbrMetallicRoughness\",\n    value: function parsePbrMetallicRoughness(pbrMetallicRoughness) {\n      if (pbrMetallicRoughness.baseColorTexture) {\n        this.parseTexture(pbrMetallicRoughness.baseColorTexture, 'u_BaseColorSampler', 'HAS_BASECOLORMAP');\n      }\n\n      this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n      if (pbrMetallicRoughness.metallicRoughnessTexture) {\n        this.parseTexture(pbrMetallicRoughness.metallicRoughnessTexture, 'u_MetallicRoughnessSampler', 'HAS_METALROUGHNESSMAP');\n      }\n\n      var _pbrMetallicRoughness = pbrMetallicRoughness.metallicFactor,\n          metallicFactor = _pbrMetallicRoughness === void 0 ? 1 : _pbrMetallicRoughness,\n          _pbrMetallicRoughness2 = pbrMetallicRoughness.roughnessFactor,\n          roughnessFactor = _pbrMetallicRoughness2 === void 0 ? 1 : _pbrMetallicRoughness2;\n      this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n    }\n  }, {\n    key: \"parseMaterial\",\n    value: function parseMaterial(material) {\n      this.uniforms.pbr_uUnlit = Boolean(material.unlit);\n\n      if (material.pbrMetallicRoughness) {\n        this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n      }\n\n      if (material.normalTexture) {\n        this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n        var _material$normalTextu = material.normalTexture.scale,\n            scale = _material$normalTextu === void 0 ? 1 : _material$normalTextu;\n        this.uniforms.u_NormalScale = scale;\n      }\n\n      if (material.occlusionTexture) {\n        this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n        var _material$occlusionTe = material.occlusionTexture.strength,\n            strength = _material$occlusionTe === void 0 ? 1 : _material$occlusionTe;\n        this.uniforms.u_OcclusionStrength = strength;\n      }\n\n      if (material.emissiveTexture) {\n        this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n        this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n      }\n\n      if (material.alphaMode === 'MASK') {\n        var _material$alphaCutoff = material.alphaCutoff,\n            alphaCutoff = _material$alphaCutoff === void 0 ? 0.5 : _material$alphaCutoff;\n        this.defines.ALPHA_CUTOFF = 1;\n        this.uniforms.u_AlphaCutoff = alphaCutoff;\n      } else if (material.alphaMode === 'BLEND') {\n        _webgl.log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n\n        Object.assign(this.parameters, {\n          blend: true,\n          blendEquation: this.gl.FUNC_ADD,\n          blendFunc: [this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA, this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA]\n        });\n      }\n    }\n  }]);\n  return GLTFMaterialParser;\n}();\n\nexports[\"default\"] = GLTFMaterialParser;\n//# sourceMappingURL=gltf-material-parser.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_defineProperty2","_classCallCheck2","_createClass2","_webgl","GLTFMaterialParser","gl","_ref","attributes","material","pbrDebug","imageBasedLightingEnvironment","lights","useTangents","defines","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","hasFeature","FEATURES","GLSL_TEXTURE_LOD","USE_TEX_LOD","uniforms","u_Camera","u_MetallicRoughnessValues","parameters","generatedTextures","u_DiffuseEnvSampler","getDiffuseEnvSampler","u_SpecularEnvSampler","getSpecularEnvSampler","u_brdfLUT","getBrdfTexture","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","NORMAL","TANGENT","TEXCOORD_0","parseMaterial","key","name","parseTexture","gltfTexture","define","arguments","length","undefined","texture","Texture2D","id","sampler","pixelStore","UNPACK_FLIP_Y_WEBGL","data","source","image","push","parsePbrMetallicRoughness","pbrMetallicRoughness","baseColorTexture","u_BaseColorFactor","baseColorFactor","metallicRoughnessTexture","_pbrMetallicRoughness","metallicFactor","_pbrMetallicRoughness2","roughnessFactor","pbr_uUnlit","unlit","normalTexture","_material$normalTextu","scale","u_NormalScale","occlusionTexture","_material$occlusionTe","strength","u_OcclusionStrength","emissiveTexture","u_EmissiveFactor","emissiveFactor","alphaMode","_material$alphaCutoff","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","log","warn","assign","blend","blendEquation","FUNC_ADD","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE"]
}
