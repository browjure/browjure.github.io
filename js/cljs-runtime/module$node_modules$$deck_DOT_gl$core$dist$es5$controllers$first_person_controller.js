shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$first_person_controller=function(global,require,module,exports){function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=(0,_getPrototypeOf2["default"])(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);return(0,_possibleConstructorReturn2["default"])(this,
Super)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var _interopRequireDefault=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _classCallCheck2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$createClass")),_inherits2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$getPrototypeOf"));global=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$controller"));
module=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$view_state"));var _mathUtils=require("module$node_modules$$deck_DOT_gl$core$dist$es5$utils$math_utils");_interopRequireDefault=_interopRequireDefault(require("module$node_modules$$deck_DOT_gl$core$dist$es5$transitions$linear_interpolator"));var _transitionManager=require("module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$transition_manager"),_math=require("module$node_modules$math_DOT_gl$dist$es5$index"),
JSCompiler_object_inline_position_4382=[0,0,0],LINEAR_TRANSITION_PROPS={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new _interopRequireDefault["default"](["position","pitch","bearing"]),transitionInterruption:_transitionManager.TRANSITION_EVENTS.BREAK},FirstPersonState=function(_ViewState){function FirstPersonState(_ref){var _this=_ref.width;var height=_ref.height,_ref$position=_ref.position;_ref$position=void 0===_ref$position?JSCompiler_object_inline_position_4382:
_ref$position;var _ref$bearing=_ref.bearing;_ref$bearing=void 0===_ref$bearing?0:_ref$bearing;var _ref$pitch=_ref.pitch;_ref$pitch=void 0===_ref$pitch?0:_ref$pitch;var longitude=_ref.longitude,latitude=_ref.latitude,_ref$maxPitch=_ref.maxPitch;_ref$maxPitch=void 0===_ref$maxPitch?90:_ref$maxPitch;var _ref$minPitch=_ref.minPitch,minPitch=void 0===_ref$minPitch?-90:_ref$minPitch;_ref$minPitch=_ref.startRotatePos;var startBearing=_ref.startBearing,startPitch=_ref.startPitch,startZoomPosition=_ref.startZoomPosition;
_ref=_ref.startZoom;(0,_classCallCheck2["default"])(this,FirstPersonState);_this=_super.call(this,{width:_this,height,position:_ref$position,bearing:_ref$bearing,pitch:_ref$pitch,longitude,latitude,maxPitch:_ref$maxPitch,minPitch});_this._state={startRotatePos:_ref$minPitch,startBearing,startPitch,startZoomPosition,startZoom:_ref};return _this}(0,_inherits2["default"])(FirstPersonState,_ViewState);var _super=_createSuper(FirstPersonState);(0,_createClass2["default"])(FirstPersonState,[{key:"getDirection",
value:function(){return(new _math._SphericalCoordinates({bearing:this._viewportProps.bearing,pitch:0<arguments.length&&void 0!==arguments[0]&&arguments[0]?90:90+this._viewportProps.pitch})).toVector3().normalize()}},{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(_ref2){return this._getUpdatedState({startRotatePos:_ref2.pos,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},
{key:"rotate",value:function(_ref3){var pos=_ref3.pos,_ref3$deltaAngleX=_ref3.deltaAngleX;_ref3$deltaAngleX=void 0===_ref3$deltaAngleX?0:_ref3$deltaAngleX;_ref3=_ref3.deltaAngleY;_ref3=void 0===_ref3?0:_ref3;var _this$_state=this._state,startRotatePos=_this$_state.startRotatePos,startBearing=_this$_state.startBearing;_this$_state=_this$_state.startPitch;var _this$_viewportProps=this._viewportProps,width=_this$_viewportProps.width;_this$_viewportProps=_this$_viewportProps.height;return startRotatePos&&
Number.isFinite(startBearing)&&Number.isFinite(_this$_state)?this._getUpdatedState(pos?{bearing:startBearing-(pos[0]-startRotatePos[0])/width*180,pitch:_this$_state-(pos[1]-startRotatePos[1])/_this$_viewportProps*90}:{bearing:startBearing-_ref3$deltaAngleX,pitch:_this$_state-_ref3}):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this._viewportProps.position,
startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(_ref4){_ref4=_ref4.scale;var startZoomPosition=this._state.startZoomPosition;startZoomPosition||(startZoomPosition=this._viewportProps.position);var direction=this.getDirection();return this._move(direction,20*Math.log2(_ref4),startZoomPosition)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"moveLeft",value:function(){var speed=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:20,direction=this.getDirection(!0);return this._move(direction.rotateZ({radians:Math.PI/2}),speed)}},{key:"moveRight",value:function(){var speed=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,direction=this.getDirection(!0);return this._move(direction.rotateZ({radians:-Math.PI/2}),speed)}},{key:"moveUp",value:function(){var speed=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,direction=this.getDirection(!0);return this._move(direction,speed)}},{key:"moveDown",value:function(){var speed=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,direction=this.getDirection(!0);return this._move(direction.negate(),speed)}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:15)})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:15)})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+
(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10)})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:10)})}},{key:"zoomIn",value:function(){return this.zoom({scale:0<arguments.length&&void 0!==arguments[0]?arguments[0]:2})}},{key:"zoomOut",value:function(){return this.zoom({scale:1/(0<arguments.length&&void 0!==arguments[0]?arguments[0]:2)})}},{key:"shortestPathFrom",value:function(viewState){viewState=
viewState.getViewportProps();var props=Object.assign({},this._viewportProps),bearing=props.bearing,longitude=props.longitude;180<Math.abs(bearing-viewState.bearing)&&(props.bearing=0>bearing?bearing+360:bearing-360);180<Math.abs(longitude-viewState.longitude)&&(props.longitude=0>longitude?longitude+360:longitude-360);return props}},{key:"_move",value:function(direction,speed){var fromPosition=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._viewportProps.position,delta=direction.scale(speed);
return this._getUpdatedState({position:(new _math.Vector3(fromPosition)).add(delta)})}},{key:"_getUpdatedState",value:function(newProps){return new FirstPersonState(Object.assign({},this._viewportProps,this._state,newProps))}},{key:"_applyConstraints",value:function(props){var pitch=props.pitch,maxPitch=props.maxPitch,minPitch=props.minPitch,longitude=props.longitude,bearing=props.bearing;props.pitch=(0,_math.clamp)(pitch,minPitch,maxPitch);if(-180>longitude||180<longitude)props.longitude=(0,_mathUtils.mod)(longitude+
180,360)-180;if(-180>bearing||180<bearing)props.bearing=(0,_mathUtils.mod)(bearing+180,360)-180;return props}}]);return FirstPersonState}(module["default"]);require=function(_Controller){function FirstPersonController(props){(0,_classCallCheck2["default"])(this,FirstPersonController);return _super2.call(this,FirstPersonState,props)}(0,_inherits2["default"])(FirstPersonController,_Controller);var _super2=_createSuper(FirstPersonController);(0,_createClass2["default"])(FirstPersonController,[{key:"_getTransitionProps",
value:function(){return LINEAR_TRANSITION_PROPS}}]);return FirstPersonController}(global["default"]);exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$controllers$first_person_controller.js.map
