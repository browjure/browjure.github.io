{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_environment.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/experimental/dist/es5/gltf/gltf-environment.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$experimental$dist$es5$gltf$gltf_environment\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _images = require(\"@loaders.gl/images\");\n\nvar GLTFEnvironment = function () {\n  function GLTFEnvironment(gl, _ref) {\n    var brdfLutUrl = _ref.brdfLutUrl,\n        getTexUrl = _ref.getTexUrl,\n        _ref$specularMipLevel = _ref.specularMipLevels,\n        specularMipLevels = _ref$specularMipLevel === void 0 ? 10 : _ref$specularMipLevel;\n    (0, _classCallCheck2[\"default\"])(this, GLTFEnvironment);\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  (0, _createClass2[\"default\"])(GLTFEnvironment, [{\n    key: \"makeCube\",\n    value: function makeCube(_ref2) {\n      var id = _ref2.id,\n          getTextureForFace = _ref2.getTextureForFace,\n          parameters = _ref2.parameters;\n      var pixels = {};\n\n      _webgl.TextureCube.FACES.forEach(function (face) {\n        pixels[face] = getTextureForFace(face);\n      });\n\n      return new _webgl.TextureCube(this.gl, {\n        id: id,\n        mipmaps: false,\n        parameters: parameters,\n        pixels: pixels\n      });\n    }\n  }, {\n    key: \"getDiffuseEnvSampler\",\n    value: function getDiffuseEnvSampler() {\n      var _this = this;\n\n      if (!this._DiffuseEnvSampler) {\n        var _parameters;\n\n        this._DiffuseEnvSampler = this.makeCube({\n          id: 'DiffuseEnvSampler',\n          getTextureForFace: function getTextureForFace(dir) {\n            return (0, _images.loadImage)(_this.getTexUrl('diffuse', dir, 0));\n          },\n          parameters: (_parameters = {}, (0, _defineProperty2[\"default\"])(_parameters, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10243, 33071), (0, _defineProperty2[\"default\"])(_parameters, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters, 10240, 9729), _parameters)\n        });\n      }\n\n      return this._DiffuseEnvSampler;\n    }\n  }, {\n    key: \"getSpecularEnvSampler\",\n    value: function getSpecularEnvSampler() {\n      var _this2 = this;\n\n      if (!this._SpecularEnvSampler) {\n        var _parameters2;\n\n        this._SpecularEnvSampler = this.makeCube({\n          id: 'SpecularEnvSampler',\n          getTextureForFace: function getTextureForFace(dir) {\n            var imageArray = [];\n\n            for (var lod = 0; lod <= _this2.specularMipLevels - 1; lod++) {\n              imageArray.push((0, _images.loadImage)(_this2.getTexUrl('specular', dir, lod)));\n            }\n\n            return imageArray;\n          },\n          parameters: (_parameters2 = {}, (0, _defineProperty2[\"default\"])(_parameters2, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters2, 10243, 33071), (0, _defineProperty2[\"default\"])(_parameters2, 10241, 9987), (0, _defineProperty2[\"default\"])(_parameters2, 10240, 9729), _parameters2)\n        });\n      }\n\n      return this._SpecularEnvSampler;\n    }\n  }, {\n    key: \"getBrdfTexture\",\n    value: function getBrdfTexture() {\n      if (!this._BrdfTexture) {\n        var _parameters3;\n\n        this._BrdfTexture = new _webgl.Texture2D(this.gl, {\n          id: 'brdfLUT',\n          parameters: (_parameters3 = {}, (0, _defineProperty2[\"default\"])(_parameters3, 10242, 33071), (0, _defineProperty2[\"default\"])(_parameters3, 10243, 33071), (0, _defineProperty2[\"default\"])(_parameters3, 10241, 9729), (0, _defineProperty2[\"default\"])(_parameters3, 10240, 9729), _parameters3),\n          data: (0, _images.loadImage)(this.brdfLutUrl)\n        });\n      }\n\n      return this._BrdfTexture;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this._DiffuseEnvSampler) {\n        this._DiffuseEnvSampler[\"delete\"]();\n\n        this._DiffuseEnvSampler = null;\n      }\n\n      if (this._SpecularEnvSampler) {\n        this._SpecularEnvSampler[\"delete\"]();\n\n        this._SpecularEnvSampler = null;\n      }\n\n      if (this._BrdfTexture) {\n        this._BrdfTexture[\"delete\"]();\n\n        this._BrdfTexture = null;\n      }\n    }\n  }]);\n  return GLTFEnvironment;\n}();\n\nexports[\"default\"] = GLTFEnvironment;\n//# sourceMappingURL=gltf-environment.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_defineProperty2","_classCallCheck2","_createClass2","_webgl","_images","GLTFEnvironment","gl","_ref","brdfLutUrl","getTexUrl","_ref$specularMipLevel","specularMipLevels","key","makeCube","_ref2","id","getTextureForFace","parameters","pixels","TextureCube","FACES","forEach","face","mipmaps","getDiffuseEnvSampler","_this","_DiffuseEnvSampler","_parameters","dir","loadImage","getSpecularEnvSampler","_this2","_SpecularEnvSampler","_parameters2","imageArray","lod","push","getBrdfTexture","_BrdfTexture","_parameters3","Texture2D","data","_delete"]
}
