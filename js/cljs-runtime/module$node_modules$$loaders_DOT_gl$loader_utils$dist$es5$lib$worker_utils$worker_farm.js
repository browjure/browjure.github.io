shadow$provide.module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_farm=function(global,require,module,exports){function onWorkerMessage(onMessage,_ref2){var worker=_ref2.worker,data=_ref2.data,resolve=_ref2.resolve;_ref2=_ref2.reject;if(onMessage)onMessage({worker,data,resolve,reject:_ref2});else switch(data.type){case "done":resolve(data.result);break;case "error":_ref2(data.message)}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator")),_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_workerPool=global(require("module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_pool"));
require=function(){function WorkerFarm(_ref){var _ref$maxConcurrency=_ref.maxConcurrency;_ref$maxConcurrency=void 0===_ref$maxConcurrency?5:_ref$maxConcurrency;var _ref$onMessage=_ref.onMessage;_ref$onMessage=void 0===_ref$onMessage?null:_ref$onMessage;var _ref$onDebug=_ref.onDebug;_ref$onDebug=void 0===_ref$onDebug?function(){}:_ref$onDebug;_ref=_ref.reuseWorkers;_ref=void 0===_ref?!0:_ref;(0,_classCallCheck2["default"])(this,WorkerFarm);this.maxConcurrency=_ref$maxConcurrency;this.onMessage=_ref$onMessage;
this.onDebug=_ref$onDebug;this.workerPools=new Map;this.reuseWorkers=_ref}(0,_createClass2["default"])(WorkerFarm,null,[{key:"isSupported",value:function(){return"undefined"!==typeof Worker}}]);(0,_createClass2["default"])(WorkerFarm,[{key:"setProps",value:function(props){"maxConcurrency"in props&&(this.maxConcurrency=props.maxConcurrency);"onDebug"in props&&(this.onDebug=props.onDebug);"reuseWorkers"in props&&(this.reuseWorkers=props.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach(function(workerPool){return workerPool.destroy()})}},
{key:"process",value:function(){var _process=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(workerSource,workerName,data){var workerPool;return _regenerator["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return workerPool=this._getWorkerPool(workerSource,workerName),_context.abrupt("return",workerPool.process(data));case 2:case "end":return _context.stop()}},_callee,this)}));return function(_x,_x2,_x3){return _process.apply(this,
arguments)}}()},{key:"_getWorkerPool",value:function(workerSource,workerName){var workerPool=this.workerPools.get(workerName);workerPool||(workerPool=new _workerPool["default"]({source:workerSource,name:workerName,onMessage:onWorkerMessage.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(workerName,workerPool));return workerPool}}]);return WorkerFarm}();exports["default"]=require}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_farm.js.map
