shadow$provide.module$node_modules$$deck_DOT_gl$core$dist$es5$utils$typed_array_manager=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=exports.TypedArrayManager=void 0;var _classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass"));
require=function(){function TypedArrayManager(props){(0,_classCallCheck2["default"])(this,TypedArrayManager);this._pool=[];this.props={overAlloc:2,poolSize:100};this.setProps(props)}(0,_createClass2["default"])(TypedArrayManager,[{key:"setProps",value:function(props){Object.assign(this.props,props)}},{key:"allocate",value:function(typedArray,count,_ref){var _ref$size=_ref.size;_ref$size=void 0===_ref$size?1:_ref$size;var _ref$padding=_ref.padding;_ref$padding=void 0===_ref$padding?0:_ref$padding;
var _ref$copy=_ref.copy;_ref$copy=void 0===_ref$copy?!1:_ref$copy;var _ref$initialize=_ref.initialize;_ref$initialize=void 0===_ref$initialize?!1:_ref$initialize;var maxCount=_ref.maxCount;_ref=_ref.type||typedArray&&typedArray.constructor||Float32Array;count=count*_ref$size+_ref$padding;if(ArrayBuffer.isView(typedArray)){if(count<=typedArray.length)return typedArray;if(count*typedArray.BYTES_PER_ELEMENT<=typedArray.buffer.byteLength)return new _ref(typedArray.buffer,0,count)}var maxSize;maxCount&&
(maxSize=maxCount*_ref$size+_ref$padding);maxSize=this._allocate(_ref,count,_ref$initialize,maxSize);typedArray&&_ref$copy?maxSize.set(typedArray):_ref$initialize||maxSize.fill(0,0,4);this._release(typedArray);return maxSize}},{key:"release",value:function(typedArray){this._release(typedArray)}},{key:"_allocate",value:function(Type,size,initialize,maxSize){size=Math.max(Math.ceil(size*this.props.overAlloc),1);size>maxSize&&(size=maxSize);maxSize=this._pool;var byteLength=Type.BYTES_PER_ELEMENT*size,
i=maxSize.findIndex(function(b){return b.byteLength>=byteLength});return 0<=i?(Type=new Type(maxSize.splice(i,1)[0],0,size),initialize&&Type.fill(0),Type):new Type(size)}},{key:"_release",value:function(typedArray){if(ArrayBuffer.isView(typedArray)){var pool=this._pool;typedArray=typedArray.buffer;var byteLength=typedArray.byteLength,i=pool.findIndex(function(b){return b.byteLength>=byteLength});0>i?pool.push(typedArray):(0<i||pool.length<this.props.poolSize)&&pool.splice(i,0,typedArray);pool.length>
this.props.poolSize&&pool.shift()}}}]);return TypedArrayManager}();exports.TypedArrayManager=require;require=new require;exports["default"]=require}
//# sourceMappingURL=module$node_modules$$deck_DOT_gl$core$dist$es5$utils$typed_array_manager.js.map
