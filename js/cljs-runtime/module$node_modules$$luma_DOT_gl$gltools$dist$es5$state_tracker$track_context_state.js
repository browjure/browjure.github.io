shadow$provide.module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$track_context_state=function(global,require,module,exports){function installGetterOverride(gl,functionName){var originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function(){var pname=0>=arguments.length?void 0:arguments[0];pname in gl.state.cache||(gl.state.cache[pname]=originalGetterFunc.apply(void 0,arguments));return gl.state.enable?gl.state.cache[pname]:originalGetterFunc.apply(void 0,arguments)};Object.defineProperty(gl[functionName],
"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){var originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function(){for(var _len=arguments.length,params=Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];_len=setter.apply(void 0,[gl.state._updateCache].concat(params));_key=_len.oldValue;_len.valueChanged&&originalSetterFunc.apply(void 0,params);return _key};Object.defineProperty(gl[functionName],"name",
{value:"".concat(functionName,"-to-cache"),configurable:!1})}function installProgramSpy(gl){var originalUseProgram=gl.useProgram.bind(gl);gl.useProgram=function(handle){gl.state.program!==handle&&(originalUseProgram(handle),gl.state.program=handle)}}function trackContextState(gl){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_options$enable=options.enable;_options$enable=void 0===_options$enable?!0:_options$enable;options=options.copyState;(0,_assert.assert)(void 0!==options);
if(!gl.state){var polyfillContext=("undefined"!==typeof global?global:window).polyfillContext;polyfillContext&&polyfillContext(gl);gl.state=new GLState(gl,{copyState:options});installProgramSpy(gl);for(var key in _webglParameterTables.GL_HOOKED_SETTERS)installSetterSpy(gl,key,_webglParameterTables.GL_HOOKED_SETTERS[key]);installGetterOverride(gl,"getParameter");installGetterOverride(gl,"isEnabled")}gl.state.enable=_options$enable;return gl}module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
Object.defineProperty(exports,"__esModule",{value:!0});exports.trackContextState=trackContextState;exports.pushContextState=function(gl){gl.state||trackContextState(gl,{copyState:!1});gl.state.push()};exports.popContextState=function(gl){(0,_assert.assert)(gl.state);gl.state.pop()};var _classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_webglParameterTables=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$webgl_parameter_tables"),
_unifiedParameterApi=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$unified_parameter_api"),_assert=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$utils$assert"),_utils=require("module$node_modules$$luma_DOT_gl$gltools$dist$es5$utils$utils"),GLState=function(){function GLState(gl){var _ref=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_ref$copyState=_ref.copyState;_ref$copyState=void 0===_ref$copyState?!1:_ref$copyState;_ref=_ref.log;_ref=void 0===
_ref?function(){}:_ref;(0,_classCallCheck2["default"])(this,GLState);this.gl=gl;this.program=null;this.stateStack=[];this.enable=!0;this.cache=_ref$copyState?(0,_unifiedParameterApi.getParameters)(gl):Object.assign({},_webglParameterTables.GL_PARAMETER_DEFAULTS);this.log=_ref;this._updateCache=this._updateCache.bind(this);Object.seal(this)}(0,_createClass2["default"])(GLState,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){(0,_assert.assert)(0<this.stateStack.length);
var oldValues=this.stateStack[this.stateStack.length-1];(0,_unifiedParameterApi.setParameters)(this.gl,oldValues);this.stateStack.pop()}},{key:"_updateCache",value:function(values){var valueChanged=!1,oldValues=0<this.stateStack.length&&this.stateStack[this.stateStack.length-1],key;for(key in values){(0,_assert.assert)(void 0!==key);var value=values[key],cached=this.cache[key];if(!(0,_utils.deepArrayEqual)(value,cached)){valueChanged=!0;var oldValue=cached;!oldValues||key in oldValues||(oldValues[key]=
cached);this.cache[key]=value}}return{valueChanged,oldValue}}}]);return GLState}()}
//# sourceMappingURL=module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$track_context_state.js.map
