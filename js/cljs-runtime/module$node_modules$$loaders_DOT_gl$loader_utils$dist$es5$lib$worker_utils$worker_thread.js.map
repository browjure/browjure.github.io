{
"version":3,
"file":"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_thread.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@loaders_DOT_gl/loader-utils/dist/es5/lib/worker-utils/worker-thread.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$loaders_DOT_gl$loader_utils$dist$es5$lib$worker_utils$worker_thread\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _getWorkerUrl = require(\"./get-worker-url\");\n\nvar _getTransferList = require(\"./get-transfer-list\");\n\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n    (0, _classCallCheck2[\"default\"])(this, WorkerThread);\n    var url = (0, _getWorkerUrl.getWorkerURL)(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  (0, _createClass2[\"default\"])(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee(data) {\n        var _this = this;\n\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = (0, _getTransferList.getTransferList)(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n  return WorkerThread;\n}();\n\nexports[\"default\"] = WorkerThread;\n//# sourceMappingURL=worker-thread.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","defaultOnMessage","_ref","resolve","data","_interopRequireDefault","Object","defineProperty","value","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_getWorkerUrl","_getTransferList","count","WorkerThread","_ref2","source","_ref2$name","name","concat","onMessage","url","getWorkerURL","worker","Worker","key","_process","mark","_callee","_this","wrap","_callee$","_context","prev","next","abrupt","Promise","reject","onmessage","_this.worker.onmessage","event","onerror","_this.worker.onerror","error","message","filename","lineno","colno","betterError","Error","console","transferList","getTransferList","postMessage","stop","process","_x","apply","arguments","destroy","terminate"]
}
