{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/modules/lights/lights.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$modules$lights$lights\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lights = void 0;\n\nvar _lights = _interopRequireDefault(require(\"./lights.glsl\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar INITIAL_MODULE_OPTIONS = {\n  lightSources: {}\n};\n\nfunction convertColor() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? [0, 0, 0] : _ref$color,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1.0 : _ref$intensity;\n\n  return color.map(function (component) {\n    return component * intensity / 255.0;\n  });\n}\n\nfunction getLightSourceUniforms(_ref2) {\n  var ambientLight = _ref2.ambientLight,\n      _ref2$pointLights = _ref2.pointLights,\n      pointLights = _ref2$pointLights === void 0 ? [] : _ref2$pointLights,\n      _ref2$directionalLigh = _ref2.directionalLights,\n      directionalLights = _ref2$directionalLigh === void 0 ? [] : _ref2$directionalLigh;\n  var lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach(function (pointLight, index) {\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].color\")] = convertColor(pointLight);\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].position\")] = pointLight.position;\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].attenuation\")] = pointLight.attenuation || [1, 0, 0];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n  directionalLights.forEach(function (directionalLight, index) {\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].color\")] = convertColor(directionalLight);\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].direction\")] = directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n  return lightSourceUniforms;\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if ('lightSources' in opts) {\n    var _ref3 = opts.lightSources || {},\n        ambientLight = _ref3.ambientLight,\n        pointLights = _ref3.pointLights,\n        directionalLights = _ref3.directionalLights;\n\n    var hasLights = ambientLight || pointLights && pointLights.length > 0 || directionalLights && directionalLights.length > 0;\n\n    if (!hasLights) {\n      return {\n        lighting_uEnabled: false\n      };\n    }\n\n    return Object.assign({}, getLightSourceUniforms({\n      ambientLight: ambientLight,\n      pointLights: pointLights,\n      directionalLights: directionalLights\n    }), {\n      lighting_uEnabled: true\n    });\n  }\n\n  if ('lights' in opts) {\n    var lightSources = {\n      pointLights: [],\n      directionalLights: []\n    };\n\n    var _iterator = _createForOfIteratorHelper(opts.lights || []),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var light = _step.value;\n\n        switch (light.type) {\n          case 'ambient':\n            lightSources.ambientLight = light;\n            break;\n\n          case 'directional':\n            lightSources.directionalLights.push(light);\n            break;\n\n          case 'point':\n            lightSources.pointLights.push(light);\n            break;\n\n          default:\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return getUniforms({\n      lightSources: lightSources\n    });\n  }\n\n  return {};\n}\n\nvar lights = {\n  name: 'lights',\n  vs: _lights[\"default\"],\n  fs: _lights[\"default\"],\n  getUniforms: getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\nexports.lights = lights;\n//# sourceMappingURL=lights.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","convertColor","_ref","arguments","undefined","_ref$color","color","_ref$intensity","intensity","map","component","getLightSourceUniforms","_ref2","ambientLight","_ref2$pointLights","pointLights","_ref2$directionalLigh","directionalLights","lightSourceUniforms","forEach","pointLight","index","concat","position","attenuation","lighting_uPointLightCount","directionalLight","direction","lighting_uDirectionalLightCount","getUniforms","opts","INITIAL_MODULE_OPTIONS","_ref3","lightSources","assign","lighting_uEnabled","_iterator","lights","_step","light","type","push","_interopRequireDefault","defineProperty","_lights","vs","fs","defines","MAX_LIGHTS"]
}
