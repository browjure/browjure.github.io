shadow$provide.module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$encoders$encode_image=function(global,require,module,exports){function _encodeImage(){_encodeImage=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(image,options){return _regenerator["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options=options||{},options.image=options.image||{},_context2.abrupt("return",_encodeImageNode?_encodeImageNode(image,{type:options.image.mimeType}):
encodeImageInBrowser(image,options));case 3:case "end":return _context2.stop()}},_callee)}));return _encodeImage.apply(this,arguments)}function encodeImageInBrowser(_x3,_x4){return _encodeImageInBrowser.apply(this,arguments)}function _encodeImageInBrowser(){_encodeImageInBrowser=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(image,options){var _options$image,mimeType,jpegQuality,_getImageSize,width,height,canvas,blob;return _regenerator["default"].wrap(function(_context3){for(;;)switch(_context3.prev=
_context3.next){case 0:return _options$image=options.image,mimeType=_options$image.mimeType,jpegQuality=_options$image.jpegQuality,_getImageSize=(0,_parsedImageApi.getImageSize)(image),width=_getImageSize.width,height=_getImageSize.height,canvas=document.createElement("canvas"),canvas.width=width,canvas.height=height,drawImageToCanvas(image,canvas),_context3.next=8,new Promise(function(resolve,reject){if(jpegQuality&&qualityParamSupported)try{canvas.toBlob(resolve,mimeType,jpegQuality);return}catch(error){qualityParamSupported=
!1}canvas.toBlob(resolve,mimeType)});case 8:return blob=_context3.sent,_context3.next=11,blob.arrayBuffer();case 11:return _context3.abrupt("return",_context3.sent);case 12:case "end":return _context3.stop()}},_callee2)}));return _encodeImageInBrowser.apply(this,arguments)}function drawImageToCanvas(image,canvas){var y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(0===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)&&0===y&&"undefined"!==typeof ImageBitmap&&image instanceof
ImageBitmap&&(y=canvas.getContext("bitmaprenderer")))return y.transferFromImageBitmap(image),canvas;y=canvas.getContext("2d");if(image.data){var clampedArray=new Uint8ClampedArray(image.data);clampedArray=new ImageData(clampedArray,image.width,image.height);y.putImageData(clampedArray,0,0);return canvas}y.drawImage(image,0,0);return canvas}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.encodeImage=function(_x,
_x2){return _encodeImage.apply(this,arguments)};var _regenerator=global(require("module$node_modules$$babel$runtime$regenerator$index")),_asyncToGenerator2=global(require("module$node_modules$$babel$runtime$helpers$asyncToGenerator"));exports=require("module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$utils$globals");var _parsedImageApi=require("module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$category_api$parsed_image_api"),_encodeImageNode=exports.global._encodeImageNode,qualityParamSupported=
!0}
//# sourceMappingURL=module$node_modules$$loaders_DOT_gl$images$dist$es5$lib$encoders$encode_image.js.map
