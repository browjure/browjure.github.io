{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$shader_module.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/shadertools/dist/es5/lib/shader-module.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$shadertools$dist$es5$lib$shader_module\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeShaderModule = normalizeShaderModule;\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _utils = require(\"../utils\");\n\nvar _propTypes = require(\"./filters/prop-types\");\n\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        uniforms = _ref.uniforms,\n        getUniforms = _ref.getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        _ref$defines = _ref.defines,\n        defines = _ref$defines === void 0 ? {} : _ref$defines,\n        _ref$inject = _ref.inject,\n        inject = _ref$inject === void 0 ? {} : _ref$inject,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n    (0, _classCallCheck2[\"default\"])(this, ShaderModule);\n    (0, _utils.assert)(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = (0, _propTypes.parsePropTypes)(uniforms);\n    }\n  }\n\n  (0, _createClass2[\"default\"])(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = this.vs || '';\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = this.fs || '';\n          break;\n\n        default:\n          (0, _utils.assert)(false);\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      if (this.getModuleUniforms) {\n        return this.getModuleUniforms(opts, uniforms);\n      }\n\n      if (this.uniforms) {\n        return this._defaultGetUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getDefines\",\n    value: function getDefines() {\n      return this.defines;\n    }\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated) {\n            log.deprecated(def.old, def[\"new\"])();\n          } else {\n            log.removed(def.old, def[\"new\"])();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions(deprecations) {\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }, {\n    key: \"_defaultGetUniforms\",\n    value: function _defaultGetUniforms() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var uniforms = {};\n      var propTypes = this.uniforms;\n\n      for (var key in propTypes) {\n        var propDef = propTypes[key];\n\n        if (key in opts && !propDef[\"private\"]) {\n          if (propDef.validate) {\n            (0, _utils.assert)(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n          }\n\n          uniforms[key] = opts[key];\n        } else {\n          uniforms[key] = propDef.value;\n        }\n      }\n\n      return uniforms;\n    }\n  }]);\n  return ShaderModule;\n}();\n\nexports[\"default\"] = ShaderModule;\n\nfunction normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      var shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (var hook in injections) {\n    var injection = injections[hook];\n    var stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection: injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","normalizeShaderModule","normalized","uniforms","getUniforms","shaderModule","ShaderModule","bind","_classCallCheck2","_createClass2","_utils","_propTypes","_ref","name","vs","fs","_ref$dependencies","dependencies","_ref$deprecations","deprecations","_ref$defines","defines","_ref$inject","inject","vertexShader","fragmentShader","assert","getModuleUniforms","_parseDeprecationDefinitions","result","hook","injection","stage","slice","order","injections","parsePropTypes","key","getModuleSource","type","VERTEX_SHADER","moduleSource","FRAGMENT_SHADER","concat","toUpperCase","replace","opts","_defaultGetUniforms","getDefines","checkDeprecations","shaderSource","log","forEach","def","regex","test","deprecated","old","removed","RegExp","arguments","length","undefined","propTypes","propDef","validate"]
}
