{
"version":3,
"file":"module$node_modules$mjolnir_DOT_js$dist$es5$utils$event_registrar.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/mjolnir_DOT_js/dist/es5/utils/event-registrar.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mjolnir_DOT_js$dist$es5$utils$event_registrar\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _eventUtils = require(\"./event-utils\");\n\nvar DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\n\nvar EventRegistrar = function () {\n  function EventRegistrar(eventManager) {\n    (0, _classCallCheck2[\"default\"])(this, EventRegistrar);\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  (0, _createClass2[\"default\"])(EventRegistrar, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return !this._active;\n    }\n  }, {\n    key: \"add\",\n    value: function add(type, handler, opts) {\n      var once = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      if (opts && ((0, _typeof2[\"default\"])(opts) !== 'object' || opts.addEventListener)) {\n        opts = {\n          srcElement: opts\n        };\n      }\n\n      opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n      var entries = handlersByElement.get(opts.srcElement);\n\n      if (!entries) {\n        entries = [];\n        handlersByElement.set(opts.srcElement, entries);\n      }\n\n      var entry = {\n        type: type,\n        handler: handler,\n        srcElement: opts.srcElement,\n        priority: opts.priority\n      };\n\n      if (once) {\n        entry.once = true;\n      }\n\n      if (passive) {\n        entry.passive = true;\n      }\n\n      handlers.push(entry);\n      this._active = this._active || !entry.passive;\n      var insertPosition = entries.length - 1;\n\n      while (insertPosition >= 0) {\n        if (entries[insertPosition].priority >= entry.priority) {\n          break;\n        }\n\n        insertPosition--;\n      }\n\n      entries.splice(insertPosition + 1, 0, entry);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(type, handler) {\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        var entry = handlers[i];\n\n        if (entry.type === type && entry.handler === handler) {\n          handlers.splice(i, 1);\n          var entries = handlersByElement.get(entry.srcElement);\n          entries.splice(entries.indexOf(entry), 1);\n\n          if (entries.length === 0) {\n            handlersByElement[\"delete\"](entry.srcElement);\n          }\n        }\n      }\n\n      this._active = handlers.some(function (entry) {\n        return !entry.passive;\n      });\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (this.isEmpty()) {\n        return;\n      }\n\n      var mjolnirEvent = this._normalizeEvent(event);\n\n      var target = event.srcEvent.target;\n\n      while (target && target !== mjolnirEvent.rootElement) {\n        this._emit(mjolnirEvent, target);\n\n        if (mjolnirEvent.handled) {\n          return;\n        }\n\n        target = target.parentNode;\n      }\n\n      this._emit(mjolnirEvent, 'root');\n    }\n  }, {\n    key: \"_emit\",\n    value: function _emit(event, srcElement) {\n      var entries = this.handlersByElement.get(srcElement);\n\n      if (entries) {\n        var immediatePropagationStopped = false;\n\n        var stopPropagation = function stopPropagation() {\n          event.handled = true;\n        };\n\n        var stopImmediatePropagation = function stopImmediatePropagation() {\n          event.handled = true;\n          immediatePropagationStopped = true;\n        };\n\n        var entriesToRemove = [];\n\n        for (var i = 0; i < entries.length; i++) {\n          var _entries$i = entries[i],\n              type = _entries$i.type,\n              handler = _entries$i.handler,\n              once = _entries$i.once;\n          handler(Object.assign({}, event, {\n            type: type,\n            stopPropagation: stopPropagation,\n            stopImmediatePropagation: stopImmediatePropagation\n          }));\n\n          if (once) {\n            entriesToRemove.push(entries[i]);\n          }\n\n          if (immediatePropagationStopped) {\n            break;\n          }\n        }\n\n        for (var _i = 0; _i < entriesToRemove.length; _i++) {\n          var _entriesToRemove$_i = entriesToRemove[_i],\n              _type = _entriesToRemove$_i.type,\n              _handler = _entriesToRemove$_i.handler;\n          this.remove(_type, _handler);\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      var rootElement = this.eventManager.element;\n      return Object.assign({}, event, (0, _eventUtils.whichButtons)(event), (0, _eventUtils.getOffsetPosition)(event, rootElement), {\n        handled: false,\n        rootElement: rootElement\n      });\n    }\n  }]);\n  return EventRegistrar;\n}();\n\nexports[\"default\"] = EventRegistrar;\n//# sourceMappingURL=event-registrar.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_typeof2","_classCallCheck2","_createClass2","_eventUtils","DEFAULT_OPTIONS","srcElement","priority","EventRegistrar","eventManager","handlers","handlersByElement","Map","handleEvent","bind","_active","key","isEmpty","add","type","handler","opts","once","arguments","length","undefined","passive","addEventListener","assign","entries","get","set","entry","push","insertPosition","splice","remove","i","indexOf","some","event","mjolnirEvent","_normalizeEvent","target","srcEvent","rootElement","_emit","handled","parentNode","immediatePropagationStopped","stopPropagation","stopImmediatePropagation","entriesToRemove","_entries$i","_i","_entriesToRemove$_i","element","whichButtons","getOffsetPosition"]
}
