{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$animation_loop.js",
"lineCount":26,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/engine/dist/es5/lib/animation-loop.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$engine$dist$es5$lib$animation_loop\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _gltools = require(\"@luma.gl/gltools\");\n\nvar _webgl = require(\"@luma.gl/webgl\");\n\nvar _env = require(\"probe.gl/env\");\n\nvar isPage = (0, _env.isBrowser)() && typeof document !== 'undefined';\nvar statIdCounter = 0;\n\nvar AnimationLoop = function () {\n  function AnimationLoop() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck2[\"default\"])(this, AnimationLoop);\n    var _props$onCreateContex = props.onCreateContext,\n        onCreateContext = _props$onCreateContex === void 0 ? function (opts) {\n      return (0, _gltools.createGLContext)(opts);\n    } : _props$onCreateContex,\n        _props$onAddHTML = props.onAddHTML,\n        onAddHTML = _props$onAddHTML === void 0 ? null : _props$onAddHTML,\n        _props$onInitialize = props.onInitialize,\n        onInitialize = _props$onInitialize === void 0 ? function () {} : _props$onInitialize,\n        _props$onRender = props.onRender,\n        onRender = _props$onRender === void 0 ? function () {} : _props$onRender,\n        _props$onFinalize = props.onFinalize,\n        onFinalize = _props$onFinalize === void 0 ? function () {} : _props$onFinalize,\n        onError = props.onError,\n        _props$gl = props.gl,\n        gl = _props$gl === void 0 ? null : _props$gl,\n        _props$glOptions = props.glOptions,\n        glOptions = _props$glOptions === void 0 ? {} : _props$glOptions,\n        _props$debug = props.debug,\n        debug = _props$debug === void 0 ? false : _props$debug,\n        _props$createFramebuf = props.createFramebuffer,\n        createFramebuffer = _props$createFramebuf === void 0 ? false : _props$createFramebuf,\n        _props$autoResizeView = props.autoResizeViewport,\n        autoResizeViewport = _props$autoResizeView === void 0 ? true : _props$autoResizeView,\n        _props$autoResizeDraw = props.autoResizeDrawingBuffer,\n        autoResizeDrawingBuffer = _props$autoResizeDraw === void 0 ? true : _props$autoResizeDraw,\n        _props$stats = props.stats,\n        stats = _props$stats === void 0 ? _webgl.lumaStats.get(\"animation-loop-\".concat(statIdCounter++)) : _props$stats;\n    var _props$useDevicePixel = props.useDevicePixels,\n        useDevicePixels = _props$useDevicePixel === void 0 ? true : _props$useDevicePixel;\n\n    if ('useDevicePixelRatio' in props) {\n      _webgl.log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext: onCreateContext,\n      onAddHTML: onAddHTML,\n      onInitialize: onInitialize,\n      onRender: onRender,\n      onFinalize: onFinalize,\n      onError: onError,\n      gl: gl,\n      glOptions: glOptions,\n      debug: debug,\n      createFramebuffer: createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport: autoResizeViewport,\n      autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n      useDevicePixels: useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  (0, _createClass2[\"default\"])(AnimationLoop, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.stop();\n\n      this._setDisplay(null);\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      (0, _webgl.assert)(typeof reason === 'string');\n      this.needsRedraw = this.needsRedraw || reason;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('autoResizeViewport' in props) {\n        this.autoResizeViewport = props.autoResizeViewport;\n      }\n\n      if ('autoResizeDrawingBuffer' in props) {\n        this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      }\n\n      if ('useDevicePixels' in props) {\n        this.useDevicePixels = props.useDevicePixels;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._running) {\n        return this;\n      }\n\n      this._running = true;\n\n      var startPromise = this._getPageLoadPromise().then(function () {\n        if (!_this._running || _this._initialized) {\n          return null;\n        }\n\n        _this._createWebGLContext(opts);\n\n        _this._createFramebuffer();\n\n        _this._startEventHandling();\n\n        _this._initializeCallbackData();\n\n        _this._updateCallbackData();\n\n        _this._resizeCanvasDrawingBuffer();\n\n        _this._resizeViewport();\n\n        _this._gpuTimeQuery = _webgl.Query.isSupported(_this.gl, ['timers']) ? new _webgl.Query(_this.gl) : null;\n        _this._initialized = true;\n        return _this.onInitialize(_this.animationProps);\n      }).then(function (appContext) {\n        if (_this._running) {\n          _this._addCallbackData(appContext || {});\n\n          if (appContext !== false) {\n            _this._startLoop();\n          }\n        }\n      });\n\n      if (this.props.onError) {\n        startPromise[\"catch\"](this.props.onError);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      if (this.isContextLost()) {\n        return this;\n      }\n\n      this._beginTimers();\n\n      this._setupFrame();\n\n      this._updateCallbackData();\n\n      this._renderFrame(this.animationProps);\n\n      this._clearNeedsRedraw();\n\n      if (this.offScreen && this.gl.commit) {\n        this.gl.commit();\n      }\n\n      if (this._resolveNextFrame) {\n        this._resolveNextFrame(this);\n\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n      }\n\n      this._endTimers();\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this._running) {\n        this._finalizeCallbackData();\n\n        (0, _webgl.cancelAnimationFrame)(this._animationFrameId);\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n        this._animationFrameId = null;\n        this._running = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"attachTimeline\",\n    value: function attachTimeline(timeline) {\n      this.timeline = timeline;\n      return this.timeline;\n    }\n  }, {\n    key: \"detachTimeline\",\n    value: function detachTimeline() {\n      this.timeline = null;\n    }\n  }, {\n    key: \"waitForRender\",\n    value: function waitForRender() {\n      var _this2 = this;\n\n      this.setNeedsRedraw('waitForRender');\n\n      if (!this._nextFramePromise) {\n        this._nextFramePromise = new Promise(function (resolve) {\n          _this2._resolveNextFrame = resolve;\n        });\n      }\n\n      return this._nextFramePromise;\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = (0, _asyncToGenerator2[\"default\"])(_regenerator[\"default\"].mark(function _callee() {\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setNeedsRedraw('toDataURL');\n                _context.next = 3;\n                return this.waitForRender();\n\n              case 3:\n                return _context.abrupt(\"return\", this.gl.canvas.toDataURL());\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n\n      return toDataURL;\n    }()\n  }, {\n    key: \"isContextLost\",\n    value: function isContextLost() {\n      return this.gl.isContextLost();\n    }\n  }, {\n    key: \"onCreateContext\",\n    value: function onCreateContext() {\n      var _this$props;\n\n      return (_this$props = this.props).onCreateContext.apply(_this$props, arguments);\n    }\n  }, {\n    key: \"onInitialize\",\n    value: function onInitialize() {\n      var _this$props2;\n\n      return (_this$props2 = this.props).onInitialize.apply(_this$props2, arguments);\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {\n      var _this$props3;\n\n      return (_this$props3 = this.props).onRender.apply(_this$props3, arguments);\n    }\n  }, {\n    key: \"onFinalize\",\n    value: function onFinalize() {\n      var _this$props4;\n\n      return (_this$props4 = this.props).onFinalize.apply(_this$props4, arguments);\n    }\n  }, {\n    key: \"getHTMLControlValue\",\n    value: function getHTMLControlValue(id) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var element = document.getElementById(id);\n      return element ? Number(element.value) : defaultValue;\n    }\n  }, {\n    key: \"setViewParameters\",\n    value: function setViewParameters() {\n      _webgl.log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n\n      return this;\n    }\n  }, {\n    key: \"_startLoop\",\n    value: function _startLoop() {\n      var _this3 = this;\n\n      var renderFrame = function renderFrame() {\n        if (!_this3._running) {\n          return;\n        }\n\n        _this3.redraw();\n\n        _this3._animationFrameId = _this3._requestAnimationFrame(renderFrame);\n      };\n\n      (0, _webgl.cancelAnimationFrame)(this._animationFrameId);\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    }\n  }, {\n    key: \"_getPageLoadPromise\",\n    value: function _getPageLoadPromise() {\n      if (!this._pageLoadPromise) {\n        this._pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n          if (isPage && document.readyState === 'complete') {\n            resolve(document);\n            return;\n          }\n\n          window.addEventListener('load', function () {\n            resolve(document);\n          });\n        }) : Promise.resolve({});\n      }\n\n      return this._pageLoadPromise;\n    }\n  }, {\n    key: \"_setDisplay\",\n    value: function _setDisplay(display) {\n      if (this.display) {\n        this.display[\"delete\"]();\n        this.display.animationLoop = null;\n      }\n\n      if (display) {\n        display.animationLoop = this;\n      }\n\n      this.display = display;\n    }\n  }, {\n    key: \"_requestAnimationFrame\",\n    value: function _requestAnimationFrame(renderFrameCallback) {\n      if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n        return;\n      }\n\n      (0, _webgl.requestAnimationFrame)(renderFrameCallback);\n    }\n  }, {\n    key: \"_renderFrame\",\n    value: function _renderFrame() {\n      if (this.display) {\n        var _this$display;\n\n        (_this$display = this.display)._renderFrame.apply(_this$display, arguments);\n\n        return;\n      }\n\n      this.onRender.apply(this, arguments);\n    }\n  }, {\n    key: \"_clearNeedsRedraw\",\n    value: function _clearNeedsRedraw() {\n      this.needsRedraw = null;\n    }\n  }, {\n    key: \"_setupFrame\",\n    value: function _setupFrame() {\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._resizeFramebuffer();\n    }\n  }, {\n    key: \"_initializeCallbackData\",\n    value: function _initializeCallbackData() {\n      this.animationProps = {\n        gl: this.gl,\n        stop: this.stop,\n        canvas: this.gl.canvas,\n        framebuffer: this.framebuffer,\n        useDevicePixels: this.useDevicePixels,\n        needsRedraw: null,\n        startTime: Date.now(),\n        engineTime: 0,\n        tick: 0,\n        tock: 0,\n        time: 0,\n        _timeline: this.timeline,\n        _loop: this,\n        _animationLoop: this,\n        _mousePosition: null\n      };\n    }\n  }, {\n    key: \"_updateCallbackData\",\n    value: function _updateCallbackData() {\n      var _this$_getSizeAndAspe = this._getSizeAndAspect(),\n          width = _this$_getSizeAndAspe.width,\n          height = _this$_getSizeAndAspe.height,\n          aspect = _this$_getSizeAndAspe.aspect;\n\n      if (width !== this.animationProps.width || height !== this.animationProps.height) {\n        this.setNeedsRedraw('drawing buffer resized');\n      }\n\n      if (aspect !== this.animationProps.aspect) {\n        this.setNeedsRedraw('drawing buffer aspect changed');\n      }\n\n      this.animationProps.width = width;\n      this.animationProps.height = height;\n      this.animationProps.aspect = aspect;\n      this.animationProps.needsRedraw = this.needsRedraw;\n      this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n      if (this.timeline) {\n        this.timeline.update(this.animationProps.engineTime);\n      }\n\n      this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n      this.animationProps.tock++;\n      this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n      this.animationProps._offScreen = this.offScreen;\n    }\n  }, {\n    key: \"_finalizeCallbackData\",\n    value: function _finalizeCallbackData() {\n      this.onFinalize(this.animationProps);\n    }\n  }, {\n    key: \"_addCallbackData\",\n    value: function _addCallbackData(appContext) {\n      if ((0, _typeof2[\"default\"])(appContext) === 'object' && appContext !== null) {\n        this.animationProps = Object.assign({}, this.animationProps, appContext);\n      }\n    }\n  }, {\n    key: \"_createWebGLContext\",\n    value: function _createWebGLContext(opts) {\n      this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n      opts = Object.assign({}, opts, this.props.glOptions);\n      this.gl = this.props.gl ? (0, _gltools.instrumentGLContext)(this.props.gl, opts) : this.onCreateContext(opts);\n\n      if (!(0, _gltools.isWebGL)(this.gl)) {\n        throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n      }\n\n      (0, _gltools.resetParameters)(this.gl);\n\n      this._createInfoDiv();\n    }\n  }, {\n    key: \"_createInfoDiv\",\n    value: function _createInfoDiv() {\n      if (this.gl.canvas && this.props.onAddHTML) {\n        var wrapperDiv = document.createElement('div');\n        document.body.appendChild(wrapperDiv);\n        wrapperDiv.style.position = 'relative';\n        var div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = '10px';\n        div.style.bottom = '10px';\n        div.style.width = '300px';\n        div.style.background = 'white';\n        wrapperDiv.appendChild(this.gl.canvas);\n        wrapperDiv.appendChild(div);\n        var html = this.props.onAddHTML(div);\n\n        if (html) {\n          div.innerHTML = html;\n        }\n      }\n    }\n  }, {\n    key: \"_getSizeAndAspect\",\n    value: function _getSizeAndAspect() {\n      var width = this.gl.drawingBufferWidth;\n      var height = this.gl.drawingBufferHeight;\n      var aspect = 1;\n      var canvas = this.gl.canvas;\n\n      if (canvas && canvas.clientHeight) {\n        aspect = canvas.clientWidth / canvas.clientHeight;\n      } else if (width > 0 && height > 0) {\n        aspect = width / height;\n      }\n\n      return {\n        width: width,\n        height: height,\n        aspect: aspect\n      };\n    }\n  }, {\n    key: \"_resizeViewport\",\n    value: function _resizeViewport() {\n      if (this.autoResizeViewport) {\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n      }\n    }\n  }, {\n    key: \"_resizeCanvasDrawingBuffer\",\n    value: function _resizeCanvasDrawingBuffer() {\n      if (this.autoResizeDrawingBuffer) {\n        (0, _gltools.resizeGLContext)(this.gl, {\n          useDevicePixels: this.useDevicePixels\n        });\n      }\n    }\n  }, {\n    key: \"_createFramebuffer\",\n    value: function _createFramebuffer() {\n      if (this.props.createFramebuffer) {\n        this.framebuffer = new _webgl.Framebuffer(this.gl);\n      }\n    }\n  }, {\n    key: \"_resizeFramebuffer\",\n    value: function _resizeFramebuffer() {\n      if (this.framebuffer) {\n        this.framebuffer.resize({\n          width: this.gl.drawingBufferWidth,\n          height: this.gl.drawingBufferHeight\n        });\n      }\n    }\n  }, {\n    key: \"_beginTimers\",\n    value: function _beginTimers() {\n      this.frameRate.timeEnd();\n      this.frameRate.timeStart();\n\n      if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n        this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n      }\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.beginTimeElapsedQuery();\n      }\n\n      this.cpuTime.timeStart();\n    }\n  }, {\n    key: \"_endTimers\",\n    value: function _endTimers() {\n      this.cpuTime.timeEnd();\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.end();\n      }\n    }\n  }, {\n    key: \"_startEventHandling\",\n    value: function _startEventHandling() {\n      var canvas = this.gl.canvas;\n\n      if (canvas) {\n        canvas.addEventListener('mousemove', this._onMousemove);\n        canvas.addEventListener('mouseleave', this._onMouseleave);\n      }\n    }\n  }, {\n    key: \"_onMousemove\",\n    value: function _onMousemove(e) {\n      this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n    }\n  }, {\n    key: \"_onMouseleave\",\n    value: function _onMouseleave(e) {\n      this.animationProps._mousePosition = null;\n    }\n  }]);\n  return AnimationLoop;\n}();\n\nexports[\"default\"] = AnimationLoop;\n//# sourceMappingURL=animation-loop.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","_typeof2","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_gltools","_webgl","_env","isPage","isBrowser","document","statIdCounter","AnimationLoop","props","arguments","length","undefined","_props$onCreateContex","onCreateContext","opts","createGLContext","_props$onAddHTML","onAddHTML","_props$onInitialize","onInitialize","_props$onRender","onRender","_props$onFinalize","onFinalize","onError","_props$gl","gl","_props$glOptions","glOptions","_props$debug","debug","_props$createFramebuf","createFramebuffer","_props$autoResizeView","autoResizeViewport","_props$autoResizeDraw","autoResizeDrawingBuffer","_props$stats","stats","lumaStats","get","concat","_props$useDevicePixel","useDevicePixels","log","deprecated","useDevicePixelRatio","timeline","needsRedraw","cpuTime","gpuTime","frameRate","_running","_initialized","_resolveNextFrame","_nextFramePromise","_animationFrameId","_cpuStartTime","setProps","start","bind","stop","_pageLoadPromise","_onMousemove","_onMouseleave","key","_delete","_setDisplay","setNeedsRedraw","reason","assert","_this","startPromise","_getPageLoadPromise","then","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","Query","isSupported","animationProps","appContext","_addCallbackData","_startLoop","redraw","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","cancelAnimationFrame","attachTimeline","detachTimeline","waitForRender","_this2","Promise","resolve","_toDataURL","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","canvas","toDataURL","apply","_this$props","_this$props2","_this$props3","_this$props4","getHTMLControlValue","id","defaultValue","element","getElementById","Number","setViewParameters","removed","_this3","_requestAnimationFrame","renderFrame","reject","readyState","window","addEventListener","display","animationLoop","renderFrameCallback","requestAnimationFrame","_this$display","_resizeFramebuffer","framebuffer","startTime","Date","now","engineTime","tick","tock","time","_timeline","_loop","_animationLoop","_mousePosition","_this$_getSizeAndAspe","_getSizeAndAspect","width","height","aspect","update","Math","floor","getTime","_offScreen","assign","OffscreenCanvas","instrumentGLContext","isWebGL","Error","resetParameters","_createInfoDiv","wrapperDiv","createElement","body","appendChild","style","position","div","left","bottom","background","html","innerHTML","drawingBufferWidth","drawingBufferHeight","clientHeight","clientWidth","viewport","resizeGLContext","Framebuffer","resize","timeEnd","timeStart","isResultAvailable","isTimerDisjoint","addTime","getTimerMilliseconds","beginTimeElapsedQuery","end","e","offsetX","offsetY"]
}
