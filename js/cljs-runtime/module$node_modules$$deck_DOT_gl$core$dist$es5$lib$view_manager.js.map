{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$view_manager.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/lib/view-manager.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$lib$view_manager\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assert = _interopRequireDefault(require(\"../utils/assert\"));\n\nvar _deepEqual = require(\"../utils/deep-equal\");\n\nvar _log = _interopRequireDefault(require(\"../utils/log\"));\n\nvar _flatten = require(\"../utils/flatten\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar ViewManager = function () {\n  function ViewManager() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck2[\"default\"])(this, ViewManager);\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  (0, _createClass2[\"default\"])(ViewManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this.controllers) {\n        if (this.controllers[key]) {\n          this.controllers[key].finalize();\n        }\n      }\n\n      this.controllers = {};\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"updateViewStates\",\n    value: function updateViewStates() {\n      for (var viewId in this.controllers) {\n        var controller = this.controllers[viewId];\n\n        if (controller) {\n          controller.updateTransition();\n        }\n      }\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      if (rect) {\n        return this._viewports.filter(function (viewport) {\n          return viewport.containsPixel(rect);\n        });\n      }\n\n      return this._viewports;\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      var viewMap = {};\n      this.views.forEach(function (view) {\n        viewMap[view.id] = view;\n      });\n      return viewMap;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(viewOrViewId) {\n      return typeof viewOrViewId === 'string' ? this.views.find(function (view) {\n        return view.id === viewOrViewId;\n      }) : viewOrViewId;\n    }\n  }, {\n    key: \"getViewState\",\n    value: function getViewState(viewId) {\n      var view = this.getView(viewId);\n      var viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n      return view ? view.filterViewState(viewState) : viewState;\n    }\n  }, {\n    key: \"getViewport\",\n    value: function getViewport(viewId) {\n      return this._viewportMap[viewId];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz, opts) {\n      var viewports = this.getViewports();\n      var pixel = {\n        x: xyz[0],\n        y: xyz[1]\n      };\n\n      for (var i = viewports.length - 1; i >= 0; --i) {\n        var viewport = viewports[i];\n\n        if (viewport.containsPixel(pixel)) {\n          var p = xyz.slice();\n          p[0] -= viewport.x;\n          p[1] -= viewport.y;\n          return viewport.unproject(p, opts);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('views' in props) {\n        this._setViews(props.views);\n      }\n\n      if ('viewState' in props) {\n        this._setViewState(props.viewState);\n      }\n\n      if ('width' in props || 'height' in props) {\n        this._setSize(props.width, props.height);\n      }\n\n      if (!this._isUpdating) {\n        this._update();\n      }\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._isUpdating = true;\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      this._isUpdating = false;\n    }\n  }, {\n    key: \"_setSize\",\n    value: function _setSize(width, height) {\n      (0, _assert[\"default\"])(Number.isFinite(width) && Number.isFinite(height));\n\n      if (width !== this.width || height !== this.height) {\n        this.width = width;\n        this.height = height;\n        this.setNeedsUpdate('Size changed');\n      }\n    }\n  }, {\n    key: \"_setViews\",\n    value: function _setViews(views) {\n      views = (0, _flatten.flatten)(views, Boolean);\n\n      var viewsChanged = this._diffViews(views, this.views);\n\n      if (viewsChanged) {\n        this.setNeedsUpdate('views changed');\n      }\n\n      this.views = views;\n    }\n  }, {\n    key: \"_setViewState\",\n    value: function _setViewState(viewState) {\n      if (viewState) {\n        var viewStateChanged = !(0, _deepEqual.deepEqual)(viewState, this.viewState);\n\n        if (viewStateChanged) {\n          this.setNeedsUpdate('viewState changed');\n        }\n\n        this.viewState = viewState;\n      } else {\n        _log[\"default\"].warn('missing `viewState` or `initialViewState`')();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(viewId, event) {\n      event.viewId = viewId;\n\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }, {\n    key: \"_createController\",\n    value: function _createController(view, props) {\n      var Controller = props.type;\n      var controller = new Controller(_objectSpread({\n        timeline: this.timeline,\n        eventManager: this._eventManager,\n        onViewStateChange: this._onViewStateChange.bind(this, props.id),\n        onStateChange: this._eventCallbacks.onInteractionStateChange,\n        makeViewport: function makeViewport(viewState) {\n          return view._getViewport(viewState, {\n            width: viewState.width,\n            height: viewState.height\n          });\n        }\n      }, props));\n      return controller;\n    }\n  }, {\n    key: \"_updateController\",\n    value: function _updateController(view, viewState, viewport, controller) {\n      var controllerProps = view.controller;\n\n      if (controllerProps) {\n        controllerProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, viewState), view.props), controllerProps), {}, {\n          id: view.id,\n          x: viewport.x,\n          y: viewport.y,\n          width: viewport.width,\n          height: viewport.height\n        });\n\n        if (controller) {\n          controller.setProps(controllerProps);\n        } else {\n          controller = this._createController(view, controllerProps);\n        }\n\n        return controller;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_rebuildViewports\",\n    value: function _rebuildViewports() {\n      var width = this.width,\n          height = this.height,\n          views = this.views;\n      var oldControllers = this.controllers;\n      this._viewports = [];\n      this.controllers = {};\n\n      for (var i = views.length; i--;) {\n        var view = views[i];\n        var viewState = this.getViewState(view);\n        var viewport = view.makeViewport({\n          width: width,\n          height: height,\n          viewState: viewState\n        });\n        this.controllers[view.id] = this._updateController(view, viewState, viewport, oldControllers[view.id]);\n\n        this._viewports.unshift(viewport);\n      }\n\n      for (var id in oldControllers) {\n        if (oldControllers[id] && !this.controllers[id]) {\n          oldControllers[id].finalize();\n        }\n      }\n\n      this._buildViewportMap();\n    }\n  }, {\n    key: \"_buildViewportMap\",\n    value: function _buildViewportMap() {\n      var _this = this;\n\n      this._viewportMap = {};\n\n      this._viewports.forEach(function (viewport) {\n        if (viewport.id) {\n          _this._viewportMap[viewport.id] = _this._viewportMap[viewport.id] || viewport;\n        }\n      });\n    }\n  }, {\n    key: \"_diffViews\",\n    value: function _diffViews(newViews, oldViews) {\n      if (newViews.length !== oldViews.length) {\n        return true;\n      }\n\n      return newViews.some(function (_, i) {\n        return !newViews[i].equals(oldViews[i]);\n      });\n    }\n  }]);\n  return ViewManager;\n}();\n\nexports[\"default\"] = ViewManager;\n//# sourceMappingURL=view-manager.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_interopRequireDefault","value","_classCallCheck2","_createClass2","_assert","_deepEqual","_log","_flatten","ViewManager","props","undefined","views","height","width","viewState","controllers","timeline","_viewports","_viewportMap","_isUpdating","_needsRedraw","_needsUpdate","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","seal","setProps","finalize","needsRedraw","redraw","opts","clearRedrawFlags","setNeedsUpdate","reason","updateViewStates","viewId","controller","updateTransition","getViewports","rect","viewport","containsPixel","getViews","viewMap","view","id","getView","viewOrViewId","find","getViewState","getViewStateId","filterViewState","getViewport","unproject","xyz","viewports","pixel","x","y","p","slice","_setViews","_setViewState","_setSize","_update","_rebuildViewports","Number","isFinite","flatten","Boolean","viewsChanged","_diffViews","viewStateChanged","deepEqual","warn","_onViewStateChange","event","_createController","type","bind","onStateChange","makeViewport","_getViewport","_updateController","controllerProps","oldControllers","unshift","_buildViewportMap","_this","newViews","oldViews","some","_","equals"]
}
