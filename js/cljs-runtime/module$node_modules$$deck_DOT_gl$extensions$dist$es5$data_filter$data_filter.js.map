{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$extensions$dist$es5$data_filter$data_filter.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/extensions/dist/es5/data-filter/data-filter.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$extensions$dist$es5$data_filter$data_filter\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _core = require(\"@deck.gl/core\");\n\nvar _shaderModule = require(\"./shader-module\");\n\nvar aggregator = _interopRequireWildcard(require(\"./aggregator\"));\n\nvar _core2 = require(\"@luma.gl/core\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar defaultProps = {\n  getFilterValue: {\n    type: 'accessor',\n    value: 0\n  },\n  onFilteredItemsChange: {\n    type: 'function',\n    value: null,\n    compare: false\n  },\n  filterEnabled: true,\n  filterRange: [-1, 1],\n  filterSoftRange: null,\n  filterTransformSize: true,\n  filterTransformColor: true\n};\nvar DATA_TYPE_FROM_SIZE = {\n  1: 'float',\n  2: 'vec2',\n  3: 'vec3',\n  4: 'vec4'\n};\n\nvar DataFilterExtension = function (_LayerExtension) {\n  (0, _inherits2[\"default\"])(DataFilterExtension, _LayerExtension);\n\n  var _super = _createSuper(DataFilterExtension);\n\n  function DataFilterExtension() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$filterSize = _ref.filterSize,\n        filterSize = _ref$filterSize === void 0 ? 1 : _ref$filterSize,\n        _ref$fp = _ref.fp64,\n        fp64 = _ref$fp === void 0 ? false : _ref$fp,\n        _ref$countItems = _ref.countItems,\n        countItems = _ref$countItems === void 0 ? false : _ref$countItems;\n\n    (0, _classCallCheck2[\"default\"])(this, DataFilterExtension);\n\n    if (!DATA_TYPE_FROM_SIZE[filterSize]) {\n      throw new Error('filterSize out of range');\n    }\n\n    return _super.call(this, {\n      filterSize: filterSize,\n      fp64: fp64,\n      countItems: countItems\n    });\n  }\n\n  (0, _createClass2[\"default\"])(DataFilterExtension, [{\n    key: \"getShaders\",\n    value: function getShaders(extension) {\n      var _extension$opts = extension.opts,\n          filterSize = _extension$opts.filterSize,\n          fp64 = _extension$opts.fp64;\n      return {\n        modules: [fp64 ? _shaderModule.shaderModule64 : _shaderModule.shaderModule],\n        defines: {\n          DATAFILTER_TYPE: DATA_TYPE_FROM_SIZE[filterSize],\n          DATAFILTER_DOUBLE: Boolean(fp64)\n        }\n      };\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState(context, extension) {\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.add({\n          filterValues: {\n            size: extension.opts.filterSize,\n            type: extension.opts.fp64 ? 5130 : 5126,\n            accessor: 'getFilterValue',\n            shaderAttributes: {\n              filterValues: {\n                divisor: 0\n              },\n              instanceFilterValues: {\n                divisor: 1\n              }\n            }\n          }\n        });\n      }\n\n      var gl = this.context.gl;\n\n      if (attributeManager && extension.opts.countItems) {\n        var useFloatTarget = aggregator.supportsFloatTarget(gl);\n        attributeManager.add({\n          filterIndices: {\n            size: useFloatTarget ? 1 : 2,\n            vertexOffset: 1,\n            type: 5121,\n            normalized: true,\n            accessor: function accessor(object, _ref2) {\n              var index = _ref2.index;\n              var i = object && object.__source ? object.__source.index : index;\n              return useFloatTarget ? (i + 1) % 255 : [(i + 1) % 255, Math.floor(i / 255) % 255];\n            },\n            shaderAttributes: {\n              filterPrevIndices: {\n                vertexOffset: 0\n              },\n              filterIndices: {\n                vertexOffset: 1\n              }\n            }\n          }\n        });\n        var filterFBO = aggregator.getFramebuffer(gl, useFloatTarget);\n        var filterModel = aggregator.getModel(gl, extension.getShaders(extension), useFloatTarget);\n        this.setState({\n          filterFBO: filterFBO,\n          filterModel: filterModel\n        });\n      }\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref3) {\n      var props = _ref3.props,\n          oldProps = _ref3.oldProps;\n\n      if (this.state.filterModel) {\n        var attributeManager = this.getAttributeManager();\n        var filterNeedsUpdate = attributeManager.attributes.filterValues.needsUpdate() || props.filterEnabled !== oldProps.filterEnabled || props.filterRange !== oldProps.filterRange || props.filterSoftRange !== oldProps.filterSoftRange;\n\n        if (filterNeedsUpdate) {\n          this.setState({\n            filterNeedsUpdate: filterNeedsUpdate\n          });\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(params, extension) {\n      var _this$state = this.state,\n          filterFBO = _this$state.filterFBO,\n          filterModel = _this$state.filterModel,\n          filterNeedsUpdate = _this$state.filterNeedsUpdate;\n      var onFilteredItemsChange = this.props.onFilteredItemsChange;\n\n      if (filterNeedsUpdate && onFilteredItemsChange && filterModel) {\n        var _this$getAttributeMan = this.getAttributeManager(),\n            _this$getAttributeMan2 = _this$getAttributeMan.attributes,\n            filterValues = _this$getAttributeMan2.filterValues,\n            filterIndices = _this$getAttributeMan2.filterIndices;\n\n        filterModel.setVertexCount(this.getNumInstances());\n        var gl = this.context.gl;\n        (0, _core2.clear)(gl, {\n          framebuffer: filterFBO,\n          color: [0, 0, 0, 0]\n        });\n        filterModel.updateModuleSettings(params.moduleParameters).setAttributes(_objectSpread(_objectSpread({}, filterValues.getShaderAttributes()), filterIndices && filterIndices.getShaderAttributes())).draw({\n          framebuffer: filterFBO,\n          parameters: _objectSpread(_objectSpread({}, aggregator.parameters), {}, {\n            viewport: [0, 0, filterFBO.width, filterFBO.height]\n          })\n        });\n        var color = (0, _core2.readPixelsToArray)(filterFBO);\n        var count = 0;\n\n        for (var i = 0; i < color.length; i++) {\n          count += color[i];\n        }\n\n        onFilteredItemsChange({\n          id: this.id,\n          count: count\n        });\n        this.state.filterNeedsUpdate = false;\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      var _this$state2 = this.state,\n          filterFBO = _this$state2.filterFBO,\n          filterModel = _this$state2.filterModel;\n\n      if (filterFBO) {\n        filterFBO.color[\"delete\"]();\n        filterFBO[\"delete\"]();\n        filterModel[\"delete\"]();\n      }\n    }\n  }]);\n  return DataFilterExtension;\n}(_core.LayerExtension);\n\nexports[\"default\"] = DataFilterExtension;\nDataFilterExtension.extensionName = 'DataFilterExtension';\nDataFilterExtension.defaultProps = defaultProps;\n//# sourceMappingURL=data-filter.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","NewTarget","constructor","result","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Date","prototype","toString","call","e","_interopRequireWildcard","_interopRequireDefault","value","_classCallCheck2","_createClass2","_inherits2","_core","_shaderModule","aggregator","_core2","DATA_TYPE_FROM_SIZE","DataFilterExtension","_LayerExtension","_ref","undefined","_ref$filterSize","filterSize","_ref$fp","fp64","_ref$countItems","countItems","Error","_super","getShaders","extension","_extension$opts","opts","modules","shaderModule64","shaderModule","defines","DATAFILTER_TYPE","DATAFILTER_DOUBLE","initializeState","context","attributeManager","getAttributeManager","add","filterValues","size","type","accessor","shaderAttributes","divisor","instanceFilterValues","gl","useFloatTarget","supportsFloatTarget","filterIndices","vertexOffset","normalized","_ref2","index","__source","Math","floor","filterPrevIndices","filterFBO","getFramebuffer","filterModel","getModel","setState","updateState","_ref3","props","oldProps","state","filterNeedsUpdate","attributes","needsUpdate","filterEnabled","filterRange","filterSoftRange","draw","params","_this$state","onFilteredItemsChange","_this$getAttributeMan2","_this$getAttributeMan","setVertexCount","getNumInstances","clear","framebuffer","color","updateModuleSettings","moduleParameters","setAttributes","getShaderAttributes","parameters","viewport","width","height","readPixelsToArray","count","id","finalizeState","_this$state2","LayerExtension","extensionName","defaultProps","getFilterValue","compare","filterTransformSize","filterTransformColor"]
}
