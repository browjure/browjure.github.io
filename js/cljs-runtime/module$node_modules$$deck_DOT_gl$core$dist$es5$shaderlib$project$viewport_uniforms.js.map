{
"version":3,
"file":"module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$viewport_uniforms.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/@deck_DOT_gl/core/dist/es5/shaderlib/project/viewport-uniforms.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$deck_DOT_gl$core$dist$es5$shaderlib$project$viewport_uniforms\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getOffsetOrigin = getOffsetOrigin;\nexports.getUniformsFromViewport = getUniformsFromViewport;\n\nvar mat4 = _interopRequireWildcard(require(\"gl-matrix/mat4\"));\n\nvar vec4 = _interopRequireWildcard(require(\"gl-matrix/vec4\"));\n\nvar _constants = require(\"../../lib/constants\");\n\nvar _memoize = _interopRequireDefault(require(\"../../utils/memoize\"));\n\nvar _assert = _interopRequireDefault(require(\"../../utils/assert\"));\n\nvar ZERO_VECTOR = [0, 0, 0, 0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nvar DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nvar DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nvar getMemoizedViewportUniforms = (0, _memoize[\"default\"])(calculateViewportUniforms);\n\nfunction getOffsetOrigin(viewport, coordinateSystem) {\n  var coordinateOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_COORDINATE_ORIGIN;\n  var shaderCoordinateOrigin = coordinateOrigin;\n  var geospatialOrigin;\n  var offsetMode = true;\n\n  if (coordinateSystem === _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === _constants.COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case _constants.PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === _constants.COORDINATE_SYSTEM.LNGLAT || coordinateSystem === _constants.COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case _constants.PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === _constants.COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === _constants.COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case _constants.PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case _constants.PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin: geospatialOrigin,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    offsetMode: offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  var viewMatrixUncentered = viewport.viewMatrixUncentered,\n      projectionMatrix = viewport.projectionMatrix;\n  var viewMatrix = viewport.viewMatrix,\n      viewProjectionMatrix = viewport.viewProjectionMatrix;\n  var projectionCenter = ZERO_VECTOR;\n  var cameraPosCommon = viewport.cameraPosition;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix: viewMatrix,\n    viewProjectionMatrix: viewProjectionMatrix,\n    projectionCenter: projectionCenter,\n    cameraPosCommon: cameraPosCommon,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    geospatialOrigin: geospatialOrigin\n  };\n}\n\nfunction getUniformsFromViewport() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      viewport = _ref.viewport,\n      _ref$devicePixelRatio = _ref.devicePixelRatio,\n      devicePixelRatio = _ref$devicePixelRatio === void 0 ? 1 : _ref$devicePixelRatio,\n      _ref$modelMatrix = _ref.modelMatrix,\n      modelMatrix = _ref$modelMatrix === void 0 ? null : _ref$modelMatrix,\n      _ref$coordinateSystem = _ref.coordinateSystem,\n      coordinateSystem = _ref$coordinateSystem === void 0 ? _constants.COORDINATE_SYSTEM.DEFAULT : _ref$coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      _ref$autoWrapLongitud = _ref.autoWrapLongitude,\n      autoWrapLongitude = _ref$autoWrapLongitud === void 0 ? false : _ref$autoWrapLongitud,\n      projectionMode = _ref.projectionMode,\n      positionOrigin = _ref.positionOrigin;\n\n  (0, _assert[\"default\"])(viewport);\n\n  if (coordinateSystem === _constants.COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? _constants.COORDINATE_SYSTEM.LNGLAT : _constants.COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  var uniforms = getMemoizedViewportUniforms({\n    viewport: viewport,\n    devicePixelRatio: devicePixelRatio,\n    coordinateSystem: coordinateSystem,\n    coordinateOrigin: coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms(_ref2) {\n  var viewport = _ref2.viewport,\n      devicePixelRatio = _ref2.devicePixelRatio,\n      coordinateSystem = _ref2.coordinateSystem,\n      coordinateOrigin = _ref2.coordinateOrigin;\n\n  var _calculateMatrixAndOf = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin),\n      projectionCenter = _calculateMatrixAndOf.projectionCenter,\n      viewProjectionMatrix = _calculateMatrixAndOf.viewProjectionMatrix,\n      cameraPosCommon = _calculateMatrixAndOf.cameraPosCommon,\n      shaderCoordinateOrigin = _calculateMatrixAndOf.shaderCoordinateOrigin,\n      geospatialOrigin = _calculateMatrixAndOf.geospatialOrigin;\n\n  var distanceScales = viewport.getDistanceScales();\n  var viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  var uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: viewport.focalDistance || 1,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    var distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case _constants.COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case _constants.COORDINATE_SYSTEM.LNGLAT:\n      case _constants.COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case _constants.COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","getOffsetOrigin","viewport","coordinateSystem","coordinateOrigin","arguments","length","undefined","DEFAULT_COORDINATE_ORIGIN","shaderCoordinateOrigin","offsetMode","geospatialOrigin","_constants","COORDINATE_SYSTEM","LNGLAT_OFFSETS","METER_OFFSETS","isGeospatial","Math","fround","longitude","latitude","projectionMode","PROJECTION_MODE","WEB_MERCATOR","LNGLAT","CARTESIAN","WEB_MERCATOR_AUTO_OFFSET","center","unprojectPosition","IDENTITY","position","map","GLOBE","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","value","getUniformsFromViewport","_ref","_ref$devicePixelRatio","devicePixelRatio","_ref$modelMatrix","modelMatrix","_ref$coordinateSystem","DEFAULT","_ref$autoWrapLongitud","autoWrapLongitude","_assert","uniforms","getMemoizedViewportUniforms","project_uWrapLongitude","project_uModelMatrix","IDENTITY_MATRIX","mat4","vec4","_memoize","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","DEFAULT_PIXELS_PER_UNIT2","calculateViewportUniforms","_ref2","viewMatrixUncentered","projectionMatrix","viewMatrix","viewProjectionMatrix","projectionCenter","cameraPosCommon","cameraPosition","_getOffsetOrigin","positionCommonSpace","projectPosition","transformMat4","multiply","distanceScales","getDistanceScales","project_uCoordinateSystem","project_uProjectionMode","project_uCoordinateOrigin","project_uCenter","project_uViewportSize","viewportSize","width","height","project_uDevicePixelRatio","project_uFocalDistance","focalDistance","project_uCommonUnitsPerMeter","unitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","scale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2"]
}
