{
"version":3,
"file":"module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$track_context_state.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@luma_DOT_gl/gltools/dist/es5/state-tracker/track-context-state.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$luma_DOT_gl$gltools$dist$es5$state_tracker$track_context_state\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.trackContextState = trackContextState;\nexports.pushContextState = pushContextState;\nexports.popContextState = popContextState;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _webglParameterTables = require(\"./webgl-parameter-tables\");\n\nvar _unifiedParameterApi = require(\"./unified-parameter-api\");\n\nvar _assert = require(\"../utils/assert\");\n\nvar _utils = require(\"../utils/utils\");\n\nfunction installGetterOverride(gl, functionName) {\n  var originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    var pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc.apply(void 0, arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc.apply(void 0, arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  var originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    var _setter = setter.apply(void 0, [gl.state._updateCache].concat(params)),\n        valueChanged = _setter.valueChanged,\n        oldValue = _setter.oldValue;\n\n    if (valueChanged) {\n      originalSetterFunc.apply(void 0, params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  var originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nvar GLState = function () {\n  function GLState(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$copyState = _ref.copyState,\n        copyState = _ref$copyState === void 0 ? false : _ref$copyState,\n        _ref$log = _ref.log,\n        log = _ref$log === void 0 ? function () {} : _ref$log;\n\n    (0, _classCallCheck2[\"default\"])(this, GLState);\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? (0, _unifiedParameterApi.getParameters)(gl) : Object.assign({}, _webglParameterTables.GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  (0, _createClass2[\"default\"])(GLState, [{\n    key: \"push\",\n    value: function push() {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.stateStack.push({});\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      (0, _assert.assert)(this.stateStack.length > 0);\n      var oldValues = this.stateStack[this.stateStack.length - 1];\n      (0, _unifiedParameterApi.setParameters)(this.gl, oldValues);\n      this.stateStack.pop();\n    }\n  }, {\n    key: \"_updateCache\",\n    value: function _updateCache(values) {\n      var valueChanged = false;\n      var oldValue;\n      var oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n      for (var key in values) {\n        (0, _assert.assert)(key !== undefined);\n        var value = values[key];\n        var cached = this.cache[key];\n\n        if (!(0, _utils.deepArrayEqual)(value, cached)) {\n          valueChanged = true;\n          oldValue = cached;\n\n          if (oldValues && !(key in oldValues)) {\n            oldValues[key] = cached;\n          }\n\n          this.cache[key] = value;\n        }\n      }\n\n      return {\n        valueChanged: valueChanged,\n        oldValue: oldValue\n      };\n    }\n  }]);\n  return GLState;\n}();\n\nfunction trackContextState(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$enable = options.enable,\n      enable = _options$enable === void 0 ? true : _options$enable,\n      copyState = options.copyState;\n  (0, _assert.assert)(copyState !== undefined);\n\n  if (!gl.state) {\n    var global_ = typeof global !== 'undefined' ? global : window;\n    var polyfillContext = global_.polyfillContext;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState: copyState\n    });\n    installProgramSpy(gl);\n\n    for (var key in _webglParameterTables.GL_HOOKED_SETTERS) {\n      var setter = _webglParameterTables.GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\n\nfunction pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\n\nfunction popContextState(gl) {\n  (0, _assert.assert)(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","installGetterOverride","gl","functionName","originalGetterFunc","bind","pname","arguments","length","undefined","state","cache","apply","enable","Object","defineProperty","value","concat","configurable","installSetterSpy","setter","originalSetterFunc","_len","params","Array","_key","_setter","_updateCache","oldValue","valueChanged","installProgramSpy","originalUseProgram","useProgram","gl.useProgram","handle","program","trackContextState","options","_options$enable","copyState","_assert","assert","polyfillContext","global_","window","GLState","key","_webglParameterTables","GL_HOOKED_SETTERS","_interopRequireDefault","pushContextState","push","popContextState","pop","_classCallCheck2","_createClass2","_unifiedParameterApi","_utils","_ref","_ref$copyState","_ref$log","log","stateStack","getParameters","assign","GL_PARAMETER_DEFAULTS","seal","oldValues","setParameters","values","cached","deepArrayEqual"]
}
