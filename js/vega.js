SHADOW_ENV.evalLoad("module$node_modules$base64_js$index.js", true , "shadow$provide.module$node_modules$base64_js$index\x3dfunction(global,require,module,exports){function getLens(b64){var len\x3db64.length;if(0\x3clen%4)throw Error(\x22Invalid string. Length must be a multiple of 4\x22);b64\x3db64.indexOf(\x22\\x3d\x22);-1\x3d\x3d\x3db64\x26\x26(b64\x3dlen);return[b64,b64\x3d\x3d\x3dlen?0:4-b64%4]}function encodeChunk(uint8,start,end){for(var output\x3d[],i\x3dstart;i\x3cend;i+\x3d3)start\x3d(uint8[i]\x3c\x3c16\x2616711680)+(uint8[i+1]\x3c\x3c8\x2665280)+(uint8[i+2]\x26255),output.push(lookup[start\x3e\x3e18\x2663]+lookup[start\x3e\x3e12\x2663]+lookup[start\x3e\x3e6\x2663]+lookup[start\x26\n63]);return output.join(\x22\x22)}exports.byteLength\x3dfunction(b64){b64\x3dgetLens(b64);var placeHoldersLen\x3db64[1];return 3*(b64[0]+placeHoldersLen)/4-placeHoldersLen};exports.toByteArray\x3dfunction(b64){var lens\x3dgetLens(b64);var tmp\x3dlens[0];lens\x3dlens[1];var arr\x3dnew Arr(3*(tmp+lens)/4-lens),curByte\x3d0,len\x3d0\x3clens?tmp-4:tmp,i;for(i\x3d0;i\x3clen;i+\x3d4)tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c18|revLookup[b64.charCodeAt(i+1)]\x3c\x3c12|revLookup[b64.charCodeAt(i+2)]\x3c\x3c6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]\x3dtmp\x3e\x3e16\x26255,arr[curByte++]\x3d\ntmp\x3e\x3e8\x26255,arr[curByte++]\x3dtmp\x26255;2\x3d\x3d\x3dlens\x26\x26(tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c2|revLookup[b64.charCodeAt(i+1)]\x3e\x3e4,arr[curByte++]\x3dtmp\x26255);1\x3d\x3d\x3dlens\x26\x26(tmp\x3drevLookup[b64.charCodeAt(i)]\x3c\x3c10|revLookup[b64.charCodeAt(i+1)]\x3c\x3c4|revLookup[b64.charCodeAt(i+2)]\x3e\x3e2,arr[curByte++]\x3dtmp\x3e\x3e8\x26255,arr[curByte++]\x3dtmp\x26255);return arr};exports.fromByteArray\x3dfunction(uint8){for(var len\x3duint8.length,extraBytes\x3dlen%3,parts\x3d[],i\x3d0,len2\x3dlen-extraBytes;i\x3clen2;i+\x3d16383)parts.push(encodeChunk(uint8,i,i+16383\x3elen2?len2:i+16383));\n1\x3d\x3d\x3dextraBytes?(uint8\x3duint8[len-1],parts.push(lookup[uint8\x3e\x3e2]+lookup[uint8\x3c\x3c4\x2663]+\x22\\x3d\\x3d\x22)):2\x3d\x3d\x3dextraBytes\x26\x26(uint8\x3d(uint8[len-2]\x3c\x3c8)+uint8[len-1],parts.push(lookup[uint8\x3e\x3e10]+lookup[uint8\x3e\x3e4\x2663]+lookup[uint8\x3c\x3c2\x2663]+\x22\\x3d\x22));return parts.join(\x22\x22)};var lookup\x3d[],revLookup\x3d[],Arr\x3d\x22undefined\x22!\x3d\x3dtypeof Uint8Array?Uint8Array:Array;for(global\x3d0;64\x3eglobal;++global)lookup[global]\x3d\x22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x22[global],revLookup[\x22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x22.charCodeAt(global)]\x3d\nglobal;revLookup[45]\x3d62;revLookup[95]\x3d63}");
SHADOW_ENV.evalLoad("module$node_modules$isarray$index.js", true , "shadow$provide.module$node_modules$isarray$index\x3dfunction(global,require,module,exports){var toString\x3d{}.toString;module.exports\x3dArray.isArray||function(arr){return\x22[object Array]\x22\x3d\x3dtoString.call(arr)}}");
SHADOW_ENV.evalLoad("module$node_modules$buffer$index.js", true , "shadow$provide.module$node_modules$buffer$index\x3dfunction(global,require,module,exports){function typedArraySupport(){try{var arr\x3dnew Uint8Array(1);arr.__proto__\x3d{__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42\x3d\x3d\x3darr.foo()\x26\x26\x22function\x22\x3d\x3d\x3dtypeof arr.subarray\x26\x260\x3d\x3d\x3darr.subarray(1,1).byteLength}catch(e){return!1}}function createBuffer(that,length){if((Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823)\x3clength)throw new RangeError(\x22Invalid typed array length\x22);Buffer.TYPED_ARRAY_SUPPORT?\n(that\x3dnew Uint8Array(length),that.__proto__\x3dBuffer.prototype):(null\x3d\x3d\x3dthat\x26\x26(that\x3dnew Buffer(length)),that.length\x3dlength);return that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if(\x22number\x22\x3d\x3d\x3dtypeof arg){if(\x22string\x22\x3d\x3d\x3dtypeof encodingOrOffset)throw Error(\x22If encoding is specified then the first argument must be a string\x22);return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}\nfunction from(that,value,encodingOrOffset,length){if(\x22number\x22\x3d\x3d\x3dtypeof value)throw new TypeError(\x27\x22value\x22 argument must not be a number\x27);if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26value instanceof ArrayBuffer){value.byteLength;if(0\x3eencodingOrOffset||value.byteLength\x3cencodingOrOffset)throw new RangeError(\x22\x27offset\x27 is out of bounds\x22);if(value.byteLength\x3cencodingOrOffset+(length||0))throw new RangeError(\x22\x27length\x27 is out of bounds\x22);value\x3dvoid 0\x3d\x3d\x3dencodingOrOffset\x26\x26void 0\x3d\x3d\x3dlength?new Uint8Array(value):void 0\x3d\x3d\x3d\nlength?new Uint8Array(value,encodingOrOffset):new Uint8Array(value,encodingOrOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that\x3dvalue,that.__proto__\x3dBuffer.prototype):that\x3dfromArrayLike(that,value);return that}if(\x22string\x22\x3d\x3d\x3dtypeof value){length\x3dthat;that\x3dencodingOrOffset;if(\x22string\x22!\x3d\x3dtypeof that||\x22\x22\x3d\x3d\x3dthat)that\x3d\x22utf8\x22;if(!Buffer.isEncoding(that))throw new TypeError(\x27\x22encoding\x22 must be a valid string encoding\x27);encodingOrOffset\x3dbyteLength$jscomp$0(value,that)|0;length\x3dcreateBuffer(length,encodingOrOffset);\nvalue\x3dlength.write(value,that);value!\x3d\x3dencodingOrOffset\x26\x26(length\x3dlength.slice(0,value));return length}return fromObject(that,value)}function assertSize(size){if(\x22number\x22!\x3d\x3dtypeof size)throw new TypeError(\x27\x22size\x22 argument must be a number\x27);if(0\x3esize)throw new RangeError(\x27\x22size\x22 argument must not be negative\x27);}function allocUnsafe(that,size){assertSize(size);that\x3dcreateBuffer(that,0\x3esize?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT)for(var i\x3d0;i\x3csize;++i)that[i]\x3d0;return that}function fromArrayLike(that,\narray){var length\x3d0\x3earray.length?0:checked(array.length)|0;that\x3dcreateBuffer(that,length);for(var i\x3d0;i\x3clength;i+\x3d1)that[i]\x3darray[i]\x26255;return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len\x3dchecked(obj.length)|0;that\x3dcreateBuffer(that,len);if(0\x3d\x3d\x3dthat.length)return that;obj.copy(that,0,0,len);return that}if(obj){if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26obj.buffer instanceof ArrayBuffer||\x22length\x22in obj)return(len\x3d\x22number\x22!\x3d\x3dtypeof obj.length)||(len\x3dobj.length,len\x3dlen!\x3d\x3dlen),len?createBuffer(that,\n0):fromArrayLike(that,obj);if(\x22Buffer\x22\x3d\x3d\x3dobj.type\x26\x26isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError(\x22First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\x22);}function checked(length){if(length\x3e\x3d(Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError(\x22Attempt to allocate Buffer larger than maximum size: 0x\x22+(Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+\x22 bytes\x22);return length|0}function byteLength$jscomp$0(string,\nencoding){if(Buffer.isBuffer(string))return string.length;if(\x22undefined\x22!\x3d\x3dtypeof ArrayBuffer\x26\x26\x22function\x22\x3d\x3d\x3dtypeof ArrayBuffer.isView\x26\x26(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;\x22string\x22!\x3d\x3dtypeof string\x26\x26(string\x3d\x22\x22+string);var len\x3dstring.length;if(0\x3d\x3d\x3dlen)return 0;for(var loweredCase\x3d!1;;)switch(encoding){case \x22ascii\x22:case \x22latin1\x22:case \x22binary\x22:return len;case \x22utf8\x22:case \x22utf-8\x22:case void 0:return utf8ToBytes(string).length;case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:return 2*\nlen;case \x22hex\x22:return len\x3e\x3e\x3e1;case \x22base64\x22:return base64.toByteArray(base64clean(string)).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding\x3d(\x22\x22+encoding).toLowerCase();loweredCase\x3d!0}}function slowToString(encoding,start,end){var loweredCase\x3d!1;if(void 0\x3d\x3d\x3dstart||0\x3estart)start\x3d0;if(start\x3ethis.length)return\x22\x22;if(void 0\x3d\x3d\x3dend||end\x3ethis.length)end\x3dthis.length;if(0\x3e\x3dend)return\x22\x22;end\x3e\x3e\x3e\x3d0;start\x3e\x3e\x3e\x3d0;if(end\x3c\x3dstart)return\x22\x22;for(encoding||(encoding\x3d\x22utf8\x22);;)switch(encoding){case \x22hex\x22:encoding\x3d\nstart;start\x3dend;end\x3dthis.length;if(!encoding||0\x3eencoding)encoding\x3d0;if(!start||0\x3estart||start\x3eend)start\x3dend;loweredCase\x3d\x22\x22;for(end\x3dencoding;end\x3cstart;++end)encoding\x3dloweredCase,loweredCase\x3dthis[end],loweredCase\x3d16\x3eloweredCase?\x220\x22+loweredCase.toString(16):loweredCase.toString(16),loweredCase\x3dencoding+loweredCase;return loweredCase;case \x22utf8\x22:case \x22utf-8\x22:return utf8Slice(this,start,end);case \x22ascii\x22:encoding\x3d\x22\x22;for(end\x3dMath.min(this.length,end);start\x3cend;++start)encoding+\x3dString.fromCharCode(this[start]\x26\n127);return encoding;case \x22latin1\x22:case \x22binary\x22:encoding\x3d\x22\x22;for(end\x3dMath.min(this.length,end);start\x3cend;++start)encoding+\x3dString.fromCharCode(this[start]);return encoding;case \x22base64\x22:return start\x3d0\x3d\x3d\x3dstart\x26\x26end\x3d\x3d\x3dthis.length?base64.fromByteArray(this):base64.fromByteArray(this.slice(start,end)),start;case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:start\x3dthis.slice(start,end);end\x3d\x22\x22;for(encoding\x3d0;encoding\x3cstart.length;encoding+\x3d2)end+\x3dString.fromCharCode(start[encoding]+256*start[encoding+\n1]);return end;default:if(loweredCase)throw new TypeError(\x22Unknown encoding: \x22+encoding);encoding\x3d(encoding+\x22\x22).toLowerCase();loweredCase\x3d!0}}function swap(b,n,m){var i\x3db[n];b[n]\x3db[m];b[m]\x3di}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0\x3d\x3d\x3dbuffer.length)return-1;\x22string\x22\x3d\x3d\x3dtypeof byteOffset?(encoding\x3dbyteOffset,byteOffset\x3d0):2147483647\x3cbyteOffset?byteOffset\x3d2147483647:-2147483648\x3ebyteOffset\x26\x26(byteOffset\x3d-2147483648);byteOffset\x3d+byteOffset;isNaN(byteOffset)\x26\x26(byteOffset\x3ddir?\n0:buffer.length-1);0\x3ebyteOffset\x26\x26(byteOffset\x3dbuffer.length+byteOffset);if(byteOffset\x3e\x3dbuffer.length){if(dir)return-1;byteOffset\x3dbuffer.length-1}else if(0\x3ebyteOffset)if(dir)byteOffset\x3d0;else return-1;\x22string\x22\x3d\x3d\x3dtypeof val\x26\x26(val\x3dBuffer.from(val,encoding));if(Buffer.isBuffer(val))return 0\x3d\x3d\x3dval.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if(\x22number\x22\x3d\x3d\x3dtypeof val)return val\x26\x3d255,Buffer.TYPED_ARRAY_SUPPORT\x26\x26\x22function\x22\x3d\x3d\x3dtypeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,\nval,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError(\x22val must be string, number or Buffer\x22);}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return 1\x3d\x3d\x3dindexSize?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize\x3d1,arrLength\x3darr.length,valLength\x3dval.length;if(void 0!\x3d\x3dencoding\x26\x26(encoding\x3dString(encoding).toLowerCase(),\x22ucs2\x22\x3d\x3d\x3dencoding||\x22ucs-2\x22\x3d\x3d\x3dencoding||\x22utf16le\x22\x3d\x3d\x3dencoding||\n\x22utf-16le\x22\x3d\x3d\x3dencoding)){if(2\x3earr.length||2\x3eval.length)return-1;indexSize\x3d2;arrLength/\x3d2;valLength/\x3d2;byteOffset/\x3d2}if(dir)for(encoding\x3d-1;byteOffset\x3carrLength;byteOffset++)if(read(arr,byteOffset)\x3d\x3d\x3dread(val,-1\x3d\x3d\x3dencoding?0:byteOffset-encoding)){if(-1\x3d\x3d\x3dencoding\x26\x26(encoding\x3dbyteOffset),byteOffset-encoding+1\x3d\x3d\x3dvalLength)return encoding*indexSize}else-1!\x3d\x3dencoding\x26\x26(byteOffset-\x3dbyteOffset-encoding),encoding\x3d-1;else for(byteOffset+valLength\x3earrLength\x26\x26(byteOffset\x3darrLength-valLength);0\x3c\x3dbyteOffset;byteOffset--){arrLength\x3d\n!0;for(encoding\x3d0;encoding\x3cvalLength;encoding++)if(read(arr,byteOffset+encoding)!\x3d\x3dread(val,encoding)){arrLength\x3d!1;break}if(arrLength)return byteOffset}return-1}function utf8Slice(buf,start,end){end\x3dMath.min(buf.length,end);for(var res\x3d[];start\x3cend;){var firstByte\x3dbuf[start],codePoint\x3dnull,bytesPerSequence\x3d239\x3cfirstByte?4:223\x3cfirstByte?3:191\x3cfirstByte?2:1;if(start+bytesPerSequence\x3c\x3dend)switch(bytesPerSequence){case 1:128\x3efirstByte\x26\x26(codePoint\x3dfirstByte);break;case 2:var secondByte\x3dbuf[start+1];128\x3d\x3d\x3d\n(secondByte\x26192)\x26\x26(firstByte\x3d(firstByte\x2631)\x3c\x3c6|secondByte\x2663,127\x3cfirstByte\x26\x26(codePoint\x3dfirstByte));break;case 3:secondByte\x3dbuf[start+1];var thirdByte\x3dbuf[start+2];128\x3d\x3d\x3d(secondByte\x26192)\x26\x26128\x3d\x3d\x3d(thirdByte\x26192)\x26\x26(firstByte\x3d(firstByte\x2615)\x3c\x3c12|(secondByte\x2663)\x3c\x3c6|thirdByte\x2663,2047\x3cfirstByte\x26\x26(55296\x3efirstByte||57343\x3cfirstByte)\x26\x26(codePoint\x3dfirstByte));break;case 4:secondByte\x3dbuf[start+1];thirdByte\x3dbuf[start+2];var fourthByte\x3dbuf[start+3];128\x3d\x3d\x3d(secondByte\x26192)\x26\x26128\x3d\x3d\x3d(thirdByte\x26192)\x26\x26128\x3d\x3d\x3d(fourthByte\x26192)\x26\x26\n(firstByte\x3d(firstByte\x2615)\x3c\x3c18|(secondByte\x2663)\x3c\x3c12|(thirdByte\x2663)\x3c\x3c6|fourthByte\x2663,65535\x3cfirstByte\x26\x261114112\x3efirstByte\x26\x26(codePoint\x3dfirstByte))}null\x3d\x3d\x3dcodePoint?(codePoint\x3d65533,bytesPerSequence\x3d1):65535\x3ccodePoint\x26\x26(codePoint-\x3d65536,res.push(codePoint\x3e\x3e\x3e10\x261023|55296),codePoint\x3d56320|codePoint\x261023);res.push(codePoint);start+\x3dbytesPerSequence}buf\x3dres.length;if(buf\x3c\x3dMAX_ARGUMENTS_LENGTH)res\x3dString.fromCharCode.apply(String,res);else{end\x3d\x22\x22;for(start\x3d0;start\x3cbuf;)end+\x3dString.fromCharCode.apply(String,\nres.slice(start,start+\x3dMAX_ARGUMENTS_LENGTH));res\x3dend}return res}function checkOffset(offset,ext,length){if(0!\x3d\x3doffset%1||0\x3eoffset)throw new RangeError(\x22offset is not uint\x22);if(offset+ext\x3elength)throw new RangeError(\x22Trying to access beyond buffer length\x22);}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError(\x27\x22buffer\x22 argument must be a Buffer instance\x27);if(value\x3emax||value\x3cmin)throw new RangeError(\x27\x22value\x22 argument is out of bounds\x27);if(offset+ext\x3ebuf.length)throw new RangeError(\x22Index out of range\x22);\n}function objectWriteUInt16(buf,value,offset,littleEndian){0\x3evalue\x26\x26(value\x3d65535+value+1);for(var i\x3d0,j\x3dMath.min(buf.length-offset,2);i\x3cj;++i)buf[offset+i]\x3d(value\x26255\x3c\x3c8*(littleEndian?i:1-i))\x3e\x3e\x3e8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){0\x3evalue\x26\x26(value\x3d4294967295+value+1);for(var i\x3d0,j\x3dMath.min(buf.length-offset,4);i\x3cj;++i)buf[offset+i]\x3dvalue\x3e\x3e\x3e8*(littleEndian?i:3-i)\x26255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext\x3ebuf.length)throw new RangeError(\x22Index out of range\x22);\nif(0\x3eoffset)throw new RangeError(\x22Index out of range\x22);}function writeFloat(buf,value,offset,littleEndian,noAssert){noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886E38,-3.4028234663852886E38);ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157E308,-1.7976931348623157E308);ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}function base64clean(str){str\x3d\nstr.trim?str.trim():str.replace(/^\\s+|\\s+$/g,\x22\x22);str\x3dstr.replace(INVALID_BASE64_RE,\x22\x22);if(2\x3estr.length)return\x22\x22;for(;0!\x3d\x3dstr.length%4;)str+\x3d\x22\\x3d\x22;return str}function utf8ToBytes(string,units){units\x3dunits||Infinity;for(var codePoint,length\x3dstring.length,leadSurrogate\x3dnull,bytes\x3d[],i\x3d0;i\x3clength;++i){codePoint\x3dstring.charCodeAt(i);if(55295\x3ccodePoint\x26\x2657344\x3ecodePoint){if(!leadSurrogate){if(56319\x3ccodePoint){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);continue}else if(i+1\x3d\x3d\x3dlength){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,\n191,189);continue}leadSurrogate\x3dcodePoint;continue}if(56320\x3ecodePoint){-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);leadSurrogate\x3dcodePoint;continue}codePoint\x3d(leadSurrogate-55296\x3c\x3c10|codePoint-56320)+65536}else leadSurrogate\x26\x26-1\x3c(units-\x3d3)\x26\x26bytes.push(239,191,189);leadSurrogate\x3dnull;if(128\x3ecodePoint){if(0\x3e--units)break;bytes.push(codePoint)}else if(2048\x3ecodePoint){if(0\x3e(units-\x3d2))break;bytes.push(codePoint\x3e\x3e6|192,codePoint\x2663|128)}else if(65536\x3ecodePoint){if(0\x3e(units-\x3d3))break;bytes.push(codePoint\x3e\x3e12|\n224,codePoint\x3e\x3e6\x2663|128,codePoint\x2663|128)}else if(1114112\x3ecodePoint){if(0\x3e(units-\x3d4))break;bytes.push(codePoint\x3e\x3e18|240,codePoint\x3e\x3e12\x2663|128,codePoint\x3e\x3e6\x2663|128,codePoint\x2663|128)}else throw Error(\x22Invalid code point\x22);}return bytes}function asciiToBytes(str){for(var byteArray\x3d[],i\x3d0;i\x3cstr.length;++i)byteArray.push(str.charCodeAt(i)\x26255);return byteArray}function blitBuffer(src,dst,offset,length){for(var i\x3d0;i\x3clength\x26\x26!(i+offset\x3e\x3ddst.length||i\x3e\x3dsrc.length);++i)dst[i+offset]\x3dsrc[i];return i}var base64\x3d\nrequire(\x22module$node_modules$base64_js$index\x22),ieee754\x3drequire(\x22module$node_modules$ieee754$index\x22),isArray\x3drequire(\x22module$node_modules$isarray$index\x22);exports.Buffer\x3dBuffer;exports.SlowBuffer\x3dfunction(length){+length!\x3dlength\x26\x26(length\x3d0);return Buffer.alloc(+length)};exports.INSPECT_MAX_BYTES\x3d50;Buffer.TYPED_ARRAY_SUPPORT\x3dvoid 0!\x3d\x3dglobal.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength\x3dBuffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823;Buffer.poolSize\x3d8192;Buffer._augment\x3d\nfunction(arr){arr.__proto__\x3dBuffer.prototype;return arr};Buffer.from\x3dfunction(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};Buffer.TYPED_ARRAY_SUPPORT\x26\x26(Buffer.prototype.__proto__\x3dUint8Array.prototype,Buffer.__proto__\x3dUint8Array,\x22undefined\x22!\x3d\x3dtypeof Symbol\x26\x26Symbol.species\x26\x26Buffer[Symbol.species]\x3d\x3d\x3dBuffer\x26\x26Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0}));Buffer.alloc\x3dfunction(size,fill,encoding){assertSize(size);size\x3d0\x3e\x3dsize?createBuffer(null,\nsize):void 0!\x3d\x3dfill?\x22string\x22\x3d\x3d\x3dtypeof encoding?createBuffer(null,size).fill(fill,encoding):createBuffer(null,size).fill(fill):createBuffer(null,size);return size};Buffer.allocUnsafe\x3dfunction(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow\x3dfunction(size){return allocUnsafe(null,size)};Buffer.isBuffer\x3dfunction(b){return!(null\x3d\x3db||!b._isBuffer)};Buffer.compare\x3dfunction(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError(\x22Arguments must be Buffers\x22);if(a\x3d\x3d\x3db)return 0;for(var x\x3d\na.length,y\x3db.length,i\x3d0,len\x3dMath.min(x,y);i\x3clen;++i)if(a[i]!\x3d\x3db[i]){x\x3da[i];y\x3db[i];break}return x\x3cy?-1:y\x3cx?1:0};Buffer.isEncoding\x3dfunction(encoding){switch(String(encoding).toLowerCase()){case \x22hex\x22:case \x22utf8\x22:case \x22utf-8\x22:case \x22ascii\x22:case \x22latin1\x22:case \x22binary\x22:case \x22base64\x22:case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:return!0;default:return!1}};Buffer.concat\x3dfunction(list,length){if(!isArray(list))throw new TypeError(\x27\x22list\x22 argument must be an Array of Buffers\x27);if(0\x3d\x3d\x3dlist.length)return Buffer.alloc(0);\nvar i;if(void 0\x3d\x3d\x3dlength)for(i\x3dlength\x3d0;i\x3clist.length;++i)length+\x3dlist[i].length;length\x3dBuffer.allocUnsafe(length);var pos\x3d0;for(i\x3d0;i\x3clist.length;++i){var buf\x3dlist[i];if(!Buffer.isBuffer(buf))throw new TypeError(\x27\x22list\x22 argument must be an Array of Buffers\x27);buf.copy(length,pos);pos+\x3dbuf.length}return length};Buffer.byteLength\x3dbyteLength$jscomp$0;Buffer.prototype._isBuffer\x3d!0;Buffer.prototype.swap16\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%2)throw new RangeError(\x22Buffer size must be a multiple of 16-bits\x22);\nfor(var i\x3d0;i\x3clen;i+\x3d2)swap(this,i,i+1);return this};Buffer.prototype.swap32\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%4)throw new RangeError(\x22Buffer size must be a multiple of 32-bits\x22);for(var i\x3d0;i\x3clen;i+\x3d4)swap(this,i,i+3),swap(this,i+1,i+2);return this};Buffer.prototype.swap64\x3dfunction(){var len\x3dthis.length;if(0!\x3d\x3dlen%8)throw new RangeError(\x22Buffer size must be a multiple of 64-bits\x22);for(var i\x3d0;i\x3clen;i+\x3d8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this};\nBuffer.prototype.toString\x3dfunction(){var length\x3dthis.length|0;return 0\x3d\x3d\x3dlength?\x22\x22:0\x3d\x3d\x3darguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)};Buffer.prototype.equals\x3dfunction(b){if(!Buffer.isBuffer(b))throw new TypeError(\x22Argument must be a Buffer\x22);return this\x3d\x3d\x3db?!0:0\x3d\x3d\x3dBuffer.compare(this,b)};Buffer.prototype.inspect\x3dfunction(){var str\x3d\x22\x22,max\x3dexports.INSPECT_MAX_BYTES;0\x3cthis.length\x26\x26(str\x3dthis.toString(\x22hex\x22,0,max).match(/.{2}/g).join(\x22 \x22),this.length\x3emax\x26\x26(str+\x3d\x22 ... \x22));\nreturn\x22\\x3cBuffer \x22+str+\x22\\x3e\x22};Buffer.prototype.compare\x3dfunction(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError(\x22Argument must be a Buffer\x22);void 0\x3d\x3d\x3dstart\x26\x26(start\x3d0);void 0\x3d\x3d\x3dend\x26\x26(end\x3dtarget?target.length:0);void 0\x3d\x3d\x3dthisStart\x26\x26(thisStart\x3d0);void 0\x3d\x3d\x3dthisEnd\x26\x26(thisEnd\x3dthis.length);if(0\x3estart||end\x3etarget.length||0\x3ethisStart||thisEnd\x3ethis.length)throw new RangeError(\x22out of range index\x22);if(thisStart\x3e\x3dthisEnd\x26\x26start\x3e\x3dend)return 0;if(thisStart\x3e\x3dthisEnd)return-1;\nif(start\x3e\x3dend)return 1;start\x3e\x3e\x3e\x3d0;end\x3e\x3e\x3e\x3d0;thisStart\x3e\x3e\x3e\x3d0;thisEnd\x3e\x3e\x3e\x3d0;if(this\x3d\x3d\x3dtarget)return 0;var x\x3dthisEnd-thisStart,y\x3dend-start,len\x3dMath.min(x,y);thisStart\x3dthis.slice(thisStart,thisEnd);target\x3dtarget.slice(start,end);for(start\x3d0;start\x3clen;++start)if(thisStart[start]!\x3d\x3dtarget[start]){x\x3dthisStart[start];y\x3dtarget[start];break}return x\x3cy?-1:y\x3cx?1:0};Buffer.prototype.includes\x3dfunction(val,byteOffset,encoding){return-1!\x3d\x3dthis.indexOf(val,byteOffset,encoding)};Buffer.prototype.indexOf\x3dfunction(val,\nbyteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)};Buffer.prototype.lastIndexOf\x3dfunction(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)};Buffer.prototype.write\x3dfunction(string,offset,length,encoding){if(void 0\x3d\x3d\x3doffset)encoding\x3d\x22utf8\x22,length\x3dthis.length,offset\x3d0;else if(void 0\x3d\x3d\x3dlength\x26\x26\x22string\x22\x3d\x3d\x3dtypeof offset)encoding\x3doffset,length\x3dthis.length,offset\x3d0;else if(isFinite(offset))offset|\x3d0,isFinite(length)?(length|\x3d0,void 0\x3d\x3d\x3dencoding\x26\x26\n(encoding\x3d\x22utf8\x22)):(encoding\x3dlength,length\x3dvoid 0);else throw Error(\x22Buffer.write(string, encoding, offset[, length]) is no longer supported\x22);var remaining\x3dthis.length-offset;if(void 0\x3d\x3d\x3dlength||length\x3eremaining)length\x3dremaining;if(0\x3cstring.length\x26\x26(0\x3elength||0\x3eoffset)||offset\x3ethis.length)throw new RangeError(\x22Attempt to write outside buffer bounds\x22);encoding||(encoding\x3d\x22utf8\x22);for(remaining\x3d!1;;)switch(encoding){case \x22hex\x22:a:{offset\x3dNumber(offset)||0;encoding\x3dthis.length-offset;length?(length\x3dNumber(length),\nlength\x3eencoding\x26\x26(length\x3dencoding)):length\x3dencoding;encoding\x3dstring.length;if(0!\x3d\x3dencoding%2)throw new TypeError(\x22Invalid hex string\x22);length\x3eencoding/2\x26\x26(length\x3dencoding/2);for(encoding\x3d0;encoding\x3clength;++encoding){remaining\x3dparseInt(string.substr(2*encoding,2),16);if(isNaN(remaining)){string\x3dencoding;break a}this[offset+encoding]\x3dremaining}string\x3dencoding}return string;case \x22utf8\x22:case \x22utf-8\x22:return blitBuffer(utf8ToBytes(string,this.length-offset),this,offset,length);case \x22ascii\x22:return blitBuffer(asciiToBytes(string),\nthis,offset,length);case \x22latin1\x22:case \x22binary\x22:return blitBuffer(asciiToBytes(string),this,offset,length);case \x22base64\x22:return blitBuffer(base64.toByteArray(base64clean(string)),this,offset,length);case \x22ucs2\x22:case \x22ucs-2\x22:case \x22utf16le\x22:case \x22utf-16le\x22:encoding\x3dstring;remaining\x3dthis.length-offset;for(var byteArray\x3d[],i\x3d0;i\x3cencoding.length\x26\x26!(0\x3e(remaining-\x3d2));++i){var lo\x3dencoding.charCodeAt(i);string\x3dlo\x3e\x3e8;lo%\x3d256;byteArray.push(lo);byteArray.push(string)}return blitBuffer(byteArray,this,offset,\nlength);default:if(remaining)throw new TypeError(\x22Unknown encoding: \x22+encoding);encoding\x3d(\x22\x22+encoding).toLowerCase();remaining\x3d!0}};Buffer.prototype.toJSON\x3dfunction(){return{type:\x22Buffer\x22,data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH\x3d4096;Buffer.prototype.slice\x3dfunction(start,end){var len\x3dthis.length;start\x3d~~start;end\x3dvoid 0\x3d\x3d\x3dend?len:~~end;0\x3estart?(start+\x3dlen,0\x3estart\x26\x26(start\x3d0)):start\x3elen\x26\x26(start\x3dlen);0\x3eend?(end+\x3dlen,0\x3eend\x26\x26(end\x3d0)):end\x3elen\x26\x26(end\x3dlen);end\x3cstart\x26\x26(end\x3d\nstart);if(Buffer.TYPED_ARRAY_SUPPORT)end\x3dthis.subarray(start,end),end.__proto__\x3dBuffer.prototype;else{len\x3dend-start;end\x3dnew Buffer(len,void 0);for(var i\x3d0;i\x3clen;++i)end[i]\x3dthis[i+start]}return end};Buffer.prototype.readUIntLE\x3dfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset];for(var mul\x3d1,i\x3d0;++i\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+i]*mul;return noAssert};Buffer.prototype.readUIntBE\x3dfunction(offset,byteLength,\nnoAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset+--byteLength];for(var mul\x3d1;0\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+--byteLength]*mul;return noAssert};Buffer.prototype.readUInt8\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);return this[offset]|this[offset+1]\x3c\x3c8};Buffer.prototype.readUInt16BE\x3d\nfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);return this[offset]\x3c\x3c8|this[offset+1]};Buffer.prototype.readUInt32LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]\x3c\x3c8|this[offset+2]\x3c\x3c16)+16777216*this[offset+3]};Buffer.prototype.readUInt32BE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return 16777216*this[offset]+(this[offset+1]\x3c\x3c16|this[offset+2]\x3c\x3c8|this[offset+3])};Buffer.prototype.readIntLE\x3d\nfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dthis[offset];for(var mul\x3d1,i\x3d0;++i\x3cbyteLength\x26\x26(mul*\x3d256);)noAssert+\x3dthis[offset+i]*mul;noAssert\x3e\x3d128*mul\x26\x26(noAssert-\x3dMath.pow(2,8*byteLength));return noAssert};Buffer.prototype.readIntBE\x3dfunction(offset,byteLength,noAssert){offset|\x3d0;byteLength|\x3d0;noAssert||checkOffset(offset,byteLength,this.length);noAssert\x3dbyteLength;for(var mul\x3d1,val\x3dthis[offset+--noAssert];0\x3cnoAssert\x26\x26(mul*\x3d\n256);)val+\x3dthis[offset+--noAssert]*mul;val\x3e\x3d128*mul\x26\x26(val-\x3dMath.pow(2,8*byteLength));return val};Buffer.prototype.readInt8\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,1,this.length);return this[offset]\x26128?-1*(255-this[offset]+1):this[offset]};Buffer.prototype.readInt16LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,2,this.length);offset\x3dthis[offset]|this[offset+1]\x3c\x3c8;return offset\x2632768?offset|4294901760:offset};Buffer.prototype.readInt16BE\x3dfunction(offset,noAssert){noAssert||\ncheckOffset(offset,2,this.length);offset\x3dthis[offset+1]|this[offset]\x3c\x3c8;return offset\x2632768?offset|4294901760:offset};Buffer.prototype.readInt32LE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return this[offset]|this[offset+1]\x3c\x3c8|this[offset+2]\x3c\x3c16|this[offset+3]\x3c\x3c24};Buffer.prototype.readInt32BE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return this[offset]\x3c\x3c24|this[offset+1]\x3c\x3c16|this[offset+2]\x3c\x3c8|this[offset+3]};Buffer.prototype.readFloatLE\x3dfunction(offset,\nnoAssert){noAssert||checkOffset(offset,4,this.length);return ieee754.read(this,offset,!0,23,4)};Buffer.prototype.readFloatBE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,4,this.length);return ieee754.read(this,offset,!1,23,4)};Buffer.prototype.readDoubleLE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,8,this.length);return ieee754.read(this,offset,!0,52,8)};Buffer.prototype.readDoubleBE\x3dfunction(offset,noAssert){noAssert||checkOffset(offset,8,this.length);return ieee754.read(this,\noffset,!1,52,8)};Buffer.prototype.writeUIntLE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;byteLength|\x3d0;noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);noAssert\x3d1;var i\x3d0;for(this[offset]\x3dvalue\x26255;++i\x3cbyteLength\x26\x26(noAssert*\x3d256);)this[offset+i]\x3dvalue/noAssert\x26255;return offset+byteLength};Buffer.prototype.writeUIntBE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;byteLength|\x3d0;noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,\n8*byteLength)-1,0);noAssert\x3dbyteLength-1;var mul\x3d1;for(this[offset+noAssert]\x3dvalue\x26255;0\x3c\x3d--noAssert\x26\x26(mul*\x3d256);)this[offset+noAssert]\x3dvalue/mul\x26255;return offset+byteLength};Buffer.prototype.writeUInt8\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,1,255,0);Buffer.TYPED_ARRAY_SUPPORT||(value\x3dMath.floor(value));this[offset]\x3dvalue\x26255;return offset+1};Buffer.prototype.writeUInt16LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,\nvalue,offset,2,65535,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8):objectWriteUInt16(this,value,offset,!0);return offset+2};Buffer.prototype.writeUInt16BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,2,65535,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e8,this[offset+1]\x3dvalue\x26255):objectWriteUInt16(this,value,offset,!1);return offset+2};Buffer.prototype.writeUInt32LE\x3dfunction(value,offset,noAssert){value\x3d+value;\noffset|\x3d0;noAssert||checkInt(this,value,offset,4,4294967295,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]\x3dvalue\x3e\x3e\x3e24,this[offset+2]\x3dvalue\x3e\x3e\x3e16,this[offset+1]\x3dvalue\x3e\x3e\x3e8,this[offset]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!0);return offset+4};Buffer.prototype.writeUInt32BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,4294967295,0);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e24,this[offset+1]\x3dvalue\x3e\x3e\x3e16,this[offset+2]\x3dvalue\x3e\x3e\x3e8,this[offset+\n3]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!1);return offset+4};Buffer.prototype.writeIntLE\x3dfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;noAssert||(noAssert\x3dMath.pow(2,8*byteLength-1),checkInt(this,value,offset,byteLength,noAssert-1,-noAssert));noAssert\x3d0;var mul\x3d1,sub\x3d0;for(this[offset]\x3dvalue\x26255;++noAssert\x3cbyteLength\x26\x26(mul*\x3d256);)0\x3evalue\x26\x260\x3d\x3d\x3dsub\x26\x260!\x3d\x3dthis[offset+noAssert-1]\x26\x26(sub\x3d1),this[offset+noAssert]\x3d(value/mul\x3e\x3e0)-sub\x26255;return offset+byteLength};Buffer.prototype.writeIntBE\x3d\nfunction(value,offset,byteLength,noAssert){value\x3d+value;offset|\x3d0;noAssert||(noAssert\x3dMath.pow(2,8*byteLength-1),checkInt(this,value,offset,byteLength,noAssert-1,-noAssert));noAssert\x3dbyteLength-1;var mul\x3d1,sub\x3d0;for(this[offset+noAssert]\x3dvalue\x26255;0\x3c\x3d--noAssert\x26\x26(mul*\x3d256);)0\x3evalue\x26\x260\x3d\x3d\x3dsub\x26\x260!\x3d\x3dthis[offset+noAssert+1]\x26\x26(sub\x3d1),this[offset+noAssert]\x3d(value/mul\x3e\x3e0)-sub\x26255;return offset+byteLength};Buffer.prototype.writeInt8\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,\nvalue,offset,1,127,-128);Buffer.TYPED_ARRAY_SUPPORT||(value\x3dMath.floor(value));0\x3evalue\x26\x26(value\x3d255+value+1);this[offset]\x3dvalue\x26255;return offset+1};Buffer.prototype.writeInt16LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,2,32767,-32768);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8):objectWriteUInt16(this,value,offset,!0);return offset+2};Buffer.prototype.writeInt16BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d\n0;noAssert||checkInt(this,value,offset,2,32767,-32768);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e8,this[offset+1]\x3dvalue\x26255):objectWriteUInt16(this,value,offset,!1);return offset+2};Buffer.prototype.writeInt32LE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,2147483647,-2147483648);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x26255,this[offset+1]\x3dvalue\x3e\x3e\x3e8,this[offset+2]\x3dvalue\x3e\x3e\x3e16,this[offset+3]\x3dvalue\x3e\x3e\x3e24):objectWriteUInt32(this,value,offset,\n!0);return offset+4};Buffer.prototype.writeInt32BE\x3dfunction(value,offset,noAssert){value\x3d+value;offset|\x3d0;noAssert||checkInt(this,value,offset,4,2147483647,-2147483648);0\x3evalue\x26\x26(value\x3d4294967295+value+1);Buffer.TYPED_ARRAY_SUPPORT?(this[offset]\x3dvalue\x3e\x3e\x3e24,this[offset+1]\x3dvalue\x3e\x3e\x3e16,this[offset+2]\x3dvalue\x3e\x3e\x3e8,this[offset+3]\x3dvalue\x26255):objectWriteUInt32(this,value,offset,!1);return offset+4};Buffer.prototype.writeFloatLE\x3dfunction(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)};\nBuffer.prototype.writeFloatBE\x3dfunction(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)};Buffer.prototype.writeDoubleLE\x3dfunction(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)};Buffer.prototype.writeDoubleBE\x3dfunction(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)};Buffer.prototype.copy\x3dfunction(target,targetStart,start,end){start||(start\x3d0);end||0\x3d\x3d\x3dend||(end\x3dthis.length);targetStart\x3e\x3dtarget.length\x26\x26(targetStart\x3dtarget.length);\ntargetStart||(targetStart\x3d0);0\x3cend\x26\x26end\x3cstart\x26\x26(end\x3dstart);if(end\x3d\x3d\x3dstart||0\x3d\x3d\x3dtarget.length||0\x3d\x3d\x3dthis.length)return 0;if(0\x3etargetStart)throw new RangeError(\x22targetStart out of bounds\x22);if(0\x3estart||start\x3e\x3dthis.length)throw new RangeError(\x22sourceStart out of bounds\x22);if(0\x3eend)throw new RangeError(\x22sourceEnd out of bounds\x22);end\x3ethis.length\x26\x26(end\x3dthis.length);target.length-targetStart\x3cend-start\x26\x26(end\x3dtarget.length-targetStart+start);var len\x3dend-start;if(this\x3d\x3d\x3dtarget\x26\x26start\x3ctargetStart\x26\x26targetStart\x3c\nend)for(end\x3dlen-1;0\x3c\x3dend;--end)target[end+targetStart]\x3dthis[end+start];else if(1E3\x3elen||!Buffer.TYPED_ARRAY_SUPPORT)for(end\x3d0;end\x3clen;++end)target[end+targetStart]\x3dthis[end+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len};Buffer.prototype.fill\x3dfunction(val,start,end,encoding){if(\x22string\x22\x3d\x3d\x3dtypeof val){\x22string\x22\x3d\x3d\x3dtypeof start?(encoding\x3dstart,start\x3d0,end\x3dthis.length):\x22string\x22\x3d\x3d\x3dtypeof end\x26\x26(encoding\x3dend,end\x3dthis.length);if(1\x3d\x3d\x3dval.length){var code\x3d\nval.charCodeAt(0);256\x3ecode\x26\x26(val\x3dcode)}if(void 0!\x3d\x3dencoding\x26\x26\x22string\x22!\x3d\x3dtypeof encoding)throw new TypeError(\x22encoding must be a string\x22);if(\x22string\x22\x3d\x3d\x3dtypeof encoding\x26\x26!Buffer.isEncoding(encoding))throw new TypeError(\x22Unknown encoding: \x22+encoding);}else\x22number\x22\x3d\x3d\x3dtypeof val\x26\x26(val\x26\x3d255);if(0\x3estart||this.length\x3cstart||this.length\x3cend)throw new RangeError(\x22Out of range index\x22);if(end\x3c\x3dstart)return this;start\x3e\x3e\x3e\x3d0;end\x3dvoid 0\x3d\x3d\x3dend?this.length:end\x3e\x3e\x3e0;val||(val\x3d0);if(\x22number\x22\x3d\x3d\x3dtypeof val)for(encoding\x3d\nstart;encoding\x3cend;++encoding)this[encoding]\x3dval;else for(val\x3dBuffer.isBuffer(val)?val:utf8ToBytes((new Buffer(val,encoding)).toString()),code\x3dval.length,encoding\x3d0;encoding\x3cend-start;++encoding)this[encoding+start]\x3dval[encoding%code];return this};var INVALID_BASE64_RE\x3d/[^+\\/0-9A-Za-z-_]/g}");
SHADOW_ENV.evalLoad("module$node_modules$vega_lite$build$vega_lite.js", true , "shadow$provide.module$node_modules$vega_lite$build$vega_lite\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){var Buffer\x3drequire(\x22module$node_modules$buffer$index\x22).Buffer;(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vegaLite\x3d{}))})(this,function(exports){function accessor$jscomp$0(fn,\nfields,name){fn.fields\x3dfields||[];fn.fname\x3dname;return fn}function getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s\x3d\x22\x22;i\x3dj+1}const path\x3d[],n\x3dp.length;let q\x3dnull,b\x3d0,s\x3d\x22\x22,i,j,c;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j)if(c\x3dp[j],\x22\\\\\x22\x3d\x3d\x3dc)s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj;else if(c\x3d\x3d\x3dq)push(),q\x3dnull,b\x3d-1;else if(!q)if(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(\x22.\x22\x3d\x3d\x3dc\x26\x26!b)j\x3ei?push():i\x3dj+1;else if(\x22[\x22\x3d\x3d\x3d\nc)j\x3ei\x26\x26push(),b\x3di\x3dj+1;else if(\x22]\x22\x3d\x3d\x3dc){if(!b)throw Error(\x22Access path missing open bracket: \x22+p);0\x3cb\x26\x26push();b\x3d0;i\x3dj+1}if(b)throw Error(\x22Access path missing closing bracket: \x22+p);if(q)throw Error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function log(method,level,input){level\x3d[level].concat([].slice.call(input));console[method].apply(console,level)}function isObject(_){return _\x3d\x3d\x3dObject(_)}function mergeConfig(...configs){return configs.reduce((out,source)\x3d\x3e{for(const key in source)\x22signals\x22\x3d\x3d\x3d\nkey?out.signals\x3dmergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],\x22legend\x22\x3d\x3d\x3dkey?{layout:1}:\x22style\x22\x3d\x3d\x3dkey?!0:null);return out},{})}function writeConfig(output,key,value,recurse){if(\x22__proto__\x22!\x3d\x3dkey){var k;if(isObject(value)\x26\x26!isArray(value))for(k in output\x3disObject(output[key])?output[key]:output[key]\x3d{},value)recurse\x26\x26(!0\x3d\x3d\x3drecurse||recurse[k])?writeConfig(output,k,value[k]):\x22__proto__\x22!\x3d\x3dk\x26\x26(output[k]\x3dvalue[k]);else output[key]\x3dvalue}}function mergeNamed(a,b){function add(_){map[_.name]||\n(map[_.name]\x3d1,out.push(_))}if(null\x3d\x3da)return b;const map\x3d{},out\x3d[];b.forEach(add);a.forEach(add);return out}function array$jscomp$0(_){return null!\x3d_?isArray(_)?_:[_]:[]}function isBoolean(_){return\x22boolean\x22\x3d\x3d\x3dtypeof _}function isNumber(_){return\x22number\x22\x3d\x3d\x3dtypeof _}function isString(_){return\x22string\x22\x3d\x3d\x3dtypeof _}function $(x){return isArray(x)?\x22[\x22+x.map($)+\x22]\x22:isObject(x)||isString(x)?JSON.stringify(x).replace(\x22\\u2028\x22,\x22\\\\u2028\x22).replace(\x22\\u2029\x22,\x22\\\\u2029\x22):x}function toSet(_){const s\x3d{},n\x3d_.length;\nfor(let i\x3d0;i\x3cn;++i)s[_[i]]\x3d!0;return s}function forEachLeaf(op,fn){if(op.not)forEachLeaf(op.not,fn);else if(op.and)for(const subop of op.and)forEachLeaf(subop,fn);else if(op.or)for(const subop of op.or)forEachLeaf(subop,fn);else fn(op)}function normalizeLogicalComposition(op,normalizer){return op.not?{not:normalizeLogicalComposition(op.not,normalizer)}:op.and?{and:op.and.map(o\x3d\x3enormalizeLogicalComposition(o,normalizer))}:op.or?{or:op.or.map(o\x3d\x3enormalizeLogicalComposition(o,normalizer))}:normalizer(op)}\nfunction pick(obj,props){const copy\x3d{};for(const prop of props)hop.call(obj,prop)\x26\x26(copy[prop]\x3dobj[prop]);return copy}function omit(obj,props){obj\x3dObject.assign({},obj);for(const prop of props)delete obj[prop];return obj}function hash(a){if(isNumber(a))return a;a\x3disString(a)?a:fastJsonStableStringify(a);if(250\x3ea.length)return a;let h\x3d0;for(let i\x3d0;i\x3ca.length;i++){const char\x3da.charCodeAt(i);h\x3d(h\x3c\x3c5)-h+char;h\x26\x3dh}return h}function isNullOrFalse(x){return!1\x3d\x3d\x3dx||null\x3d\x3d\x3dx}function contains(array,item){return-1\x3c\narray.indexOf(item)}function some(arr,f){let i\x3d0;for(const $jscomp$destructuring$var0 of arr.entries()){const [k,a]\x3d$jscomp$destructuring$var0;if(f(a,k,i++))return!0}return!1}function every(arr,f){let i\x3d0;for(const $jscomp$destructuring$var1 of arr.entries()){const [k,a]\x3d$jscomp$destructuring$var1;if(!f(a,k,i++))return!1}return!0}function mergeDeep(dest,...src$jscomp$0){for(const s of src$jscomp$0){src$jscomp$0\x3ddest;var src\x3dnull!\x3d\x3ds\x26\x26void 0!\x3d\x3ds?s:{};for(const property of keys$jscomp$0(src))writeConfig(src$jscomp$0,\nproperty,src[property],!0)}return dest}function unique(values,f){const results\x3d[],u\x3d{};for(const val of values)values\x3df(val),values in u||(u[values]\x3d1,results.push(val));return results}function setEqual(a,b){if(a.size!\x3d\x3db.size)return!1;for(const e of a)if(!b.has(e))return!1;return!0}function hasIntersection(a,b){for(const key of a)if(b.has(key))return!0;return!1}function prefixGenerator(a){const prefixes\x3dnew Set;for(const x of a){const wrappedWithAccessors\x3dsplitAccessPath(x).map((y,i)\x3d\x3e0\x3d\x3d\x3di?y:\x22[\x22.concat(y,\n\x22]\x22));a\x3dwrappedWithAccessors.map((_,i)\x3d\x3ewrappedWithAccessors.slice(0,i+1).join(\x22\x22));for(const y of a)prefixes.add(y)}return prefixes}function fieldIntersection(a,b){return void 0\x3d\x3d\x3da||void 0\x3d\x3d\x3db?!0:hasIntersection(prefixGenerator(a),prefixGenerator(b))}function isEmpty(obj){return 0\x3d\x3d\x3dkeys$jscomp$0(obj).length}function isBoolean$1(b){return!0\x3d\x3d\x3db||!1\x3d\x3d\x3db}function varName(s){const alphanumericS\x3ds.replace(/\\W/g,\x22_\x22);return(s.match(/^\\d+/)?\x22_\x22:\x22\x22)+alphanumericS}function logicalExpr(op,cb){return op.not?\n\x22!(\x22+logicalExpr(op.not,cb)+\x22)\x22:op.and?\x22(\x22+op.and.map(and\x3d\x3elogicalExpr(and,cb)).join(\x22) \\x26\\x26 (\x22)+\x22)\x22:op.or?\x22(\x22+op.or.map(or\x3d\x3elogicalExpr(or,cb)).join(\x22) || (\x22)+\x22)\x22:cb(op)}function deleteNestedProperty(obj,orderedProps){if(0\x3d\x3d\x3dorderedProps.length)return!0;const prop\x3dorderedProps.shift();prop in obj\x26\x26deleteNestedProperty(obj[prop],orderedProps)\x26\x26delete obj[prop];return isEmpty(obj)}function titleCase(s){return s.charAt(0).toUpperCase()+s.substr(1)}function accessPathWithDatum(path,datum){datum\x3d\nvoid 0\x3d\x3d\x3ddatum?\x22datum\x22:datum;path\x3dsplitAccessPath(path);const prefixes\x3d[];for(let i\x3d1;i\x3c\x3dpath.length;i++){const prefix\x3d\x22[\x22.concat(path.slice(0,i).map($).join(\x22][\x22),\x22]\x22);prefixes.push(\x22\x22.concat(datum).concat(prefix))}return prefixes.join(\x22 \\x26\\x26 \x22)}function flatAccessWithDatum(path,datum){return\x22\x22.concat(void 0\x3d\x3d\x3ddatum?\x22datum\x22:datum,\x22[\x22).concat($(splitAccessPath(path).join(\x22.\x22)),\x22]\x22)}function escapePathAccess(string){return string.replace(/(\\[|\\]|\\.|\x27|\x22)/g,\x22\\\\$1\x22)}function replacePathInField(path){return\x22\x22.concat(splitAccessPath(path).map(escapePathAccess).join(\x22\\\\.\x22))}\nfunction replaceAll(string,find,replacement){return string.replace(new RegExp(find.replace(/[-/\\\\^$*+?.()|[\\]{}]/g,\x22\\\\$\\x26\x22),\x22g\x22),replacement)}function removePathFromField(path){return\x22\x22.concat(splitAccessPath(path).join(\x22.\x22))}function accessPathDepth(path){return path?splitAccessPath(path).length:0}function getFirstDefined(...args){for(const arg of args)if(void 0!\x3d\x3darg)return arg}function uniqueId(prefix){const id\x3d++idCounter;return prefix?String(prefix)+id:id}function internalField(name){return isInternalField(name)?\nname:\x22__\x22.concat(name)}function isInternalField(name){return 0\x3d\x3d\x3dname.indexOf(\x22__\x22)}function normalizeAngle(angle){if(void 0!\x3d\x3dangle)return(angle%360+360)%360}function isNumeric(value){return isNumber(value)?!0:!isNaN(value)\x26\x26!isNaN(parseFloat(value))}function isConditionalAxisValue(v){return v\x26\x26v.condition}function isArgminDef(a){return!!a\x26\x26!!a.argmin}function isArgmaxDef(a){return!!a\x26\x26!!a.argmax}function isAggregateOp(a){return isString(a)\x26\x26!!AGGREGATE_OP_INDEX[a]}function isCountingAggregateOp(aggregate){return isString(aggregate)\x26\x26\ncontains(COUNTING_OPS,aggregate)}function getPositionChannelFromLatLong(channel){switch(channel){case \x22latitude\x22:return\x22y\x22;case \x22latitude2\x22:return\x22y2\x22;case \x22longitude\x22:return\x22x\x22;case \x22longitude2\x22:return\x22x2\x22}}function isColorChannel(channel){return\x22color\x22\x3d\x3d\x3dchannel||\x22fill\x22\x3d\x3d\x3dchannel||\x22stroke\x22\x3d\x3d\x3dchannel}function isSecondaryRangeChannel(c){return getMainRangeChannel(c)!\x3d\x3dc}function getMainRangeChannel(channel){switch(channel){case \x22x2\x22:return\x22x\x22;case \x22y2\x22:return\x22y\x22;case \x22latitude2\x22:return\x22latitude\x22;\ncase \x22longitude2\x22:return\x22longitude\x22;case \x22theta2\x22:return\x22theta\x22;case \x22radius2\x22:return\x22radius\x22}return channel}function getVgPositionChannel(channel){if(channel in POLAR_POSITION_CHANNEL_INDEX)switch(channel){case \x22theta\x22:return\x22startAngle\x22;case \x22theta2\x22:return\x22endAngle\x22;case \x22radius\x22:return\x22outerRadius\x22;case \x22radius2\x22:return\x22innerRadius\x22}return channel}function getSecondaryRangeChannel(channel){switch(channel){case \x22x\x22:return\x22x2\x22;case \x22y\x22:return\x22y2\x22;case \x22latitude\x22:return\x22latitude2\x22;case \x22longitude\x22:return\x22longitude2\x22;\ncase \x22theta\x22:return\x22theta2\x22;case \x22radius\x22:return\x22radius2\x22}}function getSizeChannel(channel){switch(channel){case \x22x\x22:case \x22x2\x22:return\x22width\x22;case \x22y\x22:case \x22y2\x22:return\x22height\x22}}function getOffsetChannel(channel){switch(channel){case \x22x\x22:return\x22xOffset\x22;case \x22y\x22:return\x22yOffset\x22;case \x22x2\x22:return\x22x2Offset\x22;case \x22y2\x22:return\x22y2Offset\x22;case \x22theta\x22:return\x22thetaOffset\x22;case \x22radius\x22:return\x22radiusOffset\x22;case \x22theta2\x22:return\x22theta2Offset\x22;case \x22radius2\x22:return\x22radius2Offset\x22}}function getPositionScaleChannel(sizeType){return\x22width\x22\x3d\x3d\x3d\nsizeType?\x22x\x22:\x22y\x22}function getSupportedMark(channel){switch(channel){case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22description\x22:case \x22detail\x22:case \x22key\x22:case \x22tooltip\x22:case \x22href\x22:case \x22order\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeWidth\x22:case \x22facet\x22:case \x22row\x22:case \x22column\x22:return ALL_MARKS;case \x22x\x22:case \x22y\x22:case \x22latitude\x22:case \x22longitude\x22:return ALL_MARKS_EXCEPT_GEOSHAPE;case \x22x2\x22:case \x22y2\x22:case \x22latitude2\x22:case \x22longitude2\x22:return{area:\x22always\x22,bar:\x22always\x22,image:\x22always\x22,\nrect:\x22always\x22,rule:\x22always\x22,circle:\x22binned\x22,point:\x22binned\x22,square:\x22binned\x22,tick:\x22binned\x22,line:\x22binned\x22,trail:\x22binned\x22};case \x22size\x22:return{point:\x22always\x22,tick:\x22always\x22,rule:\x22always\x22,circle:\x22always\x22,square:\x22always\x22,bar:\x22always\x22,text:\x22always\x22,line:\x22always\x22,trail:\x22always\x22};case \x22strokeDash\x22:return{line:\x22always\x22,point:\x22always\x22,tick:\x22always\x22,rule:\x22always\x22,circle:\x22always\x22,square:\x22always\x22,bar:\x22always\x22,geoshape:\x22always\x22};case \x22shape\x22:return{point:\x22always\x22,geoshape:\x22always\x22};case \x22text\x22:return{text:\x22always\x22};\ncase \x22angle\x22:return{point:\x22always\x22,square:\x22always\x22,text:\x22always\x22};case \x22url\x22:return{image:\x22always\x22};case \x22theta\x22:return{text:\x22always\x22,arc:\x22always\x22};case \x22radius\x22:return{text:\x22always\x22,arc:\x22always\x22};case \x22theta2\x22:case \x22radius2\x22:return{arc:\x22always\x22}}}function rangeType(channel){switch(channel){case \x22facet\x22:case \x22row\x22:case \x22column\x22:case \x22shape\x22:case \x22strokeDash\x22:case \x22text\x22:case \x22tooltip\x22:case \x22href\x22:case \x22url\x22:case \x22description\x22:return\x22discrete\x22;case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22flexible\x22}}\nfunction binToString(bin){isBoolean(bin)\x26\x26(bin\x3dnormalizeBin(bin,void 0));return\x22bin\x22+keys$jscomp$0(bin).map(p\x3d\x3eisSelectionExtent(bin[p])?varName(\x22_\x22.concat(p,\x22_\x22).concat(entries(bin[p]))):varName(\x22_\x22.concat(p,\x22_\x22).concat(bin[p]))).join(\x22\x22)}function isBinning(bin){return!0\x3d\x3d\x3dbin||isObject(bin)\x26\x26!bin.binned}function isBinned(bin){return\x22binned\x22\x3d\x3d\x3dbin||isObject(bin)\x26\x26!0\x3d\x3d\x3dbin.binned}function isSelectionExtent(extent){return null\x3d\x3d\x3dextent||void 0\x3d\x3d\x3dextent?void 0:extent.selection}function autoMaxBins(channel){switch(channel){case \x22row\x22:case \x22column\x22:case \x22size\x22:case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22strokeWidth\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22shape\x22:return 6;\ncase \x22strokeDash\x22:return 4;default:return 10}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]\x3dvalue;return obj}function _classPrivateFieldSet(receiver,privateMap,value){privateMap\x3dprivateMap.get(receiver);if(!privateMap)throw new TypeError(\x22attempted to set private field on non-instance\x22);if(privateMap.set)privateMap.set.call(receiver,value);else{if(!privateMap.writable)throw new TypeError(\x22attempted to set read only private field\x22);\nprivateMap.value\x3dvalue}return value}function invalidSpec(spec){return\x22Invalid specification \x22.concat(JSON.stringify(spec),\x27. Make sure the specification includes at least one of the following properties: \x22mark\x22, \x22layer\x22, \x22facet\x22, \x22hconcat\x22, \x22vconcat\x22, \x22concat\x22, or \x22repeat\x22.\x27)}function containerSizeNonSingle(name){return\x22\x22.concat(\x22width\x22\x3d\x3dname?\x22Width\x22:\x22Height\x22,\x27 \x22container\x22 only works for single views and layered views.\x27)}function containerSizeNotCompatibleWithAutosize(name){const fitDirection\x3d\x22width\x22\x3d\x3d\nname?\x22x\x22:\x22y\x22;return\x22\x22.concat(\x22width\x22\x3d\x3dname?\x22Width\x22:\x22Height\x22,\x27 \x22container\x22 only works well with autosize \x22fit\x22 or \x22fit-\x27).concat(fitDirection,\x27\x22.\x27)}function droppingFit(channel){return channel?\x27Dropping \x22fit-\x27.concat(channel,\x27\x22 because spec has discrete \x27).concat(getSizeChannel(channel),\x22.\x22):\x27Dropping \x22fit\x22 because spec has discrete size.\x27}function unknownField(channel){return\x22Unknown field for \x22.concat(channel,\x22. Cannot calculate view size.\x22)}function cannotProjectOnChannelWithoutField(channel){return\x27Cannot project a selection on encoding channel \x22\x27.concat(channel,\n\x27\x22, which has no field.\x27)}function cannotProjectAggregate(channel,aggregate){return\x27Cannot project a selection on encoding channel \x22\x27.concat(channel,\x27\x22 as it uses an aggregate function (\x22\x27).concat(aggregate,\x27\x22).\x27)}function selectionNotSupported(mark){return\x22Selection not supported for \x22.concat(mark,\x22 yet.\x22)}function columnsNotSupportByRowCol(type){return\x27The \x22columns\x22 property cannot be used when \x22\x27.concat(type,\x27\x22 has nested row/column.\x27)}function differentParse(field,local,ancestor){return\x27An ancestor parsed field \x22\x27.concat(field,\n\x27\x22 as \x27).concat(ancestor,\x22 but a child wants to parse the field as \x22).concat(local,\x22.\x22)}function customFormatTypeNotAllowed(channel){return\x22Config.customFormatTypes is not true, thus custom format type and format for channel \x22.concat(channel,\x22 are dropped.\x22)}function droppingColor(type,opt){const {fill,stroke}\x3dopt;return\x22Dropping color \x22.concat(type,\x22 as the plot also has \x22).concat(fill\x26\x26stroke?\x22fill and stroke\x22:fill?\x22fill\x22:\x22stroke\x22,\x22.\x22)}function emptyFieldDef(fieldDef,channel){return\x22Dropping \x22.concat(stringify(fieldDef),\n\x27 from channel \x22\x27).concat(channel,\x27\x22 since it does not contain any data field, datum, value, or signal.\x27)}function incompatibleChannel(channel,markOrFacet,when){return\x22\x22.concat(channel,\x27 dropped as it is incompatible with \x22\x27).concat(markOrFacet,\x27\x22\x27).concat(when?\x22 when \x22.concat(when):\x22\x22,\x22.\x22)}function invalidEncodingChannel(channel){return\x22\x22.concat(channel,\x22-encoding is dropped as \x22).concat(channel,\x22 is not a valid encoding channel.\x22)}function discreteChannelCannotEncode(channel,type){return\x27Using discrete channel \x22\x27.concat(channel,\n\x27\x22 to encode \x22\x27).concat(type,\x27\x22 field can be misleading as it does not encode \x27).concat(\x22ordinal\x22\x3d\x3d\x3dtype?\x22order\x22:\x22magnitude\x22,\x22.\x22)}function scalePropertyNotWorkWithScaleType(scaleType,propName,channel){return\x22\x22.concat(channel,\x22-scale\x27s \\\x22\x22).concat(propName,\x27\x22 is dropped as it does not work with \x27).concat(scaleType,\x22 scale.\x22)}function stepDropped(channel){return\x27The step for \x22\x27.concat(channel,\x27\x22 is dropped because the \x27).concat(\x22width\x22\x3d\x3d\x3dchannel?\x22x\x22:\x22y\x22,\x22 is continuous.\x22)}function cannotStackRangedMark(channel){return\x27Cannot stack \x22\x27.concat(channel,\n\x27\x22 if there is already \x22\x27).concat(channel,\x272\x22.\x27)}function invalidTimeUnit(unitName,value){return\x22Invalid \x22.concat(unitName,\x22: \x22).concat(stringify(value),\x22.\x22)}function errorBand1DNotSupport(property){return\x221D error band does not support \x22.concat(property,\x22.\x22)}function channelRequiredForBinned(channel){return\x22Channel \x22.concat(channel,\x27 is required for \x22binned\x22 bin.\x27)}function warn(...args){current.warn(...args)}function isDateTime(o){if(o\x26\x26isObject(o))for(const part of TIMEUNIT_PARTS)if(part in o)return!0;\nreturn!1}function normalizeMonth(m){isNumeric(m)\x26\x26(m\x3d+m);if(isNumber(m))return m-1;{var lowerM\x3dm.toLowerCase();const monthIndex\x3dMONTHS.indexOf(lowerM);if(-1!\x3d\x3dmonthIndex)return monthIndex;lowerM\x3dlowerM.substr(0,3);lowerM\x3dSHORT_MONTHS.indexOf(lowerM);if(-1!\x3d\x3dlowerM)return lowerM;throw Error(invalidTimeUnit(\x22month\x22,m));}}function normalizeDay(d){isNumeric(d)\x26\x26(d\x3d+d);if(isNumber(d))return d%7;{var lowerD\x3dd.toLowerCase();const dayIndex\x3dDAYS.indexOf(lowerD);if(-1!\x3d\x3ddayIndex)return dayIndex;lowerD\x3dlowerD.substr(0,\n3);lowerD\x3dSHORT_DAYS.indexOf(lowerD);if(-1!\x3d\x3dlowerD)return lowerD;throw Error(invalidTimeUnit(\x22day\x22,d));}}function dateTimeParts(d,normalize){const parts\x3d[];normalize\x26\x26void 0!\x3d\x3dd.day\x26\x261\x3ckeys$jscomp$0(d).length\x26\x26(warn(\x22Dropping day from datetime \x22.concat(stringify(d),\x22 as day cannot be combined with other units.\x22)),d\x3dduplicate(d),delete d.day);void 0!\x3d\x3dd.year?parts.push(d.year):parts.push(2012);if(void 0!\x3d\x3dd.month){var month\x3dnormalize?normalizeMonth(d.month):d.month;parts.push(month)}else if(void 0!\x3d\x3d\nd.quarter){if(normalize)if(month\x3dd.quarter,isNumeric(month)\x26\x26(month\x3d+month),isNumber(month))4\x3cmonth\x26\x26warn(invalidTimeUnit(\x22quarter\x22,month)),--month;else throw Error(invalidTimeUnit(\x22quarter\x22,month));else month\x3dd.quarter;parts.push(isNumber(month)?3*month:month+\x22*3\x22)}else parts.push(0);void 0!\x3d\x3dd.date?parts.push(d.date):void 0!\x3d\x3dd.day?(normalize\x3dnormalize?normalizeDay(d.day):d.day,parts.push(isNumber(normalize)?normalize+1:normalize+\x22+1\x22)):parts.push(1);for(const timeUnit of[\x22hours\x22,\x22minutes\x22,\x22seconds\x22,\n\x22milliseconds\x22])normalize\x3dd[timeUnit],parts.push(\x22undefined\x22\x3d\x3d\x3dtypeof normalize?0:normalize);return parts}function dateTimeToExpr(d){const string\x3ddateTimeParts(d,!0).join(\x22, \x22);return d.utc?\x22utc(\x22.concat(string,\x22)\x22):\x22datetime(\x22.concat(string,\x22)\x22)}function dateTimeToTimestamp(d){const parts\x3ddateTimeParts(d,!0);return d.utc?+new Date(Date.UTC(...parts)):+new Date(...parts)}function getTimeUnitParts(timeUnit){const parts\x3d[];for(const part of TIMEUNIT_PARTS)containsTimeUnit(timeUnit,part)\x26\x26parts.push(part);\nreturn parts}function containsTimeUnit(fullTimeUnit,timeUnit){const index\x3dfullTimeUnit.indexOf(timeUnit);return 0\x3eindex||0\x3cindex\x26\x26\x22seconds\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22i\x22\x3d\x3d\x3dfullTimeUnit.charAt(index-1)||fullTimeUnit.length\x3eindex+3\x26\x26\x22day\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22o\x22\x3d\x3d\x3dfullTimeUnit.charAt(index+3)||0\x3cindex\x26\x26\x22year\x22\x3d\x3d\x3dtimeUnit\x26\x26\x22f\x22\x3d\x3d\x3dfullTimeUnit.charAt(index-1)?!1:!0}function timeUnitSpecifierExpression(timeUnit){if(timeUnit)return timeUnit\x3dgetTimeUnitParts(timeUnit),\x22timeUnitSpecifier(\x22.concat(fastJsonStableStringify(timeUnit),\n\x22, \x22).concat(fastJsonStableStringify(VEGALITE_TIMEFORMAT),\x22)\x22)}function normalizeTimeUnit(timeUnit){if(timeUnit){var params;isString(timeUnit)?params\x3d{unit:timeUnit}:isObject(timeUnit)\x26\x26(params\x3dObject.assign({},timeUnit,timeUnit.unit?{unit:timeUnit.unit}:{}));params.unit.startsWith(\x22utc\x22)\x26\x26(params.utc\x3d!0,params.unit\x3dparams.unit.substr(3));return params}}function timeUnitToString(tu){var $jscomp$destructuring$var13\x3dnormalizeTimeUnit(tu);tu\x3dObject.assign({},$jscomp$destructuring$var13);$jscomp$destructuring$var13\x3d\n$jscomp$destructuring$var13.utc;const rest\x3d(delete tu.utc,tu);return rest.unit?($jscomp$destructuring$var13?\x22utc\x22:\x22\x22)+keys$jscomp$0(rest).map(p\x3d\x3evarName(\x22\x22.concat(\x22unit\x22\x3d\x3d\x3dp?\x22\x22:\x22_\x22.concat(p,\x22_\x22)).concat(rest[p]))).join(\x22\x22):($jscomp$destructuring$var13?\x22utc\x22:\x22\x22)+\x22timeunit\x22+keys$jscomp$0(rest).map(p\x3d\x3evarName(\x22_\x22.concat(p,\x22_\x22).concat(rest[p]))).join(\x22\x22)}function isSignalRef(o){return o\x26\x26!!o.signal}function isVgRangeStep(range){return!!range.step}function isDataRefDomain(domain){return isArray(domain)?\n!1:\x22field\x22in domain\x26\x26\x22data\x22in domain}function isFieldEqualPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.equal}function isFieldLTPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.lt}function isFieldLTEPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.lte}function isFieldGTPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26void 0!\x3d\x3dpredicate.gt}function isFieldGTEPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26\nvoid 0!\x3d\x3dpredicate.gte}function isFieldRangePredicate(predicate){return predicate\x26\x26predicate.field\x26\x26(isArray(predicate.range)\x26\x262\x3d\x3d\x3dpredicate.range.length||isSignalRef(predicate.range))?!0:!1}function isFieldOneOfPredicate(predicate){return predicate\x26\x26!!predicate.field\x26\x26(isArray(predicate.oneOf)||isArray(predicate.in))}function isFieldPredicate(predicate){return isFieldOneOfPredicate(predicate)||isFieldEqualPredicate(predicate)||isFieldRangePredicate(predicate)||isFieldLTPredicate(predicate)||isFieldGTPredicate(predicate)||\nisFieldLTEPredicate(predicate)||isFieldGTEPredicate(predicate)}function predicateValueExpr(v,timeUnit){return valueExpr(v,{timeUnit,wrapTime:!0})}function predicateValuesExpr(vals,timeUnit){return vals.map(v\x3d\x3epredicateValueExpr(v,timeUnit))}function fieldFilterExpression(predicate,useInRange){useInRange\x3dvoid 0\x3d\x3d\x3duseInRange?!0:useInRange;var _normalizeTimeUnit,{field}\x3dpredicate;const timeUnit\x3dnull\x3d\x3d\x3d(_normalizeTimeUnit\x3dnormalizeTimeUnit(predicate.timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit?void 0:_normalizeTimeUnit.unit;\nif(timeUnit){{({end:_normalizeTimeUnit}\x3d{end:!1});field\x3daccessPathWithDatum(field);const utc\x3dtimeUnit.startsWith(\x22utc\x22)?\x22utc\x22:\x22\x22;const dateExpr\x3d{};for(JSCompiler_temp of TIMEUNIT_PARTS)if(containsTimeUnit(timeUnit,JSCompiler_temp)){var lastTimeUnit\x3dJSCompiler_temp;lastTimeUnit\x3d\x22quarter\x22\x3d\x3d\x3dlastTimeUnit?\x22(\x22.concat(utc,\x22quarter(\x22).concat(field,\x22)-1)\x22):\x22\x22.concat(utc).concat(lastTimeUnit,\x22(\x22).concat(field,\x22)\x22);dateExpr[JSCompiler_temp]\x3dlastTimeUnit;lastTimeUnit\x3dJSCompiler_temp}_normalizeTimeUnit\x26\x26(dateExpr[lastTimeUnit]+\x3d\n\x22+1\x22);var JSCompiler_temp\x3ddateExpr;_normalizeTimeUnit\x3ddateTimeParts(JSCompiler_temp,!1).join(\x22, \x22);JSCompiler_temp\x3dJSCompiler_temp.utc?\x22utc(\x22.concat(_normalizeTimeUnit,\x22)\x22):\x22datetime(\x22.concat(_normalizeTimeUnit,\x22)\x22)}JSCompiler_temp\x3d\x22time(\x22+JSCompiler_temp+\x22)\x22}else JSCompiler_temp\x3dvgField(predicate,{expr:\x22datum\x22});if(isFieldEqualPredicate(predicate))return JSCompiler_temp+\x22\\x3d\\x3d\\x3d\x22+predicateValueExpr(predicate.equal,timeUnit);if(isFieldLTPredicate(predicate))return useInRange\x3dpredicate.lt,\x22\x22.concat(JSCompiler_temp,\n\x22\\x3c\x22).concat(predicateValueExpr(useInRange,timeUnit));if(isFieldGTPredicate(predicate))return useInRange\x3dpredicate.gt,\x22\x22.concat(JSCompiler_temp,\x22\\x3e\x22).concat(predicateValueExpr(useInRange,timeUnit));if(isFieldLTEPredicate(predicate))return useInRange\x3dpredicate.lte,\x22\x22.concat(JSCompiler_temp,\x22\\x3c\\x3d\x22).concat(predicateValueExpr(useInRange,timeUnit));if(isFieldGTEPredicate(predicate))return useInRange\x3dpredicate.gte,\x22\x22.concat(JSCompiler_temp,\x22\\x3e\\x3d\x22).concat(predicateValueExpr(useInRange,timeUnit));\nif(isFieldOneOfPredicate(predicate))return\x22indexof([\x22.concat(predicateValuesExpr(predicate.oneOf,timeUnit).join(\x22,\x22),\x22], \x22).concat(JSCompiler_temp,\x22) !\\x3d\\x3d -1\x22);if(predicate\x26\x26predicate.field\x26\x26void 0!\x3d\x3dpredicate.valid)return fieldValidPredicate(JSCompiler_temp,predicate.valid);if(isFieldRangePredicate(predicate)){({range:_normalizeTimeUnit}\x3dpredicate);predicate\x3disSignalRef(_normalizeTimeUnit)?{signal:\x22\x22.concat(_normalizeTimeUnit.signal,\x22[0]\x22)}:_normalizeTimeUnit[0];_normalizeTimeUnit\x3disSignalRef(_normalizeTimeUnit)?\n{signal:\x22\x22.concat(_normalizeTimeUnit.signal,\x22[1]\x22)}:_normalizeTimeUnit[1];if(null!\x3d\x3dpredicate\x26\x26null!\x3d\x3d_normalizeTimeUnit\x26\x26useInRange)return\x22inrange(\x22+JSCompiler_temp+\x22, [\x22+predicateValueExpr(predicate,timeUnit)+\x22, \x22+predicateValueExpr(_normalizeTimeUnit,timeUnit)+\x22])\x22;useInRange\x3d[];null!\x3d\x3dpredicate\x26\x26useInRange.push(\x22\x22.concat(JSCompiler_temp,\x22 \\x3e\\x3d \x22).concat(predicateValueExpr(predicate,timeUnit)));null!\x3d\x3d_normalizeTimeUnit\x26\x26useInRange.push(\x22\x22.concat(JSCompiler_temp,\x22 \\x3c\\x3d \x22).concat(predicateValueExpr(_normalizeTimeUnit,\ntimeUnit)));return 0\x3cuseInRange.length?useInRange.join(\x22 \\x26\\x26 \x22):\x22true\x22}throw Error(\x22Invalid field predicate: \x22.concat(JSON.stringify(predicate)));}function fieldValidPredicate(fieldExpr,valid){return void 0\x3d\x3d\x3dvalid||valid?\x22isValid(\x22.concat(fieldExpr,\x22) \\x26\\x26 isFinite(+\x22).concat(fieldExpr,\x22)\x22):\x22!isValid(\x22.concat(fieldExpr,\x22) || !isFinite(+\x22).concat(fieldExpr,\x22)\x22)}function normalizePredicate(f){if(isFieldPredicate(f)\x26\x26f.timeUnit){var _normalizeTimeUnit2;return Object.assign({},f,{timeUnit:null\x3d\x3d\x3d\n(_normalizeTimeUnit2\x3dnormalizeTimeUnit(f.timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit2?void 0:_normalizeTimeUnit2.unit})}return f}function getFullName(type){if(type)switch(type\x3dtype.toLowerCase(),type){case \x22q\x22:case \x22quantitative\x22:return\x22quantitative\x22;case \x22t\x22:case \x22temporal\x22:return\x22temporal\x22;case \x22o\x22:case \x22ordinal\x22:return\x22ordinal\x22;case \x22n\x22:case \x22nominal\x22:return\x22nominal\x22;case \x22geojson\x22:return\x22geojson\x22}}function isSelectionDomain(domain){return null\x3d\x3d\x3ddomain||void 0\x3d\x3d\x3ddomain?void 0:domain.selection}function scaleTypeSupportProperty(scaleType,\npropName){switch(propName){case \x22type\x22:case \x22domain\x22:case \x22reverse\x22:case \x22range\x22:return!0;case \x22scheme\x22:case \x22interpolate\x22:return!contains([\x22point\x22,\x22band\x22,\x22identity\x22],scaleType);case \x22bins\x22:return!contains([\x22point\x22,\x22band\x22,\x22identity\x22,\x22ordinal\x22],scaleType);case \x22round\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||\x22band\x22\x3d\x3d\x3dscaleType||\x22point\x22\x3d\x3d\x3dscaleType;case \x22padding\x22:case \x22rangeMin\x22:case \x22rangeMax\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||contains([\x22point\x22,\x22band\x22],scaleType);case \x22paddingOuter\x22:case \x22align\x22:return contains([\x22point\x22,\n\x22band\x22],scaleType);case \x22paddingInner\x22:return\x22band\x22\x3d\x3d\x3dscaleType;case \x22domainMax\x22:case \x22domainMid\x22:case \x22domainMin\x22:case \x22clamp\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX;case \x22nice\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||\x22quantize\x22\x3d\x3d\x3dscaleType||\x22threshold\x22\x3d\x3d\x3dscaleType;case \x22exponent\x22:return\x22pow\x22\x3d\x3d\x3dscaleType;case \x22base\x22:return\x22log\x22\x3d\x3d\x3dscaleType;case \x22constant\x22:return\x22symlog\x22\x3d\x3d\x3dscaleType;case \x22zero\x22:return scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26!contains([\x22log\x22,\x22time\x22,\x22utc\x22,\x22threshold\x22,\n\x22quantile\x22],scaleType)}}function channelScalePropertyIncompatability(channel,propName){switch(propName){case \x22interpolate\x22:case \x22scheme\x22:case \x22domainMid\x22:if(!isColorChannel(channel))return\x27Cannot use the scale property \x22\x27.concat(channel,\x27\x22 with non-color channel.\x27)}}function channelSupportScaleType(channel,scaleType){if(!SCALE_CHANNEL_INDEX[channel])return!1;switch(channel){case \x22x\x22:case \x22y\x22:case \x22theta\x22:case \x22radius\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||contains([\x22band\x22,\x22point\x22],scaleType);\ncase \x22size\x22:case \x22strokeWidth\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22angle\x22:return scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX||scaleType in CONTINUOUS_TO_DISCRETE_INDEX||contains([\x22band\x22,\x22point\x22,\x22ordinal\x22],scaleType);case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22band\x22!\x3d\x3dscaleType;case \x22strokeDash\x22:return\x22ordinal\x22\x3d\x3d\x3dscaleType||scaleType in CONTINUOUS_TO_DISCRETE_INDEX;case \x22shape\x22:return\x22ordinal\x22\x3d\x3d\x3dscaleType}}function isExprRef(o){return o\x26\x26!!o.expr}function replaceExprRefInIndex(index){const props\x3d\nkeys$jscomp$0(index||{}),newIndex\x3d{};for(const prop of props)newIndex[prop]\x3dsignalRefOrValue(index[prop]);return newIndex}function isPathMark(m){return contains([\x22line\x22,\x22area\x22,\x22trail\x22],m)}function isMarkDef(mark){return mark.type}function midPointRefWithPositionInvalidTest(params){const {channel,channelDef,markDef,scale,config}\x3dparams;params\x3dmidPoint(params);return isFieldDef(channelDef)\x26\x26!isCountingAggregateOp(channelDef.aggregate)\x26\x26scale\x26\x26scale.get(\x22type\x22)in CONTINUOUS_TO_CONTINUOUS_INDEX\x26\x26!1\x3d\x3d\x3d\nscale.get(\x22zero\x22)?wrapPositionInvalidTest({fieldDef:channelDef,channel,markDef,ref:params,config}):params}function wrapPositionInvalidTest($jscomp$destructuring$var17){var {fieldDef,channel,markDef,ref,config}\x3d$jscomp$destructuring$var17;if(isPathMark(markDef.type)||null\x3d\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,markDef,config))return ref;{$jscomp$destructuring$var17\x3dfieldInvalidPredicate(fieldDef,!0);const zeroValueRef\x3d\x22y\x22\x3d\x3d\x3dgetMainRangeChannel(channel)?{field:{group:\x22height\x22}}:{value:0};$jscomp$destructuring$var17\x3d\nObject.assign({},{test:$jscomp$destructuring$var17},zeroValueRef)}return[$jscomp$destructuring$var17,ref]}function fieldInvalidPredicate(field,invalid){invalid\x3dvoid 0\x3d\x3d\x3dinvalid?!0:invalid;return fieldValidPredicate(isString(field)?field:vgField(field,{expr:\x22datum\x22}),!invalid)}function valueRefForFieldOrDatumDef(fieldDef,scaleName,opt,encode){const ref\x3d{};scaleName\x26\x26(ref.scale\x3dscaleName);isDatumDef(fieldDef)?({datum:fieldDef}\x3dfieldDef,isDateTime(fieldDef)?ref.signal\x3ddateTimeToExpr(fieldDef):isSignalRef(fieldDef)?\nref.signal\x3dfieldDef.signal:isExprRef(fieldDef)?ref.signal\x3dfieldDef.expr:ref.value\x3dfieldDef):ref.field\x3dvgField(fieldDef,opt);if(encode){const {offset,band}\x3dencode;offset\x26\x26(ref.offset\x3doffset);band\x26\x26(ref.band\x3dband)}return ref}function interpolatedSignalRef($jscomp$destructuring$var18){var {scaleName,fieldOrDatumDef,fieldOrDatumDef2,offset,startSuffix,band\x3d.5}\x3d$jscomp$destructuring$var18,expr\x3d0\x3cband\x26\x261\x3eband?\x22datum\x22:void 0;$jscomp$destructuring$var18\x3dvgField(fieldOrDatumDef,{expr,suffix:startSuffix});\nconst end\x3dvoid 0!\x3d\x3dfieldOrDatumDef2?vgField(fieldOrDatumDef2,{expr}):vgField(fieldOrDatumDef,{suffix:\x22end\x22,expr});expr\x3d{};0\x3d\x3d\x3dband||1\x3d\x3d\x3dband?(expr.scale\x3dscaleName,expr.field\x3d0\x3d\x3d\x3dband?$jscomp$destructuring$var18:end):($jscomp$destructuring$var18\x3d\x22\x22.concat(band,\x22 * \x22).concat($jscomp$destructuring$var18,\x22 + \x22).concat(1-band,\x22 * \x22).concat(end),expr.signal\x3d\x27scale(\x22\x27.concat(scaleName,\x27\x22, \x27).concat($jscomp$destructuring$var18,\x22)\x22));offset\x26\x26(expr.offset\x3doffset);return expr}function midPoint($jscomp$destructuring$var19){var {channel,\nchannelDef,channel2Def,markDef,config,scaleName,scale,stack,offset,defaultRef,band}\x3d$jscomp$destructuring$var19;if(channelDef){if(isFieldOrDatumDef(channelDef)){var _ref,_band2;if(isTypedFieldDef(channelDef)){var _band;band\x3dnull!\x3d\x3d(_band\x3dband)\x26\x26void 0!\x3d\x3d_band?_band:getBand({channel,fieldDef:channelDef,fieldDef2:channel2Def,markDef,stack,config,isMidPoint:!0});const {bin,timeUnit,type}\x3dchannelDef;if(isBinning(bin)||band\x26\x26timeUnit\x26\x26\x22temporal\x22\x3d\x3d\x3dtype)return stack\x26\x26stack.impute?valueRefForFieldOrDatumDef(channelDef,\nscaleName,{binSuffix:\x22mid\x22},{offset}):band?interpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,band,offset}):valueRefForFieldOrDatumDef(channelDef,scaleName,binRequiresRange(channelDef,channel)?{binSuffix:\x22range\x22}:{},{offset});if(isBinned(bin)){if(isFieldDef(channel2Def))return interpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,fieldOrDatumDef2:channel2Def,band,offset});warn(channelRequiredForBinned(\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22))}}$jscomp$destructuring$var19\x3dnull\x3d\x3d\x3dscale||void 0\x3d\x3d\x3dscale?\nvoid 0:scale.get(\x22type\x22);return valueRefForFieldOrDatumDef(channelDef,scaleName,$jscomp$destructuring$var19 in DISCRETE_DOMAIN_INDEX?{binSuffix:\x22range\x22}:{},{offset,band:\x22band\x22\x3d\x3d\x3d$jscomp$destructuring$var19?null!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_band2\x3dband)\x26\x26void 0!\x3d\x3d_band2?_band2:channelDef.band)\x26\x26void 0!\x3d\x3d_ref?_ref:.5:void 0})}if(isValueDef(channelDef))return _ref\x3doffset?{offset}:{},Object.assign({},widthHeightValueOrSignalRef(channel,channelDef.value),_ref)}\x22function\x22\x3d\x3d\x3dtypeof defaultRef\x26\x26(defaultRef\x3ddefaultRef());\nreturn defaultRef?Object.assign({},defaultRef,offset?{offset}:{}):defaultRef}function widthHeightValueOrSignalRef(channel,value){return contains([\x22x\x22,\x22x2\x22],channel)\x26\x26\x22width\x22\x3d\x3d\x3dvalue?{field:{group:\x22width\x22}}:contains([\x22y\x22,\x22y2\x22],channel)\x26\x26\x22height\x22\x3d\x3d\x3dvalue?{field:{group:\x22height\x22}}:signalOrValueRef(value)}function isCustomFormatType(formatType){return formatType\x26\x26\x22number\x22!\x3d\x3dformatType\x26\x26\x22time\x22!\x3d\x3dformatType}function customFormatExpr(formatType,field,format){return\x22\x22.concat(formatType,\x22(\x22).concat(field).concat(format?\n\x22, \x22.concat(JSON.stringify(format)):\x22\x22,\x22)\x22)}function formatSignalRef($jscomp$destructuring$var20){var {fieldOrDatumDef,format,formatType,expr,normalizeStack,config}\x3d$jscomp$destructuring$var20;if(isCustomFormatType(formatType))return formatCustomType({fieldOrDatumDef,format,formatType,expr,config});$jscomp$destructuring$var20\x3dfieldToFormat(fieldOrDatumDef,expr,normalizeStack);if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)){var _normalizeTimeUnit,_fieldOrDatumDef$scal;var timeUnit\x3disFieldDef(fieldOrDatumDef)?\nnull\x3d\x3d\x3d(_normalizeTimeUnit\x3dnormalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit?void 0:_normalizeTimeUnit.unit:void 0,format$jscomp$0\x3dformat,rawTimeFormat\x3dconfig.timeFormat;_normalizeTimeUnit\x3disScaleFieldDef(fieldOrDatumDef)\x26\x26(null\x3d\x3d\x3d(_fieldOrDatumDef$scal\x3dfieldOrDatumDef.scale)||void 0\x3d\x3d\x3d_fieldOrDatumDef$scal?void 0:_fieldOrDatumDef$scal.type)\x3d\x3d\x3dScaleType.UTC;!timeUnit||format$jscomp$0?(format$jscomp$0\x3disString(format$jscomp$0)?format$jscomp$0:rawTimeFormat,$jscomp$destructuring$var20\x3d\n\x22\x22.concat(_normalizeTimeUnit?\x22utc\x22:\x22time\x22,\x22Format(\x22).concat($jscomp$destructuring$var20,\x22, \x27\x22).concat(format$jscomp$0,\x22\x27)\x22)):timeUnit?(_fieldOrDatumDef$scal\x3dtimeUnitSpecifierExpression(timeUnit),timeUnit\x3d_normalizeTimeUnit||timeUnit.startsWith(\x22utc\x22),$jscomp$destructuring$var20\x3d\x22\x22.concat(timeUnit?\x22utc\x22:\x22time\x22,\x22Format(\x22).concat($jscomp$destructuring$var20,\x22, \x22).concat(_fieldOrDatumDef$scal,\x22)\x22)):$jscomp$destructuring$var20\x3dvoid 0;return $jscomp$destructuring$var20?{signal:$jscomp$destructuring$var20}:\nvoid 0}format\x3dnumberFormat(channelDefType(fieldOrDatumDef),format,config);return isFieldDef(fieldOrDatumDef)\x26\x26isBinning(fieldOrDatumDef.bin)?(_fieldOrDatumDef$scal\x3dvgField(fieldOrDatumDef,{expr,binSuffix:\x22end\x22}),{signal:binFormatExpression($jscomp$destructuring$var20,_fieldOrDatumDef$scal,format,formatType,config)}):format||\x22quantitative\x22\x3d\x3d\x3dchannelDefType(fieldOrDatumDef)?{signal:\x22\x22.concat(formatExpr($jscomp$destructuring$var20,format))}:{signal:\x22isValid(\x22.concat($jscomp$destructuring$var20,\x22) ? \x22).concat($jscomp$destructuring$var20,\n\x27 : \x22\x22+\x27).concat($jscomp$destructuring$var20)}}function fieldToFormat(fieldOrDatumDef,expr,normalizeStack){if(isFieldDef(fieldOrDatumDef))return normalizeStack?\x22\x22.concat(vgField(fieldOrDatumDef,{expr,suffix:\x22end\x22}),\x22-\x22).concat(vgField(fieldOrDatumDef,{expr,suffix:\x22start\x22})):vgField(fieldOrDatumDef,{expr});({datum:fieldOrDatumDef}\x3dfieldOrDatumDef);fieldOrDatumDef\x3disDateTime(fieldOrDatumDef)?dateTimeToExpr(fieldOrDatumDef):\x22\x22.concat(JSON.stringify(fieldOrDatumDef));return fieldOrDatumDef}function formatCustomType($jscomp$destructuring$var21){var {fieldOrDatumDef,\nformat,formatType,expr,normalizeStack,config,field}\x3d$jscomp$destructuring$var21,_field;field\x3dnull!\x3d\x3d(_field\x3dfield)\x26\x26void 0!\x3d\x3d_field?_field:fieldToFormat(fieldOrDatumDef,expr,normalizeStack);return isFieldDef(fieldOrDatumDef)\x26\x26isBinning(fieldOrDatumDef.bin)?($jscomp$destructuring$var21\x3dvgField(fieldOrDatumDef,{expr,binSuffix:\x22end\x22}),{signal:binFormatExpression(field,$jscomp$destructuring$var21,format,formatType,config)}):{signal:customFormatExpr(formatType,field,format)}}function guideFormat(fieldOrDatumDef,\ntype,format,formatType,config,omitTimeFormatConfig){if(!isCustomFormatType(formatType)){if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)){var _normalizeTimeUnit2;fieldOrDatumDef\x3disFieldDef(fieldOrDatumDef)?null\x3d\x3d\x3d(_normalizeTimeUnit2\x3dnormalizeTimeUnit(fieldOrDatumDef.timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit2?void 0:_normalizeTimeUnit2.unit:void 0;format\x3dformat?format:fieldOrDatumDef?{signal:timeUnitSpecifierExpression(fieldOrDatumDef)}:omitTimeFormatConfig?void 0:config.timeFormat;return format}return numberFormat(type,\nformat,config)}}function guideFormatType(formatType,fieldOrDatumDef,scaleType){if(formatType\x26\x26(isSignalRef(formatType)||\x22number\x22\x3d\x3d\x3dformatType||\x22time\x22\x3d\x3d\x3dformatType))return formatType;if(isFieldOrDatumDefForTimeFormat(fieldOrDatumDef)\x26\x26\x22time\x22!\x3d\x3dscaleType\x26\x26\x22utc\x22!\x3d\x3dscaleType)return\x22time\x22}function numberFormat(type,specifiedFormat,config){if(isString(specifiedFormat))return specifiedFormat;if(\x22quantitative\x22\x3d\x3d\x3dtype)return config.numberFormat}function formatExpr(field,format){return\x22format(\x22.concat(field,\n\x27, \x22\x27).concat(format||\x22\x22,\x27\x22)\x27)}function binNumberFormatExpr(field,format,formatType,config){var _ref;return isCustomFormatType(formatType)?customFormatExpr(formatType,field,format):formatExpr(field,null!\x3d\x3d(_ref\x3disString(format)?format:void 0)\x26\x26void 0!\x3d\x3d_ref?_ref:config.numberFormat)}function binFormatExpression(startField,endField,format,formatType,config){const start\x3dbinNumberFormatExpr(startField,format,formatType,config);endField\x3dbinNumberFormatExpr(endField,format,formatType,config);return\x22\x22.concat(fieldValidPredicate(startField,\n!1),\x27 ? \x22null\x22 : \x27).concat(start,\x27 + \x22\x27).concat(\x22 \u2013 \x22,\x27\x22 + \x27).concat(endField)}function isSortField(sort){return!!sort\x26\x26(\x22count\x22\x3d\x3d\x3dsort.op||!!sort.field)}function isSortArray(sort){return!!sort\x26\x26isArray(sort)}function isFacetMapping(f){return\x22row\x22in f||\x22column\x22in f}function toFieldDefBase(fieldDef){const {field,timeUnit,bin,aggregate}\x3dfieldDef;return Object.assign({},timeUnit?{timeUnit}:{},bin?{bin}:{},aggregate?{aggregate}:{},{field})}function getBand($jscomp$destructuring$var22){var {channel,fieldDef,\nfieldDef2,markDef:mark,stack,config,isMidPoint}\x3d$jscomp$destructuring$var22;if(isFieldOrDatumDef(fieldDef)\x26\x26void 0!\x3d\x3dfieldDef.band)return fieldDef.band;if(isFieldDef(fieldDef)){const {timeUnit,bin}\x3dfieldDef;if(timeUnit\x26\x26!fieldDef2)return isMidPoint?getMarkConfig(\x22timeUnitBandPosition\x22,mark,config):contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22arc\x22],mark.type)?getMarkConfig(\x22timeUnitBand\x22,mark,config):0;if(isBinning(bin))return contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22arc\x22],mark.type)\x26\x26!isMidPoint?1:.5}if((null\x3d\x3d\x3dstack||\nvoid 0\x3d\x3d\x3dstack?void 0:stack.fieldChannel)\x3d\x3d\x3dchannel\x26\x26isMidPoint)return.5}function hasBand(channel,fieldDef,fieldDef2,stack,markDef,config){return isBinning(fieldDef.bin)||fieldDef.timeUnit\x26\x26isTypedFieldDef(fieldDef)\x26\x26\x22temporal\x22\x3d\x3d\x3dfieldDef.type?!!getBand({channel,fieldDef,fieldDef2,stack,markDef,config}):!1}function hasConditionalFieldDef(channelDef){channelDef\x3dchannelDef\x26\x26channelDef.condition;return!!channelDef\x26\x26!isArray(channelDef)\x26\x26isFieldDef(channelDef)}function hasConditionalFieldOrDatumDef(channelDef){channelDef\x3d\nchannelDef\x26\x26channelDef.condition;return!!channelDef\x26\x26!isArray(channelDef)\x26\x26isFieldOrDatumDef(channelDef)}function isFieldDef(channelDef){return!!channelDef\x26\x26(!!channelDef.field||\x22count\x22\x3d\x3d\x3dchannelDef.aggregate)}function channelDefType(channelDef){return channelDef\x26\x26channelDef.type}function isDatumDef(channelDef){return!!channelDef\x26\x26\x22datum\x22in channelDef}function isContinuousFieldOrDatumDef(cd){return isTypedFieldDef(cd)\x26\x26!isDiscrete(cd)||isNumericDataDef(cd)}function isNumericDataDef(cd){return isDatumDef(cd)\x26\x26\nisNumber(cd.datum)}function isFieldOrDatumDef(channelDef){return isFieldDef(channelDef)||isDatumDef(channelDef)}function isTypedFieldDef(channelDef){return!!channelDef\x26\x26(\x22field\x22in channelDef||\x22count\x22\x3d\x3d\x3dchannelDef.aggregate)\x26\x26\x22type\x22in channelDef}function isValueDef(channelDef){return channelDef\x26\x26\x22value\x22in channelDef\x26\x26\x22value\x22in channelDef}function isScaleFieldDef(channelDef){return!!channelDef\x26\x26(\x22scale\x22in channelDef||\x22sort\x22in channelDef)}function isPositionFieldOrDatumDef(channelDef){return channelDef\x26\x26\n(\x22axis\x22in channelDef||\x22stack\x22in channelDef||\x22impute\x22in channelDef)}function isStringFieldOrDatumDef(channelDef){return!!channelDef\x26\x26(\x22format\x22in channelDef||\x22formatType\x22in channelDef)}function toStringFieldDef(fieldDef){return omit(fieldDef,[\x22legend\x22,\x22axis\x22,\x22header\x22,\x22scale\x22])}function vgField(fieldDef,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;let field\x3dfieldDef.field;const prefix\x3dopt.prefix;let suffix\x3dopt.suffix,argAccessor\x3d\x22\x22;if(\x22count\x22\x3d\x3d\x3dfieldDef.aggregate)field\x3dinternalField(\x22count\x22);else{let fn;if(!opt.nofn)if(\x22op\x22in\nfieldDef)fn\x3dfieldDef.op;else{const {bin,aggregate,timeUnit}\x3dfieldDef;if(isBinning(bin)){var _opt$binSuffix,_opt$suffix;fn\x3dbinToString(bin);suffix\x3d(null!\x3d\x3d(_opt$binSuffix\x3dopt.binSuffix)\x26\x26void 0!\x3d\x3d_opt$binSuffix?_opt$binSuffix:\x22\x22)+(null!\x3d\x3d(_opt$suffix\x3dopt.suffix)\x26\x26void 0!\x3d\x3d_opt$suffix?_opt$suffix:\x22\x22)}else if(aggregate)isArgmaxDef(aggregate)?(argAccessor\x3d\x27[\x22\x27.concat(field,\x27\x22]\x27),field\x3d\x22argmax_\x22.concat(aggregate.argmax)):isArgminDef(aggregate)?(argAccessor\x3d\x27[\x22\x27.concat(field,\x27\x22]\x27),field\x3d\x22argmin_\x22.concat(aggregate.argmin)):\nfn\x3dString(aggregate);else if(timeUnit){var _opt$suffix2;fn\x3dtimeUnitToString(timeUnit);suffix\x3d(!contains([\x22range\x22,\x22mid\x22],opt.binSuffix)\x26\x26opt.binSuffix||\x22\x22)+(null!\x3d\x3d(_opt$suffix2\x3dopt.suffix)\x26\x26void 0!\x3d\x3d_opt$suffix2?_opt$suffix2:\x22\x22)}}fn\x26\x26(field\x3dfield?\x22\x22.concat(fn,\x22_\x22).concat(field):fn)}suffix\x26\x26(field\x3d\x22\x22.concat(field,\x22_\x22).concat(suffix));prefix\x26\x26(field\x3d\x22\x22.concat(prefix,\x22_\x22).concat(field));return opt.forAs?removePathFromField(field):opt.expr?flatAccessWithDatum(field,opt.expr)+argAccessor:replacePathInField(field)+\nargAccessor}function isDiscrete(def){switch(def.type){case \x22nominal\x22:case \x22ordinal\x22:case \x22geojson\x22:return!0;case \x22quantitative\x22:return isFieldDef(def)\x26\x26!!def.bin;case \x22temporal\x22:return!1}throw Error(\x27Invalid field type \x22\x27.concat(def.type,\x27\x22.\x27));}function verbalTitleFormatter(fieldDef,config){const {field,bin,timeUnit,aggregate}\x3dfieldDef;if(\x22count\x22\x3d\x3d\x3daggregate)return config.countTitle;if(isBinning(bin))return\x22\x22.concat(field,\x22 (binned)\x22);if(timeUnit){var _normalizeTimeUnit;if(fieldDef\x3dnull\x3d\x3d\x3d(_normalizeTimeUnit\x3d\nnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit?void 0:_normalizeTimeUnit.unit)return\x22\x22.concat(field,\x22 (\x22).concat(getTimeUnitParts(fieldDef).join(\x22-\x22),\x22)\x22)}else if(aggregate)return isArgmaxDef(aggregate)?\x22\x22.concat(field,\x22 for max \x22).concat(aggregate.argmax):isArgminDef(aggregate)?\x22\x22.concat(field,\x22 for min \x22).concat(aggregate.argmin):\x22\x22.concat(titleCase(aggregate),\x22 of \x22).concat(field);return field}function title$jscomp$0(fieldOrDatumDef,config,$jscomp$destructuring$var23){var {allowDisabling,\nincludeDefault\x3d!0}\x3d$jscomp$destructuring$var23,_getGuide;$jscomp$destructuring$var23\x3dnull\x3d\x3d\x3d(_getGuide\x3dgetGuide(fieldOrDatumDef))||void 0\x3d\x3d\x3d_getGuide?void 0:_getGuide.title;if(!isFieldDef(fieldOrDatumDef))return $jscomp$destructuring$var23;config\x3dincludeDefault?titleFormatter(fieldOrDatumDef,config):void 0;if(allowDisabling)return getFirstDefined($jscomp$destructuring$var23,fieldOrDatumDef.title,config);var _ref;return null!\x3d\x3d(_ref\x3dnull!\x3d\x3d$jscomp$destructuring$var23\x26\x26void 0!\x3d\x3d$jscomp$destructuring$var23?\n$jscomp$destructuring$var23:fieldOrDatumDef.title)\x26\x26void 0!\x3d\x3d_ref?_ref:config}function getGuide(fieldDef){if(isPositionFieldOrDatumDef(fieldDef)\x26\x26fieldDef.axis)return fieldDef.axis;if(fieldDef\x26\x26\x22legend\x22in fieldDef\x26\x26fieldDef.legend)return fieldDef.legend;if(fieldDef\x26\x26\x22header\x22in fieldDef\x26\x26fieldDef.header)return fieldDef.header}function getFormatMixins(fieldDef){if(isStringFieldOrDatumDef(fieldDef)){const {format,formatType}\x3dfieldDef;return{format,formatType}}{var _getGuide2;fieldDef\x3dnull!\x3d\x3d(_getGuide2\x3d\ngetGuide(fieldDef))\x26\x26void 0!\x3d\x3d_getGuide2?_getGuide2:{};const {format,formatType}\x3dfieldDef;return{format,formatType}}}function defaultType(fieldDef,channel){var _fieldDef$scale;switch(channel){case \x22latitude\x22:case \x22longitude\x22:return\x22quantitative\x22;case \x22row\x22:case \x22column\x22:case \x22facet\x22:case \x22shape\x22:case \x22strokeDash\x22:return\x22nominal\x22;case \x22order\x22:return\x22ordinal\x22}if(\x22sort\x22in fieldDef\x26\x26isArray(fieldDef.sort))return\x22ordinal\x22;const {aggregate,bin,timeUnit}\x3dfieldDef;if(timeUnit)return\x22temporal\x22;if(bin||aggregate\x26\x26\n!isArgmaxDef(aggregate)\x26\x26!isArgminDef(aggregate))return\x22quantitative\x22;if(isScaleFieldDef(fieldDef)\x26\x26(null\x3d\x3d\x3d(_fieldDef$scale\x3dfieldDef.scale)||void 0\x3d\x3d\x3d_fieldDef$scale?0:_fieldDef$scale.type))switch(SCALE_CATEGORY_INDEX[fieldDef.scale.type]){case \x22numeric\x22:case \x22discretizing\x22:return\x22quantitative\x22;case \x22time\x22:return\x22temporal\x22}return\x22nominal\x22}function getFieldDef(channelDef){if(isFieldDef(channelDef))return channelDef;if(hasConditionalFieldDef(channelDef))return channelDef.condition}function getFieldOrDatumDef(channelDef){if(isFieldOrDatumDef(channelDef))return channelDef;\nif(hasConditionalFieldOrDatumDef(channelDef))return channelDef.condition}function initChannelDef(channelDef,channel,config,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;return isString(channelDef)||isNumber(channelDef)||isBoolean(channelDef)?(config\x3disString(channelDef)?\x22string\x22:isNumber(channelDef)?\x22number\x22:\x22boolean\x22,channel\x3d\x22Channel \x22.concat(channel,\x22 is a \x22).concat(config,\x22. Converted to {value: \x22).concat(stringify(channelDef),\x22}.\x22),warn(channel),{value:channelDef}):isFieldOrDatumDef(channelDef)?initFieldOrDatumDef(channelDef,\nchannel,config,opt):hasConditionalFieldOrDatumDef(channelDef)?Object.assign({},channelDef,{condition:initFieldOrDatumDef(channelDef.condition,channel,config,opt)}):channelDef}function initFieldOrDatumDef(fd,channel,config,opt){if(isStringFieldOrDatumDef(fd)){var $jscomp$destructuring$var25\x3dObject.assign({},fd),formatType\x3dfd.formatType;$jscomp$destructuring$var25\x3d(delete $jscomp$destructuring$var25.format,delete $jscomp$destructuring$var25.formatType,$jscomp$destructuring$var25);if(isCustomFormatType(formatType)\x26\x26\n!config.customFormatTypes)return warn(customFormatTypeNotAllowed(channel)),initFieldOrDatumDef($jscomp$destructuring$var25,channel,config,opt)}else if((formatType\x3disPositionFieldOrDatumDef(fd)?\x22axis\x22:fd\x26\x26\x22legend\x22in fd?\x22legend\x22:fd\x26\x26\x22header\x22in fd?\x22header\x22:null)\x26\x26fd[formatType]){var $jscomp$destructuring$var26\x3dfd[formatType];$jscomp$destructuring$var25\x3dObject.assign({},$jscomp$destructuring$var26);$jscomp$destructuring$var26\x3d$jscomp$destructuring$var26.formatType;$jscomp$destructuring$var25\x3d(delete $jscomp$destructuring$var25.format,\ndelete $jscomp$destructuring$var25.formatType,$jscomp$destructuring$var25);if(isCustomFormatType($jscomp$destructuring$var26)\x26\x26!config.customFormatTypes)return warn(customFormatTypeNotAllowed(channel)),initFieldOrDatumDef(Object.assign({},fd,{[formatType]:$jscomp$destructuring$var25}),channel,config,opt)}if(isFieldDef(fd))return initFieldDef(fd,channel,opt);channel\x3dfd.type;channel||({datum:channel}\x3dfd,channel\x3disNumber(channel)?\x22quantitative\x22:isString(channel)?\x22nominal\x22:isDateTime(channel)?\x22temporal\x22:\nvoid 0,fd\x3dObject.assign({},fd,{type:channel}));return fd}function initFieldDef(fd,channel,$jscomp$destructuring$var28){({compositeMark:$jscomp$destructuring$var28\x3d!1}\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var28?{}:$jscomp$destructuring$var28);const {aggregate,timeUnit,bin,field}\x3dfd;fd\x3dObject.assign({},fd);$jscomp$destructuring$var28||!aggregate||isAggregateOp(aggregate)||isArgmaxDef(aggregate)||isArgminDef(aggregate)||(warn(\x27Invalid aggregation operator \x22\x27.concat(aggregate,\x27\x22.\x27)),delete fd.aggregate);timeUnit\x26\x26\n(fd.timeUnit\x3dnormalizeTimeUnit(timeUnit));field\x26\x26(fd.field\x3d\x22\x22.concat(field));isBinning(bin)\x26\x26(fd.bin\x3dnormalizeBin(bin,channel));!isBinned(bin)||channel in POSITION_SCALE_CHANNEL_INDEX||warn(\x22Channel \x22.concat(channel,\x27 should not be used with \x22binned\x22 bin.\x27));if(isTypedFieldDef(fd)){({type:$jscomp$destructuring$var28}\x3dfd);var fullType\x3dgetFullName($jscomp$destructuring$var28);$jscomp$destructuring$var28!\x3d\x3dfullType\x26\x26(fd.type\x3dfullType);\x22quantitative\x22!\x3d\x3d$jscomp$destructuring$var28\x26\x26isCountingAggregateOp(aggregate)\x26\x26\n($jscomp$destructuring$var28\x3d\x27Invalid field type \x22\x27.concat($jscomp$destructuring$var28,\x27\x22 for aggregate: \x22\x27).concat(aggregate,\x27\x22, using \x22quantitative\x22 instead.\x27),warn($jscomp$destructuring$var28),fd.type\x3d\x22quantitative\x22)}else isSecondaryRangeChannel(channel)||($jscomp$destructuring$var28\x3ddefaultType(fd,channel),fd.type\x3d$jscomp$destructuring$var28);if(isTypedFieldDef(fd)){const {compatible,warning}\x3dchannelCompatibility(fd,channel)||{};!1\x3d\x3d\x3dcompatible\x26\x26warn(warning)}if(\x22sort\x22in fd\x26\x26isString(fd.sort)){({sort:channel}\x3d\nfd);if(channel in SORT_BY_CHANNEL_INDEX)return Object.assign({},fd,{sort:{encoding:channel}});$jscomp$destructuring$var28\x3dchannel.substr(1);if(\x22-\x22\x3d\x3d\x3dchannel.charAt(0)\x26\x26$jscomp$destructuring$var28 in SORT_BY_CHANNEL_INDEX)return Object.assign({},fd,{sort:{encoding:$jscomp$destructuring$var28,order:\x22descending\x22}})}return fd\x26\x26\x22header\x22in fd\x26\x26({header:channel}\x3dfd,fullType\x3dchannel,$jscomp$destructuring$var28\x3dObject.assign({},fullType),fullType\x3dfullType.orient,$jscomp$destructuring$var28\x3d(delete $jscomp$destructuring$var28.orient,\n$jscomp$destructuring$var28),fullType)?Object.assign({},fd,{header:Object.assign({},$jscomp$destructuring$var28,{labelOrient:channel.labelOrient||fullType,titleOrient:channel.titleOrient||fullType})}):fd}function normalizeBin(bin,channel){return isBoolean(bin)?{maxbins:autoMaxBins(channel)}:\x22binned\x22\x3d\x3d\x3dbin?{binned:!0}:bin.maxbins||bin.step?bin:Object.assign({},bin,{maxbins:autoMaxBins(channel)})}function channelCompatibility(fieldDef,channel){const type\x3dfieldDef.type;if(\x22geojson\x22\x3d\x3d\x3dtype\x26\x26\x22shape\x22!\x3d\x3d\nchannel)return{compatible:!1,warning:\x22Channel \x22.concat(channel,\x22 should not be used with a geojson data.\x22)};switch(channel){case \x22row\x22:case \x22column\x22:case \x22facet\x22:return isDiscrete(fieldDef)?COMPATIBLE:{compatible:!1,warning:\x22\x22.concat(channel,\x22 encoding should be discrete (ordinal / nominal / binned).\x22)};case \x22x\x22:case \x22y\x22:case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22text\x22:case \x22detail\x22:case \x22key\x22:case \x22tooltip\x22:case \x22href\x22:case \x22url\x22:case \x22angle\x22:case \x22theta\x22:case \x22radius\x22:case \x22description\x22:return COMPATIBLE;\ncase \x22longitude\x22:case \x22longitude2\x22:case \x22latitude\x22:case \x22latitude2\x22:return\x22quantitative\x22!\x3d\x3dtype?{compatible:!1,warning:\x22Channel \x22.concat(channel,\x22 should be used with a quantitative field only, not \x22).concat(fieldDef.type,\x22 field.\x22)}:COMPATIBLE;case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeWidth\x22:case \x22size\x22:case \x22theta2\x22:case \x22radius2\x22:case \x22x2\x22:case \x22y2\x22:return\x22nominal\x22!\x3d\x3dtype||fieldDef.sort?COMPATIBLE:{compatible:!1,warning:\x22Channel \x22.concat(channel,\x22 should not be used with an unsorted discrete field.\x22)};\ncase \x22strokeDash\x22:return contains([\x22ordinal\x22,\x22nominal\x22],fieldDef.type)?COMPATIBLE:{compatible:!1,warning:\x22StrokeDash channel should be used with only discrete data.\x22};case \x22shape\x22:return contains([\x22ordinal\x22,\x22nominal\x22,\x22geojson\x22],fieldDef.type)?COMPATIBLE:{compatible:!1,warning:\x22Shape channel should be used with only either discrete or geojson data.\x22};case \x22order\x22:return\x22nominal\x22!\x3d\x3dfieldDef.type||\x22sort\x22in fieldDef?COMPATIBLE:{compatible:!1,warning:\x22Channel order is inappropriate for nominal field, which has no inherent order.\x22}}}\nfunction isFieldOrDatumDefForTimeFormat(fieldOrDatumDef){var {formatType}\x3dgetFormatMixins(fieldOrDatumDef),JSCompiler_temp;if(!(JSCompiler_temp\x3d\x22time\x22\x3d\x3d\x3dformatType)){if(formatType\x3d!formatType)formatType\x3dfieldOrDatumDef\x26\x26(\x22temporal\x22\x3d\x3d\x3dfieldOrDatumDef.type||isFieldDef(fieldOrDatumDef)\x26\x26!!fieldOrDatumDef.timeUnit);JSCompiler_temp\x3dformatType}return JSCompiler_temp}function valueExpr(v,$jscomp$destructuring$var31){var {timeUnit,type,wrapTime,undefinedIfExprNotRequired}\x3d$jscomp$destructuring$var31;var _normalizeTimeUnit2\x3d\n($jscomp$destructuring$var31\x3dtimeUnit\x26\x26(null\x3d\x3d\x3d(_normalizeTimeUnit2\x3dnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit2?void 0:_normalizeTimeUnit2.unit))||\x22temporal\x22\x3d\x3d\x3dtype;let expr;isExprRef(v)?expr\x3dv.expr:isSignalRef(v)?expr\x3dv.signal:isDateTime(v)?(_normalizeTimeUnit2\x3d!0,expr\x3ddateTimeToExpr(v)):(isString(v)||isNumber(v))\x26\x26_normalizeTimeUnit2\x26\x26(expr\x3d\x22datetime(\x22.concat(JSON.stringify(v),\x22)\x22),LOCAL_SINGLE_TIMEUNIT_INDEX[$jscomp$destructuring$var31]\x26\x26(isNumber(v)\x26\x261E4\x3ev||isString(v)\x26\x26isNaN(Date.parse(v)))\x26\x26\n(expr\x3ddateTimeToExpr({[$jscomp$destructuring$var31]:v})));return expr?wrapTime\x26\x26_normalizeTimeUnit2?\x22time(\x22.concat(expr,\x22)\x22):expr:undefinedIfExprNotRequired?void 0:JSON.stringify(v)}function valueArray(fieldOrDatumDef,values){const {type}\x3dfieldOrDatumDef;return values.map(v\x3d\x3e{const expr\x3dvalueExpr(v,{timeUnit:isFieldDef(fieldOrDatumDef)?fieldOrDatumDef.timeUnit:void 0,type,undefinedIfExprNotRequired:!0});return void 0!\x3d\x3dexpr?{signal:expr}:v})}function binRequiresRange(fieldDef,channel){return isBinning(fieldDef.bin)?\n!!SCALE_CHANNEL_INDEX[channel]\x26\x26contains([\x22ordinal\x22,\x22nominal\x22],fieldDef.type):(console.warn(\x22Only call this method for binned field defs.\x22),!1)}function extractTitleConfig(titleConfig){var $jscomp$destructuring$var33\x3dObject.assign({},titleConfig),anchor\x3dtitleConfig.anchor;const frame\x3dtitleConfig.frame,offset\x3dtitleConfig.offset,orient\x3dtitleConfig.orient;var color\x3dtitleConfig.color,subtitleColor\x3dtitleConfig.subtitleColor,subtitleFont\x3dtitleConfig.subtitleFont;const subtitleFontSize\x3dtitleConfig.subtitleFontSize,\nsubtitleFontStyle\x3dtitleConfig.subtitleFontStyle,subtitleFontWeight\x3dtitleConfig.subtitleFontWeight,subtitleLineHeight\x3dtitleConfig.subtitleLineHeight;titleConfig\x3dtitleConfig.subtitlePadding;$jscomp$destructuring$var33\x3d(delete $jscomp$destructuring$var33.anchor,delete $jscomp$destructuring$var33.frame,delete $jscomp$destructuring$var33.offset,delete $jscomp$destructuring$var33.orient,delete $jscomp$destructuring$var33.color,delete $jscomp$destructuring$var33.subtitleColor,delete $jscomp$destructuring$var33.subtitleFont,\ndelete $jscomp$destructuring$var33.subtitleFontSize,delete $jscomp$destructuring$var33.subtitleFontStyle,delete $jscomp$destructuring$var33.subtitleFontWeight,delete $jscomp$destructuring$var33.subtitleLineHeight,delete $jscomp$destructuring$var33.subtitlePadding,$jscomp$destructuring$var33);color\x3dObject.assign({},$jscomp$destructuring$var33,color?{fill:color}:{});anchor\x3dObject.assign({},anchor?{anchor}:{},frame?{frame}:{},offset?{offset}:{},orient?{orient}:{});subtitleColor\x3dObject.assign({},subtitleColor?\n{subtitleColor}:{},subtitleFont?{subtitleFont}:{},subtitleFontSize?{subtitleFontSize}:{},subtitleFontStyle?{subtitleFontStyle}:{},subtitleFontWeight?{subtitleFontWeight}:{},subtitleLineHeight?{subtitleLineHeight}:{},titleConfig?{subtitlePadding:titleConfig}:{});subtitleFont\x3dpick(color,[\x22align\x22,\x22baseline\x22,\x22dx\x22,\x22dy\x22,\x22limit\x22]);return{titleMarkConfig:color,subtitleMarkConfig:subtitleFont,nonMark:anchor,subtitle:subtitleColor}}function isText(v){return isString(v)||isArray(v)\x26\x26isString(v[0])}function signalOrValueRefWithCondition(val){const condition\x3d\nisArray(val.condition)?val.condition.map(conditionalSignalRefOrValue):conditionalSignalRefOrValue(val.condition);return Object.assign({},signalRefOrValue(val),{condition})}function signalRefOrValue(value){if(isExprRef(value)){var $jscomp$destructuring$var35\x3dObject.assign({},value);value\x3dvalue.expr;$jscomp$destructuring$var35\x3d(delete $jscomp$destructuring$var35.expr,$jscomp$destructuring$var35);return Object.assign({},{signal:value},$jscomp$destructuring$var35)}return value}function conditionalSignalRefOrValue(value){if(isExprRef(value)){var $jscomp$destructuring$var37\x3d\nObject.assign({},value);value\x3dvalue.expr;$jscomp$destructuring$var37\x3d(delete $jscomp$destructuring$var37.expr,$jscomp$destructuring$var37);return Object.assign({},{signal:value},$jscomp$destructuring$var37)}return value}function signalOrValueRef(value){if(isExprRef(value)){var $jscomp$destructuring$var39\x3dObject.assign({},value);value\x3dvalue.expr;$jscomp$destructuring$var39\x3d(delete $jscomp$destructuring$var39.expr,$jscomp$destructuring$var39);return Object.assign({},{signal:value},$jscomp$destructuring$var39)}return isSignalRef(value)?\nvalue:void 0!\x3d\x3dvalue?{value}:void 0}function exprFromValueOrSignalRef(ref){return isSignalRef(ref)?ref.signal:$(ref.value)}function signalOrStringValue(v){return isSignalRef(v)?v.signal:null\x3d\x3dv?null:$(v)}function applyMarkConfig(e,model,propsList){for(const property of propsList)propsList\x3dgetMarkConfig(property,model.markDef,model.config),void 0!\x3d\x3dpropsList\x26\x26(e[property]\x3dsignalOrValueRef(propsList));return e}function getStyles(mark){var _mark$style;return[].concat(mark.type,null!\x3d\x3d(_mark$style\x3dmark.style)\x26\x26\nvoid 0!\x3d\x3d_mark$style?_mark$style:[])}function getMarkPropOrConfig(channel,mark,config,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;const {vgChannel,ignoreVgConfig}\x3dopt;if(vgChannel\x26\x26void 0!\x3d\x3dmark[vgChannel])return mark[vgChannel];if(void 0!\x3d\x3dmark[channel])return mark[channel];if(!ignoreVgConfig||vgChannel\x26\x26vgChannel!\x3d\x3dchannel)return getMarkConfig(channel,mark,config,opt)}function getMarkConfig(channel,mark,config,$jscomp$destructuring$var40){({vgChannel:$jscomp$destructuring$var40}\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var40?\n{}:$jscomp$destructuring$var40);return getFirstDefined($jscomp$destructuring$var40?getMarkStyleConfig(channel,mark,config.style):void 0,getMarkStyleConfig(channel,mark,config.style),$jscomp$destructuring$var40?config[mark.type][$jscomp$destructuring$var40]:void 0,config[mark.type][channel],$jscomp$destructuring$var40?config.mark[$jscomp$destructuring$var40]:config.mark[channel])}function getMarkStyleConfig(prop,mark,styleConfigIndex){return getStyleConfig(prop,getStyles(mark),styleConfigIndex)}function getStyleConfig(p,\nstyles,styleConfigIndex){styles\x3darray$jscomp$0(styles);let value;for(const style of styles)(styles\x3dstyleConfigIndex[style])\x26\x26void 0!\x3d\x3dstyles[p]\x26\x26(value\x3dstyles[p]);return value}function sortParams(orderDef,fieldRefOption){return array$jscomp$0(orderDef).reduce((s,orderChannelDef)\x3d\x3e{var _orderChannelDef$sort;s.field.push(vgField(orderChannelDef,fieldRefOption));s.order.push(null!\x3d\x3d(_orderChannelDef$sort\x3dorderChannelDef.sort)\x26\x26void 0!\x3d\x3d_orderChannelDef$sort?_orderChannelDef$sort:\x22ascending\x22);return s},\n{field:[],order:[]})}function mergeTitleFieldDefs(f1,f2){const merged\x3d[...f1];f2.forEach(fdToMerge\x3d\x3e{for(const fieldDef1 of merged)if(deepEqual(fieldDef1,fdToMerge))return;merged.push(fdToMerge)});return merged}function mergeTitle(title1,title2){return deepEqual(title1,title2)||!title2?title1:title1?[...array$jscomp$0(title1),...array$jscomp$0(title2)].join(\x22, \x22):title2}function mergeTitleComponent(v1,v2){const v1Val\x3dv1.value;v2\x3dv2.value;if(null\x3d\x3dv1Val||null\x3d\x3d\x3dv2)return{explicit:v1.explicit,value:null};\nif((isText(v1Val)||isSignalRef(v1Val))\x26\x26(isText(v2)||isSignalRef(v2)))return{explicit:v1.explicit,value:mergeTitle(v1Val,v2)};if(isText(v1Val)||isSignalRef(v1Val))return{explicit:v1.explicit,value:v1Val};if(isText(v2)||isSignalRef(v2))return{explicit:v1.explicit,value:v2};if(!(isText(v1Val)||isSignalRef(v1Val)||isText(v2)||isSignalRef(v2)))return{explicit:v1.explicit,value:mergeTitleFieldDefs(v1Val,v2)};throw Error(\x22It should never reach here\x22);}function isUnitSpec(spec){return\x22mark\x22in spec}function channelHasField(encoding,\nchannel){return(encoding\x3dencoding\x26\x26encoding[channel])?isArray(encoding)?some(encoding,fieldDef\x3d\x3e!!fieldDef.field):isFieldDef(encoding)||hasConditionalFieldDef(encoding):!1}function isAggregate(encoding){return some(CHANNELS,channel\x3d\x3echannelHasField(encoding,channel)?(channel\x3dencoding[channel],isArray(channel)?some(channel,fieldDef\x3d\x3e!!fieldDef.aggregate):(channel\x3dgetFieldDef(channel))\x26\x26!!channel.aggregate):!1)}function extractTransformsFromEncoding(oldEncoding,config){const groupby\x3d[],bins\x3d[],timeUnits\x3d\n[],aggregate\x3d[],encoding\x3d{};forEach(oldEncoding,(channelDef,channel)\x3d\x3e{if(isFieldDef(channelDef)){var $jscomp$destructuring$var42\x3dObject.assign({},channelDef),field\x3dchannelDef.field;const aggOp\x3dchannelDef.aggregate,bin\x3dchannelDef.bin,timeUnit\x3dchannelDef.timeUnit;$jscomp$destructuring$var42\x3d(delete $jscomp$destructuring$var42.field,delete $jscomp$destructuring$var42.aggregate,delete $jscomp$destructuring$var42.bin,delete $jscomp$destructuring$var42.timeUnit,$jscomp$destructuring$var42);if(aggOp||timeUnit||\nbin){var guide\x3dgetGuide(channelDef);const isTitleDefined\x3dguide\x26\x26guide.title;guide\x3dvgField(channelDef,{forAs:!0});$jscomp$destructuring$var42\x3dObject.assign({},isTitleDefined?[]:{title:title$jscomp$0(channelDef,config,{allowDisabling:!0})},$jscomp$destructuring$var42,{field:guide});if(aggOp){let op;isArgmaxDef(aggOp)?(op\x3d\x22argmax\x22,guide\x3dvgField({op:\x22argmax\x22,field:aggOp.argmax},{forAs:!0}),$jscomp$destructuring$var42.field\x3d\x22\x22.concat(guide,\x22.\x22).concat(field)):isArgminDef(aggOp)?(op\x3d\x22argmin\x22,guide\x3dvgField({op:\x22argmin\x22,\nfield:aggOp.argmin},{forAs:!0}),$jscomp$destructuring$var42.field\x3d\x22\x22.concat(guide,\x22.\x22).concat(field)):\x22boxplot\x22!\x3d\x3daggOp\x26\x26\x22errorbar\x22!\x3d\x3daggOp\x26\x26\x22errorband\x22!\x3d\x3daggOp\x26\x26(op\x3daggOp);op\x26\x26(channelDef\x3d{op,as:guide},field\x26\x26(channelDef.field\x3dfield),aggregate.push(channelDef))}else groupby.push(guide),isTypedFieldDef(channelDef)\x26\x26isBinning(bin)?(bins.push({bin,field,as:guide}),groupby.push(vgField(channelDef,{binSuffix:\x22end\x22})),binRequiresRange(channelDef,channel)\x26\x26groupby.push(vgField(channelDef,{binSuffix:\x22range\x22})),\nchannel in POSITION_SCALE_CHANNEL_INDEX\x26\x26(encoding[channel+\x222\x22]\x3d{field:guide+\x22_end\x22}),$jscomp$destructuring$var42.bin\x3d\x22binned\x22,isSecondaryRangeChannel(channel)||($jscomp$destructuring$var42.type\x3d\x22quantitative\x22)):timeUnit\x26\x26(timeUnits.push({timeUnit,field,as:guide}),(field\x3disTypedFieldDef(channelDef)\x26\x26\x22temporal\x22!\x3d\x3dchannelDef.type\x26\x26\x22time\x22)\x26\x26(\x22text\x22\x3d\x3d\x3dchannel||\x22tooltip\x22\x3d\x3d\x3dchannel?$jscomp$destructuring$var42.formatType\x3dfield:NONPOSITION_CHANNEL_INDEX[channel]?$jscomp$destructuring$var42.legend\x3dObject.assign({},\n{formatType:field},$jscomp$destructuring$var42.legend):channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26($jscomp$destructuring$var42.axis\x3dObject.assign({},{formatType:field},$jscomp$destructuring$var42.axis))));encoding[channel]\x3d$jscomp$destructuring$var42}else groupby.push(field),encoding[channel]\x3doldEncoding[channel]}else encoding[channel]\x3doldEncoding[channel]});return{bins,timeUnits,aggregate,groupby,encoding}}function markChannelCompatible(encoding,channel,mark){mark\x3dgetSupportedMark(channel)[mark];return mark\x26\x26\n(\x22binned\x22!\x3d\x3dmark||(mark\x3dencoding[\x22x2\x22\x3d\x3d\x3dchannel?\x22x\x22:\x22y\x22],isFieldDef(mark)\x26\x26isFieldDef(encoding[channel])\x26\x26isBinned(mark.bin)))?!0:!1}function initEncoding(encoding,mark,filled,config){return keys$jscomp$0(encoding).reduce((normalizedEncoding,channel)\x3d\x3e{if(!CHANNEL_INDEX[channel])return warn(invalidEncodingChannel(channel)),normalizedEncoding;const channelDef\x3dencoding[channel];\x22angle\x22!\x3d\x3dchannel||\x22arc\x22!\x3d\x3dmark||encoding.theta||(warn(\x22Arc marks uses theta channel rather than angle, replacing angle with theta.\x22),\nchannel\x3d\x22theta\x22);if(!markChannelCompatible(encoding,channel,mark))return warn(incompatibleChannel(channel,mark)),normalizedEncoding;if(\x22size\x22\x3d\x3d\x3dchannel\x26\x26\x22line\x22\x3d\x3d\x3dmark){const fieldDef\x3dgetFieldDef(encoding[channel]);if(null\x3d\x3d\x3dfieldDef||void 0\x3d\x3d\x3dfieldDef?0:fieldDef.aggregate)return warn(\x22Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.\x22),normalizedEncoding}if(\x22color\x22\x3d\x3d\x3dchannel\x26\x26(filled?\x22fill\x22in encoding:\x22stroke\x22in encoding))return warn(droppingColor(\x22encoding\x22,\n{fill:\x22fill\x22in encoding,stroke:\x22stroke\x22in encoding})),normalizedEncoding;if(\x22detail\x22\x3d\x3d\x3dchannel||\x22order\x22\x3d\x3d\x3dchannel\x26\x26!isArray(channelDef)\x26\x26!isValueDef(channelDef)||\x22tooltip\x22\x3d\x3d\x3dchannel\x26\x26isArray(channelDef))channelDef\x26\x26(normalizedEncoding[channel]\x3darray$jscomp$0(channelDef).reduce((defs,fieldDef)\x3d\x3e{isFieldDef(fieldDef)?defs.push(initFieldDef(fieldDef,channel)):warn(emptyFieldDef(fieldDef,channel));return defs},[]));else{if(\x22tooltip\x22\x3d\x3d\x3dchannel\x26\x26null\x3d\x3d\x3dchannelDef)normalizedEncoding[channel]\x3dnull;else if(!(isFieldDef(channelDef)||\nisDatumDef(channelDef)||isValueDef(channelDef)||channelDef\x26\x26\x22condition\x22in channelDef||isSignalRef(channelDef)))return warn(emptyFieldDef(channelDef,channel)),normalizedEncoding;normalizedEncoding[channel]\x3dinitChannelDef(channelDef,channel,config)}return normalizedEncoding},{})}function normalizeEncoding(encoding,config){const normalizedEncoding\x3d{};for(const channel of keys$jscomp$0(encoding)){const newChannelDef\x3dinitChannelDef(encoding[channel],channel,config,{compositeMark:!0});normalizedEncoding[channel]\x3d\nnewChannelDef}return normalizedEncoding}function fieldDefs(encoding){const arr\x3d[];for(const channel of keys$jscomp$0(encoding))if(channelHasField(encoding,channel)){const channelDefArray\x3darray$jscomp$0(encoding[channel]);for(const def of channelDefArray)isFieldDef(def)?arr.push(def):hasConditionalFieldDef(def)\x26\x26arr.push(def.condition)}return arr}function forEach(mapping,f,thisArg){if(mapping)for(const channel of keys$jscomp$0(mapping)){const el\x3dmapping[channel];if(isArray(el))for(const channelDef of el)f.call(thisArg,\nchannelDef,channel);else f.call(thisArg,el,channel)}}function reduce(mapping,f,init,thisArg){return mapping?keys$jscomp$0(mapping).reduce((r,channel)\x3d\x3e{const map\x3dmapping[channel];return isArray(map)?map.reduce((r1,channelDef)\x3d\x3ef.call(thisArg,r1,channelDef,channel),r):f.call(thisArg,r,map,channel)},init):init}function pathGroupingFields(mark,encoding){return keys$jscomp$0(encoding).reduce((details,channel)\x3d\x3e{switch(channel){case \x22x\x22:case \x22y\x22:case \x22href\x22:case \x22description\x22:case \x22url\x22:case \x22x2\x22:case \x22y2\x22:case \x22theta\x22:case \x22theta2\x22:case \x22radius\x22:case \x22radius2\x22:case \x22latitude\x22:case \x22longitude\x22:case \x22latitude2\x22:case \x22longitude2\x22:case \x22text\x22:case \x22shape\x22:case \x22angle\x22:case \x22tooltip\x22:return details;\ncase \x22order\x22:if(\x22line\x22\x3d\x3d\x3dmark||\x22trail\x22\x3d\x3d\x3dmark)return details;case \x22detail\x22:case \x22key\x22:channel\x3dencoding[channel];if(isArray(channel)||isFieldDef(channel))for(var fieldDef of array$jscomp$0(channel))fieldDef.aggregate||details.push(vgField(fieldDef,{}));return details;case \x22size\x22:if(\x22trail\x22\x3d\x3d\x3dmark)return details;case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22strokeDash\x22:case \x22strokeWidth\x22:return(fieldDef\x3dgetFieldDef(encoding[channel]))\x26\x26!fieldDef.aggregate\x26\x26\ndetails.push(vgField(fieldDef,{})),details}},[])}function getCompositeMarkTooltip(tooltipSummary,continuousAxisChannelDef,encodingWithoutContinuousAxis,withFieldName){withFieldName\x3dvoid 0\x3d\x3d\x3dwithFieldName?!0:withFieldName;if(\x22tooltip\x22in encodingWithoutContinuousAxis)return{tooltip:encodingWithoutContinuousAxis.tooltip};tooltipSummary\x3dtooltipSummary.map($jscomp$destructuring$var45\x3d\x3e{var {fieldPrefix,titlePrefix}\x3d$jscomp$destructuring$var45;$jscomp$destructuring$var45\x3dwithFieldName?\x22 of \x22.concat(getTitle(continuousAxisChannelDef)):\n\x22\x22;return{field:fieldPrefix+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type,title:isSignalRef(titlePrefix)?{signal:titlePrefix+\x27\x22\x27.concat(escape($jscomp$destructuring$var45),\x27\x22\x27)}:titlePrefix+$jscomp$destructuring$var45}});encodingWithoutContinuousAxis\x3dfieldDefs(encodingWithoutContinuousAxis).map(toStringFieldDef);return{tooltip:[...tooltipSummary,...unique(encodingWithoutContinuousAxis,hash)]}}function getTitle(continuousAxisChannelDef){const {title,field}\x3dcontinuousAxisChannelDef;\nreturn getFirstDefined(title,field)}function makeCompositeAggregatePartFactory(compositeMarkDef,continuousAxis,continuousAxisChannelDef,sharedEncoding,compositeMarkConfig){const {scale,axis}\x3dcontinuousAxisChannelDef;return $jscomp$destructuring$var46\x3d\x3e{var {partName,mark,positionPrefix,endPositionPrefix,extraEncoding\x3d{}}\x3d$jscomp$destructuring$var46;$jscomp$destructuring$var46\x3dgetTitle(continuousAxisChannelDef);return partLayerMixins(compositeMarkDef,partName,compositeMarkConfig,{mark,encoding:Object.assign({},\n{[continuousAxis]:Object.assign({},{field:positionPrefix+\x22_\x22+continuousAxisChannelDef.field,type:continuousAxisChannelDef.type},void 0!\x3d\x3d$jscomp$destructuring$var46?{title:$jscomp$destructuring$var46}:{},void 0!\x3d\x3dscale?{scale}:{},void 0!\x3d\x3daxis?{axis}:{})},isString(endPositionPrefix)?{[continuousAxis+\x222\x22]:{field:endPositionPrefix+\x22_\x22+continuousAxisChannelDef.field}}:{},sharedEncoding,extraEncoding)})}}function partLayerMixins(markDef,part,compositeMarkConfig,partBaseSpec){const {clip,color,opacity}\x3d\nmarkDef,mark\x3dmarkDef.type;return markDef[part]||void 0\x3d\x3d\x3dmarkDef[part]\x26\x26compositeMarkConfig[part]?[Object.assign({},partBaseSpec,{mark:Object.assign({},compositeMarkConfig[part],clip?{clip}:{},color?{color}:{},opacity?{opacity}:{},isMarkDef(partBaseSpec.mark)?partBaseSpec.mark:{type:partBaseSpec.mark},{style:\x22\x22.concat(mark,\x22-\x22).concat(part)},isBoolean(markDef[part])?{}:markDef[part])})]:[]}function compositeMarkContinuousAxis(spec,orient,compositeMark){({encoding:spec}\x3dspec);orient\x3d\x22vertical\x22\x3d\x3d\x3dorient?\n\x22y\x22:\x22x\x22;const continuousAxisChannelDef2\x3dspec[orient+\x222\x22],continuousAxisChannelDefError\x3dspec[orient+\x22Error\x22],continuousAxisChannelDefError2\x3dspec[orient+\x22Error2\x22];return{continuousAxisChannelDef:filterAggregateFromChannelDef(spec[orient],compositeMark),continuousAxisChannelDef2:filterAggregateFromChannelDef(continuousAxisChannelDef2,compositeMark),continuousAxisChannelDefError:filterAggregateFromChannelDef(continuousAxisChannelDefError,compositeMark),continuousAxisChannelDefError2:filterAggregateFromChannelDef(continuousAxisChannelDefError2,\ncompositeMark),continuousAxis:orient}}function filterAggregateFromChannelDef(continuousAxisChannelDef,compositeMark){if(continuousAxisChannelDef\x26\x26continuousAxisChannelDef.aggregate){var $jscomp$destructuring$var48\x3dObject.assign({},continuousAxisChannelDef);continuousAxisChannelDef\x3dcontinuousAxisChannelDef.aggregate;$jscomp$destructuring$var48\x3d(delete $jscomp$destructuring$var48.aggregate,$jscomp$destructuring$var48);continuousAxisChannelDef!\x3d\x3dcompositeMark\x26\x26(compositeMark\x3d\x22Continuous axis should not have customized aggregation function \x22.concat(continuousAxisChannelDef,\n\x22; \x22).concat(compositeMark,\x22 already agregates the axis.\x22),warn(compositeMark));return $jscomp$destructuring$var48}return continuousAxisChannelDef}function compositeMarkOrient(spec,compositeMark){const {mark,encoding}\x3dspec,{x,y}\x3dencoding;if(isMarkDef(mark)\x26\x26mark.orient)return mark.orient;if(isContinuousFieldOrDatumDef(x)){if(isContinuousFieldOrDatumDef(y)){spec\x3disFieldDef(x)\x26\x26x.aggregate;const yAggregate\x3disFieldDef(y)\x26\x26y.aggregate;if(!spec\x26\x26yAggregate\x3d\x3d\x3dcompositeMark)return\x22vertical\x22;if(yAggregate||\nspec!\x3d\x3dcompositeMark){if(spec\x3d\x3d\x3dcompositeMark\x26\x26yAggregate\x3d\x3d\x3dcompositeMark)throw Error(\x22Both x and y cannot have aggregate\x22);return isFieldOrDatumDefForTimeFormat(y)\x26\x26!isFieldOrDatumDefForTimeFormat(x)?\x22horizontal\x22:\x22vertical\x22}}return\x22horizontal\x22}if(isContinuousFieldOrDatumDef(y))return\x22vertical\x22;throw Error(\x22Need a valid continuous axis for \x22.concat(compositeMark,\x22s\x22));}function getBoxPlotType(extent){return isNumber(extent)?\x22tukey\x22:extent}function normalizeBoxPlot(spec$jscomp$0,$jscomp$destructuring$var49){var {config}\x3d\n$jscomp$destructuring$var49,_markDef$extent,$jscomp$destructuring$var50\x3dspec$jscomp$0\x3dObject.assign({},spec$jscomp$0,{encoding:normalizeEncoding(spec$jscomp$0.encoding,config)});$jscomp$destructuring$var49\x3dObject.assign({},$jscomp$destructuring$var50);var mark\x3d$jscomp$destructuring$var50.mark;$jscomp$destructuring$var50\x3d$jscomp$destructuring$var50.selection;$jscomp$destructuring$var49\x3d(delete $jscomp$destructuring$var49.mark,delete $jscomp$destructuring$var49.encoding,delete $jscomp$destructuring$var49.selection,\ndelete $jscomp$destructuring$var49.projection,$jscomp$destructuring$var49);mark\x3disMarkDef(mark)?mark:{type:mark};$jscomp$destructuring$var50\x26\x26warn(selectionNotSupported(\x22boxplot\x22));$jscomp$destructuring$var50\x3dnull!\x3d\x3d(_markDef$extent\x3dmark.extent)\x26\x26void 0!\x3d\x3d_markDef$extent?_markDef$extent:config.boxplot.extent;var sizeValue\x3dgetMarkPropOrConfig(\x22size\x22,mark,config);_markDef$extent\x3dgetBoxPlotType($jscomp$destructuring$var50);var JSCompiler_inline_result;{var spec\x3dspec$jscomp$0;spec$jscomp$0\x3dcompositeMarkOrient(spec,\n\x22boxplot\x22);const {continuousAxisChannelDef,continuousAxis}\x3dcompositeMarkContinuousAxis(spec,spec$jscomp$0,\x22boxplot\x22);var continuousFieldName\x3dcontinuousAxisChannelDef.field,boxPlotType\x3dgetBoxPlotType($jscomp$destructuring$var50),boxplotSpecificAggregate\x3d[...boxParamsQuartiles(continuousFieldName),{op:\x22median\x22,field:continuousFieldName,as:\x22mid_box_\x22+continuousFieldName},{op:\x22min\x22,field:continuousFieldName,as:(\x22min-max\x22\x3d\x3d\x3dboxPlotType?\x22lower_whisker_\x22:\x22min_\x22)+continuousFieldName},{op:\x22max\x22,field:continuousFieldName,\nas:(\x22min-max\x22\x3d\x3d\x3dboxPlotType?\x22upper_whisker_\x22:\x22max_\x22)+continuousFieldName}];continuousFieldName\x3d\x22min-max\x22\x3d\x3d\x3dboxPlotType||\x22tukey\x22\x3d\x3d\x3dboxPlotType?[]:[{calculate:\x27datum[\x22upper_box_\x27.concat(continuousFieldName,\x27\x22] - datum[\x22lower_box_\x27).concat(continuousFieldName,\x27\x22]\x27),as:\x22iqr_\x22+continuousFieldName},{calculate:\x27min(datum[\x22upper_box_\x27.concat(continuousFieldName,\x27\x22] + datum[\x22iqr_\x27).concat(continuousFieldName,\x27\x22] * \x27).concat($jscomp$destructuring$var50,\x27, datum[\x22max_\x27).concat(continuousFieldName,\x27\x22])\x27),as:\x22upper_whisker_\x22+\ncontinuousFieldName},{calculate:\x27max(datum[\x22lower_box_\x27.concat(continuousFieldName,\x27\x22] - datum[\x22iqr_\x27).concat(continuousFieldName,\x27\x22] * \x27).concat($jscomp$destructuring$var50,\x27, datum[\x22min_\x27).concat(continuousFieldName,\x27\x22])\x27),as:\x22lower_whisker_\x22+continuousFieldName}];spec\x3dObject.assign({},spec.encoding);boxPlotType\x3d(delete spec[continuousAxis],spec);spec\x3dObject.assign({},boxPlotType);boxPlotType\x3dboxPlotType.tooltip;spec\x3d(delete spec.tooltip,spec);if(boxPlotType){var customTooltipWithoutAggregatedField$jscomp$0;\nif(isArray(boxPlotType)){for(var t of boxPlotType)t.aggregate?(JSCompiler_inline_result||(JSCompiler_inline_result\x3d[]),JSCompiler_inline_result.push(t)):(customTooltipWithoutAggregatedField$jscomp$0||(customTooltipWithoutAggregatedField$jscomp$0\x3d[]),customTooltipWithoutAggregatedField$jscomp$0.push(t));JSCompiler_inline_result\x26\x26(spec.tooltip\x3dJSCompiler_inline_result)}else boxPlotType.aggregate?spec.tooltip\x3dboxPlotType:customTooltipWithoutAggregatedField$jscomp$0\x3dboxPlotType;isArray(customTooltipWithoutAggregatedField$jscomp$0)\x26\x26\n1\x3d\x3d\x3dcustomTooltipWithoutAggregatedField$jscomp$0.length\x26\x26(customTooltipWithoutAggregatedField$jscomp$0\x3dcustomTooltipWithoutAggregatedField$jscomp$0[0]);JSCompiler_inline_result\x3d{customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField$jscomp$0,filteredEncoding:spec}}else JSCompiler_inline_result\x3d{filteredEncoding:spec};const {customTooltipWithoutAggregatedField,filteredEncoding}\x3dJSCompiler_inline_result,{bins,timeUnits,aggregate,groupby,encoding:encodingWithoutContinuousAxis}\x3dextractTransformsFromEncoding(filteredEncoding,\nconfig);JSCompiler_inline_result\x3d[...bins,...timeUnits,{aggregate:[...aggregate,...boxplotSpecificAggregate],groupby},...continuousFieldName];JSCompiler_inline_result\x3d{bins,timeUnits,transform:JSCompiler_inline_result,groupby,aggregate,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient:\x22vertical\x22\x3d\x3d\x3dspec$jscomp$0?\x22horizontal\x22:\x22vertical\x22,boxOrient:spec$jscomp$0,customTooltipWithoutAggregatedField}}const {bins:bins$jscomp$0,timeUnits:timeUnits$jscomp$0,transform,continuousAxisChannelDef:continuousAxisChannelDef$jscomp$0,\ncontinuousAxis:continuousAxis$jscomp$0,groupby:groupby$jscomp$0,aggregate:aggregate$jscomp$0,encodingWithoutContinuousAxis:encodingWithoutContinuousAxis$jscomp$0,ticksOrient,boxOrient,customTooltipWithoutAggregatedField:customTooltipWithoutAggregatedField$jscomp$2}\x3dJSCompiler_inline_result;customTooltipWithoutAggregatedField$jscomp$0\x3dObject.assign({},encodingWithoutContinuousAxis$jscomp$0);JSCompiler_inline_result\x3dencodingWithoutContinuousAxis$jscomp$0.color;boxplotSpecificAggregate\x3dencodingWithoutContinuousAxis$jscomp$0.size;\ncustomTooltipWithoutAggregatedField$jscomp$0\x3d(delete customTooltipWithoutAggregatedField$jscomp$0.color,delete customTooltipWithoutAggregatedField$jscomp$0.size,customTooltipWithoutAggregatedField$jscomp$0);t\x3dmakeCompositeAggregatePartFactory(mark,continuousAxis$jscomp$0,continuousAxisChannelDef$jscomp$0,customTooltipWithoutAggregatedField$jscomp$0,config.boxplot);spec$jscomp$0\x3dmakeCompositeAggregatePartFactory(mark,continuousAxis$jscomp$0,continuousAxisChannelDef$jscomp$0,encodingWithoutContinuousAxis$jscomp$0,\nconfig.boxplot);boxplotSpecificAggregate\x3dmakeCompositeAggregatePartFactory(mark,continuousAxis$jscomp$0,continuousAxisChannelDef$jscomp$0,Object.assign({},customTooltipWithoutAggregatedField$jscomp$0,boxplotSpecificAggregate?{size:boxplotSpecificAggregate}:{}),config.boxplot);continuousFieldName\x3dgetCompositeMarkTooltip([{fieldPrefix:\x22min-max\x22\x3d\x3d\x3d_markDef$extent?\x22upper_whisker_\x22:\x22max_\x22,titlePrefix:\x22Max\x22},{fieldPrefix:\x22upper_box_\x22,titlePrefix:\x22Q3\x22},{fieldPrefix:\x22mid_box_\x22,titlePrefix:\x22Median\x22},{fieldPrefix:\x22lower_box_\x22,\ntitlePrefix:\x22Q1\x22},{fieldPrefix:\x22min-max\x22\x3d\x3d\x3d_markDef$extent?\x22lower_whisker_\x22:\x22min_\x22,titlePrefix:\x22Min\x22}],continuousAxisChannelDef$jscomp$0,encodingWithoutContinuousAxis$jscomp$0);spec\x3d{type:\x22tick\x22,color:\x22black\x22,opacity:1,orient:ticksOrient,invalid:null,aria:!1};boxPlotType\x3d\x22min-max\x22\x3d\x3d\x3d_markDef$extent?continuousFieldName:getCompositeMarkTooltip([{fieldPrefix:\x22upper_whisker_\x22,titlePrefix:\x22Upper Whisker\x22},{fieldPrefix:\x22lower_whisker_\x22,titlePrefix:\x22Lower Whisker\x22}],continuousAxisChannelDef$jscomp$0,encodingWithoutContinuousAxis$jscomp$0);\nt\x3d[...t({partName:\x22rule\x22,mark:{type:\x22rule\x22,invalid:null,aria:!1},positionPrefix:\x22lower_whisker\x22,endPositionPrefix:\x22lower_box\x22,extraEncoding:boxPlotType}),...t({partName:\x22rule\x22,mark:{type:\x22rule\x22,invalid:null,aria:!1},positionPrefix:\x22upper_box\x22,endPositionPrefix:\x22upper_whisker\x22,extraEncoding:boxPlotType}),...t({partName:\x22ticks\x22,mark:spec,positionPrefix:\x22lower_whisker\x22,extraEncoding:boxPlotType}),...t({partName:\x22ticks\x22,mark:spec,positionPrefix:\x22upper_whisker\x22,extraEncoding:boxPlotType})];sizeValue\x3d[...\x22tukey\x22!\x3d\x3d\n_markDef$extent?t:[],...spec$jscomp$0({partName:\x22box\x22,mark:Object.assign({},{type:\x22bar\x22},sizeValue?{size:sizeValue}:{},{orient:boxOrient,invalid:null,ariaRoleDescription:\x22box\x22}),positionPrefix:\x22lower_box\x22,endPositionPrefix:\x22upper_box\x22,extraEncoding:continuousFieldName}),...boxplotSpecificAggregate({partName:\x22median\x22,mark:Object.assign({},{type:\x22tick\x22,invalid:null},isObject(config.boxplot.median)\x26\x26config.boxplot.median.color?{color:config.boxplot.median.color}:{},sizeValue?{size:sizeValue}:{},{orient:ticksOrient,\naria:!1}),positionPrefix:\x22mid_box\x22,extraEncoding:continuousFieldName})];if(\x22min-max\x22\x3d\x3d\x3d_markDef$extent){var _outerSpec$transform;return Object.assign({},$jscomp$destructuring$var49,{transform:(null!\x3d\x3d(_outerSpec$transform\x3d$jscomp$destructuring$var49.transform)\x26\x26void 0!\x3d\x3d_outerSpec$transform?_outerSpec$transform:[]).concat(transform),layer:sizeValue})}_outerSpec$transform\x3d\x27datum[\x22lower_box_\x27.concat(continuousAxisChannelDef$jscomp$0.field,\x27\x22]\x27);_markDef$extent\x3d\x27datum[\x22upper_box_\x27.concat(continuousAxisChannelDef$jscomp$0.field,\n\x27\x22]\x27);spec$jscomp$0\x3d\x22(\x22.concat(_markDef$extent,\x22 - \x22).concat(_outerSpec$transform,\x22)\x22);_outerSpec$transform\x3d\x22\x22.concat(_outerSpec$transform,\x22 - \x22).concat($jscomp$destructuring$var50,\x22 * \x22).concat(spec$jscomp$0);spec$jscomp$0\x3d\x22\x22.concat(_markDef$extent,\x22 + \x22).concat($jscomp$destructuring$var50,\x22 * \x22).concat(spec$jscomp$0);boxplotSpecificAggregate\x3d\x27datum[\x22\x27.concat(continuousAxisChannelDef$jscomp$0.field,\x27\x22]\x27);$jscomp$destructuring$var50\x3d{joinaggregate:boxParamsQuartiles(continuousAxisChannelDef$jscomp$0.field),\ngroupby:groupby$jscomp$0};_markDef$extent\x3d{transform:[{filter:\x22(\x22.concat(_outerSpec$transform,\x22 \\x3c\\x3d \x22).concat(boxplotSpecificAggregate,\x22) \\x26\\x26 (\x22).concat(boxplotSpecificAggregate,\x22 \\x3c\\x3d \x22).concat(spec$jscomp$0,\x22)\x22)},{aggregate:[{op:\x22min\x22,field:continuousAxisChannelDef$jscomp$0.field,as:\x22lower_whisker_\x22+continuousAxisChannelDef$jscomp$0.field},{op:\x22max\x22,field:continuousAxisChannelDef$jscomp$0.field,as:\x22upper_whisker_\x22+continuousAxisChannelDef$jscomp$0.field},{op:\x22min\x22,field:\x22lower_box_\x22+\ncontinuousAxisChannelDef$jscomp$0.field,as:\x22lower_box_\x22+continuousAxisChannelDef$jscomp$0.field},{op:\x22max\x22,field:\x22upper_box_\x22+continuousAxisChannelDef$jscomp$0.field,as:\x22upper_box_\x22+continuousAxisChannelDef$jscomp$0.field},...aggregate$jscomp$0],groupby:groupby$jscomp$0}],layer:t};customTooltipWithoutAggregatedField$jscomp$0\x3dObject.assign({},customTooltipWithoutAggregatedField$jscomp$0);customTooltipWithoutAggregatedField$jscomp$0\x3d(delete customTooltipWithoutAggregatedField$jscomp$0.tooltip,customTooltipWithoutAggregatedField$jscomp$0);\nconst {scale,axis}\x3dcontinuousAxisChannelDef$jscomp$0;t\x3dgetTitle(continuousAxisChannelDef$jscomp$0);continuousFieldName\x3domit(axis,[\x22title\x22]);config\x3dpartLayerMixins(mark,\x22outliers\x22,config.boxplot,{transform:[{filter:\x22(\x22.concat(boxplotSpecificAggregate,\x22 \\x3c \x22).concat(_outerSpec$transform,\x22) || (\x22).concat(boxplotSpecificAggregate,\x22 \\x3e \x22).concat(spec$jscomp$0,\x22)\x22)}],mark:\x22point\x22,encoding:Object.assign({},{[continuousAxis$jscomp$0]:Object.assign({},{field:continuousAxisChannelDef$jscomp$0.field,type:continuousAxisChannelDef$jscomp$0.type},\nvoid 0!\x3d\x3dt?{title:t}:{},void 0!\x3d\x3dscale?{scale}:{},isEmpty(continuousFieldName)?{}:{axis:continuousFieldName})},customTooltipWithoutAggregatedField$jscomp$0,JSCompiler_inline_result?{color:JSCompiler_inline_result}:{},customTooltipWithoutAggregatedField$jscomp$2?{tooltip:customTooltipWithoutAggregatedField$jscomp$2}:{})})[0];mark\x3d[...bins$jscomp$0,...timeUnits$jscomp$0,$jscomp$destructuring$var50];config?config\x3d{transform:mark,layer:[config,_markDef$extent]}:(config\x3d_markDef$extent,config.transform.unshift(...mark));\nreturn Object.assign({},$jscomp$destructuring$var49,{layer:[config,{transform,layer:sizeValue}]})}function boxParamsQuartiles(continousAxisField){return[{op:\x22q1\x22,field:continousAxisField,as:\x22lower_box_\x22+continousAxisField},{op:\x22q3\x22,field:continousAxisField,as:\x22upper_box_\x22+continousAxisField}]}function normalizeErrorBar(spec,$jscomp$destructuring$var59){({config:$jscomp$destructuring$var59}\x3d$jscomp$destructuring$var59);spec\x3dObject.assign({},spec,{encoding:normalizeEncoding(spec.encoding,$jscomp$destructuring$var59)});\nconst {transform,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient,markDef,outerSpec,tooltipEncoding}\x3derrorBarParams(spec,\x22errorbar\x22,$jscomp$destructuring$var59);delete encodingWithoutContinuousAxis.size;spec\x3dmakeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,$jscomp$destructuring$var59.errorbar);$jscomp$destructuring$var59\x3dmarkDef.thickness;var size\x3dmarkDef.size;size\x3dObject.assign({},{type:\x22tick\x22,orient:ticksOrient,\naria:!1},void 0!\x3d\x3d$jscomp$destructuring$var59?{thickness:$jscomp$destructuring$var59}:{},void 0!\x3d\x3dsize?{size}:{});spec\x3d[...spec({partName:\x22ticks\x22,mark:size,positionPrefix:\x22lower\x22,extraEncoding:tooltipEncoding}),...spec({partName:\x22ticks\x22,mark:size,positionPrefix:\x22upper\x22,extraEncoding:tooltipEncoding}),...spec({partName:\x22rule\x22,mark:Object.assign({},{type:\x22rule\x22,ariaRoleDescription:\x22errorbar\x22},void 0!\x3d\x3d$jscomp$destructuring$var59?{size:$jscomp$destructuring$var59}:{}),positionPrefix:\x22lower\x22,endPositionPrefix:\x22upper\x22,\nextraEncoding:tooltipEncoding})];return Object.assign({},outerSpec,{transform},1\x3cspec.length?{layer:spec}:Object.assign({},spec[0]))}function errorBarOrientAndInputType(spec,compositeMark){var {encoding}\x3dspec;if(!(!isFieldOrDatumDef(encoding.x)\x26\x26!isFieldOrDatumDef(encoding.y)||isFieldOrDatumDef(encoding.x2)||isFieldOrDatumDef(encoding.y2)||isFieldOrDatumDef(encoding.xError)||isFieldOrDatumDef(encoding.xError2)||isFieldOrDatumDef(encoding.yError)||isFieldOrDatumDef(encoding.yError2)))return{orient:compositeMarkOrient(spec,\ncompositeMark),inputType:\x22raw\x22};var JSCompiler_inline_result\x3disFieldOrDatumDef(encoding.x2)||isFieldOrDatumDef(encoding.y2);var JSCompiler_inline_result$jscomp$0\x3disFieldOrDatumDef(encoding.xError)||isFieldOrDatumDef(encoding.xError2)||isFieldOrDatumDef(encoding.yError)||isFieldOrDatumDef(encoding.yError2);spec\x3dencoding.x;const y\x3dencoding.y;if(JSCompiler_inline_result){if(JSCompiler_inline_result$jscomp$0)throw Error(\x22\x22.concat(compositeMark,\x22 cannot be both type aggregated-upper-lower and aggregated-error\x22));\nJSCompiler_inline_result\x3dencoding.x2;encoding\x3dencoding.y2;if(isFieldOrDatumDef(JSCompiler_inline_result)\x26\x26isFieldOrDatumDef(encoding))throw Error(\x22\x22.concat(compositeMark,\x22 cannot have both x2 and y2\x22));if(isFieldOrDatumDef(JSCompiler_inline_result)){if(isContinuousFieldOrDatumDef(spec))return{orient:\x22horizontal\x22,inputType:\x22aggregated-upper-lower\x22};throw Error(\x22Both x and x2 have to be quantitative in \x22.concat(compositeMark));}if(isFieldOrDatumDef(encoding)){if(isContinuousFieldOrDatumDef(y))return{orient:\x22vertical\x22,\ninputType:\x22aggregated-upper-lower\x22};throw Error(\x22Both y and y2 have to be quantitative in \x22.concat(compositeMark));}}else{JSCompiler_inline_result\x3dencoding.xError;JSCompiler_inline_result$jscomp$0\x3dencoding.yError;const yError2\x3dencoding.yError2;if(isFieldOrDatumDef(encoding.xError2)\x26\x26!isFieldOrDatumDef(JSCompiler_inline_result))throw Error(\x22\x22.concat(compositeMark,\x22 cannot have xError2 without xError\x22));if(isFieldOrDatumDef(yError2)\x26\x26!isFieldOrDatumDef(JSCompiler_inline_result$jscomp$0))throw Error(\x22\x22.concat(compositeMark,\n\x22 cannot have yError2 without yError\x22));if(isFieldOrDatumDef(JSCompiler_inline_result)\x26\x26isFieldOrDatumDef(JSCompiler_inline_result$jscomp$0))throw Error(\x22\x22.concat(compositeMark,\x22 cannot have both xError and yError with both are quantiative\x22));if(isFieldOrDatumDef(JSCompiler_inline_result)){if(isContinuousFieldOrDatumDef(spec))return{orient:\x22horizontal\x22,inputType:\x22aggregated-error\x22};throw Error(\x22All x, xError, and xError2 (if exist) have to be quantitative\x22);}if(isFieldOrDatumDef(JSCompiler_inline_result$jscomp$0)){if(isContinuousFieldOrDatumDef(y))return{orient:\x22vertical\x22,\ninputType:\x22aggregated-error\x22};throw Error(\x22All y, yError, and yError2 (if exist) have to be quantitative\x22);}}throw Error(\x22No ranged axis\x22);}function errorBarParams(spec,compositeMark,config){var _outerSpec$transform,$jscomp$destructuring$var61\x3dObject.assign({},spec),mark\x3dspec.mark,encoding\x3dspec.encoding,selection\x3dspec.selection;$jscomp$destructuring$var61\x3d(delete $jscomp$destructuring$var61.mark,delete $jscomp$destructuring$var61.encoding,delete $jscomp$destructuring$var61.selection,delete $jscomp$destructuring$var61.projection,\n$jscomp$destructuring$var61);mark\x3disMarkDef(mark)?mark:{type:mark};selection\x26\x26warn(selectionNotSupported(compositeMark));const {orient,inputType}\x3derrorBarOrientAndInputType(spec,compositeMark),{continuousAxisChannelDef,continuousAxisChannelDef2,continuousAxisChannelDefError,continuousAxisChannelDefError2,continuousAxis}\x3dcompositeMarkContinuousAxis(spec,orient,compositeMark);selection\x3d[];spec\x3d[];var continuousFieldName\x3dcontinuousAxisChannelDef.field,tooltipTitleWithFieldName$jscomp$0\x3d!1;if(\x22raw\x22\x3d\x3d\x3d\ninputType){var tooltipSummary\x3dmark.center?mark.center:mark.extent?\x22iqr\x22\x3d\x3d\x3dmark.extent?\x22median\x22:\x22mean\x22:config.errorbar.center;var extent\x3dmark.extent?mark.extent:\x22mean\x22\x3d\x3d\x3dtooltipSummary?\x22stderr\x22:\x22iqr\x22;\x22median\x22\x3d\x3d\x3dtooltipSummary!\x3d\x3d(\x22iqr\x22\x3d\x3d\x3dextent)\x26\x26(selection\x3dextent,selection\x3d\x22\x22.concat(tooltipSummary,\x22 is not usually used with \x22).concat(selection,\x22 for \x22).concat(compositeMark,\x22.\x22),warn(selection));\x22stderr\x22\x3d\x3d\x3dextent||\x22stdev\x22\x3d\x3d\x3dextent?(selection\x3d[{op:extent,field:continuousFieldName,as:\x22extent_\x22+continuousFieldName},\n{op:tooltipSummary,field:continuousFieldName,as:\x22center_\x22+continuousFieldName}],spec\x3d[{calculate:\x27datum[\x22center_\x27.concat(continuousFieldName,\x27\x22] + datum[\x22extent_\x27).concat(continuousFieldName,\x27\x22]\x27),as:\x22upper_\x22+continuousFieldName},{calculate:\x27datum[\x22center_\x27.concat(continuousFieldName,\x27\x22] - datum[\x22extent_\x27).concat(continuousFieldName,\x27\x22]\x27),as:\x22lower_\x22+continuousFieldName}],continuousFieldName\x3d{fieldPrefix:\x22center_\x22,titlePrefix:titleCase(tooltipSummary)},tooltipTitleWithFieldName$jscomp$0\x3dextent,tooltipTitleWithFieldName$jscomp$0\x3d\n{fieldPrefix:\x22upper_\x22,titlePrefix:titleCase(tooltipSummary)+\x22 + \x22+tooltipTitleWithFieldName$jscomp$0},compositeMark\x3dextent,compositeMark\x3dtitleCase(tooltipSummary)+\x22 - \x22+compositeMark,tooltipSummary\x3d[continuousFieldName,tooltipTitleWithFieldName$jscomp$0,{fieldPrefix:\x22lower_\x22,titlePrefix:compositeMark}],tooltipTitleWithFieldName$jscomp$0\x3d!0):(\x22ci\x22\x3d\x3d\x3dextent?(compositeMark\x3d\x22mean\x22,tooltipSummary\x3d\x22ci0\x22,extent\x3d\x22ci1\x22):(compositeMark\x3d\x22median\x22,tooltipSummary\x3d\x22q1\x22,extent\x3d\x22q3\x22),selection\x3d[{op:tooltipSummary,\nfield:continuousFieldName,as:\x22lower_\x22+continuousFieldName},{op:extent,field:continuousFieldName,as:\x22upper_\x22+continuousFieldName},{op:compositeMark,field:continuousFieldName,as:\x22center_\x22+continuousFieldName}],tooltipSummary\x3d[{fieldPrefix:\x22upper_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,aggregate:extent,type:\x22quantitative\x22},config,{allowDisabling:!1})},{fieldPrefix:\x22lower_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,aggregate:tooltipSummary,type:\x22quantitative\x22},config,{allowDisabling:!1})},\n{fieldPrefix:\x22center_\x22,titlePrefix:title$jscomp$0({field:continuousFieldName,aggregate:compositeMark,type:\x22quantitative\x22},config,{allowDisabling:!1})}])}else{if(mark.center||mark.extent){compositeMark\x3dmark.center;var extent$jscomp$0\x3dmark.extent;compositeMark\x3d\x22\x22.concat(extent$jscomp$0?\x22extent \x22:\x22\x22).concat(extent$jscomp$0\x26\x26compositeMark?\x22and \x22:\x22\x22).concat(compositeMark?\x22center \x22:\x22\x22).concat(extent$jscomp$0\x26\x26compositeMark?\x22are \x22:\x22is \x22,\x22not needed when data are aggregated.\x22);warn(compositeMark)}\x22aggregated-upper-lower\x22\x3d\x3d\x3d\ninputType?(tooltipSummary\x3d[],spec\x3d[{calculate:\x27datum[\x22\x27.concat(continuousAxisChannelDef2.field,\x27\x22]\x27),as:\x22upper_\x22+continuousFieldName},{calculate:\x27datum[\x22\x27.concat(continuousFieldName,\x27\x22]\x27),as:\x22lower_\x22+continuousFieldName}]):\x22aggregated-error\x22\x3d\x3d\x3dinputType\x26\x26(tooltipSummary\x3d[{fieldPrefix:\x22\x22,titlePrefix:continuousFieldName}],spec\x3d[{calculate:\x27datum[\x22\x27.concat(continuousFieldName,\x27\x22] + datum[\x22\x27).concat(continuousAxisChannelDefError.field,\x27\x22]\x27),as:\x22upper_\x22+continuousFieldName}],continuousAxisChannelDefError2?\nspec.push({calculate:\x27datum[\x22\x27.concat(continuousFieldName,\x27\x22] + datum[\x22\x27).concat(continuousAxisChannelDefError2.field,\x27\x22]\x27),as:\x22lower_\x22+continuousFieldName}):spec.push({calculate:\x27datum[\x22\x27.concat(continuousFieldName,\x27\x22] - datum[\x22\x27).concat(continuousAxisChannelDefError.field,\x27\x22]\x27),as:\x22lower_\x22+continuousFieldName}));for(extent of spec)tooltipSummary.push({fieldPrefix:extent.as.substring(0,6),titlePrefix:replaceAll(replaceAll(extent.calculate,\x27datum[\x22\x27,\x22\x22),\x27\x22]\x27,\x22\x22)})}spec\x3d{postAggregateCalculates:spec,\nerrorBarSpecificAggregate:selection,tooltipSummary,tooltipTitleWithFieldName:tooltipTitleWithFieldName$jscomp$0};const {errorBarSpecificAggregate,postAggregateCalculates,tooltipSummary:tooltipSummary$jscomp$0,tooltipTitleWithFieldName}\x3dspec;encoding\x3dObject.assign({},encoding);spec\x3d\x22x\x22\x3d\x3d\x3dcontinuousAxis?\x22x2\x22:\x22y2\x22;selection\x3d\x22x\x22\x3d\x3d\x3dcontinuousAxis?\x22xError\x22:\x22yError\x22;continuousFieldName\x3d\x22x\x22\x3d\x3d\x3dcontinuousAxis?\x22xError2\x22:\x22yError2\x22;encoding\x3d(delete encoding[continuousAxis],delete encoding[spec],delete encoding[selection],\ndelete encoding[continuousFieldName],encoding);const {bins,timeUnits,aggregate:oldAggregate,groupby:oldGroupBy,encoding:encodingWithoutContinuousAxis}\x3dextractTransformsFromEncoding(encoding,config);config\x3d[...oldAggregate,...errorBarSpecificAggregate];encoding\x3d\x22raw\x22!\x3d\x3dinputType?[]:oldGroupBy;spec\x3dgetCompositeMarkTooltip(tooltipSummary$jscomp$0,continuousAxisChannelDef,encodingWithoutContinuousAxis,tooltipTitleWithFieldName);return{transform:[...null!\x3d\x3d(_outerSpec$transform\x3d$jscomp$destructuring$var61.transform)\x26\x26\nvoid 0!\x3d\x3d_outerSpec$transform?_outerSpec$transform:[],...bins,...timeUnits,...0\x3d\x3d\x3dconfig.length?[]:[{aggregate:config,groupby:encoding}],...postAggregateCalculates],groupby:encoding,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,ticksOrient:\x22vertical\x22\x3d\x3d\x3dorient?\x22horizontal\x22:\x22vertical\x22,markDef:mark,outerSpec:$jscomp$destructuring$var61,tooltipEncoding:spec}}function normalizeErrorBand(spec,$jscomp$destructuring$var68){({config:$jscomp$destructuring$var68}\x3d$jscomp$destructuring$var68);\nspec\x3dObject.assign({},spec,{encoding:normalizeEncoding(spec.encoding,$jscomp$destructuring$var68)});const {transform,continuousAxisChannelDef,continuousAxis,encodingWithoutContinuousAxis,markDef,outerSpec,tooltipEncoding}\x3derrorBarParams(spec,\x22errorband\x22,$jscomp$destructuring$var68);$jscomp$destructuring$var68\x3dmakeCompositeAggregatePartFactory(markDef,continuousAxis,continuousAxisChannelDef,encodingWithoutContinuousAxis,$jscomp$destructuring$var68.errorband);spec\x3dvoid 0!\x3d\x3dspec.encoding.x\x26\x26void 0!\x3d\x3d\nspec.encoding.y;let bandMark\x3d{type:spec?\x22area\x22:\x22rect\x22},bordersMark\x3d{type:spec?\x22line\x22:\x22rule\x22};const interpolate\x3dObject.assign({},markDef.interpolate?{interpolate:markDef.interpolate}:{},markDef.tension\x26\x26markDef.interpolate?{tension:markDef.tension}:{});spec?(bandMark\x3dObject.assign({},bandMark,interpolate,{ariaRoleDescription:\x22errorband\x22}),bordersMark\x3dObject.assign({},bordersMark,interpolate,{aria:!1})):markDef.interpolate?warn(errorBand1DNotSupport(\x22interpolate\x22)):markDef.tension\x26\x26warn(errorBand1DNotSupport(\x22tension\x22));\nreturn Object.assign({},outerSpec,{transform,layer:[...$jscomp$destructuring$var68({partName:\x22band\x22,mark:bandMark,positionPrefix:\x22lower\x22,endPositionPrefix:\x22upper\x22,extraEncoding:tooltipEncoding}),...$jscomp$destructuring$var68({partName:\x22borders\x22,mark:bordersMark,positionPrefix:\x22lower\x22,extraEncoding:tooltipEncoding}),...$jscomp$destructuring$var68({partName:\x22borders\x22,mark:bordersMark,positionPrefix:\x22upper\x22,extraEncoding:tooltipEncoding})]})}function add$jscomp$0(mark,run,parts){run\x3dnew CompositeMarkNormalizer(mark,\nrun);compositeMarkRegistry[mark]\x3d{normalizer:run,parts}}function assembleParameterSignals(params){const signals\x3d[];for(const param of params||[]){var $jscomp$destructuring$var69\x3dparam,$jscomp$destructuring$var70\x3dObject.assign({},$jscomp$destructuring$var69);params\x3d$jscomp$destructuring$var69.expr;$jscomp$destructuring$var69\x3d$jscomp$destructuring$var69.bind;$jscomp$destructuring$var70\x3d(delete $jscomp$destructuring$var70.expr,delete $jscomp$destructuring$var70.bind,$jscomp$destructuring$var70);$jscomp$destructuring$var69\x26\x26\nparams?(params\x3dObject.assign({},$jscomp$destructuring$var70,{bind:$jscomp$destructuring$var69,init:params}),signals.push(params)):(params\x3dObject.assign({},$jscomp$destructuring$var70,params?{update:params}:{},$jscomp$destructuring$var69?{bind:$jscomp$destructuring$var69}:{}),signals.push(params))}return signals}function isLegendBinding(bind){return!!bind\x26\x26(\x22legend\x22\x3d\x3d\x3dbind||!!bind.legend)}function isLegendStreamBinding(bind){return isLegendBinding(bind)\x26\x26isObject(bind)}function extractTopLevelProperties(t,\nincludeParams){const o\x3d{};for(const p of TOP_LEVEL_PROPERTIES)t\x26\x26void 0!\x3d\x3dt[p]\x26\x26(o[p]\x3dsignalRefOrValue(t[p]));includeParams\x26\x26(o.params\x3dt.params);return o}function isStep(size){return isObject(size)\x26\x26void 0!\x3d\x3dsize.step}function isFrameMixins(o){return o.view||o.width||o.height}function extractCompositionLayout(spec,specType,config){const layout\x3d{},{spacing:spacingConfig,columns}\x3dconfig[specType];void 0!\x3d\x3dspacingConfig\x26\x26(layout.spacing\x3dspacingConfig);void 0!\x3d\x3dcolumns\x26\x26(\x22facet\x22in spec\x26\x26!isFacetMapping(spec.facet)||\n\x22concat\x22in spec)\x26\x26(layout.columns\x3dcolumns);\x22vconcat\x22in spec\x26\x26(layout.columns\x3d1);for(const prop of COMPOSITION_LAYOUT_PROPERTIES)if(void 0!\x3d\x3dspec[prop])if(\x22spacing\x22\x3d\x3d\x3dprop){var _spacing$row,_spacing$column;specType\x3dspec[prop];layout[prop]\x3disNumber(specType)?specType:{row:null!\x3d\x3d(_spacing$row\x3dspecType.row)\x26\x26void 0!\x3d\x3d_spacing$row?_spacing$row:spacingConfig,column:null!\x3d\x3d(_spacing$column\x3dspecType.column)\x26\x26void 0!\x3d\x3d_spacing$column?_spacing$column:spacingConfig}}else layout[prop]\x3dspec[prop];return layout}\nfunction getViewConfigContinuousSize(viewConfig,channel){var _viewConfig$channel;return null!\x3d\x3d(_viewConfig$channel\x3dviewConfig[channel])\x26\x26void 0!\x3d\x3d_viewConfig$channel?_viewConfig$channel:viewConfig[\x22width\x22\x3d\x3d\x3dchannel?\x22continuousWidth\x22:\x22continuousHeight\x22]}function getViewConfigDiscreteStep(viewConfig,channel){viewConfig\x3dgetViewConfigDiscreteSize(viewConfig,channel);return isStep(viewConfig)?viewConfig.step:20}function getViewConfigDiscreteSize(viewConfig,channel){var _viewConfig$channel2;channel\x3dnull!\x3d\x3d\n(_viewConfig$channel2\x3dviewConfig[channel])\x26\x26void 0!\x3d\x3d_viewConfig$channel2?_viewConfig$channel2:viewConfig[\x22width\x22\x3d\x3d\x3dchannel?\x22discreteWidth\x22:\x22discreteHeight\x22];return getFirstDefined(channel,{step:viewConfig.step})}function getAxisConfigInternal(axisConfig){var props\x3dkeys$jscomp$0(axisConfig||{});const axisConfigInternal\x3d{};for(const prop of props)props\x3daxisConfig[prop],axisConfigInternal[prop]\x3disConditionalAxisValue(props)?signalOrValueRefWithCondition(props):signalRefOrValue(props);return axisConfigInternal}\nfunction initConfig(specifiedConfig){specifiedConfig\x3dvoid 0\x3d\x3d\x3dspecifiedConfig?{}:specifiedConfig;var $jscomp$destructuring$var72\x3dObject.assign({},specifiedConfig),color\x3dspecifiedConfig.color,font\x3dspecifiedConfig.font;specifiedConfig\x3dspecifiedConfig.fontSize;$jscomp$destructuring$var72\x3d(delete $jscomp$destructuring$var72.color,delete $jscomp$destructuring$var72.font,delete $jscomp$destructuring$var72.fontSize,$jscomp$destructuring$var72);font\x3dfont?{text:{font},style:{\x22guide-label\x22:{font},\x22guide-title\x22:{font},\n\x22group-title\x22:{font},\x22group-subtitle\x22:{font}}}:{};color?(color\x3dvoid 0\x3d\x3d\x3dcolor?{}:color,color\x3d{signals:[{name:\x22color\x22,value:isObject(color)?Object.assign({},DEFAULT_COLOR,color):DEFAULT_COLOR}],mark:{color:{signal:\x22color.blue\x22}},rule:{color:{signal:\x22color.gray0\x22}},text:{color:{signal:\x22color.gray0\x22}},style:{\x22guide-label\x22:{fill:{signal:\x22color.gray0\x22}},\x22guide-title\x22:{fill:{signal:\x22color.gray0\x22}},\x22group-title\x22:{fill:{signal:\x22color.gray0\x22}},\x22group-subtitle\x22:{fill:{signal:\x22color.gray0\x22}},cell:{stroke:{signal:\x22color.gray8\x22}}},\naxis:{domainColor:{signal:\x22color.gray13\x22},gridColor:{signal:\x22color.gray8\x22},tickColor:{signal:\x22color.gray13\x22}},range:{category:[{signal:\x22color.blue\x22},{signal:\x22color.orange\x22},{signal:\x22color.red\x22},{signal:\x22color.teal\x22},{signal:\x22color.green\x22},{signal:\x22color.yellow\x22},{signal:\x22color.purple\x22},{signal:\x22color.pink\x22},{signal:\x22color.brown\x22},{signal:\x22color.grey8\x22}]}}):color\x3d{};specifiedConfig\x3dspecifiedConfig?{signals:[{name:\x22fontSize\x22,value:isObject(specifiedConfig)?Object.assign({},DEFAULT_FONT_SIZE,specifiedConfig):\nDEFAULT_FONT_SIZE}],text:{fontSize:{signal:\x22fontSize.text\x22}},style:{\x22guide-label\x22:{fontSize:{signal:\x22fontSize.guideLabel\x22}},\x22guide-title\x22:{fontSize:{signal:\x22fontSize.guideTitle\x22}},\x22group-title\x22:{fontSize:{signal:\x22fontSize.groupTitle\x22}},\x22group-subtitle\x22:{fontSize:{signal:\x22fontSize.groupSubtitle\x22}}}}:{};specifiedConfig\x3dmergeConfig({},defaultConfig$1,font,color,specifiedConfig,$jscomp$destructuring$var72||{});$jscomp$destructuring$var72\x3domit(specifiedConfig,configPropsWithExpr);for(var prop of[\x22background\x22,\n\x22lineBreak\x22,\x22padding\x22])specifiedConfig[prop]\x26\x26($jscomp$destructuring$var72[prop]\x3dsignalRefOrValue(specifiedConfig[prop]));for(var markConfigType of MARK_CONFIGS)specifiedConfig[markConfigType]\x26\x26($jscomp$destructuring$var72[markConfigType]\x3dreplaceExprRefInIndex(specifiedConfig[markConfigType]));for(var axisConfigType of AXIS_CONFIGS)specifiedConfig[axisConfigType]\x26\x26($jscomp$destructuring$var72[axisConfigType]\x3dgetAxisConfigInternal(specifiedConfig[axisConfigType]));for(const headerConfigType of HEADER_CONFIGS)specifiedConfig[headerConfigType]\x26\x26\n($jscomp$destructuring$var72[headerConfigType]\x3dreplaceExprRefInIndex(specifiedConfig[headerConfigType]));specifiedConfig.legend\x26\x26($jscomp$destructuring$var72.legend\x3dreplaceExprRefInIndex(specifiedConfig.legend));specifiedConfig.scale\x26\x26($jscomp$destructuring$var72.scale\x3dreplaceExprRefInIndex(specifiedConfig.scale));if(specifiedConfig.style){prop\x3dspecifiedConfig.style;markConfigType\x3dkeys$jscomp$0(prop);axisConfigType\x3d{};for(JSCompiler_inline_result of markConfigType)axisConfigType[JSCompiler_inline_result]\x3d\ngetAxisConfigInternal(prop[JSCompiler_inline_result]);var JSCompiler_inline_result\x3daxisConfigType;$jscomp$destructuring$var72.style\x3dJSCompiler_inline_result}specifiedConfig.title\x26\x26($jscomp$destructuring$var72.title\x3dreplaceExprRefInIndex(specifiedConfig.title));specifiedConfig.view\x26\x26($jscomp$destructuring$var72.view\x3dreplaceExprRefInIndex(specifiedConfig.view));return $jscomp$destructuring$var72}function stripAndRedirectConfig(config){config\x3dduplicate(config);for(var prop$jscomp$0 of VL_ONLY_CONFIG_PROPERTIES)delete config[prop$jscomp$0];\nif(config.axis)for(var prop$jscomp$1 in config.axis)isConditionalAxisValue(config.axis[prop$jscomp$1])\x26\x26delete config.axis[prop$jscomp$1];if(config.legend)for(var prop$jscomp$2 of VL_ONLY_LEGEND_CONFIG)delete config.legend[prop$jscomp$2];if(config.mark){for(var prop$jscomp$3 of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config.mark[prop$jscomp$3];config.mark.tooltip\x26\x26isObject(config.mark.tooltip)\x26\x26delete config.mark.tooltip}config.params\x26\x26(config.signals\x3d(config.signals||[]).concat(assembleParameterSignals(config.params)),\ndelete config.params);for(var markType of MARK_STYLES){for(const prop of VL_ONLY_MARK_CONFIG_PROPERTIES)delete config[markType][prop];if(prop$jscomp$0\x3dVL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX[markType])for(const prop of prop$jscomp$0)delete config[markType][prop];prop$jscomp$1\x3dprop$jscomp$0\x3dvoid 0;prop$jscomp$2\x3dconfig;prop$jscomp$3\x3dmarkType;var toProp\x3dvoid 0,propConfig\x3dprop$jscomp$2[prop$jscomp$3];\x22view\x22\x3d\x3d\x3dprop$jscomp$3\x26\x26(toProp\x3d\x22cell\x22);propConfig\x3dObject.assign({},propConfig,prop$jscomp$2.style[null!\x3d\x3d\n(prop$jscomp$1\x3dtoProp)\x26\x26void 0!\x3d\x3dprop$jscomp$1?prop$jscomp$1:prop$jscomp$3]);isEmpty(propConfig)||(prop$jscomp$2.style[null!\x3d\x3d(prop$jscomp$0\x3dtoProp)\x26\x26void 0!\x3d\x3dprop$jscomp$0?prop$jscomp$0:prop$jscomp$3]\x3dpropConfig);delete prop$jscomp$2[prop$jscomp$3]}for(const m of keys$jscomp$0(compositeMarkRegistry))delete config[m];{markType\x3dconfig;const {titleMarkConfig,subtitleMarkConfig,subtitle}\x3dextractTitleConfig(markType.title);isEmpty(titleMarkConfig)||(markType.style[\x22group-title\x22]\x3dObject.assign({},markType.style[\x22group-title\x22],\ntitleMarkConfig));isEmpty(subtitleMarkConfig)||(markType.style[\x22group-subtitle\x22]\x3dObject.assign({},markType.style[\x22group-subtitle\x22],subtitleMarkConfig));isEmpty(subtitle)?delete markType.title:markType.title\x3dsubtitle}for(const prop in config)isObject(config[prop])\x26\x26isEmpty(config[prop])\x26\x26delete config[prop];return isEmpty(config)?void 0:config}function potentialStackedChannel(encoding,x){const y\x3d\x22x\x22\x3d\x3d\x3dx?\x22y\x22:\x22radius\x22;var xDef\x3dencoding[x];encoding\x3dencoding[y];if(isFieldDef(xDef)\x26\x26isFieldDef(encoding))if(\x22quantitative\x22\x3d\x3d\x3d\nchannelDefType(xDef)\x26\x26\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding)){if(xDef.stack)return x;if(encoding.stack)return y;const xAggregate\x3disFieldDef(xDef)\x26\x26!!xDef.aggregate,yAggregate\x3disFieldDef(encoding)\x26\x26!!encoding.aggregate;if(xAggregate!\x3d\x3dyAggregate)return xAggregate?x:y;var _xDef$scale,_yDef$scale;xDef\x3dnull\x3d\x3d\x3d(_xDef$scale\x3dxDef.scale)||void 0\x3d\x3d\x3d_xDef$scale?void 0:_xDef$scale.type;_xDef$scale\x3dnull\x3d\x3d\x3d(_yDef$scale\x3dencoding.scale)||void 0\x3d\x3d\x3d_yDef$scale?void 0:_yDef$scale.type;if(xDef\x26\x26\x22linear\x22!\x3d\x3dxDef)return y;\nif(_xDef$scale\x26\x26\x22linear\x22!\x3d\x3d_xDef$scale)return x}else{if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(xDef))return x;if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding))return y}else{if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(xDef))return x;if(\x22quantitative\x22\x3d\x3d\x3dchannelDefType(encoding))return y}}function getDimensionChannel(channel){switch(channel){case \x22x\x22:return\x22y\x22;case \x22y\x22:return\x22x\x22;case \x22theta\x22:return\x22radius\x22;case \x22radius\x22:return\x22theta\x22}}function stack$jscomp$1(m,encoding,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;m\x3disMarkDef(m)?m.type:\nm;if(!STACKABLE_MARKS.has(m))return null;const fieldChannel\x3dpotentialStackedChannel(encoding,\x22x\x22)||potentialStackedChannel(encoding,\x22theta\x22);if(!fieldChannel)return null;const stackedFieldDef\x3dencoding[fieldChannel];var stackedField\x3disFieldDef(stackedFieldDef)?vgField(stackedFieldDef,{}):void 0;let dimensionChannel\x3dgetDimensionChannel(fieldChannel),dimensionDef\x3dencoding[dimensionChannel],dimensionField\x3disFieldDef(dimensionDef)?vgField(dimensionDef,{}):void 0;dimensionField\x3d\x3d\x3dstackedField\x26\x26(dimensionChannel\x3d\ndimensionDef\x3ddimensionField\x3dvoid 0);stackedField\x3dNONPOSITION_CHANNELS.reduce((sc,channel)\x3d\x3e{if(\x22tooltip\x22!\x3d\x3dchannel\x26\x26channelHasField(encoding,channel)){var channelDef\x3dencoding[channel];for(const cDef of array$jscomp$0(channelDef)){channelDef\x3dgetFieldDef(cDef);if(channelDef.aggregate)continue;const f\x3dvgField(channelDef,{});f\x26\x26f\x3d\x3d\x3ddimensionField||sc.push({channel,fieldDef:channelDef})}}return sc},[]);let offset;void 0!\x3d\x3dstackedFieldDef.stack?offset\x3disBoolean(stackedFieldDef.stack)?stackedFieldDef.stack?\n\x22zero\x22:null:stackedFieldDef.stack:0\x3cstackedField.length\x26\x26STACK_BY_DEFAULT_MARKS.has(m)\x26\x26(offset\x3d\x22zero\x22);if(!(offset\x26\x26offset in STACK_OFFSET_INDEX)||isAggregate(encoding)\x26\x260\x3d\x3d\x3dstackedField.length)return null;if(stackedFieldDef.scale\x26\x26stackedFieldDef.scale.type\x26\x26stackedFieldDef.scale.type!\x3d\x3dScaleType.LINEAR){if(opt.disallowNonLinearStack)return null;warn(\x22Cannot stack non-linear scale (\x22.concat(stackedFieldDef.scale.type,\x22).\x22))}if(isFieldOrDatumDef(encoding[getSecondaryRangeChannel(fieldChannel)]))return void 0!\x3d\x3d\nstackedFieldDef.stack\x26\x26warn(cannotStackRangedMark(fieldChannel)),null;isFieldDef(stackedFieldDef)\x26\x26stackedFieldDef.aggregate\x26\x26!contains(SUM_OPS,stackedFieldDef.aggregate)\x26\x26warn(\x27Stacking is applied even though the aggregate function is non-summative (\x22\x27.concat(stackedFieldDef.aggregate,\x27\x22).\x27));return{groupbyChannel:dimensionDef?dimensionChannel:void 0,groupbyField:dimensionField,fieldChannel,impute:null\x3d\x3d\x3dstackedFieldDef.impute?!1:isPathMark(m),stackBy:stackedField,offset}}function dropLineAndPoint(markDef){markDef\x3d\nObject.assign({},markDef);markDef\x3d(delete markDef.point,delete markDef.line,markDef);return 1\x3ckeys$jscomp$0(markDef).length?markDef:markDef.type}function dropLineAndPointFromConfig(config){for(const mark of[\x22line\x22,\x22area\x22,\x22rule\x22,\x22trail\x22])config[mark]\x26\x26(config\x3dObject.assign({},config,{[mark]:omit(config[mark],[\x22point\x22,\x22line\x22])}));return config}function getPointOverlay(markDef,markConfig,encoding){markConfig\x3dvoid 0\x3d\x3d\x3dmarkConfig?{}:markConfig;if(\x22transparent\x22\x3d\x3d\x3dmarkDef.point)return{opacity:0};if(markDef.point)return isObject(markDef.point)?\nmarkDef.point:{};if(void 0!\x3d\x3dmarkDef.point)return null;if(markConfig.point||encoding.shape)return isObject(markConfig.point)?markConfig.point:{}}function getLineOverlay(markDef,markConfig){markConfig\x3dvoid 0\x3d\x3d\x3dmarkConfig?{}:markConfig;if(markDef.line)return!0\x3d\x3d\x3dmarkDef.line?{}:markDef.line;if(void 0!\x3d\x3dmarkDef.line)return null;if(markConfig.line)return!0\x3d\x3d\x3dmarkConfig.line?{}:markConfig.line}function replaceRepeaterInEncoding(encoding,repeater){return repeater?replaceRepeaterInMapping(encoding,repeater):\nencoding}function replaceRepeatInProp(prop,o,repeater){const val\x3do[prop];if(val\x26\x26!isString(val)\x26\x26\x22repeat\x22in val){if(val.repeat in repeater)return Object.assign({},o,{[prop]:repeater[val.repeat]});warn(\x27Unknown repeated value \x22\x27.concat(val.repeat,\x27\x22.\x27))}else return o}function replaceRepeaterInFieldDef(fieldDef,repeater){fieldDef\x3dreplaceRepeatInProp(\x22field\x22,fieldDef,repeater);if(void 0!\x3d\x3dfieldDef){if(null\x3d\x3d\x3dfieldDef)return null;\x22sort\x22in fieldDef\x26\x26isSortField(fieldDef.sort)\x26\x26(repeater\x3dreplaceRepeatInProp(\x22field\x22,\nfieldDef.sort,repeater),fieldDef\x3dObject.assign({},fieldDef,repeater?{sort:repeater}:{}));return fieldDef}}function replaceRepeaterInFieldOrDatumDef(def,repeater){if(isFieldDef(def))return replaceRepeaterInFieldDef(def,repeater);repeater\x3dreplaceRepeatInProp(\x22datum\x22,def,repeater);repeater\x3d\x3d\x3ddef||repeater.type||(repeater.type\x3d\x22nominal\x22);return repeater}function replaceRepeaterInChannelDef(channelDef,repeater){if(isFieldOrDatumDef(channelDef)){if(repeater\x3dreplaceRepeaterInFieldOrDatumDef(channelDef,repeater))return repeater;\nif(channelDef\x26\x26\x22condition\x22in channelDef)return{condition:channelDef.condition}}else{if(hasConditionalFieldOrDatumDef(channelDef)){if(repeater\x3dreplaceRepeaterInFieldOrDatumDef(channelDef.condition,repeater))return Object.assign({},channelDef,{condition:repeater});channelDef\x3dObject.assign({},channelDef);return delete channelDef.condition,channelDef}return channelDef}}function replaceRepeaterInMapping(mapping,repeater){const out\x3d{};for(const channel in mapping)if(hop.call(mapping,channel)){var channelDef\x3d\nmapping[channel];isArray(channelDef)?out[channel]\x3dchannelDef.map(cd\x3d\x3ereplaceRepeaterInChannelDef(cd,repeater)).filter(cd\x3d\x3ecd):(channelDef\x3dreplaceRepeaterInChannelDef(channelDef,repeater),void 0!\x3d\x3dchannelDef\x26\x26(out[channel]\x3dchannelDef))}return out}function mergeEncoding($jscomp$destructuring$var102){var {parentEncoding,encoding\x3d{},layer}\x3d$jscomp$destructuring$var102;$jscomp$destructuring$var102\x3d{};if(parentEncoding){var channels\x3dnew Set([...keys$jscomp$0(parentEncoding),...keys$jscomp$0(encoding)]);\nfor(const channel of channels){channels\x3dencoding[channel];const parentChannelDef\x3dparentEncoding[channel];if(isFieldOrDatumDef(channels))channels\x3dObject.assign({},parentChannelDef,channels),$jscomp$destructuring$var102[channel]\x3dchannels;else if(hasConditionalFieldOrDatumDef(channels))$jscomp$destructuring$var102[channel]\x3dObject.assign({},channels,{condition:Object.assign({},parentChannelDef,channels.condition)});else if(channels||null\x3d\x3d\x3dchannels)$jscomp$destructuring$var102[channel]\x3dchannels;else if(layer||\nisValueDef(parentChannelDef)||isSignalRef(parentChannelDef)||isFieldOrDatumDef(parentChannelDef)||isArray(parentChannelDef))$jscomp$destructuring$var102[channel]\x3dparentChannelDef}}else $jscomp$destructuring$var102\x3dencoding;return!$jscomp$destructuring$var102||isEmpty($jscomp$destructuring$var102)?void 0:$jscomp$destructuring$var102}function mergeProjection(opt){const {parentProjection:parentProjection$jscomp$0,projection:projection$jscomp$0}\x3dopt;if(parentProjection$jscomp$0\x26\x26projection$jscomp$0){{const {parentProjection,\nprojection}\x3d{parentProjection:parentProjection$jscomp$0,projection:projection$jscomp$0};opt\x3d\x22Layer\x27s shared projection \x22.concat(stringify(parentProjection),\x22 is overridden by a child projection \x22).concat(stringify(projection),\x22.\x22)}warn(opt)}return null!\x3d\x3dprojection$jscomp$0\x26\x26void 0!\x3d\x3dprojection$jscomp$0?projection$jscomp$0:parentProjection$jscomp$0}function normalize$jscomp$0(spec,config){void 0\x3d\x3d\x3dconfig\x26\x26(config\x3dinitConfig(spec.config));var JSCompiler_inline_result\x3dconfig;JSCompiler_inline_result\x3d\nvoid 0\x3d\x3d\x3dJSCompiler_inline_result?{}:JSCompiler_inline_result;JSCompiler_inline_result\x3dnormalizer.map(spec,{config:JSCompiler_inline_result});const {width:width$jscomp$0,height:height$jscomp$0}\x3dspec;{let {width,height}\x3d{width:width$jscomp$0,height:height$jscomp$0,autosize:spec.autosize};spec\x3disUnitSpec(JSCompiler_inline_result)||\x22layer\x22in JSCompiler_inline_result;const autosizeDefault\x3d{};spec?\x22container\x22\x3d\x3dwidth\x26\x26\x22container\x22\x3d\x3dheight?(autosizeDefault.type\x3d\x22fit\x22,autosizeDefault.contains\x3d\x22padding\x22):\x22container\x22\x3d\x3d\nwidth?(autosizeDefault.type\x3d\x22fit-x\x22,autosizeDefault.contains\x3d\x22padding\x22):\x22container\x22\x3d\x3dheight\x26\x26(autosizeDefault.type\x3d\x22fit-y\x22,autosizeDefault.contains\x3d\x22padding\x22):(\x22container\x22\x3d\x3dwidth\x26\x26(warn(containerSizeNonSingle(\x22width\x22)),width\x3dvoid 0),\x22container\x22\x3d\x3dheight\x26\x26(warn(containerSizeNonSingle(\x22height\x22)),height\x3dvoid 0));config\x3dObject.assign({},{type:\x22pad\x22},autosizeDefault,config?_normalizeAutoSize(config.autosize):{},_normalizeAutoSize(JSCompiler_inline_result.autosize));\x22fit\x22!\x3d\x3dconfig.type||spec||(warn(\x27Autosize \x22fit\x22 only works for single views and layered views.\x27),\nconfig.type\x3d\x22pad\x22);\x22container\x22\x3d\x3dwidth\x26\x26\x22fit\x22!\x3dconfig.type\x26\x26\x22fit-x\x22!\x3dconfig.type\x26\x26warn(containerSizeNotCompatibleWithAutosize(\x22width\x22));\x22container\x22\x3d\x3dheight\x26\x26\x22fit\x22!\x3dconfig.type\x26\x26\x22fit-y\x22!\x3dconfig.type\x26\x26warn(containerSizeNotCompatibleWithAutosize(\x22height\x22));spec\x3ddeepEqual(config,{type:\x22pad\x22})?void 0:config}return Object.assign({},JSCompiler_inline_result,spec?{autosize:spec}:{})}function _normalizeAutoSize(autosize){return isString(autosize)?{type:autosize}:null!\x3d\x3dautosize\x26\x26void 0!\x3d\x3dautosize?autosize:\n{}}function makeExplicit(value){return{explicit:!0,value}}function makeImplicit(value){return{explicit:!1,value}}function tieBreakByComparing(compare){return(v1,v2,property,propertyOf)\x3d\x3e{const diff\x3dcompare(v1.value,v2.value);return 0\x3cdiff?v1:0\x3ediff?v2:defaultTieBreaker(v1,v2,property,propertyOf)}}function defaultTieBreaker(v1$jscomp$0,v2,property,propertyOf){if(v1$jscomp$0.explicit\x26\x26v2.explicit){var v1\x3dv1$jscomp$0.value;v2\x3dv2.value;property\x3d\x22Conflicting \x22.concat(propertyOf.toString(),\x27 property \x22\x27).concat(property.toString(),\n\x27\x22 (\x27).concat(stringify(v1),\x22 and \x22).concat(stringify(v2),\x22). Using \x22).concat(stringify(v1),\x22.\x22);warn(property)}return v1$jscomp$0}function mergeValuesWithExplicit(v1,v2,property,propertyOf,tieBreaker){tieBreaker\x3dvoid 0\x3d\x3d\x3dtieBreaker?defaultTieBreaker:tieBreaker;return void 0\x3d\x3d\x3dv1||void 0\x3d\x3d\x3dv1.value?v2:v1.explicit\x26\x26!v2.explicit?v1:v2.explicit\x26\x26!v1.explicit?v2:deepEqual(v1.value,v2.value)?v1:tieBreaker(v1,v2,property,propertyOf)}function isNamedData(data){return\x22name\x22in data\x26\x26!(\x22url\x22in data)\x26\x26!(\x22values\x22in\ndata)\x26\x26!isGenerator(data)}function isGenerator(data){return data\x26\x26(\x22sequence\x22in data||\x22sphere\x22in data||\x22graticule\x22in data)}function normalizeTransform(transform){return transform.map(t\x3d\x3e\x22filter\x22in t?{filter:normalizeLogicalComposition(t.filter,normalizePredicate)}:t)}function eventSelector(selector,source,marks){DEFAULT_SOURCE\x3dsource||\x22view\x22;MARKS\x3dmarks||DEFAULT_MARKS;return parseMerge(selector.trim()).map(parseSelector)}function find$jscomp$0(s,i,endChar,pushChar,popChar){const n\x3ds.length;let count\x3d\n0,c;for(;i\x3cn;++i)if(c\x3ds[i],count||c!\x3d\x3dendChar)popChar\x26\x260\x3c\x3dpopChar.indexOf(c)?--count:pushChar\x26\x260\x3c\x3dpushChar.indexOf(c)\x26\x26++count;else break;return i}function parseMerge(s){const output\x3d[],n\x3ds.length;let start\x3d0,i\x3d0;for(;i\x3cn;)i\x3dfind$jscomp$0(s,i,\x22,\x22,\x22[{\x22,\x22]}\x22),output.push(s.substring(start,i).trim()),start\x3d++i;if(0\x3d\x3d\x3doutput.length)throw\x22Empty event selector: \x22+s;return output}function parseSelector(s){if(\x22[\x22\x3d\x3d\x3ds[0]){var JSCompiler_temp\x3ds;var n$jscomp$0\x3dJSCompiler_temp.length;s\x3dfind$jscomp$0(JSCompiler_temp,\n1,\x22]\x22,\x22[\x22,\x22]\x22);if(s\x3d\x3d\x3dn$jscomp$0)throw\x22Empty between selector: \x22+JSCompiler_temp;n$jscomp$0\x3dparseMerge(JSCompiler_temp.substring(1,s));if(2!\x3d\x3dn$jscomp$0.length)throw\x22Between selector must have two elements: \x22+JSCompiler_temp;JSCompiler_temp\x3dJSCompiler_temp.slice(s+1).trim();if(\x22\\x3e\x22!\x3d\x3dJSCompiler_temp[0])throw\x22Expected \x27\\x3e\x27 after between selector: \x22+JSCompiler_temp;n$jscomp$0\x3dn$jscomp$0.map(parseSelector);JSCompiler_temp\x3dparseSelector(JSCompiler_temp.slice(1).trim());JSCompiler_temp.between?JSCompiler_temp\x3d\n{between:n$jscomp$0,stream:JSCompiler_temp}:JSCompiler_temp.between\x3dn$jscomp$0}else{{n$jscomp$0\x3d{source:DEFAULT_SOURCE};const source\x3d[];let throttle\x3d[0,0],markname\x3d0,start\x3d0,n\x3ds.length,i\x3d0,j;if(\x22}\x22\x3d\x3d\x3ds[n-1]){i\x3ds.lastIndexOf(\x22{\x22);if(0\x3c\x3di){try{throttle\x3dparseThrottle(s.substring(i+1,n-1))}catch(e){throw\x22Invalid throttle specification: \x22+s;}s\x3ds.slice(0,i).trim();n\x3ds.length}else throw\x22Unmatched right brace: \x22+s;i\x3d0}if(!n)throw s;\x22@\x22\x3d\x3d\x3ds[0]\x26\x26(markname\x3d++i);j\x3dfind$jscomp$0(s,i,\x22:\x22);j\x3cn\x26\x26(source.push(s.substring(start,\nj).trim()),start\x3di\x3d++j);i\x3dfind$jscomp$0(s,i,\x22[\x22);if(i\x3d\x3d\x3dn)source.push(s.substring(start,n).trim());else if(source.push(s.substring(start,i).trim()),JSCompiler_temp\x3d[],start\x3d++i,start\x3d\x3d\x3dn)throw\x22Unmatched left bracket: \x22+s;for(;i\x3cn;){i\x3dfind$jscomp$0(s,i,\x22]\x22);if(i\x3d\x3d\x3dn)throw\x22Unmatched left bracket: \x22+s;JSCompiler_temp.push(s.substring(start,i).trim());if(i\x3cn-1\x26\x26\x22[\x22!\x3d\x3ds[++i])throw\x22Expected left bracket: \x22+s;start\x3d++i}if(!(n\x3dsource.length)||ILLEGAL.test(source[n-1]))throw\x22Invalid event selector: \x22+s;1\x3c\nn?(n$jscomp$0.type\x3dsource[1],markname?n$jscomp$0.markname\x3dsource[0].slice(1):MARKS[source[0]]?n$jscomp$0.marktype\x3dsource[0]:n$jscomp$0.source\x3dsource[0]):n$jscomp$0.type\x3dsource[0];\x22!\x22\x3d\x3d\x3dn$jscomp$0.type.slice(-1)\x26\x26(n$jscomp$0.consume\x3d!0,n$jscomp$0.type\x3dn$jscomp$0.type.slice(0,-1));null!\x3dJSCompiler_temp\x26\x26(n$jscomp$0.filter\x3dJSCompiler_temp);throttle[0]\x26\x26(n$jscomp$0.throttle\x3dthrottle[0]);throttle[1]\x26\x26(n$jscomp$0.debounce\x3dthrottle[1]);JSCompiler_temp\x3dn$jscomp$0}}return JSCompiler_temp}function parseThrottle(s){const a\x3d\ns.split(\x22,\x22);if(!s.length||2\x3ca.length)throw s;return a.map(_\x3d\x3e{_\x3d+_;if(_!\x3d\x3d_)throw s;return _})}function wrapCondition(model,channelDef,vgChannel,refFn){var condition\x3d!!channelDef\x26\x26\x22condition\x22in channelDef\x26\x26channelDef.condition;channelDef\x3drefFn(channelDef);return condition?(condition\x3darray$jscomp$0(condition).map(c\x3d\x3e{const conditionValueRef\x3drefFn(c);c\x3dc.selection?parseSelectionPredicate(model,c.selection):expression$jscomp$0(model,c.test);return Object.assign({},{test:c},conditionValueRef)}),{[vgChannel]:[...condition,\n...void 0!\x3d\x3dchannelDef?[channelDef]:[]]}):void 0!\x3d\x3dchannelDef?{[vgChannel]:channelDef}:{}}function text$jscomp$0(model,channel){channel\x3dvoid 0\x3d\x3d\x3dchannel?\x22text\x22:channel;return wrapCondition(model,model.encoding[channel],channel,cDef\x3d\x3etextRef(cDef,model.config))}function textRef(channelDef,config,expr){expr\x3dvoid 0\x3d\x3d\x3dexpr?\x22datum\x22:expr;if(channelDef){if(isValueDef(channelDef))return signalOrValueRef(channelDef.value);if(isFieldOrDatumDef(channelDef)){const {format,formatType}\x3dgetFormatMixins(channelDef);\nreturn formatSignalRef({fieldOrDatumDef:channelDef,format,formatType,expr,config})}}}function tooltip(model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;const {encoding,markDef,config,stack}\x3dmodel,channelDef\x3dencoding.tooltip;if(isArray(channelDef))return{tooltip:tooltipRefForEncoding({tooltip:channelDef},stack,config,opt)};{const datum\x3dopt.reactiveGeom?\x22datum.datum\x22:\x22datum\x22;return wrapCondition(model,channelDef,\x22tooltip\x22,cDef\x3d\x3e{const tooltipRefFromChannelDef\x3dtextRef(cDef,config,datum);if(tooltipRefFromChannelDef)return tooltipRefFromChannelDef;\nif(null!\x3d\x3dcDef){cDef\x3dgetMarkPropOrConfig(\x22tooltip\x22,markDef,config);!0\x3d\x3d\x3dcDef\x26\x26(cDef\x3d{content:\x22encoding\x22});if(isString(cDef))return{value:cDef};if(isObject(cDef))return isSignalRef(cDef)?cDef:\x22encoding\x22\x3d\x3d\x3dcDef.content?tooltipRefForEncoding(encoding,stack,config,opt):{signal:datum}}})}}function tooltipData(encoding,stack,config,$jscomp$destructuring$var103){function add(fDef,channel){var _value,mainChannel\x3dgetMainRangeChannel(channel);fDef\x3disTypedFieldDef(fDef)?fDef:Object.assign({},fDef,{type:encoding[mainChannel].type});\nmainChannel\x3dfDef.title||titleFormatter(fDef,config);mainChannel\x3darray$jscomp$0(mainChannel).join(\x22, \x22);if(channel in POSITION_SCALE_CHANNEL_INDEX){const channel2\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22;var fieldDef2\x3dgetFieldDef(encoding[channel2]);if(isBinned(fDef.bin)\x26\x26fieldDef2){var value\x3dvgField(fDef,{expr});fieldDef2\x3dvgField(fieldDef2,{expr});const {format,formatType}\x3dgetFormatMixins(fDef);value\x3dbinFormatExpression(value,fieldDef2,format,formatType,config);toSkip[channel2]\x3d!0}else if(stack\x26\x26stack.fieldChannel\x3d\x3d\x3d\nchannel\x26\x26\x22normalize\x22\x3d\x3d\x3dstack.offset){const {format,formatType}\x3dgetFormatMixins(fDef);value\x3dformatSignalRef({fieldOrDatumDef:fDef,format,formatType,expr,config,normalizeStack:!0}).signal}}value\x3dnull!\x3d\x3d(_value\x3dvalue)\x26\x26void 0!\x3d\x3d_value?_value:textRef(fDef,config,expr).signal;tuples.push({channel,key:mainChannel,value})}({reactiveGeom:$jscomp$destructuring$var103}\x3dvoid 0\x3d\x3d\x3d$jscomp$destructuring$var103?{}:$jscomp$destructuring$var103);const toSkip\x3d{},expr\x3d$jscomp$destructuring$var103?\x22datum.datum\x22:\x22datum\x22,\ntuples\x3d[];forEach(encoding,(channelDef,channel)\x3d\x3e{isFieldDef(channelDef)?add(channelDef,channel):hasConditionalFieldDef(channelDef)\x26\x26add(channelDef.condition,channel)});$jscomp$destructuring$var103\x3d{};for(const $jscomp$destructuring$var104 of tuples){const {channel,key,value}\x3d$jscomp$destructuring$var104;toSkip[channel]||$jscomp$destructuring$var103[key]||($jscomp$destructuring$var103[key]\x3dvalue)}return $jscomp$destructuring$var103}function tooltipRefForEncoding(encoding,stack,config,$jscomp$destructuring$var105){({reactiveGeom:$jscomp$destructuring$var105}\x3d\nvoid 0\x3d\x3d\x3d$jscomp$destructuring$var105?{}:$jscomp$destructuring$var105);encoding\x3dtooltipData(encoding,stack,config,{reactiveGeom:$jscomp$destructuring$var105});encoding\x3dentries(encoding).map($jscomp$destructuring$var106\x3d\x3e{var [key,value]\x3d$jscomp$destructuring$var106;return\x27\x22\x27.concat(key,\x27\x22: \x27).concat(value)});return 0\x3cencoding.length?{signal:\x22{\x22.concat(encoding.join(\x22, \x22),\x22}\x22)}:void 0}function aria(model){const {markDef,config}\x3dmodel,enableAria\x3dgetMarkPropOrConfig(\x22aria\x22,markDef,config);return!1\x3d\x3d\x3d\nenableAria?{}:Object.assign({},enableAria?{aria:enableAria}:{},ariaRoleDescription(model),description(model))}function ariaRoleDescription(model){const {mark,markDef,config}\x3dmodel;if(!1\x3d\x3d\x3dconfig.aria)return{};model\x3dgetMarkPropOrConfig(\x22ariaRoleDescription\x22,markDef,config);return null!\x3dmodel?{ariaRoleDescription:{value:model}}:mark in VG_MARK_INDEX?{}:{ariaRoleDescription:{value:mark}}}function description(model){const {encoding,markDef,config,stack}\x3dmodel;var channelDef\x3dencoding.description;if(channelDef)return wrapCondition(model,\nchannelDef,\x22description\x22,cDef\x3d\x3etextRef(cDef,model.config));channelDef\x3dgetMarkPropOrConfig(\x22description\x22,markDef,config);if(null!\x3dchannelDef)return{description:signalOrValueRef(channelDef)};if(!1\x3d\x3d\x3dconfig.aria)return{};channelDef\x3dtooltipData(encoding,stack,config);if(!isEmpty(channelDef))return{description:{signal:entries(channelDef).map(($jscomp$destructuring$var107,index)\x3d\x3e{var [key,value]\x3d$jscomp$destructuring$var107;return\x27\x22\x27.concat(0\x3cindex?\x22; \x22:\x22\x22).concat(key,\x27: \x22 + (\x27).concat(value,\x22)\x22)}).join(\x22 + \x22)}}}\nfunction nonPosition(channel,model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;const {markDef,encoding,config}\x3dmodel,{vgChannel}\x3dopt;let {defaultRef,defaultValue}\x3dopt;if(void 0\x3d\x3d\x3ddefaultRef){var _defaultValue;defaultValue\x3dnull!\x3d\x3d(_defaultValue\x3ddefaultValue)\x26\x26void 0!\x3d\x3d_defaultValue?_defaultValue:getMarkPropOrConfig(channel,markDef,config,{vgChannel,ignoreVgConfig:!0});void 0!\x3d\x3ddefaultValue\x26\x26(defaultRef\x3dsignalOrValueRef(defaultValue))}return wrapCondition(model,encoding[channel],null!\x3d\x3dvgChannel\x26\x26void 0!\x3d\x3dvgChannel?\nvgChannel:channel,cDef\x3d\x3emidPoint({channel,channelDef:cDef,markDef,config,scaleName:model.scaleName(channel),scale:model.getScaleComponent(channel),stack:null,defaultRef}))}function color$jscomp$0(model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{filled:void 0}:opt;var _opt$filled,_ref,_getMarkPropOrConfig,_getMarkPropOrConfig2;const {markDef,encoding,config}\x3dmodel,{type:markType}\x3dmarkDef;opt\x3dnull!\x3d\x3d(_opt$filled\x3dopt.filled)\x26\x26void 0!\x3d\x3d_opt$filled?_opt$filled:getMarkPropOrConfig(\x22filled\x22,markDef,config);_opt$filled\x3dcontains([\x22bar\x22,\n\x22point\x22,\x22circle\x22,\x22square\x22,\x22geoshape\x22],markType)?\x22transparent\x22:void 0;_opt$filled\x3dnull!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_getMarkPropOrConfig\x3dgetMarkPropOrConfig(!0\x3d\x3d\x3dopt?\x22color\x22:void 0,markDef,config,{vgChannel:\x22fill\x22}))\x26\x26void 0!\x3d\x3d_getMarkPropOrConfig?_getMarkPropOrConfig:config.mark[!0\x3d\x3d\x3dopt\x26\x26\x22color\x22])\x26\x26void 0!\x3d\x3d_ref?_ref:_opt$filled;_ref\x3dnull!\x3d\x3d(_getMarkPropOrConfig2\x3dgetMarkPropOrConfig(!1\x3d\x3d\x3dopt?\x22color\x22:void 0,markDef,config,{vgChannel:\x22stroke\x22}))\x26\x26void 0!\x3d\x3d_getMarkPropOrConfig2?_getMarkPropOrConfig2:config.mark[!1\x3d\x3d\x3d\nopt\x26\x26\x22color\x22];_getMarkPropOrConfig2\x3dopt?\x22fill\x22:\x22stroke\x22;_getMarkPropOrConfig\x3dObject.assign({},_opt$filled?{fill:signalOrValueRef(_opt$filled)}:{},_ref?{stroke:signalOrValueRef(_ref)}:{});markDef.color\x26\x26(opt?markDef.fill:markDef.stroke)\x26\x26warn(droppingColor(\x22property\x22,{fill:\x22fill\x22in markDef,stroke:\x22stroke\x22in markDef}));return Object.assign({},_getMarkPropOrConfig,nonPosition(\x22color\x22,model,{vgChannel:_getMarkPropOrConfig2,defaultValue:opt?_opt$filled:_ref}),nonPosition(\x22fill\x22,model,{defaultValue:encoding.fill?\n_opt$filled:void 0}),nonPosition(\x22stroke\x22,model,{defaultValue:encoding.stroke?_ref:void 0}))}function zindex(model){const {encoding,mark}\x3dmodel,order\x3dencoding.order;return!isPathMark(mark)\x26\x26isValueDef(order)?wrapCondition(model,order,\x22zindex\x22,cd\x3d\x3esignalOrValueRef(cd.value)):{}}function getOffset(channel,markDef){channel\x3dgetOffsetChannel(channel);if(markDef\x3dmarkDef[channel])return markDef}function pointPosition(channel$jscomp$0,model,$jscomp$destructuring$var108){var {defaultPos,vgChannel,isMidPoint:isMidPoint$jscomp$0}\x3d\n$jscomp$destructuring$var108;const {encoding,markDef:markDef$jscomp$0,config:config$jscomp$0,stack:stack$jscomp$0}\x3dmodel;$jscomp$destructuring$var108\x3dencoding[channel$jscomp$0];const channel2Def\x3dencoding[getSecondaryRangeChannel(channel$jscomp$0)],scaleName$jscomp$0\x3dmodel.scaleName(channel$jscomp$0),scale\x3dmodel.getScaleComponent(channel$jscomp$0),offset$jscomp$0\x3dgetOffset(channel$jscomp$0,markDef$jscomp$0),defaultRef\x3dpointPositionDefaultRef({model,defaultPos,channel:channel$jscomp$0,scaleName:scaleName$jscomp$0,\nscale});if(!$jscomp$destructuring$var108\x26\x26channel$jscomp$0 in POSITION_SCALE_CHANNEL_INDEX\x26\x26(encoding.latitude||encoding.longitude))model\x3d{field:model.getName(channel$jscomp$0)};else a:{model\x3d{channel:channel$jscomp$0,channelDef:$jscomp$destructuring$var108,channel2Def,markDef:markDef$jscomp$0,config:config$jscomp$0,isMidPoint:isMidPoint$jscomp$0,scaleName:scaleName$jscomp$0,scale,stack:stack$jscomp$0,offset:offset$jscomp$0,defaultRef};const {channel,channelDef,isMidPoint,scaleName,stack,offset,markDef,\nconfig}\x3dmodel;if(isFieldOrDatumDef(channelDef)\x26\x26stack\x26\x26channel\x3d\x3d\x3dstack.fieldChannel){if(isFieldDef(channelDef)\x26\x26(model\x3dgetBand({channel,fieldDef:channelDef,isMidPoint,markDef,stack,config}),void 0!\x3d\x3dmodel)){model\x3dinterpolatedSignalRef({scaleName,fieldOrDatumDef:channelDef,startSuffix:\x22start\x22,band:model,offset});break a}model\x3dvalueRefForFieldOrDatumDef(channelDef,scaleName,{suffix:\x22end\x22},{offset})}else model\x3dmidPointRefWithPositionInvalidTest(model)}return model?{[vgChannel||channel$jscomp$0]:model}:\nvoid 0}function pointPositionDefaultRef($jscomp$destructuring$var109){var {model,defaultPos,channel,scaleName,scale}\x3d$jscomp$destructuring$var109;const {markDef,config}\x3dmodel;return()\x3d\x3e{var mainChannel\x3dgetMainRangeChannel(channel),vgChannel\x3dgetVgPositionChannel(channel);vgChannel\x3dgetMarkPropOrConfig(channel,markDef,config,{vgChannel});if(void 0!\x3d\x3dvgChannel)return widthHeightValueOrSignalRef(channel,vgChannel);switch(defaultPos){case \x22zeroOrMin\x22:case \x22zeroOrMax\x22:if(scaleName\x26\x26(vgChannel\x3dscale.get(\x22type\x22),\n!contains([ScaleType.LOG,ScaleType.TIME,ScaleType.UTC],vgChannel)\x26\x26scale.domainDefinitelyIncludesZero()))return{scale:scaleName,value:0};if(\x22zeroOrMin\x22\x3d\x3d\x3ddefaultPos)return\x22y\x22\x3d\x3d\x3dmainChannel?{field:{group:\x22height\x22}}:{value:0};switch(mainChannel){case \x22radius\x22:return{signal:\x22min(\x22.concat(model.width.signal,\x22,\x22).concat(model.height.signal,\x22)/2\x22)};case \x22theta\x22:return{signal:\x222*PI\x22};case \x22x\x22:return{field:{group:\x22width\x22}};case \x22y\x22:return{value:0}}break;case \x22mid\x22:return mainChannel\x3dmodel[getSizeChannel(channel)],\nObject.assign({},mainChannel,{mult:.5})}}}function vgAlignedPositionChannel(channel,markDef,config,defaultAlign){defaultAlign\x3dvoid 0\x3d\x3d\x3ddefaultAlign?\x22middle\x22:defaultAlign;if(\x22radius\x22\x3d\x3d\x3dchannel||\x22theta\x22\x3d\x3d\x3dchannel)return getVgPositionChannel(channel);var alignChannel\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22align\x22:\x22baseline\x22;markDef\x3dgetMarkPropOrConfig(alignChannel,markDef,config);isSignalRef(markDef)?(warn(\x22The \x22.concat(alignChannel,\x22 for range marks cannot be an expression\x22)),alignChannel\x3dvoid 0):alignChannel\x3dmarkDef;return\x22x\x22\x3d\x3d\x3d\nchannel?ALIGNED_X_CHANNEL[alignChannel||(\x22top\x22\x3d\x3d\x3ddefaultAlign?\x22left\x22:\x22center\x22)]:BASELINED_Y_CHANNEL[alignChannel||defaultAlign]}function pointOrRangePosition(channel,model,$jscomp$destructuring$var110){var {defaultPos,defaultPos2,range}\x3d$jscomp$destructuring$var110;return range?rangePosition(channel,model,{defaultPos,defaultPos2}):pointPosition(channel,model,{defaultPos})}function rangePosition(channel$jscomp$0,model,$jscomp$destructuring$var111){var {defaultPos,defaultPos2}\x3d$jscomp$destructuring$var111;\nconst {markDef:markDef$jscomp$0,config:config$jscomp$0}\x3dmodel;var channel2\x3dgetSecondaryRangeChannel(channel$jscomp$0);$jscomp$destructuring$var111\x3dgetSizeChannel(channel$jscomp$0);{const {encoding,mark,markDef,stack,config}\x3dmodel;var baseChannel\x3dgetMainRangeChannel(channel2);const sizeChannel\x3dgetSizeChannel(channel2),vgChannel\x3dgetVgPositionChannel(channel2);var channelDef\x3dencoding[baseChannel];const scaleName\x3dmodel.scaleName(baseChannel),scale\x3dmodel.getScaleComponent(baseChannel);baseChannel\x3dchannel2 in\nencoding||channel2 in markDef?getOffset(channel2,model.markDef):getOffset(baseChannel,model.markDef);if(channelDef||\x22x2\x22!\x3d\x3dchannel2\x26\x26\x22y2\x22!\x3d\x3dchannel2||!encoding.latitude\x26\x26!encoding.longitude){var {channel,channelDef:channelDef$jscomp$0,channel2Def,markDef:markDef$jscomp$1,config:config$jscomp$1,scaleName:scaleName$jscomp$0,scale:scale$jscomp$0,stack:stack$jscomp$0,offset,defaultRef}\x3d{channel:channel2,channelDef,channel2Def:encoding[channel2],markDef,config,scaleName,scale,stack,offset:baseChannel,\ndefaultRef:void 0};channelDef\x3disFieldOrDatumDef(channelDef$jscomp$0)\x26\x26stack$jscomp$0\x26\x26channel.charAt(0)\x3d\x3d\x3dstack$jscomp$0.fieldChannel.charAt(0)?valueRefForFieldOrDatumDef(channelDef$jscomp$0,scaleName$jscomp$0,{suffix:\x22start\x22},{offset}):midPointRefWithPositionInvalidTest({channel,channelDef:channel2Def,scaleName:scaleName$jscomp$0,scale:scale$jscomp$0,stack:stack$jscomp$0,markDef:markDef$jscomp$1,config:config$jscomp$1,offset,defaultRef});channel2\x3dvoid 0!\x3d\x3dchannelDef?{[vgChannel]:channelDef}:position2orSize(channel2,\nmarkDef)||position2orSize(channel2,{[channel2]:getMarkStyleConfig(channel2,markDef,config.style),[sizeChannel]:getMarkStyleConfig(sizeChannel,markDef,config.style)})||position2orSize(channel2,config[mark])||position2orSize(channel2,config.mark)||{[vgChannel]:pointPositionDefaultRef({model,defaultPos:defaultPos2,channel:channel2,scaleName,scale})()}}else channel2\x3d{[vgChannel]:{field:model.getName(channel2)}}}$jscomp$destructuring$var111\x3dchannel2[$jscomp$destructuring$var111]?vgAlignedPositionChannel(channel$jscomp$0,\nmarkDef$jscomp$0,config$jscomp$0):getVgPositionChannel(channel$jscomp$0);return Object.assign({},pointPosition(channel$jscomp$0,model,{defaultPos,vgChannel:$jscomp$destructuring$var111}),channel2)}function position2orSize(channel,markDef){const sizeChannel\x3dgetSizeChannel(channel),vgChannel\x3dgetVgPositionChannel(channel);if(void 0!\x3d\x3dmarkDef[vgChannel])return{[vgChannel]:widthHeightValueOrSignalRef(channel,markDef[vgChannel])};if(void 0!\x3d\x3dmarkDef[channel])return{[vgChannel]:widthHeightValueOrSignalRef(channel,\nmarkDef[channel])};if(markDef[sizeChannel])return{[sizeChannel]:widthHeightValueOrSignalRef(channel,markDef[sizeChannel])}}function rectPosition(model,channel$jscomp$0,mark){var _ref,_encoding$sizeChannel;const {config:config$jscomp$0,encoding:encoding$jscomp$0,markDef:markDef$jscomp$0,stack:stack$jscomp$0}\x3dmodel;var channel2\x3dgetSecondaryRangeChannel(channel$jscomp$0),sizeChannel\x3dgetSizeChannel(channel$jscomp$0),channelDef\x3dencoding$jscomp$0[channel$jscomp$0];channel2\x3dencoding$jscomp$0[channel2];var scale\x3d\nmodel.getScaleComponent(channel$jscomp$0),scaleType\x3dscale?scale.get(\x22type\x22):void 0,scaleName\x3dmodel.scaleName(channel$jscomp$0);const orient\x3dmarkDef$jscomp$0.orient;sizeChannel\x3dnull!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_encoding$sizeChannel\x3dencoding$jscomp$0[sizeChannel])\x26\x26void 0!\x3d\x3d_encoding$sizeChannel?_encoding$sizeChannel:encoding$jscomp$0.size)\x26\x26void 0!\x3d\x3d_ref?_ref:getMarkPropOrConfig(\x22size\x22,markDef$jscomp$0,config$jscomp$0,{vgChannel:sizeChannel});_ref\x3d\x22bar\x22\x3d\x3d\x3dmark\x26\x26(\x22x\x22\x3d\x3d\x3dchannel$jscomp$0?\x22vertical\x22\x3d\x3d\x3dorient:\x22horizontal\x22\x3d\x3d\x3d\norient);if(isFieldDef(channelDef)\x26\x26(isBinning(channelDef.bin)||isBinned(channelDef.bin)||channelDef.timeUnit\x26\x26!channel2)\x26\x26!sizeChannel\x26\x26!(scaleType in DISCRETE_DOMAIN_INDEX)){var _model$component$axes,_axis$get;mark\x3dgetBand({channel:channel$jscomp$0,fieldDef:channelDef,stack:stack$jscomp$0,markDef:markDef$jscomp$0,config:config$jscomp$0});model\x3dnull\x3d\x3d\x3d(_model$component$axes\x3dmodel.component.axes[channel$jscomp$0])||void 0\x3d\x3d\x3d_model$component$axes?void 0:_model$component$axes[0];model\x3dnull!\x3d\x3d(_axis$get\x3d\nnull\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.get(\x22translate\x22))\x26\x26void 0!\x3d\x3d_axis$get?_axis$get:.5;a:{channel$jscomp$0\x3d{fieldDef:channelDef,fieldDef2:channel2,channel:channel$jscomp$0,markDef:markDef$jscomp$0,scaleName,band:mark,axisTranslate:model,spacing:channel$jscomp$0 in POSITION_SCALE_CHANNEL_INDEX?getMarkPropOrConfig(\x22binSpacing\x22,markDef$jscomp$0,config$jscomp$0):void 0,reverse:scale.get(\x22reverse\x22),config:config$jscomp$0};var {fieldDef,fieldDef2,channel,band,scaleName:scaleName$jscomp$0,markDef:markDef$jscomp$1,\nspacing\x3d0,axisTranslate,reverse,config:config$jscomp$1}\x3dchannel$jscomp$0;channel$jscomp$0\x3dgetSecondaryRangeChannel(channel);channelDef\x3dgetVgPositionChannel(channel);model\x3dgetVgPositionChannel(channel$jscomp$0);mark\x3dgetOffset(channel,markDef$jscomp$1);if(isBinning(fieldDef.bin)||fieldDef.timeUnit)channel$jscomp$0\x3d{[model]:rectBinRef({channel,fieldDef,scaleName:scaleName$jscomp$0,markDef:markDef$jscomp$1,band:(1-band)/2,offset:getBinSpacing(channel$jscomp$0,spacing,reverse,axisTranslate,mark),config:config$jscomp$1}),\n[channelDef]:rectBinRef({channel,fieldDef,scaleName:scaleName$jscomp$0,markDef:markDef$jscomp$1,band:1-(1-band)/2,offset:getBinSpacing(channel,spacing,reverse,axisTranslate,mark),config:config$jscomp$1})};else{if(isBinned(fieldDef.bin)){var startRef\x3dvalueRefForFieldOrDatumDef(fieldDef,scaleName$jscomp$0,{},{offset:getBinSpacing(channel$jscomp$0,spacing,reverse,axisTranslate,mark)});if(isFieldDef(fieldDef2)){channel$jscomp$0\x3d{[model]:startRef,[channelDef]:valueRefForFieldOrDatumDef(fieldDef2,scaleName$jscomp$0,\n{},{offset:getBinSpacing(channel,spacing,reverse,axisTranslate,mark)})};break a}if(isObject(fieldDef.bin)\x26\x26fieldDef.bin.step){channel$jscomp$0\x3d{[model]:startRef,[channelDef]:{signal:\x27scale(\x22\x27.concat(scaleName$jscomp$0,\x27\x22, \x27).concat(vgField(fieldDef,{expr:\x22datum\x22}),\x22 + \x22).concat(fieldDef.bin.step,\x22)\x22),offset:getBinSpacing(channel,spacing,reverse,axisTranslate,mark)}};break a}}warn(channelRequiredForBinned(channel$jscomp$0));channel$jscomp$0\x3dvoid 0}}return channel$jscomp$0}if((isFieldOrDatumDef(channelDef)\x26\x26\nscaleType in DISCRETE_DOMAIN_INDEX||_ref)\x26\x26!channel2){{var _ref2;const {markDef,encoding,config,stack}\x3dmodel;_model$component$axes\x3dmarkDef.orient;scale\x3dmodel.scaleName(channel$jscomp$0);scaleName\x3dmodel.getScaleComponent(channel$jscomp$0);_axis$get\x3dgetSizeChannel(channel$jscomp$0);channel2\x3dgetSecondaryRangeChannel(channel$jscomp$0);_model$component$axes\x3d\x22horizontal\x22\x3d\x3d\x3d_model$component$axes\x26\x26\x22y\x22\x3d\x3d\x3dchannel$jscomp$0||\x22vertical\x22\x3d\x3d\x3d_model$component$axes\x26\x26\x22x\x22\x3d\x3d\x3dchannel$jscomp$0;_ref\x3dgetMarkPropOrConfig(_model$component$axes?\n\x22size\x22:_axis$get,markDef,config,{vgChannel:_axis$get});if(encoding.size||void 0!\x3d\x3d_ref)_model$component$axes?startRef\x3dnonPosition(\x22size\x22,model,{vgChannel:_axis$get,defaultValue:_ref}):warn(\x27Cannot apply size to non-oriented mark \x22\x27.concat(markDef.type,\x27\x22.\x27));_model$component$axes\x3dnull!\x3d\x3d(_ref2\x3disFieldOrDatumDef(channelDef)?getBand({channel:channel$jscomp$0,fieldDef:channelDef,markDef,stack,config}):void 0)\x26\x26void 0!\x3d\x3d_ref2?_ref2:1;startRef||(scaleType\x3d_axis$get,_ref2\x3dscale,_ref\x3dscaleName,startRef\x3d\nconfig,_encoding$sizeChannel\x3d_model$component$axes,_ref?(scaleType\x3d_ref.get(\x22type\x22),\x22point\x22\x3d\x3d\x3dscaleType||\x22band\x22\x3d\x3d\x3dscaleType?void 0!\x3d\x3dstartRef[mark].discreteBandSize?mark\x3d{value:startRef[mark].discreteBandSize}:scaleType\x3d\x3d\x3dScaleType.POINT?(mark\x3d_ref.get(\x22range\x22),mark\x3disVgRangeStep(mark)\x26\x26isNumber(mark.step)?{value:mark.step-2}:{value:18}):mark\x3d{scale:_ref2,band:_encoding$sizeChannel}:mark\x3d{value:startRef[mark].continuousBandSize}):(_ref2\x3dgetViewConfigDiscreteStep(startRef.view,scaleType),mark\x3dgetFirstDefined(startRef[mark].discreteBandSize,\n_ref2-2),mark\x3dvoid 0!\x3d\x3dmark?{value:mark}:void 0),startRef\x3d{[_axis$get]:mark});_ref\x3d\x22band\x22!\x3d\x3d(null\x3d\x3d\x3dscaleName||void 0\x3d\x3d\x3dscaleName?void 0:scaleName.get(\x22type\x22))||!(\x22band\x22in startRef[_axis$get]);mark\x3dvgAlignedPositionChannel(channel$jscomp$0,markDef,config,_ref?\x22middle\x22:\x22top\x22);_ref2\x3dgetOffset(channel$jscomp$0,markDef);channel$jscomp$0\x3dmidPointRefWithPositionInvalidTest({channel:channel$jscomp$0,channelDef,markDef,config,scaleName:scale,scale:scaleName,stack,offset:_ref2,defaultRef:pointPositionDefaultRef({model,\ndefaultPos:\x22mid\x22,channel:channel$jscomp$0,scaleName:scale,scale:scaleName}),band:_ref?.5:(1-_model$component$axes)/2});_axis$get?channel$jscomp$0\x3dObject.assign({},{[mark]:channel$jscomp$0},startRef):(channelDef\x3dgetVgPositionChannel(channel2),model\x3dstartRef[_axis$get],model\x3d_ref2?Object.assign({},model,{offset:_ref2}):model,channel$jscomp$0\x3d{[mark]:channel$jscomp$0,[channelDef]:isArray(channel$jscomp$0)?[channel$jscomp$0[0],Object.assign({},channel$jscomp$0[1],{offset:model})]:Object.assign({},channel$jscomp$0,\n{offset:model})})}return channel$jscomp$0}return rangePosition(channel$jscomp$0,model,{defaultPos:\x22zeroOrMax\x22,defaultPos2:\x22zeroOrMin\x22})}function getBinSpacing(channel,spacing,reverse,translate,offset){if(channel in POLAR_POSITION_CHANNEL_INDEX)return 0;channel\x3d\x22x\x22\x3d\x3d\x3dchannel||\x22y2\x22\x3d\x3d\x3dchannel?-spacing/2:spacing/2;if(isSignalRef(reverse)||isSignalRef(offset)||isSignalRef(translate))return reverse\x3dsignalOrStringValue(reverse),offset\x3dsignalOrStringValue(offset),translate\x3d(translate\x3dsignalOrStringValue(translate))?\n\x22\x22.concat(translate,\x22 + \x22):\x22\x22,reverse\x3dreverse?\x22(\x22.concat(reverse,\x22 ? -1 : 1) * \x22):\x22\x22,channel\x3doffset?\x22(\x22.concat(offset,\x22 + \x22).concat(channel,\x22)\x22):channel,{signal:translate+reverse+channel};offset\x3doffset||0;return translate+(reverse?-offset-channel:+offset+channel)}function rectBinRef($jscomp$destructuring$var114){var {channel,fieldDef,scaleName,markDef,band,offset,config}\x3d$jscomp$destructuring$var114;$jscomp$destructuring$var114\x3dinterpolatedSignalRef({scaleName,fieldOrDatumDef:fieldDef,band,offset});\nreturn wrapPositionInvalidTest({fieldDef,channel,markDef,ref:$jscomp$destructuring$var114,config})}function baseEncodeEntry(model,ignore){const {fill,stroke}\x3d\x22include\x22\x3d\x3d\x3dignore.color?color$jscomp$0(model):{};return Object.assign({},markDefProperties(model.markDef,ignore),wrapAllFieldsInvalid(model,\x22fill\x22,fill),wrapAllFieldsInvalid(model,\x22stroke\x22,stroke),nonPosition(\x22opacity\x22,model),nonPosition(\x22fillOpacity\x22,model),nonPosition(\x22strokeOpacity\x22,model),nonPosition(\x22strokeWidth\x22,model),nonPosition(\x22strokeDash\x22,\nmodel),zindex(model),tooltip(model),text$jscomp$0(model,\x22href\x22),aria(model))}function wrapAllFieldsInvalid(model,channel,valueRef){const {config,mark,markDef}\x3dmodel;return\x22hide\x22\x3d\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,markDef,config)\x26\x26valueRef\x26\x26!isPathMark(mark)\x26\x26(model\x3dallFieldsInvalidPredicate(model,{invalid:!0,channels:SCALE_CHANNELS}))?{[channel]:[{test:model,value:null},...array$jscomp$0(valueRef)]}:valueRef?{[channel]:valueRef}:{}}function markDefProperties(mark,ignore){return VG_MARK_CONFIGS.reduce((m,\nprop)\x3d\x3e{ALWAYS_IGNORE.has(prop)||void 0\x3d\x3d\x3dmark[prop]||\x22ignore\x22\x3d\x3d\x3dignore[prop]||(m[prop]\x3dsignalOrValueRef(mark[prop]));return m},{})}function allFieldsInvalidPredicate(model,$jscomp$destructuring$var115){var {invalid\x3d!1,channels}\x3d$jscomp$destructuring$var115;$jscomp$destructuring$var115\x3dchannels.reduce((aggregator,channel)\x3d\x3e{var scaleComponent\x3dmodel.getScaleComponent(channel);scaleComponent\x26\x26(scaleComponent\x3dscaleComponent.get(\x22type\x22),(channel\x3dmodel.vgField(channel,{expr:\x22datum\x22}))\x26\x26scaleComponent in\nCONTINUOUS_DOMAIN_INDEX\x26\x26(aggregator[channel]\x3d!0));return aggregator},{});$jscomp$destructuring$var115\x3dkeys$jscomp$0($jscomp$destructuring$var115);if(0\x3c$jscomp$destructuring$var115.length){const op\x3dinvalid?\x22||\x22:\x22\\x26\\x26\x22;return $jscomp$destructuring$var115.map(field\x3d\x3efieldInvalidPredicate(field,invalid)).join(\x22 \x22.concat(op,\x22 \x22))}}function defined(model){const {config,markDef}\x3dmodel;return getMarkPropOrConfig(\x22invalid\x22,markDef,config)\x26\x26(model\x3dallFieldsInvalidPredicate$1(model,{channels:POSITION_SCALE_CHANNELS}))?\n{defined:{signal:model}}:{}}function allFieldsInvalidPredicate$1(model,$jscomp$destructuring$var116){var {invalid\x3d!1,channels}\x3d$jscomp$destructuring$var116;$jscomp$destructuring$var116\x3dchannels.reduce((aggregator,channel)\x3d\x3e{var scaleComponent\x3dmodel.getScaleComponent(channel);scaleComponent\x26\x26(scaleComponent\x3dscaleComponent.get(\x22type\x22),(channel\x3dmodel.vgField(channel,{expr:\x22datum\x22}))\x26\x26scaleComponent in CONTINUOUS_DOMAIN_INDEX\x26\x26(aggregator[channel]\x3d!0));return aggregator},{});$jscomp$destructuring$var116\x3d\nkeys$jscomp$0($jscomp$destructuring$var116);if(0\x3c$jscomp$destructuring$var116.length){const op\x3dinvalid?\x22||\x22:\x22\\x26\\x26\x22;return $jscomp$destructuring$var116.map(field\x3d\x3efieldInvalidPredicate(field,invalid)).join(\x22 \x22.concat(op,\x22 \x22))}}function valueIfDefined(prop,value){if(void 0!\x3d\x3dvalue)return{[prop]:signalOrValueRef(value)}}function domain$1(model,channel){model\x3d$(model.scaleName(channel));return\x22domain(\x22.concat(model,\x22)\x22)}function isTopLevelLayer(model){var _model$parent$parent;return model.parent\x26\x26\nisLayerModel(model.parent)\x26\x26(null!\x3d\x3d(_model$parent$parent\x3d!model.parent.parent)\x26\x26void 0!\x3d\x3d_model$parent$parent?_model$parent$parent:isTopLevelLayer(model.parent.parent))}function parseInteractiveLegend(model,channel,legendCmpt){var _model$fieldDef;const field\x3dnull\x3d\x3d\x3d(_model$fieldDef\x3dmodel.fieldDef(channel))||void 0\x3d\x3d\x3d_model$fieldDef?void 0:_model$fieldDef.field;forEachSelection(model,selCmpt\x3d\x3e{var _selCmpt$project$hasF;const proj\x3dnull!\x3d\x3d(_selCmpt$project$hasF\x3dselCmpt.project.hasField[field])\x26\x26void 0!\x3d\x3d\n_selCmpt$project$hasF?_selCmpt$project$hasF:selCmpt.project.hasChannel[channel];if(proj\x26\x26legendBindings.has(selCmpt)){var _legendCmpt$get;_selCmpt$project$hasF\x3dnull!\x3d\x3d(_legendCmpt$get\x3dlegendCmpt.get(\x22selections\x22))\x26\x26void 0!\x3d\x3d_legendCmpt$get?_legendCmpt$get:[];_selCmpt$project$hasF.push(selCmpt.name);legendCmpt.set(\x22selections\x22,_selCmpt$project$hasF,!1);proj.hasLegend\x3d!0}})}function onDelta(model,selCmpt,proj,size,signals){var _scaleCmpt$get,name\x3dselCmpt.name,anchor\x3dname+\x22_translate_anchor\x22;name+\x3d\x22_translate_delta\x22;\nvar channel\x3dproj.channel;const hasScales\x3dscaleBindings.has(selCmpt);selCmpt\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dproj.signals[hasScales?\x22data\x22:\x22visual\x22])[0];size\x3dmodel.getSizeSignalRef(size).signal;model\x3dmodel.getScaleComponent(channel);signals\x3dmodel.get(\x22type\x22);const sign\x3dhasScales\x26\x26\x22x\x22\x3d\x3d\x3dchannel?\x22-\x22:\x22\x22;anchor\x3d\x22\x22.concat(anchor,\x22.extent_\x22).concat(channel);channel\x3d\x22\x22.concat(sign).concat(name,\x22.\x22).concat(channel,\x22 / \x22)+(hasScales?\x22\x22.concat(size):\x22span(\x22.concat(anchor,\x22)\x22));anchor\x3d\x22\x22.concat(hasScales?\x22log\x22\x3d\x3d\x3d\nsignals?\x22panLog\x22:\x22pow\x22\x3d\x3d\x3dsignals?\x22panPow\x22:\x22panLinear\x22:\x22panLinear\x22,\x22(\x22).concat(anchor,\x22, \x22).concat(channel)+(hasScales\x26\x26\x22pow\x22\x3d\x3d\x3dsignals?\x22, \x22.concat(null!\x3d\x3d(_scaleCmpt$get\x3dmodel.get(\x22exponent\x22))\x26\x26void 0!\x3d\x3d_scaleCmpt$get?_scaleCmpt$get:1):\x22\x22)+\x22)\x22;selCmpt.on.push({events:{signal:name},update:hasScales?anchor:\x22clampRange(\x22.concat(anchor,\x22, 0, \x22).concat(size,\x22)\x22)})}function onDelta$1(model,selCmpt,proj,size,signals){var _scaleCmpt$get,name\x3dselCmpt.name;const channel\x3dproj.channel,hasScales\x3dscaleBindings.has(selCmpt);\nselCmpt\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dproj.signals[hasScales?\x22data\x22:\x22visual\x22])[0];size\x3dmodel.getSizeSignalRef(size).signal;signals\x3dmodel.getScaleComponent(channel);const scaleType\x3dsignals.get(\x22type\x22),base\x3dhasScales?domain$1(model,channel):selCmpt.name;model\x3dname+\x22_zoom_delta\x22;name\x3d\x22\x22.concat(name).concat(\x22_zoom_anchor\x22,\x22.\x22).concat(channel);name\x3d\x22\x22.concat(hasScales?\x22log\x22\x3d\x3d\x3dscaleType?\x22zoomLog\x22:\x22pow\x22\x3d\x3d\x3dscaleType?\x22zoomPow\x22:\x22zoomLinear\x22:\x22zoomLinear\x22,\x22(\x22).concat(base,\x22, \x22).concat(name,\x22, \x22).concat(model)+(hasScales\x26\x26\n\x22pow\x22\x3d\x3d\x3dscaleType?\x22, \x22.concat(null!\x3d\x3d(_scaleCmpt$get\x3dsignals.get(\x22exponent\x22))\x26\x26void 0!\x3d\x3d_scaleCmpt$get?_scaleCmpt$get:1):\x22\x22)+\x22)\x22;selCmpt.on.push({events:{signal:model},update:hasScales?name:\x22clampRange(\x22.concat(name,\x22, 0, \x22).concat(size,\x22)\x22)})}function forEachTransform(selCmpt,cb){for(const t of compilers)t.has(selCmpt)\x26\x26cb(t)}function assembleInit(init,isExpr,wrap){isExpr\x3dvoid 0\x3d\x3d\x3disExpr?!0:isExpr;wrap\x3dvoid 0\x3d\x3d\x3dwrap?identity:wrap;return isArray(init)?(init\x3dinit.map(v\x3d\x3eassembleInit(v,isExpr,wrap)),\nisExpr?\x22[\x22.concat(init.join(\x22, \x22),\x22]\x22):init):isDateTime(init)?isExpr?wrap(dateTimeToExpr(init)):wrap(dateTimeToTimestamp(init)):isExpr?wrap(JSON.stringify(init)):init}function assembleUnitSelectionSignals(model,signals){forEachSelection(model,(selCmpt,selCompiler)\x3d\x3e{const name\x3dselCmpt.name;let modifyExpr\x3dselCompiler.modifyExpr(model,selCmpt);signals.push(...selCompiler.signals(model,selCmpt));forEachTransform(selCmpt,txCompiler\x3d\x3e{txCompiler.signals\x26\x26(signals\x3dtxCompiler.signals(model,selCmpt,signals));\ntxCompiler.modifyExpr\x26\x26(modifyExpr\x3dtxCompiler.modifyExpr(model,selCmpt,modifyExpr))});signals.push({name:name+\x22_modify\x22,on:[{events:{signal:selCmpt.name+\x22_tuple\x22},update:\x22modify(\x22.concat($(selCmpt.name+\x22_store\x22),\x22, \x22).concat(modifyExpr,\x22)\x22)}]})});return cleanupEmptyOnArray(signals)}function assembleFacetSignals(model,signals){model.component.selection\x26\x26keys$jscomp$0(model.component.selection).length\x26\x26(model\x3d$(model.getName(\x22cell\x22)),signals.unshift({name:\x22facet\x22,value:{},on:[{events:eventSelector(\x22mousemove\x22,\n\x22scope\x22),update:\x22isTuple(facet) ? facet : group(\x22.concat(model,\x22).datum\x22)}]}));return cleanupEmptyOnArray(signals)}function assembleTopLevelSignals(model,signals){let hasSelections\x3d!1;forEachSelection(model,(selCmpt,selCompiler)\x3d\x3e{const name\x3dselCmpt.name,store\x3d$(name+\x22_store\x22);if(0\x3d\x3d\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dname).length){const resolve\x3d\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22union\x22:selCmpt.resolve,isMulti\x3d\x22multi\x22\x3d\x3d\x3dselCmpt.type?\x22, true)\x22:\x22)\x22;signals.push({name:selCmpt.name,update:\x22\x22.concat(\x22vlSelectionResolve\x22,\n\x22(\x22).concat(store,\x22, \x22).concat($(resolve)).concat(isMulti)})}hasSelections\x3d!0;selCompiler.topLevelSignals\x26\x26(signals\x3dselCompiler.topLevelSignals(model,selCmpt,signals));forEachTransform(selCmpt,txCompiler\x3d\x3e{txCompiler.topLevelSignals\x26\x26(signals\x3dtxCompiler.topLevelSignals(model,selCmpt,signals))})});hasSelections\x26\x260\x3d\x3d\x3dsignals.filter(s\x3d\x3e\x22unit\x22\x3d\x3d\x3ds.name).length\x26\x26signals.unshift({name:\x22unit\x22,value:{},on:[{events:\x22mousemove\x22,update:\x22isTuple(group()) ? group() : unit\x22}]});return cleanupEmptyOnArray(signals)}\nfunction assembleUnitSelectionData(model,data){const dataCopy\x3d[...data];forEachSelection(model,selCmpt\x3d\x3e{const init\x3d{name:selCmpt.name+\x22_store\x22};if(selCmpt.init){const fields\x3dselCmpt.project.items.map(proj\x3d\x3e{proj\x3dObject.assign({},proj);return delete proj.signals,proj}),insert\x3dselCmpt.init.map(i\x3d\x3eassembleInit(i,!1));init.values\x3d\x22interval\x22\x3d\x3d\x3dselCmpt.type?[{unit:unitName(model,{escape:!1}),fields,values:insert}]:insert.map(i\x3d\x3e({unit:unitName(model,{escape:!1}),fields,values:i}))}dataCopy.filter(d\x3d\x3ed.name\x3d\x3d\x3d\nselCmpt.name+\x22_store\x22).length||dataCopy.push(init)});return dataCopy}function assembleUnitSelectionMarks(model,marks){forEachSelection(model,(selCmpt,selCompiler)\x3d\x3e{marks\x3dselCompiler.marks?selCompiler.marks(model,selCmpt,marks):marks;forEachTransform(selCmpt,txCompiler\x3d\x3e{txCompiler.marks\x26\x26(marks\x3dtxCompiler.marks(model,selCmpt,marks))})});return marks}function assembleLayerSelectionMarks(model,marks){for(const child of model.children)isUnitModel(child)\x26\x26(marks\x3dassembleUnitSelectionMarks(child,marks));\nreturn marks}function cleanupEmptyOnArray(signals){return signals.map(s\x3d\x3e{s.on\x26\x26!s.on.length\x26\x26delete s.on;return s})}function channelSignals(model,selCmpt,proj,init){const channel\x3dproj.channel,vname\x3dproj.signals.visual;proj\x3dproj.signals.data;const hasScales\x3dscaleBindings.has(selCmpt),scaleName\x3d$(model.scaleName(channel));var scale\x3dmodel.getScaleComponent(channel);scale\x3dscale?scale.get(\x22type\x22):void 0;const scaled\x3dstr\x3d\x3e\x22scale(\x22.concat(scaleName,\x22, \x22).concat(str,\x22)\x22),size\x3dmodel.getSizeSignalRef(\x22x\x22\x3d\x3d\x3d\nchannel?\x22width\x22:\x22height\x22).signal,coord\x3d\x22\x22.concat(channel,\x22(unit)\x22);model\x3devents$jscomp$0(selCmpt,(def,evt)\x3d\x3e[...def,{events:evt.between[0],update:\x22[\x22.concat(coord,\x22, \x22).concat(coord,\x22]\x22)},{events:evt,update:\x22[\x22.concat(vname,\x22[0], clamp(\x22).concat(coord,\x22, 0, \x22).concat(size,\x22)]\x22)}]);model.push({events:{signal:selCmpt.name+\x22_scale_trigger\x22},update:scale in CONTINUOUS_DOMAIN_INDEX?\x22[\x22.concat(scaled(\x22\x22.concat(proj,\x22[0]\x22)),\x22, \x22).concat(scaled(\x22\x22.concat(proj,\x22[1]\x22)),\x22]\x22):\x22[0, 0]\x22});return hasScales?[{name:proj,\non:[]}]:[Object.assign({},{name:vname},init?{init:assembleInit(init,!0,scaled)}:{value:[]},{on:model}),Object.assign({},{name:proj},init?{init:assembleInit(init)}:{},{on:[{events:{signal:vname},update:\x22\x22.concat(vname,\x22[0] \\x3d\\x3d\\x3d \x22).concat(vname,\x22[1] ? null : invert(\x22).concat(scaleName,\x22, \x22).concat(vname,\x22)\x22)}]})]}function events$jscomp$0(selCmpt,cb){return selCmpt.events.reduce((on,evt)\x3d\x3eevt.between?cb(on,evt):(warn(\x22\x22.concat(evt,\x22 is not an ordered event stream for interval selections.\x22)),\non),[])}function singleOrMultiSignals(model,selCmpt){const name\x3dselCmpt.name;var fieldsSg\x3dname+\x22_tuple_fields\x22;const values\x3dselCmpt.project.items.map(p\x3d\x3e{const fieldDef\x3dmodel.fieldDef(p.channel);return fieldDef\x26\x26fieldDef.bin?\x22[\x22.concat(\x22(item().isVoronoi ? datum.datum : datum)\x22,\x22[\x22).concat($(model.vgField(p.channel,{})),\x22], \x22)+\x22\x22.concat(\x22(item().isVoronoi ? datum.datum : datum)\x22,\x22[\x22).concat($(model.vgField(p.channel,{binSuffix:\x22end\x22})),\x22]]\x22):\x22\x22.concat(\x22(item().isVoronoi ? datum.datum : datum)\x22,\x22[\x22).concat($(p.field),\n\x22]\x22)}).join(\x22, \x22);fieldsSg\x3d\x22unit: \x22.concat(unitName(model),\x22, fields: \x22).concat(fieldsSg,\x22, values\x22);selCmpt\x3dselCmpt.events;return[{name:name+\x22_tuple\x22,on:selCmpt?[{events:selCmpt,update:\x22datum \\x26\\x26 item().mark.marktype !\\x3d\\x3d \x27group\x27 ? {\x22.concat(fieldsSg,\x22: [\x22).concat(values,\x22]} : null\x22),force:!0}]:[]}]}function forEachSelection(model,cb){if(model\x3dmodel.component.selection)for(const sel of vals(model))if(!0\x3d\x3d\x3dcb(sel,compilers$1[sel.type]))break}function unitName(model,$jscomp$destructuring$var128){({escape:$jscomp$destructuring$var128}\x3d\nvoid 0\x3d\x3d\x3d$jscomp$destructuring$var128?{escape:!0}:$jscomp$destructuring$var128);$jscomp$destructuring$var128\x3d$jscomp$destructuring$var128?$(model.name):model.name;for(model\x3dmodel.parent;model\x26\x26!isFacetModel(model);)model\x3dmodel.parent;if(model){const {facet}\x3dmodel;for(const channel of FACET_CHANNELS)facet[channel]\x26\x26($jscomp$destructuring$var128+\x3d\x22 + \x27__facet_\x22.concat(channel,\x22_\x27 + (facet[\x22).concat($(model.vgField(channel)),\x22])\x22))}return $jscomp$destructuring$var128}function requiresSelectionId(model){let identifier\x3d\n!1;forEachSelection(model,selCmpt\x3d\x3e{identifier\x3didentifier||selCmpt.project.items.some(proj\x3d\x3e\x22_vgsid_\x22\x3d\x3d\x3dproj.field)});return identifier}function ASTNode(type){this.type\x3dtype}function children$jscomp$0(node){switch(node.type){case \x22ArrayExpression\x22:return node.elements;case \x22BinaryExpression\x22:case \x22LogicalExpression\x22:return[node.left,node.right];case \x22CallExpression\x22:return[node.callee].concat(node.arguments);case \x22ConditionalExpression\x22:return[node.test,node.consequent,node.alternate];case \x22MemberExpression\x22:return[node.object,\nnode.property];case \x22ObjectExpression\x22:return node.properties;case \x22Property\x22:return[node.key,node.value];case \x22UnaryExpression\x22:return[node.argument];default:return[]}}function assert(condition,message){if(!condition)throw Error(\x22ASSERT: \x22+message);}function isDecimalDigit(ch){return 48\x3c\x3dch\x26\x2657\x3e\x3dch}function isHexDigit(ch){return 0\x3c\x3d\x220123456789abcdefABCDEF\x22.indexOf(ch)}function isOctalDigit(ch){return 0\x3c\x3d\x2201234567\x22.indexOf(ch)}function isLineTerminator(ch){return 10\x3d\x3d\x3dch||13\x3d\x3d\x3dch||8232\x3d\x3d\x3dch||8233\x3d\x3d\x3d\nch}function isIdentifierStart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||48\x3c\x3dch\x26\x2657\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}function skipComment(){for(;index$jscomp$0\x3clength$jscomp$0;){const ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(32\x3d\x3d\x3dch||9\x3d\x3d\x3dch||11\x3d\x3d\x3dch||12\x3d\x3d\x3dch||160\x3d\x3d\x3d\nch||5760\x3c\x3dch\x26\x260\x3c\x3d[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)||isLineTerminator(ch))++index$jscomp$0;else break}}function scanHexEscape(prefix){var code\x3d0;var len\x3d\x22u\x22\x3d\x3d\x3dprefix?4:2;for(prefix\x3d0;prefix\x3clen;++prefix)if(index$jscomp$0\x3clength$jscomp$0\x26\x26isHexDigit(source$jscomp$0[index$jscomp$0])){var ch\x3dsource$jscomp$0[index$jscomp$0++];code\x3d16*code+\x220123456789abcdef\x22.indexOf(ch.toLowerCase())}else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return String.fromCharCode(code)}\nfunction getEscapedIdentifier(){var ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0++);var id\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(117!\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierStart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id\x3dch);for(;index$jscomp$0\x3clength$jscomp$0;){ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(!isIdentifierPart(ch))break;++index$jscomp$0;id+\x3d\nString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(id\x3did.substr(0,id.length-1),117!\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierPart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id+\x3dch)}return id}function scanPunctuator(){var start\x3dindex$jscomp$0,code\x3dsource$jscomp$0.charCodeAt(index$jscomp$0),ch1\x3dsource$jscomp$0[index$jscomp$0];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$jscomp$0,\n{type:7,value:String.fromCharCode(code),start,end:index$jscomp$0};default:var code2\x3dsource$jscomp$0.charCodeAt(index$jscomp$0+1);if(61\x3d\x3d\x3dcode2)switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$jscomp$0+\x3d2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start,end:index$jscomp$0};case 33:case 61:return index$jscomp$0+\x3d2,61\x3d\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0)\x26\x26++index$jscomp$0,{type:7,value:source$jscomp$0.slice(start,\nindex$jscomp$0),start,end:index$jscomp$0}}}code\x3dsource$jscomp$0.substr(index$jscomp$0,4);if(\x22\\x3e\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d4,{type:7,value:code,start,end:index$jscomp$0};code\x3dcode.substr(0,3);if(\x22\\x3e\\x3e\\x3e\x22\x3d\x3d\x3dcode||\x22\\x3c\\x3c\\x3d\x22\x3d\x3d\x3dcode||\x22\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d3,{type:7,value:code,start,end:index$jscomp$0};code\x3dcode.substr(0,2);if(ch1\x3d\x3d\x3dcode[1]\x26\x260\x3c\x3d\x22+-\\x3c\\x3e\\x26|\x22.indexOf(ch1)||\x22\\x3d\\x3e\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d2,{type:7,value:code,start,end:index$jscomp$0};\nif(0\x3c\x3d\x22\\x3c\\x3e\\x3d!+-*%\\x26|^/\x22.indexOf(ch1))return++index$jscomp$0,{type:7,value:ch1,start,end:index$jscomp$0};throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}function scanNumericLiteral(){var ch\x3dsource$jscomp$0[index$jscomp$0];assert(isDecimalDigit(ch.charCodeAt(0))||\x22.\x22\x3d\x3d\x3dch,\x22Numeric literal must start with a decimal digit or a decimal point\x22);var start\x3dindex$jscomp$0;var number\x3d\x22\x22;if(\x22.\x22!\x3d\x3dch){number\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0];if(\x220\x22\x3d\x3d\x3dnumber){if(\x22x\x22\x3d\x3d\x3d\nch||\x22X\x22\x3d\x3d\x3dch){++index$jscomp$0;for(number\x3d\x22\x22;index$jscomp$0\x3clength$jscomp$0\x26\x26isHexDigit(source$jscomp$0[index$jscomp$0]);)number+\x3dsource$jscomp$0[index$jscomp$0++];0\x3d\x3d\x3dnumber.length\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);isIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return start\x3d{type:6,value:parseInt(\x220x\x22+number,16),start,end:index$jscomp$0}}if(isOctalDigit(ch)){for(number\x3d\x220\x22+source$jscomp$0[index$jscomp$0++];index$jscomp$0\x3c\nlength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0]);)number+\x3dsource$jscomp$0[index$jscomp$0++];(isIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))||isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0)))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return start\x3d{type:6,value:parseInt(number,8),octal:!0,start,end:index$jscomp$0}}ch\x26\x26isDecimalDigit(ch.charCodeAt(0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}for(;isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3d\nsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0]}if(\x22.\x22\x3d\x3d\x3dch){for(number+\x3dsource$jscomp$0[index$jscomp$0++];isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0]}if(\x22e\x22\x3d\x3d\x3dch||\x22E\x22\x3d\x3d\x3dch){number+\x3dsource$jscomp$0[index$jscomp$0++];ch\x3dsource$jscomp$0[index$jscomp$0];if(\x22+\x22\x3d\x3d\x3dch||\x22-\x22\x3d\x3d\x3dch)number+\x3dsource$jscomp$0[index$jscomp$0++];if(isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0)))for(;isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0));)number+\x3d\nsource$jscomp$0[index$jscomp$0++];else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}isIdentifierStart(source$jscomp$0.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseFloat(number),start,end:index$jscomp$0}}function testRegExp(pattern,flags){let tmp\x3dpattern;0\x3c\x3dflags.indexOf(\x22u\x22)\x26\x26(tmp\x3dtmp.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,($0,$1)\x3d\x3e{if(1114111\x3e\x3dparseInt($1,16))return\x22x\x22;throwError({},\x22Invalid regular expression\x22)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n\x22x\x22));try{new RegExp(tmp)}catch(e){throwError({},\x22Invalid regular expression\x22)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function advance(){skipComment();if(index$jscomp$0\x3e\x3dlength$jscomp$0)return{type:2,start:index$jscomp$0,end:index$jscomp$0};var ch\x3dsource$jscomp$0.charCodeAt(index$jscomp$0);if(isIdentifierStart(ch)){ch\x3dindex$jscomp$0;if(92\x3d\x3d\x3dsource$jscomp$0.charCodeAt(index$jscomp$0))var id\x3dgetEscapedIdentifier();else a:{for(id\x3dindex$jscomp$0++;index$jscomp$0\x3clength$jscomp$0;){var ch$jscomp$0\x3d\nsource$jscomp$0.charCodeAt(index$jscomp$0);if(92\x3d\x3d\x3dch$jscomp$0){index$jscomp$0\x3did;id\x3dgetEscapedIdentifier();break a}if(isIdentifierPart(ch$jscomp$0))++index$jscomp$0;else break}id\x3dsource$jscomp$0.slice(id,index$jscomp$0)}return{type:1\x3d\x3d\x3did.length?3:keywords.hasOwnProperty(id)?4:\x22null\x22\x3d\x3d\x3did?5:\x22true\x22\x3d\x3d\x3did||\x22false\x22\x3d\x3d\x3did?1:3,value:id,start:ch,end:index$jscomp$0}}if(40\x3d\x3d\x3dch||41\x3d\x3d\x3dch||59\x3d\x3d\x3dch)return scanPunctuator();if(39\x3d\x3d\x3dch||34\x3d\x3d\x3dch){var str\x3d\x22\x22;ch$jscomp$0\x3d!1;ch\x3dsource$jscomp$0[index$jscomp$0];assert(\x22\x27\x22\x3d\x3d\x3d\nch||\x27\x22\x27\x3d\x3d\x3dch,\x22String literal must starts with a quote\x22);id\x3dindex$jscomp$0;for(++index$jscomp$0;index$jscomp$0\x3clength$jscomp$0;){var ch$jscomp$1\x3dsource$jscomp$0[index$jscomp$0++];if(ch$jscomp$1\x3d\x3d\x3dch){ch\x3d\x22\x22;break}else if(\x22\\\\\x22\x3d\x3d\x3dch$jscomp$1)if((ch$jscomp$1\x3dsource$jscomp$0[index$jscomp$0++])\x26\x26isLineTerminator(ch$jscomp$1.charCodeAt(0)))\x22\\r\x22\x3d\x3d\x3dch$jscomp$1\x26\x26\x22\\n\x22\x3d\x3d\x3dsource$jscomp$0[index$jscomp$0]\x26\x26++index$jscomp$0;else switch(ch$jscomp$1){case \x22u\x22:case \x22x\x22:if(\x22{\x22\x3d\x3d\x3dsource$jscomp$0[index$jscomp$0]){++index$jscomp$0;\nvar code\x3dsource$jscomp$0[index$jscomp$0];ch$jscomp$1\x3d0;for(\x22}\x22\x3d\x3d\x3dcode\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);index$jscomp$0\x3clength$jscomp$0;){code\x3dsource$jscomp$0[index$jscomp$0++];if(!isHexDigit(code))break;ch$jscomp$1\x3d16*ch$jscomp$1+\x220123456789abcdef\x22.indexOf(code.toLowerCase())}(1114111\x3cch$jscomp$1||\x22}\x22!\x3d\x3dcode)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);ch$jscomp$1\x3d65535\x3e\x3dch$jscomp$1?String.fromCharCode(ch$jscomp$1):String.fromCharCode((ch$jscomp$1-65536\x3e\x3e10)+55296,(ch$jscomp$1-65536\x26\n1023)+56320);str+\x3dch$jscomp$1}else str+\x3dscanHexEscape(ch$jscomp$1);break;case \x22n\x22:str+\x3d\x22\\n\x22;break;case \x22r\x22:str+\x3d\x22\\r\x22;break;case \x22t\x22:str+\x3d\x22\\t\x22;break;case \x22b\x22:str+\x3d\x22\\b\x22;break;case \x22f\x22:str+\x3d\x22\\f\x22;break;case \x22v\x22:str+\x3d\x22\\x0B\x22;break;default:isOctalDigit(ch$jscomp$1)?(code\x3d\x2201234567\x22.indexOf(ch$jscomp$1),0!\x3d\x3dcode\x26\x26(ch$jscomp$0\x3d!0),index$jscomp$0\x3clength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0])\x26\x26(ch$jscomp$0\x3d!0,code\x3d8*code+\x2201234567\x22.indexOf(source$jscomp$0[index$jscomp$0++]),0\x3c\x3d\x220123\x22.indexOf(ch$jscomp$1)\x26\x26\nindex$jscomp$0\x3clength$jscomp$0\x26\x26isOctalDigit(source$jscomp$0[index$jscomp$0])\x26\x26(code\x3d8*code+\x2201234567\x22.indexOf(source$jscomp$0[index$jscomp$0++]))),str+\x3dString.fromCharCode(code)):str+\x3dch$jscomp$1}else if(isLineTerminator(ch$jscomp$1.charCodeAt(0)))break;else str+\x3dch$jscomp$1}\x22\x22!\x3d\x3dch\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:8,value:str,octal:ch$jscomp$0,start:id,end:index$jscomp$0}}return 46\x3d\x3d\x3dch?isDecimalDigit(source$jscomp$0.charCodeAt(index$jscomp$0+1))?scanNumericLiteral():\nscanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){const token\x3dlookahead;index$jscomp$0\x3dtoken.end;lookahead\x3dadvance();index$jscomp$0\x3dtoken.end;return token}function peek(){const pos\x3dindex$jscomp$0;lookahead\x3dadvance();index$jscomp$0\x3dpos}function finishBinaryExpression(operator,left,right){const node\x3dnew ASTNode(\x22||\x22\x3d\x3d\x3doperator||\x22\\x26\\x26\x22\x3d\x3d\x3doperator?\x22LogicalExpression\x22:\x22BinaryExpression\x22);node.operator\x3doperator;node.left\x3dleft;node.right\x3dright;return node}function finishIdentifier(name){const node\x3d\nnew ASTNode(\x22Identifier\x22);node.name\x3dname;return node}function finishLiteral(token){const node\x3dnew ASTNode(\x22Literal\x22);node.value\x3dtoken.value;node.raw\x3dsource$jscomp$0.slice(token.start,token.end);token.regex\x26\x26(\x22//\x22\x3d\x3d\x3dnode.raw\x26\x26(node.raw\x3d\x22/(?:)/\x22),node.regex\x3dtoken.regex);return node}function finishMemberExpression(accessor,object,property){const node\x3dnew ASTNode(\x22MemberExpression\x22);node.computed\x3d\x22[\x22\x3d\x3d\x3daccessor;node.object\x3dobject;node.property\x3dproperty;node.computed||(property.member\x3d!0);return node}\nfunction finishProperty(kind,key,value){const node\x3dnew ASTNode(\x22Property\x22);node.key\x3dkey;node.value\x3dvalue;node.kind\x3dkind;return node}function throwError(token,messageFormat){var args\x3dArray.prototype.slice.call(arguments,2),msg\x3dmessageFormat.replace(/%(\\d)/g,(whole,index)\x3d\x3e{assert(index\x3cargs.length,\x22Message reference must be in range\x22);return args[index]});var error\x3dError(msg);error.index\x3dindex$jscomp$0;error.description\x3dmsg;throw error;}function throwUnexpected(token){2\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\n\x22Unexpected end of input\x22);6\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected number\x22);8\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected string\x22);3\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected identifier\x22);4\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected reserved word\x22);throwError(token,\x22Unexpected token %0\x22,token.value)}function expect(value){const token\x3dlex();7\x3d\x3d\x3dtoken.type\x26\x26token.value\x3d\x3d\x3dvalue||throwUnexpected(token)}function match(value){return 7\x3d\x3d\x3dlookahead.type\x26\x26lookahead.value\x3d\x3d\x3dvalue}function parseObjectPropertyKey(){index$jscomp$0\x3d\nlookahead.start;const token\x3dlex();return 8\x3d\x3d\x3dtoken.type||6\x3d\x3d\x3dtoken.type?(token.octal\x26\x26throwError(token,\x22Octal literals are not allowed in strict mode.\x22),finishLiteral(token)):finishIdentifier(token.value)}function parsePrimaryExpression(){if(match(\x22(\x22)){expect(\x22(\x22);var type\x3dparseExpression();expect(\x22)\x22);return type}if(match(\x22[\x22)){type\x3d[];index$jscomp$0\x3dlookahead.start;for(expect(\x22[\x22);!match(\x22]\x22);)match(\x22,\x22)?(lex(),type.push(null)):(type.push(parseConditionalExpression()),match(\x22]\x22)||expect(\x22,\x22));\nlex();var JSCompiler_object_inline_value_8160\x3dnew ASTNode(\x22ArrayExpression\x22);JSCompiler_object_inline_value_8160.elements\x3dtype;return type\x3dJSCompiler_object_inline_value_8160}if(match(\x22{\x22)){type\x3d[];JSCompiler_object_inline_value_8160\x3d{};var JSCompiler_object_inline_literal_8161\x3dString;index$jscomp$0\x3dlookahead.start;for(expect(\x22{\x22);!match(\x22}\x22);){index$jscomp$0\x3dlookahead.start;var JSCompiler_object_inline_value_8162\x3dlookahead;if(3\x3d\x3d\x3dJSCompiler_object_inline_value_8162.type){var JSCompiler_object_inline_literal_8163\x3d\nparseObjectPropertyKey();expect(\x22:\x22);JSCompiler_object_inline_value_8162\x3dparseConditionalExpression();JSCompiler_object_inline_value_8162\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8163,JSCompiler_object_inline_value_8162)}else 2\x3d\x3d\x3dJSCompiler_object_inline_value_8162.type||7\x3d\x3d\x3dJSCompiler_object_inline_value_8162.type?(throwUnexpected(JSCompiler_object_inline_value_8162),JSCompiler_object_inline_value_8162\x3dvoid 0):(JSCompiler_object_inline_literal_8163\x3dparseObjectPropertyKey(),expect(\x22:\x22),\nJSCompiler_object_inline_value_8162\x3dparseConditionalExpression(),JSCompiler_object_inline_value_8162\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8163,JSCompiler_object_inline_value_8162));JSCompiler_object_inline_literal_8163\x3d\x22Identifier\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8162.key.type?JSCompiler_object_inline_value_8162.key.name:JSCompiler_object_inline_literal_8161(JSCompiler_object_inline_value_8162.key.value);JSCompiler_object_inline_literal_8163\x3d\x22$\x22+JSCompiler_object_inline_literal_8163;\nObject.prototype.hasOwnProperty.call(JSCompiler_object_inline_value_8160,JSCompiler_object_inline_literal_8163)?throwError({},\x22Duplicate data property in object literal not allowed in strict mode\x22):JSCompiler_object_inline_value_8160[JSCompiler_object_inline_literal_8163]\x3d!0;type.push(JSCompiler_object_inline_value_8162);match(\x22}\x22)||expect(\x22,\x22)}expect(\x22}\x22);JSCompiler_object_inline_value_8160\x3dnew ASTNode(\x22ObjectExpression\x22);JSCompiler_object_inline_value_8160.properties\x3dtype;return type\x3dJSCompiler_object_inline_value_8160}type\x3d\nlookahead.type;index$jscomp$0\x3dlookahead.start;if(3\x3d\x3d\x3dtype||legalKeywords[lookahead.value])JSCompiler_object_inline_value_8160\x3dfinishIdentifier(lex().value);else if(8\x3d\x3d\x3dtype||6\x3d\x3d\x3dtype)lookahead.octal\x26\x26throwError(lookahead,\x22Octal literals are not allowed in strict mode.\x22),JSCompiler_object_inline_value_8160\x3dfinishLiteral(lex());else{if(4\x3d\x3d\x3dtype)throw Error(\x22Disabled.\x22);if(1\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3d\x22true\x22\x3d\x3d\x3dtype.value,JSCompiler_object_inline_value_8160\x3dfinishLiteral(type);else if(5\x3d\x3d\x3dtype)type\x3d\nlex(),type.value\x3dnull,JSCompiler_object_inline_value_8160\x3dfinishLiteral(type);else if(match(\x22/\x22)||match(\x22/\\x3d\x22)){var value;lookahead\x3dnull;skipComment();type\x3dindex$jscomp$0;JSCompiler_object_inline_value_8160\x3dsource$jscomp$0[index$jscomp$0];assert(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8160,\x22Regular expression literal must start with a slash\x22);JSCompiler_object_inline_literal_8161\x3dsource$jscomp$0[index$jscomp$0++];for(JSCompiler_object_inline_literal_8163\x3dJSCompiler_object_inline_value_8162\x3d!1;index$jscomp$0\x3c\nlength$jscomp$0;)if(JSCompiler_object_inline_value_8160\x3dsource$jscomp$0[index$jscomp$0++],JSCompiler_object_inline_literal_8161+\x3dJSCompiler_object_inline_value_8160,\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8160)JSCompiler_object_inline_value_8160\x3dsource$jscomp$0[index$jscomp$0++],isLineTerminator(JSCompiler_object_inline_value_8160.charCodeAt(0))\x26\x26throwError({},\x22Invalid regular expression: missing /\x22),JSCompiler_object_inline_literal_8161+\x3dJSCompiler_object_inline_value_8160;else if(isLineTerminator(JSCompiler_object_inline_value_8160.charCodeAt(0)))throwError({},\n\x22Invalid regular expression: missing /\x22);else if(JSCompiler_object_inline_value_8162)\x22]\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8160\x26\x26(JSCompiler_object_inline_value_8162\x3d!1);else if(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8160){JSCompiler_object_inline_literal_8163\x3d!0;break}else\x22[\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8160\x26\x26(JSCompiler_object_inline_value_8162\x3d!0);JSCompiler_object_inline_literal_8163||throwError({},\x22Invalid regular expression: missing /\x22);JSCompiler_object_inline_value_8160\x3dJSCompiler_object_inline_literal_8161.substr(1,\nJSCompiler_object_inline_literal_8161.length-2);for(value\x3dJSCompiler_object_inline_literal_8163\x3d\x22\x22;index$jscomp$0\x3clength$jscomp$0;){JSCompiler_object_inline_value_8162\x3dsource$jscomp$0[index$jscomp$0];if(!isIdentifierPart(JSCompiler_object_inline_value_8162.charCodeAt(0)))break;++index$jscomp$0;\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8162\x26\x26index$jscomp$0\x3clength$jscomp$0?throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22):(value+\x3dJSCompiler_object_inline_value_8162,JSCompiler_object_inline_literal_8163+\x3dJSCompiler_object_inline_value_8162)}0\x3c\x3d\nvalue.search(/[^gimuy]/g)\x26\x26throwError({},\x22Invalid regular expression\x22,value);JSCompiler_object_inline_value_8162\x3dvalue;value\x3dtestRegExp(JSCompiler_object_inline_value_8160,JSCompiler_object_inline_value_8162);JSCompiler_object_inline_value_8160\x3dfinishLiteral({literal:JSCompiler_object_inline_literal_8161+JSCompiler_object_inline_literal_8163,value,regex:{pattern:JSCompiler_object_inline_value_8160,flags:JSCompiler_object_inline_value_8162},start:type,end:index$jscomp$0});peek()}else throwUnexpected(lex())}return JSCompiler_object_inline_value_8160}\nfunction parsePostfixExpression(){var JSCompiler_inline_result;for(JSCompiler_inline_result\x3dparsePrimaryExpression();;)if(match(\x22.\x22)){expect(\x22.\x22);index$jscomp$0\x3dlookahead.start;var args\x3dlex();3\x3d\x3d\x3dargs.type||4\x3d\x3d\x3dargs.type||1\x3d\x3d\x3dargs.type||5\x3d\x3d\x3dargs.type||throwUnexpected(args);args\x3dfinishIdentifier(args.value);JSCompiler_inline_result\x3dfinishMemberExpression(\x22.\x22,JSCompiler_inline_result,args)}else if(match(\x22(\x22)){args\x3d[];expect(\x22(\x22);if(!match(\x22)\x22))for(;index$jscomp$0\x3clength$jscomp$0;){args.push(parseConditionalExpression());\nif(match(\x22)\x22))break;expect(\x22,\x22)}expect(\x22)\x22);{const node\x3dnew ASTNode(\x22CallExpression\x22);node.callee\x3dJSCompiler_inline_result;node.arguments\x3dargs;JSCompiler_inline_result\x3dnode}}else if(match(\x22[\x22))expect(\x22[\x22),args\x3dparseExpression(),expect(\x22]\x22),JSCompiler_inline_result\x3dfinishMemberExpression(\x22[\x22,JSCompiler_inline_result,args);else break;if(7\x3d\x3d\x3dlookahead.type\x26\x26(match(\x22++\x22)||match(\x22--\x22)))throw Error(\x22Disabled.\x22);return JSCompiler_inline_result}function parseUnaryExpression(){if(7!\x3d\x3dlookahead.type\x26\x264!\x3d\x3dlookahead.type)var expr\x3d\nparsePostfixExpression();else{if(match(\x22++\x22)||match(\x22--\x22))throw Error(\x22Disabled.\x22);if(match(\x22+\x22)||match(\x22-\x22)||match(\x22~\x22)||match(\x22!\x22)){var token\x3dlex();expr\x3dparseUnaryExpression();{token\x3dtoken.value;const node\x3dnew ASTNode(\x22UnaryExpression\x22);node.operator\x3dtoken;node.argument\x3dexpr;node.prefix\x3d!0;expr\x3dnode}}else{if(4\x3d\x3d\x3dlookahead.type\x26\x26\x22delete\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22void\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22typeof\x22\x3d\x3d\x3dlookahead.value)throw Error(\x22Disabled.\x22);expr\x3dparsePostfixExpression()}}return expr}\nfunction binaryPrecedence(token){let prec\x3d0;if(7!\x3d\x3dtoken.type\x26\x264!\x3d\x3dtoken.type)return 0;switch(token.value){case \x22||\x22:prec\x3d1;break;case \x22\\x26\\x26\x22:prec\x3d2;break;case \x22|\x22:prec\x3d3;break;case \x22^\x22:prec\x3d4;break;case \x22\\x26\x22:prec\x3d5;break;case \x22\\x3d\\x3d\x22:case \x22!\\x3d\x22:case \x22\\x3d\\x3d\\x3d\x22:case \x22!\\x3d\\x3d\x22:prec\x3d6;break;case \x22\\x3c\x22:case \x22\\x3e\x22:case \x22\\x3c\\x3d\x22:case \x22\\x3e\\x3d\x22:case \x22instanceof\x22:case \x22in\x22:prec\x3d7;break;case \x22\\x3c\\x3c\x22:case \x22\\x3e\\x3e\x22:case \x22\\x3e\\x3e\\x3e\x22:prec\x3d8;break;case \x22+\x22:case \x22-\x22:prec\x3d9;break;case \x22*\x22:case \x22/\x22:case \x22%\x22:prec\x3d\n11}return prec}function parseConditionalExpression(){var consequent\x3dlookahead;var expr\x3dparseUnaryExpression();var token\x3dlookahead;var alternate\x3dbinaryPrecedence(token);if(0\x3d\x3d\x3dalternate)var expr$jscomp$0\x3dexpr;else{token.prec\x3dalternate;lex();consequent\x3d[consequent,lookahead];var right\x3dparseUnaryExpression();for(expr$jscomp$0\x3d[expr,token,right];0\x3c(alternate\x3dbinaryPrecedence(lookahead));){for(;2\x3cexpr$jscomp$0.length\x26\x26alternate\x3c\x3dexpr$jscomp$0[expr$jscomp$0.length-2].prec;)right\x3dexpr$jscomp$0.pop(),token\x3d\nexpr$jscomp$0.pop().value,expr\x3dexpr$jscomp$0.pop(),consequent.pop(),expr\x3dfinishBinaryExpression(token,expr,right),expr$jscomp$0.push(expr);token\x3dlex();token.prec\x3dalternate;expr$jscomp$0.push(token);consequent.push(lookahead);expr\x3dparseUnaryExpression();expr$jscomp$0.push(expr)}alternate\x3dexpr$jscomp$0.length-1;expr\x3dexpr$jscomp$0[alternate];for(consequent.pop();1\x3calternate;)consequent.pop(),expr\x3dfinishBinaryExpression(expr$jscomp$0[alternate-1].value,expr$jscomp$0[alternate-2],expr),alternate-\x3d2;expr$jscomp$0\x3d\nexpr}match(\x22?\x22)\x26\x26(lex(),consequent\x3dparseConditionalExpression(),expect(\x22:\x22),alternate\x3dparseConditionalExpression(),expr\x3dnew ASTNode(\x22ConditionalExpression\x22),expr.test\x3dexpr$jscomp$0,expr.consequent\x3dconsequent,expr.alternate\x3dalternate,expr$jscomp$0\x3dexpr);return expr$jscomp$0}function parseExpression(){const expr\x3dparseConditionalExpression();if(match(\x22,\x22))throw Error(\x22Disabled.\x22);return expr}function parser(code){source$jscomp$0\x3dcode;index$jscomp$0\x3d0;length$jscomp$0\x3dsource$jscomp$0.length;lookahead\x3d\nnull;peek();code\x3dparseExpression();if(2!\x3d\x3dlookahead.type)throw Error(\x22Unexpect token after expression.\x22);return code}function getName(node){const name\x3d[];if(\x22Identifier\x22\x3d\x3d\x3dnode.type)return[node.name];if(\x22Literal\x22\x3d\x3d\x3dnode.type)return[node.value];\x22MemberExpression\x22\x3d\x3d\x3dnode.type\x26\x26(name.push(...getName(node.object)),name.push(...getName(node.property)));return name}function startsWithDatum(node){return\x22MemberExpression\x22\x3d\x3d\x3dnode.object.type?startsWithDatum(node.object):\x22datum\x22\x3d\x3d\x3dnode.object.name}function getDependentFields(expression){expression\x3d\nparser(expression);const dependents\x3dnew Set;expression.visit(node\x3d\x3e{\x22MemberExpression\x22\x3d\x3d\x3dnode.type\x26\x26startsWithDatum(node)\x26\x26dependents.add(getName(node).slice(1).join(\x22.\x22))});return dependents}function parseUnitSelection(model,selDefs){const selCmpts\x3d{},selectionConfig\x3dmodel.config.selection;for(const name of keys$jscomp$0(null!\x3d\x3dselDefs\x26\x26void 0!\x3d\x3dselDefs?selDefs:{})){const selDef\x3dduplicate(selDefs[name]);var $jscomp$destructuring$var130\x3dObject.assign({},selectionConfig[selDef.type]);$jscomp$destructuring$var130\x3d\n(delete $jscomp$destructuring$var130.fields,delete $jscomp$destructuring$var130.encodings,$jscomp$destructuring$var130);for(const key in $jscomp$destructuring$var130)if(!(\x22encodings\x22\x3d\x3d\x3dkey\x26\x26selDef.fields||\x22fields\x22\x3d\x3d\x3dkey\x26\x26selDef.encodings)\x26\x26(\x22mark\x22\x3d\x3d\x3dkey\x26\x26(selDef[key]\x3dObject.assign({},$jscomp$destructuring$var130[key],selDef[key])),void 0\x3d\x3d\x3dselDef[key]||!0\x3d\x3d\x3dselDef[key])){var _cfg$key;selDef[key]\x3dnull!\x3d\x3d(_cfg$key\x3d$jscomp$destructuring$var130[key])\x26\x26void 0!\x3d\x3d_cfg$key?_cfg$key:selDef[key]}$jscomp$destructuring$var130\x3d\nvarName(name);const selCmpt\x3dselCmpts[$jscomp$destructuring$var130]\x3dObject.assign({},selDef,{name:$jscomp$destructuring$var130,events:isString(selDef.on)?eventSelector(selDef.on,\x22scope\x22):duplicate(selDef.on)});forEachTransform(selCmpt,txCompiler\x3d\x3e{txCompiler.has(selCmpt)\x26\x26txCompiler.parse\x26\x26txCompiler.parse(model,selCmpt,selDef,selDefs[name])})}return selCmpts}function parseSelectionPredicate(model,selections,dfnode,datum){datum\x3dvoid 0\x3d\x3d\x3ddatum?\x22datum\x22:datum;const stores\x3d[];selections\x3dlogicalExpr(selections,\nfunction(name){var vname\x3dvarName(name);name\x3dmodel.getSelectionComponent(vname,name);vname\x3d$(vname+\x22_store\x22);if(name.project.timeUnit){const child\x3dnull!\x3d\x3ddfnode\x26\x26void 0!\x3d\x3ddfnode?dfnode:model.component.data.raw,tunode\x3dname.project.timeUnit.clone();child.parent?tunode.insertAsParentOf(child):child.parent\x3dtunode}\x22none\x22!\x3d\x3dname.empty\x26\x26stores.push(vname);return\x22vlSelectionTest(\x22.concat(vname,\x22, \x22).concat(datum)+(\x22global\x22\x3d\x3d\x3dname.resolve?\x22)\x22:\x22, \x22.concat($(name.resolve),\x22)\x22))});return(stores.length?\x22!(\x22+stores.map(s\x3d\x3e\n\x22length(data(\x22.concat(s,\x22))\x22)).join(\x22 || \x22)+\x22) || \x22:\x22\x22)+\x22(\x22.concat(selections,\x22)\x22)}function parseSelectionBinExtent(selCmpt,extent){const encoding\x3dextent.encoding;let field\x3dextent.field;if(!encoding\x26\x26!field)field\x3dselCmpt.project.items[0].field,1\x3cselCmpt.project.items.length\x26\x26warn(\x27A \x22field\x22 or \x22encoding\x22 must be specified when using a selection as a scale domain. \x27+\x27Using \x22field\x22: \x27.concat($(field),\x22.\x22));else if(encoding\x26\x26!field){const encodings\x3dselCmpt.project.items.filter(p\x3d\x3ep.channel\x3d\x3d\x3dencoding);\n!encodings.length||1\x3cencodings.length?(field\x3dselCmpt.project.items[0].field,warn((encodings.length?\x22Multiple \x22:\x22No \x22)+\x22matching \x22.concat($(encoding),\x22 encoding found for selection \x22).concat($(extent.selection),\x22. \x22)+\x27Using \x22field\x22: \x27.concat($(field),\x22.\x22))):field\x3dencodings[0].field}return\x22\x22.concat(selCmpt.name,\x22[\x22).concat($(field),\x22]\x22)}function materializeSelections(model,main){forEachSelection(model,selCmpt\x3d\x3e{const selection\x3dselCmpt.name,lookupName\x3dmodel.getName(\x22lookup_\x22.concat(selection));model.component.data.outputNodes[lookupName]\x3d\nselCmpt.materialized\x3dnew OutputNode(new FilterNode(main,model,{selection}),lookupName,DataSourceType.Lookup,model.component.data.outputNodeRefCounts)})}function expression$jscomp$0(model,filterOp,node){return logicalExpr(filterOp,predicate\x3d\x3eisString(predicate)?predicate:(null\x3d\x3d\x3dpredicate||void 0\x3d\x3d\x3dpredicate?0:predicate.selection)?parseSelectionPredicate(model,predicate.selection,node):fieldFilterExpression(predicate))}function assembleTitle(title,config){if(title)return isArray(title)\x26\x26!isText(title)?\ntitle.map(fieldDef\x3d\x3etitleFormatter(fieldDef,config)).join(\x22, \x22):title}function setAxisEncode(axis,part,vgProp,vgRef){var _axis$encode,_axis$encode$part,_axis$encode$part$upd;axis.encode\x3dnull!\x3d\x3d(_axis$encode\x3daxis.encode)\x26\x26void 0!\x3d\x3d_axis$encode?_axis$encode:{};axis.encode[part]\x3dnull!\x3d\x3d(_axis$encode$part\x3daxis.encode[part])\x26\x26void 0!\x3d\x3d_axis$encode$part?_axis$encode$part:{};axis.encode[part].update\x3dnull!\x3d\x3d(_axis$encode$part$upd\x3daxis.encode[part].update)\x26\x26void 0!\x3d\x3d_axis$encode$part$upd?_axis$encode$part$upd:\n{};axis.encode[part].update[vgProp]\x3dvgRef}function assembleAxis(axisCmpt,kind,config,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{header:!1}:opt;var $jscomp$destructuring$var131\x3daxisCmpt.combine(),$jscomp$destructuring$var132\x3dObject.assign({},$jscomp$destructuring$var131),disable\x3d$jscomp$destructuring$var131.disable;const orient\x3d$jscomp$destructuring$var131.orient,scale\x3d$jscomp$destructuring$var131.scale,labelExpr\x3d$jscomp$destructuring$var131.labelExpr,title\x3d$jscomp$destructuring$var131.title;$jscomp$destructuring$var131\x3d\n$jscomp$destructuring$var131.zindex;$jscomp$destructuring$var132\x3d(delete $jscomp$destructuring$var132.disable,delete $jscomp$destructuring$var132.orient,delete $jscomp$destructuring$var132.scale,delete $jscomp$destructuring$var132.labelExpr,delete $jscomp$destructuring$var132.title,delete $jscomp$destructuring$var132.zindex,$jscomp$destructuring$var132);if(!disable){for(const prop in $jscomp$destructuring$var132){var propType\x3dAXIS_PROPERTY_TYPE[prop];disable\x3d$jscomp$destructuring$var132[prop];if(propType\x26\x26\npropType!\x3d\x3dkind\x26\x26\x22both\x22!\x3d\x3dpropType)delete $jscomp$destructuring$var132[prop];else if(isConditionalAxisValue(disable)){propType\x3ddisable;disable\x3dObject.assign({},propType);propType\x3dpropType.condition;disable\x3d(delete disable.condition,disable);propType\x3darray$jscomp$0(propType);const propIndex\x3dCONDITIONAL_AXIS_PROP_INDEX[prop];if(propIndex){const {vgProp,part}\x3dpropIndex;disable\x3d[...propType.map(c\x3d\x3e{var $jscomp$destructuring$var136\x3dObject.assign({},c);c\x3dc.test;$jscomp$destructuring$var136\x3d(delete $jscomp$destructuring$var136.test,\n$jscomp$destructuring$var136);return Object.assign({},{test:expression$jscomp$0(null,c)},$jscomp$destructuring$var136)}),disable];setAxisEncode($jscomp$destructuring$var132,part,vgProp,disable);delete $jscomp$destructuring$var132[prop]}else null\x3d\x3d\x3dpropIndex\x26\x26(disable\x3d{signal:propType.map(c\x3d\x3e{var $jscomp$destructuring$var138\x3dObject.assign({},c);c\x3dc.test;$jscomp$destructuring$var138\x3d(delete $jscomp$destructuring$var138.test,$jscomp$destructuring$var138);return\x22\x22.concat(expression$jscomp$0(null,c),\x22 ? \x22).concat(exprFromValueOrSignalRef($jscomp$destructuring$var138),\n\x22 : \x22)}).join(\x22\x22)+exprFromValueOrSignalRef(disable)},$jscomp$destructuring$var132[prop]\x3ddisable)}else if(isSignalRef(disable)\x26\x26(propType\x3dCONDITIONAL_AXIS_PROP_INDEX[prop])){const {vgProp,part}\x3dpropType;setAxisEncode($jscomp$destructuring$var132,part,vgProp,disable);delete $jscomp$destructuring$var132[prop]}}if(\x22grid\x22\x3d\x3d\x3dkind){if($jscomp$destructuring$var132.grid)return $jscomp$destructuring$var132.encode\x26\x26({grid:config}\x3d$jscomp$destructuring$var132.encode,$jscomp$destructuring$var132.encode\x3dObject.assign({},\nconfig?{grid:config}:{}),isEmpty($jscomp$destructuring$var132.encode)\x26\x26delete $jscomp$destructuring$var132.encode),Object.assign({},{scale,orient},$jscomp$destructuring$var132,{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined($jscomp$destructuring$var131,0)})}else if(opt.header||!axisCmpt.mainExtracted){if(void 0!\x3d\x3dlabelExpr){var _axis$encode2,_axis$encode2$labels;kind\x3dlabelExpr;(null\x3d\x3d\x3d(_axis$encode2\x3d$jscomp$destructuring$var132.encode)||void 0\x3d\x3d\x3d_axis$encode2?\n0:null\x3d\x3d\x3d(_axis$encode2$labels\x3d_axis$encode2.labels)||void 0\x3d\x3d\x3d_axis$encode2$labels?0:_axis$encode2$labels.update)\x26\x26isSignalRef($jscomp$destructuring$var132.encode.labels.update.text)\x26\x26(kind\x3dreplaceAll(labelExpr,\x22datum.label\x22,$jscomp$destructuring$var132.encode.labels.update.text.signal));setAxisEncode($jscomp$destructuring$var132,\x22labels\x22,\x22text\x22,{signal:kind})}null\x3d\x3d\x3d$jscomp$destructuring$var132.labelAlign\x26\x26delete $jscomp$destructuring$var132.labelAlign;if($jscomp$destructuring$var132.encode){for(const part of AXIS_PARTS)axisCmpt.hasAxisPart(part)||\ndelete $jscomp$destructuring$var132.encode[part];isEmpty($jscomp$destructuring$var132.encode)\x26\x26delete $jscomp$destructuring$var132.encode}axisCmpt\x3dassembleTitle(title,config);return Object.assign({},{scale,orient,grid:!1},axisCmpt?{title:axisCmpt}:{},$jscomp$destructuring$var132,!1\x3d\x3d\x3dconfig.aria?{aria:!1}:{},{zindex:getFirstDefined($jscomp$destructuring$var131,0)})}}}function assembleAxisSignals(model){const {axes}\x3dmodel.component,signals\x3d[];for(const channel of POSITION_SCALE_CHANNELS)if(axes[channel])for(const axis of axes[channel])if(!axis.get(\x22disable\x22)\x26\x26\n!axis.get(\x22gridScale\x22)){const sizeType\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22,update\x3dmodel.getSizeSignalRef(sizeType).signal;sizeType!\x3d\x3dupdate\x26\x26signals.push({name:sizeType,update})}return signals}function assembleAxes(axisComponents,config){const {x\x3d[],y\x3d[]}\x3daxisComponents;return[...x.map(a\x3d\x3eassembleAxis(a,\x22grid\x22,config)),...y.map(a\x3d\x3eassembleAxis(a,\x22grid\x22,config)),...x.map(a\x3d\x3eassembleAxis(a,\x22main\x22,config)),...y.map(a\x3d\x3eassembleAxis(a,\x22main\x22,config))].filter(a\x3d\x3ea)}function getAxisConfigFromConfigTypes(configTypes,\nconfig,channel,orient){return Object.assign.apply(null,[{},...configTypes.map(configType\x3d\x3e{if(\x22axisOrient\x22\x3d\x3d\x3dconfigType){configType\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22bottom\x22:\x22left\x22;const orientConfig1\x3dconfig[\x22x\x22\x3d\x3d\x3dchannel?\x22axisBottom\x22:\x22axisLeft\x22]||{},orientConfig2\x3dconfig[\x22x\x22\x3d\x3d\x3dchannel?\x22axisTop\x22:\x22axisRight\x22]||{},props\x3dnew Set([...keys$jscomp$0(orientConfig1),...keys$jscomp$0(orientConfig2)]),conditionalOrientAxisConfig\x3d{};for(const prop of props.values())conditionalOrientAxisConfig[prop]\x3d{signal:\x22\x22.concat(orient.signal,\n\x27 \\x3d\\x3d\\x3d \x22\x27).concat(configType,\x27\x22 ? \x27).concat(signalOrStringValue(orientConfig1[prop]),\x22 : \x22).concat(signalOrStringValue(orientConfig2[prop]))};return conditionalOrientAxisConfig}return config[configType]})])}function getAxisConfigs(channel,scaleType,orient,config){var typeBasedConfigTypes\x3d\x22band\x22\x3d\x3d\x3dscaleType?[\x22axisDiscrete\x22,\x22axisBand\x22]:\x22point\x22\x3d\x3d\x3dscaleType?[\x22axisDiscrete\x22,\x22axisPoint\x22]:scaleType in QUANTITATIVE_SCALES_INDEX?[\x22axisQuantitative\x22]:\x22time\x22\x3d\x3d\x3dscaleType||\x22utc\x22\x3d\x3d\x3dscaleType?[\x22axisTemporal\x22]:\n[];const axisChannel\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22axisX\x22:\x22axisY\x22;scaleType\x3disSignalRef(orient)?\x22axisOrient\x22:\x22axis\x22+titleCase(orient);typeBasedConfigTypes\x3d[...typeBasedConfigTypes,...typeBasedConfigTypes.map(c\x3d\x3eaxisChannel+c.substr(4))];scaleType\x3d[\x22axis\x22,scaleType,axisChannel];return{vlOnlyAxisConfig:getAxisConfigFromConfigTypes(typeBasedConfigTypes,config,channel,orient),vgAxisConfig:getAxisConfigFromConfigTypes(scaleType,config,channel,orient),axisConfigStyle:getAxisConfigStyle([...scaleType,...typeBasedConfigTypes],\nconfig)}}function getAxisConfigStyle(axisConfigTypes,config){const toMerge\x3d[{}];for(const configType of axisConfigTypes){var _config$configType;if(axisConfigTypes\x3dnull\x3d\x3d\x3d(_config$configType\x3dconfig[configType])||void 0\x3d\x3d\x3d_config$configType?void 0:_config$configType.style){axisConfigTypes\x3darray$jscomp$0(axisConfigTypes);for(const s of axisConfigTypes)toMerge.push(config.style[s])}}return Object.assign.apply(null,toMerge)}function getAxisConfig(property,styleConfigIndex,style,axisConfigs){axisConfigs\x3d\nvoid 0\x3d\x3d\x3daxisConfigs?{}:axisConfigs;styleConfigIndex\x3dgetStyleConfig(property,style,styleConfigIndex);if(void 0!\x3d\x3dstyleConfigIndex)return{configFrom:\x22style\x22,configValue:styleConfigIndex};for(const configFrom of[\x22vlOnlyAxisConfig\x22,\x22vgAxisConfig\x22,\x22axisConfigStyle\x22]){var _axisConfigs$configFr;if(void 0!\x3d\x3d(null\x3d\x3d\x3d(_axisConfigs$configFr\x3daxisConfigs[configFrom])||void 0\x3d\x3d\x3d_axisConfigs$configFr?void 0:_axisConfigs$configFr[property]))return{configFrom,configValue:axisConfigs[configFrom][property]}}return{}}\nfunction getLabelAngle(fieldOrDatumDef,axis,channel,styleConfig,axisConfigs){const labelAngle\x3dnull\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.labelAngle;if(void 0!\x3d\x3dlabelAngle)return isSignalRef(labelAngle)?labelAngle:normalizeAngle(labelAngle);({configValue:axis}\x3dgetAxisConfig(\x22labelAngle\x22,styleConfig,null\x3d\x3d\x3daxis||void 0\x3d\x3d\x3daxis?void 0:axis.style,axisConfigs));if(void 0!\x3d\x3daxis)return normalizeAngle(axis);if(\x22x\x22\x3d\x3d\x3dchannel\x26\x26contains([\x22nominal\x22,\x22ordinal\x22],fieldOrDatumDef.type)\x26\x26(!isFieldDef(fieldOrDatumDef)||\n!fieldOrDatumDef.timeUnit))return 270}function normalizeAngleExpr(angle){return\x22(((\x22.concat(angle.signal,\x22 % 360) + 360) % 360)\x22)}function defaultLabelBaseline(angle,orient,channel,alwaysIncludeMiddle){if(void 0!\x3d\x3dangle)return\x22x\x22\x3d\x3d\x3dchannel?isSignalRef(angle)?(alwaysIncludeMiddle\x3dnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22.concat(orient.signal,\x27 \\x3d\\x3d\\x3d \x22top\x22)\x27):\x22top\x22\x3d\x3d\x3dorient,{signal:\x22(45 \\x3c \x22.concat(alwaysIncludeMiddle,\x22 \\x26\\x26 \x22).concat(alwaysIncludeMiddle,\x22 \\x3c 135) || (225 \\x3c \x22).concat(alwaysIncludeMiddle,\n\x22 \\x26\\x26 \x22).concat(alwaysIncludeMiddle,\x27 \\x3c 315) ? \x22middle\x22 :\x27)+\x22(\x22.concat(alwaysIncludeMiddle,\x22 \\x3c\\x3d 45 || 315 \\x3c\\x3d \x22).concat(alwaysIncludeMiddle,\x22) \\x3d\\x3d\\x3d \x22).concat(orient,\x27 ? \x22bottom\x22 : \x22top\x22\x27)}):45\x3cangle\x26\x26135\x3eangle||225\x3cangle\x26\x26315\x3eangle?\x22middle\x22:isSignalRef(orient)?(alwaysIncludeMiddle\x3d45\x3e\x3dangle||315\x3c\x3dangle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22,{signal:\x22\x22.concat(orient.signal,\x22 \x22).concat(alwaysIncludeMiddle,\x27 \x22top\x22 ? \x22bottom\x22 : \x22top\x22\x27)}):(45\x3e\x3dangle||315\x3c\x3dangle)\x3d\x3d\x3d(\x22top\x22\x3d\x3d\x3dorient)?\x22bottom\x22:\n\x22top\x22:isSignalRef(angle)?(angle\x3dnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22.concat(orient.signal,\x27 \\x3d\\x3d\\x3d \x22left\x22)\x27):\x22left\x22\x3d\x3d\x3dorient,alwaysIncludeMiddle\x3dalwaysIncludeMiddle?\x27\x22middle\x22\x27:\x22null\x22,{signal:\x22\x22.concat(angle,\x22 \\x3c\\x3d 45 || 315 \\x3c\\x3d \x22).concat(angle,\x22 || (135 \\x3c\\x3d \x22).concat(angle,\x22 \\x26\\x26 \x22).concat(angle,\x22 \\x3c\\x3d 225) ? \x22).concat(alwaysIncludeMiddle,\x22 : (45 \\x3c\\x3d \x22).concat(angle,\x22 \\x26\\x26 \x22).concat(angle,\x22 \\x3c\\x3d 135) \\x3d\\x3d\\x3d \x22).concat(orient,\x27 ? \x22top\x22 : \x22bottom\x22\x27)}):\n45\x3e\x3dangle||315\x3c\x3dangle||135\x3c\x3dangle\x26\x26225\x3e\x3dangle?alwaysIncludeMiddle?\x22middle\x22:null:isSignalRef(orient)?(alwaysIncludeMiddle\x3d45\x3c\x3dangle\x26\x26135\x3e\x3dangle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22,{signal:\x22\x22.concat(orient.signal,\x22 \x22).concat(alwaysIncludeMiddle,\x27 \x22left\x22 ? \x22top\x22 : \x22bottom\x22\x27)}):(45\x3c\x3dangle\x26\x26135\x3e\x3dangle)\x3d\x3d\x3d(\x22left\x22\x3d\x3d\x3dorient)?\x22top\x22:\x22bottom\x22}function defaultLabelAlign(angle,orient,channel){if(void 0!\x3d\x3dangle){var startAngle\x3d(channel\x3d\x22x\x22\x3d\x3d\x3dchannel)?0:90,mainOrient\x3dchannel?\x22bottom\x22:\x22left\x22;return isSignalRef(angle)?(angle\x3d\nnormalizeAngleExpr(angle),orient\x3disSignalRef(orient)?\x22(\x22.concat(orient.signal,\x27 \\x3d\\x3d\\x3d \x22\x27).concat(mainOrient,\x27\x22)\x27):orient\x3d\x3d\x3dmainOrient,{signal:\x22(\x22.concat(startAngle?\x22(\x22+angle+\x22 + 90)\x22:angle,\x22 % 180 \\x3d\\x3d\\x3d 0) ? \x22).concat(channel?null:\x27\x22center\x22\x27,\x22 :\x22)+\x22(\x22.concat(startAngle,\x22 \\x3c \x22).concat(angle,\x22 \\x26\\x26 \x22).concat(angle,\x22 \\x3c \x22).concat(180+startAngle,\x22) \\x3d\\x3d\\x3d \x22).concat(orient,\x27 ? \x22left\x22 : \x22right\x22\x27)}):0\x3d\x3d\x3d(angle+startAngle)%180?channel?null:\x22center\x22:isSignalRef(orient)?(channel\x3d\nstartAngle\x3cangle\x26\x26angle\x3c180+startAngle?\x22\\x3d\\x3d\\x3d\x22:\x22!\\x3d\\x3d\x22,orient\x3d\x22\x22.concat(orient.signal,\x22 \x22).concat(channel,\x27 \x22\x27).concat(mainOrient,\x27\x22\x27),{signal:\x22\x22.concat(orient,\x27 ? \x22left\x22 : \x22right\x22\x27)}):(startAngle\x3cangle\x26\x26angle\x3c180+startAngle)\x3d\x3d\x3d(orient\x3d\x3d\x3dmainOrient)?\x22left\x22:\x22right\x22}}function getFieldDefTitle(model,channel){var channel2\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22;channel\x3dmodel.fieldDef(channel);model\x3dmodel.fieldDef(channel2);channel2\x3dchannel?channel.title:void 0;model\x3dmodel?model.title:void 0;if(channel2\x26\x26model)return mergeTitle(channel2,\nmodel);if(channel2)return channel2;if(model)return model;if(void 0!\x3d\x3dchannel2)return channel2;if(void 0!\x3d\x3dmodel)return model}function sortArrayIndexField(fieldDef,channel,opt){return vgField(fieldDef,Object.assign({},{prefix:channel,suffix:\x22sort_index\x22},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{}))}function getHeaderChannel(channel,orient){return contains([\x22top\x22,\x22bottom\x22],orient)?\x22column\x22:contains([\x22left\x22,\x22right\x22],orient)?\x22row\x22:\x22row\x22\x3d\x3d\x3dchannel?\x22row\x22:\x22column\x22}function getHeaderProperty(prop,header,config,channel){return getFirstDefined((header||\n{})[prop],(\x22row\x22\x3d\x3d\x3dchannel?config.headerRow:\x22column\x22\x3d\x3d\x3dchannel?config.headerColumn:config.headerFacet)[prop],config.header[prop])}function getHeaderProperties(properties,header,config,channel){const props\x3d{};for(const prop of properties)properties\x3dgetHeaderProperty(prop,header||{},config,channel),void 0!\x3d\x3dproperties\x26\x26(props[prop]\x3dproperties);return props}function assembleTitleGroup(model,channel){const title\x3dmodel.component.layoutHeaders[channel].title,config\x3dmodel.config?model.config:void 0;model\x3d\nmodel.component.layoutHeaders[channel].facetFieldDef?model.component.layoutHeaders[channel].facetFieldDef:void 0;const {titleAnchor,titleAngle:ta,titleOrient}\x3dgetHeaderProperties([\x22titleAnchor\x22,\x22titleAngle\x22,\x22titleOrient\x22],model.header,config,channel),headerChannel\x3dgetHeaderChannel(channel,titleOrient),titleAngle\x3dnormalizeAngle(ta);return{name:\x22\x22.concat(channel,\x22-title\x22),type:\x22group\x22,role:\x22\x22.concat(headerChannel,\x22-title\x22),title:Object.assign({},{text:title},\x22row\x22\x3d\x3d\x3dchannel?{orient:\x22left\x22}:{},{style:\x22guide-title\x22},\ndefaultHeaderGuideBaseline(titleAngle,headerChannel),defaultHeaderGuideAlign(headerChannel,titleAngle,titleAnchor),assembleHeaderProperties(config,model,channel,HEADER_TITLE_PROPERTIES,HEADER_TITLE_PROPERTIES_MAP))}}function defaultHeaderGuideAlign(headerChannel,angle,anchor){switch(void 0\x3d\x3d\x3danchor?\x22middle\x22:anchor){case \x22start\x22:return{align:\x22left\x22};case \x22end\x22:return{align:\x22right\x22}}return(headerChannel\x3ddefaultLabelAlign(angle,\x22row\x22\x3d\x3d\x3dheaderChannel?\x22left\x22:\x22top\x22,\x22row\x22\x3d\x3d\x3dheaderChannel?\x22y\x22:\x22x\x22))?{align:headerChannel}:\n{}}function defaultHeaderGuideBaseline(angle,channel){return(angle\x3ddefaultLabelBaseline(angle,\x22row\x22\x3d\x3d\x3dchannel?\x22left\x22:\x22top\x22,\x22row\x22\x3d\x3d\x3dchannel?\x22y\x22:\x22x\x22,!0))?{baseline:angle}:{}}function assembleHeaderGroups(model,channel$jscomp$0){const layoutHeader\x3dmodel.component.layoutHeaders[channel$jscomp$0],groups\x3d[];for(const headerType of HEADER_TYPES)if(layoutHeader[headerType])for(const headerComponent of layoutHeader[headerType]){a:{var JSCompiler_inline_result\x3dmodel;var channel\x3dchannel$jscomp$0,headerType$jscomp$0\x3d\nheaderType,layoutHeader$jscomp$0\x3dlayoutHeader,headerComponent$jscomp$0\x3dheaderComponent;if(headerComponent$jscomp$0){let title\x3dnull;const {facetFieldDef}\x3dlayoutHeader$jscomp$0;var config\x3dJSCompiler_inline_result.config?JSCompiler_inline_result.config:void 0;if(facetFieldDef\x26\x26headerComponent$jscomp$0.labels){var {labelOrient}\x3dgetHeaderProperties([\x22labelOrient\x22],facetFieldDef.header,config,channel);if(\x22row\x22\x3d\x3d\x3dchannel\x26\x26!contains([\x22top\x22,\x22bottom\x22],labelOrient)||\x22column\x22\x3d\x3d\x3dchannel\x26\x26!contains([\x22left\x22,\x22right\x22],\nlabelOrient))title\x3dassembleLabelTitle(facetFieldDef,channel,config)}config\x3disFacetModel(JSCompiler_inline_result)\x26\x26!isFacetMapping(JSCompiler_inline_result.facet);labelOrient\x3dheaderComponent$jscomp$0.axes;const hasAxes\x3d0\x3c(null\x3d\x3d\x3dlabelOrient||void 0\x3d\x3d\x3dlabelOrient?void 0:labelOrient.length);if(title||hasAxes){const sizeChannel\x3d\x22row\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22;JSCompiler_inline_result\x3dObject.assign({},{name:JSCompiler_inline_result.getName(\x22\x22.concat(channel,\x22_\x22).concat(headerType$jscomp$0)),type:\x22group\x22,\nrole:\x22\x22.concat(channel,\x22-\x22).concat(headerType$jscomp$0)},layoutHeader$jscomp$0.facetFieldDef?{from:{data:JSCompiler_inline_result.getName(channel+\x22_domain\x22)},sort:getSort(facetFieldDef,channel)}:{},hasAxes\x26\x26config?{from:{data:JSCompiler_inline_result.getName(\x22facet_domain_\x22.concat(channel))}}:{},title?{title}:{},headerComponent$jscomp$0.sizeSignal?{encode:{update:{[sizeChannel]:headerComponent$jscomp$0.sizeSignal}}}:{},hasAxes?{axes:labelOrient}:{});break a}}JSCompiler_inline_result\x3dnull}null!\x3dJSCompiler_inline_result\x26\x26\ngroups.push(JSCompiler_inline_result)}return groups}function getSort(facetFieldDef,channel){const {sort}\x3dfacetFieldDef;if(isSortField(sort)){var _sort$order;return{field:vgField(sort,{expr:\x22datum\x22}),order:null!\x3d\x3d(_sort$order\x3dsort.order)\x26\x26void 0!\x3d\x3d_sort$order?_sort$order:\x22ascending\x22}}return isArray(sort)?{field:sortArrayIndexField(facetFieldDef,channel,{expr:\x22datum\x22}),order:\x22ascending\x22}:{field:vgField(facetFieldDef,{expr:\x22datum\x22}),order:null!\x3d\x3dsort\x26\x26void 0!\x3d\x3dsort?sort:\x22ascending\x22}}function assembleLabelTitle(facetFieldDef,\nchannel,config){const {format,formatType,labelAngle,labelAnchor,labelOrient,labelExpr}\x3dgetHeaderProperties(\x22format formatType labelAngle labelAnchor labelOrient labelExpr\x22.split(\x22 \x22),facetFieldDef.header,config,channel),titleTextExpr\x3dformatSignalRef({fieldOrDatumDef:facetFieldDef,format,formatType,expr:\x22parent\x22,config}).signal,headerChannel\x3dgetHeaderChannel(channel,labelOrient);return Object.assign({},{text:{signal:labelExpr?replaceAll(replaceAll(labelExpr,\x22datum.label\x22,titleTextExpr),\x22datum.value\x22,\nvgField(facetFieldDef,{expr:\x22parent\x22})):titleTextExpr}},\x22row\x22\x3d\x3d\x3dchannel?{orient:\x22left\x22}:{},{style:\x22guide-label\x22,frame:\x22group\x22},defaultHeaderGuideBaseline(labelAngle,headerChannel),defaultHeaderGuideAlign(headerChannel,labelAngle,labelAnchor),assembleHeaderProperties(config,facetFieldDef,channel,HEADER_LABEL_PROPERTIES,HEADER_LABEL_PROPERTIES_MAP))}function assembleHeaderProperties(config,facetFieldDef,channel,properties,propertiesMap){const props\x3d{};for(const prop of properties)propertiesMap[prop]\x26\x26\n(properties\x3dgetHeaderProperty(prop,null\x3d\x3d\x3dfacetFieldDef||void 0\x3d\x3d\x3dfacetFieldDef?void 0:facetFieldDef.header,config,channel),void 0!\x3d\x3dproperties\x26\x26(props[propertiesMap[prop]]\x3dproperties));return props}function assembleLayoutSignals(model){return[...sizeSignals(model,\x22width\x22),...sizeSignals(model,\x22height\x22),...sizeSignals(model,\x22childWidth\x22),...sizeSignals(model,\x22childHeight\x22)]}function sizeSignals(model,sizeType){var channel\x3d\x22width\x22\x3d\x3d\x3dsizeType?\x22x\x22:\x22y\x22,size\x3dmodel.component.layoutSize.get(sizeType);if(!size||\n\x22merged\x22\x3d\x3d\x3dsize)return[];sizeType\x3dmodel.getSizeSignalRef(sizeType).signal;if(\x22step\x22\x3d\x3d\x3dsize){if(size\x3dmodel.getScaleComponent(channel)){var type\x3dsize.get(\x22type\x22);const range\x3dsize.get(\x22range\x22);if(type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(range))return type\x3dmodel.scaleName(channel),isFacetModel(model.parent)\x26\x26\x22independent\x22\x3d\x3d\x3dmodel.parent.component.resolve.scale[channel]?[{name:type+\x22_step\x22,value:range.step}]:[{name:type+\x22_step\x22,value:range.step},{name:sizeType,update:sizeExpr(type,size,\x22domain(\x27\x22.concat(type,\n\x22\x27).length\x22))}]}throw Error(\x22layout size is step although width/height is not step.\x22);}return\x22container\x22\x3d\x3dsize?(channel\x3d(size\x3dsizeType.endsWith(\x22width\x22))?\x22containerSize()[0]\x22:\x22containerSize()[1]\x22,model\x3dgetViewConfigContinuousSize(model.config.view,size?\x22width\x22:\x22height\x22),model\x3d\x22isFinite(\x22.concat(channel,\x22) ? \x22).concat(channel,\x22 : \x22).concat(model),[{name:sizeType,init:model,on:[{update:model,events:\x22window:resize\x22}]}]):[{name:sizeType,value:size}]}function sizeExpr(scaleName,scaleComponent,cardinality){const type\x3d\nscaleComponent.get(\x22type\x22),padding\x3dscaleComponent.get(\x22padding\x22),paddingOuter\x3dgetFirstDefined(scaleComponent.get(\x22paddingOuter\x22),padding);scaleComponent\x3dscaleComponent.get(\x22paddingInner\x22);scaleComponent\x3d\x22band\x22\x3d\x3d\x3dtype?void 0!\x3d\x3dscaleComponent?scaleComponent:padding:1;return\x22bandspace(\x22.concat(cardinality,\x22, \x22).concat(signalOrStringValue(scaleComponent),\x22, \x22).concat(signalOrStringValue(paddingOuter),\x22) * \x22).concat(scaleName,\x22_step\x22)}function getSizeTypeFromLayoutSizeType(layoutSizeType){return\x22childWidth\x22\x3d\x3d\x3d\nlayoutSizeType?\x22width\x22:\x22childHeight\x22\x3d\x3d\x3dlayoutSizeType?\x22height\x22:layoutSizeType}function guideEncodeEntry(encoding,model){return keys$jscomp$0(encoding).reduce((encode,channel)\x3d\x3eObject.assign({},encode,wrapCondition(model,encoding[channel],channel,def\x3d\x3esignalOrValueRef(def.value))),{})}function parseGuideResolve(resolve,channel){const guide\x3dchannel in POSITION_SCALE_CHANNEL_INDEX?\x22axis\x22:\x22legend\x22;return\x22independent\x22\x3d\x3d\x3dresolve.scale[channel]?(\x22shared\x22\x3d\x3d\x3dresolve[guide][channel]\x26\x26warn(\x27Setting the scale to be independent for \x22\x27.concat(channel,\n\x27\x22 means we also have to set the guide (axis or legend) to be independent.\x27)),\x22independent\x22):resolve[guide][channel]||\x22shared\x22}function getMaxValue(channelDef){return getConditionValue(channelDef,(v,conditionalDef)\x3d\x3eMath.max(v,conditionalDef.value))}function getFirstConditionValue(channelDef){return getConditionValue(channelDef,(v,conditionalDef)\x3d\x3egetFirstDefined(v,conditionalDef.value))}function getConditionValue(channelDef,reducer){var JSCompiler_inline_result\x3dchannelDef\x26\x26channelDef.condition;if(JSCompiler_inline_result\x3d\n!!JSCompiler_inline_result\x26\x26(isArray(JSCompiler_inline_result)||isValueDef(JSCompiler_inline_result)))return array$jscomp$0(channelDef.condition).reduce(reducer,channelDef.value);if(isValueDef(channelDef))return channelDef.value}function selectedCondition(model,legendCmpt,fieldDef){model\x3dlegendCmpt.get(\x22selections\x22);if(null!\x3d\x3dmodel\x26\x26void 0!\x3d\x3dmodel\x26\x26model.length){var field\x3d$(fieldDef.field);return model.map(name\x3d\x3e{const store\x3d$(varName(name)+\x22_store\x22);return\x22(!length(data(\x22.concat(store,\x22)) || (\x22).concat(name,\n\x22[\x22).concat(field,\x22] \\x26\\x26 indexof(\x22).concat(name,\x22[\x22).concat(field,\x22], datum.value) \\x3e\\x3d 0))\x22)}).join(\x22 || \x22)}}function gradientLengthSignal(model,sizeType,min,max){model\x3dmodel.getSizeSignalRef(sizeType).signal;return{signal:\x22clamp(\x22.concat(model,\x22, \x22).concat(min,\x22, \x22).concat(max,\x22)\x22)}}function parseLegend(model$jscomp$0){var JSCompiler_temp;if(isUnitModel(model$jscomp$0)){var {encoding:encoding$jscomp$0}\x3dmodel$jscomp$0,legendComponent\x3d{};for(const channel of[\x22color\x22,...LEGEND_SCALE_CHANNELS]){var def\x3d\ngetFieldOrDatumDef(encoding$jscomp$0[channel]);if(def\x26\x26model$jscomp$0.getScaleComponent(channel)\x26\x26(\x22shape\x22!\x3d\x3dchannel||!isFieldDef(def)||\x22geojson\x22!\x3d\x3ddef.type)){a:{var _legend$direction\x3ddef\x3dvoid 0,_ref3\x3dvoid 0,_legend\x3dvoid 0,_legend$encoding\x3dvoid 0;var JSCompiler_inline_result\x3dvoid 0;var model\x3dmodel$jscomp$0,channel$jscomp$0\x3dchannel;let legend\x3dmodel.legend(channel$jscomp$0);const {markDef,encoding,config}\x3dmodel;var legendConfig\x3dconfig.legend;b:{var JSCompiler_inline_result$jscomp$0\x3dmodel;var channel$jscomp$1\x3d\nchannel$jscomp$0,scale\x3dJSCompiler_inline_result$jscomp$0.scaleName(channel$jscomp$1);if(\x22trail\x22\x3d\x3d\x3dJSCompiler_inline_result$jscomp$0.mark){if(\x22color\x22\x3d\x3d\x3dchannel$jscomp$1){JSCompiler_inline_result$jscomp$0\x3d{stroke:scale};break b}if(\x22size\x22\x3d\x3d\x3dchannel$jscomp$1){JSCompiler_inline_result$jscomp$0\x3d{strokeWidth:scale};break b}}JSCompiler_inline_result$jscomp$0\x3d\x22color\x22\x3d\x3d\x3dchannel$jscomp$1?JSCompiler_inline_result$jscomp$0.markDef.filled?{fill:scale}:{stroke:scale}:{[channel$jscomp$1]:scale}}JSCompiler_inline_result$jscomp$0\x3d\nnew LegendComponent({},JSCompiler_inline_result$jscomp$0);parseInteractiveLegend(model,channel$jscomp$0,JSCompiler_inline_result$jscomp$0);channel$jscomp$1\x3dvoid 0!\x3d\x3dlegend?!legend:legendConfig.disable;JSCompiler_inline_result$jscomp$0.set(\x22disable\x22,channel$jscomp$1,void 0!\x3d\x3dlegend);if(channel$jscomp$1){def\x3dJSCompiler_inline_result$jscomp$0;break a}legend\x3dlegend||{};scale\x3dmodel.getScaleComponent(channel$jscomp$0).get(\x22type\x22);channel$jscomp$1\x3dgetFieldOrDatumDef(encoding[channel$jscomp$0]);var timeUnit\x3d\nisFieldDef(channel$jscomp$1)?null\x3d\x3d\x3d(JSCompiler_inline_result\x3dnormalizeTimeUnit(channel$jscomp$1.timeUnit))||void 0\x3d\x3d\x3dJSCompiler_inline_result?void 0:JSCompiler_inline_result.unit:void 0;const orient\x3dlegend.orient||config.legend.orient||\x22right\x22;JSCompiler_inline_result\x3d{legend,channel:channel$jscomp$0,timeUnit,scaleType:scale};({legend:timeUnit}\x3dJSCompiler_inline_result);timeUnit\x3dtimeUnit.type;b:{var {channel:channel$jscomp$2,timeUnit:timeUnit$jscomp$0,scaleType}\x3dJSCompiler_inline_result;if(isColorChannel(channel$jscomp$2)){if(contains([\x22quarter\x22,\n\x22month\x22,\x22day\x22],timeUnit$jscomp$0)){JSCompiler_inline_result\x3d\x22symbol\x22;break b}if(scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX){JSCompiler_inline_result\x3d\x22gradient\x22;break b}}JSCompiler_inline_result\x3d\x22symbol\x22}JSCompiler_inline_result\x3dgetFirstDefined(timeUnit,JSCompiler_inline_result);var {legendConfig:legendConfig$jscomp$0,legendType,orient:orient$jscomp$0,legend:legend$jscomp$0}\x3d{legend,legendType:JSCompiler_inline_result,orient,legendConfig};if(null!\x3d\x3d(_ref3\x3dnull!\x3d\x3d(_legend$direction\x3dlegend$jscomp$0.direction)\x26\x26\nvoid 0!\x3d\x3d_legend$direction?_legend$direction:legendConfig$jscomp$0[legendType?\x22gradientDirection\x22:\x22symbolDirection\x22])\x26\x26void 0!\x3d\x3d_ref3)_legend$direction\x3d_ref3;else b:{switch(orient$jscomp$0){case \x22top\x22:case \x22bottom\x22:_legend$direction\x3d\x22horizontal\x22;break b;case \x22left\x22:case \x22right\x22:case \x22none\x22:case void 0:break;default:_legend$direction\x3d\x22gradient\x22\x3d\x3d\x3dlegendType?\x22horizontal\x22:void 0;break b}_legend$direction\x3dvoid 0}legendConfig\x3d{legend,channel:channel$jscomp$0,model,markDef,encoding,fieldOrDatumDef:channel$jscomp$1,\nlegendConfig,config,scaleType:scale,orient,legendType:JSCompiler_inline_result,direction:_legend$direction};for(const property of LEGEND_COMPONENT_PROPERTIES)if(!(\x22gradient\x22\x3d\x3d\x3dJSCompiler_inline_result\x26\x26property.startsWith(\x22symbol\x22)||\x22symbol\x22\x3d\x3d\x3dJSCompiler_inline_result\x26\x26property.startsWith(\x22gradient\x22))\x26\x26(_legend$direction\x3dproperty in legendRules?legendRules[property](legendConfig):legend[property],void 0!\x3d\x3d_legend$direction)){b:{_ref3\x3dmodel.fieldDef(channel$jscomp$0);switch(property){case \x22disable\x22:_ref3\x3d\nvoid 0!\x3d\x3dlegend;break b;case \x22values\x22:_ref3\x3d!(null\x3d\x3d\x3dlegend||void 0\x3d\x3d\x3dlegend||!legend.values);break b;case \x22title\x22:if(\x22title\x22\x3d\x3d\x3dproperty\x26\x26_legend$direction\x3d\x3d\x3d(null\x3d\x3d\x3d_ref3||void 0\x3d\x3d\x3d_ref3?void 0:_ref3.title)){_ref3\x3d!0;break b}}_ref3\x3d_legend$direction\x3d\x3d\x3d(legend||{})[property]}(_ref3||void 0\x3d\x3d\x3dconfig.legend[property])\x26\x26JSCompiler_inline_result$jscomp$0.set(property,_legend$direction,_ref3)}legendConfig\x3dnull!\x3d\x3d(_legend$encoding\x3dnull\x3d\x3d\x3d(_legend\x3dlegend)||void 0\x3d\x3d\x3d_legend?void 0:_legend.encoding)\x26\x26void 0!\x3d\x3d\n_legend$encoding?_legend$encoding:{};_legend\x3dJSCompiler_inline_result$jscomp$0.get(\x22selections\x22);_legend$encoding\x3d{};channel$jscomp$0\x3d{fieldOrDatumDef:channel$jscomp$1,model,channel:channel$jscomp$0,legendCmpt:JSCompiler_inline_result$jscomp$0,legendType:JSCompiler_inline_result};for(const part of\x22labels legend title symbols gradient entries\x22.split(\x22 \x22))_legend$direction\x3dguideEncodeEntry(null!\x3d\x3d(JSCompiler_temp\x3dlegendConfig[part])\x26\x26void 0!\x3d\x3dJSCompiler_temp?JSCompiler_temp:{},model),_legend$direction\x3d\npart in legendEncodeRules?legendEncodeRules[part](_legend$direction,channel$jscomp$0):_legend$direction,void 0\x3d\x3d\x3d_legend$direction||isEmpty(_legend$direction)||(_legend$encoding[part]\x3dObject.assign({},(null\x3d\x3d\x3d_legend||void 0\x3d\x3d\x3d_legend?0:_legend.length)\x26\x26isFieldDef(channel$jscomp$1)?{name:\x22\x22.concat(varName(channel$jscomp$1.field),\x22_legend_\x22).concat(part)}:{},(null\x3d\x3d\x3d_legend||void 0\x3d\x3d\x3d_legend?0:_legend.length)?{interactive:!!_legend}:{},{update:_legend$direction}));isEmpty(_legend$encoding)||JSCompiler_inline_result$jscomp$0.set(\x22encode\x22,\n_legend$encoding,!(null\x3d\x3d\x3d(def\x3dlegend)||void 0\x3d\x3d\x3ddef||!def.encoding));def\x3dJSCompiler_inline_result$jscomp$0}legendComponent[channel]\x3ddef}}JSCompiler_temp\x3dlegendComponent}else{{const {legends,resolve}\x3dmodel$jscomp$0.component;for(encoding$jscomp$0 of model$jscomp$0.children){parseLegend(encoding$jscomp$0);for(legendComponent of keys$jscomp$0(encoding$jscomp$0.component.legends))resolve.legend[legendComponent]\x3dparseGuideResolve(model$jscomp$0.component.resolve,legendComponent),\x22shared\x22\x3d\x3d\x3dresolve.legend[legendComponent]\x26\x26\n(legends[legendComponent]\x3dmergeLegendComponent(legends[legendComponent],encoding$jscomp$0.component.legends[legendComponent]),legends[legendComponent]||(resolve.legend[legendComponent]\x3d\x22independent\x22,delete legends[legendComponent]))}for(def of keys$jscomp$0(legends))for(model of model$jscomp$0.children)model.component.legends[def]\x26\x26\x22shared\x22\x3d\x3d\x3dresolve.legend[def]\x26\x26delete model.component.legends[def];JSCompiler_temp\x3dlegends}}return model$jscomp$0.component.legends\x3dJSCompiler_temp}function mergeLegendComponent(mergedLegend,\nchildLegend){if(!mergedLegend)return childLegend.clone();var mergedOrient\x3dmergedLegend.getWithExplicit(\x22orient\x22);const childOrient\x3dchildLegend.getWithExplicit(\x22orient\x22);if(!mergedOrient.explicit||!childOrient.explicit||mergedOrient.value\x3d\x3d\x3dchildOrient.value){var typeMerged\x3d!1;for(const prop of LEGEND_COMPONENT_PROPERTIES)mergedOrient\x3dmergeValuesWithExplicit(mergedLegend.getWithExplicit(prop),childLegend.getWithExplicit(prop),prop,\x22legend\x22,(v1,v2)\x3d\x3e{switch(prop){case \x22symbolType\x22:return v1\x3d\x22circle\x22\x3d\x3d\x3d\nv2.value?v2:v1,v1;case \x22title\x22:return mergeTitleComponent(v1,v2);case \x22type\x22:return typeMerged\x3d!0,makeImplicit(\x22symbol\x22)}return defaultTieBreaker(v1,v2,prop,\x22legend\x22)}),mergedLegend.setWithExplicit(prop,mergedOrient);if(typeMerged){var _mergedLegend$implici,_mergedLegend$implici2,_mergedLegend$explici,_mergedLegend$explici2;(null\x3d\x3d\x3d(_mergedLegend$implici\x3dmergedLegend.implicit)||void 0\x3d\x3d\x3d_mergedLegend$implici?0:null\x3d\x3d\x3d(_mergedLegend$implici2\x3d_mergedLegend$implici.encode)||void 0\x3d\x3d\x3d_mergedLegend$implici2?\n0:_mergedLegend$implici2.gradient)\x26\x26deleteNestedProperty(mergedLegend.implicit,[\x22encode\x22,\x22gradient\x22]);(null\x3d\x3d\x3d(_mergedLegend$explici\x3dmergedLegend.explicit)||void 0\x3d\x3d\x3d_mergedLegend$explici?0:null\x3d\x3d\x3d(_mergedLegend$explici2\x3d_mergedLegend$explici.encode)||void 0\x3d\x3d\x3d_mergedLegend$explici2?0:_mergedLegend$explici2.gradient)\x26\x26deleteNestedProperty(mergedLegend.explicit,[\x22encode\x22,\x22gradient\x22])}return mergedLegend}}function assembleLegends(model){const legendComponentIndex\x3dmodel.component.legends,legendByDomain\x3d\n{};for(const channel of keys$jscomp$0(legendComponentIndex)){var scaleComponent\x3dmodel.getScaleComponent(channel);scaleComponent\x3dstringify(scaleComponent.get(\x22domains\x22));if(legendByDomain[scaleComponent])for(const mergedLegendComponent of legendByDomain[scaleComponent])mergeLegendComponent(mergedLegendComponent,legendComponentIndex[channel])||legendByDomain[scaleComponent].push(legendComponentIndex[channel]);else legendByDomain[scaleComponent]\x3d[legendComponentIndex[channel].clone()]}return vals(legendByDomain).flat().map(l\x3d\x3e\n{{var config\x3dmodel.config,_legend$encode2,$jscomp$inline_5042\x3dl.combine();l\x3dObject.assign({},$jscomp$inline_5042);const disable\x3d$jscomp$inline_5042.disable;$jscomp$inline_5042\x3d$jscomp$inline_5042.labelExpr;l\x3d(delete l.disable,delete l.labelExpr,delete l.selections,l);if(disable)var JSCompiler_inline_result\x3dvoid 0;else{!1\x3d\x3d\x3dconfig.aria\x26\x26void 0\x3d\x3dl.aria\x26\x26(l.aria\x3d!1);if(null\x3d\x3d\x3d(_legend$encode2\x3dl.encode)||void 0\x3d\x3d\x3d_legend$encode2?0:_legend$encode2.symbols){config\x3dl.encode.symbols.update;!config.fill||\n\x22transparent\x22\x3d\x3d\x3dconfig.fill.value||config.stroke||l.stroke||(config.stroke\x3d{value:\x22transparent\x22});for(var property of LEGEND_SCALE_CHANNELS)l[property]\x26\x26delete config[property]}l.title||delete l.title;if(void 0!\x3d\x3d$jscomp$inline_5042){var _legend$encode3,_legend$encode3$label;property\x3d$jscomp$inline_5042;(null\x3d\x3d\x3d(_legend$encode3\x3dl.encode)||void 0\x3d\x3d\x3d_legend$encode3?0:null\x3d\x3d\x3d(_legend$encode3$label\x3d_legend$encode3.labels)||void 0\x3d\x3d\x3d_legend$encode3$label?0:_legend$encode3$label.update)\x26\x26isSignalRef(l.encode.labels.update.text)\x26\x26\n(property\x3dreplaceAll($jscomp$inline_5042,\x22datum.label\x22,l.encode.labels.update.text.signal));_legend$encode3\x3dl;_legend$encode3$label\x3d{signal:property};var _legend$encode$part,_legend$encode$part$u;_legend$encode3.encode\x3dnull!\x3d\x3d(JSCompiler_inline_result\x3d_legend$encode3.encode)\x26\x26void 0!\x3d\x3dJSCompiler_inline_result?JSCompiler_inline_result:{};_legend$encode3.encode.labels\x3dnull!\x3d\x3d(_legend$encode$part\x3d_legend$encode3.encode.labels)\x26\x26void 0!\x3d\x3d_legend$encode$part?_legend$encode$part:{};_legend$encode3.encode.labels.update\x3d\nnull!\x3d\x3d(_legend$encode$part$u\x3d_legend$encode3.encode.labels.update)\x26\x26void 0!\x3d\x3d_legend$encode$part$u?_legend$encode$part$u:{};_legend$encode3.encode.labels.update.text\x3d_legend$encode3$label}JSCompiler_inline_result\x3dl}}return JSCompiler_inline_result}).filter(l\x3d\x3evoid 0!\x3d\x3dl)}function assembleProjectionsForModelAndChildren(model){return model.children.reduce((projections,child)\x3d\x3eprojections.concat(child.assembleProjections()),assembleProjectionForModel(model))}function assembleProjectionForModel(model){var component\x3d\nmodel.component.projection;if(!component||component.merged)return[];const projection\x3dcomponent.combine(),{name}\x3dprojection;if(component.data){const size\x3d{signal:\x22[\x22.concat(component.size.map(ref\x3d\x3eref.signal).join(\x22, \x22),\x22]\x22)};component\x3dcomponent.data.reduce((sources,data)\x3d\x3e{data\x3disSignalRef(data)?data.signal:\x22data(\x27\x22.concat(model.lookupDataSource(data),\x22\x27)\x22);contains(sources,data)||sources.push(data);return sources},[]);if(0\x3e\x3dcomponent.length)throw Error(\x22Projection\x27s fit didn\x27t find any data sources\x22);\nreturn[Object.assign({},{name,size,fit:{signal:1\x3ccomponent.length?\x22[\x22.concat(component.join(\x22, \x22),\x22]\x22):component[0]}},projection)]}return[Object.assign({},{name},{translate:{signal:\x22[width / 2, height / 2]\x22}},projection)]}function parseProjection(model){var JSCompiler_temp_const\x3dmodel.component;if(isUnitModel(model))if(model.hasProjection){var _model$config$project;const proj\x3dmodel.specifiedProjection;var fit\x3d!(proj\x26\x26(null!\x3dproj.scale||null!\x3dproj.translate));const size\x3dfit?[model.getSizeSignalRef(\x22width\x22),\nmodel.getSizeSignalRef(\x22height\x22)]:void 0;if(fit){{fit\x3d[];const {encoding}\x3dmodel;for(JSCompiler_temp of[[\x22longitude\x22,\x22latitude\x22],[\x22longitude2\x22,\x22latitude2\x22]])(getFieldOrDatumDef(encoding[JSCompiler_temp[0]])||getFieldOrDatumDef(encoding[JSCompiler_temp[1]]))\x26\x26fit.push({signal:model.getName(\x22geojson_\x22.concat(fit.length))});model.channelHasField(\x22shape\x22)\x26\x26\x22geojson\x22\x3d\x3d\x3dmodel.typedFieldDef(\x22shape\x22).type\x26\x26fit.push({signal:model.getName(\x22geojson_\x22.concat(fit.length))});0\x3d\x3d\x3dfit.length\x26\x26fit.push(model.requestDataName(DataSourceType.Main));\nvar JSCompiler_temp\x3dfit}}else JSCompiler_temp\x3dvoid 0;model\x3dnew ProjectionComponent(model.projectionName(!0),Object.assign({},null!\x3d\x3d(_model$config$project\x3dmodel.config.projection)\x26\x26void 0!\x3d\x3d_model$config$project?_model$config$project:{},null!\x3d\x3dproj\x26\x26void 0!\x3d\x3dproj?proj:{}),size,JSCompiler_temp)}else model\x3dvoid 0;else model\x3dparseNonUnitProjections(model);JSCompiler_temp_const.projection\x3dmodel}function mergeIfNoConflict(first,second){const allPropertiesShared\x3devery(PROJECTION_PROPERTIES,prop\x3d\x3e!hop.call(first.explicit,\nprop)\x26\x26!hop.call(second.explicit,prop)||hop.call(first.explicit,prop)\x26\x26hop.call(second.explicit,prop)\x26\x26stringify(first.get(prop))\x3d\x3d\x3dstringify(second.get(prop))?!0:!1);if(stringify(first.size)\x3d\x3d\x3dstringify(second.size)){if(allPropertiesShared)return first;if(stringify(first.explicit)\x3d\x3d\x3dstringify({}))return second;if(stringify(second.explicit)\x3d\x3d\x3dstringify({}))return first}return null}function parseNonUnitProjections(model){if(0!\x3d\x3dmodel.children.length){var nonUnitProjection;for(var child$jscomp$0 of model.children)parseProjection(child$jscomp$0);\nchild$jscomp$0\x3devery(model.children,child\x3d\x3e{if(child\x3dchild.component.projection){if(nonUnitProjection)return(child\x3dmergeIfNoConflict(nonUnitProjection,child))\x26\x26(nonUnitProjection\x3dchild),!!child;nonUnitProjection\x3dchild}return!0});if(nonUnitProjection\x26\x26child$jscomp$0){child$jscomp$0\x3dmodel.projectionName(!0);const modelProjection\x3dnew ProjectionComponent(child$jscomp$0,nonUnitProjection.specifiedProjection,nonUnitProjection.size,duplicate(nonUnitProjection.data));for(const child of model.children)if(model\x3d\nchild.component.projection)model.isFit\x26\x26modelProjection.data.push(...child.component.projection.data),child.renameProjection(model.get(\x22name\x22),child$jscomp$0),model.merged\x3d!0;return modelProjection}}}function rangeFormula(model,fieldDef,channel,config){if(binRequiresRange(fieldDef,channel)){var _ref,_model$axis;model\x3disUnitModel(model)?null!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_model$axis\x3dmodel.axis(channel))\x26\x26void 0!\x3d\x3d_model$axis?_model$axis:model.legend(channel))\x26\x26void 0!\x3d\x3d_ref?_ref:{}:{};_ref\x3dvgField(fieldDef,{expr:\x22datum\x22});\n_model$axis\x3dvgField(fieldDef,{expr:\x22datum\x22,binSuffix:\x22end\x22});return{formulaAs:vgField(fieldDef,{binSuffix:\x22range\x22,forAs:!0}),formula:binFormatExpression(_ref,_model$axis,model.format,model.formatType,config)}}return{}}function binKey(bin,field){return\x22\x22.concat(binToString(bin),\x22_\x22).concat(field)}function getBinSignalName(model,field,bin){var _normalizeBin;bin\x3dnull!\x3d\x3d(_normalizeBin\x3dnormalizeBin(bin,void 0))\x26\x26void 0!\x3d\x3d_normalizeBin?_normalizeBin:{};field\x3dbinKey(bin,field);return model.getName(\x22\x22.concat(field,\n\x22_bins\x22))}function createBinComponent(t,bin,model){let as;as\x3d\x22as\x22in t?isString(t.as)?[t.as,\x22\x22.concat(t.as,\x22_end\x22)]:[t.as[0],t.as[1]]:[vgField(t,{forAs:!0}),vgField(t,{binSuffix:\x22end\x22,forAs:!0})];const normalizedBin\x3dObject.assign({},normalizeBin(bin,void 0));bin\x3dbinKey(normalizedBin,t.field);var JSCompiler_inline_result\x3d{signal:model.getName(\x22\x22.concat(bin,\x22_bins\x22)),extentSignal:model.getName(\x22\x22.concat(bin,\x22_extent\x22))};const {signal,extentSignal}\x3dJSCompiler_inline_result;if(isSelectionExtent(normalizedBin.extent)){var span\x3d\nnormalizedBin.extent;JSCompiler_inline_result\x3dspan.selection;span\x3dparseSelectionBinExtent(model.getSelectionComponent(varName(JSCompiler_inline_result),JSCompiler_inline_result),span);delete normalizedBin.extent}t\x3dObject.assign({},{bin:normalizedBin,field:t.field,as:[as]},signal?{signal}:{},extentSignal?{extentSignal}:{},span?{span}:{});return{key:bin,binComponent:t}}function unquote(pattern){return\x22\x27\x22\x3d\x3d\x3dpattern[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dpattern[pattern.length-1]||\x27\x22\x27\x3d\x3d\x3dpattern[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dpattern[pattern.length-1]?\npattern.slice(1,-1):pattern}function parseExpression$1(field,parse){field\x3daccessPathWithDatum(field);if(\x22number\x22\x3d\x3d\x3dparse)return\x22toNumber(\x22.concat(field,\x22)\x22);if(\x22boolean\x22\x3d\x3d\x3dparse)return\x22toBoolean(\x22.concat(field,\x22)\x22);if(\x22string\x22\x3d\x3d\x3dparse)return\x22toString(\x22.concat(field,\x22)\x22);if(\x22date\x22\x3d\x3d\x3dparse)return\x22toDate(\x22.concat(field,\x22)\x22);if(\x22flatten\x22\x3d\x3d\x3dparse)return field;if(0\x3d\x3d\x3dparse.indexOf(\x22date:\x22))return parse\x3dunquote(parse.slice(5,parse.length)),\x22timeParse(\x22.concat(field,\x22,\x27\x22).concat(parse,\x22\x27)\x22);if(0\x3d\x3d\x3dparse.indexOf(\x22utc:\x22))return parse\x3d\nunquote(parse.slice(4,parse.length)),\x22utcParse(\x22.concat(field,\x22,\x27\x22).concat(parse,\x22\x27)\x22);warn(\x27Unrecognized parse \x22\x27.concat(parse,\x27\x22.\x27));return null}function getImplicitFromFilterTransform(transform){const implicit\x3d{};forEachLeaf(transform.filter,filter\x3d\x3e{if(isFieldPredicate(filter)){let val\x3dnull;if(isFieldEqualPredicate(filter))val\x3dsignalRefOrValue(filter.equal);else if(isFieldLTEPredicate(filter))val\x3dsignalRefOrValue(filter.lte);else if(isFieldLTPredicate(filter))val\x3dsignalRefOrValue(filter.lt);else if(isFieldGTPredicate(filter))val\x3d\nsignalRefOrValue(filter.gt);else if(isFieldGTEPredicate(filter))val\x3dsignalRefOrValue(filter.gte);else if(isFieldRangePredicate(filter))val\x3dfilter.range[0];else if(isFieldOneOfPredicate(filter)){var _filter$oneOf;val\x3d(null!\x3d\x3d(_filter$oneOf\x3dfilter.oneOf)\x26\x26void 0!\x3d\x3d_filter$oneOf?_filter$oneOf:filter[\x22in\x22])[0]}val\x26\x26(isDateTime(val)?implicit[filter.field]\x3d\x22date\x22:isNumber(val)?implicit[filter.field]\x3d\x22number\x22:isString(val)\x26\x26(implicit[filter.field]\x3d\x22string\x22));filter.timeUnit\x26\x26(implicit[filter.field]\x3d\x22date\x22)}});\nreturn implicit}function getImplicitFromEncoding(model){function add(fieldDef){if(isFieldOrDatumDefForTimeFormat(fieldDef))implicit[fieldDef.field]\x3d\x22date\x22;else{var JSCompiler_temp;if(JSCompiler_temp\x3d\x22quantitative\x22\x3d\x3d\x3dfieldDef.type)JSCompiler_temp\x3dfieldDef.aggregate,JSCompiler_temp\x3disString(JSCompiler_temp)\x26\x26contains([\x22min\x22,\x22max\x22],JSCompiler_temp);JSCompiler_temp?implicit[fieldDef.field]\x3d\x22number\x22:1\x3caccessPathDepth(fieldDef.field)?fieldDef.field in implicit||(implicit[fieldDef.field]\x3d\x22flatten\x22):isScaleFieldDef(fieldDef)\x26\x26\nisSortField(fieldDef.sort)\x26\x261\x3caccessPathDepth(fieldDef.sort.field)\x26\x26(fieldDef.sort.field in implicit||(implicit[fieldDef.sort.field]\x3d\x22flatten\x22))}}const implicit\x3d{};(isUnitModel(model)||isFacetModel(model))\x26\x26model.forEachFieldDef((fieldDef,channel)\x3d\x3e{isTypedFieldDef(fieldDef)?add(fieldDef):(channel\x3dgetMainRangeChannel(channel),channel\x3dmodel.fieldDef(channel),add(Object.assign({},fieldDef,{type:channel.type})))});if(isUnitModel(model)){const {mark,markDef,encoding}\x3dmodel;if(isPathMark(mark)\x26\x26!model.encoding.order){const dimensionChannelDef\x3d\nencoding[\x22horizontal\x22\x3d\x3d\x3dmarkDef.orient?\x22y\x22:\x22x\x22];!isFieldDef(dimensionChannelDef)||\x22quantitative\x22!\x3d\x3ddimensionChannelDef.type||dimensionChannelDef.field in implicit||(implicit[dimensionChannelDef.field]\x3d\x22number\x22)}}return implicit}function isDataSourceNode(node){return node instanceof SourceNode||node instanceof GraticuleNode||node instanceof SequenceNode}function getStackByFields(model){return model.stack.stackBy.reduce((fields,by)\x3d\x3e{(by\x3dvgField(by.fieldDef))\x26\x26fields.push(by);return fields},[])}function isValidAsArray(as){return isArray(as)\x26\x26\nas.every(s\x3d\x3eisString(s))\x26\x261\x3cas.length}function cloneSubtree(facet){function clone(node){if(!(node instanceof FacetNode)){const copy\x3dnode.clone();if(copy instanceof OutputNode){const newName\x3d\x22scale_\x22+copy.getSource();copy.setSource(newName);facet.model.component.data.outputNodes[newName]\x3dcopy}else(copy instanceof AggregateNode||copy instanceof StackNode||copy instanceof WindowTransformNode||copy instanceof JoinAggregateTransformNode)\x26\x26copy.addDimensions(facet.fields);for(const n of node.children.flatMap(clone))n.parent\x3d\ncopy;return[copy]}return node.children.flatMap(clone)}return clone}function moveFacetDown(node){if(node instanceof FacetNode)if(1!\x3d\x3dnode.numChildren()||node.children[0]instanceof OutputNode){var facetMain\x3dnode.model.component.data.main;moveMainDownToFacet(facetMain);const cloner\x3dcloneSubtree(node);node\x3dnode.children.map(cloner).flat();for(const c of node)c.parent\x3dfacetMain}else facetMain\x3dnode.children[0],(facetMain instanceof AggregateNode||facetMain instanceof StackNode||facetMain instanceof WindowTransformNode||\nfacetMain instanceof JoinAggregateTransformNode)\x26\x26facetMain.addDimensions(node.fields),facetMain.swapWithParent(),moveFacetDown(node);else node.children.map(moveFacetDown)}function moveMainDownToFacet(node){if(node instanceof OutputNode\x26\x26node.type\x3d\x3d\x3dDataSourceType.Main\x26\x261\x3d\x3d\x3dnode.numChildren()){const child\x3dnode.children[0];child instanceof FacetNode||(child.swapWithParent(),moveMainDownToFacet(node))}}function checkLinks(nodes){for(const node of nodes){for(const child of node.children)if(child.parent!\x3d\x3d\nnode)return!1;if(!checkLinks(node.children))return!1}return!0}function runOptimizer(optimizer,nodes){let modified\x3d!1;for(const node of nodes)modified\x3doptimizer.optimize(node)||modified;return modified}function optimizationDataflowHelper(dataComponent,model,firstPass){let roots\x3ddataComponent.sources,modified\x3d!1;modified\x3drunOptimizer(new RemoveUnnecessaryOutputNodes,roots)||modified;modified\x3drunOptimizer(new RemoveUnnecessaryIdentifierNodes(model),roots)||modified;roots\x3droots.filter(r\x3d\x3e0\x3cr.numChildren());\nmodified\x3drunOptimizer(new RemoveUnusedSubtrees,roots)||modified;roots\x3droots.filter(r\x3d\x3e0\x3cr.numChildren());firstPass||(modified\x3drunOptimizer(new MoveParseUp,roots)||modified,modified\x3drunOptimizer(new MergeBins(model),roots)||modified,modified\x3drunOptimizer(new RemoveDuplicateTimeUnits,roots)||modified,modified\x3drunOptimizer(new MergeParse,roots)||modified,modified\x3drunOptimizer(new MergeAggregates,roots)||modified,modified\x3drunOptimizer(new MergeTimeUnits,roots)||modified,modified\x3drunOptimizer(new MergeIdenticalNodes,\nroots)||modified,modified\x3drunOptimizer(new MergeOutputs,roots)||modified);dataComponent.sources\x3droots;return modified}function parseUnitScaleDomain(model){const localScaleComponents\x3dmodel.component.scales;for(const channel of keys$jscomp$0(localScaleComponents)){var JSCompiler_inline_result\x3dmodel;var channel$jscomp$0\x3dchannel,scaleType\x3dJSCompiler_inline_result.getScaleComponent(channel$jscomp$0).get(\x22type\x22),{encoding}\x3dJSCompiler_inline_result;var JSCompiler_inline_result$jscomp$0\x3dJSCompiler_inline_result.scaleDomain(channel$jscomp$0);\nvar fieldDef\x3dJSCompiler_inline_result.typedFieldDef(channel$jscomp$0),scaleConfig\x3dJSCompiler_inline_result.config.scale;if(\x22unaggregated\x22\x3d\x3d\x3dJSCompiler_inline_result$jscomp$0){const {valid,reason}\x3dcanUseUnaggregatedDomain(fieldDef,scaleType);valid||(warn(reason),JSCompiler_inline_result$jscomp$0\x3dvoid 0)}else void 0\x3d\x3d\x3dJSCompiler_inline_result$jscomp$0\x26\x26scaleConfig.useUnaggregatedDomain\x26\x26({valid:fieldDef}\x3dcanUseUnaggregatedDomain(fieldDef,scaleType),fieldDef\x26\x26(JSCompiler_inline_result$jscomp$0\x3d\x22unaggregated\x22));\nJSCompiler_inline_result$jscomp$0!\x3d\x3dJSCompiler_inline_result.scaleDomain(channel$jscomp$0)\x26\x26(JSCompiler_inline_result.specifiedScales[channel$jscomp$0]\x3dObject.assign({},JSCompiler_inline_result.specifiedScales[channel$jscomp$0],{domain:JSCompiler_inline_result$jscomp$0}));JSCompiler_inline_result\x3d\x22x\x22\x3d\x3d\x3dchannel$jscomp$0\x26\x26getFieldOrDatumDef(encoding.x2)?getFieldOrDatumDef(encoding.x)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,\n\x22x\x22),parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,\x22x2\x22),\x22domain\x22,\x22scale\x22,domainsTieBreaker):parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,\x22x2\x22):\x22y\x22\x3d\x3d\x3dchannel$jscomp$0\x26\x26getFieldOrDatumDef(encoding.y2)?getFieldOrDatumDef(encoding.y)?mergeValuesWithExplicit(parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,\x22y\x22),parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,\nJSCompiler_inline_result,\x22y2\x22),\x22domain\x22,\x22scale\x22,domainsTieBreaker):parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,\x22y2\x22):parseSingleChannelDomain(scaleType,JSCompiler_inline_result$jscomp$0,JSCompiler_inline_result,channel$jscomp$0);localScaleComponents[channel].setWithExplicit(\x22domains\x22,JSCompiler_inline_result);encoding\x3dvoid 0;channel$jscomp$0\x3dmodel.component.scales[channel];JSCompiler_inline_result$jscomp$0\x3dmodel.specifiedScales[channel].domain;scaleType\x3d\nnull\x3d\x3d\x3d(encoding\x3dmodel.fieldDef(channel))||void 0\x3d\x3d\x3dencoding?void 0:encoding.bin;encoding\x3disSelectionDomain(JSCompiler_inline_result$jscomp$0)\x26\x26JSCompiler_inline_result$jscomp$0;scaleType\x3disObject(scaleType)\x26\x26isSelectionExtent(scaleType.extent)\x26\x26scaleType.extent;(encoding||scaleType)\x26\x26channel$jscomp$0.set(\x22selectionExtent\x22,null!\x3d\x3dencoding\x26\x26void 0!\x3d\x3dencoding?encoding:scaleType,!0);if(model.component.data.isFaceted){for(channel$jscomp$0\x3dmodel;!isFacetModel(channel$jscomp$0)\x26\x26channel$jscomp$0.parent;)channel$jscomp$0\x3d\nchannel$jscomp$0.parent;if(\x22shared\x22\x3d\x3d\x3dchannel$jscomp$0.component.resolve.scale[channel])for(const domain of JSCompiler_inline_result.value)isDataRefDomain(domain)\x26\x26(domain.data\x3d\x22scale_\x22+domain.data.replace(\x22scale_\x22,\x22\x22))}}}function parseNonUnitScaleDomain(model$jscomp$0){for(var child$jscomp$0 of model$jscomp$0.children){var model\x3dchild$jscomp$0;isUnitModel(model)?parseUnitScaleDomain(model):parseNonUnitScaleDomain(model)}model\x3dmodel$jscomp$0.component.scales;for(const channel of keys$jscomp$0(model)){let domains;\nchild$jscomp$0\x3dnull;for(const child of model$jscomp$0.children){var childComponent\x3dchild.component.scales[channel];childComponent\x26\x26(domains\x3dvoid 0\x3d\x3d\x3ddomains?childComponent.getWithExplicit(\x22domains\x22):mergeValuesWithExplicit(domains,childComponent.getWithExplicit(\x22domains\x22),\x22domains\x22,\x22scale\x22,domainsTieBreaker),childComponent\x3dchildComponent.get(\x22selectionExtent\x22),child$jscomp$0\x26\x26childComponent\x26\x26child$jscomp$0.selection!\x3d\x3dchildComponent.selection\x26\x26warn(\x22The same selection must be used to override scale domains in a layered view.\x22),\nchild$jscomp$0\x3dchildComponent)}model[channel].setWithExplicit(\x22domains\x22,domains);child$jscomp$0\x26\x26model[channel].set(\x22selectionExtent\x22,child$jscomp$0,!0)}}function mapDomainToDataSignal(domain,type,timeUnit){return domain.map(v\x3d\x3e{v\x3dvalueExpr(v,{timeUnit,type});return{signal:\x22{data: \x22.concat(v,\x22}\x22)}})}function convertDomainIfItIsDateTime(domain,type,timeUnit){var _normalizeTimeUnit;timeUnit\x3dnull\x3d\x3d\x3d(_normalizeTimeUnit\x3dnormalizeTimeUnit(timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit?void 0:_normalizeTimeUnit.unit;\nreturn\x22temporal\x22\x3d\x3d\x3dtype||timeUnit?mapDomainToDataSignal(domain,type,timeUnit):[domain]}function parseSingleChannelDomain(scaleType,domain,model,channel){var {encoding}\x3dmodel;encoding\x3dgetFieldOrDatumDef(encoding[channel]);const {type}\x3dencoding,timeUnit\x3dencoding.timeUnit;if(domain\x26\x26domain.unionWith)return channel\x3dparseSingleChannelDomain(scaleType,void 0,model,channel),domain\x3dconvertDomainIfItIsDateTime(domain.unionWith,type,timeUnit),makeExplicit([...channel.value,...domain]);if(isSignalRef(domain))return makeExplicit([domain]);\nif(domain\x26\x26\x22unaggregated\x22!\x3d\x3ddomain\x26\x26!isSelectionDomain(domain))return makeExplicit(convertDomainIfItIsDateTime(domain,type,timeUnit));var stack\x3dmodel.stack;if(stack\x26\x26channel\x3d\x3d\x3dstack.fieldChannel){if(\x22normalize\x22\x3d\x3d\x3dstack.offset)return makeImplicit([[0,1]]);domain\x3dmodel.requestDataName(DataSourceType.Main);return makeImplicit([{data:domain,field:model.vgField(channel,{suffix:\x22start\x22})},{data:domain,field:model.vgField(channel,{suffix:\x22end\x22})}])}stack\x3dSCALE_CHANNEL_INDEX[channel]\x26\x26isFieldDef(encoding)?\ndomainSort(model,channel,scaleType):void 0;if(isDatumDef(encoding))return channel\x3dconvertDomainIfItIsDateTime([encoding.datum],type,timeUnit),makeImplicit(channel);if(\x22unaggregated\x22\x3d\x3d\x3ddomain)return channel\x3dmodel.requestDataName(DataSourceType.Main),{field:domain}\x3dencoding,makeImplicit([{data:channel,field:vgField({field:domain,aggregate:\x22min\x22})},{data:channel,field:vgField({field:domain,aggregate:\x22max\x22})}]);if(isBinning(encoding.bin)){if(scaleType in DISCRETE_DOMAIN_INDEX)return\x22bin-ordinal\x22\x3d\x3d\x3dscaleType?\nmakeImplicit([]):makeImplicit([{data:isBoolean$1(stack)?model.requestDataName(DataSourceType.Main):model.requestDataName(DataSourceType.Raw),field:model.vgField(channel,binRequiresRange(encoding,channel)?{binSuffix:\x22range\x22}:{}),sort:!0!\x3d\x3dstack\x26\x26isObject(stack)?stack:{field:model.vgField(channel,{}),op:\x22min\x22}}]);({bin:domain}\x3dencoding);if(isBinning(domain)){const binSignal\x3dgetBinSignalName(model,encoding.field,domain);return makeImplicit([new SignalRefWrapper(()\x3d\x3e{const signal\x3dmodel.getSignalName(binSignal);\nreturn\x22[\x22.concat(signal,\x22.start, \x22).concat(signal,\x22.stop]\x22)})])}return makeImplicit([{data:model.requestDataName(DataSourceType.Main),field:model.vgField(channel,{})}])}return encoding.timeUnit\x26\x26contains([\x22time\x22,\x22utc\x22],scaleType)\x26\x26hasBand(channel,encoding,isUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,model.stack,model.markDef,model.config)?(domain\x3dmodel.requestDataName(DataSourceType.Main),makeImplicit([{data:domain,field:model.vgField(channel)},{data:domain,field:model.vgField(channel,\n{suffix:\x22end\x22})}])):stack?makeImplicit([{data:isBoolean$1(stack)?model.requestDataName(DataSourceType.Main):model.requestDataName(DataSourceType.Raw),field:model.vgField(channel),sort:stack}]):makeImplicit([{data:model.requestDataName(DataSourceType.Main),field:model.vgField(channel)}])}function normalizeSortField(sort,isStackedMeasure){const {op,field,order}\x3dsort;return Object.assign({},{op:null!\x3d\x3dop\x26\x26void 0!\x3d\x3dop?op:isStackedMeasure?\x22sum\x22:\x22min\x22},field?{field:replacePathInField(field)}:{},order?{order}:\n{})}function domainSort(model,channel,scaleType){if(scaleType in DISCRETE_DOMAIN_INDEX){var fieldDef\x3dmodel.fieldDef(channel);scaleType\x3dfieldDef.sort;if(isSortArray(scaleType))return{op:\x22min\x22,field:sortArrayIndexField(fieldDef,channel),order:\x22ascending\x22};({stack:fieldDef}\x3dmodel);var stackDimensions\x3dfieldDef?[...fieldDef.groupbyField?[fieldDef.groupbyField]:[],...fieldDef.stackBy.map(s\x3d\x3es.fieldDef.field)]:void 0;if(isSortField(scaleType))return model\x3dfieldDef\x26\x26!contains(stackDimensions,scaleType.field),\nnormalizeSortField(scaleType,model);if(scaleType\x26\x26scaleType.encoding){const {encoding,order}\x3dscaleType;model\x3dmodel.fieldDef(encoding);const {aggregate,field}\x3dmodel;channel\x3dfieldDef\x26\x26!contains(stackDimensions,field);if(isArgminDef(aggregate)||isArgmaxDef(aggregate))return normalizeSortField({field:vgField(model),order},channel);if(isAggregateOp(aggregate)||!aggregate)return normalizeSortField({op:aggregate,field,order},channel)}else{if(\x22descending\x22\x3d\x3d\x3dscaleType)return{op:\x22min\x22,field:model.vgField(channel),\norder:\x22descending\x22};if(contains([\x22ascending\x22,void 0],scaleType))return!0}}}function canUseUnaggregatedDomain(fieldDef,scaleType){const {aggregate,type}\x3dfieldDef;return aggregate?isString(aggregate)\x26\x26!SHARED_DOMAIN_OP_INDEX[aggregate]?{valid:!1,reason:\x27Unaggregated domain not applicable for \x22\x27.concat(aggregate,\x27\x22 since it produces values outside the origin domain of the source data.\x27)}:\x22quantitative\x22\x3d\x3d\x3dtype\x26\x26\x22log\x22\x3d\x3d\x3dscaleType?{valid:!1,reason:\x22Unaggregated domain is currently unsupported for log scale (\x22.concat(stringify(fieldDef),\n\x22).\x22)}:{valid:!0}:{valid:!1,reason:\x22Using unaggregated domain with raw field has no effect (\x22.concat(stringify(fieldDef),\x22).\x22)}}function domainsTieBreaker(v1$jscomp$0,v2$jscomp$0,property,propertyOf){if(v1$jscomp$0.explicit\x26\x26v2$jscomp$0.explicit){var v1\x3dv1$jscomp$0.value,v2\x3dv2$jscomp$0.value;property\x3d\x22Conflicting \x22.concat(propertyOf.toString(),\x27 property \x22\x27).concat(property.toString(),\x27\x22 (\x27).concat(stringify(v1),\x22 and \x22).concat(stringify(v2),\x22). Using the union of the two domains.\x22);warn(property)}return{explicit:v1$jscomp$0.explicit,\nvalue:[...v1$jscomp$0.value,...v2$jscomp$0.value]}}function mergeDomains(domains){var uniqueDomains\x3dunique(domains.map(domain\x3d\x3eisDataRefDomain(domain)?(domain\x3dObject.assign({},domain),delete domain.sort,domain):domain),hash),sorts\x3dunique(domains.map(d\x3d\x3e{if(isDataRefDomain(d))return d\x3dd.sort,void 0\x3d\x3d\x3dd||isBoolean$1(d)||(\x22op\x22in d\x26\x26\x22count\x22\x3d\x3d\x3dd.op\x26\x26delete d.field,\x22ascending\x22\x3d\x3d\x3dd.order\x26\x26delete d.order),d}).filter(s\x3d\x3evoid 0!\x3d\x3ds),hash);if(0!\x3d\x3duniqueDomains.length){if(1\x3d\x3d\x3duniqueDomains.length){uniqueDomains\x3d\ndomains[0];if(isDataRefDomain(uniqueDomains)\x26\x260\x3csorts.length){var sort\x3dsorts[0];1\x3csorts.length?(warn(\x22Domains that should be unioned has conflicting sort properties. Sort will be set to true.\x22),sort\x3d!0):isObject(sort)\x26\x26\x22field\x22in sort\x26\x26uniqueDomains.field\x3d\x3d\x3dsort.field\x26\x26(sort\x3dsort.order?{order:sort.order}:!0);return Object.assign({},uniqueDomains,{sort})}return uniqueDomains}sorts\x3dunique(sorts.map(s\x3d\x3e{if(isBoolean$1(s)||!(\x22op\x22in s)||isString(s.op)\x26\x26s.op in MULTIDOMAIN_SORT_OP_INDEX)return s;warn(\x22Dropping sort property \x22.concat(stringify(s),\n\x27 as unioned domains only support boolean or op \x22count\x22, \x22min\x22, and \x22max\x22.\x27));return!0}),hash);1\x3d\x3d\x3dsorts.length?sort\x3dsorts[0]:1\x3csorts.length\x26\x26(warn(\x22Domains that should be unioned has conflicting sort properties. Sort will be set to true.\x22),sort\x3d!0);sorts\x3dunique(domains.map(d\x3d\x3eisDataRefDomain(d)?d.data:null),x\x3d\x3ex);return 1\x3d\x3d\x3dsorts.length\x26\x26null!\x3d\x3dsorts[0]?Object.assign({},{data:sorts[0],fields:uniqueDomains.map(d\x3d\x3ed.field)},sort?{sort}:{}):Object.assign({},{fields:uniqueDomains},sort?{sort}:{})}}function getFieldFromDomain(domain){if(isDataRefDomain(domain)\x26\x26\nisString(domain.field))return domain.field;var JSCompiler_inline_result\x3disArray(domain)?!1:\x22fields\x22in domain\x26\x26!(\x22data\x22in domain);if(JSCompiler_inline_result){let field;for(const nonUnionDomain of domain.fields)if(isDataRefDomain(nonUnionDomain)\x26\x26isString(nonUnionDomain.field))if(!field)field\x3dnonUnionDomain.field;else if(field!\x3d\x3dnonUnionDomain.field)return warn(\x22Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.\x22),\nfield;warn(\x22Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.\x22);return field}JSCompiler_inline_result\x3disArray(domain)?!1:\x22fields\x22in domain\x26\x26\x22data\x22in domain;if(JSCompiler_inline_result)return warn(\x22Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.\x22),\ndomain\x3ddomain.fields[0],isString(domain)?domain:void 0}function assembleDomain(model,channel){channel\x3dmodel.component.scales[channel].get(\x22domains\x22).map(domain\x3d\x3e{isDataRefDomain(domain)\x26\x26(domain.data\x3dmodel.lookupDataSource(domain.data));return domain});return mergeDomains(channel)}function assembleScales(model){return isLayerModel(model)||isConcatModel(model)?model.children.reduce((scales,child)\x3d\x3escales.concat(assembleScales(child)),assembleScalesForModel(model)):assembleScalesForModel(model)}function assembleScalesForModel(model){return keys$jscomp$0(model.component.scales).reduce((scales,\nchannel)\x3d\x3e{var scaleComponent\x3dmodel.component.scales[channel];if(scaleComponent.merged)return scales;var scale\x3dscaleComponent.combine(),$jscomp$destructuring$var177\x3dObject.assign({},scale);scaleComponent\x3dscale.name;const type\x3dscale.type,selectionExtent\x3dscale.selectionExtent,reverse\x3dscale.reverse;$jscomp$destructuring$var177\x3d(delete $jscomp$destructuring$var177.name,delete $jscomp$destructuring$var177.type,delete $jscomp$destructuring$var177.selectionExtent,delete $jscomp$destructuring$var177.domains,\ndelete $jscomp$destructuring$var177.range,delete $jscomp$destructuring$var177.reverse,$jscomp$destructuring$var177);scale\x3dscale.range;channel in POSITION_SCALE_CHANNEL_INDEX?isVgRangeStep(scale)\x26\x26(scale\x3d{step:{signal:scaleComponent+\x22_step\x22}}):isObject(scale)\x26\x26isDataRefDomain(scale)\x26\x26(scale\x3dObject.assign({},scale,{data:model.lookupDataSource(scale.data)}));if(selectionExtent){var domainRaw\x3dselectionExtent.selection;domainRaw\x3dmodel.getSelectionComponent(domainRaw,varName(domainRaw));domainRaw\x3d{signal:parseSelectionBinExtent(domainRaw,\nselectionExtent)}}channel\x3dassembleDomain(model,channel);scales.push(Object.assign({},{name:scaleComponent,type},channel?{domain:channel}:{},domainRaw?{domainRaw}:{},{range:scale},void 0!\x3d\x3dreverse?{reverse}:{},$jscomp$destructuring$var177));return scales},[])}function getSizeChannel$1(channel){return\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22y\x22\x3d\x3d\x3dchannel?\x22height\x22:void 0}function getBinStepSignal(model,channel){const fieldDef\x3dmodel.fieldDef(channel);if(fieldDef\x26\x26fieldDef.bin\x26\x26isBinning(fieldDef.bin)){const binSignal\x3dgetBinSignalName(model,\nfieldDef.field,fieldDef.bin);channel\x3dgetSizeChannel$1(channel);const sizeSignal\x3dmodel.getName(channel);return new SignalRefWrapper(()\x3d\x3e{var updatedName\x3dmodel.getSignalName(binSignal);updatedName\x3d\x22(\x22.concat(updatedName,\x22.stop - \x22).concat(updatedName,\x22.start) / \x22).concat(updatedName,\x22.step\x22);return\x22\x22.concat(model.getSignalName(sizeSignal),\x22 / (\x22).concat(updatedName,\x22)\x22)})}}function parseRangeForChannel(channel,model){const specifiedScale\x3dmodel.specifiedScales[channel];var {size}\x3dmodel,scaleType\x3dmodel.getScaleComponent(channel).get(\x22type\x22);\nfor(var property of RANGE_PROPERTIES)if(void 0!\x3d\x3dspecifiedScale[property]){const supportedByScaleType\x3dscaleTypeSupportProperty(scaleType,property),channelIncompatability\x3dchannelScalePropertyIncompatability(channel,property);if(supportedByScaleType)if(channelIncompatability)warn(channelIncompatability);else switch(property){case \x22range\x22:scaleType\x3dspecifiedScale.range;if(isArray(scaleType)){if(channel in POSITION_SCALE_CHANNEL_INDEX)return makeExplicit(scaleType.map(v\x3d\x3e{if(\x22width\x22\x3d\x3d\x3dv||\x22height\x22\x3d\x3d\x3dv){v\x3d\nmodel.getName(v);const getSignalName\x3dmodel.getSignalName.bind(model);return SignalRefWrapper.fromName(getSignalName,v)}return v}))}else if(isObject(scaleType))return makeExplicit({data:model.requestDataName(DataSourceType.Main),field:scaleType.field,sort:{op:\x22min\x22,field:model.vgField(channel)}});return makeExplicit(scaleType);case \x22scheme\x22:return makeExplicit(parseScheme(specifiedScale[property]))}else warn(scalePropertyNotWorkWithScaleType(scaleType,property,channel))}if(\x22x\x22\x3d\x3d\x3dchannel||\x22y\x22\x3d\x3d\x3dchannel)if(property\x3d\n\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22height\x22,size\x3dsize[property],isStep(size)){if(scaleType in DISCRETE_DOMAIN_INDEX)return makeExplicit({step:size.step});warn(stepDropped(property))}const {rangeMin,rangeMax}\x3dspecifiedScale;channel\x3ddefaultRange(channel,model);return(void 0!\x3d\x3drangeMin||void 0!\x3d\x3drangeMax)\x26\x26scaleTypeSupportProperty(scaleType,\x22rangeMin\x22)\x26\x26isArray(channel)\x26\x262\x3d\x3d\x3dchannel.length?makeExplicit([null!\x3d\x3drangeMin\x26\x26void 0!\x3d\x3drangeMin?rangeMin:channel[0],null!\x3d\x3drangeMax\x26\x26void 0!\x3d\x3drangeMax?rangeMax:channel[1]]):\nmakeImplicit(channel)}function parseScheme(scheme){return!isString(scheme)\x26\x26scheme.name?Object.assign({},{scheme:scheme.name},omit(scheme,[\x22name\x22])):{scheme}}function defaultRange(channel,model){const {size,config,mark,encoding}\x3dmodel;var getSignalName\x3dmodel.getSignalName.bind(model),{type}\x3dgetFieldOrDatumDef(encoding[channel]);const scaleType\x3dmodel.getScaleComponent(channel).get(\x22type\x22),{domain,domainMid}\x3dmodel.specifiedScales[channel];switch(channel){case \x22x\x22:case \x22y\x22:if(contains([\x22point\x22,\x22band\x22],\nscaleType))if(\x22x\x22\x3d\x3d\x3dchannel\x26\x26!size.width){if(type\x3dgetViewConfigDiscreteSize(config.view,\x22width\x22),isStep(type))return type}else if(\x22y\x22\x3d\x3d\x3dchannel\x26\x26!size.height\x26\x26(type\x3dgetViewConfigDiscreteSize(config.view,\x22height\x22),isStep(type)))return type;type\x3dgetSizeChannel$1(channel);type\x3dmodel.getName(type);return\x22y\x22\x3d\x3d\x3dchannel\x26\x26scaleType in CONTINUOUS_DOMAIN_INDEX?[SignalRefWrapper.fromName(getSignalName,type),0]:[0,SignalRefWrapper.fromName(getSignalName,type)];case \x22size\x22:return getSignalName\x3dmodel.component.scales[channel].get(\x22zero\x22),\ngetSignalName\x3dsizeRangeMin(mark,getSignalName,config),type\x3dsizeRangeMax(mark,size,model,config),scaleType in CONTINUOUS_TO_DISCRETE_INDEX?interpolateRange(getSignalName,type,defaultContinuousToDiscreteCount(scaleType,config,domain,channel)):[getSignalName,type];case \x22theta\x22:return[0,2*Math.PI];case \x22angle\x22:return[0,360];case \x22radius\x22:return[0,new SignalRefWrapper(()\x3d\x3e{const w\x3dmodel.getSignalName(\x22width\x22),h\x3dmodel.getSignalName(\x22height\x22);return\x22min(\x22.concat(w,\x22,\x22).concat(h,\x22)/2\x22)})];case \x22strokeWidth\x22:return[config.scale.minStrokeWidth,\nconfig.scale.maxStrokeWidth];case \x22strokeDash\x22:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case \x22shape\x22:return\x22symbol\x22;case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:return\x22ordinal\x22\x3d\x3d\x3dscaleType?\x22nominal\x22\x3d\x3d\x3dtype?\x22category\x22:\x22ordinal\x22:void 0!\x3d\x3ddomainMid?\x22diverging\x22:\x22rect\x22\x3d\x3d\x3dmark||\x22geoshape\x22\x3d\x3d\x3dmark?\x22heatmap\x22:\x22ramp\x22;case \x22opacity\x22:case \x22fillOpacity\x22:case \x22strokeOpacity\x22:return[config.scale.minOpacity,config.scale.maxOpacity]}throw Error(\x22Scale range undefined for channel \x22.concat(channel));}function defaultContinuousToDiscreteCount(scaleType,\nconfig,domain,channel){switch(scaleType){case \x22quantile\x22:return config.scale.quantileCount;case \x22quantize\x22:return config.scale.quantizeCount;case \x22threshold\x22:if(void 0!\x3d\x3ddomain\x26\x26isArray(domain))return domain.length+1;warn(\x22Domain for \x22.concat(channel,\x22 is required for threshold scale.\x22));return 3}}function interpolateRange(rangeMin,rangeMax,cardinality){const f\x3d()\x3d\x3e{const rMax\x3dsignalOrStringValue(rangeMax),rMin\x3dsignalOrStringValue(rangeMin),step\x3d\x22(\x22.concat(rMax,\x22 - \x22).concat(rMin,\x22) / (\x22).concat(cardinality,\n\x22 - 1)\x22);return\x22sequence(\x22.concat(rMin,\x22, \x22).concat(rMax,\x22 + \x22).concat(step,\x22, \x22).concat(step,\x22)\x22)};return isSignalRef(rangeMax)?new SignalRefWrapper(f):{signal:f()}}function sizeRangeMin(mark,zero,config){if(zero)return isSignalRef(zero)?{signal:\x22\x22.concat(zero.signal,\x22 ? 0 : \x22).concat(sizeRangeMin(mark,!1,config))}:0;switch(mark){case \x22bar\x22:case \x22tick\x22:return config.scale.minBandSize;case \x22line\x22:case \x22trail\x22:case \x22rule\x22:return config.scale.minStrokeWidth;case \x22text\x22:return config.scale.minFontSize;\ncase \x22point\x22:case \x22square\x22:case \x22circle\x22:return config.scale.minSize}throw Error(incompatibleChannel(\x22size\x22,mark));}function sizeRangeMax(mark,size,model,config){model\x3d{x:getBinStepSignal(model,\x22x\x22),y:getBinStepSignal(model,\x22y\x22)};switch(mark){case \x22bar\x22:case \x22tick\x22:{if(void 0!\x3d\x3dconfig.scale.maxBandSize)return config.scale.maxBandSize;const min\x3dminXYStep(size,model,config.view);return isNumber(min)?min-1:new SignalRefWrapper(()\x3d\x3e\x22\x22.concat(min.signal,\x22 - 1\x22))}case \x22line\x22:case \x22trail\x22:case \x22rule\x22:return config.scale.maxStrokeWidth;\ncase \x22text\x22:return config.scale.maxFontSize;case \x22point\x22:case \x22square\x22:case \x22circle\x22:{if(config.scale.maxSize)return config.scale.maxSize;const pointStep\x3dminXYStep(size,model,config.view);return isNumber(pointStep)?Math.pow(.95*pointStep,2):new SignalRefWrapper(()\x3d\x3e\x22pow(\x22.concat(.95,\x22 * \x22).concat(pointStep.signal,\x22, 2)\x22))}}throw Error(incompatibleChannel(\x22size\x22,mark));}function minXYStep(size,xyStepSignals,viewConfig){const widthStep\x3disStep(size.width)?size.width.step:getViewConfigDiscreteStep(viewConfig,\n\x22width\x22),heightStep\x3disStep(size.height)?size.height.step:getViewConfigDiscreteStep(viewConfig,\x22height\x22);return xyStepSignals.x||xyStepSignals.y?new SignalRefWrapper(()\x3d\x3e\x22min(\x22.concat([xyStepSignals.x?xyStepSignals.x.signal:widthStep,xyStepSignals.y?xyStepSignals.y.signal:heightStep].join(\x22, \x22),\x22)\x22)):Math.min(widthStep,heightStep)}function parseScaleProperty(model,property){if(isUnitModel(model)){{const localScaleComponents\x3dmodel.component.scales,{config,encoding,markDef,specifiedScales}\x3dmodel;for(const channel of keys$jscomp$0(localScaleComponents)){var specifiedScale\x3d\nspecifiedScales[channel];const localScaleCmpt\x3dlocalScaleComponents[channel];var mergedScaleCmpt\x3dmodel.getScaleComponent(channel),fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]),specifiedValue\x3dspecifiedScale[property];const scaleType\x3dmergedScaleCmpt.get(\x22type\x22),scalePadding\x3dmergedScaleCmpt.get(\x22padding\x22);mergedScaleCmpt\x3dmergedScaleCmpt.get(\x22paddingInner\x22);const supportedByScaleType\x3dscaleTypeSupportProperty(scaleType,property),channelIncompatability\x3dchannelScalePropertyIncompatability(channel,\nproperty);void 0!\x3d\x3dspecifiedValue\x26\x26(supportedByScaleType?channelIncompatability\x26\x26warn(channelIncompatability):warn(scalePropertyNotWorkWithScaleType(scaleType,property,channel)));if(supportedByScaleType\x26\x26void 0\x3d\x3d\x3dchannelIncompatability)if(void 0!\x3d\x3dspecifiedValue)switch(specifiedValue\x3dfieldOrDatumDef.timeUnit,fieldOrDatumDef\x3dfieldOrDatumDef.type,property){case \x22domainMax\x22:case \x22domainMin\x22:isDateTime(specifiedScale[property])||\x22temporal\x22\x3d\x3d\x3dfieldOrDatumDef||specifiedValue?localScaleCmpt.set(property,\n{signal:valueExpr(specifiedScale[property],{type:fieldOrDatumDef,timeUnit:specifiedValue})},!0):localScaleCmpt.set(property,specifiedScale[property],!0);break;default:localScaleCmpt.copyKeyFromObject(property,specifiedScale)}else specifiedScale\x3dproperty in scaleRules?scaleRules[property]({model,channel,fieldOrDatumDef,scaleType,scalePadding,scalePaddingInner:mergedScaleCmpt,domain:specifiedScale.domain,markDef,config}):config.scale[property],void 0!\x3d\x3dspecifiedScale\x26\x26localScaleCmpt.set(property,specifiedScale,\n!1)}}}else parseNonUnitScaleProperty(model,property)}function parseScaleRange(model){if(isUnitModel(model)){{const localScaleComponents\x3dmodel.component.scales;for(const channel of SCALE_CHANNELS){const localScaleCmpt\x3dlocalScaleComponents[channel];if(!localScaleCmpt)continue;const rangeWithExplicit\x3dparseRangeForChannel(channel,model);localScaleCmpt.setWithExplicit(\x22range\x22,rangeWithExplicit)}}}else parseNonUnitScaleProperty(model,\x22range\x22)}function parseNonUnitScaleProperty(model,property){const localScaleComponents\x3d\nmodel.component.scales;for(var child$jscomp$0 of model.children)\x22range\x22\x3d\x3d\x3dproperty?parseScaleRange(child$jscomp$0):parseScaleProperty(child$jscomp$0,property);for(const channel of keys$jscomp$0(localScaleComponents)){let valueWithExplicit;for(const child of model.children)if(child$jscomp$0\x3dchild.component.scales[channel])child$jscomp$0\x3dchild$jscomp$0.getWithExplicit(property),valueWithExplicit\x3dmergeValuesWithExplicit(valueWithExplicit,child$jscomp$0,property,\x22scale\x22,tieBreakByComparing((v1,v2)\x3d\x3e{switch(property){case \x22range\x22:if(v1.step\x26\x26\nv2.step)return v1.step-v2.step}return 0}));localScaleComponents[channel].setWithExplicit(property,valueWithExplicit)}}function bins$jscomp$1(model,fieldDef){const bin\x3dfieldDef.bin;if(isBinning(bin)){const binSignal\x3dgetBinSignalName(model,fieldDef.field,bin);return new SignalRefWrapper(()\x3d\x3emodel.getSignalName(binSignal))}if(isBinned(bin)\x26\x26isObject(bin)\x26\x26void 0!\x3d\x3dbin.step)return{step:bin.step}}function defaultType$2(channel,fieldDef,mark){var _fieldDef$axis;switch(fieldDef.type){case \x22nominal\x22:case \x22ordinal\x22:if(isColorChannel(channel)||\n\x22discrete\x22\x3d\x3d\x3drangeType(channel))return\x22shape\x22\x3d\x3d\x3dchannel\x26\x26\x22ordinal\x22\x3d\x3d\x3dfieldDef.type\x26\x26warn(discreteChannelCannotEncode(channel,\x22ordinal\x22)),\x22ordinal\x22;if(channel in POSITION_SCALE_CHANNEL_INDEX){if(contains([\x22rect\x22,\x22bar\x22,\x22image\x22,\x22rule\x22],mark))return\x22band\x22}else if(\x22arc\x22\x3d\x3d\x3dmark\x26\x26channel in POLAR_POSITION_SCALE_CHANNEL_INDEX)return\x22band\x22;return void 0!\x3d\x3dfieldDef.band||isPositionFieldOrDatumDef(fieldDef)\x26\x26(null\x3d\x3d\x3d(_fieldDef$axis\x3dfieldDef.axis)||void 0\x3d\x3d\x3d_fieldDef$axis?0:_fieldDef$axis.tickBand)?\x22band\x22:\x22point\x22;\ncase \x22temporal\x22:if(!isColorChannel(channel)){if(\x22discrete\x22\x3d\x3d\x3drangeType(channel))return warn(discreteChannelCannotEncode(channel,\x22temporal\x22)),\x22ordinal\x22;if(isFieldDef(fieldDef)\x26\x26fieldDef.timeUnit\x26\x26normalizeTimeUnit(fieldDef.timeUnit).utc)return\x22utc\x22}return\x22time\x22;case \x22quantitative\x22:if(isColorChannel(channel)){if(isFieldDef(fieldDef)\x26\x26isBinning(fieldDef.bin))return\x22bin-ordinal\x22}else if(\x22discrete\x22\x3d\x3d\x3drangeType(channel))return warn(discreteChannelCannotEncode(channel,\x22quantitative\x22)),\x22ordinal\x22;return\x22linear\x22;\ncase \x22geojson\x22:return}throw Error(\x27Invalid field type \x22\x27.concat(fieldDef.type,\x27\x22.\x27));}function parseScaleCore(model$jscomp$0){if(isUnitModel(model$jscomp$0))model$jscomp$0.component.scales\x3dparseUnitScaleCore(model$jscomp$0);else{var JSCompiler_temp_const\x3dmodel$jscomp$0.component;{const scaleComponents\x3dmodel$jscomp$0.component.scales\x3d{},scaleTypeWithExplicitIndex\x3d{};var resolve\x3dmodel$jscomp$0.component.resolve;for(const child of model$jscomp$0.children){parseScaleCore(child);for(const channel of keys$jscomp$0(child.component.scales)){var _resolve$scale$channe,\nJSCompiler_temp_const$jscomp$0\x3dresolve.scale;if(null!\x3d\x3d(_resolve$scale$channe\x3dresolve.scale[channel])\x26\x26void 0!\x3d\x3d_resolve$scale$channe)var JSCompiler_temp\x3d_resolve$scale$channe;else{JSCompiler_temp\x3dchannel;var model\x3dmodel$jscomp$0;if(isLayerModel(model)||isFacetModel(model))JSCompiler_temp\x3d\x22shared\x22;else if(isConcatModel(model))JSCompiler_temp\x3dJSCompiler_temp in POSITION_SCALE_CHANNEL_INDEX?\x22independent\x22:\x22shared\x22;else throw Error(\x22invalid model type for resolve\x22);}JSCompiler_temp_const$jscomp$0[channel]\x3d\nJSCompiler_temp;if(\x22shared\x22\x3d\x3d\x3dresolve.scale[channel])if(JSCompiler_temp_const$jscomp$0\x3dscaleTypeWithExplicitIndex[channel],JSCompiler_temp\x3dchild.component.scales[channel].getWithExplicit(\x22type\x22),JSCompiler_temp_const$jscomp$0){{model\x3dSCALE_CATEGORY_INDEX[JSCompiler_temp_const$jscomp$0.value];const scaleCategory2\x3dSCALE_CATEGORY_INDEX[JSCompiler_temp.value];model\x3dmodel\x3d\x3d\x3dscaleCategory2||\x22ordinal-position\x22\x3d\x3d\x3dmodel\x26\x26\x22time\x22\x3d\x3d\x3dscaleCategory2||\x22ordinal-position\x22\x3d\x3d\x3dscaleCategory2\x26\x26\x22time\x22\x3d\x3d\x3dmodel}model?scaleTypeWithExplicitIndex[channel]\x3d\nmergeValuesWithExplicit(JSCompiler_temp_const$jscomp$0,JSCompiler_temp,\x22type\x22,\x22scale\x22,scaleTypeTieBreaker):(resolve.scale[channel]\x3d\x22independent\x22,delete scaleTypeWithExplicitIndex[channel])}else scaleTypeWithExplicitIndex[channel]\x3dJSCompiler_temp}}for(const channel of keys$jscomp$0(scaleTypeWithExplicitIndex)){_resolve$scale$channe\x3dmodel$jscomp$0.scaleName(channel,!0);scaleComponents[channel]\x3dnew ScaleComponent(_resolve$scale$channe,scaleTypeWithExplicitIndex[channel]);for(const child of model$jscomp$0.children)if(resolve\x3d\nchild.component.scales[channel])child.renameScale(resolve.get(\x22name\x22),_resolve$scale$channe),resolve.merged\x3d!0}model$jscomp$0\x3dscaleComponents}JSCompiler_temp_const.scales\x3dmodel$jscomp$0}}function parseUnitScaleCore(model){const {encoding,mark}\x3dmodel;return SCALE_CHANNELS.reduce((scaleComponents,channel)\x3d\x3e{var fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]);if(fieldOrDatumDef\x26\x26mark\x3d\x3d\x3dGEOSHAPE\x26\x26\x22shape\x22\x3d\x3d\x3dchannel\x26\x26\x22geojson\x22\x3d\x3d\x3dfieldOrDatumDef.type)return scaleComponents;let specifiedScale\x3dfieldOrDatumDef\x26\x26\nfieldOrDatumDef.scale;if(fieldOrDatumDef\x26\x26null!\x3d\x3dspecifiedScale\x26\x26!1!\x3d\x3dspecifiedScale){var _specifiedScale;specifiedScale\x3dnull!\x3d\x3d(_specifiedScale\x3dspecifiedScale)\x26\x26void 0!\x3d\x3d_specifiedScale?_specifiedScale:{};var specifiedScale$jscomp$0\x3dspecifiedScale;_specifiedScale\x3ddefaultType$2(channel,fieldOrDatumDef,mark);({type:specifiedScale$jscomp$0}\x3dspecifiedScale$jscomp$0);if(SCALE_CHANNEL_INDEX[channel]){if(void 0!\x3d\x3dspecifiedScale$jscomp$0)if(channelSupportScaleType(channel,specifiedScale$jscomp$0)){var JSCompiler_temp;\nif(JSCompiler_temp\x3disFieldDef(fieldOrDatumDef))JSCompiler_temp\x3dspecifiedScale$jscomp$0,fieldOrDatumDef\x3dfieldOrDatumDef.type,JSCompiler_temp\x3d!(contains([\x22ordinal\x22,\x22nominal\x22],fieldOrDatumDef)?void 0\x3d\x3d\x3dJSCompiler_temp||JSCompiler_temp in DISCRETE_DOMAIN_INDEX:\x22temporal\x22\x3d\x3d\x3dfieldOrDatumDef?contains([ScaleType.TIME,ScaleType.UTC,void 0],JSCompiler_temp):\x22quantitative\x22\x3d\x3d\x3dfieldOrDatumDef?contains([ScaleType.LOG,ScaleType.POW,ScaleType.SQRT,ScaleType.SYMLOG,ScaleType.QUANTILE,ScaleType.QUANTIZE,ScaleType.THRESHOLD,\nScaleType.LINEAR,void 0],JSCompiler_temp):1);JSCompiler_temp?(fieldOrDatumDef\x3d_specifiedScale,fieldOrDatumDef\x3d\x27FieldDef does not work with \x22\x27.concat(specifiedScale$jscomp$0,\x27\x22 scale. We are using \x22\x27).concat(fieldOrDatumDef,\x27\x22 scale instead.\x27),warn(fieldOrDatumDef)):_specifiedScale\x3dspecifiedScale$jscomp$0}else fieldOrDatumDef\x3dspecifiedScale$jscomp$0,specifiedScale$jscomp$0\x3d_specifiedScale,fieldOrDatumDef\x3d\x27Channel \x22\x27.concat(channel,\x27\x22 does not work with \x22\x27).concat(fieldOrDatumDef,\x27\x22 scale. We are using \x22\x27).concat(specifiedScale$jscomp$0,\n\x27\x22 scale instead.\x27),warn(fieldOrDatumDef)}else _specifiedScale\x3dnull;scaleComponents[channel]\x3dnew ScaleComponent(model.scaleName(channel+\x22\x22,!0),{value:_specifiedScale,explicit:specifiedScale.type\x3d\x3d\x3d_specifiedScale})}return scaleComponents},{})}function isUnitModel(model){return\x22unit\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function isFacetModel(model){return\x22facet\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function isConcatModel(model){return\x22concat\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?\nvoid 0:model.type)}function isLayerModel(model){return\x22layer\x22\x3d\x3d\x3d(null\x3d\x3d\x3dmodel||void 0\x3d\x3d\x3dmodel?void 0:model.type)}function makeWalkTree(data){function walkTree(node,dataSource){node instanceof SourceNode\x26\x26!(node.isGenerator||\x22url\x22in node.data)\x26\x26(data.push(dataSource),dataSource\x3d{name:null,source:dataSource.name,transform:[]});if(node instanceof ParseNode)if(node.parent instanceof SourceNode\x26\x26!dataSource.source){var _dataSource$format;dataSource.format\x3dObject.assign({},null!\x3d\x3d(_dataSource$format\x3ddataSource.format)\x26\x26\nvoid 0!\x3d\x3d_dataSource$format?_dataSource$format:{},{parse:node.assembleFormatParse()});dataSource.transform.push(...node.assembleTransforms(!0))}else dataSource.transform.push(...node.assembleTransforms());if(node instanceof FacetNode){dataSource.name||(dataSource.name\x3d\x22data_\x22.concat(datasetIndex++));!dataSource.source||0\x3cdataSource.transform.length?(data.push(dataSource),node.data\x3ddataSource.name):node.data\x3ddataSource.source;for(const d of node.assemble())data.push(d)}else switch((node instanceof\nGraticuleNode||node instanceof SequenceNode||node instanceof FilterInvalidNode||node instanceof FilterNode||node instanceof CalculateNode||node instanceof GeoPointNode||node instanceof GeoJSONNode||node instanceof AggregateNode||node instanceof LookupNode||node instanceof WindowTransformNode||node instanceof JoinAggregateTransformNode||node instanceof FoldTransformNode||node instanceof FlattenTransformNode||node instanceof DensityTransformNode||node instanceof LoessTransformNode||node instanceof QuantileTransformNode||\nnode instanceof RegressionTransformNode||node instanceof IdentifierNode||node instanceof SampleTransformNode||node instanceof PivotTransformNode)\x26\x26dataSource.transform.push(node.assemble()),(node instanceof BinNode||node instanceof TimeUnitNode||node instanceof ImputeNode||node instanceof StackNode)\x26\x26dataSource.transform.push(...node.assemble()),node instanceof OutputNode\x26\x26(dataSource.source\x26\x260\x3d\x3d\x3ddataSource.transform.length?node.setSource(dataSource.source):node.parent instanceof OutputNode?node.setSource(dataSource.name):\n(dataSource.name||(dataSource.name\x3d\x22data_\x22.concat(datasetIndex++)),node.setSource(dataSource.name),1\x3d\x3d\x3dnode.numChildren()\x26\x26(data.push(dataSource),dataSource\x3d{name:null,source:dataSource.name,transform:[]}))),node.numChildren()){case 0:node instanceof OutputNode\x26\x26(!dataSource.source||0\x3cdataSource.transform.length)\x26\x26data.push(dataSource);break;case 1:walkTree(node.children[0],dataSource);break;default:dataSource.name||(dataSource.name\x3d\x22data_\x22.concat(datasetIndex++));_dataSource$format\x3ddataSource.name;\n!dataSource.source||0\x3cdataSource.transform.length?data.push(dataSource):_dataSource$format\x3ddataSource.source;for(const child of node.children)walkTree(child,{name:null,source:_dataSource$format,transform:[]})}}let datasetIndex\x3d0;return walkTree}function assembleFacetData(root){const data\x3d[],walkTree\x3dmakeWalkTree(data);for(const child of root.children)walkTree(child,{source:root.name,name:null,transform:[]});return data}function assembleRootData(dataComponent,datasets){const data\x3d[];var walkTree\x3dmakeWalkTree(data);\nlet sourceIndex\x3d0;for(const root of dataComponent.sources){root.hasName()||(root.dataName\x3d\x22source_\x22.concat(sourceIndex++));const newData\x3droot.assemble();walkTree(root,newData)}for(const d of data)0\x3d\x3d\x3dd.transform.length\x26\x26delete d.transform;walkTree\x3d0;for(const $jscomp$destructuring$var201 of data.entries()){const [i,d]\x3d$jscomp$destructuring$var201;var _d$transform;0!\x3d\x3d(null!\x3d\x3d(_d$transform\x3dd.transform)\x26\x26void 0!\x3d\x3d_d$transform?_d$transform:[]).length||d.source||data.splice(walkTree++,0,data.splice(i,\n1)[0])}for(const d of data)for(const t of null!\x3d\x3d(_d$transform2\x3dd.transform)\x26\x26void 0!\x3d\x3d_d$transform2?_d$transform2:[]){var _d$transform2;\x22lookup\x22\x3d\x3d\x3dt.type\x26\x26(t.from\x3ddataComponent.outputNodes[t.from].getSource())}for(const d of data)d.name in datasets\x26\x26(d.values\x3ddatasets[d.name]);return data}function makeHeaderComponent(model,channel,labels){channel\x3d\x22row\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22;return{labels,sizeSignal:model.child.component.layoutSize.get(channel)?model.child.getSizeSignalRef(channel):void 0,axes:[]}}\nfunction mergeChildAxis(model,channel){var {child}\x3dmodel;if(child.component.axes[channel]){const {layoutHeaders,resolve}\x3dmodel.component;resolve.axis[channel]\x3dparseGuideResolve(resolve,channel);if(\x22shared\x22\x3d\x3d\x3dresolve.axis[channel]){const headerChannel\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22column\x22:\x22row\x22,layoutHeader\x3dlayoutHeaders[headerChannel];for(const axisComponent of child.component.axes[channel]){var _layoutHeader$headerT;channel\x3daxisComponent.get(\x22orient\x22);channel\x3d\x22top\x22\x3d\x3d\x3dchannel||\x22left\x22\x3d\x3d\x3dchannel||isSignalRef(channel)?\n\x22header\x22:\x22footer\x22;layoutHeader[channel]\x3dnull!\x3d\x3d(_layoutHeader$headerT\x3dlayoutHeader[channel])\x26\x26void 0!\x3d\x3d_layoutHeader$headerT?_layoutHeader$headerT:[makeHeaderComponent(model,headerChannel,!1)];(child\x3dassembleAxis(axisComponent,\x22main\x22,model.config,{header:!0}))\x26\x26layoutHeader[channel][0].axes.push(child);axisComponent.mainExtracted\x3d!0}}}}function parseChildrenLayoutSize(model){for(const child of model.children)child.parseLayoutSize()}function parseNonUnitLayoutSizeForChannel(model,layoutSizeType){const sizeType\x3d\ngetSizeTypeFromLayoutSizeType(layoutSizeType),channel\x3dgetPositionScaleChannel(sizeType),resolve\x3dmodel.component.resolve,layoutSizeCmpt\x3dmodel.component.layoutSize;let mergedSize;for(const child of model.children){const childSize\x3dchild.component.layoutSize.getWithExplicit(sizeType),scaleResolve\x3dresolve.scale[channel];if(\x22independent\x22\x3d\x3d\x3dscaleResolve\x26\x26\x22step\x22\x3d\x3d\x3dchildSize.value){mergedSize\x3dvoid 0;break}if(mergedSize){if(\x22independent\x22\x3d\x3d\x3dscaleResolve\x26\x26mergedSize.value!\x3d\x3dchildSize.value){mergedSize\x3dvoid 0;\nbreak}mergedSize\x3dmergeValuesWithExplicit(mergedSize,childSize,sizeType,\x22\x22)}else mergedSize\x3dchildSize}if(mergedSize){for(const child of model.children)model.renameSignal(child.getName(sizeType),model.getName(layoutSizeType)),child.component.layoutSize.set(sizeType,\x22merged\x22,!1);layoutSizeCmpt.setWithExplicit(layoutSizeType,mergedSize)}else layoutSizeCmpt.setWithExplicit(layoutSizeType,{explicit:!1,value:void 0})}function defaultUnitSize(model,sizeType){const config\x3dmodel.config;var scaleComponent\x3dmodel.getScaleComponent(\x22width\x22\x3d\x3d\x3d\nsizeType?\x22x\x22:\x22y\x22);if(scaleComponent)return model\x3dscaleComponent.get(\x22type\x22),scaleComponent\x3dscaleComponent.get(\x22range\x22),model in DISCRETE_DOMAIN_INDEX?(sizeType\x3dgetViewConfigDiscreteSize(config.view,sizeType),isVgRangeStep(scaleComponent)||isStep(sizeType)?\x22step\x22:sizeType):getViewConfigContinuousSize(config.view,sizeType);if(model.hasProjection||\x22arc\x22\x3d\x3d\x3dmodel.mark)return getViewConfigContinuousSize(config.view,sizeType);sizeType\x3dgetViewConfigDiscreteSize(config.view,sizeType);return isStep(sizeType)?\nsizeType.step:sizeType}function facetSortFieldName(fieldDef,sort,opt){return vgField(sort,Object.assign({},{suffix:\x22by_\x22.concat(vgField(fieldDef))},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{}))}function findSource(data,sources){for(const other of sources){var _data$format,_otherData$format,_data$format2,_otherData$format2;sources\x3dother.data;if(data.name\x26\x26other.hasName()\x26\x26data.name!\x3d\x3dother.dataName)continue;const formatMesh\x3dnull\x3d\x3d\x3d(_data$format\x3ddata.format)||void 0\x3d\x3d\x3d_data$format?void 0:_data$format.mesh;var otherFeature\x3d\nnull\x3d\x3d\x3d(_otherData$format\x3dsources.format)||void 0\x3d\x3d\x3d_otherData$format?void 0:_otherData$format.feature;if(formatMesh\x26\x26otherFeature)continue;const formatFeature\x3dnull\x3d\x3d\x3d(_data$format2\x3ddata.format)||void 0\x3d\x3d\x3d_data$format2?void 0:_data$format2.feature;if(!formatFeature\x26\x26!otherFeature||formatFeature\x3d\x3d\x3dotherFeature)if(otherFeature\x3dnull\x3d\x3d\x3d(_otherData$format2\x3dsources.format)||void 0\x3d\x3d\x3d_otherData$format2?void 0:_otherData$format2.mesh,!formatMesh\x26\x26!otherFeature||formatMesh\x3d\x3d\x3dotherFeature)if(\x22values\x22in data\x26\x26\n\x22values\x22in sources){if(deepEqual(data.values,sources.values))return other}else if(\x22url\x22in data\x26\x26\x22url\x22in sources){if(data.url\x3d\x3d\x3dsources.url)return other}else if(isNamedData(data)\x26\x26data.name\x3d\x3d\x3dother.dataName)return other}return null}function parseRoot(model,sources){if(model.data||!model.parent){if(null\x3d\x3d\x3dmodel.data)return model\x3dnew SourceNode({values:[]}),sources.push(model),model;const existingSource\x3dfindSource(model.data,sources);if(existingSource)return isGenerator(model.data)||(existingSource.data.format\x3d\nmergeDeep({},model.data.format,existingSource.data.format)),!existingSource.hasName()\x26\x26model.data.name\x26\x26(existingSource.dataName\x3dmodel.data.name),existingSource;model\x3dnew SourceNode(model.data);sources.push(model);return model}return model.parent.component.data.facetRoot?model.parent.component.data.facetRoot:model.parent.component.data.main}function parseData(model){var _data$format3,_ParseNode$makeExplic,_ParseNode$makeWithAn2,head\x3dparseRoot(model,model.component.data.sources);const {outputNodes,\noutputNodeRefCounts}\x3dmodel.component.data,ancestorParse\x3dmodel.parent?model.parent.component.data.ancestorParse.clone():new AncestorParse,data\x3dmodel.data;isGenerator(data)?(\x22sequence\x22in data?head\x3dnew SequenceNode(head,data.sequence):\x22graticule\x22in data\x26\x26(head\x3dnew GraticuleNode(head,data.graticule)),ancestorParse.parseNothing\x3d!0):null\x3d\x3d\x3d(null\x3d\x3d\x3ddata||void 0\x3d\x3d\x3ddata?void 0:null\x3d\x3d\x3d(_data$format3\x3ddata.format)||void 0\x3d\x3d\x3d_data$format3?void 0:_data$format3.parse)\x26\x26(ancestorParse.parseNothing\x3d!0);head\x3dnull!\x3d\x3d\n(_ParseNode$makeExplic\x3dParseNode.makeExplicit(head,model,ancestorParse))\x26\x26void 0!\x3d\x3d_ParseNode$makeExplic?_ParseNode$makeExplic:head;head\x3dnew IdentifierNode(head);_data$format3\x3dmodel.parent\x26\x26isLayerModel(model.parent);if((isUnitModel(model)||isFacetModel(model))\x26\x26_data$format3){var _BinNode$makeFromEnco;head\x3dnull!\x3d\x3d(_BinNode$makeFromEnco\x3dBinNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_BinNode$makeFromEnco?_BinNode$makeFromEnco:head}if(0\x3cmodel.transforms.length){_BinNode$makeFromEnco\x3d0;for(const t of model.transforms){var transformNode\x3d\n_ParseNode$makeExplic\x3dvoid 0;if(\x22calculate\x22in t)transformNode\x3dhead\x3dnew CalculateNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22filter\x22in t){var _ParseNode$makeWithAn;transformNode\x3dgetImplicitFromFilterTransform(t);transformNode\x3dhead\x3dnull!\x3d\x3d(_ParseNode$makeWithAn\x3dParseNode.makeWithAncestors(head,{},transformNode,ancestorParse))\x26\x26void 0!\x3d\x3d_ParseNode$makeWithAn?_ParseNode$makeWithAn:head;head\x3dnew FilterNode(head,model,t.filter)}else if(\x22bin\x22in t)transformNode\x3dhead\x3dBinNode.makeFromTransform(head,\nt,model),_ParseNode$makeExplic\x3d\x22number\x22;else if(\x22timeUnit\x22in t)_ParseNode$makeExplic\x3d\x22date\x22,void 0\x3d\x3d\x3dancestorParse.getWithExplicit(t.field).value\x26\x26(head\x3dnew ParseNode(head,{[t.field]:_ParseNode$makeExplic}),ancestorParse.set(t.field,_ParseNode$makeExplic,!1)),transformNode\x3dhead\x3dTimeUnitNode.makeFromTransform(head,t);else if(\x22aggregate\x22in t)transformNode\x3dhead\x3dAggregateNode.makeFromTransform(head,t),_ParseNode$makeExplic\x3d\x22number\x22,requiresSelectionId(model)\x26\x26(head\x3dnew IdentifierNode(head));else if(\x22lookup\x22in\nt)transformNode\x3dhead\x3dLookupNode.make(head,model,t,_BinNode$makeFromEnco++),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22window\x22in t)transformNode\x3dhead\x3dnew WindowTransformNode(head,t),_ParseNode$makeExplic\x3d\x22number\x22;else if(\x22joinaggregate\x22in t)transformNode\x3dhead\x3dnew JoinAggregateTransformNode(head,t),_ParseNode$makeExplic\x3d\x22number\x22;else if(\x22stack\x22in t)transformNode\x3dhead\x3dStackNode.makeFromTransform(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22fold\x22in t)transformNode\x3dhead\x3dnew FoldTransformNode(head,t),\n_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22flatten\x22in t)transformNode\x3dhead\x3dnew FlattenTransformNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22pivot\x22in t)transformNode\x3dhead\x3dnew PivotTransformNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22sample\x22in t)head\x3dnew SampleTransformNode(head,t);else if(\x22impute\x22in t)transformNode\x3dhead\x3dImputeNode.makeFromTransform(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22density\x22in t)transformNode\x3dhead\x3dnew DensityTransformNode(head,t),_ParseNode$makeExplic\x3d\n\x22derived\x22;else if(\x22quantile\x22in t)transformNode\x3dhead\x3dnew QuantileTransformNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22regression\x22in t)transformNode\x3dhead\x3dnew RegressionTransformNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else if(\x22loess\x22in t)transformNode\x3dhead\x3dnew LoessTransformNode(head,t),_ParseNode$makeExplic\x3d\x22derived\x22;else{warn(\x22Ignoring an invalid transform: \x22.concat(stringify(t),\x22.\x22));continue}if(transformNode\x26\x26void 0!\x3d\x3d_ParseNode$makeExplic)for(const field of null!\x3d\x3d(_transformNode$produc\x3d\ntransformNode.producedFields())\x26\x26void 0!\x3d\x3d_transformNode$produc?_transformNode$produc:[]){var _transformNode$produc;ancestorParse.set(field,_ParseNode$makeExplic,!1)}}}_ParseNode$makeWithAn\x3d{};if(isUnitModel(model)\x26\x26model.component.selection)for(JSCompiler_inline_result of keys$jscomp$0(model.component.selection)){_transformNode$produc\x3dmodel.component.selection[JSCompiler_inline_result];for(var proj of _transformNode$produc.project.items)!proj.channel\x26\x261\x3caccessPathDepth(proj.field)\x26\x26(_ParseNode$makeWithAn[proj.field]\x3d\n\x22flatten\x22)}var JSCompiler_inline_result\x3d_ParseNode$makeWithAn;proj\x3dgetImplicitFromEncoding(model);head\x3dnull!\x3d\x3d(_ParseNode$makeWithAn2\x3dParseNode.makeWithAncestors(head,{},Object.assign({},JSCompiler_inline_result,proj),ancestorParse))\x26\x26void 0!\x3d\x3d_ParseNode$makeWithAn2?_ParseNode$makeWithAn2:head;isUnitModel(model)\x26\x26(head\x3dGeoJSONNode.parseAll(head,model),head\x3dGeoPointNode.parseAll(head,model));if(isUnitModel(model)||isFacetModel(model)){var _TimeUnitNode$makeFro;if(!_data$format3){var _BinNode$makeFromEnco2;\nhead\x3dnull!\x3d\x3d(_BinNode$makeFromEnco2\x3dBinNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_BinNode$makeFromEnco2?_BinNode$makeFromEnco2:head}head\x3dnull!\x3d\x3d(_TimeUnitNode$makeFro\x3dTimeUnitNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_TimeUnitNode$makeFro?_TimeUnitNode$makeFro:head;head\x3dCalculateNode.parseAllForSortIndex(head,model)}_TimeUnitNode$makeFro\x3dmodel.getDataName(DataSourceType.Raw);_ParseNode$makeWithAn2\x3dnew OutputNode(head,_TimeUnitNode$makeFro,DataSourceType.Raw,outputNodeRefCounts);head\x3doutputNodes[_TimeUnitNode$makeFro]\x3d\n_ParseNode$makeWithAn2;if(isUnitModel(model)){var _ImputeNode$makeFromE,_StackNode$makeFromEn;if(_TimeUnitNode$makeFro\x3dAggregateNode.makeFromEncoding(head,model))head\x3d_TimeUnitNode$makeFro,requiresSelectionId(model)\x26\x26(head\x3dnew IdentifierNode(head));head\x3dnull!\x3d\x3d(_ImputeNode$makeFromE\x3dImputeNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_ImputeNode$makeFromE?_ImputeNode$makeFromE:head;head\x3dnull!\x3d\x3d(_StackNode$makeFromEn\x3dStackNode.makeFromEncoding(head,model))\x26\x26void 0!\x3d\x3d_StackNode$makeFromEn?_StackNode$makeFromEn:\nhead}if(isUnitModel(model)){var _FilterInvalidNode$ma;head\x3dnull!\x3d\x3d(_FilterInvalidNode$ma\x3dFilterInvalidNode.make(head,model))\x26\x26void 0!\x3d\x3d_FilterInvalidNode$ma?_FilterInvalidNode$ma:head}_StackNode$makeFromEn\x3dmodel.getDataName(DataSourceType.Main);_ImputeNode$makeFromE\x3dnew OutputNode(head,_StackNode$makeFromEn,DataSourceType.Main,outputNodeRefCounts);head\x3doutputNodes[_StackNode$makeFromEn]\x3d_ImputeNode$makeFromE;isUnitModel(model)\x26\x26materializeSelections(model,_ImputeNode$makeFromE);_FilterInvalidNode$ma\x3d\nnull;if(isFacetModel(model)){var _makeJoinAggregateFro;_StackNode$makeFromEn\x3dmodel.getName(\x22facet\x22);{_FilterInvalidNode$ma\x3dhead;const {row,column}\x3dmodel.facet;if(row\x26\x26column){_TimeUnitNode$makeFro\x3dnull;for(JSCompiler_inline_result$jscomp$0 of[row,column])if(isSortField(JSCompiler_inline_result$jscomp$0.sort)){const {field,op\x3d\x22min\x22}\x3dJSCompiler_inline_result$jscomp$0.sort;_FilterInvalidNode$ma\x3d_TimeUnitNode$makeFro\x3dnew JoinAggregateTransformNode(_FilterInvalidNode$ma,{joinaggregate:[{op,field,as:facetSortFieldName(JSCompiler_inline_result$jscomp$0,\nJSCompiler_inline_result$jscomp$0.sort,{forAs:!0})}],groupby:[vgField(JSCompiler_inline_result$jscomp$0)]})}var JSCompiler_inline_result$jscomp$0\x3d_TimeUnitNode$makeFro}else JSCompiler_inline_result$jscomp$0\x3dnull}head\x3dnull!\x3d\x3d(_makeJoinAggregateFro\x3dJSCompiler_inline_result$jscomp$0)\x26\x26void 0!\x3d\x3d_makeJoinAggregateFro?_makeJoinAggregateFro:head;_FilterInvalidNode$ma\x3dnew FacetNode(head,model,_StackNode$makeFromEn,_ImputeNode$makeFromE.getSource());outputNodes[_StackNode$makeFromEn]\x3d_FilterInvalidNode$ma}return Object.assign({},\nmodel.component.data,{outputNodes,outputNodeRefCounts,raw:_ParseNode$makeWithAn2,main:_ImputeNode$makeFromE,facetRoot:_FilterInvalidNode$ma,ancestorParse})}function parseUnitAxes(model){return POSITION_SCALE_CHANNELS.reduce((axis,channel)\x3d\x3e{model.component.scales[channel]\x26\x26(axis[channel]\x3d[parseAxis(channel,model)]);return axis},{})}function mergeAxisComponents(mergedAxisCmpts,childAxisCmpts){if(mergedAxisCmpts){if(mergedAxisCmpts.length!\x3d\x3dchildAxisCmpts.length)return;const length\x3dmergedAxisCmpts.length;\nfor(let i\x3d0;i\x3clength;i++){const merged\x3dmergedAxisCmpts[i],child\x3dchildAxisCmpts[i];if(!!merged!\x3d\x3d!!child)return;if(merged\x26\x26child){const mergedOrient\x3dmerged.getWithExplicit(\x22orient\x22),childOrient\x3dchild.getWithExplicit(\x22orient\x22);if(mergedOrient.explicit\x26\x26childOrient.explicit\x26\x26mergedOrient.value!\x3d\x3dchildOrient.value)return;mergedAxisCmpts[i]\x3dmergeAxisComponent(merged,child)}}}else return childAxisCmpts.map(axisComponent\x3d\x3eaxisComponent.clone());return mergedAxisCmpts}function mergeAxisComponent(merged,child){for(const prop of AXIS_COMPONENT_PROPERTIES){const mergedValueWithExplicit\x3d\nmergeValuesWithExplicit(merged.getWithExplicit(prop),child.getWithExplicit(prop),prop,\x22axis\x22,(v1,v2)\x3d\x3e{switch(prop){case \x22title\x22:return mergeTitleComponent(v1,v2);case \x22gridScale\x22:return{explicit:v1.explicit,value:getFirstDefined(v1.value,v2.value)}}return defaultTieBreaker(v1,v2,prop,\x22axis\x22)});merged.setWithExplicit(prop,mergedValueWithExplicit)}return merged}function isExplicit$1(value,property,axis,model,channel){if(\x22disable\x22\x3d\x3d\x3dproperty)return void 0!\x3d\x3daxis;axis\x3daxis||{};switch(property){case \x22titleAngle\x22:case \x22labelAngle\x22:return value\x3d\x3d\x3d\n(isSignalRef(axis.labelAngle)?axis.labelAngle:normalizeAngle(axis.labelAngle));case \x22values\x22:return!!axis.values;case \x22encode\x22:return!!axis.encoding||!!axis.labelAngle;case \x22title\x22:if(value\x3d\x3d\x3dgetFieldDefTitle(model,channel))return!0}return value\x3d\x3d\x3daxis[property]}function parseAxis(channel,model){var _axis,_config,_config$axis,_axis2,_axis$encoding;let axis\x3dmodel.axis(channel);const axisComponent\x3dnew AxisComponent;var fieldOrDatumDef\x3dgetFieldOrDatumDef(model.encoding[channel]);const {mark,config:config$jscomp$0}\x3d\nmodel;var orient\x3d(null\x3d\x3d\x3d(_axis\x3daxis)||void 0\x3d\x3d\x3d_axis?void 0:_axis.orient)||(null\x3d\x3d\x3d(_config\x3dconfig$jscomp$0[\x22x\x22\x3d\x3d\x3dchannel?\x22axisX\x22:\x22axisY\x22])||void 0\x3d\x3d\x3d_config?void 0:_config.orient)||(null\x3d\x3d\x3d(_config$axis\x3dconfig$jscomp$0.axis)||void 0\x3d\x3d\x3d_config$axis?void 0:_config$axis.orient)||(\x22x\x22\x3d\x3d\x3dchannel?\x22bottom\x22:\x22left\x22);_config\x3dmodel.getScaleComponent(channel).get(\x22type\x22);_axis\x3dgetAxisConfigs(channel,_config,orient,model.config);_config$axis\x3dvoid 0!\x3d\x3daxis?!axis:getAxisConfig(\x22disable\x22,config$jscomp$0.style,\nnull\x3d\x3d\x3d(_axis2\x3daxis)||void 0\x3d\x3d\x3d_axis2?void 0:_axis2.style,_axis).configValue;axisComponent.set(\x22disable\x22,_config$axis,void 0!\x3d\x3daxis);if(_config$axis)return axisComponent;axis\x3daxis||{};_axis2\x3dgetLabelAngle(fieldOrDatumDef,axis,channel,config$jscomp$0.style,_axis);fieldOrDatumDef\x3d{fieldOrDatumDef,axis,channel,model,scaleType:_config,orient,labelAngle:_axis2,mark,config:config$jscomp$0};for(const property of AXIS_COMPONENT_PROPERTIES)if(orient\x3dproperty in axisRules?axisRules[property](fieldOrDatumDef):\nAXIS_PROPERTIES_INDEX[property]?axis[property]:void 0,_axis2\x3dvoid 0!\x3d\x3dorient,_config\x3disExplicit$1(orient,property,axis,model,channel),_axis2\x26\x26_config)axisComponent.set(property,orient,_config);else{const {configValue,configFrom}\x3dAXIS_PROPERTIES_INDEX[property]\x26\x26\x22values\x22!\x3d\x3dproperty?getAxisConfig(property,config$jscomp$0.style,axis.style,_axis):{};_config$axis\x3dvoid 0!\x3d\x3dconfigValue;_axis2\x26\x26!_config$axis?axisComponent.set(property,orient,_config):(\x22vgAxisConfig\x22!\x3d\x3dconfigFrom||propsToAlwaysIncludeConfig.has(property)\x26\x26\n_config$axis||isConditionalAxisValue(configValue)||isSignalRef(configValue))\x26\x26axisComponent.set(property,configValue,!1)}const axisEncoding\x3dnull!\x3d\x3d(_axis$encoding\x3daxis.encoding)\x26\x26void 0!\x3d\x3d_axis$encoding?_axis$encoding:{};_axis$encoding\x3dAXIS_PARTS.reduce((e,part)\x3d\x3e{var _axisEncoding$part;if(!axisComponent.hasAxisPart(part))return e;var axisEncodingPart\x3dguideEncodeEntry(null!\x3d\x3d(_axisEncoding$part\x3daxisEncoding[part])\x26\x26void 0!\x3d\x3d_axisEncoding$part?_axisEncoding$part:{},model);if(\x22labels\x22\x3d\x3d\x3dpart){{var _getFieldOrDatumDef;\nconst {encoding,config}\x3dmodel;_axisEncoding$part\x3dnull!\x3d\x3d(_getFieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]))\x26\x26void 0!\x3d\x3d_getFieldOrDatumDef?_getFieldOrDatumDef:getFieldOrDatumDef(encoding[getSecondaryRangeChannel(channel)]);_getFieldOrDatumDef\x3dmodel.axis(channel)||{};const {format,formatType}\x3d_getFieldOrDatumDef;axisEncodingPart\x3disCustomFormatType(formatType)?Object.assign({},{text:formatCustomType({fieldOrDatumDef:_axisEncoding$part,field:\x22datum.value\x22,format,formatType,config})},axisEncodingPart):\naxisEncodingPart}}void 0\x3d\x3d\x3daxisEncodingPart||isEmpty(axisEncodingPart)||(e[part]\x3d{update:axisEncodingPart});return e},{});isEmpty(_axis$encoding)||axisComponent.set(\x22encode\x22,_axis$encoding,!!axis.encoding||void 0!\x3d\x3daxis.labelAngle);return axisComponent}function orient(mark,encoding,specifiedOrient){switch(mark){case POINT:case CIRCLE:case SQUARE:case TEXT$1:case RECT:case IMAGE:return}const {x,y,x2,y2}\x3dencoding;switch(mark){case BAR:if(isFieldDef(x)\x26\x26(isBinned(x.bin)||isFieldDef(y)\x26\x26y.aggregate\x26\x26\n!x.aggregate))break;if(isFieldDef(y)\x26\x26(isBinned(y.bin)||isFieldDef(x)\x26\x26x.aggregate\x26\x26!y.aggregate))return\x22horizontal\x22;if(y2||x2){if(specifiedOrient)return specifiedOrient;if(!x2\x26\x26(isFieldDef(x)\x26\x26\x22quantitative\x22\x3d\x3d\x3dx.type\x26\x26!isBinning(x.bin)||isNumericDataDef(x)))return\x22horizontal\x22;if(!y2\x26\x26(isFieldDef(y)\x26\x26\x22quantitative\x22\x3d\x3d\x3dy.type\x26\x26!isBinning(y.bin)||isNumericDataDef(y)))break}case RULE:if(!(!x2||isFieldDef(x)\x26\x26isBinned(x.bin)||!y2||isFieldDef(y)\x26\x26isBinned(y.bin)))return;case AREA:if(y2){if(isFieldDef(y)\x26\x26\nisBinned(y.bin))return\x22horizontal\x22;break}else if(x2)if(isFieldDef(x)\x26\x26isBinned(x.bin))break;else return\x22horizontal\x22;else if(mark\x3d\x3d\x3dRULE)if(x\x26\x26!y)break;else if(y\x26\x26!x)return\x22horizontal\x22;case LINE:case TICK:encoding\x3disContinuousFieldOrDatumDef(x);var yIsContinuous\x3disContinuousFieldOrDatumDef(y);if(encoding\x26\x26!yIsContinuous)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\x22vertical\x22;if(!encoding\x26\x26yIsContinuous)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(encoding\x26\x26yIsContinuous){encoding\x3d\x22temporal\x22\x3d\x3d\x3dx.type;yIsContinuous\x3d\n\x22temporal\x22\x3d\x3d\x3dy.type;if(encoding\x26\x26!yIsContinuous)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(!encoding\x26\x26yIsContinuous)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\x22vertical\x22;if(!x.aggregate\x26\x26y.aggregate)return\x22tick\x22!\x3d\x3dmark?\x22vertical\x22:\x22horizontal\x22;if(x.aggregate\x26\x26!y.aggregate)return\x22tick\x22!\x3d\x3dmark?\x22horizontal\x22:\x22vertical\x22;if(specifiedOrient)return specifiedOrient}else{if(specifiedOrient)return specifiedOrient;return}}return\x22vertical\x22}function encodeEntry(model,fixedShape){return Object.assign({},baseEncodeEntry(model,\n{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22include\x22,orient:\x22ignore\x22,theta:\x22ignore\x22}),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22}),nonPosition(\x22size\x22,model),nonPosition(\x22angle\x22,model),fixedShape?{shape:{value:fixedShape}}:nonPosition(\x22shape\x22,model))}function align$jscomp$0(markDef,encoding,config){if(void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22align\x22,markDef,config))return\x22center\x22}function baseline(markDef,encoding,config){if(void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22baseline\x22,\nmarkDef,config))return\x22middle\x22}function defaultSize(model){var _getMarkPropOrConfig;const {config,markDef}\x3dmodel;var {orient}\x3dmarkDef;const vgSizeChannel\x3d\x22horizontal\x22\x3d\x3d\x3dorient?\x22width\x22:\x22height\x22;model\x3dmodel.getScaleComponent(\x22horizontal\x22\x3d\x3d\x3dorient?\x22x\x22:\x22y\x22);orient\x3dnull!\x3d\x3d(_getMarkPropOrConfig\x3dgetMarkPropOrConfig(\x22size\x22,markDef,config,{vgChannel:vgSizeChannel}))\x26\x26void 0!\x3d\x3d_getMarkPropOrConfig?_getMarkPropOrConfig:config.tick.bandSize;return void 0!\x3d\x3dorient?orient:(_getMarkPropOrConfig\x3dmodel?model.get(\x22range\x22):\nvoid 0)\x26\x26isVgRangeStep(_getMarkPropOrConfig)\x26\x26isNumber(_getMarkPropOrConfig.step)?3*_getMarkPropOrConfig.step/4:3*getViewConfigDiscreteStep(config.view,vgSizeChannel)/4}function parseMarkGroups(model){if(contains([LINE,AREA,TRAIL],model.mark)){var details\x3dpathGroupingFields(model.mark,model.encoding);if(0\x3cdetails.length)return getPathGroups(model,details)}else if(contains([BAR],model.mark)\x26\x26(details\x3dVG_CORNERRADIUS_CHANNELS.some(prop\x3d\x3egetMarkPropOrConfig(prop,model.markDef,model.config)),model.stack\x26\x26\n!model.fieldDef(\x22size\x22)\x26\x26details))return getGroupsForStackedBarWithCornerRadius(model);return getMarkGroup(model)}function getPathGroups(model,details){return[{name:model.getName(\x22pathgroup\x22),type:\x22group\x22,from:{facet:{name:\x22faceted_path_\x22+model.requestDataName(DataSourceType.Main),data:model.requestDataName(DataSourceType.Main),groupby:details}},encode:{update:{width:{field:{group:\x22width\x22}},height:{field:{group:\x22height\x22}}}},marks:getMarkGroup(model,{fromPrefix:\x22faceted_path_\x22})}]}function getGroupsForStackedBarWithCornerRadius(model){const [mark]\x3d\ngetMarkGroup(model,{fromPrefix:\x22stack_group_\x22}),fieldScale\x3dmodel.scaleName(model.stack.fieldChannel),stackField\x3dopt\x3d\x3e{opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;return model.vgField(model.stack.fieldChannel,opt)};var stackFieldGroup\x3d(func,expr)\x3d\x3e{expr\x3d[stackField({prefix:\x22min\x22,suffix:\x22start\x22,expr}),stackField({prefix:\x22max\x22,suffix:\x22start\x22,expr}),stackField({prefix:\x22min\x22,suffix:\x22end\x22,expr}),stackField({prefix:\x22max\x22,suffix:\x22end\x22,expr})];return\x22\x22.concat(func,\x22(\x22).concat(expr.map(field\x3d\x3e\x22scale(\x27\x22.concat(fieldScale,\x22\x27,\x22).concat(field,\n\x22)\x22)).join(\x22,\x22),\x22)\x22)};let innerGroupUpdate;\x22x\x22\x3d\x3d\x3dmodel.stack.fieldChannel?(stackFieldGroup\x3dObject.assign({},pick(mark.encode.update,[\x22y\x22,\x22yc\x22,\x22y2\x22,\x22height\x22,...VG_CORNERRADIUS_CHANNELS]),{x:{signal:stackFieldGroup(\x22min\x22,\x22datum\x22)},x2:{signal:stackFieldGroup(\x22max\x22,\x22datum\x22)},clip:{value:!0}}),innerGroupUpdate\x3d{x:{field:{group:\x22x\x22},mult:-1},height:{field:{group:\x22height\x22}}},mark.encode.update\x3dObject.assign({},omit(mark.encode.update,[\x22y\x22,\x22yc\x22,\x22y2\x22]),{height:{field:{group:\x22height\x22}}})):(stackFieldGroup\x3d\nObject.assign({},pick(mark.encode.update,[\x22x\x22,\x22xc\x22,\x22x2\x22,\x22width\x22]),{y:{signal:stackFieldGroup(\x22min\x22,\x22datum\x22)},y2:{signal:stackFieldGroup(\x22max\x22,\x22datum\x22)},clip:{value:!0}}),innerGroupUpdate\x3d{y:{field:{group:\x22y\x22},mult:-1},width:{field:{group:\x22width\x22}}},mark.encode.update\x3dObject.assign({},omit(mark.encode.update,[\x22x\x22,\x22xc\x22,\x22x2\x22]),{width:{field:{group:\x22width\x22}}}));for(var key of VG_CORNERRADIUS_CHANNELS){var configValue$jscomp$0\x3dgetMarkConfig(key,model.markDef,model.config);mark.encode.update[key]?(stackFieldGroup[key]\x3d\nmark.encode.update[key],delete mark.encode.update[key]):configValue$jscomp$0\x26\x26(stackFieldGroup[key]\x3dsignalOrValueRef(configValue$jscomp$0));configValue$jscomp$0\x26\x26(mark.encode.update[key]\x3d{value:0})}key\x3dmodel.fieldDef(model.stack.groupbyChannel);configValue$jscomp$0\x3dvgField(key)?[vgField(key)]:[];((null\x3d\x3d\x3dkey||void 0\x3d\x3d\x3dkey?0:key.bin)||(null\x3d\x3d\x3dkey||void 0\x3d\x3d\x3dkey?0:key.timeUnit))\x26\x26configValue$jscomp$0.push(vgField(key,{binSuffix:\x22end\x22}));stackFieldGroup\x3d\x22stroke strokeWidth strokeJoin strokeCap strokeDash strokeDashOffset strokeMiterLimit strokeOpacity\x22.split(\x22 \x22).reduce((encode,\nprop)\x3d\x3e{if(mark.encode.update[prop])return Object.assign({},encode,{[prop]:mark.encode.update[prop]});{const configValue\x3dgetMarkConfig(prop,model.markDef,model.config);return void 0!\x3d\x3dconfigValue?Object.assign({},encode,{[prop]:signalOrValueRef(configValue)}):encode}},stackFieldGroup);stackFieldGroup.stroke\x26\x26(stackFieldGroup.strokeForeground\x3d{value:!0},stackFieldGroup.strokeOffset\x3d{value:0});return[{type:\x22group\x22,from:{facet:{data:model.requestDataName(DataSourceType.Main),name:\x22stack_group_\x22+model.requestDataName(DataSourceType.Main),\ngroupby:configValue$jscomp$0,aggregate:{fields:[stackField({suffix:\x22start\x22}),stackField({suffix:\x22start\x22}),stackField({suffix:\x22end\x22}),stackField({suffix:\x22end\x22})],ops:[\x22min\x22,\x22max\x22,\x22min\x22,\x22max\x22]}}},encode:{update:stackFieldGroup},marks:[{type:\x22group\x22,encode:{update:innerGroupUpdate},marks:[mark]}]}]}function getSort$1(model){const {encoding,stack,mark,markDef,config}\x3dmodel;var order\x3dencoding.order;if(!(!isArray(order)\x26\x26isValueDef(order)\x26\x26isNullOrFalse(order.value)||!order\x26\x26isNullOrFalse(getMarkPropOrConfig(\x22order\x22,\nmarkDef,config)))){if((isArray(order)||isFieldDef(order))\x26\x26!stack)return sortParams(order,{expr:\x22datum\x22});if(isPathMark(mark)){const dimensionChannel\x3d\x22horizontal\x22\x3d\x3d\x3dmarkDef.orient?\x22y\x22:\x22x\x22,dimensionChannelDef\x3dencoding[dimensionChannel];if(isFieldDef(dimensionChannelDef)){order\x3ddimensionChannelDef.sort;if(isArray(order))return{field:vgField(dimensionChannelDef,{prefix:dimensionChannel,suffix:\x22sort_index\x22,expr:\x22datum\x22})};if(isSortField(order))return{field:vgField({aggregate:isAggregate(model.encoding)?\norder.op:void 0,field:order.field},{expr:\x22datum\x22})};if(order\x26\x26order.encoding)return model\x3dmodel.fieldDef(order.encoding),{field:vgField(model,{expr:\x22datum\x22}),order:order.order};if(null!\x3d\x3dorder)return{field:vgField(dimensionChannelDef,{binSuffix:model.stack\x26\x26model.stack.impute?\x22mid\x22:void 0,expr:\x22datum\x22})}}}}}function getMarkGroup(model,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{fromPrefix:\x22\x22}:opt;const {mark,markDef,encoding,config}\x3dmodel;var JSCompiler_temp_const\x3dmarkDef.clip;var JSCompiler_inline_result\x3dmodel.getScaleComponent(\x22x\x22);\nvar yScale\x3dmodel.getScaleComponent(\x22y\x22);JSCompiler_inline_result\x3dJSCompiler_inline_result\x26\x26JSCompiler_inline_result.get(\x22selectionExtent\x22)||yScale\x26\x26yScale.get(\x22selectionExtent\x22)?!0:void 0;yScale\x3d(yScale\x3dmodel.component.projection)\x26\x26!yScale.isFit?!0:void 0;JSCompiler_temp_const\x3dgetFirstDefined(JSCompiler_temp_const,JSCompiler_inline_result,yScale);JSCompiler_inline_result\x3dgetStyles(markDef);yScale\x3dencoding.key;const sort\x3dgetSort$1(model);var JSCompiler_inline_result$jscomp$0;if(model.component.selection){for(var parentCount\x3d\nJSCompiler_inline_result$jscomp$0\x3dkeys$jscomp$0(model.component.selection).length,parent\x3dmodel.parent;parent\x26\x260\x3d\x3d\x3dparentCount;)parentCount\x3dkeys$jscomp$0(parent.component.selection).length,parent\x3dparent.parent;JSCompiler_inline_result$jscomp$0\x3dparentCount?{interactive:0\x3cJSCompiler_inline_result$jscomp$0||!!model.encoding.tooltip}:null}else JSCompiler_inline_result$jscomp$0\x3dnull;parentCount\x3dgetMarkPropOrConfig(\x22aria\x22,markDef,config);parent\x3dmarkCompiler[mark].postEncodingTransform?markCompiler[mark].postEncodingTransform(model):\nnull;return[Object.assign({},{name:model.getName(\x22marks\x22),type:markCompiler[mark].vgMark},JSCompiler_temp_const?{clip:!0}:{},JSCompiler_inline_result?{style:JSCompiler_inline_result}:{},yScale?{key:yScale.field}:{},sort?{sort}:{},JSCompiler_inline_result$jscomp$0?JSCompiler_inline_result$jscomp$0:{},!1\x3d\x3d\x3dparentCount?{aria:parentCount}:{},{from:{data:opt.fromPrefix+model.requestDataName(DataSourceType.Main)},encode:{update:markCompiler[mark].encodeEntry(model)}},parent?{transform:parent}:{})]}function buildModel(spec,\nparent,parentGivenName,unitSize,config){if(\x22facet\x22in spec)return new FacetModel(spec,parent,parentGivenName,config);if(\x22layer\x22in spec)return new LayerModel(spec,parent,parentGivenName,unitSize,config);if(isUnitSpec(spec))return new UnitModel(spec,parent,parentGivenName,unitSize,config);if(\x22vconcat\x22in spec||\x22hconcat\x22in spec||\x22concat\x22in spec)return new ConcatModel(spec,parent,parentGivenName,config);throw Error(invalidSpec(spec));}function assembleTopLevelModel(model,topLevelProperties,datasets,usermeta){datasets\x3d\nvoid 0\x3d\x3d\x3ddatasets?{}:datasets;const vgConfig\x3dmodel.config?stripAndRedirectConfig(model.config):void 0;datasets\x3d[].concat(model.assembleSelectionData([]),assembleRootData(model.component.data,datasets));const projections\x3dmodel.assembleProjections(),title\x3dmodel.assembleTitle(),style\x3dmodel.assembleGroupStyle(),encodeEntry\x3dmodel.assembleGroupEncodeEntry(!0);let layoutSignals\x3dmodel.assembleLayoutSignals();layoutSignals\x3dlayoutSignals.filter(signal\x3d\x3e\x22width\x22!\x3d\x3dsignal.name\x26\x26\x22height\x22!\x3d\x3dsignal.name||void 0\x3d\x3d\x3d\nsignal.value?!0:(topLevelProperties[signal.name]\x3d+signal.value,!1));var $jscomp$destructuring$var207\x3dObject.assign({},topLevelProperties);const params\x3dtopLevelProperties.params;$jscomp$destructuring$var207\x3d(delete $jscomp$destructuring$var207.params,$jscomp$destructuring$var207);return Object.assign({},{$schema:\x22https://vega.github.io/schema/vega/v5.json\x22},model.description?{description:model.description}:{},$jscomp$destructuring$var207,title?{title}:{},style?{style}:{},encodeEntry?{encode:{update:encodeEntry}}:\n{},{data:datasets},0\x3cprojections.length?{projections}:{},model.assembleGroup([...layoutSignals,...model.assembleSelectionTopLevelSignals([]),...assembleParameterSignals(params)]),vgConfig?{config:vgConfig}:{},usermeta?{usermeta}:{})}const get1\x3dfield\x3d\x3efunction(obj){return obj[field]},getN\x3dpath\x3d\x3e{const len\x3dpath.length;return function(obj){for(let i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}};(function(field,name,opt){const path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:field;return accessor$jscomp$0((opt\x26\x26\nopt.get||getter)(path),[field],name||field)})(\x22id\x22);const identity\x3daccessor$jscomp$0(_\x3d\x3e_,[],\x22identity\x22);accessor$jscomp$0(()\x3d\x3e0,[],\x22zero\x22);accessor$jscomp$0(()\x3d\x3e1,[],\x22one\x22);accessor$jscomp$0(()\x3d\x3e!0,[],\x22true\x22);accessor$jscomp$0(()\x3d\x3e!1,[],\x22false\x22);var isArray\x3dArray.isArray;const hop\x3dObject.prototype.hasOwnProperty;Array.prototype.flat||Object.defineProperty(Array.prototype,\x22flat\x22,{configurable:!0,value:function r(JSCompiler_OptimizeArgumentsArray_p4){var t\x3disNaN(JSCompiler_OptimizeArgumentsArray_p4)?\n1:Number(JSCompiler_OptimizeArgumentsArray_p4);return t?Array.prototype.reduce.call(this,function(a,e){return Array.isArray(e)?a.push.apply(a,r.call(e,t-1)):a.push(e),a},[]):Array.prototype.slice.call(this)},writable:!0});Array.prototype.flatMap||Object.defineProperty(Array.prototype,\x22flatMap\x22,{configurable:!0,value:function(r){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var fastJsonStableStringify\x3dfunction(data,opts){opts||(opts\x3d{});\x22function\x22\x3d\x3d\x3dtypeof opts\x26\x26(opts\x3d{cmp:opts});\nvar cycles\x3d\x22boolean\x22\x3d\x3d\x3dtypeof opts.cycles?opts.cycles:!1,cmp\x3dopts.cmp\x26\x26function(f){return function(node){return function(a,b){return f({key:a,value:node[a]},{key:b,value:node[b]})}}}(opts.cmp),seen\x3d[];return function stringify(node){node\x26\x26node.toJSON\x26\x26\x22function\x22\x3d\x3d\x3dtypeof node.toJSON\x26\x26(node\x3dnode.toJSON());if(void 0!\x3d\x3dnode){if(\x22number\x22\x3d\x3dtypeof node)return isFinite(node)?\x22\x22+node:\x22null\x22;if(\x22object\x22!\x3d\x3dtypeof node)return JSON.stringify(node);var i;if(Array.isArray(node)){var out\x3d\x22[\x22;for(i\x3d0;i\x3cnode.length;i++)i\x26\x26\n(out+\x3d\x22,\x22),out+\x3dstringify(node[i])||\x22null\x22;return out+\x22]\x22}if(null\x3d\x3d\x3dnode)return\x22null\x22;if(-1!\x3d\x3dseen.indexOf(node)){if(cycles)return JSON.stringify(\x22__cycle__\x22);throw new TypeError(\x22Converting circular structure to JSON\x22);}var seenIndex\x3dseen.push(node)-1,keys\x3dObject.keys(node).sort(cmp\x26\x26cmp(node));out\x3d\x22\x22;for(i\x3d0;i\x3ckeys.length;i++){var key\x3dkeys[i],value\x3dstringify(node[key]);value\x26\x26(out\x26\x26(out+\x3d\x22,\x22),out+\x3dJSON.stringify(key)+\x22:\x22+value)}seen.splice(seenIndex,1);return\x22{\x22+out+\x22}\x22}}(data)};const deepEqual\x3d\nfunction equal(a,b){if(a\x3d\x3d\x3db)return!0;if(a\x26\x26b\x26\x26\x22object\x22\x3d\x3dtypeof a\x26\x26\x22object\x22\x3d\x3dtypeof b){if(a.constructor!\x3d\x3db.constructor)return!1;var i;if(Array.isArray(a)){var length\x3da.length;if(length!\x3db.length)return!1;for(i\x3dlength;0!\x3d\x3di--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor\x3d\x3d\x3dRegExp)return a.source\x3d\x3d\x3db.source\x26\x26a.flags\x3d\x3d\x3db.flags;if(a.valueOf!\x3d\x3dObject.prototype.valueOf)return a.valueOf()\x3d\x3d\x3db.valueOf();if(a.toString!\x3d\x3dObject.prototype.toString)return a.toString()\x3d\x3d\x3db.toString();var keys\x3dObject.keys(a);\nlength\x3dkeys.length;if(length!\x3d\x3dObject.keys(b).length)return!1;for(i\x3dlength;0!\x3d\x3di--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i\x3dlength;0!\x3d\x3di--;)if(length\x3dkeys[i],!equal(a[length],b[length]))return!1;return!0}return a!\x3d\x3da\x26\x26b!\x3d\x3db},duplicate\x3dfunction(fn,basedir,module){return module\x3d{path:basedir,exports:{},require:function(path,base){throw Error(\x22Dynamic requires are not currently supported by @rollup/plugin-commonjs\x22);}},fn(module,module.exports),module.exports}(function(module){var clone$jscomp$0\x3d\nfunction(){function _instanceof(obj,type){return null!\x3dtype\x26\x26obj instanceof type}function clone(parent$jscomp$0,circular,depth$jscomp$0,prototype,includeNonEnumerable){function _clone(parent,depth){if(null\x3d\x3d\x3dparent)return null;if(0\x3d\x3d\x3ddepth||\x22object\x22!\x3dtypeof parent)return parent;if(_instanceof(parent,nativeMap))var child\x3dnew nativeMap;else if(_instanceof(parent,nativeSet))child\x3dnew nativeSet;else if(_instanceof(parent,nativePromise))child\x3dnew nativePromise(function(resolve,reject){parent.then(function(value){resolve(_clone(value,\ndepth-1))},function(err){reject(_clone(err,depth-1))})});else if(clone.__isArray(parent))child\x3d[];else if(clone.__isRegExp(parent))child\x3dnew RegExp(parent.source,__getRegExpFlags(parent)),parent.lastIndex\x26\x26(child.lastIndex\x3dparent.lastIndex);else if(clone.__isDate(parent))child\x3dnew Date(parent.getTime());else{if(useBuffer\x26\x26Buffer.isBuffer(parent))return child\x3dBuffer.allocUnsafe?Buffer.allocUnsafe(parent.length):new Buffer(parent.length),parent.copy(child),child;if(_instanceof(parent,Error))child\x3dObject.create(parent);\nelse if(\x22undefined\x22\x3d\x3dtypeof prototype){var proto\x3dObject.getPrototypeOf(parent);child\x3dObject.create(proto)}else child\x3dObject.create(prototype),proto\x3dprototype}if(circular){var index\x3dallParents.indexOf(parent);if(-1!\x3dindex)return allChildren[index];allParents.push(parent);allChildren.push(child)}_instanceof(parent,nativeMap)\x26\x26parent.forEach(function(value,key){key\x3d_clone(key,depth-1);value\x3d_clone(value,depth-1);child.set(key,value)});_instanceof(parent,nativeSet)\x26\x26parent.forEach(function(value){value\x3d\n_clone(value,depth-1);child.add(value)});for(var i in parent){var attrs;proto\x26\x26(attrs\x3dObject.getOwnPropertyDescriptor(proto,i));attrs\x26\x26null\x3d\x3dattrs.set||(child[i]\x3d_clone(parent[i],depth-1))}if(Object.getOwnPropertySymbols)for(index\x3dObject.getOwnPropertySymbols(parent),i\x3d0;i\x3cindex.length;i++)if(attrs\x3dindex[i],proto\x3dObject.getOwnPropertyDescriptor(parent,attrs),!proto||proto.enumerable||includeNonEnumerable)child[attrs]\x3d_clone(parent[attrs],depth-1),proto.enumerable||Object.defineProperty(child,attrs,\n{enumerable:!1});if(includeNonEnumerable)for(index\x3dObject.getOwnPropertyNames(parent),i\x3d0;i\x3cindex.length;i++)attrs\x3dindex[i],proto\x3dObject.getOwnPropertyDescriptor(parent,attrs),proto\x26\x26proto.enumerable||(child[attrs]\x3d_clone(parent[attrs],depth-1),Object.defineProperty(child,attrs,{enumerable:!1}));return child}\x22object\x22\x3d\x3d\x3dtypeof circular\x26\x26(depth$jscomp$0\x3dcircular.depth,prototype\x3dcircular.prototype,includeNonEnumerable\x3dcircular.includeNonEnumerable,circular\x3dcircular.circular);var allParents\x3d[],allChildren\x3d\n[],useBuffer\x3d\x22undefined\x22!\x3dtypeof Buffer;\x22undefined\x22\x3d\x3dtypeof circular\x26\x26(circular\x3d!0);\x22undefined\x22\x3d\x3dtypeof depth$jscomp$0\x26\x26(depth$jscomp$0\x3dInfinity);return _clone(parent$jscomp$0,depth$jscomp$0)}function __objToStr(o){return Object.prototype.toString.call(o)}function __getRegExpFlags(re){var flags\x3d\x22\x22;re.global\x26\x26(flags+\x3d\x22g\x22);re.ignoreCase\x26\x26(flags+\x3d\x22i\x22);re.multiline\x26\x26(flags+\x3d\x22m\x22);return flags}try{var nativeMap\x3dMap}catch(_){nativeMap\x3dfunction(){}}try{var nativeSet\x3dSet}catch(_){nativeSet\x3dfunction(){}}try{var nativePromise\x3d\nPromise}catch(_){nativePromise\x3dfunction(){}}clone.clonePrototype\x3dfunction(parent){if(null\x3d\x3d\x3dparent)return null;var c\x3dfunction(){};c.prototype\x3dparent;return new c};clone.__objToStr\x3d__objToStr;clone.__isDate\x3dfunction(o){return\x22object\x22\x3d\x3d\x3dtypeof o\x26\x26\x22[object Date]\x22\x3d\x3d\x3d__objToStr(o)};clone.__isArray\x3dfunction(o){return\x22object\x22\x3d\x3d\x3dtypeof o\x26\x26\x22[object Array]\x22\x3d\x3d\x3d__objToStr(o)};clone.__isRegExp\x3dfunction(o){return\x22object\x22\x3d\x3d\x3dtypeof o\x26\x26\x22[object RegExp]\x22\x3d\x3d\x3d__objToStr(o)};clone.__getRegExpFlags\x3d__getRegExpFlags;return clone}();\nmodule.exports\x26\x26(module.exports\x3dclone$jscomp$0)});Set.prototype.toJSON\x3dfunction(){return\x22Set(\x22.concat([...this].map(x\x3d\x3efastJsonStableStringify(x)).join(\x22,\x22),\x22)\x22)};const stringify\x3dfastJsonStableStringify,keys$jscomp$0\x3dObject.keys,vals\x3dObject.values,entries\x3dObject.entries;let idCounter\x3d42;const CONDITIONAL_AXIS_PROP_INDEX\x3d{labelAlign:{part:\x22labels\x22,vgProp:\x22align\x22},labelBaseline:{part:\x22labels\x22,vgProp:\x22baseline\x22},labelColor:{part:\x22labels\x22,vgProp:\x22fill\x22},labelFont:{part:\x22labels\x22,vgProp:\x22font\x22},labelFontSize:{part:\x22labels\x22,\nvgProp:\x22fontSize\x22},labelFontStyle:{part:\x22labels\x22,vgProp:\x22fontStyle\x22},labelFontWeight:{part:\x22labels\x22,vgProp:\x22fontWeight\x22},labelOpacity:{part:\x22labels\x22,vgProp:\x22opacity\x22},labelOffset:null,labelPadding:null,gridColor:{part:\x22grid\x22,vgProp:\x22stroke\x22},gridDash:{part:\x22grid\x22,vgProp:\x22strokeDash\x22},gridDashOffset:{part:\x22grid\x22,vgProp:\x22strokeDashOffset\x22},gridOpacity:{part:\x22grid\x22,vgProp:\x22opacity\x22},gridWidth:{part:\x22grid\x22,vgProp:\x22strokeWidth\x22},tickColor:{part:\x22ticks\x22,vgProp:\x22stroke\x22},tickDash:{part:\x22ticks\x22,vgProp:\x22strokeDash\x22},\ntickDashOffset:{part:\x22ticks\x22,vgProp:\x22strokeDashOffset\x22},tickOpacity:{part:\x22ticks\x22,vgProp:\x22opacity\x22},tickSize:null,tickWidth:{part:\x22ticks\x22,vgProp:\x22strokeWidth\x22}},AXIS_PARTS\x3d[\x22domain\x22,\x22grid\x22,\x22labels\x22,\x22ticks\x22,\x22title\x22],AXIS_PROPERTY_TYPE\x3d{grid:\x22grid\x22,gridCap:\x22grid\x22,gridColor:\x22grid\x22,gridDash:\x22grid\x22,gridDashOffset:\x22grid\x22,gridOpacity:\x22grid\x22,gridScale:\x22grid\x22,gridWidth:\x22grid\x22,orient:\x22main\x22,bandPosition:\x22both\x22,aria:\x22main\x22,description:\x22main\x22,domain:\x22main\x22,domainCap:\x22main\x22,domainColor:\x22main\x22,domainDash:\x22main\x22,\ndomainDashOffset:\x22main\x22,domainOpacity:\x22main\x22,domainWidth:\x22main\x22,format:\x22main\x22,formatType:\x22main\x22,labelAlign:\x22main\x22,labelAngle:\x22main\x22,labelBaseline:\x22main\x22,labelBound:\x22main\x22,labelColor:\x22main\x22,labelFlush:\x22main\x22,labelFlushOffset:\x22main\x22,labelFont:\x22main\x22,labelFontSize:\x22main\x22,labelFontStyle:\x22main\x22,labelFontWeight:\x22main\x22,labelLimit:\x22main\x22,labelLineHeight:\x22main\x22,labelOffset:\x22main\x22,labelOpacity:\x22main\x22,labelOverlap:\x22main\x22,labelPadding:\x22main\x22,labels:\x22main\x22,labelSeparation:\x22main\x22,maxExtent:\x22main\x22,minExtent:\x22main\x22,\noffset:\x22both\x22,position:\x22main\x22,tickCap:\x22main\x22,tickColor:\x22main\x22,tickDash:\x22main\x22,tickDashOffset:\x22main\x22,tickMinStep:\x22main\x22,tickOffset:\x22both\x22,tickOpacity:\x22main\x22,tickRound:\x22both\x22,ticks:\x22main\x22,tickSize:\x22main\x22,tickWidth:\x22both\x22,title:\x22main\x22,titleAlign:\x22main\x22,titleAnchor:\x22main\x22,titleAngle:\x22main\x22,titleBaseline:\x22main\x22,titleColor:\x22main\x22,titleFont:\x22main\x22,titleFontSize:\x22main\x22,titleFontStyle:\x22main\x22,titleFontWeight:\x22main\x22,titleLimit:\x22main\x22,titleLineHeight:\x22main\x22,titleOpacity:\x22main\x22,titlePadding:\x22main\x22,titleX:\x22main\x22,\ntitleY:\x22main\x22,encode:\x22both\x22,scale:\x22both\x22,tickBand:\x22both\x22,tickCount:\x22both\x22,tickExtra:\x22both\x22,translate:\x22both\x22,values:\x22both\x22,zindex:\x22both\x22},COMMON_AXIS_PROPERTIES_INDEX\x3d{orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,\nlabelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,\ntitleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},AXIS_PROPERTIES_INDEX\x3dObject.assign({},COMMON_AXIS_PROPERTIES_INDEX,{style:1,labelExpr:1,encoding:1}),AXIS_CONFIGS\x3dkeys$jscomp$0({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,\naxisYPoint:1,axisYQuantitative:1,axisYTemporal:1}),AGGREGATE_OP_INDEX\x3d{argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},MULTIDOMAIN_SORT_OP_INDEX\x3d{count:1,min:1,max:1},COUNTING_OPS\x3d[\x22count\x22,\x22valid\x22,\x22missing\x22,\x22distinct\x22],SUM_OPS\x3d[\x22count\x22,\x22sum\x22,\x22distinct\x22,\x22valid\x22,\x22missing\x22],SHARED_DOMAIN_OP_INDEX\x3dtoSet(\x22mean average median q1 q3 min max\x22.split(\x22 \x22)),POLAR_POSITION_CHANNEL_INDEX\x3d\n{theta:1,theta2:1,radius:1,radius2:1},GEO_POSIITON_CHANNEL_INDEX\x3d{longitude:1,longitude2:1,latitude:1,latitude2:1},GEOPOSITION_CHANNELS\x3dkeys$jscomp$0(GEO_POSIITON_CHANNEL_INDEX),UNIT_CHANNEL_INDEX\x3dObject.assign({},{x:1,y:1,x2:1,y2:1},POLAR_POSITION_CHANNEL_INDEX,GEO_POSIITON_CHANNEL_INDEX,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1}),FACET_CHANNEL_INDEX\x3d{row:1,\ncolumn:1,facet:1},FACET_CHANNELS\x3dkeys$jscomp$0(FACET_CHANNEL_INDEX),CHANNEL_INDEX\x3dObject.assign({},UNIT_CHANNEL_INDEX,FACET_CHANNEL_INDEX),CHANNELS\x3dkeys$jscomp$0(CHANNEL_INDEX);var $jscomp$destructuring$var3\x3dObject.assign({},CHANNEL_INDEX),$jscomp$destructuring$var4\x3d(delete $jscomp$destructuring$var3.order,delete $jscomp$destructuring$var3.detail,delete $jscomp$destructuring$var3.tooltip,$jscomp$destructuring$var3),$jscomp$destructuring$var5\x3dObject.assign({},$jscomp$destructuring$var4);const SINGLE_DEF_UNIT_CHANNEL_INDEX\x3d\n(delete $jscomp$destructuring$var5.row,delete $jscomp$destructuring$var5.column,delete $jscomp$destructuring$var5.facet,$jscomp$destructuring$var5),SECONDARY_RANGE_CHANNEL\x3d\x22x2 y2 latitude2 longitude2 theta2 radius2\x22.split(\x22 \x22);var $jscomp$destructuring$var7\x3dObject.assign({},UNIT_CHANNEL_INDEX);const NONPOSITION_CHANNEL_INDEX\x3d(delete $jscomp$destructuring$var7.x,delete $jscomp$destructuring$var7.y,delete $jscomp$destructuring$var7.x2,delete $jscomp$destructuring$var7.y2,delete $jscomp$destructuring$var7.latitude,\ndelete $jscomp$destructuring$var7.longitude,delete $jscomp$destructuring$var7.latitude2,delete $jscomp$destructuring$var7.longitude2,delete $jscomp$destructuring$var7.theta,delete $jscomp$destructuring$var7.theta2,delete $jscomp$destructuring$var7.radius,delete $jscomp$destructuring$var7.radius2,$jscomp$destructuring$var7),NONPOSITION_CHANNELS\x3dkeys$jscomp$0(NONPOSITION_CHANNEL_INDEX),POSITION_SCALE_CHANNEL_INDEX\x3d{x:1,y:1},POSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(POSITION_SCALE_CHANNEL_INDEX),POLAR_POSITION_SCALE_CHANNEL_INDEX\x3d\n{theta:1,radius:1},POLAR_POSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(POLAR_POSITION_SCALE_CHANNEL_INDEX);var $jscomp$destructuring$var9\x3dObject.assign({},NONPOSITION_CHANNEL_INDEX);const NONPOSITION_SCALE_CHANNEL_INDEX\x3d(delete $jscomp$destructuring$var9.text,delete $jscomp$destructuring$var9.tooltip,delete $jscomp$destructuring$var9.href,delete $jscomp$destructuring$var9.url,delete $jscomp$destructuring$var9.description,delete $jscomp$destructuring$var9.detail,delete $jscomp$destructuring$var9.key,delete $jscomp$destructuring$var9.order,\n$jscomp$destructuring$var9),NONPOSITION_SCALE_CHANNELS\x3dkeys$jscomp$0(NONPOSITION_SCALE_CHANNEL_INDEX),SCALE_CHANNEL_INDEX\x3dObject.assign({},POSITION_SCALE_CHANNEL_INDEX,POLAR_POSITION_SCALE_CHANNEL_INDEX,NONPOSITION_SCALE_CHANNEL_INDEX),SCALE_CHANNELS\x3dkeys$jscomp$0(SCALE_CHANNEL_INDEX),ALL_MARKS\x3d{arc:\x22always\x22,area:\x22always\x22,bar:\x22always\x22,circle:\x22always\x22,geoshape:\x22always\x22,image:\x22always\x22,line:\x22always\x22,rule:\x22always\x22,point:\x22always\x22,rect:\x22always\x22,square:\x22always\x22,trail:\x22always\x22,text:\x22always\x22,tick:\x22always\x22};\nvar $jscomp$destructuring$var11\x3dObject.assign({},ALL_MARKS);const ALL_MARKS_EXCEPT_GEOSHAPE\x3d(delete $jscomp$destructuring$var11.geoshape,$jscomp$destructuring$var11),main\x3dfunction(_$jscomp$0,method){let level\x3d_$jscomp$0||0;return{level(_){return arguments.length?(level\x3d+_,this):level},error(){1\x3c\x3dlevel\x26\x26log(method||\x22error\x22,\x22ERROR\x22,arguments);return this},warn(){2\x3c\x3dlevel\x26\x26log(method||\x22warn\x22,\x22WARN\x22,arguments);return this},info(){3\x3c\x3dlevel\x26\x26log(method||\x22log\x22,\x22INFO\x22,arguments);return this},debug(){4\x3c\x3dlevel\x26\x26\nlog(method||\x22log\x22,\x22DEBUG\x22,arguments);return this}}}(2);let current\x3dmain;const MONTHS\x3d\x22january february march april may june july august september october november december\x22.split(\x22 \x22),SHORT_MONTHS\x3dMONTHS.map(m\x3d\x3em.substr(0,3)),DAYS\x3d\x22sunday monday tuesday wednesday thursday friday saturday\x22.split(\x22 \x22),SHORT_DAYS\x3dDAYS.map(d\x3d\x3ed.substr(0,3)),LOCAL_SINGLE_TIMEUNIT_INDEX\x3d{year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},TIMEUNIT_PARTS\x3dkeys$jscomp$0(LOCAL_SINGLE_TIMEUNIT_INDEX),\nVEGALITE_TIMEFORMAT\x3d{\x22year-month\x22:\x22%b %Y \x22,\x22year-month-date\x22:\x22%b %d, %Y \x22},VG_MARK_CONFIGS\x3dkeys$jscomp$0({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,\nradius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),VG_MARK_INDEX\x3d{arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VG_CORNERRADIUS_CHANNELS\x3d[\x22cornerRadius\x22,\x22cornerRadiusTopLeft\x22,\x22cornerRadiusTopRight\x22,\x22cornerRadiusBottomLeft\x22,\x22cornerRadiusBottomRight\x22],\nScaleType\x3d{LINEAR:\x22linear\x22,LOG:\x22log\x22,POW:\x22pow\x22,SQRT:\x22sqrt\x22,SYMLOG:\x22symlog\x22,IDENTITY:\x22identity\x22,SEQUENTIAL:\x22sequential\x22,TIME:\x22time\x22,UTC:\x22utc\x22,QUANTILE:\x22quantile\x22,QUANTIZE:\x22quantize\x22,THRESHOLD:\x22threshold\x22,BIN_ORDINAL:\x22bin-ordinal\x22,ORDINAL:\x22ordinal\x22,POINT:\x22point\x22,BAND:\x22band\x22},SCALE_CATEGORY_INDEX\x3d{linear:\x22numeric\x22,log:\x22numeric\x22,pow:\x22numeric\x22,sqrt:\x22numeric\x22,symlog:\x22numeric\x22,identity:\x22numeric\x22,sequential:\x22numeric\x22,time:\x22time\x22,utc:\x22time\x22,ordinal:\x22ordinal\x22,\x22bin-ordinal\x22:\x22bin-ordinal\x22,point:\x22ordinal-position\x22,\nband:\x22ordinal-position\x22,quantile:\x22discretizing\x22,quantize:\x22discretizing\x22,threshold:\x22discretizing\x22},SCALE_PRECEDENCE_INDEX\x3d{linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,\x22bin-ordinal\x22:0,quantile:0,quantize:0,threshold:0},CONTINUOUS_TO_CONTINUOUS_SCALES\x3d\x22linear log pow sqrt symlog time utc\x22.split(\x22 \x22),CONTINUOUS_TO_CONTINUOUS_INDEX\x3dtoSet(CONTINUOUS_TO_CONTINUOUS_SCALES),QUANTITATIVE_SCALES_INDEX\x3dtoSet([\x22linear\x22,\x22log\x22,\x22pow\x22,\x22sqrt\x22,\x22symlog\x22]),CONTINUOUS_TO_DISCRETE_INDEX\x3d\ntoSet([\x22quantile\x22,\x22quantize\x22,\x22threshold\x22]),CONTINUOUS_DOMAIN_SCALES\x3dCONTINUOUS_TO_CONTINUOUS_SCALES.concat([\x22quantile\x22,\x22quantize\x22,\x22threshold\x22,\x22sequential\x22,\x22identity\x22]),CONTINUOUS_DOMAIN_INDEX\x3dtoSet(CONTINUOUS_DOMAIN_SCALES),DISCRETE_DOMAIN_INDEX\x3dtoSet([\x22ordinal\x22,\x22bin-ordinal\x22,\x22point\x22,\x22band\x22]);var $jscomp$destructuring$var16\x3dObject.assign({},{type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,\nconstant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1});const NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX\x3d(delete $jscomp$destructuring$var16.type,delete $jscomp$destructuring$var16.domain,delete $jscomp$destructuring$var16.range,delete $jscomp$destructuring$var16.rangeMax,delete $jscomp$destructuring$var16.rangeMin,delete $jscomp$destructuring$var16.scheme,$jscomp$destructuring$var16),NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES\x3dkeys$jscomp$0(NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTY_INDEX),\nMark\x3d{arc:\x22arc\x22,area:\x22area\x22,bar:\x22bar\x22,image:\x22image\x22,line:\x22line\x22,point:\x22point\x22,rect:\x22rect\x22,rule:\x22rule\x22,text:\x22text\x22,tick:\x22tick\x22,trail:\x22trail\x22,circle:\x22circle\x22,square:\x22square\x22,geoshape:\x22geoshape\x22},ARC\x3dMark.arc,AREA\x3dMark.area,BAR\x3dMark.bar,IMAGE\x3dMark.image,LINE\x3dMark.line,POINT\x3dMark.point,RECT\x3dMark.rect,RULE\x3dMark.rule,TEXT$1\x3dMark.text,TICK\x3dMark.tick,TRAIL\x3dMark.trail,CIRCLE\x3dMark.circle,SQUARE\x3dMark.square,GEOSHAPE\x3dMark.geoshape,PRIMITIVE_MARKS\x3dkeys$jscomp$0(Mark);toSet(PRIMITIVE_MARKS);const FILL_STROKE_CONFIG\x3d\n\x22stroke strokeWidth strokeDash strokeDashOffset strokeOpacity strokeJoin strokeMiterLimit fill fillOpacity\x22.split(\x22 \x22),VL_ONLY_MARK_CONFIG_PROPERTIES\x3dkeys$jscomp$0({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),MARK_CONFIGS\x3dkeys$jscomp$0({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),BAR_CORNER_RADIUS_INDEX\x3d{horizontal:[\x22cornerRadiusTopRight\x22,\x22cornerRadiusBottomRight\x22],vertical:[\x22cornerRadiusTopLeft\x22,\n\x22cornerRadiusTopRight\x22]},SORT_BY_CHANNEL_INDEX\x3d{x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1},defaultTitleFormatter\x3d(fieldDef,config)\x3d\x3e{switch(config.fieldTitle){case \x22plain\x22:return fieldDef.field;case \x22functional\x22:{const {aggregate,bin,timeUnit,field}\x3dfieldDef;isArgmaxDef(aggregate)?fieldDef\x3d\x22\x22.concat(field,\x22 for argmax(\x22).concat(aggregate.argmax,\x22)\x22):isArgminDef(aggregate)?fieldDef\x3d\x22\x22.concat(field,\x22 for argmin(\x22).concat(aggregate.argmin,\n\x22)\x22):(fieldDef\x3dnormalizeTimeUnit(timeUnit),fieldDef\x3d(fieldDef\x3daggregate||(null\x3d\x3d\x3dfieldDef||void 0\x3d\x3d\x3dfieldDef?void 0:fieldDef.unit)||(null\x3d\x3d\x3dfieldDef||void 0\x3d\x3d\x3dfieldDef?void 0:fieldDef.maxbins)\x26\x26\x22timeunit\x22||isBinning(bin)\x26\x26\x22bin\x22)?fieldDef.toUpperCase()+\x22(\x22+field+\x22)\x22:field)}return fieldDef;default:return verbalTitleFormatter(fieldDef,config)}};let titleFormatter\x3ddefaultTitleFormatter;const COMPATIBLE\x3d{compatible:!0};class CompositeMarkNormalizer{constructor(name,run){this.name\x3dname;this.run\x3drun}hasMatchingType(spec){return isUnitSpec(spec)?\n(spec\x3dspec.mark,(isMarkDef(spec)?spec.type:spec)\x3d\x3d\x3dthis.name):!1}}const boxPlotNormalizer\x3dnew CompositeMarkNormalizer(\x22boxplot\x22,normalizeBoxPlot),errorBarNormalizer\x3dnew CompositeMarkNormalizer(\x22errorbar\x22,normalizeErrorBar),errorBandNormalizer\x3dnew CompositeMarkNormalizer(\x22errorband\x22,normalizeErrorBand),compositeMarkRegistry\x3d{};add$jscomp$0(\x22boxplot\x22,normalizeBoxPlot,[\x22box\x22,\x22median\x22,\x22outliers\x22,\x22rule\x22,\x22ticks\x22]);add$jscomp$0(\x22errorbar\x22,normalizeErrorBar,[\x22ticks\x22,\x22rule\x22]);add$jscomp$0(\x22errorband\x22,normalizeErrorBand,\n[\x22band\x22,\x22borders\x22]);const VL_ONLY_LEGEND_CONFIG\x3d[\x22gradientHorizontalMaxLength\x22,\x22gradientHorizontalMinLength\x22,\x22gradientVerticalMaxLength\x22,\x22gradientVerticalMinLength\x22,\x22unselectedOpacity\x22],HEADER_TITLE_PROPERTIES_MAP\x3d{titleAlign:\x22align\x22,titleAnchor:\x22anchor\x22,titleAngle:\x22angle\x22,titleBaseline:\x22baseline\x22,titleColor:\x22color\x22,titleFont:\x22font\x22,titleFontSize:\x22fontSize\x22,titleFontStyle:\x22fontStyle\x22,titleFontWeight:\x22fontWeight\x22,titleLimit:\x22limit\x22,titleLineHeight:\x22lineHeight\x22,titleOrient:\x22orient\x22,titlePadding:\x22offset\x22},\nHEADER_LABEL_PROPERTIES_MAP\x3d{labelAlign:\x22align\x22,labelAnchor:\x22anchor\x22,labelAngle:\x22angle\x22,labelBaseline:\x22baseline\x22,labelColor:\x22color\x22,labelFont:\x22font\x22,labelFontSize:\x22fontSize\x22,labelFontStyle:\x22fontStyle\x22,labelFontWeight:\x22fontWeight\x22,labelLimit:\x22limit\x22,labelLineHeight:\x22lineHeight\x22,labelOrient:\x22orient\x22,labelPadding:\x22offset\x22},HEADER_TITLE_PROPERTIES\x3dkeys$jscomp$0(HEADER_TITLE_PROPERTIES_MAP),HEADER_LABEL_PROPERTIES\x3dkeys$jscomp$0(HEADER_LABEL_PROPERTIES_MAP),HEADER_CONFIGS\x3dkeys$jscomp$0({header:1,headerRow:1,\nheaderColumn:1,headerFacet:1}),LEGEND_SCALE_CHANNELS\x3d\x22size shape fill stroke strokeDash strokeWidth opacity\x22.split(\x22 \x22),TOP_LEVEL_PROPERTIES\x3d[\x22background\x22,\x22padding\x22],COMPOSITION_LAYOUT_PROPERTIES\x3dkeys$jscomp$0({align:1,bounds:1,center:1,columns:1,spacing:1}),defaultConfig$1\x3d{background:\x22white\x22,padding:5,timeFormat:\x22%b %d, %Y\x22,countTitle:\x22Count of Records\x22,view:{continuousWidth:200,continuousHeight:200,step:20},mark:{color:\x22#4c78a8\x22,invalid:\x22filter\x22,timeUnitBand:1},arc:{},area:{},bar:{binSpacing:1,\ncontinuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:\x22black\x22},square:{},text:{color:\x22black\x22},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:\x22white\x22},outliers:{},rule:{},ticks:null},errorbar:{center:\x22mean\x22,rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,\nmaxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:{single:{on:\x22click\x22,fields:[\x22_vgsid_\x22],resolve:\x22global\x22,empty:\x22all\x22,clear:\x22dblclick\x22},multi:{on:\x22click\x22,fields:[\x22_vgsid_\x22],\ntoggle:\x22event.shiftKey\x22,resolve:\x22global\x22,empty:\x22all\x22,clear:\x22dblclick\x22},interval:{on:\x22[mousedown, window:mouseup] \\x3e window:mousemove!\x22,encodings:[\x22x\x22,\x22y\x22],translate:\x22[mousedown, window:mouseup] \\x3e window:mousemove!\x22,zoom:\x22wheel!\x22,mark:{fill:\x22#333\x22,fillOpacity:.125,stroke:\x22white\x22},resolve:\x22global\x22,clear:\x22dblclick\x22}},style:{},title:{},facet:{spacing:20},concat:{spacing:20}},tab10\x3d\x22#4c78a8 #f58518 #e45756 #72b7b2 #54a24b #eeca3b #b279a2 #ff9da6 #9d755d #bab0ac\x22.split(\x22 \x22),DEFAULT_FONT_SIZE\x3d{text:11,\nguideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},DEFAULT_COLOR\x3d{blue:tab10[0],orange:tab10[1],red:tab10[2],teal:tab10[3],green:tab10[4],yellow:tab10[5],purple:tab10[6],pink:tab10[7],brown:tab10[8],gray0:\x22#000\x22,gray1:\x22#111\x22,gray2:\x22#222\x22,gray3:\x22#333\x22,gray4:\x22#444\x22,gray5:\x22#555\x22,gray6:\x22#666\x22,gray7:\x22#777\x22,gray8:\x22#888\x22,gray9:\x22#999\x22,gray10:\x22#aaa\x22,gray11:\x22#bbb\x22,gray12:\x22#ccc\x22,gray13:\x22#ddd\x22,gray14:\x22#eee\x22,gray15:\x22#fff\x22},configPropsWithExpr\x3d[...MARK_CONFIGS,...AXIS_CONFIGS,...HEADER_CONFIGS,\x22background\x22,\n\x22padding\x22,\x22legend\x22,\x22lineBreak\x22,\x22scale\x22,\x22style\x22,\x22title\x22,\x22view\x22],MARK_STYLES\x3d[\x22view\x22,...PRIMITIVE_MARKS],VL_ONLY_CONFIG_PROPERTIES\x3d\x22color fontSize background padding facet concat numberFormat timeFormat countTitle header axisQuantitative axisTemporal axisDiscrete axisPoint axisXBand axisXPoint axisXDiscrete axisXQuantitative axisXTemporal axisYBand axisYPoint axisYDiscrete axisYQuantitative axisYTemporal scale selection overlay\x22.split(\x22 \x22),VL_ONLY_ALL_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX\x3dObject.assign({},\n{view:[\x22continuousWidth\x22,\x22continuousHeight\x22,\x22discreteWidth\x22,\x22discreteHeight\x22,\x22step\x22]},{area:[\x22line\x22,\x22point\x22],bar:[\x22binSpacing\x22,\x22continuousBandSize\x22,\x22discreteBandSize\x22],rect:[\x22binSpacing\x22,\x22continuousBandSize\x22,\x22discreteBandSize\x22],line:[\x22point\x22],tick:[\x22bandSize\x22,\x22thickness\x22]});class SpecMapper{map(spec,params){return\x22facet\x22in spec?this.mapFacet(spec,params):\x22repeat\x22in spec?this.mapRepeat(spec,params):\x22hconcat\x22in spec?this.mapHConcat(spec,params):\x22vconcat\x22in spec?this.mapVConcat(spec,params):\x22concat\x22in\nspec?this.mapConcat(spec,params):this.mapLayerOrUnit(spec,params)}mapLayerOrUnit(spec,params){if(\x22layer\x22in spec)return this.mapLayer(spec,params);if(isUnitSpec(spec))return this.mapUnit(spec,params);throw Error(invalidSpec(spec));}mapLayer(spec,params){return Object.assign({},spec,{layer:spec.layer.map(subspec\x3d\x3ethis.mapLayerOrUnit(subspec,params))})}mapHConcat(spec,params){return Object.assign({},spec,{hconcat:spec.hconcat.map(subspec\x3d\x3ethis.map(subspec,params))})}mapVConcat(spec,params){return Object.assign({},\nspec,{vconcat:spec.vconcat.map(subspec\x3d\x3ethis.map(subspec,params))})}mapConcat(spec,params){var $jscomp$destructuring$var74\x3dObject.assign({},spec);spec\x3dspec.concat;$jscomp$destructuring$var74\x3d(delete $jscomp$destructuring$var74.concat,$jscomp$destructuring$var74);return Object.assign({},$jscomp$destructuring$var74,{concat:spec.map(subspec\x3d\x3ethis.map(subspec,params))})}mapFacet(spec,params){return Object.assign({},spec,{spec:this.map(spec.spec,params)})}mapRepeat(spec,params){return Object.assign({},\nspec,{spec:this.map(spec.spec,params)})}}const STACK_OFFSET_INDEX\x3d{zero:1,center:1,normalize:1},STACKABLE_MARKS\x3dnew Set([ARC,BAR,AREA,RULE,POINT,CIRCLE,SQUARE,LINE,TEXT$1,TICK]),STACK_BY_DEFAULT_MARKS\x3dnew Set([BAR,AREA,ARC]);class PathOverlayNormalizer{constructor(){_defineProperty(this,\x22name\x22,\x22path-overlay\x22)}hasMatchingType(spec,config){if(isUnitSpec(spec)){const {mark,encoding}\x3dspec;spec\x3disMarkDef(mark)?mark:{type:mark};switch(spec.type){case \x22line\x22:case \x22rule\x22:case \x22trail\x22:return!!getPointOverlay(spec,\nconfig[spec.type],encoding);case \x22area\x22:return!!getPointOverlay(spec,config[spec.type],encoding)||!!getLineOverlay(spec,config[spec.type])}}return!1}run(spec,params,normalize){const {config}\x3dparams;var $jscomp$destructuring$var78\x3dObject.assign({},spec),selection\x3dspec.selection;const projection\x3dspec.projection;var mark\x3dspec.mark;spec\x3dspec.encoding;$jscomp$destructuring$var78\x3d(delete $jscomp$destructuring$var78.selection,delete $jscomp$destructuring$var78.projection,delete $jscomp$destructuring$var78.mark,\ndelete $jscomp$destructuring$var78.encoding,$jscomp$destructuring$var78);spec\x3dnormalizeEncoding(spec,config);mark\x3disMarkDef(mark)?mark:{type:mark};const pointOverlay\x3dgetPointOverlay(mark,config[mark.type],spec),lineOverlay\x3d\x22area\x22\x3d\x3d\x3dmark.type\x26\x26getLineOverlay(mark,config[mark.type]);selection\x3d[Object.assign({},selection?{selection}:{},{mark:dropLineAndPoint(Object.assign({},\x22area\x22\x3d\x3d\x3dmark.type\x26\x26void 0\x3d\x3d\x3dmark.opacity\x26\x26void 0\x3d\x3d\x3dmark.fillOpacity?{opacity:.7}:{},mark)),encoding:omit(spec,[\x22shape\x22])})];const stackProps\x3d\nstack$jscomp$1(mark,spec);let overlayEncoding\x3dspec;if(stackProps){const {fieldChannel:stackFieldChannel,offset}\x3dstackProps;overlayEncoding\x3dObject.assign({},spec,{[stackFieldChannel]:Object.assign({},spec[stackFieldChannel],offset?{stack:offset}:{})})}lineOverlay\x26\x26selection.push(Object.assign({},projection?{projection}:{},{mark:Object.assign({},{type:\x22line\x22},pick(mark,[\x22clip\x22,\x22interpolate\x22,\x22tension\x22,\x22tooltip\x22]),lineOverlay),encoding:overlayEncoding}));pointOverlay\x26\x26selection.push(Object.assign({},\nprojection?{projection}:{},{mark:Object.assign({},{type:\x22point\x22,opacity:1,filled:!0},pick(mark,[\x22clip\x22,\x22tooltip\x22]),pointOverlay),encoding:overlayEncoding}));return normalize(Object.assign({},$jscomp$destructuring$var78,{layer:selection}),Object.assign({},params,{config:dropLineAndPointFromConfig(config)}))}}class RangeStepNormalizer{constructor(){_defineProperty(this,\x22name\x22,\x22RangeStep\x22)}hasMatchingType(spec){if(isUnitSpec(spec)\x26\x26spec.encoding)for(const channel of POSITION_SCALE_CHANNELS){const def\x3d\nspec.encoding[channel];if(def\x26\x26isFieldOrDatumDef(def)){var _def$scale;if(null\x3d\x3d\x3ddef||void 0\x3d\x3d\x3ddef?0:null\x3d\x3d\x3d(_def$scale\x3ddef.scale)||void 0\x3d\x3d\x3d_def$scale?0:_def$scale.rangeStep)return!0}}return!1}run(spec){const sizeMixins\x3d{};let encoding\x3dObject.assign({},spec.encoding);for(const channel of POSITION_SCALE_CHANNELS){const sizeType\x3dgetSizeChannel(channel);var def\x3dencoding[channel];if(def\x26\x26isFieldOrDatumDef(def)){var _def$scale2;if(null\x3d\x3d\x3ddef||void 0\x3d\x3d\x3ddef?0:null\x3d\x3d\x3d(_def$scale2\x3ddef.scale)||void 0\x3d\x3d\x3d_def$scale2?\n0:_def$scale2.rangeStep){var $jscomp$destructuring$var80\x3dObject.assign({},def);def\x3ddef.scale;$jscomp$destructuring$var80\x3d(delete $jscomp$destructuring$var80.scale,$jscomp$destructuring$var80);var $jscomp$destructuring$var82\x3dObject.assign({},def);$jscomp$destructuring$var82\x3d(delete $jscomp$destructuring$var82.rangeStep,$jscomp$destructuring$var82);sizeMixins[sizeType]\x3d{step:def.rangeStep};warn(\x27Scale\\\x27s \x22rangeStep\x22 is deprecated and will be removed in Vega-Lite 5.0. Please use \x22width\x22/\x22height\x22: {\x22step\x22: ...} instead. See https://vega.github.io/vega-lite/docs/size.html.\x27);\nencoding\x3dObject.assign({},encoding,{[channel]:Object.assign({},$jscomp$destructuring$var80,isEmpty($jscomp$destructuring$var82)?{}:{scale:$jscomp$destructuring$var82})})}}}return Object.assign({},sizeMixins,spec,{encoding})}}class RuleForRangedLineNormalizer{constructor(){_defineProperty(this,\x22name\x22,\x22RuleForRangedLine\x22)}hasMatchingType(spec){if(isUnitSpec(spec)){const {encoding,mark}\x3dspec;if(\x22line\x22\x3d\x3d\x3dmark)for(const channel of SECONDARY_RANGE_CHANNEL)if(spec\x3dgetMainRangeChannel(channel),spec\x3dencoding[spec],\nencoding[channel]\x26\x26(isFieldDef(spec)\x26\x26!isBinned(spec.bin)||isDatumDef(spec)))return!0}return!1}run(spec,params,normalize){var {encoding}\x3dspec,hasX2\x3d!!encoding.x2;encoding\x3d\x22Line mark is for continuous lines and thus cannot be used with \x22.concat(hasX2\x26\x26encoding.y2?\x22x2 and y2\x22:hasX2?\x22x2\x22:\x22y2\x22,\x22. We will use the rule mark (line segments) instead.\x22);warn(encoding);return normalize(Object.assign({},spec,{mark:\x22rule\x22}),params)}}class CoreNormalizer extends SpecMapper{constructor(...args){super(...args);\n_defineProperty(this,\x22nonFacetUnitNormalizers\x22,[boxPlotNormalizer,errorBarNormalizer,errorBandNormalizer,new PathOverlayNormalizer,new RuleForRangedLineNormalizer,new RangeStepNormalizer])}map(spec,params){if(isUnitSpec(spec)){const hasRow\x3dchannelHasField(spec.encoding,\x22row\x22),hasColumn\x3dchannelHasField(spec.encoding,\x22column\x22),hasFacet\x3dchannelHasField(spec.encoding,\x22facet\x22);if(hasRow||hasColumn||hasFacet)return this.mapFacetedUnit(spec,params)}return super.map(spec,params)}mapUnit(spec,params){const {parentEncoding,\nparentProjection}\x3dparams;var encoding\x3dreplaceRepeaterInEncoding(spec.encoding,params.repeater);spec\x3dObject.assign({},spec,encoding?{encoding}:{});if(parentEncoding||parentProjection)return this.mapUnitWithParentEncodingOrProjection(spec,params);encoding\x3dthis.mapLayerOrUnit.bind(this);for(const unitNormalizer of this.nonFacetUnitNormalizers)if(unitNormalizer.hasMatchingType(spec,params.config))return unitNormalizer.run(spec,params,encoding);return spec}mapRepeat(spec,params){return!isArray(spec.repeat)\x26\x26\nspec.repeat.layer?this.mapLayerRepeat(spec,params):this.mapNonLayerRepeat(spec,params)}mapLayerRepeat(spec,params){var $jscomp$destructuring$var86\x3dObject.assign({},spec);const repeat\x3dspec.repeat,childSpec\x3dspec.spec;$jscomp$destructuring$var86\x3d(delete $jscomp$destructuring$var86.repeat,delete $jscomp$destructuring$var86.spec,$jscomp$destructuring$var86);const {row,column,layer}\x3drepeat,{repeater\x3d{},repeaterPrefix\x3d\x22\x22}\x3dparams;return row||column?this.mapRepeat(Object.assign({},spec,{repeat:Object.assign({},\nrow?{row}:{},column?{column}:{}),spec:{repeat:{layer},spec:childSpec}}),params):Object.assign({},$jscomp$destructuring$var86,{layer:layer.map(layerValue\x3d\x3e{var childRepeater\x3dObject.assign({},repeater,{layer:layerValue});layerValue\x3d(childSpec.name||\x22\x22)+repeaterPrefix+\x22child__layer_\x22.concat(varName(layerValue));childRepeater\x3dthis.mapLayerOrUnit(childSpec,Object.assign({},params,{repeater:childRepeater,repeaterPrefix:layerValue}));childRepeater.name\x3dlayerValue;return childRepeater})})}mapNonLayerRepeat(spec,\nparams){var _childSpec$data,$jscomp$destructuring$var87\x3dspec,$jscomp$destructuring$var88\x3dObject.assign({},$jscomp$destructuring$var87);const repeat\x3d$jscomp$destructuring$var87.repeat,childSpec\x3d$jscomp$destructuring$var87.spec;$jscomp$destructuring$var87\x3d$jscomp$destructuring$var87.data;$jscomp$destructuring$var88\x3d(delete $jscomp$destructuring$var88.repeat,delete $jscomp$destructuring$var88.spec,delete $jscomp$destructuring$var88.data,$jscomp$destructuring$var88);!isArray(repeat)\x26\x26spec.columns\x26\x26(spec\x3d\nomit(spec,[\x22columns\x22]),warn(columnsNotSupportByRowCol(\x22repeat\x22)));const concat\x3d[],{repeater\x3d{},repeaterPrefix\x3d\x22\x22}\x3dparams,row\x3d!isArray(repeat)\x26\x26repeat.row||[repeater?repeater.row:null],column\x3d!isArray(repeat)\x26\x26repeat.column||[repeater?repeater.column:null];var repeatValues\x3disArray(repeat)\x26\x26repeat||[repeater?repeater.repeat:null];for(const repeatValue of repeatValues)for(const rowValue of row)for(const columnValue of column){var childRepeater\x3d{repeat:repeatValue,row:rowValue,column:columnValue,layer:repeater.layer};\nrepeatValues\x3d(childSpec.name||\x22\x22)+repeaterPrefix+\x22child__\x22+(isArray(repeat)?\x22\x22.concat(varName(repeatValue)):(repeat.row?\x22row_\x22.concat(varName(rowValue)):\x22\x22)+(repeat.column?\x22column_\x22.concat(varName(columnValue)):\x22\x22));childRepeater\x3dthis.map(childSpec,Object.assign({},params,{repeater:childRepeater,repeaterPrefix:repeatValues}));childRepeater.name\x3drepeatValues;concat.push(omit(childRepeater,[\x22data\x22]))}spec\x3disArray(repeat)?spec.columns:repeat.column?repeat.column.length:1;return Object.assign({},{data:null!\x3d\x3d\n(_childSpec$data\x3dchildSpec.data)\x26\x26void 0!\x3d\x3d_childSpec$data?_childSpec$data:$jscomp$destructuring$var87,align:\x22all\x22},$jscomp$destructuring$var88,{columns:spec,concat})}mapFacet(spec,params){const {facet}\x3dspec;isFacetMapping(facet)\x26\x26spec.columns\x26\x26(spec\x3domit(spec,[\x22columns\x22]),warn(columnsNotSupportByRowCol(\x22facet\x22)));return super.mapFacet(spec,params)}mapUnitWithParentEncodingOrProjection(spec,params){const {encoding,projection}\x3dspec,{parentEncoding,parentProjection,config}\x3dparams,mergedProjection\x3dmergeProjection({parentProjection,\nprojection});params\x3dmergeEncoding({parentEncoding,encoding:replaceRepeaterInEncoding(encoding,params.repeater)});return this.mapUnit(Object.assign({},spec,mergedProjection?{projection:mergedProjection}:{},params?{encoding:params}:{}),{config})}mapFacetedUnit(spec,params){var $jscomp$destructuring$var89\x3dspec.encoding,$jscomp$destructuring$var90\x3dObject.assign({},$jscomp$destructuring$var89),row\x3d$jscomp$destructuring$var89.row;const column\x3d$jscomp$destructuring$var89.column;$jscomp$destructuring$var89\x3d\n$jscomp$destructuring$var89.facet;const encoding\x3d(delete $jscomp$destructuring$var90.row,delete $jscomp$destructuring$var90.column,delete $jscomp$destructuring$var90.facet,$jscomp$destructuring$var90);var $jscomp$destructuring$var92\x3dObject.assign({},spec);$jscomp$destructuring$var90\x3dspec.mark;const width\x3dspec.width,projection\x3dspec.projection,height\x3dspec.height,view\x3dspec.view;spec\x3dspec.selection;$jscomp$destructuring$var92\x3d(delete $jscomp$destructuring$var92.mark,delete $jscomp$destructuring$var92.width,\ndelete $jscomp$destructuring$var92.projection,delete $jscomp$destructuring$var92.height,delete $jscomp$destructuring$var92.view,delete $jscomp$destructuring$var92.selection,delete $jscomp$destructuring$var92.encoding,$jscomp$destructuring$var92);const {facetMapping,layout}\x3dthis.getFacetMappingAndLayout({row,column,facet:$jscomp$destructuring$var89},params);row\x3dreplaceRepeaterInEncoding(encoding,params.repeater);return this.mapFacet(Object.assign({},$jscomp$destructuring$var92,layout,{facet:facetMapping,\nspec:Object.assign({},width?{width}:{},height?{height}:{},view?{view}:{},projection?{projection}:{},{mark:$jscomp$destructuring$var90,encoding:row},spec?{selection:spec}:{})}),params)}getFacetMappingAndLayout(facets,params){const {row,column,facet}\x3dfacets;if(row||column){facet\x26\x26(params\x3d[...row?[\x22row\x22]:[],...column?[\x22column\x22]:[]],params\x3d\x22Facet encoding dropped as \x22.concat(params.join(\x22 and \x22),\x22 \x22).concat(1\x3cparams.length?\x22are\x22:\x22is\x22,\x22 also specified.\x22),warn(params));params\x3d{};var layout\x3d{};for(var channel of[\x22row\x22,\n\x22column\x22]){const def\x3dfacets[channel];if(def){var $jscomp$destructuring$var94\x3dObject.assign({},def);$jscomp$destructuring$var94\x3d(delete $jscomp$destructuring$var94.align,delete $jscomp$destructuring$var94.center,delete $jscomp$destructuring$var94.spacing,delete $jscomp$destructuring$var94.columns,$jscomp$destructuring$var94);params[channel]\x3d$jscomp$destructuring$var94;for(var prop of[\x22align\x22,\x22center\x22,\x22spacing\x22])if(void 0!\x3d\x3ddef[prop]){var _layout$prop;layout[prop]\x3dnull!\x3d\x3d(_layout$prop\x3dlayout[prop])\x26\x26\nvoid 0!\x3d\x3d_layout$prop?_layout$prop:{};layout[prop][channel]\x3ddef[prop]}}}return{facetMapping:params,layout}}layout\x3dObject.assign({},facet);facets\x3dfacet.align;_layout$prop\x3dfacet.center;channel\x3dfacet.spacing;prop\x3dfacet.columns;layout\x3d(delete layout.align,delete layout.center,delete layout.spacing,delete layout.columns,layout);params\x3d(params\x3dparams.repeater)?isFacetMapping(layout)?replaceRepeaterInMapping(layout,params):replaceRepeaterInFieldDef(layout,params):layout;return{facetMapping:params,layout:Object.assign({},\nfacets?{align:facets}:{},_layout$prop?{center:_layout$prop}:{},channel?{spacing:channel}:{},prop?{columns:prop}:{})}}mapLayer(spec,$jscomp$destructuring$var97){var $jscomp$destructuring$var99\x3dObject.assign({},$jscomp$destructuring$var97),parentEncoding\x3d$jscomp$destructuring$var97.parentEncoding;$jscomp$destructuring$var97\x3d$jscomp$destructuring$var97.parentProjection;$jscomp$destructuring$var99\x3d(delete $jscomp$destructuring$var99.parentEncoding,delete $jscomp$destructuring$var99.parentProjection,$jscomp$destructuring$var99);\nvar $jscomp$destructuring$var101\x3dObject.assign({},spec);const encoding\x3dspec.encoding;spec\x3dspec.projection;$jscomp$destructuring$var101\x3d(delete $jscomp$destructuring$var101.encoding,delete $jscomp$destructuring$var101.projection,$jscomp$destructuring$var101);parentEncoding\x3dObject.assign({},$jscomp$destructuring$var99,{parentEncoding:mergeEncoding({parentEncoding,encoding,layer:!0}),parentProjection:mergeProjection({parentProjection:$jscomp$destructuring$var97,projection:spec})});return super.mapLayer($jscomp$destructuring$var101,\nparentEncoding)}}const normalizer\x3dnew CoreNormalizer;class Split{constructor(explicit,implicit){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;this.explicit\x3dexplicit;this.implicit\x3dimplicit}clone(){return new Split(duplicate(this.explicit),duplicate(this.implicit))}combine(){return Object.assign({},this.explicit,this.implicit)}get(key){return getFirstDefined(this.explicit[key],this.implicit[key])}getWithExplicit(key){return void 0!\x3d\x3dthis.explicit[key]?{explicit:!0,value:this.explicit[key]}:\nvoid 0!\x3d\x3dthis.implicit[key]?{explicit:!1,value:this.implicit[key]}:{explicit:!1,value:void 0}}setWithExplicit(key,value){void 0!\x3d\x3dvalue.value\x26\x26this.set(key,value.value,value.explicit)}set(key,value,explicit){delete this[explicit?\x22implicit\x22:\x22explicit\x22][key];this[explicit?\x22explicit\x22:\x22implicit\x22][key]\x3dvalue;return this}copyKeyFromSplit(key,s){void 0!\x3d\x3ds.explicit[key]?this.set(key,s.explicit[key],!0):void 0!\x3d\x3ds.implicit[key]\x26\x26this.set(key,s.implicit[key],!1)}copyKeyFromObject(key,s){void 0!\x3d\x3ds[key]\x26\x26this.set(key,\ns[key],!0)}copyAll(other){for(const key of keys$jscomp$0(other.combine())){const val\x3dother.getWithExplicit(key);this.setWithExplicit(key,val)}}}class AncestorParse extends Split{constructor(explicit,implicit,parseNothing){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;parseNothing\x3dvoid 0\x3d\x3d\x3dparseNothing?!1:parseNothing;super(explicit,implicit);this.explicit\x3dexplicit;this.implicit\x3dimplicit;this.parseNothing\x3dparseNothing}clone(){const clone\x3dsuper.clone();clone.parseNothing\x3d\nthis.parseNothing;return clone}}let DataSourceType;(function(DataSourceType){DataSourceType[DataSourceType.Raw\x3d0]\x3d\x22Raw\x22;DataSourceType[DataSourceType.Main\x3d1]\x3d\x22Main\x22;DataSourceType[DataSourceType.Row\x3d2]\x3d\x22Row\x22;DataSourceType[DataSourceType.Column\x3d3]\x3d\x22Column\x22;DataSourceType[DataSourceType.Lookup\x3d4]\x3d\x22Lookup\x22})(DataSourceType||(DataSourceType\x3d{}));const ILLEGAL\x3d/[[\\]{}]/,DEFAULT_MARKS\x3d{\x22*\x22:1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let DEFAULT_SOURCE,MARKS;\nconst ALIGNED_X_CHANNEL\x3d{left:\x22x\x22,center:\x22xc\x22,right:\x22x2\x22},BASELINED_Y_CHANNEL\x3d{top:\x22y\x22,middle:\x22yc\x22,bottom:\x22y2\x22},ALWAYS_IGNORE\x3dnew Set([\x22aria\x22]),nearest\x3d{has:selCmpt\x3d\x3e\x22interval\x22!\x3d\x3dselCmpt.type\x26\x26selCmpt.nearest,parse:(model,selCmpt)\x3d\x3e{if(selCmpt.events)for(const s of selCmpt.events)s.markname\x3dmodel.getName(\x22voronoi\x22)},marks:(model,selCmpt,marks)\x3d\x3e{const {x,y}\x3dselCmpt.project.hasChannel;selCmpt\x3dmodel.mark;if(isPathMark(selCmpt))return warn(\x27The \x22nearest\x22 transform is not supported for \x27.concat(selCmpt,\n\x22 marks.\x22)),marks;selCmpt\x3d{name:model.getName(\x22voronoi\x22),type:\x22path\x22,interactive:!0,from:{data:model.getName(\x22marks\x22)},encode:{update:Object.assign({},{fill:{value:\x22transparent\x22},strokeWidth:{value:.35},stroke:{value:\x22transparent\x22},isVoronoi:{value:!0}},tooltip(model,{reactiveGeom:!0}))},transform:[{type:\x22voronoi\x22,x:{expr:x||!y?\x22datum.datum.x || 0\x22:\x220\x22},y:{expr:y||!x?\x22datum.datum.y || 0\x22:\x220\x22},size:[model.getSizeSignalRef(\x22width\x22),model.getSizeSignalRef(\x22height\x22)]}]};let index\x3d0,exists\x3d!1;marks.forEach((mark,\ni)\x3d\x3e{var _mark$name;mark\x3dnull!\x3d\x3d(_mark$name\x3dmark.name)\x26\x26void 0!\x3d\x3d_mark$name?_mark$name:\x22\x22;mark\x3d\x3d\x3dmodel.component.mark[0].name?index\x3di:0\x3c\x3dmark.indexOf(\x22voronoi\x22)\x26\x26(exists\x3d!0)});exists||marks.splice(index+1,0,selCmpt);return marks}};class DataFlowNode{constructor(parent,debugName){this.debugName\x3ddebugName;_defineProperty(this,\x22_children\x22,[]);_defineProperty(this,\x22_parent\x22,null);_defineProperty(this,\x22_hash\x22,void 0);parent\x26\x26(this.parent\x3dparent)}clone(){throw Error(\x22Cannot clone node\x22);}get parent(){return this._parent}set parent(parent){(this._parent\x3d\nparent)\x26\x26parent.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(child,loc){-1\x3cthis._children.indexOf(child)?warn(\x22Attempt to add the same child twice.\x22):void 0!\x3d\x3dloc?this._children.splice(loc,0,child):this._children.push(child)}removeChild(oldChild){oldChild\x3dthis._children.indexOf(oldChild);this._children.splice(oldChild,1);return oldChild}remove(){let loc\x3dthis._parent.removeChild(this);for(const child of this._children)child._parent\x3dthis._parent,\nthis._parent.addChild(child,loc++)}insertAsParentOf(other){const parent\x3dother.parent;parent.removeChild(this);this.parent\x3dparent;other.parent\x3dthis}swapWithParent(){const parent\x3dthis._parent,newParent\x3dparent.parent;for(const child of this._children)child.parent\x3dparent;this._children\x3d[];parent.removeChild(this);parent.parent.removeChild(parent);this.parent\x3dnewParent;parent.parent\x3dthis}}class OutputNode extends DataFlowNode{clone(){const cloneObj\x3dnew this.constructor;cloneObj.debugName\x3d\x22clone_\x22+this.debugName;\ncloneObj._source\x3dthis._source;cloneObj._name\x3d\x22clone_\x22+this._name;cloneObj.type\x3dthis.type;cloneObj.refCounts\x3dthis.refCounts;cloneObj.refCounts[cloneObj._name]\x3d0;return cloneObj}constructor(parent,source,type,refCounts){super(parent,source);this.type\x3dtype;this.refCounts\x3drefCounts;_defineProperty(this,\x22_source\x22,void 0);_defineProperty(this,\x22_name\x22,void 0);this._source\x3dthis._name\x3dsource;!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]\x3d0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){void 0\x3d\x3d\x3d\nthis._hash\x26\x26(this._hash\x3d\x22Output \x22.concat(uniqueId()));return this._hash}getSource(){this.refCounts[this._name]++;return this._source}isRequired(){return!!this.refCounts[this._name]}setSource(source){this._source\x3dsource}}class TimeUnitNode extends DataFlowNode{clone(){return new TimeUnitNode(null,duplicate(this.formula))}constructor(parent,formula){super(parent);this.formula\x3dformula}static makeFromEncoding(parent,model){const formula\x3dmodel.reduceFieldDef((timeUnitComponent,fieldDef,channel)\x3d\x3e{const {field,\ntimeUnit}\x3dfieldDef,channelDef2\x3disUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0;channel\x3disUnitModel(model)\x26\x26hasBand(channel,fieldDef,channelDef2,model.stack,model.markDef,model.config);timeUnit\x26\x26(fieldDef\x3dvgField(fieldDef,{forAs:!0}),timeUnitComponent[hash({as:fieldDef,field,timeUnit})]\x3dObject.assign({},{as:fieldDef,field,timeUnit},channel?{band:!0}:{}));return timeUnitComponent},{});return isEmpty(formula)?null:new TimeUnitNode(parent,formula)}static makeFromTransform(parent,\nt){var $jscomp$destructuring$var117\x3dObject.assign({},t);t\x3dObject.assign({},$jscomp$destructuring$var117);$jscomp$destructuring$var117\x3d$jscomp$destructuring$var117.timeUnit;t\x3d(delete t.timeUnit,t);$jscomp$destructuring$var117\x3dnormalizeTimeUnit($jscomp$destructuring$var117);t\x3dObject.assign({},t,{timeUnit:$jscomp$destructuring$var117});return new TimeUnitNode(parent,{[hash(t)]:t})}merge(other){this.formula\x3dObject.assign({},this.formula);for(const key in other.formula)if(!this.formula[key]||other.formula[key].band)this.formula[key]\x3d\nother.formula[key];for(const child of other.children)other.removeChild(child),child.parent\x3dthis;other.remove()}removeFormulas(fields){const newFormula\x3d{};for(const $jscomp$destructuring$var119 of entries(this.formula)){const [key,timeUnit]\x3d$jscomp$destructuring$var119;fields.has(timeUnit.as)||(newFormula[key]\x3dtimeUnit)}this.formula\x3dnewFormula}producedFields(){return new Set(vals(this.formula).map(f\x3d\x3ef.as))}dependentFields(){return new Set(vals(this.formula).map(f\x3d\x3ef.field))}hash(){return\x22TimeUnit \x22.concat(hash(this.formula))}assemble(){const transforms\x3d\n[];for(const f of vals(this.formula)){const {field,as,timeUnit}\x3df;var $jscomp$destructuring$var120\x3dnormalizeTimeUnit(timeUnit),$jscomp$destructuring$var121\x3dObject.assign({},$jscomp$destructuring$var120);const unit\x3d$jscomp$destructuring$var120.unit;$jscomp$destructuring$var120\x3d$jscomp$destructuring$var120.utc;$jscomp$destructuring$var121\x3d(delete $jscomp$destructuring$var121.unit,delete $jscomp$destructuring$var121.utc,$jscomp$destructuring$var121);transforms.push(Object.assign({},{field:replacePathInField(field),\ntype:\x22timeunit\x22},unit?{units:getTimeUnitParts(unit)}:{},$jscomp$destructuring$var120?{timezone:\x22utc\x22}:{},$jscomp$destructuring$var121,{as:[as,\x22\x22.concat(as,\x22_end\x22)]}))}return transforms}}class SelectionProjectionComponent{constructor(...items){_defineProperty(this,\x22hasChannel\x22,void 0);_defineProperty(this,\x22hasField\x22,void 0);_defineProperty(this,\x22timeUnit\x22,void 0);_defineProperty(this,\x22items\x22,void 0);this.items\x3ditems;this.hasChannel\x3d{};this.hasField\x3d{}}}const inputBindings\x3d{has:selCmpt\x3d\x3e\x22single\x22\x3d\x3d\x3d\nselCmpt.type\x26\x26\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26\x22scales\x22!\x3d\x3dselCmpt.bind\x26\x26!isLegendBinding(selCmpt.bind),parse:(model,selCmpt,selDef,origDef)\x3d\x3e{origDef.on||delete selCmpt.events;origDef.clear||delete selCmpt.clear},topLevelSignals:(model,selCmpt,signals)\x3d\x3e{const name\x3dselCmpt.name;model\x3dselCmpt.project;const bind\x3dselCmpt.bind,init\x3dselCmpt.init\x26\x26selCmpt.init[0],datum\x3dnearest.has(selCmpt)?\x22(item().isVoronoi ? datum.datum : datum)\x22:\x22datum\x22;model.items.forEach((p,i)\x3d\x3e{const sgname\x3dvarName(\x22\x22.concat(name,\n\x22_\x22).concat(p.field));if(!signals.filter(s\x3d\x3es.name\x3d\x3d\x3dsgname).length){var _ref,_bind$p$field;signals.unshift(Object.assign({},{name:sgname},init?{init:assembleInit(init[i])}:{value:null},{on:selCmpt.events?[{events:selCmpt.events,update:\x22datum \\x26\\x26 item().mark.marktype !\\x3d\\x3d \x27group\x27 ? \x22.concat(datum,\x22[\x22).concat($(p.field),\x22] : null\x22)}]:[],bind:null!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_bind$p$field\x3dbind[p.field])\x26\x26void 0!\x3d\x3d_bind$p$field?_bind$p$field:bind[p.channel])\x26\x26void 0!\x3d\x3d_ref?_ref:bind}))}});return signals},\nsignals:(model,selCmpt,signals)\x3d\x3e{const name\x3dselCmpt.name;var proj\x3dselCmpt.project;model\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dname+\x22_tuple\x22)[0];selCmpt\x3dname+\x22_tuple_fields\x22;proj\x3dproj.items.map(p\x3d\x3evarName(\x22\x22.concat(name,\x22_\x22).concat(p.field)));const valid\x3dproj.map(v\x3d\x3e\x22\x22.concat(v,\x22 !\\x3d\\x3d null\x22)).join(\x22 \\x26\\x26 \x22);proj.length\x26\x26(model.update\x3d\x22\x22.concat(valid,\x22 ? {fields: \x22).concat(selCmpt,\x22, values: [\x22).concat(proj.join(\x22, \x22),\x22]} : null\x22));delete model.value;delete model.on;return signals}},toggle\x3d{has:selCmpt\x3d\x3e\n\x22multi\x22\x3d\x3d\x3dselCmpt.type\x26\x26!!selCmpt.toggle,signals:(model,selCmpt,signals)\x3d\x3esignals.concat({name:selCmpt.name+\x22_toggle\x22,value:!1,on:[{events:selCmpt.events,update:selCmpt.toggle}]}),modifyExpr:(model,selCmpt)\x3d\x3e{const tpl\x3dselCmpt.name+\x22_tuple\x22,signal\x3dselCmpt.name+\x22_toggle\x22;return\x22\x22.concat(signal,\x22 ? null : \x22).concat(tpl,\x22, \x22)+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22\x22.concat(signal,\x22 ? null : true, \x22):\x22\x22.concat(signal,\x22 ? null : {unit: \x22).concat(unitName(model),\x22}, \x22))+\x22\x22.concat(signal,\x22 ? \x22).concat(tpl,\x22 : null\x22)}},\nscaleBindings\x3d{has:selCmpt\x3d\x3e\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26\x22scales\x22\x3d\x3d\x3dselCmpt.bind,parse:(model,selCmpt)\x3d\x3e{const bound\x3dselCmpt.scales\x3d[];for(const proj of selCmpt.project.items){var channel\x3dproj.channel;if(!SCALE_CHANNEL_INDEX[channel])continue;const scaleType\x3d(channel\x3dmodel.getScaleComponent(channel))?channel.get(\x22type\x22):void 0;channel\x26\x26scaleType in CONTINUOUS_DOMAIN_INDEX?(channel.set(\x22selectionExtent\x22,{selection:selCmpt.name,field:proj.field},!0),bound.push(proj)):\nwarn(\x22Scale bindings are currently only supported for scales with unbinned, continuous domains.\x22)}},topLevelSignals:(model,selCmpt,signals)\x3d\x3e{const bound\x3dselCmpt.scales.filter(proj\x3d\x3e0\x3d\x3d\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dproj.signals.data).length);if(!model.parent||isTopLevelLayer(model)||0\x3d\x3d\x3dbound.length)return signals;model\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dselCmpt.name)[0];let update\x3dmodel.update;if(0\x3c\x3dupdate.indexOf(\x22vlSelectionResolve\x22))model.update\x3d\x22{\x22.concat(bound.map(proj\x3d\x3e\x22\x22.concat($(proj.field),\x22: \x22).concat(proj.signals.data)).join(\x22, \x22),\n\x22}\x22);else{for(const proj of bound){const mapping\x3d\x22\x22.concat($(proj.field),\x22: \x22).concat(proj.signals.data);0\x3eupdate.indexOf(mapping)\x26\x26(update\x3d\x22\x22.concat(update.substring(0,update.length-1),\x22, \x22).concat(mapping,\x22}\x22))}model.update\x3dupdate}return signals.concat(bound.map(proj\x3d\x3e({name:proj.signals.data})))},signals:(model,selCmpt,signals)\x3d\x3e{if(model.parent\x26\x26!isTopLevelLayer(model))for(const proj of selCmpt.scales)model\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dproj.signals.data)[0],model.push\x3d\x22outer\x22,delete model.value,\ndelete model.update;return signals}},legendBindings\x3d{has:selCmpt\x3d\x3e{const spec\x3d\x22global\x22\x3d\x3d\x3dselCmpt.resolve\x26\x26selCmpt.bind\x26\x26isLegendBinding(selCmpt.bind);selCmpt\x3d1\x3d\x3d\x3dselCmpt.project.items.length\x26\x26\x22_vgsid_\x22!\x3d\x3dselCmpt.project.items[0].field;spec\x26\x26!selCmpt\x26\x26warn(\x22Legend bindings are only supported for selections over an individual field or encoding channel.\x22);return spec\x26\x26selCmpt},parse:(model,selCmpt,selDef,origDef)\x3d\x3e{origDef.on||delete selCmpt.events;origDef.clear||delete selCmpt.clear;if(origDef.on||\norigDef.clear)for(const evt of selCmpt.events){var _evt$filter;evt.filter\x3darray$jscomp$0(null!\x3d\x3d(_evt$filter\x3devt.filter)\x26\x26void 0!\x3d\x3d_evt$filter?_evt$filter:[]);0\x3eevt.filter.indexOf(\x27event.item \\x26\\x26 indexof(event.item.mark.role, \x22legend\x22) \\x3c 0\x27)\x26\x26evt.filter.push(\x27event.item \\x26\\x26 indexof(event.item.mark.role, \x22legend\x22) \\x3c 0\x27)}model\x3disLegendStreamBinding(selCmpt.bind)?selCmpt.bind.legend:\x22click\x22;model\x3disString(model)?eventSelector(model,\x22view\x22):array$jscomp$0(model);selCmpt.bind\x3d{legend:{merge:model}}},\ntopLevelSignals:(model,selCmpt,signals)\x3d\x3e{model\x3dselCmpt.name;const stream\x3disLegendStreamBinding(selCmpt.bind)\x26\x26selCmpt.bind.legend,markName\x3dname\x3d\x3es\x3d\x3e{s\x3dduplicate(s);s.markname\x3dname;return s};for(const proj of selCmpt.project.items){if(!proj.hasLegend)continue;var prefix\x3d\x22\x22.concat(varName(proj.field),\x22_legend\x22);const sgName\x3d\x22\x22.concat(model,\x22_\x22).concat(prefix);0\x3d\x3d\x3dsignals.filter(s\x3d\x3es.name\x3d\x3d\x3dsgName).length\x26\x26(prefix\x3dstream.merge.map(markName(\x22\x22.concat(prefix,\x22_symbols\x22))).concat(stream.merge.map(markName(\x22\x22.concat(prefix,\n\x22_labels\x22)))).concat(stream.merge.map(markName(\x22\x22.concat(prefix,\x22_entries\x22)))),signals.unshift(Object.assign({},{name:sgName},selCmpt.init?{}:{value:null},{on:[{events:prefix,update:\x22datum.value || item().items[0].items[0].datum.value\x22,force:!0},{events:stream.merge,update:\x22!event.item || !datum ? null : \x22.concat(sgName),force:!0}]})))}return signals},signals:(model,selCmpt,signals)\x3d\x3e{const name\x3dselCmpt.name;var proj\x3dselCmpt.project;model\x3dsignals.find(s\x3d\x3es.name\x3d\x3d\x3dname+\x22_tuple\x22);var fields\x3dname+\x22_tuple_fields\x22;\nproj\x3dproj.items.filter(p\x3d\x3ep.hasLegend).map(p\x3d\x3evarName(\x22\x22.concat(name,\x22_\x22).concat(varName(p.field),\x22_legend\x22)));const valid\x3dproj.map(v\x3d\x3e\x22\x22.concat(v,\x22 !\\x3d\\x3d null\x22)).join(\x22 \\x26\\x26 \x22);fields\x3d\x22\x22.concat(valid,\x22 ? {fields: \x22).concat(fields,\x22, values: [\x22).concat(proj.join(\x22, \x22),\x22]} : null\x22);selCmpt.events\x26\x260\x3cproj.length?model.on.push({events:proj.map(signal\x3d\x3e({signal})),update:fields}):0\x3cproj.length\x26\x26(model.update\x3dfields,delete model.value,delete model.on);model\x3dsignals.find(s\x3d\x3es.name\x3d\x3d\x3dname+\x22_toggle\x22);\nfields\x3disLegendStreamBinding(selCmpt.bind)\x26\x26selCmpt.bind.legend;model\x26\x26(selCmpt.events?model.on.push(Object.assign({},model.on[0],{events:fields})):model.on[0].events\x3dfields);return signals}},compilers\x3d[{has:()\x3d\x3e!0,parse:(model,selCmpt,selDef)\x3d\x3e{var _selCmpt$project;const name\x3dselCmpt.name,proj\x3dnull!\x3d\x3d(_selCmpt$project\x3dselCmpt.project)\x26\x26void 0!\x3d\x3d_selCmpt$project?_selCmpt$project:selCmpt.project\x3dnew SelectionProjectionComponent,parsed\x3d{};_selCmpt$project\x3d{};const signals\x3dnew Set,signalName\x3d(p,range)\x3d\x3e\n{p\x3d\x22visual\x22\x3d\x3d\x3drange?p.channel:p.field;let sg\x3dvarName(\x22\x22.concat(name,\x22_\x22).concat(p));for(let counter\x3d1;signals.has(sg);counter++)sg\x3dvarName(\x22\x22.concat(name,\x22_\x22).concat(p,\x22_\x22).concat(counter));signals.add(sg);return{[range]:sg}};if(!selDef.fields\x26\x26!selDef.encodings){const cfg\x3dmodel.config.selection[selDef.type];if(selDef.init)for(const init of array$jscomp$0(selDef.init))for(const key of keys$jscomp$0(init))SINGLE_DEF_UNIT_CHANNEL_INDEX[key]?(selDef.encodings||(selDef.encodings\x3d[])).push(key):\x22interval\x22\x3d\x3d\x3d\nselDef.type?(warn(\x27Interval selections should be initialized using \x22x\x22 and/or \x22y\x22 keys.\x27),selDef.encodings\x3dcfg.encodings):(selDef.fields||(selDef.fields\x3d[])).push(key);else selDef.encodings\x3dcfg.encodings,selDef.fields\x3dcfg.fields}for(var field of null!\x3d\x3d(_selDef$fields\x3dselDef.fields)\x26\x26void 0!\x3d\x3d_selDef$fields?_selDef$fields:[]){var _selDef$fields;_selDef$fields\x3d{type:\x22E\x22,field};_selDef$fields.signals\x3dObject.assign({},signalName(_selDef$fields,\x22data\x22));proj.items.push(_selDef$fields);proj.hasField[field]\x3d\n_selDef$fields}for(const channel of null!\x3d\x3d(_selDef$encodings\x3dselDef.encodings)\x26\x26void 0!\x3d\x3d_selDef$encodings?_selDef$encodings:[]){var _selDef$encodings;(field\x3dmodel.fieldDef(channel))?(_selDef$encodings\x3dfield.field,field.aggregate?warn(cannotProjectAggregate(channel,field.aggregate)):_selDef$encodings?(field.timeUnit\x26\x26(_selDef$encodings\x3dmodel.vgField(channel),_selDef$fields\x3d{timeUnit:field.timeUnit,as:_selDef$encodings,field:field.field},_selCmpt$project[hash(_selDef$fields)]\x3d_selDef$fields),parsed[_selDef$encodings]||\n(_selDef$fields\x3d\x22E\x22,\x22interval\x22\x3d\x3d\x3dselCmpt.type?model.getScaleComponent(channel).get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX\x26\x26(_selDef$fields\x3d\x22R\x22):field.bin\x26\x26(_selDef$fields\x3d\x22R-RE\x22),field\x3d{field:_selDef$encodings,channel,type:_selDef$fields},field.signals\x3dObject.assign({},signalName(field,\x22data\x22),signalName(field,\x22visual\x22)),proj.items.push(parsed[_selDef$encodings]\x3dfield),proj.hasField[_selDef$encodings]\x3dproj.hasChannel[channel]\x3dparsed[_selDef$encodings])):warn(cannotProjectOnChannelWithoutField(channel))):\nwarn(cannotProjectOnChannelWithoutField(channel))}selDef.init\x26\x26(model\x3di\x3d\x3eproj.items.map(p\x3d\x3evoid 0!\x3d\x3di[p.channel]?i[p.channel]:i[p.field]),\x22interval\x22\x3d\x3d\x3dselDef.type?selCmpt.init\x3dmodel(selDef.init):(selDef\x3darray$jscomp$0(selDef.init),selCmpt.init\x3dselDef.map(model)));isEmpty(_selCmpt$project)||(proj.timeUnit\x3dnew TimeUnitNode(null,_selCmpt$project))},signals:(model,selCmpt,allSignals)\x3d\x3e{const name\x3dselCmpt.name+\x22_tuple_fields\x22;return 0\x3callSignals.filter(s\x3d\x3es.name\x3d\x3d\x3dname).length?allSignals:allSignals.concat({name,\nvalue:selCmpt.project.items.map(proj\x3d\x3e{proj\x3dObject.assign({},proj);proj\x3d(delete proj.signals,delete proj.hasLegend,proj);proj.field\x3dreplacePathInField(proj.field);return proj})})}},toggle,scaleBindings,legendBindings,{has:selCmpt\x3d\x3e\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26selCmpt.translate,signals:(model,selCmpt,signals)\x3d\x3e{const name\x3dselCmpt.name,hasScales\x3dscaleBindings.has(selCmpt),anchor\x3dname+\x22_translate_anchor\x22,{x,y}\x3dselCmpt.project.hasChannel;let events\x3deventSelector(selCmpt.translate,\x22scope\x22);hasScales||(events\x3d\nevents.map(e\x3d\x3e(e.between[0].markname\x3dname+\x22_brush\x22,e)));signals.push({name:anchor,value:{},on:[{events:events.map(e\x3d\x3ee.between[0]),update:\x22{x: x(unit), y: y(unit)\x22+(void 0!\x3d\x3dx?\x22, extent_x: \x22+(hasScales?domain$1(model,\x22x\x22):\x22slice(\x22.concat(x.signals.visual,\x22)\x22)):\x22\x22)+(void 0!\x3d\x3dy?\x22, extent_y: \x22+(hasScales?domain$1(model,\x22y\x22):\x22slice(\x22.concat(y.signals.visual,\x22)\x22)):\x22\x22)+\x22}\x22}]},{name:name+\x22_translate_delta\x22,value:{},on:[{events,update:\x22{x: \x22.concat(anchor,\x22.x - x(unit), y: \x22).concat(anchor,\x22.y - y(unit)}\x22)}]});\nvoid 0!\x3d\x3dx\x26\x26onDelta(model,selCmpt,x,\x22width\x22,signals);void 0!\x3d\x3dy\x26\x26onDelta(model,selCmpt,y,\x22height\x22,signals);return signals}},{has:selCmpt\x3d\x3e\x22interval\x22\x3d\x3d\x3dselCmpt.type\x26\x26selCmpt.zoom,signals:(model,selCmpt,signals)\x3d\x3e{const name\x3dselCmpt.name,hasScales\x3dscaleBindings.has(selCmpt),delta\x3dname+\x22_zoom_delta\x22,{x,y}\x3dselCmpt.project.hasChannel,sx\x3d$(model.scaleName(\x22x\x22)),sy\x3d$(model.scaleName(\x22y\x22));let events\x3deventSelector(selCmpt.zoom,\x22scope\x22);hasScales||(events\x3devents.map(e\x3d\x3e(e.markname\x3dname+\x22_brush\x22,e)));signals.push({name:name+\n\x22_zoom_anchor\x22,on:[{events,update:hasScales?\x22{\x22+[sx?\x22x: invert(\x22.concat(sx,\x22, x(unit))\x22):\x22\x22,sy?\x22y: invert(\x22.concat(sy,\x22, y(unit))\x22):\x22\x22].filter(expr\x3d\x3e!!expr).join(\x22, \x22)+\x22}\x22:\x22{x: x(unit), y: y(unit)}\x22}]},{name:delta,on:[{events,force:!0,update:\x22pow(1.001, event.deltaY * pow(16, event.deltaMode))\x22}]});void 0!\x3d\x3dx\x26\x26onDelta$1(model,selCmpt,x,\x22width\x22,signals);void 0!\x3d\x3dy\x26\x26onDelta$1(model,selCmpt,y,\x22height\x22,signals);return signals}},inputBindings,nearest,{has:selCmpt\x3d\x3evoid 0!\x3d\x3dselCmpt.clear\x26\x26!1!\x3d\x3dselCmpt.clear,\nparse:(model,selCmpt,selDef)\x3d\x3e{selDef.clear\x26\x26(selCmpt.clear\x3disString(selDef.clear)?eventSelector(selDef.clear,\x22scope\x22):selDef.clear)},topLevelSignals:(model,selCmpt,signals)\x3d\x3e{if(inputBindings.has(selCmpt))for(const proj of selCmpt.project.items)model\x3dsignals.findIndex(n\x3d\x3en.name\x3d\x3d\x3dvarName(\x22\x22.concat(selCmpt.name,\x22_\x22).concat(proj.field))),-1!\x3d\x3dmodel\x26\x26signals[model].on.push({events:selCmpt.clear,update:\x22null\x22});return signals},signals:(model,selCmpt,signals)\x3d\x3e{function addClear(idx,update){-1!\x3d\x3didx\x26\x26\nsignals[idx].on\x26\x26signals[idx].on.push({events:selCmpt.clear,update})}if(\x22interval\x22\x3d\x3d\x3dselCmpt.type)for(const proj of selCmpt.project.items)model\x3dsignals.findIndex(n\x3d\x3en.name\x3d\x3d\x3dproj.signals.visual),addClear(model,\x22[0, 0]\x22),-1\x3d\x3d\x3dmodel\x26\x26(model\x3dsignals.findIndex(n\x3d\x3en.name\x3d\x3d\x3dproj.signals.data),addClear(model,\x22null\x22));else model\x3dsignals.findIndex(n\x3d\x3en.name\x3d\x3d\x3dselCmpt.name+\x22_tuple\x22),addClear(model,\x22null\x22),toggle.has(selCmpt)\x26\x26(model\x3dsignals.findIndex(n\x3d\x3en.name\x3d\x3d\x3dselCmpt.name+\x22_toggle\x22),addClear(model,\x22false\x22));\nreturn signals}}],compilers$1\x3d{single:{signals:singleOrMultiSignals,modifyExpr:(model,selCmpt)\x3d\x3eselCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22true\x22:\x22{unit: \x22.concat(unitName(model),\x22}\x22))},multi:{signals:singleOrMultiSignals,modifyExpr:(model,selCmpt)\x3d\x3eselCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22null\x22:\x22{unit: \x22.concat(unitName(model),\x22}\x22))},interval:{signals:(model,selCmpt)\x3d\x3e{const name\x3dselCmpt.name;var fieldsSg\x3dname+\x22_tuple_fields\x22,hasScales\x3dscaleBindings.has(selCmpt);const signals\x3d\n[],dataSignals\x3d[],scaleTriggers\x3d[];if(selCmpt.translate\x26\x26!hasScales){const filterExpr\x3d\x22!event.item || event.item.mark.name !\\x3d\\x3d \x22.concat($(name+\x22_brush\x22));events$jscomp$0(selCmpt,(on,evt)\x3d\x3e{var _evt$between$0$filter;evt\x3darray$jscomp$0(null!\x3d\x3d(_evt$between$0$filter\x3devt.between[0].filter)\x26\x26void 0!\x3d\x3d_evt$between$0$filter?_evt$between$0$filter:evt.between[0].filter\x3d[]);0\x3eevt.indexOf(filterExpr)\x26\x26evt.push(filterExpr);return on})}selCmpt.project.items.forEach((proj,i)\x3d\x3e{const channel\x3dproj.channel;\nif(\x22x\x22!\x3d\x3dchannel\x26\x26\x22y\x22!\x3d\x3dchannel)warn(\x22Interval selections only support x and y encoding channels.\x22);else{i\x3dchannelSignals(model,selCmpt,proj,selCmpt.init?selCmpt.init[i]:null);var dname\x3dproj.signals.data;proj\x3dproj.signals.visual;var scaleName\x3d$(model.scaleName(channel)),toNum\x3dmodel.getScaleComponent(channel).get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX?\x22+\x22:\x22\x22;signals.push(...i);dataSignals.push(dname);scaleTriggers.push({scaleName:model.scaleName(channel),expr:\x22(!isArray(\x22.concat(dname,\x22) || \x22)+\x22(\x22.concat(toNum,\n\x22invert(\x22).concat(scaleName,\x22, \x22).concat(proj,\x22)[0] \\x3d\\x3d\\x3d \x22).concat(toNum).concat(dname,\x22[0] \\x26\\x26 \x22)+\x22\x22.concat(toNum,\x22invert(\x22).concat(scaleName,\x22, \x22).concat(proj,\x22)[1] \\x3d\\x3d\\x3d \x22).concat(toNum).concat(dname,\x22[1]))\x22)})}});hasScales||signals.push({name:name+\x22_scale_trigger\x22,value:{},on:[{events:scaleTriggers.map(t\x3d\x3e({scale:t.scaleName})),update:scaleTriggers.map(t\x3d\x3et.expr).join(\x22 \\x26\\x26 \x22)+\x22 ? \x22.concat(name+\x22_scale_trigger\x22,\x22 : {}\x22)}]});hasScales\x3dselCmpt.init;fieldsSg\x3d\x22unit: \x22.concat(unitName(model),\n\x22, fields: \x22).concat(fieldsSg,\x22, values\x22);return signals.concat(Object.assign({},{name:name+\x22_tuple\x22},hasScales?{init:\x22{\x22.concat(fieldsSg,\x22: \x22).concat(assembleInit(hasScales),\x22}\x22)}:{},{on:[{events:[{signal:dataSignals.join(\x22 || \x22)}],update:dataSignals.join(\x22 \\x26\\x26 \x22)+\x22 ? {\x22.concat(fieldsSg,\x22: [\x22).concat(dataSignals,\x22]} : null\x22)}]}))},modifyExpr:(model,selCmpt)\x3d\x3eselCmpt.name+\x22_tuple, \x22+(\x22global\x22\x3d\x3d\x3dselCmpt.resolve?\x22true\x22:\x22{unit: \x22.concat(unitName(model),\x22}\x22)),marks:(model,selCmpt,marks)\x3d\x3e{const name\x3d\nselCmpt.name,{x,y}\x3dselCmpt.project.hasChannel,xvname\x3dx\x26\x26x.signals.visual,yvname\x3dy\x26\x26y.signals.visual;var store\x3d\x22data(\x22.concat($(selCmpt.name+\x22_store\x22),\x22)\x22);if(scaleBindings.has(selCmpt))return marks;const update\x3d{x:void 0!\x3d\x3dx?{signal:\x22\x22.concat(xvname,\x22[0]\x22)}:{value:0},y:void 0!\x3d\x3dy?{signal:\x22\x22.concat(yvname,\x22[0]\x22)}:{value:0},x2:void 0!\x3d\x3dx?{signal:\x22\x22.concat(xvname,\x22[1]\x22)}:{field:{group:\x22width\x22}},y2:void 0!\x3d\x3dy?{signal:\x22\x22.concat(yvname,\x22[1]\x22)}:{field:{group:\x22height\x22}}};if(\x22global\x22\x3d\x3d\x3dselCmpt.resolve)for(var key of keys$jscomp$0(update))update[key]\x3d\n[Object.assign({},{test:\x22\x22.concat(store,\x22.length \\x26\\x26 \x22).concat(store,\x22[0].unit \\x3d\\x3d\\x3d \x22).concat(unitName(model))},update[key]),{value:0}];key\x3dselCmpt.mark;store\x3dObject.assign({},key);model\x3dkey.fill;selCmpt\x3dkey.fillOpacity;key\x3dkey.cursor;const stroke\x3d(delete store.fill,delete store.fillOpacity,delete store.cursor,store);store\x3dkeys$jscomp$0(stroke).reduce((def,k)\x3d\x3e{def[k]\x3d[{test:[void 0!\x3d\x3dx\x26\x26\x22\x22.concat(xvname,\x22[0] !\\x3d\\x3d \x22).concat(xvname,\x22[1]\x22),void 0!\x3d\x3dy\x26\x26\x22\x22.concat(yvname,\x22[0] !\\x3d\\x3d \x22).concat(yvname,\n\x22[1]\x22)].filter(t\x3d\x3et).join(\x22 \\x26\\x26 \x22),value:stroke[k]},{value:null}];return def},{});return[{name:name+\x22_brush_bg\x22,type:\x22rect\x22,clip:!0,encode:{enter:{fill:{value:model},fillOpacity:{value:selCmpt}},update}},...marks,{name:name+\x22_brush\x22,type:\x22rect\x22,clip:!0,encode:{enter:Object.assign({},key?{cursor:{value:key}}:{},{fill:{value:\x22transparent\x22}}),update:Object.assign({},update,store)}}]}}};ASTNode.prototype.visit\x3dfunction(visitor){let c,i,n;if(visitor(this))return 1;c\x3dchildren$jscomp$0(this);i\x3d0;for(n\x3d\nc.length;i\x3cn;++i)if(c[i].visit(visitor))return 1};var source$jscomp$0,index$jscomp$0,length$jscomp$0,lookahead,RegexNonAsciiIdentifierStart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nRegexNonAsciiIdentifierPart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/;\nconst keywords\x3d{\x22if\x22:1,\x22in\x22:1,\x22do\x22:1,\x22var\x22:1,\x22for\x22:1,\x22new\x22:1,\x22try\x22:1,let:1,\x22this\x22:1,\x22else\x22:1,\x22case\x22:1,\x22void\x22:1,\x22with\x22:1,\x22enum\x22:1,\x22while\x22:1,\x22break\x22:1,\x22catch\x22:1,\x22throw\x22:1,\x22const\x22:1,yield:1,\x22class\x22:1,\x22super\x22:1,\x22return\x22:1,\x22typeof\x22:1,\x22delete\x22:1,\x22switch\x22:1,\x22export\x22:1,\x22import\x22:1,\x22public\x22:1,\x22static\x22:1,\x22default\x22:1,\x22finally\x22:1,\x22extends\x22:1,\x22package\x22:1,\x22private\x22:1,\x22function\x22:1,\x22continue\x22:1,\x22debugger\x22:1,\x22interface\x22:1,\x22protected\x22:1,\x22instanceof\x22:1,\x22implements\x22:1},legalKeywords\x3d{\x22if\x22:1};class FilterNode extends DataFlowNode{clone(){return new FilterNode(null,\nthis.model,duplicate(this.filter))}constructor(parent,model,filter){super(parent);this.model\x3dmodel;this.filter\x3dfilter;_defineProperty(this,\x22expr\x22,void 0);_defineProperty(this,\x22_dependentFields\x22,void 0);this.expr\x3dexpression$jscomp$0(this.model,this.filter,this);this._dependentFields\x3dgetDependentFields(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:\x22filter\x22,expr:this.expr}}hash(){return\x22Filter \x22.concat(this.expr)}}const axisRules\x3d{scale:$jscomp$destructuring$var139\x3d\x3e\n{var {model,channel}\x3d$jscomp$destructuring$var139;return model.scaleName(channel)},format:$jscomp$destructuring$var140\x3d\x3e{var {fieldOrDatumDef,config,axis}\x3d$jscomp$destructuring$var140;const {format,formatType}\x3daxis;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,format,formatType,config,!0)},formatType:$jscomp$destructuring$var141\x3d\x3e{var {axis,fieldOrDatumDef,scaleType}\x3d$jscomp$destructuring$var141;({formatType:$jscomp$destructuring$var141}\x3daxis);return guideFormatType($jscomp$destructuring$var141,\nfieldOrDatumDef,scaleType)},grid:$jscomp$destructuring$var142\x3d\x3e{var {fieldOrDatumDef,axis,scaleType}\x3d$jscomp$destructuring$var142;if(isFieldDef(fieldOrDatumDef)\x26\x26isBinned(fieldOrDatumDef.bin))return!1;var _axis$grid;return null!\x3d\x3d(_axis$grid\x3daxis.grid)\x26\x26void 0!\x3d\x3d_axis$grid?_axis$grid:!(scaleType in DISCRETE_DOMAIN_INDEX)\x26\x26isFieldDef(fieldOrDatumDef)\x26\x26!isBinning(null\x3d\x3d\x3dfieldOrDatumDef||void 0\x3d\x3d\x3dfieldOrDatumDef?void 0:fieldOrDatumDef.bin)},gridScale:$jscomp$destructuring$var143\x3d\x3e{var {model,channel}\x3d\n$jscomp$destructuring$var143;$jscomp$destructuring$var143\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22y\x22:\x22x\x22;$jscomp$destructuring$var143\x3dmodel.getScaleComponent($jscomp$destructuring$var143)?model.scaleName($jscomp$destructuring$var143):void 0;return $jscomp$destructuring$var143},labelAlign:$jscomp$destructuring$var144\x3d\x3e{var {axis,labelAngle,orient,channel}\x3d$jscomp$destructuring$var144;return axis.labelAlign||defaultLabelAlign(labelAngle,orient,channel)},labelAngle:$jscomp$destructuring$var145\x3d\x3e{({labelAngle:$jscomp$destructuring$var145}\x3d\n$jscomp$destructuring$var145);return $jscomp$destructuring$var145},labelBaseline:$jscomp$destructuring$var146\x3d\x3e{var {axis,labelAngle,orient,channel}\x3d$jscomp$destructuring$var146;return axis.labelBaseline||defaultLabelBaseline(labelAngle,orient,channel)},labelFlush:$jscomp$destructuring$var147\x3d\x3e{var {axis,fieldOrDatumDef,channel}\x3d$jscomp$destructuring$var147,_axis$labelFlush;$jscomp$destructuring$var147\x3dnull!\x3d\x3d(_axis$labelFlush\x3daxis.labelFlush)\x26\x26void 0!\x3d\x3d_axis$labelFlush?_axis$labelFlush:\x22x\x22\x3d\x3d\x3dchannel\x26\x26\ncontains([\x22quantitative\x22,\x22temporal\x22],fieldOrDatumDef.type)?!0:void 0;return $jscomp$destructuring$var147},labelOverlap:$jscomp$destructuring$var148\x3d\x3e{var {axis,fieldOrDatumDef,scaleType}\x3d$jscomp$destructuring$var148,_axis$labelOverlap;if(null!\x3d\x3d(_axis$labelOverlap\x3daxis.labelOverlap)\x26\x26void 0!\x3d\x3d_axis$labelOverlap)$jscomp$destructuring$var148\x3d_axis$labelOverlap;else{$jscomp$destructuring$var148\x3dfieldOrDatumDef.type;_axis$labelOverlap\x3disFieldDef(fieldOrDatumDef)\x26\x26!!fieldOrDatumDef.timeUnit;var sort\x3disFieldDef(fieldOrDatumDef)?\nfieldOrDatumDef.sort:void 0;$jscomp$destructuring$var148\x3d_axis$labelOverlap\x26\x26!isObject(sort)||\x22nominal\x22!\x3d\x3d$jscomp$destructuring$var148\x26\x26\x22ordinal\x22!\x3d\x3d$jscomp$destructuring$var148?\x22log\x22\x3d\x3d\x3dscaleType||\x22symlog\x22\x3d\x3d\x3dscaleType?\x22greedy\x22:!0:void 0}return $jscomp$destructuring$var148},orient:$jscomp$destructuring$var149\x3d\x3e{({orient:$jscomp$destructuring$var149}\x3d$jscomp$destructuring$var149);return $jscomp$destructuring$var149},tickCount:$jscomp$destructuring$var150\x3d\x3e{var {channel,model,axis,fieldOrDatumDef,scaleType}\x3d\n$jscomp$destructuring$var150,_axis$tickCount;$jscomp$destructuring$var150\x3d($jscomp$destructuring$var150\x3d\x22x\x22\x3d\x3d\x3dchannel?\x22width\x22:\x22y\x22\x3d\x3d\x3dchannel?\x22height\x22:void 0)?model.getSizeSignalRef($jscomp$destructuring$var150):void 0;if(null\x3d\x3d\x3d(_axis$tickCount\x3daxis.tickCount)||void 0\x3d\x3d\x3d_axis$tickCount)a:{var {fieldOrDatumDef:fieldOrDatumDef$jscomp$0,scaleType:scaleType$jscomp$0,size,values:vals}\x3d{fieldOrDatumDef,scaleType,size:$jscomp$destructuring$var150,values:axis.values};if(vals||scaleType$jscomp$0 in DISCRETE_DOMAIN_INDEX||\n\x22log\x22\x3d\x3d\x3dscaleType$jscomp$0)_axis$tickCount\x3dvoid 0;else{if(isFieldDef(fieldOrDatumDef$jscomp$0)){var _normalizeTimeUnit;if(isBinning(fieldOrDatumDef$jscomp$0.bin)){_axis$tickCount\x3d{signal:\x22ceil(\x22.concat(size.signal,\x22/10)\x22)};break a}if(fieldOrDatumDef$jscomp$0.timeUnit\x26\x26contains([\x22month\x22,\x22hours\x22,\x22day\x22,\x22quarter\x22],null\x3d\x3d\x3d(_normalizeTimeUnit\x3dnormalizeTimeUnit(fieldOrDatumDef$jscomp$0.timeUnit))||void 0\x3d\x3d\x3d_normalizeTimeUnit?void 0:_normalizeTimeUnit.unit)){_axis$tickCount\x3dvoid 0;break a}}_axis$tickCount\x3d\n{signal:\x22ceil(\x22.concat(size.signal,\x22/40)\x22)}}}return _axis$tickCount},title:$jscomp$destructuring$var151\x3d\x3e{var {axis,model,channel}\x3d$jscomp$destructuring$var151;if(void 0!\x3d\x3daxis.title)return axis.title;$jscomp$destructuring$var151\x3dgetFieldDefTitle(model,channel);if(void 0!\x3d\x3d$jscomp$destructuring$var151)return $jscomp$destructuring$var151;$jscomp$destructuring$var151\x3dmodel.typedFieldDef(channel);const fieldDef2\x3dmodel.fieldDef(\x22x\x22\x3d\x3d\x3dchannel?\x22x2\x22:\x22y2\x22);return mergeTitleFieldDefs($jscomp$destructuring$var151?\n[toFieldDefBase($jscomp$destructuring$var151)]:[],isFieldDef(fieldDef2)?[toFieldDefBase(fieldDef2)]:[])},values:$jscomp$destructuring$var152\x3d\x3e{var {axis,fieldOrDatumDef}\x3d$jscomp$destructuring$var152;$jscomp$destructuring$var152\x3daxis.values;$jscomp$destructuring$var152\x3disArray($jscomp$destructuring$var152)?valueArray(fieldOrDatumDef,$jscomp$destructuring$var152):isSignalRef($jscomp$destructuring$var152)?$jscomp$destructuring$var152:void 0;return $jscomp$destructuring$var152},zindex:$jscomp$destructuring$var153\x3d\x3e\n{var {axis,fieldOrDatumDef,mark}\x3d$jscomp$destructuring$var153,_axis$zindex;$jscomp$destructuring$var153\x3dnull!\x3d\x3d(_axis$zindex\x3daxis.zindex)\x26\x26void 0!\x3d\x3d_axis$zindex?_axis$zindex:\x22rect\x22\x3d\x3d\x3dmark\x26\x26isDiscrete(fieldOrDatumDef)?1:0;return $jscomp$destructuring$var153}};class CalculateNode extends DataFlowNode{clone(){return new CalculateNode(null,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform;_defineProperty(this,\x22_dependentFields\x22,void 0);this._dependentFields\x3d\ngetDependentFields(this.transform.calculate)}static parseAllForSortIndex(parent,model){model.forEachFieldDef((fieldDef,channel)\x3d\x3e{if(isScaleFieldDef(fieldDef)\x26\x26isSortArray(fieldDef.sort)){const {field,timeUnit}\x3dfieldDef;var sort\x3dfieldDef.sort;sort\x3dsort.map((sortValue,i)\x3d\x3e\x22\x22.concat(fieldFilterExpression({field,timeUnit,equal:sortValue}),\x22 ? \x22).concat(i,\x22 : \x22)).join(\x22\x22)+sort.length;parent\x3dnew CalculateNode(parent,{calculate:sort,as:sortArrayIndexField(fieldDef,channel,{forAs:!0})})}});return parent}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:\x22formula\x22,\nexpr:this.transform.calculate,as:this.transform.as}}hash(){return\x22Calculate \x22.concat(hash(this.transform))}}const HEADER_CHANNELS\x3d[\x22row\x22,\x22column\x22],HEADER_TYPES\x3d[\x22header\x22,\x22footer\x22],LAYOUT_TITLE_BAND\x3d{column:{start:0,end:1},row:{start:1,end:0}},LEGEND_COMPONENT_PROPERTY_INDEX\x3dObject.assign({},{aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,\ngridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,\ntitleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),LEGEND_COMPONENT_PROPERTIES\x3dkeys$jscomp$0(LEGEND_COMPONENT_PROPERTY_INDEX);class LegendComponent extends Split{}const legendEncodeRules\x3d{symbols:function(symbolsSpec,$jscomp$destructuring$var155){var {fieldOrDatumDef,\nmodel,channel,legendCmpt,legendType}\x3d$jscomp$destructuring$var155,_legendCmpt$get,_legendCmpt$get2,_legendCmpt$get3,_getMaxValue;if(\x22symbol\x22\x3d\x3d\x3dlegendType){var {markDef,encoding,config,mark}\x3dmodel,filled\x3dmarkDef.filled\x26\x26\x22trail\x22!\x3d\x3dmark;$jscomp$destructuring$var155\x3dObject.assign({},applyMarkConfig({},model,FILL_STROKE_CONFIG),color$jscomp$0(model,{filled}));var symbolOpacity\x3dnull!\x3d\x3d(_legendCmpt$get\x3dlegendCmpt.get(\x22symbolOpacity\x22))\x26\x26void 0!\x3d\x3d_legendCmpt$get?_legendCmpt$get:config.legend.symbolOpacity;\n_legendCmpt$get\x3dnull!\x3d\x3d(_legendCmpt$get2\x3dlegendCmpt.get(\x22symbolFillColor\x22))\x26\x26void 0!\x3d\x3d_legendCmpt$get2?_legendCmpt$get2:config.legend.symbolFillColor;_legendCmpt$get2\x3dnull!\x3d\x3d(_legendCmpt$get3\x3dlegendCmpt.get(\x22symbolStrokeColor\x22))\x26\x26void 0!\x3d\x3d_legendCmpt$get3?_legendCmpt$get3:config.legend.symbolStrokeColor;_legendCmpt$get3\x3dvoid 0\x3d\x3d\x3dsymbolOpacity?null!\x3d\x3d(_getMaxValue\x3dgetMaxValue(encoding.opacity))\x26\x26void 0!\x3d\x3d_getMaxValue?_getMaxValue:markDef.opacity:void 0;if($jscomp$destructuring$var155.fill)if(\x22fill\x22\x3d\x3d\x3d\nchannel||filled\x26\x26\x22color\x22\x3d\x3d\x3dchannel)delete $jscomp$destructuring$var155.fill;else if($jscomp$destructuring$var155.fill.field)if(_legendCmpt$get)delete $jscomp$destructuring$var155.fill;else{var _config$legend$symbol;$jscomp$destructuring$var155.fill\x3dsignalOrValueRef(null!\x3d\x3d(_config$legend$symbol\x3dconfig.legend.symbolBaseFillColor)\x26\x26void 0!\x3d\x3d_config$legend$symbol?_config$legend$symbol:\x22black\x22);$jscomp$destructuring$var155.fillOpacity\x3dsignalOrValueRef(null!\x3d\x3d_legendCmpt$get3\x26\x26void 0!\x3d\x3d_legendCmpt$get3?\n_legendCmpt$get3:1)}else if(isArray($jscomp$destructuring$var155.fill)){var _ref,_getFirstConditionVal,_encoding$fill;if(_getMaxValue\x3dnull!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_getFirstConditionVal\x3dgetFirstConditionValue(null!\x3d\x3d(_encoding$fill\x3dencoding.fill)\x26\x26void 0!\x3d\x3d_encoding$fill?_encoding$fill:encoding.color))\x26\x26void 0!\x3d\x3d_getFirstConditionVal?_getFirstConditionVal:markDef.fill)\x26\x26void 0!\x3d\x3d_ref?_ref:filled\x26\x26markDef.color)$jscomp$destructuring$var155.fill\x3dsignalOrValueRef(_getMaxValue)}$jscomp$destructuring$var155.stroke\x26\x26\n(\x22stroke\x22\x3d\x3d\x3dchannel||!filled\x26\x26\x22color\x22\x3d\x3d\x3dchannel?delete $jscomp$destructuring$var155.stroke:$jscomp$destructuring$var155.stroke.field||_legendCmpt$get2?delete $jscomp$destructuring$var155.stroke:isArray($jscomp$destructuring$var155.stroke)\x26\x26(_ref\x3dgetFirstDefined(getFirstConditionValue(encoding.stroke||encoding.color),markDef.stroke,filled?markDef.color:void 0))\x26\x26($jscomp$destructuring$var155.stroke\x3d{value:_ref}));\x22opacity\x22!\x3d\x3dchannel\x26\x26((_ref\x3disFieldDef(fieldOrDatumDef)\x26\x26selectedCondition(model,legendCmpt,\nfieldOrDatumDef))?$jscomp$destructuring$var155.opacity\x3d[Object.assign({},{test:_ref},signalOrValueRef(null!\x3d\x3d_legendCmpt$get3\x26\x26void 0!\x3d\x3d_legendCmpt$get3?_legendCmpt$get3:1)),signalOrValueRef(config.legend.unselectedOpacity)]:_legendCmpt$get3\x26\x26($jscomp$destructuring$var155.opacity\x3dsignalOrValueRef(_legendCmpt$get3)));$jscomp$destructuring$var155\x3dObject.assign({},$jscomp$destructuring$var155,symbolsSpec);return isEmpty($jscomp$destructuring$var155)?void 0:$jscomp$destructuring$var155}},gradient:function(gradientSpec,\n$jscomp$destructuring$var156){var {model,legendType,legendCmpt}\x3d$jscomp$destructuring$var156,_legendCmpt$get4;if(\x22gradient\x22\x3d\x3d\x3dlegendType){var {config,markDef,encoding}\x3dmodel;$jscomp$destructuring$var156\x3d{};var opacity\x3dvoid 0\x3d\x3d\x3d(null!\x3d\x3d(_legendCmpt$get4\x3dlegendCmpt.get(\x22gradientOpacity\x22))\x26\x26void 0!\x3d\x3d_legendCmpt$get4?_legendCmpt$get4:config.legend.gradientOpacity)?getMaxValue(encoding.opacity)||markDef.opacity:void 0;opacity\x26\x26($jscomp$destructuring$var156.opacity\x3dsignalOrValueRef(opacity));$jscomp$destructuring$var156\x3d\nObject.assign({},$jscomp$destructuring$var156,gradientSpec);return isEmpty($jscomp$destructuring$var156)?void 0:$jscomp$destructuring$var156}},labels:function(specifiedlabelsSpec,$jscomp$destructuring$var157){var {fieldOrDatumDef,model,channel,legendCmpt}\x3d$jscomp$destructuring$var157;$jscomp$destructuring$var157\x3dmodel.legend(channel)||{};const config\x3dmodel.config;var condition\x3disFieldDef(fieldOrDatumDef)?selectedCondition(model,legendCmpt,fieldOrDatumDef):void 0;condition\x3dcondition?[{test:condition,\nvalue:1},{value:config.legend.unselectedOpacity}]:void 0;const {format,formatType}\x3d$jscomp$destructuring$var157;$jscomp$destructuring$var157\x3disCustomFormatType(formatType)?formatCustomType({fieldOrDatumDef,field:\x22datum.value\x22,format,formatType,config}):void 0;specifiedlabelsSpec\x3dObject.assign({},condition?{opacity:condition}:{},$jscomp$destructuring$var157?{text:$jscomp$destructuring$var157}:{},specifiedlabelsSpec);return isEmpty(specifiedlabelsSpec)?void 0:specifiedlabelsSpec},entries:function(entriesSpec,\n$jscomp$destructuring$var158){({legendCmpt:$jscomp$destructuring$var158}\x3d$jscomp$destructuring$var158);$jscomp$destructuring$var158\x3d$jscomp$destructuring$var158.get(\x22selections\x22);return(null\x3d\x3d\x3d$jscomp$destructuring$var158||void 0\x3d\x3d\x3d$jscomp$destructuring$var158?0:$jscomp$destructuring$var158.length)?Object.assign({},entriesSpec,{fill:{value:\x22transparent\x22}}):entriesSpec}},legendRules\x3d{direction:$jscomp$destructuring$var159\x3d\x3e{({direction:$jscomp$destructuring$var159}\x3d$jscomp$destructuring$var159);return $jscomp$destructuring$var159},\nformat:$jscomp$destructuring$var160\x3d\x3e{var {fieldOrDatumDef,legend,config}\x3d$jscomp$destructuring$var160;const {format,formatType}\x3dlegend;return guideFormat(fieldOrDatumDef,fieldOrDatumDef.type,format,formatType,config,!1)},formatType:$jscomp$destructuring$var161\x3d\x3e{var {legend,fieldOrDatumDef,scaleType}\x3d$jscomp$destructuring$var161;({formatType:$jscomp$destructuring$var161}\x3dlegend);return guideFormatType($jscomp$destructuring$var161,fieldOrDatumDef,scaleType)},gradientLength:params\x3d\x3e{var _ref,_legend$gradientLengt;\nconst {legend,legendConfig}\x3dparams;if(null!\x3d\x3d(_ref\x3dnull!\x3d\x3d(_legend$gradientLengt\x3dlegend.gradientLength)\x26\x26void 0!\x3d\x3d_legend$gradientLengt?_legend$gradientLengt:legendConfig.gradientLength)\x26\x26void 0!\x3d\x3d_ref)params\x3d_ref;else{{var {legendConfig:legendConfig$jscomp$0,model,direction,orient,scaleType}\x3dparams;const {gradientHorizontalMaxLength,gradientHorizontalMinLength,gradientVerticalMaxLength,gradientVerticalMinLength}\x3dlegendConfig$jscomp$0;params\x3dscaleType in CONTINUOUS_TO_CONTINUOUS_INDEX?\x22horizontal\x22\x3d\x3d\x3d\ndirection?\x22top\x22\x3d\x3d\x3dorient||\x22bottom\x22\x3d\x3d\x3dorient?gradientLengthSignal(model,\x22width\x22,gradientHorizontalMinLength,gradientHorizontalMaxLength):gradientHorizontalMinLength:gradientLengthSignal(model,\x22height\x22,gradientVerticalMinLength,gradientVerticalMaxLength):void 0}}return params},labelOverlap:$jscomp$destructuring$var162\x3d\x3e{var {legend,legendConfig,scaleType}\x3d$jscomp$destructuring$var162,_ref2,_legend$labelOverlap;$jscomp$destructuring$var162\x3dnull!\x3d\x3d(_ref2\x3dnull!\x3d\x3d(_legend$labelOverlap\x3dlegend.labelOverlap)\x26\x26\nvoid 0!\x3d\x3d_legend$labelOverlap?_legend$labelOverlap:legendConfig.labelOverlap)\x26\x26void 0!\x3d\x3d_ref2?_ref2:contains([\x22quantile\x22,\x22threshold\x22,\x22log\x22,\x22symlog\x22],scaleType)?\x22greedy\x22:void 0;return $jscomp$destructuring$var162},symbolType:$jscomp$destructuring$var163\x3d\x3e{var {legend,markDef,channel,encoding}\x3d$jscomp$destructuring$var163,_legend$symbolType;if(null!\x3d\x3d(_legend$symbolType\x3dlegend.symbolType)\x26\x26void 0!\x3d\x3d_legend$symbolType)var JSCompiler_temp\x3d_legend$symbolType;else a:{$jscomp$destructuring$var163\x3dmarkDef.type;\n_legend$symbolType\x3dmarkDef.shape;if(\x22shape\x22!\x3d\x3dchannel\x26\x26(_legend$symbolType\x3dnull!\x3d\x3d(JSCompiler_temp\x3dgetFirstConditionValue(encoding.shape))\x26\x26void 0!\x3d\x3dJSCompiler_temp?JSCompiler_temp:_legend$symbolType)){JSCompiler_temp\x3d_legend$symbolType;break a}switch($jscomp$destructuring$var163){case \x22bar\x22:case \x22rect\x22:case \x22image\x22:case \x22square\x22:JSCompiler_temp\x3d\x22square\x22;break a;case \x22line\x22:case \x22trail\x22:case \x22rule\x22:JSCompiler_temp\x3d\x22stroke\x22;break a;case \x22arc\x22:case \x22point\x22:case \x22circle\x22:case \x22tick\x22:case \x22geoshape\x22:case \x22area\x22:case \x22text\x22:JSCompiler_temp\x3d\n\x22circle\x22;break a}JSCompiler_temp\x3dvoid 0}return JSCompiler_temp},title:$jscomp$destructuring$var164\x3d\x3e{var {fieldOrDatumDef,config}\x3d$jscomp$destructuring$var164;return title$jscomp$0(fieldOrDatumDef,config,{allowDisabling:!0})},type:$jscomp$destructuring$var165\x3d\x3e{var {legendType,scaleType,channel}\x3d$jscomp$destructuring$var165;if(isColorChannel(channel)\x26\x26scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX){if(\x22gradient\x22\x3d\x3d\x3dlegendType)return}else if(\x22symbol\x22\x3d\x3d\x3dlegendType)return;return legendType},values:$jscomp$destructuring$var166\x3d\x3e\n{var {fieldOrDatumDef,legend}\x3d$jscomp$destructuring$var166;$jscomp$destructuring$var166\x3dlegend.values;$jscomp$destructuring$var166\x3disArray($jscomp$destructuring$var166)?valueArray(fieldOrDatumDef,$jscomp$destructuring$var166):isSignalRef($jscomp$destructuring$var166)?$jscomp$destructuring$var166:void 0;return $jscomp$destructuring$var166}},PROJECTION_PROPERTIES\x3d\x22type clipAngle clipExtent center rotate precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt\x22.split(\x22 \x22);\nclass ProjectionComponent extends Split{constructor(name,specifiedProjection,size,data){super(Object.assign({},specifiedProjection),{name});this.specifiedProjection\x3dspecifiedProjection;this.size\x3dsize;this.data\x3ddata;_defineProperty(this,\x22merged\x22,!1)}get isFit(){return!!this.data}}class BinNode extends DataFlowNode{clone(){return new BinNode(null,duplicate(this.bins))}constructor(parent,bins){super(parent);this.bins\x3dbins}static makeFromEncoding(parent,model){const bins\x3dmodel.reduceFieldDef((binComponentIndex,\nfieldDef,channel)\x3d\x3e{if(isTypedFieldDef(fieldDef)\x26\x26isBinning(fieldDef.bin)){const {key,binComponent}\x3dcreateBinComponent(fieldDef,fieldDef.bin,model);binComponentIndex[key]\x3dObject.assign({},binComponent,binComponentIndex[key],rangeFormula(model,fieldDef,channel,model.config))}return binComponentIndex},{});return isEmpty(bins)?null:new BinNode(parent,bins)}static makeFromTransform(parent,t,model){const {key,binComponent}\x3dcreateBinComponent(t,t.bin,model);return new BinNode(parent,{[key]:binComponent})}merge(other,\nrenameSignal){for(const key of keys$jscomp$0(other.bins))key in this.bins?(renameSignal(other.bins[key].signal,this.bins[key].signal),this.bins[key].as\x3dunique([...this.bins[key].as,...other.bins[key].as],hash)):this.bins[key]\x3dother.bins[key];for(const child of other.children)other.removeChild(child),child.parent\x3dthis;other.remove()}producedFields(){return new Set(vals(this.bins).map(c\x3d\x3ec.as).flat(2))}dependentFields(){return new Set(vals(this.bins).map(c\x3d\x3ec.field))}hash(){return\x22Bin \x22.concat(hash(this.bins))}assemble(){return vals(this.bins).flatMap(bin\x3d\x3e\n{const transform\x3d[],[binAs,...remainingAs]\x3dbin.as;var $jscomp$destructuring$var172\x3dbin.bin,$jscomp$destructuring$var173\x3dObject.assign({},$jscomp$destructuring$var172);$jscomp$destructuring$var172\x3d$jscomp$destructuring$var172.extent;$jscomp$destructuring$var173\x3d(delete $jscomp$destructuring$var173.extent,$jscomp$destructuring$var173);$jscomp$destructuring$var173\x3dObject.assign({},{type:\x22bin\x22,field:replacePathInField(bin.field),as:binAs,signal:bin.signal},isSelectionExtent($jscomp$destructuring$var172)?\n{extent:null}:{extent:$jscomp$destructuring$var172},bin.span?{span:{signal:\x22span(\x22.concat(bin.span,\x22)\x22)}}:{},$jscomp$destructuring$var173);!$jscomp$destructuring$var172\x26\x26bin.extentSignal\x26\x26(transform.push({type:\x22extent\x22,field:replacePathInField(bin.field),signal:bin.extentSignal}),$jscomp$destructuring$var173.extent\x3d{signal:bin.extentSignal});transform.push($jscomp$destructuring$var173);for(const as of remainingAs)for($jscomp$destructuring$var172\x3d0;2\x3e$jscomp$destructuring$var172;$jscomp$destructuring$var172++)transform.push({type:\x22formula\x22,\nexpr:vgField({field:binAs[$jscomp$destructuring$var172]},{expr:\x22datum\x22}),as:as[$jscomp$destructuring$var172]});bin.formula\x26\x26transform.push({type:\x22formula\x22,expr:bin.formula,as:bin.formulaAs});return transform})}}class AggregateNode extends DataFlowNode{clone(){return new AggregateNode(null,new Set(this.dimensions),duplicate(this.measures))}constructor(parent,dimensions,measures){super(parent);this.dimensions\x3ddimensions;this.measures\x3dmeasures}get groupBy(){return this.dimensions}static makeFromEncoding(parent,\nmodel){let isAggregate\x3d!1;model.forEachFieldDef(fd\x3d\x3e{fd.aggregate\x26\x26(isAggregate\x3d!0)});const meas\x3d{},dims\x3dnew Set;if(!isAggregate)return null;model.forEachFieldDef((fieldDef,channel)\x3d\x3e{const {aggregate,field}\x3dfieldDef;if(aggregate)if(\x22count\x22\x3d\x3d\x3daggregate){var _meas$;meas[\x22*\x22]\x3dnull!\x3d\x3d(_meas$\x3dmeas[\x22*\x22])\x26\x26void 0!\x3d\x3d_meas$?_meas$:{};meas[\x22*\x22].count\x3dnew Set([vgField(fieldDef,{forAs:!0})])}else{if(isArgminDef(aggregate)||isArgmaxDef(aggregate)){var _meas$argField;fieldDef\x3disArgminDef(aggregate)?\x22argmin\x22:\x22argmax\x22;\n_meas$\x3daggregate[fieldDef];meas[_meas$]\x3dnull!\x3d\x3d(_meas$argField\x3dmeas[_meas$])\x26\x26void 0!\x3d\x3d_meas$argField?_meas$argField:{};meas[_meas$][fieldDef]\x3dnew Set([vgField({op:fieldDef,field:_meas$},{forAs:!0})])}else{var _meas$field;meas[field]\x3dnull!\x3d\x3d(_meas$field\x3dmeas[field])\x26\x26void 0!\x3d\x3d_meas$field?_meas$field:{};meas[field][aggregate]\x3dnew Set([vgField(fieldDef,{forAs:!0})])}if(SCALE_CHANNEL_INDEX[channel]\x26\x26\x22unaggregated\x22\x3d\x3d\x3dmodel.scaleDomain(channel)){var _meas$field2;meas[field]\x3dnull!\x3d\x3d(_meas$field2\x3dmeas[field])\x26\x26\nvoid 0!\x3d\x3d_meas$field2?_meas$field2:{};meas[field].min\x3dnew Set([vgField({field,aggregate:\x22min\x22},{forAs:!0})]);meas[field].max\x3dnew Set([vgField({field,aggregate:\x22max\x22},{forAs:!0})])}}else _meas$argField\x3disUnitModel(model)?model.encoding[getSecondaryRangeChannel(channel)]:void 0,isTypedFieldDef(fieldDef)\x26\x26isUnitModel(model)\x26\x26hasBand(channel,fieldDef,_meas$argField,model.stack,model.markDef,model.config)?(dims.add(vgField(fieldDef,{})),dims.add(vgField(fieldDef,{suffix:\x22end\x22})),fieldDef.bin\x26\x26binRequiresRange(fieldDef,\nchannel)\x26\x26dims.add(vgField(fieldDef,{binSuffix:\x22range\x22}))):channel in GEO_POSIITON_CHANNEL_INDEX?(channel\x3dgetPositionChannelFromLatLong(channel),dims.add(model.getName(channel))):dims.add(vgField(fieldDef))});return 0\x3d\x3d\x3ddims.size+keys$jscomp$0(meas).length?null:new AggregateNode(parent,dims,meas)}static makeFromTransform(parent,t){const dims\x3dnew Set,meas\x3d{};for(const s of t.aggregate){const {op,field,as}\x3ds;if(op)if(\x22count\x22\x3d\x3d\x3dop){var _meas$2;meas[\x22*\x22]\x3dnull!\x3d\x3d(_meas$2\x3dmeas[\x22*\x22])\x26\x26void 0!\x3d\x3d_meas$2?_meas$2:\n{};meas[\x22*\x22].count\x3dnew Set([as?as:vgField(s,{forAs:!0})])}else{var _meas$field3;meas[field]\x3dnull!\x3d\x3d(_meas$field3\x3dmeas[field])\x26\x26void 0!\x3d\x3d_meas$field3?_meas$field3:{};meas[field][op]\x3dnew Set([as?as:vgField(s,{forAs:!0})])}}for(const s of null!\x3d\x3d(_t$groupby\x3dt.groupby)\x26\x26void 0!\x3d\x3d_t$groupby?_t$groupby:[]){var _t$groupby;dims.add(s)}return 0\x3d\x3d\x3ddims.size+keys$jscomp$0(meas).length?null:new AggregateNode(parent,dims,meas)}merge(other){if(setEqual(this.dimensions,other.dimensions)){var parentMeasures\x3dthis.measures;\nother\x3dother.measures;for(const field of keys$jscomp$0(other)){const ops\x3dother[field];for(const op of keys$jscomp$0(ops))if(field in parentMeasures){var _parentMeasures$field;parentMeasures[field][op]\x3dnew Set([...null!\x3d\x3d(_parentMeasures$field\x3dparentMeasures[field][op])\x26\x26void 0!\x3d\x3d_parentMeasures$field?_parentMeasures$field:[],...ops[op]])}else parentMeasures[field]\x3d{[op]:ops[op]}}return!0}current.debug(...[\x22different dimensions, cannot merge\x22]);return!1}addDimensions(fields){fields.forEach(this.dimensions.add,\nthis.dimensions)}dependentFields(){return new Set([...this.dimensions,...keys$jscomp$0(this.measures)])}producedFields(){const out\x3dnew Set;for(const field of keys$jscomp$0(this.measures))for(const op of keys$jscomp$0(this.measures[field])){const m\x3dthis.measures[field][op];0\x3d\x3d\x3dm.size?out.add(\x22\x22.concat(op,\x22_\x22).concat(field)):m.forEach(out.add,out)}return out}hash(){return\x22Aggregate \x22.concat(hash({dimensions:this.dimensions,measures:this.measures}))}assemble(){const ops\x3d[],fields\x3d[],as\x3d[];for(const field of keys$jscomp$0(this.measures))for(const op of keys$jscomp$0(this.measures[field]))for(const alias of this.measures[field][op])as.push(alias),\nops.push(op),fields.push(\x22*\x22\x3d\x3d\x3dfield?null:replacePathInField(field));return{type:\x22aggregate\x22,groupby:[...this.dimensions].map(replacePathInField),ops,fields,as}}}class FacetNode extends DataFlowNode{constructor(parent,model,name,data){super(parent);this.model\x3dmodel;this.name\x3dname;this.data\x3ddata;_defineProperty(this,\x22column\x22,void 0);_defineProperty(this,\x22row\x22,void 0);_defineProperty(this,\x22facet\x22,void 0);_defineProperty(this,\x22childModel\x22,void 0);for(const channel of FACET_CHANNELS)if(parent\x3dmodel.facet[channel]){const {bin,\nsort}\x3dparent;this[channel]\x3dObject.assign({},{name:model.getName(\x22\x22.concat(channel,\x22_domain\x22)),fields:[vgField(parent),...isBinning(bin)?[vgField(parent,{binSuffix:\x22end\x22})]:[]]},isSortField(sort)?{sortField:sort}:isArray(sort)?{sortIndexField:sortArrayIndexField(parent,channel)}:{})}this.childModel\x3dmodel.child}hash(){let out\x3d\x22Facet\x22;for(const channel of FACET_CHANNELS)this[channel]\x26\x26(out+\x3d\x22 \x22.concat(channel.charAt(0),\x22:\x22).concat(hash(this[channel])));return out}get fields(){const f\x3d[];for(const channel of FACET_CHANNELS){var _this$channel;\n(null\x3d\x3d\x3d(_this$channel\x3dthis[channel])||void 0\x3d\x3d\x3d_this$channel?0:_this$channel.fields)\x26\x26f.push(...this[channel].fields)}return f}dependentFields(){const depFields\x3dnew Set(this.fields);for(const channel of FACET_CHANNELS)this[channel]\x26\x26(this[channel].sortField\x26\x26depFields.add(this[channel].sortField.field),this[channel].sortIndexField\x26\x26depFields.add(this[channel].sortIndexField));return depFields}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const childIndependentFieldsWithStep\x3d\n{};for(const channel of POSITION_SCALE_CHANNELS){var childScaleComponent\x3dthis.childModel.component.scales[channel];if(childScaleComponent\x26\x26!childScaleComponent.merged){var type\x3dchildScaleComponent.get(\x22type\x22);childScaleComponent\x3dchildScaleComponent.get(\x22range\x22);type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(childScaleComponent)\x26\x26(type\x3dassembleDomain(this.childModel,channel),(type\x3dgetFieldFromDomain(type))?childIndependentFieldsWithStep[channel]\x3dtype:warn(unknownField(channel)))}}return childIndependentFieldsWithStep}assembleRowColumnHeaderData(channel,\ncrossedDataName,childIndependentFieldsWithStep){const childChannel\x3d{row:\x22y\x22,column:\x22x\x22}[channel],fields\x3d[],ops\x3d[],as\x3d[];childIndependentFieldsWithStep\x26\x26childIndependentFieldsWithStep[childChannel]\x26\x26(crossedDataName?(fields.push(\x22distinct_\x22.concat(childIndependentFieldsWithStep[childChannel])),ops.push(\x22max\x22)):(fields.push(childIndependentFieldsWithStep[childChannel]),ops.push(\x22distinct\x22)),as.push(\x22distinct_\x22.concat(childIndependentFieldsWithStep[childChannel])));const {sortField,sortIndexField}\x3dthis[channel];\nif(sortField){const {op\x3d\x22min\x22,field}\x3dsortField;fields.push(field);ops.push(op);as.push(vgField(sortField,{forAs:!0}))}else sortIndexField\x26\x26(fields.push(sortIndexField),ops.push(\x22max\x22),as.push(sortIndexField));return{name:this[channel].name,source:null!\x3d\x3dcrossedDataName\x26\x26void 0!\x3d\x3dcrossedDataName?crossedDataName:this.data,transform:[Object.assign({},{type:\x22aggregate\x22,groupby:this[channel].fields},fields.length?{fields,ops,as}:{})]}}assembleFacetHeaderData(childIndependentFieldsWithStep){const {columns}\x3d\nthis.model.layout,{layoutHeaders}\x3dthis.model.component,data\x3d[],hasSharedAxis\x3d{};for(const headerChannel of HEADER_CHANNELS){for(const headerType of HEADER_TYPES){var _ref,headers\x3dnull!\x3d\x3d(_ref\x3dlayoutHeaders[headerChannel]\x26\x26layoutHeaders[headerChannel][headerType])\x26\x26void 0!\x3d\x3d_ref?_ref:[];for(const header of headers){var _header$axes;if(0\x3c(null\x3d\x3d\x3d(_header$axes\x3dheader.axes)||void 0\x3d\x3d\x3d_header$axes?void 0:_header$axes.length)){hasSharedAxis[headerChannel]\x3d!0;break}}}hasSharedAxis[headerChannel]\x26\x26(headers\x3d\n\x27length(data(\x22\x27.concat(this.facet.name,\x27\x22))\x27),headers\x3d\x22row\x22\x3d\x3d\x3dheaderChannel?columns?{signal:\x22ceil(\x22.concat(headers,\x22 / \x22).concat(columns,\x22)\x22)}:1:columns?{signal:\x22min(\x22.concat(headers,\x22, \x22).concat(columns,\x22)\x22)}:{signal:headers},data.push({name:\x22\x22.concat(this.facet.name,\x22_\x22).concat(headerChannel),transform:[{type:\x22sequence\x22,start:0,stop:headers}]}))}const {row,column}\x3dhasSharedAxis;(row||column)\x26\x26data.unshift(this.assembleRowColumnHeaderData(\x22facet\x22,null,childIndependentFieldsWithStep));return data}assemble(){const data\x3d\n[];var crossedDataName\x3dnull;const childIndependentFieldsWithStep\x3dthis.getChildIndependentFieldsWithStep(),{column,row,facet}\x3dthis;if(column\x26\x26row\x26\x26(childIndependentFieldsWithStep.x||childIndependentFieldsWithStep.y)){var _childIndependentFiel,_childIndependentFiel2;crossedDataName\x3d\x22cross_\x22.concat(this.column.name,\x22_\x22).concat(this.row.name);const fields\x3d[].concat(null!\x3d\x3d(_childIndependentFiel\x3dchildIndependentFieldsWithStep.x)\x26\x26void 0!\x3d\x3d_childIndependentFiel?_childIndependentFiel:[],null!\x3d\x3d(_childIndependentFiel2\x3d\nchildIndependentFieldsWithStep.y)\x26\x26void 0!\x3d\x3d_childIndependentFiel2?_childIndependentFiel2:[]);_childIndependentFiel\x3dfields.map(()\x3d\x3e\x22distinct\x22);data.push({name:crossedDataName,source:this.data,transform:[{type:\x22aggregate\x22,groupby:this.fields,fields,ops:_childIndependentFiel}]})}for(const channel of[\x22column\x22,\x22row\x22])this[channel]\x26\x26data.push(this.assembleRowColumnHeaderData(channel,crossedDataName,childIndependentFieldsWithStep));facet\x26\x26(crossedDataName\x3dthis.assembleFacetHeaderData(childIndependentFieldsWithStep))\x26\x26\ndata.push(...crossedDataName);return data}}class ParseNode extends DataFlowNode{clone(){return new ParseNode(null,duplicate(this._parse))}constructor(parent,parse){super(parent);_defineProperty(this,\x22_parse\x22,void 0);this._parse\x3dparse}hash(){return\x22Parse \x22.concat(hash(this._parse))}static makeExplicit(parent,model,ancestorParse){let explicit\x3d{};model\x3dmodel.data;!isGenerator(model)\x26\x26model\x26\x26model.format\x26\x26model.format.parse\x26\x26(explicit\x3dmodel.format.parse);return this.makeWithAncestors(parent,explicit,\n{},ancestorParse)}static makeWithAncestors(parent,explicit,implicit,ancestorParse){for(var field of keys$jscomp$0(implicit)){const parsedAs\x3dancestorParse.getWithExplicit(field);void 0!\x3d\x3dparsedAs.value\x26\x26(parsedAs.explicit||parsedAs.value\x3d\x3d\x3dimplicit[field]||\x22derived\x22\x3d\x3d\x3dparsedAs.value||\x22flatten\x22\x3d\x3d\x3dimplicit[field]?delete implicit[field]:warn(differentParse(field,implicit[field],parsedAs.value)))}for(var field$jscomp$0 of keys$jscomp$0(explicit))field\x3dancestorParse.get(field$jscomp$0),void 0!\x3d\x3dfield\x26\x26\n(field\x3d\x3d\x3dexplicit[field$jscomp$0]?delete explicit[field$jscomp$0]:warn(differentParse(field$jscomp$0,explicit[field$jscomp$0],field)));explicit\x3dnew Split(explicit,implicit);ancestorParse.copyAll(explicit);implicit\x3d{};for(const key of keys$jscomp$0(explicit.combine()))field$jscomp$0\x3dexplicit.get(key),null!\x3d\x3dfield$jscomp$0\x26\x26(implicit[key]\x3dfield$jscomp$0);return 0\x3d\x3d\x3dkeys$jscomp$0(implicit).length||ancestorParse.parseNothing?null:new ParseNode(parent,implicit)}get parse(){return this._parse}merge(other){this._parse\x3d\nObject.assign({},this._parse,other.parse);other.remove()}assembleFormatParse(){const formatParse\x3d{};for(const field of keys$jscomp$0(this._parse)){const p\x3dthis._parse[field];1\x3d\x3d\x3daccessPathDepth(field)\x26\x26(formatParse[field]\x3dp)}return formatParse}producedFields(){return new Set(keys$jscomp$0(this._parse))}dependentFields(){return new Set(keys$jscomp$0(this._parse))}assembleTransforms(onlyNested){onlyNested\x3dvoid 0\x3d\x3d\x3donlyNested?!1:onlyNested;return keys$jscomp$0(this._parse).filter(field\x3d\x3eonlyNested?1\x3c\naccessPathDepth(field):!0).map(field\x3d\x3e{const expr\x3dparseExpression$1(field,this._parse[field]);return expr?{type:\x22formula\x22,expr,as:removePathFromField(field)}:null}).filter(t\x3d\x3enull!\x3d\x3dt)}}class IdentifierNode extends DataFlowNode{clone(){return new IdentifierNode(null)}constructor(parent){super(parent)}dependentFields(){return new Set}producedFields(){return new Set([\x22_vgsid_\x22])}hash(){return\x22Identifier\x22}assemble(){return{type:\x22identifier\x22,as:\x22_vgsid_\x22}}}class GraticuleNode extends DataFlowNode{clone(){return new GraticuleNode(null,\nthis.params)}constructor(parent,params){super(parent);this.params\x3dparams}dependentFields(){return new Set}producedFields(){}hash(){return\x22Graticule \x22.concat(hash(this.params))}assemble(){return Object.assign({},{type:\x22graticule\x22},!0\x3d\x3d\x3dthis.params?{}:this.params)}}class SequenceNode extends DataFlowNode{clone(){return new SequenceNode(null,this.params)}constructor(parent,params){super(parent);this.params\x3dparams}dependentFields(){return new Set}producedFields(){var _this$params$as;return new Set([null!\x3d\x3d\n(_this$params$as\x3dthis.params.as)\x26\x26void 0!\x3d\x3d_this$params$as?_this$params$as:\x22data\x22])}hash(){return\x22Hash \x22.concat(hash(this.params))}assemble(){return Object.assign({},{type:\x22sequence\x22},this.params)}}class SourceNode extends DataFlowNode{constructor(data){var _data;super(null);_defineProperty(this,\x22_data\x22,void 0);_defineProperty(this,\x22_name\x22,void 0);_defineProperty(this,\x22_generator\x22,void 0);data\x3dnull!\x3d\x3d(_data\x3ddata)\x26\x26void 0!\x3d\x3d_data?_data:{name:\x22source\x22};let format;isGenerator(data)||(format\x3ddata.format?\nObject.assign({},omit(data.format,[\x22parse\x22])):{});if(\x22values\x22in data)this._data\x3d{values:data.values};else if(\x22url\x22in data)this._data\x3d{url:data.url},format.type||(_data\x3d/(?:\\.([^.]+))?$/.exec(data.url)[1],contains([\x22json\x22,\x22csv\x22,\x22tsv\x22,\x22dsv\x22,\x22topojson\x22],_data)||(_data\x3d\x22json\x22),format.type\x3d_data);else if(\x22sphere\x22in data)this._data\x3d{values:[{type:\x22Sphere\x22}]};else if(isNamedData(data)||isGenerator(data))this._data\x3d{};this._generator\x3disGenerator(data);data.name\x26\x26(this._name\x3ddata.name);format\x26\x26!isEmpty(format)\x26\x26\n(this._data.format\x3dformat)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(name){this._name\x3dname}set parent(parent){throw Error(\x22Source nodes have to be roots.\x22);}remove(){throw Error(\x22Source nodes are roots and cannot be removed.\x22);}hash(){throw Error(\x22Cannot hash sources\x22);}assemble(){return Object.assign({},{name:this._name},this._data,{transform:[]})}}\nvar _modified\x3dnew WeakMap;class Optimizer{constructor(){_modified.set(this,{writable:!0,value:void 0});_classPrivateFieldSet(this,_modified,!1)}setModified(){_classPrivateFieldSet(this,_modified,!0)}get modifiedFlag(){var JSCompiler_inline_result\x3d_modified.get(this);if(!JSCompiler_inline_result)throw new TypeError(\x22attempted to get private field on non-instance\x22);JSCompiler_inline_result\x3dJSCompiler_inline_result.get?JSCompiler_inline_result.get.call(this):JSCompiler_inline_result.value;return JSCompiler_inline_result}}\nclass BottomUpOptimizer extends Optimizer{getNodeDepths(node,depth,depths){depths.set(node,depth);for(const child of node.children)this.getNodeDepths(child,depth+1,depths);return depths}optimize(node){node\x3d[...this.getNodeDepths(node,0,new Map).entries()].sort((a,b)\x3d\x3eb[1]-a[1]);for(const tuple of node)this.run(tuple[0]);return this.modifiedFlag}}class TopDownOptimizer extends Optimizer{optimize(node){this.run(node);for(const child of node.children)this.optimize(child);return this.modifiedFlag}}class MergeIdenticalNodes extends TopDownOptimizer{mergeNodes(parent,\nnodes){const mergedNode\x3dnodes.shift();for(const node of nodes)parent.removeChild(node),node.parent\x3dmergedNode,node.remove()}run(node){const hashes\x3dnode.children.map(x\x3d\x3ex.hash()),buckets\x3d{};for(let i\x3d0;i\x3chashes.length;i++)void 0\x3d\x3d\x3dbuckets[hashes[i]]?buckets[hashes[i]]\x3d[node.children[i]]:buckets[hashes[i]].push(node.children[i]);for(const k of keys$jscomp$0(buckets))1\x3cbuckets[k].length\x26\x26(this.setModified(),this.mergeNodes(node,buckets[k]))}}class RemoveUnnecessaryIdentifierNodes extends TopDownOptimizer{constructor(model){super();\n_defineProperty(this,\x22requiresSelectionId\x22,void 0);this.requiresSelectionId\x3dmodel\x26\x26requiresSelectionId(model)}run(node){!(node instanceof IdentifierNode)||this.requiresSelectionId\x26\x26(isDataSourceNode(node.parent)||node.parent instanceof AggregateNode||node.parent instanceof ParseNode)||(this.setModified(),node.remove())}}class RemoveDuplicateTimeUnits extends Optimizer{optimize(node){this.run(node,new Set);return this.modifiedFlag}run(node,timeUnitFields){let producedFields\x3dnew Set;node instanceof\nTimeUnitNode\x26\x26(producedFields\x3dnode.producedFields(),hasIntersection(producedFields,timeUnitFields)\x26\x26(this.setModified(),node.removeFormulas(timeUnitFields),0\x3d\x3d\x3dnode.producedFields.length\x26\x26node.remove()));for(const child of node.children)this.run(child,new Set([...timeUnitFields,...producedFields]))}}class RemoveUnnecessaryOutputNodes extends TopDownOptimizer{constructor(){super()}run(node){node instanceof OutputNode\x26\x26!node.isRequired()\x26\x26(this.setModified(),node.remove())}}class MoveParseUp extends BottomUpOptimizer{run(node){if(!(isDataSourceNode(node)||\n1\x3cnode.numChildren()))for(const child of node.children)child instanceof ParseNode\x26\x26(node instanceof ParseNode?(this.setModified(),node.merge(child)):fieldIntersection(node.producedFields(),child.dependentFields())||(this.setModified(),child.swapWithParent()))}}class MergeParse extends BottomUpOptimizer{run(node){const originalChildren\x3d[...node.children];var parseChildren\x3dnode.children.filter(child\x3d\x3echild instanceof ParseNode);if(1\x3cnode.numChildren()\x26\x261\x3c\x3dparseChildren.length){const commonParse\x3d{};\nvar conflictingParse\x3dnew Set;for(const parseNode of parseChildren){parseChildren\x3dparseNode.parse;for(const k of keys$jscomp$0(parseChildren))k in commonParse?commonParse[k]!\x3d\x3dparseChildren[k]\x26\x26conflictingParse.add(k):commonParse[k]\x3dparseChildren[k]}for(const field of conflictingParse)delete commonParse[field];if(!isEmpty(commonParse)){this.setModified();conflictingParse\x3dnew ParseNode(node,commonParse);for(const childNode of originalChildren){if(childNode instanceof ParseNode)for(const key of keys$jscomp$0(commonParse))delete childNode.parse[key];\nnode.removeChild(childNode);childNode.parent\x3dconflictingParse;childNode instanceof ParseNode\x26\x260\x3d\x3d\x3dkeys$jscomp$0(childNode.parse).length\x26\x26childNode.remove()}}}}}class RemoveUnusedSubtrees extends BottomUpOptimizer{run(node){node instanceof OutputNode||0\x3cnode.numChildren()||node instanceof FacetNode||node instanceof SourceNode||(this.setModified(),node.remove())}}class MergeTimeUnits extends BottomUpOptimizer{run(node){node\x3dnode.children.filter(x\x3d\x3ex instanceof TimeUnitNode);const combination\x3dnode.pop();\nfor(const timeUnit of node)this.setModified(),combination.merge(timeUnit)}}class MergeAggregates extends BottomUpOptimizer{run(node){var aggChildren\x3dnode.children.filter(child\x3d\x3echild instanceof AggregateNode);const groupedAggregates\x3d{};for(var agg of aggChildren)aggChildren\x3dhash(agg.groupBy),aggChildren in groupedAggregates||(groupedAggregates[aggChildren]\x3d[]),groupedAggregates[aggChildren].push(agg);for(const group of keys$jscomp$0(groupedAggregates))if(agg\x3dgroupedAggregates[group],1\x3cagg.length){aggChildren\x3d\nagg.pop();for(const agg$jscomp$0 of agg)aggChildren.merge(agg$jscomp$0)\x26\x26(node.removeChild(agg$jscomp$0),agg$jscomp$0.parent\x3daggChildren,agg$jscomp$0.remove(),this.setModified())}}}class MergeBins extends BottomUpOptimizer{constructor(model){super();this.model\x3dmodel}run(node){var moveBinsUp\x3d!(isDataSourceNode(node)||node instanceof FilterNode||node instanceof ParseNode||node instanceof IdentifierNode);const promotableBins\x3d[],remainingBins\x3d[];for(const child of node.children)child instanceof BinNode\x26\x26\n(moveBinsUp\x26\x26!fieldIntersection(node.producedFields(),child.dependentFields())?promotableBins.push(child):remainingBins.push(child));if(0\x3cpromotableBins.length){moveBinsUp\x3dpromotableBins.pop();for(const bin of promotableBins)moveBinsUp.merge(bin,this.model.renameSignal.bind(this.model));this.setModified();node instanceof BinNode?node.merge(moveBinsUp,this.model.renameSignal.bind(this.model)):moveBinsUp.swapWithParent()}if(1\x3cremainingBins.length){node\x3dremainingBins.pop();for(const bin of remainingBins)node.merge(bin,\nthis.model.renameSignal.bind(this.model));this.setModified()}}}class MergeOutputs extends BottomUpOptimizer{run(node){var children\x3d[...node.children];if(some(children,child\x3d\x3echild instanceof OutputNode)\x26\x26!(1\x3e\x3dnode.numChildren())){var otherChildren\x3d[];for(const child of children)if(child instanceof OutputNode){for(children\x3dchild;1\x3d\x3d\x3dchildren.numChildren();){const [theChild]\x3dchildren.children;if(theChild instanceof OutputNode)children\x3dtheChild;else break}otherChildren.push(...children.children);if(mainOutput)node.removeChild(child),\nchild.parent\x3dmainOutput.parent,mainOutput.parent.removeChild(mainOutput),mainOutput.parent\x3dchildren,this.setModified();else var mainOutput\x3dchildren}else otherChildren.push(child);if(otherChildren.length){this.setModified();for(const child of otherChildren)child.parent.removeChild(child),child.parent\x3dmainOutput}}}}class JoinAggregateTransformNode extends DataFlowNode{clone(){return new JoinAggregateTransformNode(null,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3d\ntransform}addDimensions(fields){this.transform.groupby\x3dunique(this.transform.groupby.concat(fields),d\x3d\x3ed)}dependentFields(){const out\x3dnew Set;this.transform.groupby\x26\x26this.transform.groupby.forEach(out.add,out);this.transform.joinaggregate.map(w\x3d\x3ew.field).filter(f\x3d\x3evoid 0!\x3d\x3df).forEach(out.add,out);return out}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(joinAggregateFieldDef){var _joinAggregateFieldDe;return null!\x3d\x3d(_joinAggregateFieldDe\x3djoinAggregateFieldDef.as)\x26\x26\nvoid 0!\x3d\x3d_joinAggregateFieldDe?_joinAggregateFieldDe:vgField(joinAggregateFieldDef)}hash(){return\x22JoinAggregateTransform \x22.concat(hash(this.transform))}assemble(){const fields\x3d[],ops\x3d[],as\x3d[];for(var joinaggregate of this.transform.joinaggregate)ops.push(joinaggregate.op),as.push(this.getDefaultName(joinaggregate)),fields.push(void 0\x3d\x3d\x3djoinaggregate.field?null:joinaggregate.field);joinaggregate\x3dthis.transform.groupby;return Object.assign({},{type:\x22joinaggregate\x22,as,ops,fields},void 0!\x3d\x3djoinaggregate?\n{groupby:joinaggregate}:{})}}class StackNode extends DataFlowNode{clone(){return new StackNode(null,duplicate(this._stack))}constructor(parent,stack){super(parent);_defineProperty(this,\x22_stack\x22,void 0);this._stack\x3dstack}static makeFromTransform(parent,stackTransform){const {stack,groupby,as,offset\x3d\x22zero\x22}\x3dstackTransform;var sortFields\x3d[];const sortOrder\x3d[];if(void 0!\x3d\x3dstackTransform.sort)for(const sortField of stackTransform.sort)sortFields.push(sortField.field),sortOrder.push(getFirstDefined(sortField.order,\n\x22ascending\x22));sortFields\x3d{field:sortFields,order:sortOrder};stackTransform\x3disValidAsArray(as)?as:isString(as)?[as,as+\x22_end\x22]:[stackTransform.stack+\x22_start\x22,stackTransform.stack+\x22_end\x22];return new StackNode(parent,{stackField:stack,groupby,offset,sort:sortFields,facetby:[],as:stackTransform})}static makeFromEncoding(parent,model){var stackProperties\x3dmodel.stack,{encoding}\x3dmodel;if(!stackProperties)return null;const {groupbyChannel,fieldChannel,offset,impute}\x3dstackProperties;let dimensionFieldDef;groupbyChannel\x26\x26\n(dimensionFieldDef\x3dgetFieldDef(encoding[groupbyChannel]));stackProperties\x3dgetStackByFields(model);encoding\x3dmodel.encoding.order;encoding\x3disArray(encoding)||isFieldDef(encoding)?sortParams(encoding):stackProperties.reduce((s,field)\x3d\x3e{s.field.push(field);s.order.push(\x22y\x22\x3d\x3d\x3dfieldChannel?\x22descending\x22:\x22ascending\x22);return s},{field:[],order:[]});return new StackNode(parent,{dimensionFieldDef,stackField:model.vgField(fieldChannel),facetby:[],stackby:stackProperties,sort:encoding,offset,impute,as:[model.vgField(fieldChannel,\n{suffix:\x22start\x22,forAs:!0}),model.vgField(fieldChannel,{suffix:\x22end\x22,forAs:!0})]})}get stack(){return this._stack}addDimensions(fields){this._stack.facetby.push(...fields)}dependentFields(){const out\x3dnew Set;out.add(this._stack.stackField);this.getGroupbyFields().forEach(out.add,out);this._stack.facetby.forEach(out.add,out);this._stack.sort.field.forEach(out.add,out);return out}producedFields(){return new Set(this._stack.as)}hash(){return\x22Stack \x22.concat(hash(this._stack))}getGroupbyFields(){const {dimensionFieldDef,\nimpute,groupby}\x3dthis._stack;return dimensionFieldDef?dimensionFieldDef.bin?impute?[vgField(dimensionFieldDef,{binSuffix:\x22mid\x22})]:[vgField(dimensionFieldDef,{}),vgField(dimensionFieldDef,{binSuffix:\x22end\x22})]:[vgField(dimensionFieldDef)]:null!\x3d\x3dgroupby\x26\x26void 0!\x3d\x3dgroupby?groupby:[]}assemble(){const transform\x3d[],{facetby,dimensionFieldDef,stackField:field,stackby,sort,offset,impute,as}\x3dthis._stack;if(impute\x26\x26dimensionFieldDef){const {band\x3d.5,bin}\x3ddimensionFieldDef;bin\x26\x26transform.push({type:\x22formula\x22,expr:\x22\x22.concat(band,\n\x22*\x22)+vgField(dimensionFieldDef,{expr:\x22datum\x22})+\x22+\x22.concat(1-band,\x22*\x22)+vgField(dimensionFieldDef,{expr:\x22datum\x22,binSuffix:\x22end\x22}),as:vgField(dimensionFieldDef,{binSuffix:\x22mid\x22,forAs:!0})});transform.push({type:\x22impute\x22,field,groupby:[...stackby,...facetby],key:vgField(dimensionFieldDef,{binSuffix:\x22mid\x22}),method:\x22value\x22,value:0})}transform.push({type:\x22stack\x22,groupby:[...this.getGroupbyFields(),...facetby],field,sort,as,offset});return transform}}class WindowTransformNode extends DataFlowNode{clone(){return new WindowTransformNode(null,\nduplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform}addDimensions(fields){this.transform.groupby\x3dunique(this.transform.groupby.concat(fields),d\x3d\x3ed)}dependentFields(){var _this$transform$group,_this$transform$sort;const out\x3dnew Set;(null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?_this$transform$group:[]).forEach(out.add,out);(null!\x3d\x3d(_this$transform$sort\x3dthis.transform.sort)\x26\x26void 0!\x3d\x3d_this$transform$sort?_this$transform$sort:\n[]).forEach(m\x3d\x3eout.add(m.field));this.transform.window.map(w\x3d\x3ew.field).filter(f\x3d\x3evoid 0!\x3d\x3df).forEach(out.add,out);return out}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(windowFieldDef){var _windowFieldDef$as;return null!\x3d\x3d(_windowFieldDef$as\x3dwindowFieldDef.as)\x26\x26void 0!\x3d\x3d_windowFieldDef$as?_windowFieldDef$as:vgField(windowFieldDef)}hash(){return\x22WindowTransform \x22.concat(hash(this.transform))}assemble(){const fields\x3d[],ops\x3d[],as\x3d[],params\x3d[];for(var window of this.transform.window)ops.push(window.op),\nas.push(this.getDefaultName(window)),params.push(void 0\x3d\x3d\x3dwindow.param?null:window.param),fields.push(void 0\x3d\x3d\x3dwindow.field?null:window.field);window\x3dthis.transform.frame;const groupby\x3dthis.transform.groupby;if(window\x26\x26null\x3d\x3d\x3dwindow[0]\x26\x26null\x3d\x3d\x3dwindow[1]\x26\x26ops.every(o\x3d\x3eisAggregateOp(o)))return Object.assign({},{type:\x22joinaggregate\x22,as,ops,fields},void 0!\x3d\x3dgroupby?{groupby}:{});const sortFields\x3d[],sortOrder\x3d[];if(void 0!\x3d\x3dthis.transform.sort)for(const sortField of this.transform.sort){var _sortField$order;\nsortFields.push(sortField.field);sortOrder.push(null!\x3d\x3d(_sortField$order\x3dsortField.order)\x26\x26void 0!\x3d\x3d_sortField$order?_sortField$order:\x22ascending\x22)}_sortField$order\x3dthis.transform.ignorePeers;return Object.assign({},{type:\x22window\x22,params,as,ops,fields,sort:{field:sortFields,order:sortOrder}},void 0!\x3d\x3d_sortField$order?{ignorePeers:_sortField$order}:{},void 0!\x3d\x3dgroupby?{groupby}:{},void 0!\x3d\x3dwindow?{frame:window}:{})}}class SignalRefWrapper{constructor(exprGenerator){_defineProperty(this,\x22signal\x22,void 0);\nObject.defineProperty(this,\x22signal\x22,{enumerable:!0,get:exprGenerator})}static fromName(rename,signalName){return new SignalRefWrapper(()\x3d\x3erename(signalName))}}class ScaleComponent extends Split{constructor(name,typeWithExplicit){super({},{name});_defineProperty(this,\x22merged\x22,!1);this.setWithExplicit(\x22type\x22,typeWithExplicit)}domainDefinitelyIncludesZero(){return!1!\x3d\x3dthis.get(\x22zero\x22)?!0:some(this.get(\x22domains\x22),d\x3d\x3eisArray(d)\x26\x262\x3d\x3d\x3dd.length\x26\x260\x3e\x3dd[0]\x26\x260\x3c\x3dd[1])}}const RANGE_PROPERTIES\x3d[\x22range\x22,\x22scheme\x22],\nscaleRules\x3d{bins:$jscomp$destructuring$var178\x3d\x3e{var {model,fieldOrDatumDef}\x3d$jscomp$destructuring$var178;return isFieldDef(fieldOrDatumDef)?bins$jscomp$1(model,fieldOrDatumDef):void 0},interpolate:$jscomp$destructuring$var179\x3d\x3e{var {channel,fieldOrDatumDef}\x3d$jscomp$destructuring$var179;$jscomp$destructuring$var179\x3dfieldOrDatumDef.type;$jscomp$destructuring$var179\x3dcontains([\x22color\x22,\x22fill\x22,\x22stroke\x22],channel)\x26\x26\x22nominal\x22!\x3d\x3d$jscomp$destructuring$var179?\x22hcl\x22:void 0;return $jscomp$destructuring$var179},\nnice:$jscomp$destructuring$var180\x3d\x3e{var {scaleType,channel,fieldOrDatumDef}\x3d$jscomp$destructuring$var180;var _getFieldDef;$jscomp$destructuring$var180\x3d(null\x3d\x3d\x3d(_getFieldDef\x3dgetFieldDef(fieldOrDatumDef))||void 0\x3d\x3d\x3d_getFieldDef?0:_getFieldDef.bin)||contains([ScaleType.TIME,ScaleType.UTC],scaleType)?void 0:channel in POSITION_SCALE_CHANNEL_INDEX?!0:void 0;return $jscomp$destructuring$var180},padding:$jscomp$destructuring$var181\x3d\x3e{var {channel,scaleType,fieldOrDatumDef,markDef,config}\x3d$jscomp$destructuring$var181;\na:{$jscomp$destructuring$var181\x3dconfig.scale;var barConfig\x3dconfig.bar;if(channel in POSITION_SCALE_CHANNEL_INDEX){if(scaleType in CONTINUOUS_TO_CONTINUOUS_INDEX){if(void 0!\x3d\x3d$jscomp$destructuring$var181.continuousPadding){$jscomp$destructuring$var181\x3d$jscomp$destructuring$var181.continuousPadding;break a}const {type,orient}\x3dmarkDef;if(\x22bar\x22\x3d\x3d\x3dtype\x26\x26(!isFieldDef(fieldOrDatumDef)||!fieldOrDatumDef.bin\x26\x26!fieldOrDatumDef.timeUnit)\x26\x26(\x22vertical\x22\x3d\x3d\x3dorient\x26\x26\x22x\x22\x3d\x3d\x3dchannel||\x22horizontal\x22\x3d\x3d\x3dorient\x26\x26\x22y\x22\x3d\x3d\x3dchannel)){$jscomp$destructuring$var181\x3d\nbarConfig.continuousBandSize;break a}}if(scaleType\x3d\x3d\x3dScaleType.POINT){$jscomp$destructuring$var181\x3d$jscomp$destructuring$var181.pointPadding;break a}}$jscomp$destructuring$var181\x3dvoid 0}return $jscomp$destructuring$var181},paddingInner:$jscomp$destructuring$var182\x3d\x3e{var {scalePadding,channel,markDef,config}\x3d$jscomp$destructuring$var182;if(void 0!\x3d\x3dscalePadding)$jscomp$destructuring$var182\x3dvoid 0;else if(channel in POSITION_SCALE_CHANNEL_INDEX){const {bandPaddingInner,barBandPaddingInner,rectBandPaddingInner}\x3d\nconfig.scale;$jscomp$destructuring$var182\x3dgetFirstDefined(bandPaddingInner,\x22bar\x22\x3d\x3d\x3dmarkDef.type?barBandPaddingInner:rectBandPaddingInner)}else $jscomp$destructuring$var182\x3dvoid 0;return $jscomp$destructuring$var182},paddingOuter:$jscomp$destructuring$var183\x3d\x3e{var {scalePadding,channel,scaleType,scalePaddingInner,config}\x3d$jscomp$destructuring$var183;void 0!\x3d\x3dscalePadding?$jscomp$destructuring$var183\x3dvoid 0:channel in POSITION_SCALE_CHANNEL_INDEX\x26\x26scaleType\x3d\x3d\x3dScaleType.BAND?({bandPaddingOuter:$jscomp$destructuring$var183}\x3d\nconfig.scale,$jscomp$destructuring$var183\x3dgetFirstDefined($jscomp$destructuring$var183,isSignalRef(scalePaddingInner)?{signal:\x22\x22.concat(scalePaddingInner.signal,\x22/2\x22)}:scalePaddingInner/2)):$jscomp$destructuring$var183\x3dvoid 0;return $jscomp$destructuring$var183},reverse:$jscomp$destructuring$var184\x3d\x3e{var {fieldOrDatumDef,scaleType,channel,config}\x3d$jscomp$destructuring$var184;$jscomp$destructuring$var184\x3disFieldDef(fieldOrDatumDef)?fieldOrDatumDef.sort:void 0;var scaleConfig\x3dconfig.scale;$jscomp$destructuring$var184\x3d\n\x22x\x22\x3d\x3d\x3dchannel\x26\x26void 0!\x3d\x3dscaleConfig.xReverse?scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26\x22descending\x22\x3d\x3d\x3d$jscomp$destructuring$var184?isSignalRef(scaleConfig.xReverse)?{signal:\x22!\x22.concat(scaleConfig.xReverse.signal)}:!scaleConfig.xReverse:scaleConfig.xReverse:scaleType in CONTINUOUS_DOMAIN_INDEX\x26\x26\x22descending\x22\x3d\x3d\x3d$jscomp$destructuring$var184?!0:void 0;return $jscomp$destructuring$var184},zero:$jscomp$destructuring$var185\x3d\x3e{var {channel,fieldOrDatumDef,domain,markDef,scaleType}\x3d$jscomp$destructuring$var185;\na:if(domain\x26\x26\x22unaggregated\x22!\x3d\x3ddomain\x26\x26scaleType in CONTINUOUS_DOMAIN_INDEX){if(isArray(domain)\x26\x26($jscomp$destructuring$var185\x3ddomain[domain.length-1],0\x3e\x3ddomain[0]\x26\x260\x3c\x3d$jscomp$destructuring$var185)){$jscomp$destructuring$var185\x3d!0;break a}$jscomp$destructuring$var185\x3d!1}else if(\x22size\x22!\x3d\x3dchannel||\x22quantitative\x22!\x3d\x3dfieldOrDatumDef.type||scaleType in CONTINUOUS_TO_DISCRETE_INDEX)if(isFieldDef(fieldOrDatumDef)\x26\x26fieldOrDatumDef.bin||!contains([...POSITION_SCALE_CHANNELS,...POLAR_POSITION_SCALE_CHANNELS],\nchannel))$jscomp$destructuring$var185\x3d!1;else{const {orient,type}\x3dmarkDef;$jscomp$destructuring$var185\x3dcontains([\x22bar\x22,\x22area\x22,\x22line\x22,\x22trail\x22],type)\x26\x26(\x22horizontal\x22\x3d\x3d\x3dorient\x26\x26\x22y\x22\x3d\x3d\x3dchannel||\x22vertical\x22\x3d\x3d\x3dorient\x26\x26\x22x\x22\x3d\x3d\x3dchannel)?!1:!0}else $jscomp$destructuring$var185\x3d!0;return $jscomp$destructuring$var185}},scaleTypeTieBreaker\x3dtieBreakByComparing((st1,st2)\x3d\x3eSCALE_PRECEDENCE_INDEX[st1]-SCALE_PRECEDENCE_INDEX[st2]);class NameMap{constructor(){_defineProperty(this,\x22nameMap\x22,void 0);this.nameMap\x3d{}}rename(oldName,\nnewName){this.nameMap[oldName]\x3dnewName}has(name){return void 0!\x3d\x3dthis.nameMap[name]}get(name){for(;this.nameMap[name]\x26\x26name!\x3d\x3dthis.nameMap[name];)name\x3dthis.nameMap[name];return name}}class Model{constructor(spec,type,parent,parentGivenName,config,resolve,view){var _spec$name,_spec$transform;this.type\x3dtype;this.parent\x3dparent;this.config\x3dconfig;_defineProperty(this,\x22name\x22,void 0);_defineProperty(this,\x22size\x22,void 0);_defineProperty(this,\x22title\x22,void 0);_defineProperty(this,\x22description\x22,void 0);_defineProperty(this,\n\x22data\x22,void 0);_defineProperty(this,\x22transforms\x22,void 0);_defineProperty(this,\x22layout\x22,void 0);_defineProperty(this,\x22scaleNameMap\x22,void 0);_defineProperty(this,\x22projectionNameMap\x22,void 0);_defineProperty(this,\x22signalNameMap\x22,void 0);_defineProperty(this,\x22component\x22,void 0);_defineProperty(this,\x22view\x22,void 0);_defineProperty(this,\x22children\x22,[]);_defineProperty(this,\x22correctDataNames\x22,mark\x3d\x3e{mark.from\x26\x26mark.from.data\x26\x26(mark.from.data\x3dthis.lookupDataSource(mark.from.data));mark.from\x26\x26mark.from.facet\x26\x26\nmark.from.facet.data\x26\x26(mark.from.facet.data\x3dthis.lookupDataSource(mark.from.facet.data));return mark});this.parent\x3dparent;this.config\x3dconfig;this.view\x3dreplaceExprRefInIndex(view);this.name\x3dnull!\x3d\x3d(_spec$name\x3dspec.name)\x26\x26void 0!\x3d\x3d_spec$name?_spec$name:parentGivenName;this.title\x3disText(spec.title)?{text:spec.title}:spec.title?this.initTitle(spec.title):void 0;this.scaleNameMap\x3dparent?parent.scaleNameMap:new NameMap;this.projectionNameMap\x3dparent?parent.projectionNameMap:new NameMap;this.signalNameMap\x3d\nparent?parent.signalNameMap:new NameMap;this.data\x3dspec.data;this.description\x3dspec.description;this.transforms\x3dnormalizeTransform(null!\x3d\x3d(_spec$transform\x3dspec.transform)\x26\x26void 0!\x3d\x3d_spec$transform?_spec$transform:[]);this.layout\x3d\x22layer\x22\x3d\x3d\x3dtype||\x22unit\x22\x3d\x3d\x3dtype?{}:extractCompositionLayout(spec,type,config);this.component\x3d{data:{sources:parent?parent.component.data.sources:[],outputNodes:parent?parent.component.data.outputNodes:{},outputNodeRefCounts:parent?parent.component.data.outputNodeRefCounts:{},\nisFaceted:\x22facet\x22in spec||parent\x26\x26parent.component.data.isFaceted\x26\x26void 0\x3d\x3d\x3dspec.data},layoutSize:new Split,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({},{scale:{},axis:{},legend:{}},resolve?duplicate(resolve):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}initTitle(title){const props\x3dkeys$jscomp$0(title),titleInternal\x3d{text:signalRefOrValue(title.text)};for(const prop of props)titleInternal[prop]\x3dsignalRefOrValue(title[prop]);return titleInternal}get width(){return this.getSizeSignalRef(\x22width\x22)}get height(){return this.getSizeSignalRef(\x22height\x22)}parse(){this.parseScale();\nthis.parseLayoutSize();this.renameTopLevelLayoutSizeSignal();this.parseSelections();this.parseProjection();this.parseData();this.parseAxesAndHeaders();this.parseLegends();this.parseMarkGroup()}parseScale(){var {ignoreRange}\x3d{};parseScaleCore(this);isUnitModel(this)?parseUnitScaleDomain(this):parseNonUnitScaleDomain(this);for(const prop of NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES)parseScaleProperty(this,prop);ignoreRange||parseScaleRange(this)}parseProjection(){parseProjection(this)}renameTopLevelLayoutSizeSignal(){\x22width\x22!\x3d\x3d\nthis.getName(\x22width\x22)\x26\x26this.renameSignal(this.getName(\x22width\x22),\x22width\x22);\x22height\x22!\x3d\x3dthis.getName(\x22height\x22)\x26\x26this.renameSignal(this.getName(\x22height\x22),\x22height\x22)}parseLegends(){parseLegend(this)}assembleGroupStyle(){if(\x22unit\x22\x3d\x3d\x3dthis.type||\x22layer\x22\x3d\x3d\x3dthis.type){var _this$view$style,_this$view;return null!\x3d\x3d(_this$view$style\x3dnull\x3d\x3d\x3d(_this$view\x3dthis.view)||void 0\x3d\x3d\x3d_this$view?void 0:_this$view.style)\x26\x26void 0!\x3d\x3d_this$view$style?_this$view$style:\x22cell\x22}}assembleEncodeFromView(view){view\x3dObject.assign({},view);\nview\x3d(delete view.style,view);const e\x3d{};for(const property of keys$jscomp$0(view)){const value\x3dview[property];void 0!\x3d\x3dvalue\x26\x26(e[property]\x3dsignalOrValueRef(value))}return e}assembleGroupEncodeEntry(isTopLevel){let encodeEntry\x3d{};this.view\x26\x26(encodeEntry\x3dthis.assembleEncodeFromView(this.view));if(!isTopLevel\x26\x26(this.description\x26\x26(encodeEntry.description\x3dsignalOrValueRef(this.description)),\x22unit\x22\x3d\x3d\x3dthis.type||\x22layer\x22\x3d\x3d\x3dthis.type)){var _encodeEntry;return Object.assign({},{width:this.getSizeSignalRef(\x22width\x22),\nheight:this.getSizeSignalRef(\x22height\x22)},null!\x3d\x3d(_encodeEntry\x3dencodeEntry)\x26\x26void 0!\x3d\x3d_encodeEntry?_encodeEntry:{})}return isEmpty(encodeEntry)?void 0:encodeEntry}assembleLayout(){if(this.layout){var $jscomp$destructuring$var189\x3dthis.layout,$jscomp$destructuring$var190\x3dObject.assign({},$jscomp$destructuring$var189);$jscomp$destructuring$var189\x3d$jscomp$destructuring$var189.spacing;$jscomp$destructuring$var190\x3d(delete $jscomp$destructuring$var190.spacing,$jscomp$destructuring$var190);var {component,config}\x3d\nthis;{var headerComponentIndex\x3dcomponent.layoutHeaders;const titleBand\x3d{};for(JSCompiler_inline_result of FACET_CHANNELS){var headerComponent\x3dheaderComponentIndex[JSCompiler_inline_result];if(null\x3d\x3d\x3dheaderComponent||void 0\x3d\x3d\x3dheaderComponent?0:headerComponent.facetFieldDef){const {titleAnchor,titleOrient}\x3dgetHeaderProperties([\x22titleAnchor\x22,\x22titleOrient\x22],headerComponent.facetFieldDef.header,config,JSCompiler_inline_result);headerComponent\x3dgetHeaderChannel(JSCompiler_inline_result,titleOrient);const band\x3d\nLAYOUT_TITLE_BAND[headerComponent][titleAnchor];void 0!\x3d\x3dband\x26\x26(titleBand[headerComponent]\x3dband)}}var JSCompiler_inline_result\x3disEmpty(titleBand)?void 0:titleBand}return Object.assign({},{padding:$jscomp$destructuring$var189},this.assembleDefaultLayout(),$jscomp$destructuring$var190,JSCompiler_inline_result?{titleBand:JSCompiler_inline_result}:{})}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const {layoutHeaders}\x3dthis.component;let headerMarks\x3d[];for(const channel of FACET_CHANNELS)layoutHeaders[channel].title\x26\x26\nheaderMarks.push(assembleTitleGroup(this,channel));for(const channel of HEADER_CHANNELS)headerMarks\x3dheaderMarks.concat(assembleHeaderGroups(this,channel));return headerMarks}assembleAxes(){return assembleAxes(this.component.axes,this.config)}assembleLegends(){return assembleLegends(this)}assembleProjections(){var JSCompiler_inline_result\x3disLayerModel(this)||isConcatModel(this)?assembleProjectionsForModelAndChildren(this):assembleProjectionForModel(this);return JSCompiler_inline_result}assembleTitle(){var _this$title,\n$jscomp$destructuring$var191\x3dnull!\x3d\x3d(_this$title\x3dthis.title)\x26\x26void 0!\x3d\x3d_this$title?_this$title:{};_this$title\x3dObject.assign({},$jscomp$destructuring$var191);$jscomp$destructuring$var191\x3d$jscomp$destructuring$var191.encoding;_this$title\x3d(delete _this$title.encoding,_this$title);$jscomp$destructuring$var191\x3dObject.assign({},extractTitleConfig(this.config.title).nonMark,_this$title,$jscomp$destructuring$var191?{encode:{update:$jscomp$destructuring$var191}}:{});if($jscomp$destructuring$var191.text){if(contains([\x22unit\x22,\n\x22layer\x22],this.type)){if(contains([\x22middle\x22,void 0],$jscomp$destructuring$var191.anchor)){var _title$frame;$jscomp$destructuring$var191.frame\x3dnull!\x3d\x3d(_title$frame\x3d$jscomp$destructuring$var191.frame)\x26\x26void 0!\x3d\x3d_title$frame?_title$frame:\x22group\x22}}else{var _title$anchor;$jscomp$destructuring$var191.anchor\x3dnull!\x3d\x3d(_title$anchor\x3d$jscomp$destructuring$var191.anchor)\x26\x26void 0!\x3d\x3d_title$anchor?_title$anchor:\x22start\x22}return isEmpty($jscomp$destructuring$var191)?void 0:$jscomp$destructuring$var191}}assembleGroup(signals){signals\x3d\nvoid 0\x3d\x3d\x3dsignals?[]:signals;const group\x3d{};signals\x3dsignals.concat(this.assembleSignals());0\x3csignals.length\x26\x26(group.signals\x3dsignals);if(signals\x3dthis.assembleLayout())group.layout\x3dsignals;group.marks\x3d[].concat(this.assembleHeaderMarks(),this.assembleMarks());signals\x3d!this.parent||isFacetModel(this.parent)?assembleScales(this):[];0\x3csignals.length\x26\x26(group.scales\x3dsignals);signals\x3dthis.assembleAxes();0\x3csignals.length\x26\x26(group.axes\x3dsignals);signals\x3dthis.assembleLegends();0\x3csignals.length\x26\x26(group.legends\x3d\nsignals);return group}getName(text){return varName((this.name?this.name+\x22_\x22:\x22\x22)+text)}getDataName(type){return this.getName(DataSourceType[type].toLowerCase())}requestDataName(name){name\x3dthis.getDataName(name);const refCounts\x3dthis.component.data.outputNodeRefCounts;refCounts[name]\x3d(refCounts[name]||0)+1;return name}getSizeSignalRef(layoutSizeType){if(isFacetModel(this.parent)){var sizeType\x3dgetSizeTypeFromLayoutSizeType(layoutSizeType),channel\x3dgetPositionScaleChannel(sizeType);if((sizeType\x3dthis.component.scales[channel])\x26\x26\n!sizeType.merged){var type\x3dsizeType.get(\x22type\x22);const range\x3dsizeType.get(\x22range\x22);if(type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(range)){layoutSizeType\x3dsizeType.get(\x22name\x22);type\x3dassembleDomain(this,channel);if(type\x3dgetFieldFromDomain(type))return channel\x3dvgField({aggregate:\x22distinct\x22,field:type},{expr:\x22datum\x22}),{signal:sizeExpr(layoutSizeType,sizeType,channel)};warn(unknownField(channel));return null}}}return{signal:this.signalNameMap.get(this.getName(layoutSizeType))}}lookupDataSource(name){const node\x3d\nthis.component.data.outputNodes[name];return node?node.getSource():name}getSignalName(oldSignalName){return this.signalNameMap.get(oldSignalName)}renameSignal(oldName,newName){this.signalNameMap.rename(oldName,newName)}renameScale(oldName,newName){this.scaleNameMap.rename(oldName,newName)}renameProjection(oldName,newName){this.projectionNameMap.rename(oldName,newName)}scaleName(originalScaleName,parse){if(parse)return this.getName(originalScaleName);if(CHANNEL_INDEX[originalScaleName]\x26\x26SCALE_CHANNEL_INDEX[originalScaleName]\x26\x26\nthis.component.scales[originalScaleName]||this.scaleNameMap.has(this.getName(originalScaleName)))return this.scaleNameMap.get(this.getName(originalScaleName))}projectionName(parse){if(parse)return this.getName(\x22projection\x22);if(this.component.projection\x26\x26!this.component.projection.merged||this.projectionNameMap.has(this.getName(\x22projection\x22)))return this.projectionNameMap.get(this.getName(\x22projection\x22))}getScaleComponent(channel){if(!this.component.scales)throw Error(\x22getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().\x22);\nconst localScaleComponent\x3dthis.component.scales[channel];return localScaleComponent\x26\x26!localScaleComponent.merged?localScaleComponent:this.parent?this.parent.getScaleComponent(channel):void 0}getSelectionComponent(variableName,origName){let sel\x3dthis.component.selection[variableName];!sel\x26\x26this.parent\x26\x26(sel\x3dthis.parent.getSelectionComponent(variableName,origName));if(!sel)throw Error(\x27Cannot find a selection named \x22\x27.concat(origName,\x27\x22.\x27));return sel}hasAxisOrientSignalRef(){var _this$component$axes$,\n_this$component$axes$2;return(null\x3d\x3d\x3d(_this$component$axes$\x3dthis.component.axes.x)||void 0\x3d\x3d\x3d_this$component$axes$?void 0:_this$component$axes$.some(a\x3d\x3ea.hasOrientSignalRef()))||(null\x3d\x3d\x3d(_this$component$axes$2\x3dthis.component.axes.y)||void 0\x3d\x3d\x3d_this$component$axes$2?void 0:_this$component$axes$2.some(a\x3d\x3ea.hasOrientSignalRef()))}}class ModelWithField extends Model{vgField(channel,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;if(channel\x3dthis.fieldDef(channel))return vgField(channel,opt)}reduceFieldDef(f,init){return reduce(this.getMapping(),\n(acc,cd,c)\x3d\x3e(cd\x3dgetFieldDef(cd))?f(acc,cd,c):acc,init)}forEachFieldDef(f,t){forEach(this.getMapping(),(cd,c)\x3d\x3e{(cd\x3dgetFieldDef(cd))\x26\x26f(cd,c)},t)}}class DensityTransformNode extends DataFlowNode{clone(){return new DensityTransformNode(null,duplicate(this.transform))}constructor(parent,transform){var _this$transform$as,_specifiedAs$,_specifiedAs$2;super(parent);this.transform\x3dtransform;this.transform\x3dduplicate(transform);parent\x3dnull!\x3d\x3d(_this$transform$as\x3dthis.transform.as)\x26\x26void 0!\x3d\x3d_this$transform$as?\n_this$transform$as:[void 0,void 0];this.transform.as\x3d[null!\x3d\x3d(_specifiedAs$\x3dparent[0])\x26\x26void 0!\x3d\x3d_specifiedAs$?_specifiedAs$:\x22value\x22,null!\x3d\x3d(_specifiedAs$2\x3dparent[1])\x26\x26void 0!\x3d\x3d_specifiedAs$2?_specifiedAs$2:\x22density\x22]}dependentFields(){var _this$transform$group;return new Set([this.transform.density,...null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?_this$transform$group:[]])}producedFields(){return new Set(this.transform.as)}hash(){return\x22DensityTransform \x22.concat(hash(this.transform))}assemble(){var $jscomp$destructuring$var193\x3d\nthis.transform,$jscomp$destructuring$var194\x3dObject.assign({},$jscomp$destructuring$var193);$jscomp$destructuring$var193\x3d$jscomp$destructuring$var193.density;$jscomp$destructuring$var194\x3d(delete $jscomp$destructuring$var194.density,$jscomp$destructuring$var194);return Object.assign({},{type:\x22kde\x22,field:$jscomp$destructuring$var193},$jscomp$destructuring$var194)}}class FilterInvalidNode extends DataFlowNode{clone(){return new FilterInvalidNode(null,Object.assign({},this.filter))}constructor(parent,\nfilter){super(parent);this.filter\x3dfilter}static make(parent,model){const {config,mark,markDef}\x3dmodel;if(\x22filter\x22!\x3d\x3dgetMarkPropOrConfig(\x22invalid\x22,markDef,config))return null;const filter\x3dmodel.reduceFieldDef((aggregator,fieldDef,channel)\x3d\x3e{(channel\x3d!!SCALE_CHANNEL_INDEX[channel]\x26\x26model.getScaleComponent(channel))\x26\x26channel.get(\x22type\x22)in CONTINUOUS_DOMAIN_INDEX\x26\x26\x22count\x22!\x3d\x3dfieldDef.aggregate\x26\x26!isPathMark(mark)\x26\x26(aggregator[fieldDef.field]\x3dfieldDef);return aggregator},{});return keys$jscomp$0(filter).length?\nnew FilterInvalidNode(parent,filter):null}dependentFields(){return new Set(keys$jscomp$0(this.filter))}producedFields(){return new Set}hash(){return\x22FilterInvalid \x22.concat(hash(this.filter))}assemble(){const filters\x3dkeys$jscomp$0(this.filter).reduce((vegaFilters,field)\x3d\x3e{field\x3dthis.filter[field];const ref\x3dvgField(field,{expr:\x22datum\x22});null!\x3d\x3dfield\x26\x26(\x22temporal\x22\x3d\x3d\x3dfield.type?vegaFilters.push(\x22(isDate(\x22.concat(ref,\x22) || (isValid(\x22).concat(ref,\x22) \\x26\\x26 isFinite(+\x22).concat(ref,\x22)))\x22)):\x22quantitative\x22\x3d\x3d\x3d\nfield.type\x26\x26(vegaFilters.push(\x22isValid(\x22.concat(ref,\x22)\x22)),vegaFilters.push(\x22isFinite(+\x22.concat(ref,\x22)\x22))));return vegaFilters},[]);return 0\x3cfilters.length?{type:\x22filter\x22,expr:filters.join(\x22 \\x26\\x26 \x22)}:null}}class FlattenTransformNode extends DataFlowNode{clone(){return new FlattenTransformNode(this.parent,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform;this.transform\x3dduplicate(transform);const {flatten,as\x3d[]}\x3dthis.transform;this.transform.as\x3dflatten.map((f,\ni)\x3d\x3e{var _as$i;return null!\x3d\x3d(_as$i\x3das[i])\x26\x26void 0!\x3d\x3d_as$i?_as$i:f})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return\x22FlattenTransform \x22.concat(hash(this.transform))}assemble(){const {flatten:fields,as}\x3dthis.transform;return{type:\x22flatten\x22,fields,as}}}class FoldTransformNode extends DataFlowNode{clone(){return new FoldTransformNode(null,duplicate(this.transform))}constructor(parent,transform){var _this$transform$as,_specifiedAs$,\n_specifiedAs$2;super(parent);this.transform\x3dtransform;this.transform\x3dduplicate(transform);parent\x3dnull!\x3d\x3d(_this$transform$as\x3dthis.transform.as)\x26\x26void 0!\x3d\x3d_this$transform$as?_this$transform$as:[void 0,void 0];this.transform.as\x3d[null!\x3d\x3d(_specifiedAs$\x3dparent[0])\x26\x26void 0!\x3d\x3d_specifiedAs$?_specifiedAs$:\x22key\x22,null!\x3d\x3d(_specifiedAs$2\x3dparent[1])\x26\x26void 0!\x3d\x3d_specifiedAs$2?_specifiedAs$2:\x22value\x22]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return\x22FoldTransform \x22.concat(hash(this.transform))}assemble(){const {fold,\nas}\x3dthis.transform;return{type:\x22fold\x22,fields:fold,as}}}class GeoJSONNode extends DataFlowNode{clone(){return new GeoJSONNode(null,duplicate(this.fields),this.geojson,this.signal)}static parseAll(parent,model){if(model.component.projection\x26\x26!model.component.projection.isFit)return parent;let geoJsonCounter\x3d0;for(var coordinates of[[\x22longitude\x22,\x22latitude\x22],[\x22longitude2\x22,\x22latitude2\x22]]){const pair\x3dcoordinates.map(channel\x3d\x3e{channel\x3dgetFieldOrDatumDef(model.encoding[channel]);return isFieldDef(channel)?\nchannel.field:isDatumDef(channel)?{expr:\x22\x22.concat(channel.datum)}:isValueDef(channel)?{expr:\x22\x22.concat(channel.value)}:void 0});if(pair[0]||pair[1])parent\x3dnew GeoJSONNode(parent,pair,null,model.getName(\x22geojson_\x22.concat(geoJsonCounter++)))}model.channelHasField(\x22shape\x22)\x26\x26(coordinates\x3dmodel.typedFieldDef(\x22shape\x22),\x22geojson\x22\x3d\x3d\x3dcoordinates.type\x26\x26(parent\x3dnew GeoJSONNode(parent,null,coordinates.field,model.getName(\x22geojson_\x22.concat(geoJsonCounter++)))));return parent}constructor(parent,fields,geojson,signal){super(parent);\nthis.fields\x3dfields;this.geojson\x3dgeojson;this.signal\x3dsignal}dependentFields(){var _this$fields;const fields\x3d(null!\x3d\x3d(_this$fields\x3dthis.fields)\x26\x26void 0!\x3d\x3d_this$fields?_this$fields:[]).filter(isString);return new Set([...this.geojson?[this.geojson]:[],...fields])}producedFields(){return new Set}hash(){return\x22GeoJSON \x22.concat(this.geojson,\x22 \x22).concat(this.signal,\x22 \x22).concat(hash(this.fields))}assemble(){return Object.assign({},{type:\x22geojson\x22},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:\n{},{signal:this.signal})}}class GeoPointNode extends DataFlowNode{clone(){return new GeoPointNode(null,this.projection,duplicate(this.fields),duplicate(this.as))}constructor(parent,projection,fields,as){super(parent);this.projection\x3dprojection;this.fields\x3dfields;this.as\x3das}static parseAll(parent,model){if(!model.projectionName())return parent;for(const coordinates of[[\x22longitude\x22,\x22latitude\x22],[\x22longitude2\x22,\x22latitude2\x22]]){const pair\x3dcoordinates.map(channel\x3d\x3e{channel\x3dgetFieldOrDatumDef(model.encoding[channel]);\nreturn isFieldDef(channel)?channel.field:isDatumDef(channel)?{expr:\x22\x22.concat(channel.datum)}:isValueDef(channel)?{expr:\x22\x22.concat(channel.value)}:void 0}),suffix\x3d\x22longitude2\x22\x3d\x3d\x3dcoordinates[0]?\x222\x22:\x22\x22;if(pair[0]||pair[1])parent\x3dnew GeoPointNode(parent,model.projectionName(),pair,[model.getName(\x22x\x22+suffix),model.getName(\x22y\x22+suffix)])}return parent}dependentFields(){return new Set(this.fields.filter(isString))}producedFields(){return new Set(this.as)}hash(){return\x22Geopoint \x22.concat(this.projection,\x22 \x22).concat(hash(this.fields),\n\x22 \x22).concat(hash(this.as))}assemble(){return{type:\x22geopoint\x22,projection:this.projection,fields:this.fields,as:this.as}}}class ImputeNode extends DataFlowNode{clone(){return new ImputeNode(null,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform}dependentFields(){var _this$transform$group;return new Set([this.transform.impute,this.transform.key,...null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?_this$transform$group:\n[]])}producedFields(){return new Set([this.transform.impute])}processSequence(keyvals){const {start\x3d0,stop,step}\x3dkeyvals;keyvals\x3d[start,stop,...step?[step]:[]].join();return{signal:\x22sequence(\x22.concat(keyvals,\x22)\x22)}}static makeFromTransform(parent,imputeTransform){return new ImputeNode(parent,imputeTransform)}static makeFromEncoding(parent,model){const encoding\x3dmodel.encoding;var xDef\x3dencoding.x;const yDef\x3dencoding.y;if(isFieldDef(xDef)\x26\x26isFieldDef(yDef)){const imputedChannel\x3dxDef.impute?xDef:yDef.impute?\nyDef:void 0;if(void 0\x3d\x3d\x3dimputedChannel)return;xDef\x3dxDef.impute?yDef:yDef.impute?xDef:void 0;const {method,value,frame,keyvals}\x3dimputedChannel.impute;model\x3dpathGroupingFields(model.mark,encoding);return new ImputeNode(parent,Object.assign({},{impute:imputedChannel.field,key:xDef.field},method?{method}:{},void 0!\x3d\x3dvalue?{value}:{},frame?{frame}:{},void 0!\x3d\x3dkeyvals?{keyvals}:{},model.length?{groupby:model}:{}))}return null}hash(){return\x22Impute \x22.concat(hash(this.transform))}assemble(){const {impute,\nkey,keyvals,method,groupby,value,frame\x3d[null,null]}\x3dthis.transform,imputeTransform\x3dObject.assign({},{type:\x22impute\x22,field:impute,key},keyvals?{keyvals:void 0!\x3d\x3d(null\x3d\x3d\x3dkeyvals||void 0\x3d\x3d\x3dkeyvals?void 0:keyvals.stop)?this.processSequence(keyvals):keyvals}:{},{method:\x22value\x22},groupby?{groupby}:{},{value:method\x26\x26\x22value\x22!\x3d\x3dmethod?null:value});if(method\x26\x26\x22value\x22!\x3d\x3dmethod){const deriveNewField\x3dObject.assign({},{type:\x22window\x22,as:[\x22imputed_\x22.concat(impute,\x22_value\x22)],ops:[method],fields:[impute],frame,ignorePeers:!1},\ngroupby?{groupby}:{}),replaceOriginal\x3d{type:\x22formula\x22,expr:\x22datum.\x22.concat(impute,\x22 \\x3d\\x3d\\x3d null ? datum.imputed_\x22).concat(impute,\x22_value : datum.\x22).concat(impute),as:impute};return[imputeTransform,deriveNewField,replaceOriginal]}return[imputeTransform]}}class LoessTransformNode extends DataFlowNode{clone(){return new LoessTransformNode(null,duplicate(this.transform))}constructor(parent,transform){var _this$transform$as,_specifiedAs$,_specifiedAs$2;super(parent);this.transform\x3dtransform;this.transform\x3d\nduplicate(transform);parent\x3dnull!\x3d\x3d(_this$transform$as\x3dthis.transform.as)\x26\x26void 0!\x3d\x3d_this$transform$as?_this$transform$as:[void 0,void 0];this.transform.as\x3d[null!\x3d\x3d(_specifiedAs$\x3dparent[0])\x26\x26void 0!\x3d\x3d_specifiedAs$?_specifiedAs$:transform.on,null!\x3d\x3d(_specifiedAs$2\x3dparent[1])\x26\x26void 0!\x3d\x3d_specifiedAs$2?_specifiedAs$2:transform.loess]}dependentFields(){var _this$transform$group;return new Set([this.transform.loess,this.transform.on,...null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?\n_this$transform$group:[]])}producedFields(){return new Set(this.transform.as)}hash(){return\x22LoessTransform \x22.concat(hash(this.transform))}assemble(){var $jscomp$destructuring$var195\x3dthis.transform,$jscomp$destructuring$var196\x3dObject.assign({},$jscomp$destructuring$var195);const loess\x3d$jscomp$destructuring$var195.loess;$jscomp$destructuring$var195\x3d$jscomp$destructuring$var195.on;$jscomp$destructuring$var196\x3d(delete $jscomp$destructuring$var196.loess,delete $jscomp$destructuring$var196.on,$jscomp$destructuring$var196);\nreturn Object.assign({},{type:\x22loess\x22,x:$jscomp$destructuring$var195,y:loess},$jscomp$destructuring$var196)}}class LookupNode extends DataFlowNode{clone(){return new LookupNode(null,duplicate(this.transform),this.secondary)}constructor(parent,transform,secondary){super(parent);this.transform\x3dtransform;this.secondary\x3dsecondary}static make(parent,model,transform,counter){const sources\x3dmodel.component.data.sources,{from}\x3dtransform;var fromOutputNode\x3dnull;if(\x22data\x22in from)fromOutputNode\x3dfindSource(from.data,\nsources),fromOutputNode||(fromOutputNode\x3dnew SourceNode(from.data),sources.push(fromOutputNode)),counter\x3dmodel.getName(\x22lookup_\x22.concat(counter)),fromOutputNode\x3dnew OutputNode(fromOutputNode,counter,DataSourceType.Lookup,model.component.data.outputNodeRefCounts),model.component.data.outputNodes[counter]\x3dfromOutputNode;else if(\x22selection\x22in from\x26\x26(counter\x3dfrom.selection,transform\x3dObject.assign({},{as:counter},transform),fromOutputNode\x3dmodel.getSelectionComponent(varName(counter),counter).materialized,\n!fromOutputNode))throw Error(\x27Cannot define and lookup the \x22\x27.concat(counter,\x27\x22 selection in the same view. \x27)+\x22Try moving the lookup into a second, layered view?\x22);return new LookupNode(parent,transform,fromOutputNode.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?array$jscomp$0(this.transform.as):this.transform.from.fields)}hash(){return\x22Lookup \x22.concat(hash({transform:this.transform,secondary:this.secondary}))}assemble(){if(this.transform.from.fields)var foreign\x3d\nObject.assign({},{values:this.transform.from.fields},this.transform.as?{as:array$jscomp$0(this.transform.as)}:{});else foreign\x3dthis.transform.as,isString(foreign)||(warn(\x27If \x22from.fields\x22 is not specified, \x22as\x22 has to be a string that specifies the key to be used for the data from the secondary source.\x27),foreign\x3d\x22_lookup\x22),foreign\x3d{as:[foreign]};return Object.assign({},{type:\x22lookup\x22,from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},foreign,this.transform.default?{default:this.transform.default}:\n{})}}class QuantileTransformNode extends DataFlowNode{clone(){return new QuantileTransformNode(null,duplicate(this.transform))}constructor(parent,transform){var _this$transform$as,_specifiedAs$,_specifiedAs$2;super(parent);this.transform\x3dtransform;this.transform\x3dduplicate(transform);parent\x3dnull!\x3d\x3d(_this$transform$as\x3dthis.transform.as)\x26\x26void 0!\x3d\x3d_this$transform$as?_this$transform$as:[void 0,void 0];this.transform.as\x3d[null!\x3d\x3d(_specifiedAs$\x3dparent[0])\x26\x26void 0!\x3d\x3d_specifiedAs$?_specifiedAs$:\x22prob\x22,null!\x3d\x3d\n(_specifiedAs$2\x3dparent[1])\x26\x26void 0!\x3d\x3d_specifiedAs$2?_specifiedAs$2:\x22value\x22]}dependentFields(){var _this$transform$group;return new Set([this.transform.quantile,...null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?_this$transform$group:[]])}producedFields(){return new Set(this.transform.as)}hash(){return\x22QuantileTransform \x22.concat(hash(this.transform))}assemble(){var $jscomp$destructuring$var197\x3dthis.transform,$jscomp$destructuring$var198\x3dObject.assign({},$jscomp$destructuring$var197);\n$jscomp$destructuring$var197\x3d$jscomp$destructuring$var197.quantile;$jscomp$destructuring$var198\x3d(delete $jscomp$destructuring$var198.quantile,$jscomp$destructuring$var198);return Object.assign({},{type:\x22quantile\x22,field:$jscomp$destructuring$var197},$jscomp$destructuring$var198)}}class RegressionTransformNode extends DataFlowNode{clone(){return new RegressionTransformNode(null,duplicate(this.transform))}constructor(parent,transform){var _this$transform$as,_specifiedAs$,_specifiedAs$2;super(parent);\nthis.transform\x3dtransform;this.transform\x3dduplicate(transform);parent\x3dnull!\x3d\x3d(_this$transform$as\x3dthis.transform.as)\x26\x26void 0!\x3d\x3d_this$transform$as?_this$transform$as:[void 0,void 0];this.transform.as\x3d[null!\x3d\x3d(_specifiedAs$\x3dparent[0])\x26\x26void 0!\x3d\x3d_specifiedAs$?_specifiedAs$:transform.on,null!\x3d\x3d(_specifiedAs$2\x3dparent[1])\x26\x26void 0!\x3d\x3d_specifiedAs$2?_specifiedAs$2:transform.regression]}dependentFields(){var _this$transform$group;return new Set([this.transform.regression,this.transform.on,...null!\x3d\x3d(_this$transform$group\x3d\nthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group?_this$transform$group:[]])}producedFields(){return new Set(this.transform.as)}hash(){return\x22RegressionTransform \x22.concat(hash(this.transform))}assemble(){var $jscomp$destructuring$var199\x3dthis.transform,$jscomp$destructuring$var200\x3dObject.assign({},$jscomp$destructuring$var199);const regression\x3d$jscomp$destructuring$var199.regression;$jscomp$destructuring$var199\x3d$jscomp$destructuring$var199.on;$jscomp$destructuring$var200\x3d(delete $jscomp$destructuring$var200.regression,\ndelete $jscomp$destructuring$var200.on,$jscomp$destructuring$var200);return Object.assign({},{type:\x22regression\x22,x:$jscomp$destructuring$var199,y:regression},$jscomp$destructuring$var200)}}class PivotTransformNode extends DataFlowNode{clone(){return new PivotTransformNode(null,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform}addDimensions(fields){var _this$transform$group;this.transform.groupby\x3dunique((null!\x3d\x3d(_this$transform$group\x3dthis.transform.groupby)\x26\x26\nvoid 0!\x3d\x3d_this$transform$group?_this$transform$group:[]).concat(fields),d\x3d\x3ed)}producedFields(){}dependentFields(){var _this$transform$group2;return new Set([this.transform.pivot,this.transform.value,...null!\x3d\x3d(_this$transform$group2\x3dthis.transform.groupby)\x26\x26void 0!\x3d\x3d_this$transform$group2?_this$transform$group2:[]])}hash(){return\x22PivotTransform \x22.concat(hash(this.transform))}assemble(){const {pivot,value,groupby,limit,op}\x3dthis.transform;return Object.assign({},{type:\x22pivot\x22,field:pivot,value},void 0!\x3d\x3d\nlimit?{limit}:{},void 0!\x3d\x3dop?{op}:{},void 0!\x3d\x3dgroupby?{groupby}:{})}}class SampleTransformNode extends DataFlowNode{clone(){return new SampleTransformNode(null,duplicate(this.transform))}constructor(parent,transform){super(parent);this.transform\x3dtransform}dependentFields(){return new Set}producedFields(){return new Set}hash(){return\x22SampleTransform \x22.concat(hash(this.transform))}assemble(){return{type:\x22sample\x22,size:this.transform.sample}}}class FacetModel extends ModelWithField{constructor(spec,parent,\nparentGivenName,config){super(spec,\x22facet\x22,parent,parentGivenName,config,spec.resolve);_defineProperty(this,\x22facet\x22,void 0);_defineProperty(this,\x22child\x22,void 0);_defineProperty(this,\x22children\x22,void 0);this.child\x3dbuildModel(spec.spec,this,this.getName(\x22child\x22),void 0,config);this.children\x3d[this.child];this.facet\x3dthis.initFacet(spec.facet)}initFacet(facet){if(!isFacetMapping(facet))return{facet:this.initFacetFieldDef(facet,\x22facet\x22)};var channels\x3dkeys$jscomp$0(facet);const normalizedFacet\x3d{};for(const channel of channels){if(!contains([\x22row\x22,\n\x22column\x22],channel)){warn(incompatibleChannel(channel,\x22facet\x22));break}channels\x3dfacet[channel];if(void 0\x3d\x3d\x3dchannels.field){warn(emptyFieldDef(channels,channel));break}normalizedFacet[channel]\x3dthis.initFacetFieldDef(channels,channel)}return normalizedFacet}initFacetFieldDef(fieldDef,channel){var $jscomp$destructuring$var203\x3dObject.assign({},fieldDef);fieldDef\x3dfieldDef.header;$jscomp$destructuring$var203\x3d(delete $jscomp$destructuring$var203.header,$jscomp$destructuring$var203);channel\x3dinitFieldDef($jscomp$destructuring$var203,\nchannel);fieldDef\x26\x26(channel.header\x3dreplaceExprRefInIndex(fieldDef));return channel}channelHasField(channel){return!!this.facet[channel]}fieldDef(channel){return this.facet[channel]}parseData(){this.component.data\x3dparseData(this);this.child.parseData()}parseLayoutSize(){parseChildrenLayoutSize(this)}parseSelections(){this.child.parseSelections();this.component.selection\x3dthis.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders();\nfor(const channel of FACET_CHANNELS){{var _fieldDef$header\x3dvoid 0,channel$jscomp$0\x3dchannel;const {facet,config,child,component}\x3dthis;if(this.channelHasField(channel$jscomp$0)){const fieldDef\x3dfacet[channel$jscomp$0];var titleConfig\x3dgetHeaderProperty(\x22title\x22,null,config,channel$jscomp$0);titleConfig\x3dtitle$jscomp$0(fieldDef,config,{allowDisabling:!0,includeDefault:void 0\x3d\x3d\x3dtitleConfig||!!titleConfig});child.component.layoutHeaders[channel$jscomp$0].title\x26\x26(titleConfig\x3disArray(titleConfig)?titleConfig.join(\x22, \x22):\ntitleConfig,titleConfig+\x3d\x22 / \x22+child.component.layoutHeaders[channel$jscomp$0].title,child.component.layoutHeaders[channel$jscomp$0].title\x3dnull);var labelOrient\x3dgetHeaderProperty(\x22labelOrient\x22,fieldDef,config,channel$jscomp$0);const header\x3dnull!\x3d\x3d(_fieldDef$header\x3dfieldDef.header)\x26\x26void 0!\x3d\x3d_fieldDef$header?_fieldDef$header:{};_fieldDef$header\x3dgetFirstDefined(header.labels,config.header.labels,!0);labelOrient\x3dcontains([\x22bottom\x22,\x22right\x22],labelOrient)?\x22footer\x22:\x22header\x22;component.layoutHeaders[channel$jscomp$0]\x3d\n{title:titleConfig,facetFieldDef:fieldDef,[labelOrient]:\x22facet\x22\x3d\x3d\x3dchannel$jscomp$0?[]:[makeHeaderComponent(this,channel$jscomp$0,_fieldDef$header)]}}}}mergeChildAxis(this,\x22x\x22);mergeChildAxis(this,\x22y\x22)}assembleSelectionTopLevelSignals(signals){return this.child.assembleSelectionTopLevelSignals(signals)}assembleSignals(){this.child.assembleSignals();return[]}assembleSelectionData(data){return this.child.assembleSelectionData(data)}getHeaderLayoutMixins(){const layoutMixins\x3d{};for(const channel of FACET_CHANNELS)for(const headerType of HEADER_TYPES){const layoutHeaderComponent\x3d\nthis.component.layoutHeaders[channel];var headerComponent\x3dlayoutHeaderComponent[headerType],{facetFieldDef}\x3dlayoutHeaderComponent;if(facetFieldDef\x26\x26(facetFieldDef\x3dgetHeaderProperty(\x22titleOrient\x22,facetFieldDef.header,this.config,channel),contains([\x22right\x22,\x22bottom\x22],facetFieldDef))){var _layoutMixins$titleAn;facetFieldDef\x3dgetHeaderChannel(channel,facetFieldDef);layoutMixins.titleAnchor\x3dnull!\x3d\x3d(_layoutMixins$titleAn\x3dlayoutMixins.titleAnchor)\x26\x26void 0!\x3d\x3d_layoutMixins$titleAn?_layoutMixins$titleAn:{};layoutMixins.titleAnchor[facetFieldDef]\x3d\n\x22end\x22}if(null\x3d\x3d\x3dheaderComponent||void 0\x3d\x3d\x3dheaderComponent?0:headerComponent[0]){headerComponent\x3d\x22row\x22\x3d\x3d\x3dchannel?\x22height\x22:\x22width\x22;facetFieldDef\x3d\x22header\x22\x3d\x3d\x3dheaderType?\x22headerBand\x22:\x22footerBand\x22;if(\x22facet\x22!\x3d\x3dchannel\x26\x26!this.child.component.layoutSize.get(headerComponent)){var _layoutMixins$bandTyp;layoutMixins[facetFieldDef]\x3dnull!\x3d\x3d(_layoutMixins$bandTyp\x3dlayoutMixins[facetFieldDef])\x26\x26void 0!\x3d\x3d_layoutMixins$bandTyp?_layoutMixins$bandTyp:{};layoutMixins[facetFieldDef][channel]\x3d.5}if(layoutHeaderComponent.title){var _layoutMixins$offset;\nlayoutMixins.offset\x3dnull!\x3d\x3d(_layoutMixins$offset\x3dlayoutMixins.offset)\x26\x26void 0!\x3d\x3d_layoutMixins$offset?_layoutMixins$offset:{};layoutMixins.offset[\x22row\x22\x3d\x3d\x3dchannel?\x22rowTitle\x22:\x22columnTitle\x22]\x3d10}}}return layoutMixins}assembleDefaultLayout(){const {column,row}\x3dthis.facet,columns\x3dcolumn?this.columnDistinctSignal():row?1:void 0;let align\x3d\x22all\x22;row||\x22independent\x22!\x3d\x3dthis.component.resolve.scale.x?column||\x22independent\x22!\x3d\x3dthis.component.resolve.scale.y||(align\x3d\x22none\x22):align\x3d\x22none\x22;return Object.assign({},this.getHeaderLayoutMixins(),\ncolumns?{columns}:{},{bounds:\x22full\x22,align})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent\x26\x26this.parent instanceof FacetModel)){const facetLayoutDataName\x3dthis.getName(\x22column_domain\x22);return{signal:\x22length(data(\x27\x22.concat(facetLayoutDataName,\x22\x27))\x22)}}}assembleGroup(signals){return this.parent\x26\x26this.parent instanceof FacetModel?Object.assign({},this.channelHasField(\x22column\x22)?{encode:{update:{columns:{field:vgField(this.facet.column,{prefix:\x22distinct\x22})}}}}:\n{},super.assembleGroup(signals)):super.assembleGroup(signals)}getCardinalityAggregateForChild(){const fields\x3d[],ops\x3d[],as\x3d[];if(this.child instanceof FacetModel){if(this.child.channelHasField(\x22column\x22)){var field\x3dvgField(this.child.facet.column);fields.push(field);ops.push(\x22distinct\x22);as.push(\x22distinct_\x22.concat(field))}}else for(field of POSITION_SCALE_CHANNELS){var childScaleComponent\x3dthis.child.component.scales[field];if(childScaleComponent\x26\x26!childScaleComponent.merged){var type\x3dchildScaleComponent.get(\x22type\x22);\nchildScaleComponent\x3dchildScaleComponent.get(\x22range\x22);type in DISCRETE_DOMAIN_INDEX\x26\x26isVgRangeStep(childScaleComponent)\x26\x26(type\x3dassembleDomain(this.child,field),(type\x3dgetFieldFromDomain(type))?(fields.push(type),ops.push(\x22distinct\x22),as.push(\x22distinct_\x22.concat(type))):warn(unknownField(field)))}}return{fields,ops,as}}assembleFacet(){const {name,data}\x3dthis.component.data.facetRoot,{row,column}\x3dthis.facet,{fields,ops,as}\x3dthis.getCardinalityAggregateForChild(),groupby\x3d[];for(var channel of FACET_CHANNELS){var fieldDef\x3d\nthis.facet[channel];if(fieldDef){groupby.push(vgField(fieldDef));const {bin,sort}\x3dfieldDef;isBinning(bin)\x26\x26groupby.push(vgField(fieldDef,{binSuffix:\x22end\x22}));if(isSortField(sort)){const {field,op\x3d\x22min\x22}\x3dsort;fieldDef\x3dfacetSortFieldName(fieldDef,sort);row\x26\x26column?(fields.push(fieldDef),ops.push(\x22max\x22)):(fields.push(field),ops.push(op));as.push(fieldDef)}else isArray(sort)\x26\x26(fieldDef\x3dsortArrayIndexField(fieldDef,channel),fields.push(fieldDef),ops.push(\x22max\x22),as.push(fieldDef))}}channel\x3d!!row\x26\x26!!column;\nreturn Object.assign({},{name,data,groupby},channel||0\x3cfields.length?{aggregate:Object.assign({},channel?{cross:channel}:{},fields.length?{fields,ops,as}:{})}:{})}facetSortFields(channel){var {facet}\x3dthis;return(facet\x3dfacet[channel])?isSortField(facet.sort)?[facetSortFieldName(facet,facet.sort,{expr:\x22datum\x22})]:isArray(facet.sort)?[sortArrayIndexField(facet,channel,{expr:\x22datum\x22})]:[vgField(facet,{expr:\x22datum\x22})]:[]}facetSortOrder(channel){const {facet}\x3dthis;return(channel\x3dfacet[channel])?({sort:channel}\x3d\nchannel,[(isSortField(channel)?channel.order:!isArray(channel)\x26\x26channel)||\x22ascending\x22]):[]}assembleLabelTitle(){const {facet,config}\x3dthis;if(facet.facet)return assembleLabelTitle(facet.facet,\x22facet\x22,config);const ORTHOGONAL_ORIENT\x3d{row:[\x22top\x22,\x22bottom\x22],column:[\x22left\x22,\x22right\x22]};for(const channel of HEADER_CHANNELS)if(facet[channel]){var _facet$channel;const labelOrient\x3dgetHeaderProperty(\x22labelOrient\x22,null\x3d\x3d\x3d(_facet$channel\x3dfacet[channel])||void 0\x3d\x3d\x3d_facet$channel?void 0:_facet$channel.header,config,\nchannel);if(contains(ORTHOGONAL_ORIENT[channel],labelOrient))return assembleLabelTitle(facet[channel],channel,config)}}assembleMarks(){const {child}\x3dthis,data\x3dassembleFacetData(this.component.data.facetRoot),encodeEntry\x3dchild.assembleGroupEncodeEntry(!1),title\x3dthis.assembleLabelTitle()||child.assembleTitle(),style\x3dchild.assembleGroupStyle();return[Object.assign({},{name:this.getName(\x22cell\x22),type:\x22group\x22},title?{title}:{},style?{style}:{},{from:{facet:this.assembleFacet()},sort:{field:FACET_CHANNELS.map(c\x3d\x3e\nthis.facetSortFields(c)).flat(),order:FACET_CHANNELS.map(c\x3d\x3ethis.facetSortOrder(c)).flat()}},0\x3cdata.length?{data}:{},encodeEntry?{encode:{update:encodeEntry}}:{},child.assembleGroup(assembleFacetSignals(this,[])))]}getMapping(){return this.facet}}class ConcatModel extends Model{constructor(spec,parent,parentGivenName,config){var _spec$resolve,_spec$resolve$axis,_spec$resolve2,_spec$resolve2$axis;super(spec,\x22concat\x22,parent,parentGivenName,config,spec.resolve);_defineProperty(this,\x22children\x22,void 0);\n\x22shared\x22!\x3d\x3d(null\x3d\x3d\x3d(_spec$resolve\x3dspec.resolve)||void 0\x3d\x3d\x3d_spec$resolve?void 0:null\x3d\x3d\x3d(_spec$resolve$axis\x3d_spec$resolve.axis)||void 0\x3d\x3d\x3d_spec$resolve$axis?void 0:_spec$resolve$axis.x)\x26\x26\x22shared\x22!\x3d\x3d(null\x3d\x3d\x3d(_spec$resolve2\x3dspec.resolve)||void 0\x3d\x3d\x3d_spec$resolve2?void 0:null\x3d\x3d\x3d(_spec$resolve2$axis\x3d_spec$resolve2.axis)||void 0\x3d\x3d\x3d_spec$resolve2$axis?void 0:_spec$resolve2$axis.y)||warn(\x22Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).\x22);this.children\x3d\nthis.getChildren(spec).map((child,i)\x3d\x3ebuildModel(child,this,this.getName(\x22concat_\x22+i),void 0,config))}parseData(){this.component.data\x3dparseData(this);for(const child of this.children)child.parseData()}parseSelections(){this.component.selection\x3d{};for(const child of this.children){child.parseSelections();for(const key of keys$jscomp$0(child.component.selection))this.component.selection[key]\x3dchild.component.selection[key]}}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){for(const child of this.children)child.parseAxesAndHeaders()}getChildren(spec){return\x22vconcat\x22in\nspec?spec.vconcat:\x22hconcat\x22in spec?spec.hconcat:spec.concat}parseLayoutSize(){{parseChildrenLayoutSize(this);const heightType\x3dvoid 0\x3d\x3d\x3dthis.layout.columns?\x22height\x22:\x22childHeight\x22;parseNonUnitLayoutSizeForChannel(this,1\x3d\x3d\x3dthis.layout.columns?\x22width\x22:\x22childWidth\x22);parseNonUnitLayoutSizeForChannel(this,heightType)}}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(signals){return this.children.reduce((sg,child)\x3d\x3echild.assembleSelectionTopLevelSignals(sg),signals)}assembleSignals(){this.children.forEach(child\x3d\x3e\nchild.assembleSignals());return[]}assembleLayoutSignals(){const layoutSignals\x3dassembleLayoutSignals(this);for(const child of this.children)layoutSignals.push(...child.assembleLayoutSignals());return layoutSignals}assembleSelectionData(data){return this.children.reduce((db,child)\x3d\x3echild.assembleSelectionData(db),data)}assembleMarks(){return this.children.map(child\x3d\x3e{const title\x3dchild.assembleTitle(),style\x3dchild.assembleGroupStyle(),encodeEntry\x3dchild.assembleGroupEncodeEntry(!1);return Object.assign({},\n{type:\x22group\x22,name:child.getName(\x22group\x22)},title?{title}:{},style?{style}:{},encodeEntry?{encode:{update:encodeEntry}}:{},child.assembleGroup())})}assembleDefaultLayout(){const columns\x3dthis.layout.columns;return Object.assign({},null!\x3dcolumns?{columns}:{},{bounds:\x22full\x22,align:\x22each\x22})}}const AXIS_COMPONENT_PROPERTIES_INDEX\x3dObject.assign({},{disable:1,gridScale:1,scale:1},COMMON_AXIS_PROPERTIES_INDEX,{labelExpr:1,encode:1}),AXIS_COMPONENT_PROPERTIES\x3dkeys$jscomp$0(AXIS_COMPONENT_PROPERTIES_INDEX);class AxisComponent extends Split{constructor(explicit,\nimplicit,mainExtracted){explicit\x3dvoid 0\x3d\x3d\x3dexplicit?{}:explicit;implicit\x3dvoid 0\x3d\x3d\x3dimplicit?{}:implicit;mainExtracted\x3dvoid 0\x3d\x3d\x3dmainExtracted?!1:mainExtracted;super();this.explicit\x3dexplicit;this.implicit\x3dimplicit;this.mainExtracted\x3dmainExtracted}clone(){return new AxisComponent(duplicate(this.explicit),duplicate(this.implicit),this.mainExtracted)}hasAxisPart(part){if(\x22axis\x22\x3d\x3d\x3dpart)return!0;if(\x22grid\x22\x3d\x3d\x3dpart||\x22title\x22\x3d\x3d\x3dpart)return!!this.get(part);part\x3dthis.get(part);return!(!1\x3d\x3d\x3dpart||null\x3d\x3d\x3dpart)}hasOrientSignalRef(){return isSignalRef(this.explicit.orient)}}\nconst OPPOSITE_ORIENT\x3d{bottom:\x22top\x22,top:\x22bottom\x22,left:\x22right\x22,right:\x22left\x22},propsToAlwaysIncludeConfig\x3dnew Set(\x22grid translate format formatType orient labelExpr tickCount position tickMinStep\x22.split(\x22 \x22)),markCompiler\x3d{arc:{vgMark:\x22arc\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22}),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22}),rectPosition(model,\x22radius\x22,\n\x22arc\x22),rectPosition(model,\x22theta\x22,\x22arc\x22))},area:{vgMark:\x22area\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22include\x22,size:\x22ignore\x22,theta:\x22ignore\x22}),pointOrRangePosition(\x22x\x22,model,{defaultPos:\x22zeroOrMin\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22horizontal\x22\x3d\x3d\x3dmodel.markDef.orient}),pointOrRangePosition(\x22y\x22,model,{defaultPos:\x22zeroOrMin\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22vertical\x22\x3d\x3d\x3dmodel.markDef.orient}),defined(model))},bar:{vgMark:\x22rect\x22,encodeEntry:model\x3d\x3e\nObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22}),rectPosition(model,\x22x\x22,\x22bar\x22),rectPosition(model,\x22y\x22,\x22bar\x22))},circle:{vgMark:\x22symbol\x22,encodeEntry:model\x3d\x3eencodeEntry(model,\x22circle\x22)},geoshape:{vgMark:\x22shape\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22})),postEncodingTransform:model\x3d\x3e{var {encoding}\x3dmodel;\nencoding\x3dencoding.shape;return[Object.assign({},{type:\x22geoshape\x22,projection:model.projectionName()},encoding\x26\x26isFieldDef(encoding)\x26\x26\x22geojson\x22\x3d\x3d\x3dencoding.type?{field:vgField(encoding,{expr:\x22datum\x22})}:{})]}},image:{vgMark:\x22image\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22ignore\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22}),rectPosition(model,\x22x\x22,\x22image\x22),rectPosition(model,\x22y\x22,\x22image\x22),text$jscomp$0(model,\x22url\x22))},line:{vgMark:\x22line\x22,encodeEntry:model\x3d\x3e\nObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22ignore\x22}),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22}),nonPosition(\x22size\x22,model,{vgChannel:\x22strokeWidth\x22}),defined(model))},point:{vgMark:\x22symbol\x22,encodeEntry:model\x3d\x3eencodeEntry(model)},rect:{vgMark:\x22rect\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,\ntheta:\x22ignore\x22}),rectPosition(model,\x22x\x22,\x22rect\x22),rectPosition(model,\x22y\x22,\x22rect\x22))},rule:{vgMark:\x22rule\x22,encodeEntry:model\x3d\x3e{var {markDef}\x3dmodel;markDef\x3dmarkDef.orient;return model.encoding.x||model.encoding.y||model.encoding.latitude||model.encoding.longitude?Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22}),pointOrRangePosition(\x22x\x22,model,{defaultPos:\x22horizontal\x22\x3d\x3d\x3dmarkDef?\x22zeroOrMax\x22:\x22mid\x22,defaultPos2:\x22zeroOrMin\x22,\nrange:\x22vertical\x22!\x3d\x3dmarkDef}),pointOrRangePosition(\x22y\x22,model,{defaultPos:\x22vertical\x22\x3d\x3d\x3dmarkDef?\x22zeroOrMax\x22:\x22mid\x22,defaultPos2:\x22zeroOrMin\x22,range:\x22horizontal\x22!\x3d\x3dmarkDef}),nonPosition(\x22size\x22,model,{vgChannel:\x22strokeWidth\x22})):{}}},square:{vgMark:\x22symbol\x22,encodeEntry:model\x3d\x3eencodeEntry(model,\x22square\x22)},text:{vgMark:\x22text\x22,encodeEntry:model\x3d\x3e{const {config,encoding}\x3dmodel;return Object.assign({},baseEncodeEntry(model,{align:\x22include\x22,baseline:\x22include\x22,color:\x22include\x22,size:\x22ignore\x22,orient:\x22ignore\x22,theta:\x22include\x22}),\npointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22}),text$jscomp$0(model),nonPosition(\x22size\x22,model,{vgChannel:\x22fontSize\x22}),nonPosition(\x22angle\x22,model),valueIfDefined(\x22align\x22,align$jscomp$0(model.markDef,encoding,config)),valueIfDefined(\x22baseline\x22,baseline(model.markDef,encoding,config)),pointPosition(\x22radius\x22,model,{defaultPos:null,isMidPoint:!0}),pointPosition(\x22theta\x22,model,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:\x22rect\x22,encodeEntry:model\x3d\x3e{const {config,\nmarkDef}\x3dmodel;var orient\x3dmarkDef.orient;const vgSizeChannel\x3d\x22horizontal\x22\x3d\x3d\x3dorient?\x22width\x22:\x22height\x22;orient\x3d\x22horizontal\x22\x3d\x3d\x3dorient?\x22height\x22:\x22width\x22;return Object.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,orient:\x22ignore\x22,size:\x22ignore\x22,theta:\x22ignore\x22}),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22,vgChannel:\x22xc\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22,vgChannel:\x22yc\x22}),nonPosition(\x22size\x22,model,{defaultValue:defaultSize(model),vgChannel:vgSizeChannel}),{[orient]:signalOrValueRef(getMarkPropOrConfig(\x22thickness\x22,\nmarkDef,config))})}},trail:{vgMark:\x22trail\x22,encodeEntry:model\x3d\x3eObject.assign({},baseEncodeEntry(model,{align:\x22ignore\x22,baseline:\x22ignore\x22,color:\x22include\x22,size:\x22include\x22,orient:\x22ignore\x22,theta:\x22ignore\x22}),pointPosition(\x22x\x22,model,{defaultPos:\x22mid\x22}),pointPosition(\x22y\x22,model,{defaultPos:\x22mid\x22}),nonPosition(\x22size\x22,model),defined(model))}};class UnitModel extends ModelWithField{constructor(spec,parent,parentGivenName,parentGivenSize,config){parentGivenSize\x3dvoid 0\x3d\x3d\x3dparentGivenSize?{}:parentGivenSize;super(spec,\n\x22unit\x22,parent,parentGivenName,config,void 0,isFrameMixins(spec)?spec.view:void 0);_defineProperty(this,\x22markDef\x22,void 0);_defineProperty(this,\x22encoding\x22,void 0);_defineProperty(this,\x22specifiedScales\x22,{});_defineProperty(this,\x22stack\x22,void 0);_defineProperty(this,\x22specifiedAxes\x22,{});_defineProperty(this,\x22specifiedLegends\x22,{});_defineProperty(this,\x22specifiedProjection\x22,{});_defineProperty(this,\x22selection\x22,{});_defineProperty(this,\x22children\x22,[]);var markDef\x3disMarkDef(spec.mark)?Object.assign({},spec.mark):\n{type:spec.mark};parent\x3dmarkDef.type;if(void 0\x3d\x3d\x3dmarkDef.filled){({graticule:parentGivenName}\x3d{graticule:spec.data\x26\x26\x22graticule\x22in spec.data});if(parentGivenName)parentGivenName\x3d!1;else{parentGivenName\x3dgetMarkConfig(\x22filled\x22,markDef,config);var mark\x3dmarkDef.type;parentGivenName\x3dgetFirstDefined(parentGivenName,mark!\x3d\x3dPOINT\x26\x26mark!\x3d\x3dLINE\x26\x26mark!\x3d\x3dRULE)}markDef.filled\x3dparentGivenName}parentGivenName\x3dthis.encoding\x3dinitEncoding(spec.encoding||{},parent,markDef.filled,config);markDef\x3dreplaceExprRefInIndex(markDef);\nmark\x3dgetMarkPropOrConfig(\x22orient\x22,markDef,config);markDef.orient\x3dorient(markDef.type,parentGivenName,mark);void 0!\x3d\x3dmark\x26\x26mark!\x3d\x3dmarkDef.orient\x26\x26(mark\x3d\x27Specified orient \x22\x27.concat(markDef.orient,\x27\x22 overridden with \x22\x27).concat(mark,\x27\x22.\x27),warn(mark));if(\x22bar\x22\x3d\x3d\x3dmarkDef.type\x26\x26markDef.orient\x26\x26(mark\x3dgetMarkPropOrConfig(\x22cornerRadiusEnd\x22,markDef,config),void 0!\x3d\x3dmark)){const newProps\x3d\x22horizontal\x22\x3d\x3d\x3dmarkDef.orient\x26\x26parentGivenName.x2||\x22vertical\x22\x3d\x3d\x3dmarkDef.orient\x26\x26parentGivenName.y2?[\x22cornerRadius\x22]:BAR_CORNER_RADIUS_INDEX[markDef.orient];\nfor(var newProp of newProps)markDef[newProp]\x3dmark;void 0!\x3d\x3dmarkDef.cornerRadiusEnd\x26\x26delete markDef.cornerRadiusEnd}void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22opacity\x22,markDef,config)\x26\x26(newProp\x3dcontains([POINT,TICK,CIRCLE,SQUARE],markDef.type)\x26\x26!isAggregate(parentGivenName)?.7:void 0,markDef.opacity\x3dnewProp);void 0\x3d\x3d\x3dgetMarkPropOrConfig(\x22cursor\x22,markDef,config)\x26\x26(newProp\x3dmarkDef,config\x3dparentGivenName.href||newProp.href||getMarkPropOrConfig(\x22href\x22,newProp,config)?\x22pointer\x22:newProp.cursor,markDef.cursor\x3dconfig);\nthis.markDef\x3dconfig\x3dmarkDef;parentGivenSize\x3d{encoding:parentGivenName,size:isFrameMixins(spec)?Object.assign({},parentGivenSize,spec.width?{width:spec.width}:{},spec.height?{height:spec.height}:{}):parentGivenSize};var {encoding,size}\x3dparentGivenSize;for(const channel of POSITION_SCALE_CHANNELS)parentGivenSize\x3dgetSizeChannel(channel),isStep(size[parentGivenSize])\x26\x26isContinuousFieldOrDatumDef(encoding[channel])\x26\x26(delete size[parentGivenSize],warn(stepDropped(parentGivenSize)));this.size\x3dsize;this.stack\x3d\nstack$jscomp$1(parent,parentGivenName);this.specifiedScales\x3dthis.initScales(parent,parentGivenName);this.specifiedAxes\x3dthis.initAxes(parentGivenName);this.specifiedLegends\x3dthis.initLegends(parentGivenName);this.specifiedProjection\x3dspec.projection;this.selection\x3dspec.selection}get hasProjection(){const {encoding}\x3dthis,isGeoShapeMark\x3dthis.mark\x3d\x3d\x3dGEOSHAPE,hasGeoPosition\x3dencoding\x26\x26GEOPOSITION_CHANNELS.some(channel\x3d\x3eisFieldOrDatumDef(encoding[channel]));return isGeoShapeMark||hasGeoPosition}scaleDomain(channel){return(channel\x3d\nthis.specifiedScales[channel])?channel.domain:void 0}axis(channel){return this.specifiedAxes[channel]}legend(channel){return this.specifiedLegends[channel]}initScales(mark,encoding){return SCALE_CHANNELS.reduce((scales,channel)\x3d\x3e{const fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]);if(fieldOrDatumDef){var _fieldOrDatumDef$scal;scales[channel]\x3dthis.initScale(null!\x3d\x3d(_fieldOrDatumDef$scal\x3dfieldOrDatumDef.scale)\x26\x26void 0!\x3d\x3d_fieldOrDatumDef$scal?_fieldOrDatumDef$scal:{})}return scales},{})}initScale(scale){const {domain,\nrange}\x3dscale;scale\x3dreplaceExprRefInIndex(scale);isArray(domain)\x26\x26(scale.domain\x3ddomain.map(signalRefOrValue));isArray(range)\x26\x26(scale.range\x3drange.map(signalRefOrValue));return scale}initAxes(encoding){return POSITION_SCALE_CHANNELS.reduce((_axis,channel)\x3d\x3e{var channelDef\x3dencoding[channel];if(isFieldOrDatumDef(channelDef)||\x22x\x22\x3d\x3d\x3dchannel\x26\x26isFieldOrDatumDef(encoding.x2)||\x22y\x22\x3d\x3d\x3dchannel\x26\x26isFieldOrDatumDef(encoding.y2))channelDef\x3disFieldOrDatumDef(channelDef)?channelDef.axis:void 0,_axis[channel]\x3dchannelDef?\nthis.initAxis(Object.assign({},channelDef)):channelDef;return _axis},{})}initAxis(axis){var props\x3dkeys$jscomp$0(axis);const axisInternal\x3d{};for(const prop of props)props\x3daxis[prop],axisInternal[prop]\x3disConditionalAxisValue(props)?signalOrValueRefWithCondition(props):signalRefOrValue(props);return axisInternal}initLegends(encoding){return NONPOSITION_SCALE_CHANNELS.reduce((_legend,channel)\x3d\x3e{var fieldOrDatumDef\x3dgetFieldOrDatumDef(encoding[channel]),JSCompiler_temp;if(JSCompiler_temp\x3dfieldOrDatumDef)a:{switch(channel){case \x22color\x22:case \x22fill\x22:case \x22stroke\x22:case \x22size\x22:case \x22shape\x22:case \x22opacity\x22:case \x22strokeWidth\x22:case \x22strokeDash\x22:JSCompiler_temp\x3d\n!0;break a;case \x22fillOpacity\x22:case \x22strokeOpacity\x22:case \x22angle\x22:JSCompiler_temp\x3d!1;break a}JSCompiler_temp\x3dvoid 0}JSCompiler_temp\x26\x26(fieldOrDatumDef\x3dfieldOrDatumDef.legend,_legend[channel]\x3dfieldOrDatumDef?replaceExprRefInIndex(fieldOrDatumDef):fieldOrDatumDef);return _legend},{})}parseData(){this.component.data\x3dparseData(this)}parseLayoutSize(){{const {size,component}\x3dthis;for(const channel of POSITION_SCALE_CHANNELS){const sizeType\x3dgetSizeChannel(channel);if(size[sizeType]){var specifiedSize\x3dsize[sizeType];\ncomponent.layoutSize.set(sizeType,isStep(specifiedSize)?\x22step\x22:specifiedSize,!0)}else specifiedSize\x3ddefaultUnitSize(this,sizeType),component.layoutSize.set(sizeType,specifiedSize,!1)}}}parseSelections(){this.component.selection\x3dparseUnitSelection(this,this.selection)}parseMarkGroup(){this.component.mark\x3dparseMarkGroups(this)}parseAxesAndHeaders(){this.component.axes\x3dparseUnitAxes(this)}assembleSelectionTopLevelSignals(signals){return assembleTopLevelSignals(this,signals)}assembleSignals(){return[...assembleAxisSignals(this),\n...assembleUnitSelectionSignals(this,[])]}assembleSelectionData(data){return assembleUnitSelectionData(this,data)}assembleLayout(){return null}assembleLayoutSignals(){return assembleLayoutSignals(this)}assembleMarks(){var _this$component$mark;let marks\x3dnull!\x3d\x3d(_this$component$mark\x3dthis.component.mark)\x26\x26void 0!\x3d\x3d_this$component$mark?_this$component$mark:[];this.parent\x26\x26isLayerModel(this.parent)||(marks\x3dassembleUnitSelectionMarks(this,marks));return marks.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(channel){return channelHasField(this.encoding,\nchannel)}fieldDef(channel){return getFieldDef(this.encoding[channel])}typedFieldDef(channel){channel\x3dthis.fieldDef(channel);return isTypedFieldDef(channel)?channel:null}}class LayerModel extends Model{constructor(spec,parent,parentGivenName,parentGivenSize,config){super(spec,\x22layer\x22,parent,parentGivenName,config,spec.resolve,spec.view);_defineProperty(this,\x22children\x22,void 0);const layoutSize\x3dObject.assign({},parentGivenSize,spec.width?{width:spec.width}:{},spec.height?{height:spec.height}:{});this.children\x3d\nspec.layer.map((layer,i)\x3d\x3e{if(\x22layer\x22in layer)return new LayerModel(layer,this,this.getName(\x22layer_\x22+i),layoutSize,config);if(isUnitSpec(layer))return new UnitModel(layer,this,this.getName(\x22layer_\x22+i),layoutSize,config);throw Error(invalidSpec(layer));})}parseData(){this.component.data\x3dparseData(this);for(const child of this.children)child.parseData()}parseLayoutSize(){parseChildrenLayoutSize(this);parseNonUnitLayoutSizeForChannel(this,\x22width\x22);parseNonUnitLayoutSizeForChannel(this,\x22height\x22)}parseSelections(){this.component.selection\x3d\n{};for(const child of this.children){child.parseSelections();for(const key of keys$jscomp$0(child.component.selection))this.component.selection[key]\x3dchild.component.selection[key]}}parseMarkGroup(){for(const child of this.children)child.parseMarkGroup()}parseAxesAndHeaders(){{const {axes,resolve}\x3dthis.component,axisCount\x3d{top:0,bottom:0,right:0,left:0};for(var child$jscomp$0 of this.children){child$jscomp$0.parseAxesAndHeaders();for(const channel of keys$jscomp$0(child$jscomp$0.component.axes))resolve.axis[channel]\x3d\nparseGuideResolve(this.component.resolve,channel),\x22shared\x22\x3d\x3d\x3dresolve.axis[channel]\x26\x26(axes[channel]\x3dmergeAxisComponents(axes[channel],child$jscomp$0.component.axes[channel]),axes[channel]||(resolve.axis[channel]\x3d\x22independent\x22,delete axes[channel]))}for(const channel of POSITION_SCALE_CHANNELS){for(const child of this.children)if(child.component.axes[channel]){if(\x22independent\x22\x3d\x3d\x3dresolve.axis[channel]){var _axes$channel;axes[channel]\x3d(null!\x3d\x3d(_axes$channel\x3daxes[channel])\x26\x26void 0!\x3d\x3d_axes$channel?_axes$channel:\n[]).concat(child.component.axes[channel]);for(const axisComponent of child.component.axes[channel]){const {value:orient,explicit}\x3daxisComponent.getWithExplicit(\x22orient\x22);isSignalRef(orient)||(0\x3caxisCount[orient]\x26\x26!explicit\x26\x26(child$jscomp$0\x3dOPPOSITE_ORIENT[orient],axisCount[orient]\x3eaxisCount[child$jscomp$0]\x26\x26axisComponent.set(\x22orient\x22,child$jscomp$0,!1)),axisCount[orient]++)}}delete child.component.axes[channel]}if(\x22independent\x22\x3d\x3d\x3dresolve.axis[channel]\x26\x26axes[channel]\x26\x261\x3caxes[channel].length)for(const axisCmpt of axes[channel])axisCmpt.get(\x22grid\x22)\x26\x26\n!axisCmpt.explicit.grid\x26\x26(axisCmpt.implicit.grid\x3d!1)}}}assembleSelectionTopLevelSignals(signals){return this.children.reduce((sg,child)\x3d\x3echild.assembleSelectionTopLevelSignals(sg),signals)}assembleSignals(){return this.children.reduce((signals,child)\x3d\x3esignals.concat(child.assembleSignals()),assembleAxisSignals(this))}assembleLayoutSignals(){return this.children.reduce((signals,child)\x3d\x3esignals.concat(child.assembleLayoutSignals()),assembleLayoutSignals(this))}assembleSelectionData(data){return this.children.reduce((db,\nchild)\x3d\x3echild.assembleSelectionData(db),data)}assembleTitle(){let title\x3dsuper.assembleTitle();if(title)return title;for(const child of this.children)if(title\x3dchild.assembleTitle())return title}assembleLayout(){return null}assembleMarks(){return assembleLayerSelectionMarks(this,this.children.flatMap(child\x3d\x3echild.assembleMarks()))}assembleLegends(){return this.children.reduce((legends,child)\x3d\x3elegends.concat(child.assembleLegends()),assembleLegends(this))}}exports.accessPathDepth\x3daccessPathDepth;exports.accessPathWithDatum\x3d\naccessPathWithDatum;exports.compile\x3dfunction(inputSpec,opt){opt\x3dvoid 0\x3d\x3d\x3dopt?{}:opt;opt.logger\x26\x26(current\x3dopt.logger);opt.fieldTitle\x26\x26(titleFormatter\x3dopt.fieldTitle);try{const config\x3dinitConfig(mergeConfig(opt.config,inputSpec.config)),spec\x3dnormalize$jscomp$0(inputSpec,config),model\x3dbuildModel(spec,null,\x22\x22,void 0,config);model.parse();{var data\x3dmodel.component.data,model$jscomp$0\x3dmodel;checkLinks(data.sources);let firstPassCounter\x3d0,secondPassCounter\x3d0;for(var i\x3d0;5\x3ei\x26\x26optimizationDataflowHelper(data,\nmodel$jscomp$0,!0);i++)firstPassCounter++;data.sources.map(moveFacetDown);for(i\x3d0;5\x3ei\x26\x26optimizationDataflowHelper(data,model$jscomp$0,!1);i++)secondPassCounter++;checkLinks(data.sources);5\x3d\x3d\x3dMath.max(firstPassCounter,secondPassCounter)\x26\x26warn(\x22Maximum optimization runs(\x22.concat(5,\x22) reached.\x22))}{var autosize\x3dspec.autosize;data\x3dconfig;model$jscomp$0\x3dmodel;const width\x3dmodel$jscomp$0.component.layoutSize.get(\x22width\x22),height\x3dmodel$jscomp$0.component.layoutSize.get(\x22height\x22);void 0\x3d\x3d\x3dautosize?(autosize\x3d\n{type:\x22pad\x22},model$jscomp$0.hasAxisOrientSignalRef()\x26\x26(autosize.resize\x3d!0)):isString(autosize)\x26\x26(autosize\x3d{type:autosize});var JSCompiler_temp;if(JSCompiler_temp\x3dwidth\x26\x26height){var autoSizeType\x3dautosize.type;JSCompiler_temp\x3d\x22fit\x22\x3d\x3d\x3dautoSizeType||\x22fit-x\x22\x3d\x3d\x3dautoSizeType||\x22fit-y\x22\x3d\x3d\x3dautoSizeType}if(JSCompiler_temp)if(\x22step\x22\x3d\x3d\x3dwidth\x26\x26\x22step\x22\x3d\x3d\x3dheight)warn(droppingFit()),autosize.type\x3d\x22pad\x22;else if(\x22step\x22\x3d\x3d\x3dwidth||\x22step\x22\x3d\x3d\x3dheight){autoSizeType\x3d\x22step\x22\x3d\x3d\x3dwidth?\x22width\x22:\x22height\x22;warn(droppingFit(getPositionScaleChannel(autoSizeType)));\nJSCompiler_temp\x3dautosize;var JSCompiler_inline_result\x3d(autoSizeType\x3d\x22width\x22\x3d\x3d\x3dautoSizeType?\x22height\x22:\x22width\x22,\x22fit-\x22.concat(getPositionScaleChannel(autoSizeType)));JSCompiler_temp.type\x3dJSCompiler_inline_result}var JSCompiler_inline_result$jscomp$0\x3dObject.assign({},1\x3d\x3d\x3dkeys$jscomp$0(autosize).length\x26\x26autosize.type?\x22pad\x22\x3d\x3d\x3dautosize.type?{}:{autosize:autosize.type}:{autosize},extractTopLevelProperties(data,!1),extractTopLevelProperties(inputSpec,!0))}return{spec:assembleTopLevelModel(model,JSCompiler_inline_result$jscomp$0,\ninputSpec.datasets,inputSpec.usermeta),normalized:spec}}finally{opt.logger\x26\x26(current\x3dmain),opt.fieldTitle\x26\x26(titleFormatter\x3ddefaultTitleFormatter)}};exports.contains\x3dcontains;exports.deepEqual\x3ddeepEqual;exports.deleteNestedProperty\x3ddeleteNestedProperty;exports.duplicate\x3dduplicate;exports.entries\x3dentries;exports.every\x3devery;exports.fieldIntersection\x3dfieldIntersection;exports.flatAccessWithDatum\x3dflatAccessWithDatum;exports.getFirstDefined\x3dgetFirstDefined;exports.hasIntersection\x3dhasIntersection;exports.hash\x3d\nhash;exports.internalField\x3dinternalField;exports.isBoolean\x3disBoolean$1;exports.isEmpty\x3disEmpty;exports.isEqual\x3dfunction(dict,other){const dictKeys\x3dkeys$jscomp$0(dict),otherKeys\x3dkeys$jscomp$0(other);if(dictKeys.length!\x3d\x3dotherKeys.length)return!1;for(const key of dictKeys)if(dict[key]!\x3d\x3dother[key])return!1;return!0};exports.isInternalField\x3disInternalField;exports.isNullOrFalse\x3disNullOrFalse;exports.isNumeric\x3disNumeric;exports.keys\x3dkeys$jscomp$0;exports.logicalExpr\x3dlogicalExpr;exports.mergeDeep\x3dmergeDeep;\nexports.normalize\x3dnormalize$jscomp$0;exports.normalizeAngle\x3dnormalizeAngle;exports.omit\x3domit;exports.pick\x3dpick;exports.prefixGenerator\x3dprefixGenerator;exports.removePathFromField\x3dremovePathFromField;exports.replaceAll\x3dreplaceAll;exports.replacePathInField\x3dreplacePathInField;exports.resetIdCounter\x3dfunction(){idCounter\x3d42};exports.setEqual\x3dsetEqual;exports.some\x3dsome;exports.stringify\x3dstringify;exports.titleCase\x3dtitleCase;exports.unique\x3dunique;exports.uniqueId\x3duniqueId;exports.vals\x3dvals;exports.varName\x3d\nvarName;exports.version\x3d\x224.17.0\x22;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_util$build$vega_util.js", true , "shadow$provide.module$node_modules$vega_util$build$vega_util\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{}))})(this,function(exports){function accessor(fn,fields,name){fn.fields\x3dfields||[];fn.fname\x3dname;return fn}function accessorFields(fn){return null\x3d\x3d\nfn?null:fn.fields}function getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function error(message){throw Error(message);}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s\x3d\x22\x22;i\x3dj+1}const path\x3d[],n\x3dp.length;let q\x3dnull,b\x3d0,s\x3d\x22\x22,i,j,c;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j)(c\x3dp[j],\x22\\\\\x22\x3d\x3d\x3dc)?(s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj):c\x3d\x3d\x3dq?(push(),q\x3dnull,b\x3d-1):q||(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc?(i\x3dj+1,q\x3dc):i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc?(i\x3dj+1,q\x3dc):\x22.\x22!\x3d\x3dc||b?\x22[\x22\x3d\x3d\x3dc?(j\x3ei\x26\x26push(),b\x3di\x3dj+1):\x22]\x22\x3d\x3d\x3dc\x26\x26(b||\nerror(\x22Access path missing open bracket: \x22+p),0\x3cb\x26\x26push(),b\x3d0,i\x3dj+1):j\x3ei?push():i\x3dj+1);b\x26\x26error(\x22Access path missing closing bracket: \x22+p);q\x26\x26error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function field$jscomp$0(field,name,opt){const path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:field;return accessor((opt\x26\x26opt.get||getter)(path),[field],name||field)}function log$1(method,level,input){level\x3d[level].concat([].slice.call(input));console[method].apply(console,\nlevel)}function isObject(_){return _\x3d\x3d\x3dObject(_)}function writeConfig(output,key,value,recurse){if(\x22__proto__\x22!\x3d\x3dkey){var k;if(isObject(value)\x26\x26!isArray(value))for(k in output\x3disObject(output[key])?output[key]:output[key]\x3d{},value)recurse\x26\x26(!0\x3d\x3d\x3drecurse||recurse[k])?writeConfig(output,k,value[k]):\x22__proto__\x22!\x3d\x3dk\x26\x26(output[k]\x3dvalue[k]);else output[key]\x3dvalue}}function mergeNamed(a,b){function add(_){map[_.name]||(map[_.name]\x3d1,out.push(_))}if(null\x3d\x3da)return b;const map\x3d{},out\x3d[];b.forEach(add);a.forEach(add);\nreturn out}function peek(array){return array[array.length-1]}function toNumber(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:+_}function pan(domain,delta,lift,ground){const d0\x3dlift(domain[0]);domain\x3dlift(peek(domain));delta*\x3ddomain-d0;return[ground(d0-delta),ground(domain-delta)]}function zoom(domain,anchor,scale,lift,ground){const d0\x3dlift(domain[0]);domain\x3dlift(peek(domain));anchor\x3dnull!\x3danchor?lift(anchor):(d0+domain)/2;return[ground(anchor+(d0-anchor)*scale),ground(anchor+(domain-anchor)*scale)]}function array$jscomp$0(_){return null!\x3d\n_?isArray(_)?_:[_]:[]}function isFunction(_){return\x22function\x22\x3d\x3d\x3dtypeof _}function extend(_){for(let x,k,i\x3d1,len\x3darguments.length;i\x3clen;++i)for(k in x\x3darguments[i],x)_[k]\x3dx[k];return _}function has(object,property){return hop.call(object,property)}function isDate(_){return\x22[object Date]\x22\x3d\x3d\x3dObject.prototype.toString.call(_)}function isNumber(_){return\x22number\x22\x3d\x3d\x3dtypeof _}function isString(_){return\x22string\x22\x3d\x3d\x3dtypeof _}function repeat(str,reps){let s\x3d\x22\x22;for(;0\x3c\x3d--reps;)s+\x3dstr;return s}function $(x){return isArray(x)?\n\x22[\x22+x.map($)+\x22]\x22:isObject(x)||isString(x)?JSON.stringify(x).replace(\x22\\u2028\x22,\x22\\\\u2028\x22).replace(\x22\\u2029\x22,\x22\\\\u2029\x22):x}const get1\x3dfield\x3d\x3efunction(obj){return obj[field]},getN\x3dpath\x3d\x3e{const len\x3dpath.length;return function(obj){for(let i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}},id\x3dfield$jscomp$0(\x22id\x22),identity\x3daccessor(_\x3d\x3e_,[],\x22identity\x22),zero\x3daccessor(()\x3d\x3e0,[],\x22zero\x22),one\x3daccessor(()\x3d\x3e1,[],\x22one\x22),truthy\x3daccessor(()\x3d\x3e!0,[],\x22true\x22),falsy\x3daccessor(()\x3d\x3e!1,[],\x22false\x22);var isArray\x3dArray.isArray;const exp\x3d\nsign\x3d\x3ex\x3d\x3esign*Math.exp(x),log\x3dsign\x3d\x3ex\x3d\x3eMath.log(sign*x),symlog\x3dc\x3d\x3ex\x3d\x3eMath.sign(x)*Math.log1p(Math.abs(x/c)),symexp\x3dc\x3d\x3ex\x3d\x3eMath.sign(x)*Math.expm1(Math.abs(x))*c,pow\x3dexponent\x3d\x3ex\x3d\x3e0\x3ex?-Math.pow(-x,exponent):Math.pow(x,exponent),ascending\x3d(u,v)\x3d\x3e(u\x3cv||null\x3d\x3du)\x26\x26null!\x3dv?-1:(u\x3ev||null\x3d\x3dv)\x26\x26null!\x3du?1:(v\x3dv instanceof Date?+v:v,u\x3du instanceof Date?+u:u)!\x3d\x3du\x26\x26v\x3d\x3d\x3dv?-1:v!\x3d\x3dv\x26\x26u\x3d\x3d\x3du?1:0,comparator\x3d(fields,orders)\x3d\x3e1\x3d\x3d\x3dfields.length?compare1(fields[0],orders[0]):compareN(fields,orders,fields.length),compare1\x3d\n(field,order)\x3d\x3efunction(a,b){return ascending(field(a),field(b))*order},compareN\x3d(fields,orders,n)\x3d\x3e{orders.push(0);return function(a,b){var f\x3d0;let i\x3d-1;for(;0\x3d\x3d\x3df\x26\x26++i\x3cn;)f\x3dfields[i],f\x3dascending(f(a),f(b));return f*orders[i]}},hop\x3dObject.prototype.hasOwnProperty,NULL\x3d{},defaultParser\x3d_\x3d\x3eisNumber(_)?_:isDate(_)?_:Date.parse(_);exports.Debug\x3d4;exports.Error\x3d1;exports.Info\x3d3;exports.None\x3d0;exports.Warn\x3d2;exports.accessor\x3daccessor;exports.accessorFields\x3daccessorFields;exports.accessorName\x3dfunction(fn){return null\x3d\x3d\nfn?null:fn.fname};exports.array\x3darray$jscomp$0;exports.ascending\x3dascending;exports.clampRange\x3dfunction(range,min,max){let lo\x3drange[0];range\x3drange[1];let span;range\x3clo\x26\x26(span\x3drange,range\x3dlo,lo\x3dspan);span\x3drange-lo;return span\x3e\x3dmax-min?[min,max]:[lo\x3dMath.min(Math.max(lo,min),max-span),lo+span]};exports.compare\x3dfunction(fields,orders,opt){opt\x3dopt||{};orders\x3darray$jscomp$0(orders)||[];const ord\x3d[],get\x3d[],fmap\x3d{},gen\x3dopt.comparator||comparator;array$jscomp$0(fields).forEach((f,i)\x3d\x3e{null!\x3df\x26\x26(ord.push(\x22descending\x22\x3d\x3d\x3d\norders[i]?-1:1),get.push(f\x3disFunction(f)?f:field$jscomp$0(f,null,opt)),(accessorFields(f)||[]).forEach(_\x3d\x3efmap[_]\x3d1))});return 0\x3d\x3d\x3dget.length?null:accessor(gen(get,ord),Object.keys(fmap))};exports.constant\x3dfunction(_){return isFunction(_)?_:()\x3d\x3e_};exports.debounce\x3dfunction(delay,handler){let tid;return e\x3d\x3e{tid\x26\x26clearTimeout(tid);tid\x3dsetTimeout(()\x3d\x3e(handler(e),tid\x3dnull),delay)}};exports.error\x3derror;exports.extend\x3dextend;exports.extent\x3dfunction(array,f){let i\x3d0,n,v,min,max;if(array\x26\x26(n\x3darray.length))if(null\x3d\x3d\nf){for(v\x3darray[i];i\x3cn\x26\x26(null\x3d\x3dv||v!\x3d\x3dv);v\x3darray[++i]);for(min\x3dmax\x3dv;i\x3cn;++i)v\x3darray[i],null!\x3dv\x26\x26(v\x3cmin\x26\x26(min\x3dv),v\x3emax\x26\x26(max\x3dv))}else{for(v\x3df(array[i]);i\x3cn\x26\x26(null\x3d\x3dv||v!\x3d\x3dv);v\x3df(array[++i]));for(min\x3dmax\x3dv;i\x3cn;++i)v\x3df(array[i]),null!\x3dv\x26\x26(v\x3cmin\x26\x26(min\x3dv),v\x3emax\x26\x26(max\x3dv))}return[min,max]};exports.extentIndex\x3dfunction(array,f){const n\x3darray.length;let i\x3d-1,a,b,c,u,v;if(null\x3d\x3df){for(;++i\x3cn;)if(b\x3darray[i],null!\x3db\x26\x26b\x3e\x3db){a\x3dc\x3db;break}if(i\x3d\x3d\x3dn)return[-1,-1];for(u\x3dv\x3di;++i\x3cn;)b\x3darray[i],null!\x3db\x26\x26(a\x3eb\x26\x26(a\x3db,u\x3di),\nc\x3cb\x26\x26(c\x3db,v\x3di))}else{for(;++i\x3cn;)if(b\x3df(array[i],i,array),null!\x3db\x26\x26b\x3e\x3db){a\x3dc\x3db;break}if(i\x3d\x3d\x3dn)return[-1,-1];for(u\x3dv\x3di;++i\x3cn;)b\x3df(array[i],i,array),null!\x3db\x26\x26(a\x3eb\x26\x26(a\x3db,u\x3di),c\x3cb\x26\x26(c\x3db,v\x3di))}return[u,v]};exports.falsy\x3dfalsy;exports.fastmap\x3dfunction(input){function has$1(key){return has(obj,key)\x26\x26obj[key]!\x3d\x3dNULL}let obj\x3d{},test;const map\x3d{size:0,empty:0,object:obj,has:has$1,get(key){return has$1(key)?obj[key]:void 0},set(key,value){has$1(key)||(++map.size,obj[key]\x3d\x3d\x3dNULL\x26\x26--map.empty);obj[key]\x3dvalue;\nreturn this},delete(key){has$1(key)\x26\x26(--map.size,++map.empty,obj[key]\x3dNULL);return this},clear(){map.size\x3dmap.empty\x3d0;map.object\x3dobj\x3d{}},test(_){return arguments.length?(test\x3d_,map):test},clean(){const next\x3d{};let size\x3d0;for(const key in obj){const value\x3dobj[key];value\x3d\x3d\x3dNULL||test\x26\x26test(value)||(next[key]\x3dvalue,++size)}map.size\x3dsize;map.empty\x3d0;map.object\x3dobj\x3dnext}};input\x26\x26Object.keys(input).forEach(key\x3d\x3e{map.set(key,input[key])});return map};exports.field\x3dfield$jscomp$0;exports.flush\x3dfunction(range,\nvalue,threshold,left,right,center){if(!threshold\x26\x260!\x3d\x3dthreshold)return center;threshold\x3d+threshold;let a\x3drange[0],b\x3dpeek(range);b\x3ca\x26\x26(range\x3da,a\x3db,b\x3drange);range\x3dMath.abs(value-a);value\x3dMath.abs(b-value);return range\x3cvalue\x26\x26range\x3c\x3dthreshold?left:value\x3c\x3dthreshold?right:center};exports.hasOwnProperty\x3dhas;exports.id\x3did;exports.identity\x3didentity;exports.inherits\x3dfunction(child,parent,members){parent\x3dchild.prototype\x3dObject.create(parent.prototype);Object.defineProperty(parent,\x22constructor\x22,{value:child,\nwritable:!0,enumerable:!0,configurable:!0});return extend(parent,members)};exports.inrange\x3dfunction(value,range,left,right){let r0\x3drange[0];range\x3drange[range.length-1];let t;r0\x3erange\x26\x26(t\x3dr0,r0\x3drange,range\x3dt);return(void 0\x3d\x3d\x3dleft||left?r0\x3c\x3dvalue:r0\x3cvalue)\x26\x26(void 0\x3d\x3d\x3dright||right?value\x3c\x3drange:value\x3crange)};exports.isArray\x3disArray;exports.isBoolean\x3dfunction(_){return\x22boolean\x22\x3d\x3d\x3dtypeof _};exports.isDate\x3disDate;exports.isFunction\x3disFunction;exports.isIterable\x3dfunction(_){return _\x26\x26isFunction(_[Symbol.iterator])};\nexports.isNumber\x3disNumber;exports.isObject\x3disObject;exports.isRegExp\x3dfunction(_){return\x22[object RegExp]\x22\x3d\x3d\x3dObject.prototype.toString.call(_)};exports.isString\x3disString;exports.key\x3dfunction(fields,flat,opt){fields\x26\x26(fields\x3dflat?array$jscomp$0(fields).map(f\x3d\x3ef.replace(/\\\\(.)/g,\x22$1\x22)):array$jscomp$0(fields));const len\x3dfields\x26\x26fields.length,gen\x3dopt\x26\x26opt.get||getter;opt\x3df\x3d\x3egen(flat?[f]:splitAccessPath(f));if(len)if(1\x3d\x3d\x3dlen){const get\x3dopt(fields[0]);opt\x3dfunction(_){return\x22\x22+get(_)}}else{const get\x3dfields.map(opt);\nopt\x3dfunction(_){let s\x3d\x22\x22+get[0](_),i\x3d0;for(;++i\x3clen;)s+\x3d\x22|\x22+get[i](_);return s}}else opt\x3dfunction(){return\x22\x22};return accessor(opt,fields,\x22key\x22)};exports.lerp\x3dfunction(array,frac){const lo\x3darray[0];array\x3dpeek(array);return(frac\x3d+frac)?1\x3d\x3d\x3dfrac?array:lo+frac*(array-lo):lo};exports.logger\x3dfunction(_$jscomp$0,method){let level\x3d_$jscomp$0||0;return{level(_){return arguments.length?(level\x3d+_,this):level},error(){1\x3c\x3dlevel\x26\x26log$1(method||\x22error\x22,\x22ERROR\x22,arguments);return this},warn(){2\x3c\x3dlevel\x26\x26log$1(method||\n\x22warn\x22,\x22WARN\x22,arguments);return this},info(){3\x3c\x3dlevel\x26\x26log$1(method||\x22log\x22,\x22INFO\x22,arguments);return this},debug(){4\x3c\x3dlevel\x26\x26log$1(method||\x22log\x22,\x22DEBUG\x22,arguments);return this}}};exports.lruCache\x3dfunction(maxsize){maxsize\x3d+maxsize||1E4;let curr,prev,size;const clear\x3d()\x3d\x3e{curr\x3d{};prev\x3d{};size\x3d0},update\x3d(key,value)\x3d\x3e{++size\x3emaxsize\x26\x26(prev\x3dcurr,curr\x3d{},size\x3d1);return curr[key]\x3dvalue};clear();return{clear,has:key\x3d\x3ehas(curr,key)||has(prev,key),get:key\x3d\x3ehas(curr,key)?curr[key]:has(prev,key)?update(key,prev[key]):\nvoid 0,set:(key,value)\x3d\x3ehas(curr,key)?curr[key]\x3dvalue:update(key,value)}};exports.merge\x3dfunction(compare,array0,array1,output){const n0\x3darray0.length,n1\x3darray1.length;if(!n1)return array0;if(!n0)return array1;output\x3doutput||new array0.constructor(n0+n1);let i0\x3d0,i1\x3d0,i\x3d0;for(;i0\x3cn0\x26\x26i1\x3cn1;++i)output[i]\x3d0\x3ccompare(array0[i0],array1[i1])?array1[i1++]:array0[i0++];for(;i0\x3cn0;++i0,++i)output[i]\x3darray0[i0];for(;i1\x3cn1;++i1,++i)output[i]\x3darray1[i1];return output};exports.mergeConfig\x3dfunction(...configs){return configs.reduce((out,\nsource)\x3d\x3e{for(const key in source)\x22signals\x22\x3d\x3d\x3dkey?out.signals\x3dmergeNamed(out.signals,source.signals):writeConfig(out,key,source[key],\x22legend\x22\x3d\x3d\x3dkey?{layout:1}:\x22style\x22\x3d\x3d\x3dkey?!0:null);return out},{})};exports.one\x3done;exports.pad\x3dfunction(str,length,padchar,align){padchar\x3dpadchar||\x22 \x22;str+\x3d\x22\x22;length-\x3dstr.length;return 0\x3e\x3dlength?str:\x22left\x22\x3d\x3d\x3dalign?repeat(padchar,length)+str:\x22center\x22\x3d\x3d\x3dalign?repeat(padchar,~~(length/2))+str+repeat(padchar,Math.ceil(length/2)):str+repeat(padchar,length)};exports.panLinear\x3d\nfunction(domain,delta){return pan(domain,delta,toNumber,identity)};exports.panLog\x3dfunction(domain,delta){var sign\x3dMath.sign(domain[0]);return pan(domain,delta,log(sign),exp(sign))};exports.panPow\x3dfunction(domain,delta,exponent){return pan(domain,delta,pow(exponent),pow(1/exponent))};exports.panSymlog\x3dfunction(domain,delta,constant){return pan(domain,delta,symlog(constant),symexp(constant))};exports.peek\x3dpeek;exports.quarter\x3dfunction(date){return 1+~~((new Date(date)).getMonth()/3)};exports.repeat\x3d\nrepeat;exports.span\x3dfunction(array){return array\x26\x26peek(array)-array[0]||0};exports.splitAccessPath\x3dsplitAccessPath;exports.stringValue\x3d$;exports.toBoolean\x3dfunction(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:_\x26\x26\x22false\x22!\x3d\x3d_\x26\x26\x220\x22!\x3d\x3d_?!!_:!1};exports.toDate\x3dfunction(_,parser){parser\x3dparser||defaultParser;return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:parser(_)};exports.toNumber\x3dtoNumber;exports.toSet\x3dfunction(_){const s\x3d{},n\x3d_.length;for(let i\x3d0;i\x3cn;++i)s[_[i]]\x3d!0;return s};exports.toString\x3dfunction(_){return null\x3d\x3d_||\x22\x22\x3d\x3d\x3d_?null:\n_+\x22\x22};exports.truncate\x3dfunction(str,length,align,ellipsis){ellipsis\x3dnull!\x3dellipsis?ellipsis:\x22\u2026\x22;str+\x3d\x22\x22;const n\x3dstr.length,l\x3dMath.max(0,length-ellipsis.length);return n\x3c\x3dlength?str:\x22left\x22\x3d\x3d\x3dalign?ellipsis+str.slice(n-l):\x22center\x22\x3d\x3d\x3dalign?str.slice(0,Math.ceil(l/2))+ellipsis+str.slice(n-~~(l/2)):str.slice(0,l)+ellipsis};exports.truthy\x3dtruthy;exports.utcquarter\x3dfunction(date){return 1+~~((new Date(date)).getUTCMonth()/3)};exports.visitArray\x3dfunction(array,filter,visitor){if(array)if(filter){const n\x3d\narray.length;for(let i\x3d0;i\x3cn;++i){const t\x3dfilter(array[i]);t\x26\x26visitor(t,i,array)}}else array.forEach(visitor)};exports.writeConfig\x3dwriteConfig;exports.zero\x3dzero;exports.zoomLinear\x3dfunction(domain,anchor,scale){return zoom(domain,anchor,scale,toNumber,identity)};exports.zoomLog\x3dfunction(domain,anchor,scale){const sign\x3dMath.sign(domain[0]);return zoom(domain,anchor,scale,log(sign),exp(sign))};exports.zoomPow\x3dfunction(domain,anchor,scale,exponent){return zoom(domain,anchor,scale,pow(exponent),pow(1/\nexponent))};exports.zoomSymlog\x3dfunction(domain,anchor,scale,constant){return zoom(domain,anchor,scale,symlog(constant),symexp(constant))};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_array$dist$d3_array.js", true , "shadow$provide.module$node_modules$d3_array$dist$d3_array\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function ascending(a,b){return a\x3cb?-1:a\x3eb?1:a\x3e\x3db?0:NaN}function bisector(f){function left(a,\nx,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);for(;lo\x3chi;){const mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ecompare(a[mid],x)?lo\x3dmid+1:hi\x3dmid}return lo}let delta\x3df,compare\x3df;1\x3d\x3d\x3df.length\x26\x26(delta\x3d(d,x)\x3d\x3ef(d)-x,compare\x3dascendingComparator(f));return{left,center:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);hi\x3dleft(a,x,lo,hi-1);return hi\x3elo\x26\x26delta(a[hi-1],x)\x3e-delta(a[hi],x)?hi-1:hi},right:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);for(;lo\x3chi;){const mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ccompare(a[mid],x)?hi\x3dmid:\nlo\x3dmid+1}return lo}}}function ascendingComparator(f){return(d,x)\x3d\x3eascending(f(d),x)}function number(x){return null\x3d\x3d\x3dx?NaN:+x}function*numbers(values,valueof){if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(value$jscomp$0\x3d+value$jscomp$0)\x3e\x3dvalue$jscomp$0\x26\x26(yield value$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(value\x3d+value)\x3e\x3dvalue\x26\x26(yield value)}}function count$jscomp$0(values,valueof){let count\x3d0;if(void 0\x3d\x3d\x3d\nvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(value$jscomp$0\x3d+value$jscomp$0)\x3e\x3dvalue$jscomp$0\x26\x26++count;else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(value\x3d+value)\x3e\x3dvalue\x26\x26++count}return count}function length$1(array){return array.length|0}function empty(length){return!(0\x3clength)}function arrayify(values){return\x22object\x22!\x3d\x3dtypeof values||\x22length\x22in values?values:Array.from(values)}function reducer$jscomp$0(reduce){return values\x3d\x3e\nreduce(...values)}function variance(values,valueof){let count\x3d0,delta,mean\x3d0,sum\x3d0;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(value$jscomp$0\x3d+value$jscomp$0)\x3e\x3dvalue$jscomp$0\x26\x26(delta\x3dvalue$jscomp$0-mean,mean+\x3ddelta/++count,sum+\x3ddelta*(value$jscomp$0-mean));else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(value\x3d+value)\x3e\x3dvalue\x26\x26(delta\x3dvalue-mean,mean+\x3ddelta/++count,sum+\x3ddelta*(value-mean))}if(1\x3ccount)return sum/(count-\n1)}function deviation(values,valueof){return(values\x3dvariance(values,valueof))?Math.sqrt(values):values}function extent(values,valueof){let min,max;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(void 0\x3d\x3d\x3dmin?value$jscomp$0\x3e\x3dvalue$jscomp$0\x26\x26(min\x3dmax\x3dvalue$jscomp$0):(min\x3evalue$jscomp$0\x26\x26(min\x3dvalue$jscomp$0),max\x3cvalue$jscomp$0\x26\x26(max\x3dvalue$jscomp$0)));else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(void 0\x3d\x3d\x3dmin?value\x3e\x3dvalue\x26\x26\n(min\x3dmax\x3dvalue):(min\x3evalue\x26\x26(min\x3dvalue),max\x3cvalue\x26\x26(max\x3dvalue)))}return[min,max]}function intern_get({_intern,_key},value){_key\x3d_key(value);return _intern.has(_key)?_intern.get(_key):value}function intern_set({_intern,_key},value){_key\x3d_key(value);if(_intern.has(_key))return _intern.get(_key);_intern.set(_key,value);return value}function intern_delete({_intern,_key},value){_key\x3d_key(value);_intern.has(_key)\x26\x26(value\x3d_intern.get(value),_intern.delete(_key));return value}function keyof(value){return null!\x3d\x3d\nvalue\x26\x26\x22object\x22\x3d\x3d\x3dtypeof value?value.valueOf():value}function identity(x){return x}function group$jscomp$0(values,...keys){return nest(values,identity,identity,keys)}function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function unique(values){if(1!\x3d\x3dvalues.length)throw Error(\x22duplicate key\x22);return values[0]}function nest(values$jscomp$1,map,reduce,keys){return function regroup(values$jscomp$0,i){if(i\x3e\x3dkeys.length)return reduce(values$jscomp$0);const groups\x3dnew InternMap,\nkeyof\x3dkeys[i++];let index\x3d-1;for(const value of values$jscomp$0){const key\x3dkeyof(value,++index,values$jscomp$0),group\x3dgroups.get(key);group?group.push(value):groups.set(key,[value])}for(const [key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values$jscomp$1,0)}function permute(source,keys){return Array.from(keys,key\x3d\x3esource[key])}function sort(values,...F){if(\x22function\x22!\x3d\x3dtypeof values[Symbol.iterator])throw new TypeError(\x22values is not iterable\x22);values\x3dArray.from(values);\nlet [f$jscomp$0\x3dascending]\x3dF;if(1\x3d\x3d\x3df$jscomp$0.length||1\x3cF.length){const index\x3dUint32Array.from(values,(d,i)\x3d\x3ei);1\x3cF.length?(F\x3dF.map(f\x3d\x3evalues.map(f)),index.sort((i,j)\x3d\x3e{for(const f of F){const c\x3dascending(f[i],f[j]);if(c)return c}})):(f$jscomp$0\x3dvalues.map(f$jscomp$0),index.sort((i,j)\x3d\x3eascending(f$jscomp$0[i],f$jscomp$0[j])));return permute(values,index)}return values.sort(f$jscomp$0)}function constant(x){return function(){return x}}function ticks(start,stop,count){var reverse,i\x3d-1,step;stop\x3d+stop;\nstart\x3d+start;count\x3d+count;if(start\x3d\x3d\x3dstop\x26\x260\x3ccount)return[start];if(reverse\x3dstop\x3cstart){var n\x3dstart;start\x3dstop;stop\x3dn}if(0\x3d\x3d\x3d(step\x3dtickIncrement(start,stop,count))||!isFinite(step))return[];if(0\x3cstep)for(count\x3dMath.round(start/step),n\x3dMath.round(stop/step),count*step\x3cstart\x26\x26++count,n*step\x3estop\x26\x26--n,start\x3dArray(n\x3dn-count+1);++i\x3cn;)start[i]\x3d(count+i)*step;else for(step\x3d-step,count\x3dMath.round(start*step),n\x3dMath.round(stop*step),count/step\x3cstart\x26\x26++count,n/step\x3estop\x26\x26--n,start\x3dArray(n\x3dn-count+1);++i\x3c\nn;)start[i]\x3d(count+i)/step;reverse\x26\x26start.reverse();return start}function tickIncrement(start,stop,count){stop\x3d(stop-start)/Math.max(0,count);start\x3dMath.floor(Math.log(stop)/Math.LN10);stop/\x3dMath.pow(10,start);return 0\x3c\x3dstart?(stop\x3e\x3de10?10:stop\x3e\x3de5?5:stop\x3e\x3de2?2:1)*Math.pow(10,start):-Math.pow(10,-start)/(stop\x3e\x3de10?10:stop\x3e\x3de5?5:stop\x3e\x3de2?2:1)}function nice(start,stop,count){let prestep;for(;;){const step\x3dtickIncrement(start,stop,count);if(step\x3d\x3d\x3dprestep||0\x3d\x3d\x3dstep||!isFinite(step))return[start,stop];\n0\x3cstep?(start\x3dMath.floor(start/step)*step,stop\x3dMath.ceil(stop/step)*step):0\x3estep\x26\x26(start\x3dMath.ceil(start*step)/step,stop\x3dMath.floor(stop*step)/step);prestep\x3dstep}}function sturges(values){return Math.ceil(Math.log(count$jscomp$0(values))/Math.LN2)+1}function bin(){function histogram(data){Array.isArray(data)||(data\x3dArray.from(data));var i,n\x3ddata.length,values\x3dArray(n);for(i\x3d0;i\x3cn;++i)values[i]\x3dvalue(data[i],i,data);var xz\x3ddomain(values),x0\x3dxz[0];xz\x3dxz[1];var tz\x3dthreshold(values,x0,xz);if(!Array.isArray(tz)){i\x3d\nxz;var tn\x3d+tz;domain\x3d\x3d\x3dextent\x26\x26([x0,xz]\x3dnice(x0,xz,tn));tz\x3dticks(x0,xz,tn);tz[tz.length-1]\x3e\x3dxz\x26\x26(i\x3e\x3dxz\x26\x26domain\x3d\x3d\x3dextent?(i\x3dtickIncrement(x0,xz,tn),isFinite(i)\x26\x26(0\x3ci?xz\x3d(Math.floor(xz/i)+1)*i:0\x3ei\x26\x26(xz\x3d(Math.ceil(xz*-i)+1)/-i))):tz.pop())}for(tn\x3dtz.length;tz[0]\x3c\x3dx0;)tz.shift(),--tn;for(;tz[tn-1]\x3exz;)tz.pop(),--tn;var bins\x3dArray(tn+1);for(i\x3d0;i\x3c\x3dtn;++i){var x\x3dbins[i]\x3d[];x.x0\x3d0\x3ci?tz[i-1]:x0;x.x1\x3di\x3ctn?tz[i]:xz}for(i\x3d0;i\x3cn;++i)x\x3dvalues[i],x0\x3c\x3dx\x26\x26x\x3c\x3dxz\x26\x26bins[bisectRight(tz,x,0,tn)].push(data[i]);return bins}\nvar value\x3didentity,domain\x3dextent,threshold\x3dsturges;histogram.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(_),histogram):value};histogram.domain\x3dfunction(_){return arguments.length?(domain\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant([_[0],_[1]]),histogram):domain};histogram.thresholds\x3dfunction(_){return arguments.length?(threshold\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold};return histogram}function max$jscomp$0(values,\nvalueof){let max;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(max\x3cvalue$jscomp$0||void 0\x3d\x3d\x3dmax\x26\x26value$jscomp$0\x3e\x3dvalue$jscomp$0)\x26\x26(max\x3dvalue$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(max\x3cvalue||void 0\x3d\x3d\x3dmax\x26\x26value\x3e\x3dvalue)\x26\x26(max\x3dvalue)}return max}function min$jscomp$0(values,valueof){let min;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(min\x3evalue$jscomp$0||void 0\x3d\x3d\x3dmin\x26\x26\nvalue$jscomp$0\x3e\x3dvalue$jscomp$0)\x26\x26(min\x3dvalue$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(min\x3evalue||void 0\x3d\x3d\x3dmin\x26\x26value\x3e\x3dvalue)\x26\x26(min\x3dvalue)}return min}function quickselect(array,k,left\x3d0,right\x3darray.length-1,compare\x3dascending){for(;right\x3eleft;){if(600\x3cright-left){var n\x3dright-left+1,m\x3dk-left+1,z\x3dMath.log(n),s\x3d.5*Math.exp(2*z/3);z\x3d.5*Math.sqrt(z*s*(n-s)/n)*(0\x3em-n/2?-1:1);quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+z)),Math.min(right,\nMath.floor(k+(n-m)*s/n+z)),compare)}n\x3darray[k];m\x3dleft;s\x3dright;swap(array,left,k);for(0\x3ccompare(array[right],n)\x26\x26swap(array,left,right);m\x3cs;){swap(array,m,s);++m;for(--s;0\x3ecompare(array[m],n);)++m;for(;0\x3ccompare(array[s],n);)--s}0\x3d\x3d\x3dcompare(array[left],n)?swap(array,left,s):(++s,swap(array,s,right));s\x3c\x3dk\x26\x26(left\x3ds+1);k\x3c\x3ds\x26\x26(right\x3ds-1)}return array}function swap(array,i,j){const t\x3darray[i];array[i]\x3darray[j];array[j]\x3dt}function quantile(values,p,valueof){values\x3dFloat64Array.from(numbers(values,valueof));\nif(valueof\x3dvalues.length){if(0\x3e\x3d(p\x3d+p)||2\x3evalueof)return min$jscomp$0(values);if(1\x3c\x3dp)return max$jscomp$0(values);p*\x3dvalueof-1;valueof\x3dMath.floor(p);var value0\x3dmax$jscomp$0(quickselect(values,valueof).subarray(0,valueof+1));values\x3dmin$jscomp$0(values.subarray(valueof+1));return value0+(values-value0)*(p-valueof)}}function maxIndex$jscomp$0(values,valueof){let max,maxIndex\x3d-1,index\x3d-1;if(void 0\x3d\x3d\x3dvalueof)for(const value of values)++index,null!\x3dvalue\x26\x26(max\x3cvalue||void 0\x3d\x3d\x3dmax\x26\x26value\x3e\x3dvalue)\x26\x26(max\x3dvalue,\nmaxIndex\x3dindex);else for(let value of values)null!\x3d(value\x3dvalueof(value,++index,values))\x26\x26(max\x3cvalue||void 0\x3d\x3d\x3dmax\x26\x26value\x3e\x3dvalue)\x26\x26(max\x3dvalue,maxIndex\x3dindex);return maxIndex}function*flatten(arrays){for(const array of arrays)yield*array}function minIndex(values,valueof){let min,minIndex\x3d-1,index\x3d-1;if(void 0\x3d\x3d\x3dvalueof)for(const value of values)++index,null!\x3dvalue\x26\x26(min\x3evalue||void 0\x3d\x3d\x3dmin\x26\x26value\x3e\x3dvalue)\x26\x26(min\x3dvalue,minIndex\x3dindex);else for(let value of values)null!\x3d(value\x3dvalueof(value,++index,values))\x26\x26\n(min\x3evalue||void 0\x3d\x3d\x3dmin\x26\x26value\x3e\x3dvalue)\x26\x26(min\x3dvalue,minIndex\x3dindex);return minIndex}function pair(a,b){return[a,b]}function leastIndex(values,compare\x3dascending){if(1\x3d\x3d\x3dcompare.length)return minIndex(values,compare);let minValue,min\x3d-1,index\x3d-1;for(const value of values)if(++index,0\x3emin?0\x3d\x3d\x3dcompare(value,value):0\x3ecompare(value,minValue))minValue\x3dvalue,min\x3dindex;return min}function shuffler(random){return function(array,i0\x3d0,i1\x3darray.length){for(i1-\x3di0\x3d+i0;i1;){const i\x3drandom()*i1--|0,t\x3darray[i1+i0];\narray[i1+i0]\x3darray[i+i0];array[i+i0]\x3dt}return array}}function transpose$jscomp$0(matrix){if(!(n\x3dmatrix.length))return[];for(var i\x3d-1,m\x3dmin$jscomp$0(matrix,length$jscomp$0),transpose\x3dArray(m);++i\x3cm;)for(var j\x3d-1,n,row\x3dtranspose[i]\x3dArray(n);++j\x3cn;)row[j]\x3dmatrix[j][i];return transpose}function length$jscomp$0(d){return d.length}function set$jscomp$0(values){return values instanceof Set?values:new Set(values)}function superset(values,other){values\x3dvalues[Symbol.iterator]();const set\x3dnew Set;for(const o of other){if(set.has(o))continue;\nlet done;for(;{value:other,done}\x3dvalues.next();){if(done)return!1;set.add(other);if(Object.is(o,other))break}}return!0}var ascendingBisect\x3dbisector(ascending);const bisectRight\x3dascendingBisect.right;ascendingBisect\x3dascendingBisect.left;const bisectCenter\x3dbisector(number).center;class Adder{constructor(){this._partials\x3dnew Float64Array(32);this._n\x3d0}add(x){const p\x3dthis._partials;let i\x3d0;for(let j\x3d0;j\x3cthis._n\x26\x2632\x3ej;j++){const y\x3dp[j],hi\x3dx+y;(x\x3dMath.abs(x)\x3cMath.abs(y)?x-(hi-y):y-(hi-x))\x26\x26(p[i++]\x3dx);x\x3d\nhi}p[i]\x3dx;this._n\x3di+1;return this}valueOf(){const p\x3dthis._partials;let n\x3dthis._n;let y,hi\x3d0;if(0\x3cn){for(hi\x3dp[--n];0\x3cn;){var x\x3dhi;y\x3dp[--n];hi\x3dx+y;if(x\x3dy-(hi-x))break}0\x3cn\x26\x26(0\x3ex\x26\x260\x3ep[n-1]||0\x3cx\x26\x260\x3cp[n-1])\x26\x26(y\x3d2*x,x\x3dhi+y,y\x3d\x3dx-hi\x26\x26(hi\x3dx))}return hi}}class InternMap extends Map{constructor(entries,key$jscomp$0\x3dkeyof){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key$jscomp$0}});if(null!\x3dentries)for(const [key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,\nkey))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}class InternSet extends Set{constructor(values,key\x3dkeyof){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}});if(null!\x3dvalues)for(const value of values)this.add(value)}has(value){return super.has(intern_get(this,value))}add(value){return super.add(intern_set(this,value))}delete(value){return super.delete(intern_delete(this,\nvalue))}}var slice\x3dArray.prototype.slice,e10\x3dMath.sqrt(50),e5\x3dMath.sqrt(10),e2\x3dMath.sqrt(2),shuffle\x3dshuffler(Math.random);exports.Adder\x3dAdder;exports.InternMap\x3dInternMap;exports.InternSet\x3dInternSet;exports.ascending\x3dascending;exports.bin\x3dbin;exports.bisect\x3dbisectRight;exports.bisectCenter\x3dbisectCenter;exports.bisectLeft\x3dascendingBisect;exports.bisectRight\x3dbisectRight;exports.bisector\x3dbisector;exports.count\x3dcount$jscomp$0;exports.cross\x3dfunction(...values){const reduce\x3d\x22function\x22\x3d\x3d\x3dtypeof values[values.length-\n1]\x26\x26reducer$jscomp$0(values.pop());values\x3dvalues.map(arrayify);const lengths\x3dvalues.map(length$1),j$jscomp$0\x3dvalues.length-1,index\x3dArray(j$jscomp$0+1).fill(0),product\x3d[];if(0\x3ej$jscomp$0||lengths.some(empty))return product;for(;;){product.push(index.map((j,i)\x3d\x3evalues[i][j]));let i$jscomp$0\x3dj$jscomp$0;for(;++index[i$jscomp$0]\x3d\x3d\x3dlengths[i$jscomp$0];){if(0\x3d\x3d\x3di$jscomp$0)return reduce?product.map(reduce):product;index[i$jscomp$0--]\x3d0}}};exports.cumsum\x3dfunction(values,valueof){var sum\x3d0,index\x3d0;return Float64Array.from(values,\nvoid 0\x3d\x3d\x3dvalueof?v\x3d\x3esum+\x3d+v||0:v\x3d\x3esum+\x3d+valueof(v,index++,values)||0)};exports.descending\x3dfunction(a,b){return b\x3ca?-1:b\x3ea?1:b\x3e\x3da?0:NaN};exports.deviation\x3ddeviation;exports.difference\x3dfunction(values,...others){values\x3dnew Set(values);for(const other of others)for(const value of other)values.delete(value);return values};exports.disjoint\x3dfunction(values,other){other\x3dother[Symbol.iterator]();const set\x3dnew Set;for(const v of values){if(set.has(v))return!1;let done;for(;({value:values,done}\x3dother.next())\x26\x26\n!done;){if(Object.is(v,values))return!1;set.add(values)}}return!0};exports.every\x3dfunction(values,test){if(\x22function\x22!\x3d\x3dtypeof test)throw new TypeError(\x22test is not a function\x22);let index\x3d-1;for(const value of values)if(!test(value,++index,values))return!1;return!0};exports.extent\x3dextent;exports.fcumsum\x3dfunction(values,valueof){const adder\x3dnew Adder;let index\x3d-1;return Float64Array.from(values,void 0\x3d\x3d\x3dvalueof?v\x3d\x3eadder.add(+v||0):v\x3d\x3eadder.add(+valueof(v,++index,values)||0))};exports.filter\x3dfunction(values,\ntest){if(\x22function\x22!\x3d\x3dtypeof test)throw new TypeError(\x22test is not a function\x22);const array\x3d[];let index\x3d-1;for(const value of values)test(value,++index,values)\x26\x26array.push(value);return array};exports.fsum\x3dfunction(values,valueof){const adder\x3dnew Adder;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)(value$jscomp$0\x3d+value$jscomp$0)\x26\x26adder.add(value$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)(value\x3d+valueof(value,++value$jscomp$0,values))\x26\x26adder.add(value)}return+adder};exports.greatest\x3d\nfunction(values,compare\x3dascending){let max,defined\x3d!1;if(1\x3d\x3d\x3dcompare.length){let maxValue;for(const element of values)if(values\x3dcompare(element),defined?0\x3cascending(values,maxValue):0\x3d\x3d\x3dascending(values,values))max\x3delement,maxValue\x3dvalues,defined\x3d!0}else for(const value of values)if(defined?0\x3ccompare(value,max):0\x3d\x3d\x3dcompare(value,value))max\x3dvalue,defined\x3d!0;return max};exports.greatestIndex\x3dfunction(values,compare\x3dascending){if(1\x3d\x3d\x3dcompare.length)return maxIndex$jscomp$0(values,compare);let maxValue,\nmax\x3d-1,index\x3d-1;for(const value of values)if(++index,0\x3emax?0\x3d\x3d\x3dcompare(value,value):0\x3ccompare(value,maxValue))maxValue\x3dvalue,max\x3dindex;return max};exports.group\x3dgroup$jscomp$0;exports.groupSort\x3dfunction(values,reduce,key$jscomp$0){return(1\x3d\x3d\x3dreduce.length?sort(rollup(values,reduce,key$jscomp$0),([ak,av],[bk,bv])\x3d\x3eascending(av,bv)||ascending(ak,bk)):sort(group$jscomp$0(values,key$jscomp$0),([ak,av],[bk,bv])\x3d\x3ereduce(av,bv)||ascending(ak,bk))).map(([key])\x3d\x3ekey)};exports.groups\x3dfunction(values,...keys){return nest(values,\nArray.from,identity,keys)};exports.histogram\x3dbin;exports.index\x3dfunction(values,...keys){return nest(values,identity,unique,keys)};exports.indexes\x3dfunction(values,...keys){return nest(values,Array.from,unique,keys)};exports.intersection\x3dfunction(values,...others){values\x3dnew Set(values);others\x3dothers.map(set$jscomp$0);a:for(const value of values)for(const other of others)if(!other.has(value)){values.delete(value);continue a}return values};exports.least\x3dfunction(values,compare\x3dascending){let min,defined\x3d\n!1;if(1\x3d\x3d\x3dcompare.length){let minValue;for(const element of values)if(values\x3dcompare(element),defined?0\x3eascending(values,minValue):0\x3d\x3d\x3dascending(values,values))min\x3delement,minValue\x3dvalues,defined\x3d!0}else for(const value of values)if(defined?0\x3ecompare(value,min):0\x3d\x3d\x3dcompare(value,value))min\x3dvalue,defined\x3d!0;return min};exports.leastIndex\x3dleastIndex;exports.map\x3dfunction(values,mapper){if(\x22function\x22!\x3d\x3dtypeof values[Symbol.iterator])throw new TypeError(\x22values is not iterable\x22);if(\x22function\x22!\x3d\x3dtypeof mapper)throw new TypeError(\x22mapper is not a function\x22);\nreturn Array.from(values,(value,index)\x3d\x3emapper(value,index,values))};exports.max\x3dmax$jscomp$0;exports.maxIndex\x3dmaxIndex$jscomp$0;exports.mean\x3dfunction(values,valueof){let count\x3d0,sum\x3d0;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26(value$jscomp$0\x3d+value$jscomp$0)\x3e\x3dvalue$jscomp$0\x26\x26(++count,sum+\x3dvalue$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)null!\x3d(value\x3dvalueof(value,++value$jscomp$0,values))\x26\x26(value\x3d+value)\x3e\x3dvalue\x26\x26(++count,sum+\x3dvalue)}if(count)return sum/\ncount};exports.median\x3dfunction(values,valueof){return quantile(values,.5,valueof)};exports.merge\x3dfunction(arrays){return Array.from(flatten(arrays))};exports.min\x3dmin$jscomp$0;exports.minIndex\x3dminIndex;exports.nice\x3dnice;exports.pairs\x3dfunction(values,pairof\x3dpair){const pairs\x3d[];let previous,first\x3d!1;for(const value of values)first\x26\x26pairs.push(pairof(previous,value)),previous\x3dvalue,first\x3d!0;return pairs};exports.permute\x3dpermute;exports.quantile\x3dquantile;exports.quantileSorted\x3dfunction(values,p,valueof\x3d\nnumber){if(n\x3dvalues.length){if(0\x3e\x3d(p\x3d+p)||2\x3en)return+valueof(values[0],0,values);if(1\x3c\x3dp)return+valueof(values[n-1],n-1,values);var n;p*\x3dn-1;n\x3dMath.floor(p);var value0\x3d+valueof(values[n],n,values);values\x3d+valueof(values[n+1],n+1,values);return value0+(values-value0)*(p-n)}};exports.quickselect\x3dquickselect;exports.range\x3dfunction(start,stop,step){start\x3d+start;stop\x3d+stop;step\x3d2\x3e(n\x3darguments.length)?(stop\x3dstart,start\x3d0,1):3\x3en?1:+step;for(var i\x3d-1,n\x3dMath.max(0,Math.ceil((stop-start)/step))|0,range\x3dArray(n);++i\x3c\nn;)range[i]\x3dstart+i*step;return range};exports.reduce\x3dfunction(values,reducer,value){if(\x22function\x22!\x3d\x3dtypeof reducer)throw new TypeError(\x22reducer is not a function\x22);const iterator\x3dvalues[Symbol.iterator]();let done,next,index\x3d-1;if(3\x3earguments.length){({done,value}\x3diterator.next());if(done)return;++index}for(;{done,value:next}\x3diterator.next(),!done;)value\x3dreducer(value,next,++index,values);return value};exports.reverse\x3dfunction(values){if(\x22function\x22!\x3d\x3dtypeof values[Symbol.iterator])throw new TypeError(\x22values is not iterable\x22);\nreturn Array.from(values).reverse()};exports.rollup\x3drollup;exports.rollups\x3dfunction(values,reduce,...keys){return nest(values,Array.from,reduce,keys)};exports.scan\x3dfunction(values,compare){values\x3dleastIndex(values,compare);return 0\x3evalues?void 0:values};exports.shuffle\x3dshuffle;exports.shuffler\x3dshuffler;exports.some\x3dfunction(values,test){if(\x22function\x22!\x3d\x3dtypeof test)throw new TypeError(\x22test is not a function\x22);let index\x3d-1;for(const value of values)if(test(value,++index,values))return!0;return!1};\nexports.sort\x3dsort;exports.subset\x3dfunction(values,other){return superset(other,values)};exports.sum\x3dfunction(values,valueof){let sum\x3d0;if(void 0\x3d\x3d\x3dvalueof)for(var value$jscomp$0 of values){if(value$jscomp$0\x3d+value$jscomp$0)sum+\x3dvalue$jscomp$0}else{value$jscomp$0\x3d-1;for(let value of values)if(value\x3d+valueof(value,++value$jscomp$0,values))sum+\x3dvalue}return sum};exports.superset\x3dsuperset;exports.thresholdFreedmanDiaconis\x3dfunction(values,min,max){return Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,\n.25))*Math.pow(count$jscomp$0(values),-1/3)))};exports.thresholdScott\x3dfunction(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(count$jscomp$0(values),-1/3)))};exports.thresholdSturges\x3dsturges;exports.tickIncrement\x3dtickIncrement;exports.tickStep\x3dfunction(start,stop,count){var step0\x3dMath.abs(stop-start)/Math.max(0,count);count\x3dMath.pow(10,Math.floor(Math.log(step0)/Math.LN10));step0/\x3dcount;step0\x3e\x3de10?count*\x3d10:step0\x3e\x3de5?count*\x3d5:step0\x3e\x3de2\x26\x26(count*\x3d2);return stop\x3cstart?-count:\ncount};exports.ticks\x3dticks;exports.transpose\x3dtranspose$jscomp$0;exports.union\x3dfunction(...others){const set\x3dnew Set;for(const other of others)for(const o of other)set.add(o);return set};exports.variance\x3dvariance;exports.zip\x3dfunction(){return transpose$jscomp$0(arguments)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_format$dist$d3_format.js", true , "shadow$provide.module$node_modules$d3_format$dist$d3_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function formatDecimalParts(x,p){if(0\x3e(p\x3d(x\x3dp?x.toExponential(p-1):x.toExponential()).indexOf(\x22e\x22)))return null;\nvar coefficient\x3dx.slice(0,p);return[1\x3ccoefficient.length?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(p+1)]}function exponent(x){return x\x3dformatDecimalParts(Math.abs(x)),x?x[1]:NaN}function formatGroup(grouping,thousands){return function(value,width){for(var i\x3dvalue.length,t\x3d[],j\x3d0,g\x3dgrouping[0],length\x3d0;0\x3ci\x26\x260\x3cg;){length+g+1\x3ewidth\x26\x26(g\x3dMath.max(1,width-length));t.push(value.substring(i-\x3dg,i+g));if((length+\x3dg+1)\x3ewidth)break;g\x3dgrouping[j\x3d(j+1)%grouping.length]}return t.reverse().join(thousands)}}\nfunction formatNumerals(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}function formatSpecifier(specifier){if(!(match\x3dre.exec(specifier)))throw Error(\x22invalid format: \x22+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]\x26\x26match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill\x3dvoid 0\x3d\x3d\x3dspecifier.fill?\n\x22 \x22:specifier.fill+\x22\x22;this.align\x3dvoid 0\x3d\x3d\x3dspecifier.align?\x22\\x3e\x22:specifier.align+\x22\x22;this.sign\x3dvoid 0\x3d\x3d\x3dspecifier.sign?\x22-\x22:specifier.sign+\x22\x22;this.symbol\x3dvoid 0\x3d\x3d\x3dspecifier.symbol?\x22\x22:specifier.symbol+\x22\x22;this.zero\x3d!!specifier.zero;this.width\x3dvoid 0\x3d\x3d\x3dspecifier.width?void 0:+specifier.width;this.comma\x3d!!specifier.comma;this.precision\x3dvoid 0\x3d\x3d\x3dspecifier.precision?void 0:+specifier.precision;this.trim\x3d!!specifier.trim;this.type\x3dvoid 0\x3d\x3d\x3dspecifier.type?\x22\x22:specifier.type+\x22\x22}function formatRounded(x,p){p\x3d\nformatDecimalParts(x,p);if(!p)return x+\x22\x22;x\x3dp[0];p\x3dp[1];return 0\x3ep?\x220.\x22+Array(-p).join(\x220\x22)+x:x.length\x3ep+1?x.slice(0,p+1)+\x22.\x22+x.slice(p+1):x+Array(p-x.length+2).join(\x220\x22)}function identity(x){return x}function formatLocale(locale){function newFormat(specifier){function format(value){var valuePrefix\x3dprefix,valueSuffix\x3dsuffix,n,c;if(\x22c\x22\x3d\x3d\x3dtype)valueSuffix\x3dformatType(value)+valueSuffix,value\x3d\x22\x22;else{value\x3d+value;var i\x3d0\x3evalue||0\x3e1/value;value\x3disNaN(value)?nan:formatType(Math.abs(value),precision);if(trim){var n$jscomp$0\x3d\nvalue.length,i$jscomp$0\x3d1,i0\x3d-1;a:for(;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)switch(value[i$jscomp$0]){case \x22.\x22:i0\x3dn\x3di$jscomp$0;break;case \x220\x22:0\x3d\x3d\x3di0\x26\x26(i0\x3di$jscomp$0);n\x3di$jscomp$0;break;default:if(!+value[i$jscomp$0])break a;0\x3ci0\x26\x26(i0\x3d0)}value\x3d0\x3ci0?value.slice(0,i0)+value.slice(n+1):value}i\x26\x260\x3d\x3d\x3d+value\x26\x26\x22+\x22!\x3d\x3dsign\x26\x26(i\x3d!1);valuePrefix\x3d(i?\x22(\x22\x3d\x3d\x3dsign?sign:minus:\x22-\x22\x3d\x3d\x3dsign||\x22(\x22\x3d\x3d\x3dsign?\x22\x22:sign)+valuePrefix;valueSuffix\x3d(\x22s\x22\x3d\x3d\x3dtype?prefixes[8+prefixExponent/3]:\x22\x22)+valueSuffix+(i\x26\x26\x22(\x22\x3d\x3d\x3dsign?\x22)\x22:\x22\x22);if(maybeSuffix)for(i\x3d\n-1,n\x3dvalue.length;++i\x3cn;)if(c\x3dvalue.charCodeAt(i),48\x3ec||57\x3cc){valueSuffix\x3d(46\x3d\x3d\x3dc?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value\x3dvalue.slice(0,i);break}}comma\x26\x26!zero\x26\x26(value\x3dgroup(value,Infinity));c\x3dvaluePrefix.length+value.length+valueSuffix.length;i\x3dc\x3cwidth?Array(width-c+1).join(fill):\x22\x22;comma\x26\x26zero\x26\x26(value\x3dgroup(i+value,i.length?width-valueSuffix.length:Infinity),i\x3d\x22\x22);switch(align){case \x22\\x3c\x22:value\x3dvaluePrefix+value+valueSuffix+i;break;case \x22\\x3d\x22:value\x3dvaluePrefix+i+value+valueSuffix;\nbreak;case \x22^\x22:value\x3di.slice(0,c\x3di.length\x3e\x3e1)+valuePrefix+value+valueSuffix+i.slice(c);break;default:value\x3di+valuePrefix+value+valueSuffix}return numerals(value)}specifier\x3dformatSpecifier(specifier);var fill\x3dspecifier.fill,align\x3dspecifier.align,sign\x3dspecifier.sign,symbol\x3dspecifier.symbol,zero\x3dspecifier.zero,width\x3dspecifier.width,comma\x3dspecifier.comma,precision\x3dspecifier.precision,trim\x3dspecifier.trim,type\x3dspecifier.type;\x22n\x22\x3d\x3d\x3dtype?(comma\x3d!0,type\x3d\x22g\x22):formatTypes[type]||(void 0\x3d\x3d\x3dprecision\x26\x26(precision\x3d\n12),trim\x3d!0,type\x3d\x22g\x22);if(zero||\x220\x22\x3d\x3d\x3dfill\x26\x26\x22\\x3d\x22\x3d\x3d\x3dalign)zero\x3d!0,fill\x3d\x220\x22,align\x3d\x22\\x3d\x22;var prefix\x3d\x22$\x22\x3d\x3d\x3dsymbol?currencyPrefix:\x22#\x22\x3d\x3d\x3dsymbol\x26\x26/[boxX]/.test(type)?\x220\x22+type.toLowerCase():\x22\x22,suffix\x3d\x22$\x22\x3d\x3d\x3dsymbol?currencySuffix:/[%p]/.test(type)?percent:\x22\x22,formatType\x3dformatTypes[type],maybeSuffix\x3d/[defgprs%]/.test(type);precision\x3dvoid 0\x3d\x3d\x3dprecision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision));format.toString\x3dfunction(){return specifier+\x22\x22};return format}var group\x3d\nvoid 0\x3d\x3d\x3dlocale.grouping||void 0\x3d\x3d\x3dlocale.thousands?identity:formatGroup(map.call(locale.grouping,Number),locale.thousands+\x22\x22),currencyPrefix\x3dvoid 0\x3d\x3d\x3dlocale.currency?\x22\x22:locale.currency[0]+\x22\x22,currencySuffix\x3dvoid 0\x3d\x3d\x3dlocale.currency?\x22\x22:locale.currency[1]+\x22\x22,decimal\x3dvoid 0\x3d\x3d\x3dlocale.decimal?\x22.\x22:locale.decimal+\x22\x22,numerals\x3dvoid 0\x3d\x3d\x3dlocale.numerals?identity:formatNumerals(map.call(locale.numerals,String)),percent\x3dvoid 0\x3d\x3d\x3dlocale.percent?\x22%\x22:locale.percent+\x22\x22,minus\x3dvoid 0\x3d\x3d\x3dlocale.minus?\x22\u2212\x22:locale.minus+\n\x22\x22,nan\x3dvoid 0\x3d\x3d\x3dlocale.nan?\x22NaN\x22:locale.nan+\x22\x22;return{format:newFormat,formatPrefix:function(specifier,value$jscomp$0){var f\x3dnewFormat((specifier\x3dformatSpecifier(specifier),specifier.type\x3d\x22f\x22,specifier));specifier\x3d3*Math.max(-8,Math.min(8,Math.floor(exponent(value$jscomp$0)/3)));var k\x3dMath.pow(10,-specifier),prefix\x3dprefixes[8+specifier/3];return function(value){return f(k*value)+prefix}}}}function defaultLocale(definition){locale\x3dformatLocale(definition);exports.format\x3dlocale.format;exports.formatPrefix\x3d\nlocale.formatPrefix;return locale}var re\x3d/^(?:(.)?([\x3c\x3e\x3d^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;formatSpecifier.prototype\x3dFormatSpecifier.prototype;FormatSpecifier.prototype.toString\x3dfunction(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\x220\x22:\x22\x22)+(void 0\x3d\x3d\x3dthis.width?\x22\x22:Math.max(1,this.width|0))+(this.comma?\x22,\x22:\x22\x22)+(void 0\x3d\x3d\x3dthis.precision?\x22\x22:\x22.\x22+Math.max(0,this.precision|0))+(this.trim?\x22~\x22:\x22\x22)+this.type};var prefixExponent,formatTypes\x3d{\x22%\x22:(x,p)\x3d\x3e(100*x).toFixed(p),\nb:x\x3d\x3eMath.round(x).toString(2),c:x\x3d\x3ex+\x22\x22,d:function(x){return 1E21\x3c\x3dMath.abs(x\x3dMath.round(x))?x.toLocaleString(\x22en\x22).replace(/,/g,\x22\x22):x.toString(10)},e:(x,p)\x3d\x3ex.toExponential(p),f:(x,p)\x3d\x3ex.toFixed(p),g:(x,p)\x3d\x3ex.toPrecision(p),o:x\x3d\x3eMath.round(x).toString(8),p:(x,p)\x3d\x3eformatRounded(100*x,p),r:formatRounded,s:function(x,p){var d\x3dformatDecimalParts(x,p);if(!d)return x+\x22\x22;var coefficient\x3dd[0];d\x3dd[1];d\x3dd-(prefixExponent\x3d3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1;var n\x3dcoefficient.length;return d\x3d\x3d\x3dn?\ncoefficient:d\x3en?coefficient+Array(d-n+1).join(\x220\x22):0\x3cd?coefficient.slice(0,d)+\x22.\x22+coefficient.slice(d):\x220.\x22+Array(1-d).join(\x220\x22)+formatDecimalParts(x,Math.max(0,p+d-1))[0]},X:x\x3d\x3eMath.round(x).toString(16).toUpperCase(),x:x\x3d\x3eMath.round(x).toString(16)},map\x3dArray.prototype.map,prefixes\x3d\x22y z a f p n \xb5 m  k M G T P E Z Y\x22.split(\x22 \x22),locale;defaultLocale({thousands:\x22,\x22,grouping:[3],currency:[\x22$\x22,\x22\x22]});exports.FormatSpecifier\x3dFormatSpecifier;exports.formatDefaultLocale\x3ddefaultLocale;exports.formatLocale\x3d\nformatLocale;exports.formatSpecifier\x3dformatSpecifier;exports.precisionFixed\x3dfunction(step){return Math.max(0,-exponent(Math.abs(step)))};exports.precisionPrefix\x3dfunction(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(value)/3)))-exponent(Math.abs(step)))};exports.precisionRound\x3dfunction(step,max){step\x3dMath.abs(step);max\x3dMath.abs(max)-step;return Math.max(0,exponent(max)-exponent(step))+1};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_time$dist$d3_time.js", true , "shadow$provide.module$node_modules$d3_time$dist$d3_time\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Array){function newInterval(floori,\noffseti,count,field){function interval(date){return floori(date\x3d0\x3d\x3d\x3darguments.length?new Date:new Date(+date)),date}interval.floor\x3dfunction(date){return floori(date\x3dnew Date(+date)),date};interval.ceil\x3dfunction(date){return floori(date\x3dnew Date(date-1)),offseti(date,1),floori(date),date};interval.round\x3dfunction(date){var d0\x3dinterval(date),d1\x3dinterval.ceil(date);return date-d0\x3cd1-date?d0:d1};interval.offset\x3dfunction(date,step){return offseti(date\x3dnew Date(+date),null\x3d\x3dstep?1:Math.floor(step)),date};\ninterval.range\x3dfunction(start,stop,step){var range\x3d[],previous;start\x3dinterval.ceil(start);step\x3dnull\x3d\x3dstep?1:Math.floor(step);if(!(start\x3cstop\x26\x260\x3cstep))return range;do range.push(previous\x3dnew Date(+start)),offseti(start,step),floori(start);while(previous\x3cstart\x26\x26start\x3cstop);return range};interval.filter\x3dfunction(test){return newInterval(function(date){if(date\x3e\x3ddate)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date\x3e\x3ddate)if(0\x3estep)for(;0\x3e\x3d++step;)for(;offseti(date,-1),!test(date););\nelse for(;0\x3c\x3d--step;)for(;offseti(date,1),!test(date););})};count\x26\x26(interval.count\x3dfunction(start,end){t0.setTime(+start);t1.setTime(+end);floori(t0);floori(t1);return Math.floor(count(t0,t1))},interval.every\x3dfunction(step){step\x3dMath.floor(step);return isFinite(step)\x26\x260\x3cstep?1\x3cstep?interval.filter(field?function(d){return 0\x3d\x3d\x3dfield(d)%step}:function(d){return 0\x3d\x3d\x3dinterval.count(0,d)%step}):interval:null});return interval}function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-\n(date.getDay()+7-i)%7);date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){return(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/durationWeek})}function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/durationWeek})}function ticker(year,month,week,\nday,hour,minute){function tickInterval(start,stop,count){const target\x3dMath.abs(stop-start)/count,i\x3dd3Array.bisector(([,,step])\x3d\x3estep).right(tickIntervals,target);if(i\x3d\x3d\x3dtickIntervals.length)return year.every(d3Array.tickStep(start/durationYear,stop/durationYear,count));if(0\x3d\x3d\x3di)return millisecond.every(Math.max(d3Array.tickStep(start,stop,count),1));const [t,step$jscomp$0]\x3dtickIntervals[target/tickIntervals[i-1][2]\x3ctickIntervals[i][2]/target?i-1:i];return t.every(step$jscomp$0)}const tickIntervals\x3d\n[[second,1,1E3],[second,5,5E3],[second,15,15E3],[second,30,3E4],[minute,1,6E4],[minute,5,3E5],[minute,15,9E5],[minute,30,18E5],[hour,1,36E5],[hour,3,108E5],[hour,6,216E5],[hour,12,432E5],[day,1,864E5],[day,2,1728E5],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];return[function(start,stop,count){const reverse\x3dstop\x3cstart;reverse\x26\x26([start,stop]\x3d[stop,start]);start\x3d(count\x3dcount\x26\x26\x22function\x22\x3d\x3d\x3dtypeof count.range?count:tickInterval(start,stop,count))?count.range(start,\n+stop+1):[];return reverse?start.reverse():start},tickInterval]}var t0\x3dnew Date,t1\x3dnew Date,millisecond\x3dnewInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond.every\x3dfunction(k){k\x3dMath.floor(k);return isFinite(k)\x26\x260\x3ck?1\x3ck?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond:null};var milliseconds\x3dmillisecond.range;const durationWeek\x3d\n6048E5,durationMonth\x3d2592E6,durationYear\x3d31536E6;var second\x3dnewInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1E3*step)},function(start,end){return(end-start)/1E3},function(date){return date.getUTCSeconds()}),seconds\x3dsecond.range,minute\x3dnewInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds())},function(date,step){date.setTime(+date+6E4*step)},function(start,end){return(end-start)/6E4},function(date){return date.getMinutes()}),\nminutes\x3dminute.range,hour\x3dnewInterval(function(date){date.setTime(date-date.getMilliseconds()-1E3*date.getSeconds()-6E4*date.getMinutes())},function(date,step){date.setTime(+date+36E5*step)},function(start,end){return(end-start)/36E5},function(date){return date.getHours()}),hours\x3dhour.range,day$jscomp$0\x3dnewInterval(date\x3d\x3edate.setHours(0,0,0,0),(date,step)\x3d\x3edate.setDate(date.getDate()+step),(start,end)\x3d\x3e(end-start-6E4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864E5,date\x3d\x3edate.getDate()-\n1),days\x3dday$jscomp$0.range,sunday\x3dweekday(0),monday\x3dweekday(1),tuesday\x3dweekday(2),wednesday\x3dweekday(3),thursday\x3dweekday(4),friday\x3dweekday(5),saturday\x3dweekday(6),sundays\x3dsunday.range,mondays\x3dmonday.range,tuesdays\x3dtuesday.range,wednesdays\x3dwednesday.range,thursdays\x3dthursday.range,fridays\x3dfriday.range,saturdays\x3dsaturday.range,month$jscomp$0\x3dnewInterval(function(date){date.setDate(1);date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-\nstart.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()}),months\x3dmonth$jscomp$0.range,year$jscomp$0\x3dnewInterval(function(date){date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()});year$jscomp$0.every\x3dfunction(k){return isFinite(k\x3dMath.floor(k))\x26\x260\x3ck?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/\nk)*k);date.setMonth(0,1);date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var years\x3dyear$jscomp$0.range,utcMinute\x3dnewInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+6E4*step)},function(start,end){return(end-start)/6E4},function(date){return date.getUTCMinutes()}),utcMinutes\x3dutcMinute.range,utcHour\x3dnewInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36E5*step)},function(start,\nend){return(end-start)/36E5},function(date){return date.getUTCHours()}),utcHours\x3dutcHour.range,utcDay\x3dnewInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864E5},function(date){return date.getUTCDate()-1}),utcDays\x3dutcDay.range,utcSunday\x3dutcWeekday(0),utcMonday\x3dutcWeekday(1),utcTuesday\x3dutcWeekday(2),utcWednesday\x3dutcWeekday(3),utcThursday\x3dutcWeekday(4),utcFriday\x3dutcWeekday(5),utcSaturday\x3dutcWeekday(6),\nutcSundays\x3dutcSunday.range,utcMondays\x3dutcMonday.range,utcTuesdays\x3dutcTuesday.range,utcWednesdays\x3dutcWednesday.range,utcThursdays\x3dutcThursday.range,utcFridays\x3dutcFriday.range,utcSaturdays\x3dutcSaturday.range,utcMonth\x3dnewInterval(function(date){date.setUTCDate(1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()}),\nutcMonths\x3dutcMonth.range,utcYear\x3dnewInterval(function(date){date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()});utcYear.every\x3dfunction(k){return isFinite(k\x3dMath.floor(k))\x26\x260\x3ck?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k);date.setUTCMonth(0,1);date.setUTCHours(0,0,0,0)},function(date,\nstep){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var utcYears\x3dutcYear.range;const [utcTicks,utcTickInterval]\x3dticker(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute),[timeTicks,timeTickInterval]\x3dticker(year$jscomp$0,month$jscomp$0,sunday,day$jscomp$0,hour,minute);exports.timeDay\x3dday$jscomp$0;exports.timeDays\x3ddays;exports.timeFriday\x3dfriday;exports.timeFridays\x3dfridays;exports.timeHour\x3dhour;exports.timeHours\x3dhours;exports.timeInterval\x3dnewInterval;exports.timeMillisecond\x3dmillisecond;\nexports.timeMilliseconds\x3dmilliseconds;exports.timeMinute\x3dminute;exports.timeMinutes\x3dminutes;exports.timeMonday\x3dmonday;exports.timeMondays\x3dmondays;exports.timeMonth\x3dmonth$jscomp$0;exports.timeMonths\x3dmonths;exports.timeSaturday\x3dsaturday;exports.timeSaturdays\x3dsaturdays;exports.timeSecond\x3dsecond;exports.timeSeconds\x3dseconds;exports.timeSunday\x3dsunday;exports.timeSundays\x3dsundays;exports.timeThursday\x3dthursday;exports.timeThursdays\x3dthursdays;exports.timeTickInterval\x3dtimeTickInterval;exports.timeTicks\x3dtimeTicks;\nexports.timeTuesday\x3dtuesday;exports.timeTuesdays\x3dtuesdays;exports.timeWednesday\x3dwednesday;exports.timeWednesdays\x3dwednesdays;exports.timeWeek\x3dsunday;exports.timeWeeks\x3dsundays;exports.timeYear\x3dyear$jscomp$0;exports.timeYears\x3dyears;exports.utcDay\x3dutcDay;exports.utcDays\x3dutcDays;exports.utcFriday\x3dutcFriday;exports.utcFridays\x3dutcFridays;exports.utcHour\x3dutcHour;exports.utcHours\x3dutcHours;exports.utcMillisecond\x3dmillisecond;exports.utcMilliseconds\x3dmilliseconds;exports.utcMinute\x3dutcMinute;exports.utcMinutes\x3d\nutcMinutes;exports.utcMonday\x3dutcMonday;exports.utcMondays\x3dutcMondays;exports.utcMonth\x3dutcMonth;exports.utcMonths\x3dutcMonths;exports.utcSaturday\x3dutcSaturday;exports.utcSaturdays\x3dutcSaturdays;exports.utcSecond\x3dsecond;exports.utcSeconds\x3dseconds;exports.utcSunday\x3dutcSunday;exports.utcSundays\x3dutcSundays;exports.utcThursday\x3dutcThursday;exports.utcThursdays\x3dutcThursdays;exports.utcTickInterval\x3dutcTickInterval;exports.utcTicks\x3dutcTicks;exports.utcTuesday\x3dutcTuesday;exports.utcTuesdays\x3dutcTuesdays;exports.utcWednesday\x3d\nutcWednesday;exports.utcWednesdays\x3dutcWednesdays;exports.utcWeek\x3dutcSunday;exports.utcWeeks\x3dutcSundays;exports.utcYear\x3dutcYear;exports.utcYears\x3dutcYears;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_time$build$vega_time.js", true , "shadow$provide.module$node_modules$vega_time$build$vega_time\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_time$dist$d3_time\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22d3-time\x22,\x22d3-array\x22],factory):(global\x3d\n\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3))})(this,function(exports,vegaUtil,d3Time,d3Array){function timeUnits(units){const u\x3dvegaUtil.array(units).slice(),m\x3d{};u.length||vegaUtil.error(\x22Missing time unit.\x22);u.forEach(unit\x3d\x3e{vegaUtil.hasOwnProperty(UNITS,unit)?m[unit]\x3d1:vegaUtil.error(`Invalid time unit: ${unit}.`)});1\x3c(m.week||m.day?1:0)+(m.quarter||m.month||m.date?1:0)+(m.dayofyear?1:0)\x26\x26vegaUtil.error(`Incompatible time units: ${units}`);\nu.sort((a,b)\x3d\x3eUNITS[a]-UNITS[b]);return u}function localYear(y){t0.setFullYear(y);t0.setMonth(0);t0.setDate(1);t0.setHours(0,0,0,0);return t0}function localDayOfYear(d){return d3Time.timeDay.count(localYear(d.getFullYear())-1,d)}function localWeekNum(d){return d3Time.timeWeek.count(localYear(d.getFullYear())-1,d)}function localDate(y,m,d,H,M,S,L){return 0\x3c\x3dy\x26\x26100\x3ey?(m\x3dnew Date(-1,m,d,H,M,S,L),m.setFullYear(y),m):new Date(y,m,d,H,M,S,L)}function utcDayOfYear(d){const y\x3dDate.UTC(d.getUTCFullYear(),\n0,1);return d3Time.utcDay.count(y-1,d)}function utcWeekNum(d){const y\x3dDate.UTC(d.getUTCFullYear(),0,1);return d3Time.utcWeek.count(y-1,d)}function utcFirst(y){t0.setTime(Date.UTC(y,0,1));return t0.getUTCDay()}function utcDate(y,m,d,H,M,S,L){return 0\x3c\x3dy\x26\x26100\x3ey?(y\x3dnew Date(Date.UTC(-1,m,d,H,M,S,L)),y.setUTCFullYear(d.y),y):new Date(Date.UTC(y,m,d,H,M,S,L))}function floor(units,step,get,inv,newDate){const s\x3dstep||1,b\x3dvegaUtil.peek(units);step\x3d(unit,p,key)\x3d\x3e{key\x3dkey||unit;return getUnit(get[key],inv[key],\nunit\x3d\x3d\x3db\x26\x26s,p)};const t\x3dnew Date;units\x3dvegaUtil.toSet(units);const y\x3dunits.year?step(\x22year\x22):vegaUtil.constant(2012),m\x3dunits.month?step(\x22month\x22):units.quarter?step(\x22quarter\x22):vegaUtil.zero,d\x3dunits.week\x26\x26units.day?step(\x22day\x22,1,\x22weekday\x22):units.week?step(\x22week\x22,1):units.day?step(\x22day\x22,1):units.date?step(\x22date\x22,1):units.dayofyear?step(\x22dayofyear\x22,1):vegaUtil.one,H\x3dunits.hours?step(\x22hours\x22):vegaUtil.zero,M\x3dunits.minutes?step(\x22minutes\x22):vegaUtil.zero,S\x3dunits.seconds?step(\x22seconds\x22):vegaUtil.zero,L\x3dunits.milliseconds?\nstep(\x22milliseconds\x22):vegaUtil.zero;return function(v){t.setTime(+v);v\x3dy(t);return newDate(v,m(t),d(t,v),H(t),M(t),S(t),L(t))}}function getUnit(f,inv,step,phase){const u\x3d1\x3e\x3dstep?f:phase?(d,y)\x3d\x3ephase+step*Math.floor((f(d,y)-phase)/step):(d,y)\x3d\x3estep*Math.floor(f(d,y)/step);return inv?(d,y)\x3d\x3einv(u(d,y),y):u}function weekday(week,day,firstDay){return day+7*week-(firstDay+6)%7}const TIME_UNITS\x3d\x22year quarter month week date day dayofyear hours minutes seconds milliseconds\x22.split(\x22 \x22),UNITS\x3dTIME_UNITS.reduce((o,\nu,i)\x3d\x3e(o[u]\x3d1+i,o),{}),defaultSpecifiers\x3d{[\x22year\x22]:\x22%Y \x22,[\x22quarter\x22]:\x22Q%q \x22,[\x22month\x22]:\x22%b \x22,[\x22date\x22]:\x22%d \x22,[\x22week\x22]:\x22W%U \x22,[\x22day\x22]:\x22%a \x22,[\x22dayofyear\x22]:\x22%j \x22,[\x22hours\x22]:\x22%H:00\x22,[\x22minutes\x22]:\x2200:%M\x22,[\x22seconds\x22]:\x22:%S\x22,[\x22milliseconds\x22]:\x22.%L\x22,[\x22year-month\x22]:\x22%Y-%m \x22,[\x22year-month-date\x22]:\x22%Y-%m-%d \x22,[\x22hours-minutes\x22]:\x22%H:%M\x22},t0\x3dnew Date,localGet\x3d{[\x22year\x22]:d\x3d\x3ed.getFullYear(),[\x22quarter\x22]:d\x3d\x3eMath.floor(d.getMonth()/3),[\x22month\x22]:d\x3d\x3ed.getMonth(),[\x22date\x22]:d\x3d\x3ed.getDate(),[\x22hours\x22]:d\x3d\x3ed.getHours(),[\x22minutes\x22]:d\x3d\x3e\nd.getMinutes(),[\x22seconds\x22]:d\x3d\x3ed.getSeconds(),[\x22milliseconds\x22]:d\x3d\x3ed.getMilliseconds(),[\x22dayofyear\x22]:d\x3d\x3elocalDayOfYear(d),[\x22week\x22]:d\x3d\x3elocalWeekNum(d),[\x22weekday\x22]:(d,y)\x3d\x3eweekday(localWeekNum(d),d.getDay(),localYear(y).getDay()),[\x22day\x22]:(d,y)\x3d\x3eweekday(1,d.getDay(),localYear(y).getDay())},localInv\x3d{[\x22quarter\x22]:q\x3d\x3e3*q,[\x22week\x22]:(w,y)\x3d\x3eweekday(w,0,localYear(y).getDay())},utcGet\x3d{[\x22year\x22]:d\x3d\x3ed.getUTCFullYear(),[\x22quarter\x22]:d\x3d\x3eMath.floor(d.getUTCMonth()/3),[\x22month\x22]:d\x3d\x3ed.getUTCMonth(),[\x22date\x22]:d\x3d\x3ed.getUTCDate(),\n[\x22hours\x22]:d\x3d\x3ed.getUTCHours(),[\x22minutes\x22]:d\x3d\x3ed.getUTCMinutes(),[\x22seconds\x22]:d\x3d\x3ed.getUTCSeconds(),[\x22milliseconds\x22]:d\x3d\x3ed.getUTCMilliseconds(),[\x22dayofyear\x22]:d\x3d\x3eutcDayOfYear(d),[\x22week\x22]:d\x3d\x3eutcWeekNum(d),[\x22day\x22]:(d,y)\x3d\x3eweekday(1,d.getUTCDay(),utcFirst(y)),[\x22weekday\x22]:(d,y)\x3d\x3eweekday(utcWeekNum(d),d.getUTCDay(),utcFirst(y))},utcInv\x3d{[\x22quarter\x22]:q\x3d\x3e3*q,[\x22week\x22]:(w,y)\x3d\x3eweekday(w,0,utcFirst(y))},timeIntervals\x3d{[\x22year\x22]:d3Time.timeYear,[\x22quarter\x22]:d3Time.timeMonth.every(3),[\x22month\x22]:d3Time.timeMonth,[\x22week\x22]:d3Time.timeWeek,\n[\x22date\x22]:d3Time.timeDay,[\x22day\x22]:d3Time.timeDay,[\x22dayofyear\x22]:d3Time.timeDay,[\x22hours\x22]:d3Time.timeHour,[\x22minutes\x22]:d3Time.timeMinute,[\x22seconds\x22]:d3Time.timeSecond,[\x22milliseconds\x22]:d3Time.timeMillisecond},utcIntervals\x3d{[\x22year\x22]:d3Time.utcYear,[\x22quarter\x22]:d3Time.utcMonth.every(3),[\x22month\x22]:d3Time.utcMonth,[\x22week\x22]:d3Time.utcWeek,[\x22date\x22]:d3Time.utcDay,[\x22day\x22]:d3Time.utcDay,[\x22dayofyear\x22]:d3Time.utcDay,[\x22hours\x22]:d3Time.utcHour,[\x22minutes\x22]:d3Time.utcMinute,[\x22seconds\x22]:d3Time.utcSecond,[\x22milliseconds\x22]:d3Time.utcMillisecond},\ndurationWeek\x3d6048E5,durationMonth\x3d2592E6,durationYear\x3d31536E6,Milli\x3d\x22year month date hours minutes seconds milliseconds\x22.split(\x22 \x22),Seconds\x3dMilli.slice(0,-1),Minutes\x3dSeconds.slice(0,-1),Hours\x3dMinutes.slice(0,-1),Day\x3dHours.slice(0,-1),Month\x3d[\x22year\x22,\x22month\x22],Year\x3d[\x22year\x22],intervals\x3d[[Seconds,1,1E3],[Seconds,5,5E3],[Seconds,15,15E3],[Seconds,30,3E4],[Minutes,1,6E4],[Minutes,5,3E5],[Minutes,15,9E5],[Minutes,30,18E5],[Hours,1,36E5],[Hours,3,108E5],[Hours,6,216E5],[Hours,12,432E5],[Day,1,864E5],[[\x22year\x22,\n\x22week\x22],1,durationWeek],[Month,1,durationMonth],[Month,3,3*durationMonth],[Year,1,durationYear]];exports.DATE\x3d\x22date\x22;exports.DAY\x3d\x22day\x22;exports.DAYOFYEAR\x3d\x22dayofyear\x22;exports.HOURS\x3d\x22hours\x22;exports.MILLISECONDS\x3d\x22milliseconds\x22;exports.MINUTES\x3d\x22minutes\x22;exports.MONTH\x3d\x22month\x22;exports.QUARTER\x3d\x22quarter\x22;exports.SECONDS\x3d\x22seconds\x22;exports.TIME_UNITS\x3dTIME_UNITS;exports.WEEK\x3d\x22week\x22;exports.YEAR\x3d\x22year\x22;exports.dayofyear\x3dfunction(d){return localDayOfYear(new Date(d))};exports.timeBin\x3dfunction(opt){var ext\x3dopt.extent;\nopt\x3dopt.maxbins||40;var target\x3dMath.abs(vegaUtil.span(ext))/opt;let i$jscomp$0\x3dd3Array.bisector(i\x3d\x3ei[2]).right(intervals,target);i$jscomp$0\x3d\x3d\x3dintervals.length?(target\x3dYear,ext\x3dd3Array.tickStep(ext[0]/durationYear,ext[1]/durationYear,opt)):i$jscomp$0?(i$jscomp$0\x3dintervals[target/intervals[i$jscomp$0-1][2]\x3cintervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],target\x3di$jscomp$0[0],ext\x3di$jscomp$0[1]):(target\x3dMilli,ext\x3dMath.max(d3Array.tickStep(ext[0],ext[1],opt),1));return{units:target,step:ext}};\nexports.timeFloor\x3dfunction(units,step){return floor(units,step||1,localGet,localInv,localDate)};exports.timeInterval\x3dfunction(unit){return timeIntervals[unit]};exports.timeOffset\x3dfunction(unit,date,step){return(unit\x3dtimeIntervals[unit])?unit.offset(date,step):void 0};exports.timeSequence\x3dfunction(unit,start,stop,step){return(unit\x3dtimeIntervals[unit])?unit.range(start,stop,step):void 0};exports.timeUnitSpecifier\x3dfunction(units,specifiers){specifiers\x3dvegaUtil.extend({},defaultSpecifiers,specifiers);\nunits\x3dtimeUnits(units);const n\x3dunits.length;let fmt\x3d\x22\x22,start,end,key;for(start\x3d0;start\x3cn;)for(end\x3dunits.length;end\x3estart;--end)if(key\x3dunits.slice(start,end).join(\x22-\x22),null!\x3dspecifiers[key]){fmt+\x3dspecifiers[key];start\x3dend;break}return fmt.trim()};exports.timeUnits\x3dtimeUnits;exports.utcFloor\x3dfunction(units,step){return floor(units,step||1,utcGet,utcInv,utcDate)};exports.utcInterval\x3dfunction(unit){return utcIntervals[unit]};exports.utcOffset\x3dfunction(unit,date,step){return(unit\x3dutcIntervals[unit])?unit.offset(date,\nstep):void 0};exports.utcSequence\x3dfunction(unit,start,stop,step){return(unit\x3dutcIntervals[unit])?unit.range(start,stop,step):void 0};exports.utcdayofyear\x3dfunction(d){return utcDayOfYear(new Date(d))};exports.utcweek\x3dfunction(d){return utcWeekNum(new Date(d))};exports.week\x3dfunction(d){return localWeekNum(new Date(d))};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_time_format$dist$d3_time_format.js", true , "shadow$provide.module$node_modules$d3_time_format$dist$d3_time_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_time$dist$d3_time\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-time\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Time){function localDate(d){if(0\x3c\x3dd.y\x26\x26\n100\x3ed.y){var date\x3dnew Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);date.setFullYear(d.y);return date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0\x3c\x3dd.y\x26\x26100\x3ed.y){var date\x3dnew Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));date.setUTCFullYear(d.y);return date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y,m,d,H:0,M:0,S:0,L:0}}function formatLocale(locale){function newFormat(specifier,formats){return function(date){var string\x3d[],i\x3d-1,j\x3d0,n\x3dspecifier.length,\nc,format;for(date instanceof Date||(date\x3dnew Date(+date));++i\x3cn;)if(37\x3d\x3d\x3dspecifier.charCodeAt(i)){string.push(specifier.slice(j,i));null!\x3d(j\x3dpads[c\x3dspecifier.charAt(++i)])?c\x3dspecifier.charAt(++i):j\x3d\x22e\x22\x3d\x3d\x3dc?\x22 \x22:\x220\x22;if(format\x3dformats[c])c\x3dformat(date,j);string.push(c);j\x3di+1}string.push(specifier.slice(j,i));return string.join(\x22\x22)}}function newParse(specifier,Z){return function(string){var d\x3dnewDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+\x3d\x22\x22,0)!\x3dstring.length)return null;if(\x22Q\x22in d)return new Date(d.Q);\nif(\x22s\x22in d)return new Date(1E3*d.s+(\x22L\x22in d?d.L:0));!Z||\x22Z\x22in d||(d.Z\x3d0);\x22p\x22in d\x26\x26(d.H\x3dd.H%12+12*d.p);void 0\x3d\x3d\x3dd.m\x26\x26(d.m\x3d\x22q\x22in d?d.q:0);if(\x22V\x22in d){if(1\x3ed.V||53\x3cd.V)return null;\x22w\x22in d||(d.w\x3d1);if(\x22Z\x22in d){string\x3dutcDate(newDate(d.y,0,1));var day\x3dstring.getUTCDay();string\x3d4\x3cday||0\x3d\x3d\x3dday?d3Time.utcMonday.ceil(string):d3Time.utcMonday(string);string\x3dd3Time.utcDay.offset(string,7*(d.V-1));d.y\x3dstring.getUTCFullYear();d.m\x3dstring.getUTCMonth();d.d\x3dstring.getUTCDate()+(d.w+6)%7}else string\x3dlocalDate(newDate(d.y,\n0,1)),day\x3dstring.getDay(),string\x3d4\x3cday||0\x3d\x3d\x3dday?d3Time.timeMonday.ceil(string):d3Time.timeMonday(string),string\x3dd3Time.timeDay.offset(string,7*(d.V-1)),d.y\x3dstring.getFullYear(),d.m\x3dstring.getMonth(),d.d\x3dstring.getDate()+(d.w+6)%7}else if(\x22W\x22in d||\x22U\x22in d)\x22w\x22in d||(d.w\x3d\x22u\x22in d?d.u%7:\x22W\x22in d?1:0),day\x3d\x22Z\x22in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay(),d.m\x3d0,d.d\x3d\x22W\x22in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7;return\x22Z\x22in d?(d.H+\x3dd.Z/100|0,d.M+\x3dd.Z%100,utcDate(d)):\nlocalDate(d)}}function parseSpecifier(d,specifier,string,j){for(var i\x3d0,n\x3dspecifier.length,m\x3dstring.length,c;i\x3cn;){if(j\x3e\x3dm)return-1;c\x3dspecifier.charCodeAt(i++);if(37\x3d\x3d\x3dc){if(c\x3dspecifier.charAt(i++),c\x3dparses[c in pads?specifier.charAt(i++):c],!c||0\x3e(j\x3dc(d,string,j)))return-1}else if(c!\x3dstring.charCodeAt(j++))return-1}return j}var locale_dateTime\x3dlocale.dateTime,locale_date\x3dlocale.date,locale_time\x3dlocale.time,locale_periods\x3dlocale.periods,locale_weekdays\x3dlocale.days,locale_shortWeekdays\x3dlocale.shortDays,\nlocale_months\x3dlocale.months,locale_shortMonths\x3dlocale.shortMonths,periodRe\x3dformatRe(locale_periods),periodLookup\x3dformatLookup(locale_periods),weekdayRe\x3dformatRe(locale_weekdays),weekdayLookup\x3dformatLookup(locale_weekdays),shortWeekdayRe\x3dformatRe(locale_shortWeekdays),shortWeekdayLookup\x3dformatLookup(locale_shortWeekdays),monthRe\x3dformatRe(locale_months),monthLookup\x3dformatLookup(locale_months),shortMonthRe\x3dformatRe(locale_shortMonths),shortMonthLookup\x3dformatLookup(locale_shortMonths),formats$jscomp$0\x3d\n{a:function(d){return locale_shortWeekdays[d.getDay()]},A:function(d){return locale_weekdays[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(d){return locale_periods[+(12\x3c\x3dd.getHours())]},q:function(d){return 1+~~(d.getMonth()/\n3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,\x22%\x22:formatLiteralPercent},utcFormats\x3d{a:function(d){return locale_shortWeekdays[d.getUTCDay()]},A:function(d){return locale_weekdays[d.getUTCDay()]},b:function(d){return locale_shortMonths[d.getUTCMonth()]},B:function(d){return locale_months[d.getUTCMonth()]},\nc:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(d){return locale_periods[+(12\x3c\x3dd.getUTCHours())]},q:function(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,\nw:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,\x22%\x22:formatLiteralPercent},parses\x3d{a:function(d,string,i){return(string\x3dshortWeekdayRe.exec(string.slice(i)))?(d.w\x3dshortWeekdayLookup.get(string[0].toLowerCase()),i+string[0].length):-1},A:function(d,string,i){return(string\x3dweekdayRe.exec(string.slice(i)))?(d.w\x3dweekdayLookup.get(string[0].toLowerCase()),i+string[0].length):-1},b:function(d,string,i){return(string\x3dshortMonthRe.exec(string.slice(i)))?\n(d.m\x3dshortMonthLookup.get(string[0].toLowerCase()),i+string[0].length):-1},B:function(d,string,i){return(string\x3dmonthRe.exec(string.slice(i)))?(d.m\x3dmonthLookup.get(string[0].toLowerCase()),i+string[0].length):-1},c:function(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(d,string,i){return(string\x3d\nperiodRe.exec(string.slice(i)))?(d.p\x3dperiodLookup.get(string[0].toLowerCase()),i+string[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,\x22%\x22:parseLiteralPercent};\nformats$jscomp$0.x\x3dnewFormat(locale_date,formats$jscomp$0);formats$jscomp$0.X\x3dnewFormat(locale_time,formats$jscomp$0);formats$jscomp$0.c\x3dnewFormat(locale_dateTime,formats$jscomp$0);utcFormats.x\x3dnewFormat(locale_date,utcFormats);utcFormats.X\x3dnewFormat(locale_time,utcFormats);utcFormats.c\x3dnewFormat(locale_dateTime,utcFormats);return{format:function(specifier){var f\x3dnewFormat(specifier+\x3d\x22\x22,formats$jscomp$0);f.toString\x3dfunction(){return specifier};return f},parse:function(specifier){var p\x3dnewParse(specifier+\x3d\n\x22\x22,!1);p.toString\x3dfunction(){return specifier};return p},utcFormat:function(specifier){var f\x3dnewFormat(specifier+\x3d\x22\x22,utcFormats);f.toString\x3dfunction(){return specifier};return f},utcParse:function(specifier){var p\x3dnewParse(specifier+\x3d\x22\x22,!0);p.toString\x3dfunction(){return specifier};return p}}}function pad(value,fill,width){var sign\x3d0\x3evalue?\x22-\x22:\x22\x22;value\x3d(sign?-value:value)+\x22\x22;var length\x3dvalue.length;return sign+(length\x3cwidth?Array(width-length+1).join(fill)+value:value)}function requote(s){return s.replace(requoteRe,\n\x22\\\\$\\x26\x22)}function formatRe(names){return new RegExp(\x22^(?:\x22+names.map(requote).join(\x22|\x22)+\x22)\x22,\x22i\x22)}function formatLookup(names){return new Map(names.map((name,i)\x3d\x3e[name.toLowerCase(),i]))}function parseWeekdayNumberSunday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.w\x3d+string[0],i+string[0].length):-1}function parseWeekdayNumberMonday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.u\x3d+string[0],i+string[0].length):-1}function parseWeekNumberSunday(d,string,i){return(string\x3d\nnumberRe.exec(string.slice(i,i+2)))?(d.U\x3d+string[0],i+string[0].length):-1}function parseWeekNumberISO(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.V\x3d+string[0],i+string[0].length):-1}function parseWeekNumberMonday(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.W\x3d+string[0],i+string[0].length):-1}function parseFullYear(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+4)))?(d.y\x3d+string[0],i+string[0].length):-1}function parseYear(d,string,i){return(string\x3d\nnumberRe.exec(string.slice(i,i+2)))?(d.y\x3d+string[0]+(68\x3c+string[0]?1900:2E3),i+string[0].length):-1}function parseZone(d,string,i){return(string\x3d/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i,i+6)))?(d.Z\x3dstring[1]?0:-(string[2]+(string[3]||\x2200\x22)),i+string[0].length):-1}function parseQuarter(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+1)))?(d.q\x3d3*string[0]-3,i+string[0].length):-1}function parseMonthNumber(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.m\x3dstring[0]-\n1,i+string[0].length):-1}function parseDayOfMonth(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.d\x3d+string[0],i+string[0].length):-1}function parseDayOfYear(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+3)))?(d.m\x3d0,d.d\x3d+string[0],i+string[0].length):-1}function parseHour24(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.H\x3d+string[0],i+string[0].length):-1}function parseMinutes(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.M\x3d+string[0],\ni+string[0].length):-1}function parseSeconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+2)))?(d.S\x3d+string[0],i+string[0].length):-1}function parseMilliseconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+3)))?(d.L\x3d+string[0],i+string[0].length):-1}function parseMicroseconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i,i+6)))?(d.L\x3dMath.floor(string[0]/1E3),i+string[0].length):-1}function parseLiteralPercent(d,string,i){return(d\x3dpercentRe.exec(string.slice(i,i+1)))?\ni+d[0].length:-1}function parseUnixTimestamp(d,string,i){return(string\x3dnumberRe.exec(string.slice(i)))?(d.Q\x3d+string[0],i+string[0].length):-1}function parseUnixTimestampSeconds(d,string,i){return(string\x3dnumberRe.exec(string.slice(i)))?(d.s\x3d+string[0],i+string[0].length):-1}function formatDayOfMonth(d,p){return pad(d.getDate(),p,2)}function formatHour24(d,p){return pad(d.getHours(),p,2)}function formatHour12(d,p){return pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return pad(1+d3Time.timeDay.count(d3Time.timeYear(d),\nd),p,3)}function formatMilliseconds(d,p){return pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+\x22000\x22}function formatMonthNumber(d,p){return pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){d\x3dd.getDay();return 0\x3d\x3d\x3dd?7:d}function formatWeekNumberSunday(d,p){return pad(d3Time.timeSunday.count(d3Time.timeYear(d)-1,d),p,2)}function dISO(d){var day\x3d\nd.getDay();return 4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.timeThursday(d):d3Time.timeThursday.ceil(d)}function formatWeekNumberISO(d,p){d\x3ddISO(d);return pad(d3Time.timeThursday.count(d3Time.timeYear(d),d)+(4\x3d\x3d\x3dd3Time.timeYear(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return pad(d3Time.timeMonday.count(d3Time.timeYear(d)-1,d),p,2)}function formatYear(d,p){return pad(d.getFullYear()%100,p,2)}function formatYearISO(d,p){d\x3ddISO(d);return pad(d.getFullYear()%\n100,p,2)}function formatFullYear(d,p){return pad(d.getFullYear()%1E4,p,4)}function formatFullYearISO(d,p){var day\x3dd.getDay();d\x3d4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.timeThursday(d):d3Time.timeThursday.ceil(d);return pad(d.getFullYear()%1E4,p,4)}function formatZone(d){d\x3dd.getTimezoneOffset();return(0\x3cd?\x22-\x22:(d*\x3d-1,\x22+\x22))+pad(d/60|0,\x220\x22,2)+pad(d%60,\x220\x22,2)}function formatUTCDayOfMonth(d,p){return pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return pad(d.getUTCHours()%\n12||12,p,2)}function formatUTCDayOfYear(d,p){return pad(1+d3Time.utcDay.count(d3Time.utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+\x22000\x22}function formatUTCMonthNumber(d,p){return pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){d\x3dd.getUTCDay();\nreturn 0\x3d\x3d\x3dd?7:d}function formatUTCWeekNumberSunday(d,p){return pad(d3Time.utcSunday.count(d3Time.utcYear(d)-1,d),p,2)}function UTCdISO(d){var day\x3dd.getUTCDay();return 4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.utcThursday(d):d3Time.utcThursday.ceil(d)}function formatUTCWeekNumberISO(d,p){d\x3dUTCdISO(d);return pad(d3Time.utcThursday.count(d3Time.utcYear(d),d)+(4\x3d\x3d\x3dd3Time.utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return pad(d3Time.utcMonday.count(d3Time.utcYear(d)-\n1,d),p,2)}function formatUTCYear(d,p){return pad(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){d\x3dUTCdISO(d);return pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return pad(d.getUTCFullYear()%1E4,p,4)}function formatUTCFullYearISO(d,p){var day\x3dd.getUTCDay();d\x3d4\x3c\x3dday||0\x3d\x3d\x3dday?d3Time.utcThursday(d):d3Time.utcThursday.ceil(d);return pad(d.getUTCFullYear()%1E4,p,4)}function formatUTCZone(){return\x22+0000\x22}function formatLiteralPercent(){return\x22%\x22}function formatUnixTimestamp(d){return+d}\nfunction formatUnixTimestampSeconds(d){return Math.floor(+d/1E3)}function defaultLocale(definition){locale$jscomp$0\x3dformatLocale(definition);exports.timeFormat\x3dlocale$jscomp$0.format;exports.timeParse\x3dlocale$jscomp$0.parse;exports.utcFormat\x3dlocale$jscomp$0.utcFormat;exports.utcParse\x3dlocale$jscomp$0.utcParse;return locale$jscomp$0}function formatIsoNative(date){return date.toISOString()}function parseIsoNative(string){string\x3dnew Date(string);return isNaN(string)?null:string}var pads\x3d{\x22-\x22:\x22\x22,_:\x22 \x22,\n0:\x220\x22},numberRe\x3d/^\\s*\\d+/,percentRe\x3d/^%/,requoteRe\x3d/[\\\\^$*+?|[\\]().{}]/g,locale$jscomp$0;defaultLocale({dateTime:\x22%x, %X\x22,date:\x22%-m/%-d/%Y\x22,time:\x22%-I:%M:%S %p\x22,periods:[\x22AM\x22,\x22PM\x22],days:\x22Sunday Monday Tuesday Wednesday Thursday Friday Saturday\x22.split(\x22 \x22),shortDays:\x22Sun Mon Tue Wed Thu Fri Sat\x22.split(\x22 \x22),months:\x22January February March April May June July August September October November December\x22.split(\x22 \x22),shortMonths:\x22Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\x22.split(\x22 \x22)});var formatIso\x3d\nDate.prototype.toISOString?formatIsoNative:exports.utcFormat(\x22%Y-%m-%dT%H:%M:%S.%LZ\x22),parseIso\x3d+new Date(\x222000-01-01T00:00:00.000Z\x22)?parseIsoNative:exports.utcParse(\x22%Y-%m-%dT%H:%M:%S.%LZ\x22);exports.isoFormat\x3dformatIso;exports.isoParse\x3dparseIso;exports.timeFormatDefaultLocale\x3ddefaultLocale;exports.timeFormatLocale\x3dformatLocale;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_format$build$vega_format.js", true , "shadow$provide.module$node_modules$vega_format$build$vega_format\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_format$dist$d3_format\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_time_format$dist$d3_time_format\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports d3-array d3-format vega-time vega-util d3-time-format\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.d3,global.d3,global.vega,global.vega,global.d3))})(this,function(exports,d3Array,d3Format,vegaTime,vegaUtil,d3TimeFormat){function memoize(method){const cache\x3d{};return spec\x3d\x3ecache[spec]||(cache[spec]\x3dmethod(spec))}function trimZeroes(numberFormat,decimalChar){return x\x3d\x3e{x\x3dnumberFormat(x);\nconst dec\x3dx.indexOf(decimalChar);if(0\x3edec)return x;a:{var JSCompiler_inline_result\x3dx.lastIndexOf(\x22e\x22);if(!(0\x3cJSCompiler_inline_result)){for(JSCompiler_inline_result\x3dx.length;--JSCompiler_inline_result\x3edec;){var c\x3dx.charCodeAt(JSCompiler_inline_result);if(48\x3c\x3dc\x26\x2657\x3e\x3dc){JSCompiler_inline_result+\x3d1;break a}}JSCompiler_inline_result\x3dvoid 0}}for(c\x3dJSCompiler_inline_result\x3cx.length?x.slice(JSCompiler_inline_result):\x22\x22;--JSCompiler_inline_result\x3edec;)if(\x220\x22!\x3d\x3dx[JSCompiler_inline_result]){++JSCompiler_inline_result;\nbreak}return x.slice(0,JSCompiler_inline_result)+c}}function numberLocale(locale){const format\x3dmemoize(locale.format),formatPrefix\x3dlocale.formatPrefix;return{format,formatPrefix,formatFloat(spec){spec\x3dd3Format.formatSpecifier(spec||\x22,\x22);if(null\x3d\x3dspec.precision){spec.precision\x3d12;switch(spec.type){case \x22%\x22:spec.precision-\x3d2;break;case \x22e\x22:--spec.precision}return trimZeroes(format(spec),format(\x22.1f\x22)(1)[1])}return format(spec)},formatSpan(start,stop,count,specifier){specifier\x3dd3Format.formatSpecifier(null\x3d\x3d\nspecifier?\x22,f\x22:specifier);count\x3dd3Array.tickStep(start,stop,count);start\x3dMath.max(Math.abs(start),Math.abs(stop));if(null\x3d\x3dspecifier.precision)switch(specifier.type){case \x22s\x22:return isNaN(stop\x3dd3Format.precisionPrefix(count,start))||(specifier.precision\x3dstop),formatPrefix(specifier,start);case \x22\x22:case \x22e\x22:case \x22g\x22:case \x22p\x22:case \x22r\x22:isNaN(stop\x3dd3Format.precisionRound(count,start))||(specifier.precision\x3dstop-(\x22e\x22\x3d\x3d\x3dspecifier.type));break;case \x22f\x22:case \x22%\x22:isNaN(stop\x3dd3Format.precisionFixed(count))||\n(specifier.precision\x3dstop-2*(\x22%\x22\x3d\x3d\x3dspecifier.type))}return format(specifier)}}}function resetNumberFormatDefaultLocale(){return defaultNumberLocale\x3dnumberLocale({format:d3Format.format,formatPrefix:d3Format.formatPrefix})}function numberFormatLocale(definition){return numberLocale(d3Format.formatLocale(definition))}function numberFormatDefaultLocale(definition){return arguments.length?defaultNumberLocale\x3dnumberFormatLocale(definition):defaultNumberLocale}function timeMultiFormat(format,interval,spec){spec\x3d\nspec||{};vegaUtil.isObject(spec)||vegaUtil.error(`Invalid time multi-format specifier: ${spec}`);const second\x3dinterval(vegaTime.SECONDS),minute\x3dinterval(vegaTime.MINUTES),hour\x3dinterval(vegaTime.HOURS),day\x3dinterval(vegaTime.DATE),week\x3dinterval(vegaTime.WEEK),month\x3dinterval(vegaTime.MONTH),quarter\x3dinterval(vegaTime.QUARTER),year\x3dinterval(vegaTime.YEAR),L\x3dformat(spec[vegaTime.MILLISECONDS]||\x22.%L\x22),S\x3dformat(spec[vegaTime.SECONDS]||\x22:%S\x22),M\x3dformat(spec[vegaTime.MINUTES]||\x22%I:%M\x22),H\x3dformat(spec[vegaTime.HOURS]||\n\x22%I %p\x22),d\x3dformat(spec[vegaTime.DATE]||spec[vegaTime.DAY]||\x22%a %d\x22),w\x3dformat(spec[vegaTime.WEEK]||\x22%b %d\x22),m\x3dformat(spec[vegaTime.MONTH]||\x22%B\x22),q\x3dformat(spec[vegaTime.QUARTER]||\x22%B\x22),y\x3dformat(spec[vegaTime.YEAR]||\x22%Y\x22);return date\x3d\x3e(second(date)\x3cdate?L:minute(date)\x3cdate?S:hour(date)\x3cdate?M:day(date)\x3cdate?H:month(date)\x3cdate?week(date)\x3cdate?d:w:year(date)\x3cdate?quarter(date)\x3cdate?m:q:y)(date)}function timeLocale(locale){const timeFormat\x3dmemoize(locale.format),utcFormat\x3dmemoize(locale.utcFormat);return{timeFormat:spec\x3d\x3e\nvegaUtil.isString(spec)?timeFormat(spec):timeMultiFormat(timeFormat,vegaTime.timeInterval,spec),utcFormat:spec\x3d\x3evegaUtil.isString(spec)?utcFormat(spec):timeMultiFormat(utcFormat,vegaTime.utcInterval,spec),timeParse:memoize(locale.parse),utcParse:memoize(locale.utcParse)}}function resetTimeFormatDefaultLocale(){return defaultTimeLocale\x3dtimeLocale({format:d3TimeFormat.timeFormat,parse:d3TimeFormat.timeParse,utcFormat:d3TimeFormat.utcFormat,utcParse:d3TimeFormat.utcParse})}function timeFormatLocale(definition){return timeLocale(d3TimeFormat.timeFormatLocale(definition))}\nfunction timeFormatDefaultLocale(definition){return arguments.length?defaultTimeLocale\x3dtimeFormatLocale(definition):defaultTimeLocale}function defaultLocale(numberSpec,timeSpec){var args\x3darguments.length;args\x26\x262!\x3d\x3dargs\x26\x26vegaUtil.error(\x22defaultLocale expects either zero or two arguments.\x22);if(args){args\x3dnumberFormatDefaultLocale(numberSpec);var time\x3dtimeFormatDefaultLocale(timeSpec);args\x3dvegaUtil.extend({},args,time)}else args\x3dnumberFormatDefaultLocale(),time\x3dtimeFormatDefaultLocale(),args\x3dvegaUtil.extend({},\nargs,time);return args}let defaultNumberLocale;resetNumberFormatDefaultLocale();let defaultTimeLocale;resetTimeFormatDefaultLocale();exports.defaultLocale\x3ddefaultLocale;exports.locale\x3dfunction(numberSpec,timeSpec){numberSpec\x3dnumberSpec?numberFormatLocale(numberSpec):numberFormatDefaultLocale();timeSpec\x3dtimeSpec?timeFormatLocale(timeSpec):timeFormatDefaultLocale();return vegaUtil.extend({},numberSpec,timeSpec)};exports.numberFormatDefaultLocale\x3dnumberFormatDefaultLocale;exports.numberFormatLocale\x3d\nnumberFormatLocale;exports.resetDefaultLocale\x3dfunction(){resetNumberFormatDefaultLocale();resetTimeFormatDefaultLocale();return defaultLocale()};exports.resetNumberFormatDefaultLocale\x3dresetNumberFormatDefaultLocale;exports.resetTimeFormatDefaultLocale\x3dresetTimeFormatDefaultLocale;exports.timeFormatDefaultLocale\x3dtimeFormatDefaultLocale;exports.timeFormatLocale\x3dtimeFormatLocale;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_loader$build$vega_loader_min.js", true , "shadow$provide.module$node_modules$vega_loader$build$vega_loader_min\x3dfunction(global,require,module,exports){var Buffer\x3drequire(\x22module$node_modules$buffer$index\x22).Buffer;!function(e,t){\x22object\x22\x3d\x3dtypeof exports\x26\x26\x22undefined\x22!\x3dtypeof module?t(exports,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\x22function\x22\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-format\x22],t):t((e\x3d\x22undefined\x22!\x3dtypeof globalThis?globalThis:\ne||self).vega\x3d{},e.vega,e.vega)}(this,function(e$jscomp$3,t$jscomp$2,n$jscomp$2){function u$jscomp$1(e,t){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const n\x3dyield $jscomp$async$this.sanitize(e,t),r\x3dn.href;return n.localFile?$jscomp$async$this.file(r):$jscomp$async$this.http(r,t)})}function s$jscomp$0(e,n){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){n\x3dt$jscomp$2.extend({},$jscomp$async$this.options,\nn);const u\x3d$jscomp$async$this.fileAccess,s\x3d{href:null};let c,f,l;var p\x3do$jscomp$2.test(e.replace(i$jscomp$1,\x22\x22));null!\x3de\x26\x26\x22string\x22\x3d\x3dtypeof e\x26\x26p||t$jscomp$2.error(\x22Sanitize failure, invalid URI: \x22+t$jscomp$2.stringValue(e));p\x3dr$jscomp$2.test(e);return(l\x3dn.baseURL)\x26\x26!p\x26\x26(e.startsWith(\x22/\x22)||\x22/\x22\x3d\x3d\x3dl[l.length-1]||(e\x3d\x22/\x22+e),e\x3dl+e),f\x3d(c\x3de.startsWith(\x22file://\x22))||\x22file\x22\x3d\x3d\x3dn.mode||\x22http\x22!\x3d\x3dn.mode\x26\x26!p\x26\x26u,c?e\x3de.slice(7):e.startsWith(\x22//\x22)\x26\x26(\x22file\x22\x3d\x3d\x3dn.defaultProtocol?(e\x3de.slice(2),f\x3d!0):e\x3d(n.defaultProtocol||\n\x22http\x22)+\x22:\x22+e),Object.defineProperty(s,\x22localFile\x22,{value:!!f}),s.href\x3de,n.target\x26\x26(s.target\x3dn.target+\x22\x22),n.rel\x26\x26(s.rel\x3dn.rel+\x22\x22),\x22image\x22\x3d\x3d\x3dn.context\x26\x26n.crossOrigin\x26\x26(s.crossOrigin\x3dn.crossOrigin+\x22\x22),s})}function c$jscomp$0(e$jscomp$0){return e$jscomp$0?t$jscomp$0\x3d\x3enew Promise((n,r)\x3d\x3e{e$jscomp$0.readFile(t$jscomp$0,(e,t)\x3d\x3e{e?r(e):n(t)})}):f$jscomp$0}function f$jscomp$0(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){t$jscomp$2.error(\x22No file system access.\x22)})}function l$jscomp$0(e){return e?\nfunction(n,r){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var o\x3dt$jscomp$2.extend({},$jscomp$async$this.options.http,r);const i\x3dr\x26\x26r.response;o\x3dyield e(n,o);return o.ok?t$jscomp$2.isFunction(o[i])?o[i]():o.text():t$jscomp$2.error(o.status+\x22\x22+o.statusText)})}:p$jscomp$0}function p$jscomp$0(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){t$jscomp$2.error(\x22No HTTP fetch method available.\x22)})}function y(e$jscomp$0,t$jscomp$0){if(!e$jscomp$0||\n!e$jscomp$0.length)return\x22unknown\x22;const n\x3de$jscomp$0.length,r\x3dg.length,o\x3dg.map((e,t)\x3d\x3et+1);for(let a,u,s\x3d0,c\x3d0;s\x3cn;++s)for(u\x3dt$jscomp$0?e$jscomp$0[s][t$jscomp$0]:e$jscomp$0[s],a\x3d0;a\x3cr;++a)if(o[a]\x26\x26null!\x3d(i\x3du)\x26\x26i\x3d\x3di\x26\x26!g[a](u)\x26\x26(o[a]\x3d0,++c,c\x3d\x3d\x3dg.length))return\x22string\x22;var i;return m[o.reduce((e,t)\x3d\x3e0\x3d\x3d\x3de?t:e,0)-1]}function v(e,t$jscomp$0){return t$jscomp$0.reduce((t,n)\x3d\x3e(t[n]\x3dy(e,n),t),{})}function j(e$jscomp$0){return new Function(\x22d\x22,\x22return {\x22+e$jscomp$0.map(function(e,t){return JSON.stringify(e)+\n\x22: d[\x22+t+\x27] || \x22\x22\x27}).join(\x22,\x22)+\x22}\x22)}function C(e$jscomp$0){var t\x3dObject.create(null),n\x3d[];return e$jscomp$0.forEach(function(e){for(var r in e)r in t||n.push(t[r]\x3dr)}),n}function w(e,t){e+\x3d\x22\x22;var r\x3de.length;return r\x3ct?Array(t-r+1).join(0)+e:e}function A(e$jscomp$2){function r$jscomp$1(e,t$jscomp$0){function f(){if(s)return T;if(c)return c\x3d!1,b;var t,r,o\x3da;if(34\x3d\x3d\x3de.charCodeAt(o)){for(;a++\x3ci\x26\x2634!\x3d\x3de.charCodeAt(a)||34\x3d\x3d\x3de.charCodeAt(++a););return(t\x3da)\x3e\x3di?s\x3d!0:10\x3d\x3d\x3d(r\x3de.charCodeAt(a++))?c\x3d!0:13\x3d\x3d\x3dr\x26\x26\n(c\x3d!0,10\x3d\x3d\x3de.charCodeAt(a)\x26\x26++a),e.slice(o+1,t-1).replace(/\x22\x22/g,\x27\x22\x27)}for(;a\x3ci;){if(10\x3d\x3d\x3d(r\x3de.charCodeAt(t\x3da++)))c\x3d!0;else if(13\x3d\x3d\x3dr)c\x3d!0,10\x3d\x3d\x3de.charCodeAt(a)\x26\x26++a;else if(r!\x3d\x3dn$jscomp$1)continue;return e.slice(o,t)}return s\x3d!0,e.slice(o,i)}var r$jscomp$0,o$jscomp$0\x3d[],i\x3de.length,a\x3d0,u\x3d0,s\x3d0\x3e\x3di,c\x3d!1;10\x3d\x3d\x3de.charCodeAt(i-1)\x26\x26--i;for(13\x3d\x3d\x3de.charCodeAt(i-1)\x26\x26--i;(r$jscomp$0\x3df())!\x3d\x3dT;){for(var l\x3d[];r$jscomp$0!\x3d\x3db\x26\x26r$jscomp$0!\x3d\x3dT;)l.push(r$jscomp$0),r$jscomp$0\x3df();t$jscomp$0\x26\x26null\x3d\x3d(l\x3dt$jscomp$0(l,u++))||\no$jscomp$0.push(l)}return o$jscomp$0}function o$jscomp$1(t$jscomp$0,n){return t$jscomp$0.map(function(t){return n.map(function(e){return a$jscomp$0(t[e])}).join(e$jscomp$2)})}function i$jscomp$0(t){return t.map(a$jscomp$0).join(e$jscomp$2)}function a$jscomp$0(e){if(null\x3d\x3de)var JSCompiler_temp\x3d\x22\x22;else{if(e instanceof Date){var JSCompiler_temp$jscomp$0\x3de.getUTCHours();var r\x3de.getUTCMinutes(),o\x3de.getUTCSeconds(),i\x3de.getUTCMilliseconds();JSCompiler_temp$jscomp$0\x3disNaN(e)?\x22Invalid Date\x22:(0\x3e(JSCompiler_temp\x3d\ne.getUTCFullYear())?\x22-\x22+w(-JSCompiler_temp,6):9999\x3cJSCompiler_temp?\x22+\x22+w(JSCompiler_temp,6):w(JSCompiler_temp,4))+\x22-\x22+w(e.getUTCMonth()+1,2)+\x22-\x22+w(e.getUTCDate(),2)+(i?\x22T\x22+w(JSCompiler_temp$jscomp$0,2)+\x22:\x22+w(r,2)+\x22:\x22+w(o,2)+\x22.\x22+w(i,3)+\x22Z\x22:o?\x22T\x22+w(JSCompiler_temp$jscomp$0,2)+\x22:\x22+w(r,2)+\x22:\x22+w(o,2)+\x22Z\x22:r||JSCompiler_temp$jscomp$0?\x22T\x22+w(JSCompiler_temp$jscomp$0,2)+\x22:\x22+w(r,2)+\x22Z\x22:\x22\x22)}else JSCompiler_temp$jscomp$0\x3dt$jscomp$1.test(e+\x3d\x22\x22)?\x27\x22\x27+e.replace(/\x22/g,\x27\x22\x22\x27)+\x27\x22\x27:e;JSCompiler_temp\x3dJSCompiler_temp$jscomp$0}return JSCompiler_temp}\nvar t$jscomp$1\x3dnew RegExp(\x27[\x22\x27+e$jscomp$2+\x22\\n\\r]\x22),n$jscomp$1\x3de$jscomp$2.charCodeAt(0);return{parse:function(e$jscomp$1,t$jscomp$0){var n$jscomp$0,o$jscomp$0;e$jscomp$1\x3dr$jscomp$1(e$jscomp$1,function(e$jscomp$0,r$jscomp$0){if(n$jscomp$0)return n$jscomp$0(e$jscomp$0,r$jscomp$0-1);o$jscomp$0\x3de$jscomp$0;n$jscomp$0\x3dt$jscomp$0?function(e,t){var n\x3dj(e);return function(r,o){return t(n(r),o,e)}}(e$jscomp$0,t$jscomp$0):j(e$jscomp$0)});return e$jscomp$1.columns\x3do$jscomp$0||[],e$jscomp$1},parseRows:r$jscomp$1,\nformat:function(t,n){return null\x3d\x3dn\x26\x26(n\x3dC(t)),[n.map(a$jscomp$0).join(e$jscomp$2)].concat(o$jscomp$1(t,n)).join(\x22\\n\x22)},formatBody:function(e,t){return null\x3d\x3dt\x26\x26(t\x3dC(e)),o$jscomp$1(e,t).join(\x22\\n\x22)},formatRows:function(e){return e.map(i$jscomp$0).join(\x22\\n\x22)},formatRow:i$jscomp$0,formatValue:a$jscomp$0}}function x(e){const n$jscomp$0\x3dfunction(n,r){const o\x3d{delimiter:e};return O(n,r?t$jscomp$2.extend(r,o):o)};return n$jscomp$0.responseType\x3d\x22text\x22,n$jscomp$0}function O(e,n){return n.header\x26\x26(e\x3dn.header.map(t$jscomp$2.stringValue).join(n.delimiter)+\n\x22\\n\x22+e),A(n.delimiter).parse(e+\x22\x22)}function P(e,n){const r\x3dn\x26\x26n.property?t$jscomp$2.field(n.property):t$jscomp$2.identity;!t$jscomp$2.isObject(e)||(o\x3de,\x22function\x22\x3d\x3dtypeof Buffer\x26\x26t$jscomp$2.isFunction(Buffer.isBuffer)\x26\x26Buffer.isBuffer(o))?n\x3dr(JSON.parse(e)):(e\x3dr(e),!t$jscomp$2.isArray(e)\x26\x26t$jscomp$2.isIterable(e)\x26\x26(e\x3d[...e]),n\x3dn\x26\x26n.copy?JSON.parse(JSON.stringify(e)):e);return n;var o}function k(e){return e}function E(e,t$jscomp$0){return\x22string\x22\x3d\x3dtypeof t$jscomp$0\x26\x26(t$jscomp$0\x3de.objects[t$jscomp$0]),\n\x22GeometryCollection\x22\x3d\x3d\x3dt$jscomp$0.type?{type:\x22FeatureCollection\x22,features:t$jscomp$0.geometries.map(function(t){return S(e,t)})}:S(e,t$jscomp$0)}function S(e,t){var n\x3dt.id,r\x3dt.bbox,o\x3dnull\x3d\x3dt.properties?{}:t.properties;e\x3dF(e,t);return null\x3d\x3dn\x26\x26null\x3d\x3dr?{type:\x22Feature\x22,properties:o,geometry:e}:null\x3d\x3dr?{type:\x22Feature\x22,id:n,properties:o,geometry:e}:{type:\x22Feature\x22,id:n,bbox:r,properties:o,geometry:e}}function F(e$jscomp$1,t$jscomp$1){function i$jscomp$0(e){return n$jscomp$1(e)}function a$jscomp$0(e$jscomp$0){for(var t\x3d\n[],n\x3d0,r\x3de$jscomp$0.length;n\x3cr;++n){var n$jscomp$0,e\x3de$jscomp$0[n],t$jscomp$0\x3dt;t$jscomp$0.length\x26\x26t$jscomp$0.pop();var o\x3dr$jscomp$0[0\x3ee?~e:e],i\x3d0;for(n$jscomp$0\x3do.length;i\x3cn$jscomp$0;++i)t$jscomp$0.push(n$jscomp$1(o[i],i));if(0\x3ee)for(e\x3dt$jscomp$0.length,o\x3de-n$jscomp$0;o\x3c--e;)n$jscomp$0\x3dt$jscomp$0[o],t$jscomp$0[o++]\x3dt$jscomp$0[e],t$jscomp$0[e]\x3dn$jscomp$0}return 2\x3et.length\x26\x26t.push(t[0]),t}function u$jscomp$0(e){for(e\x3da$jscomp$0(e);4\x3ee.length;)e.push(e[0]);return e}function s(e){return e.map(u$jscomp$0)}\nvar n$jscomp$1\x3dfunction(e$jscomp$0){if(null\x3d\x3de$jscomp$0)return k;var t,n,r\x3de$jscomp$0.scale[0],o\x3de$jscomp$0.scale[1],i\x3de$jscomp$0.translate[0],a\x3de$jscomp$0.translate[1];return function(e,u){u||(t\x3dn\x3d0);u\x3d2;var c\x3de.length,f\x3dArray(c);f[0]\x3d(t+\x3de[0])*r+i;for(f[1]\x3d(n+\x3de[1])*o+a;u\x3cc;)f[u]\x3de[u],++u;return f}}(e$jscomp$1.transform),r$jscomp$0\x3de$jscomp$1.arcs;return function e(t){var r\x3dt.type;switch(r){case \x22GeometryCollection\x22:return{type:r,geometries:t.geometries.map(e)};case \x22Point\x22:t\x3dn$jscomp$1(t.coordinates);\nbreak;case \x22MultiPoint\x22:t\x3dt.coordinates.map(i$jscomp$0);break;case \x22LineString\x22:t\x3da$jscomp$0(t.arcs);break;case \x22MultiLineString\x22:t\x3dt.arcs.map(a$jscomp$0);break;case \x22Polygon\x22:t\x3ds(t.arcs);break;case \x22MultiPolygon\x22:t\x3dt.arcs.map(s);break;default:return null}return{type:r,coordinates:t}}(t$jscomp$1)}function M(e$jscomp$1,t$jscomp$1){function u$jscomp$0(e$jscomp$0,t){for(var r in e$jscomp$0){var o\x3de$jscomp$0[r];delete t[o.start];delete o.start;delete o.end;o.forEach(function(e){n$jscomp$1[0\x3ee?~e:e]\x3d1});\ni$jscomp$0.push(o)}}var n$jscomp$1\x3d{},r$jscomp$0\x3d{},o$jscomp$0\x3d{},i$jscomp$0\x3d[],a\x3d-1;return t$jscomp$1.forEach(function(n,r){var o,i\x3de$jscomp$1.arcs[0\x3en?~n:n];3\x3ei.length\x26\x26!i[1][0]\x26\x26!i[1][1]\x26\x26(o\x3dt$jscomp$1[++a],t$jscomp$1[a]\x3dn,t$jscomp$1[r]\x3do)}),t$jscomp$1.forEach(function(t$jscomp$0){var n$jscomp$0\x3dfunction(t){var n,r\x3de$jscomp$1.arcs[0\x3et?~t:t],o\x3dr[0];e$jscomp$1.transform?(n\x3d[0,0],r.forEach(function(e){n[0]+\x3de[0];n[1]+\x3de[1]})):n\x3dr[r.length-1];return 0\x3et?[n,o]:[o,n]}(t$jscomp$0);var u\x3dn$jscomp$0[0],\ns\x3dn$jscomp$0[1];(n$jscomp$0\x3do$jscomp$0[u])?(delete o$jscomp$0[n$jscomp$0.end],n$jscomp$0.push(t$jscomp$0),n$jscomp$0.end\x3ds,t$jscomp$0\x3dr$jscomp$0[s])?(delete r$jscomp$0[t$jscomp$0.start],u\x3dt$jscomp$0\x3d\x3d\x3dn$jscomp$0?n$jscomp$0:n$jscomp$0.concat(t$jscomp$0),r$jscomp$0[u.start\x3dn$jscomp$0.start]\x3do$jscomp$0[u.end\x3dt$jscomp$0.end]\x3du):r$jscomp$0[n$jscomp$0.start]\x3do$jscomp$0[n$jscomp$0.end]\x3dn$jscomp$0:(n$jscomp$0\x3dr$jscomp$0[s])?(delete r$jscomp$0[n$jscomp$0.start],n$jscomp$0.unshift(t$jscomp$0),n$jscomp$0.start\x3d\nu,t$jscomp$0\x3do$jscomp$0[u])?(delete o$jscomp$0[t$jscomp$0.end],u\x3dt$jscomp$0\x3d\x3d\x3dn$jscomp$0?n$jscomp$0:t$jscomp$0.concat(n$jscomp$0),r$jscomp$0[u.start\x3dt$jscomp$0.start]\x3do$jscomp$0[u.end\x3dn$jscomp$0.end]\x3du):r$jscomp$0[n$jscomp$0.start]\x3do$jscomp$0[n$jscomp$0.end]\x3dn$jscomp$0:r$jscomp$0[(n$jscomp$0\x3d[t$jscomp$0]).start\x3du]\x3do$jscomp$0[n$jscomp$0.end\x3ds]\x3dn$jscomp$0}),u$jscomp$0(o$jscomp$0,r$jscomp$0),u$jscomp$0(r$jscomp$0,o$jscomp$0),t$jscomp$1.forEach(function(e){n$jscomp$1[0\x3ee?~e:e]||i$jscomp$0.push([e])}),\ni$jscomp$0}function U(e){return F(e,z.apply(this,arguments))}function z(e,t,n){var i;if(1\x3carguments.length)var r\x3dB(e,t,n);else{var o\x3d0;for(r\x3dArray(i\x3de.arcs.length);o\x3ci;++o)r[o]\x3do}return{type:\x22MultiLineString\x22,arcs:M(e,r)}}function B(e$jscomp$0,t$jscomp$0,n){function a(e){var t\x3d0\x3ee?~e:e;(i[t]||(i[t]\x3d[])).push({i:e,g:r})}function u(e){e.forEach(a)}function s(e){e.forEach(u)}var r,o\x3d[],i\x3d[];return function e(t){switch(r\x3dt,t.type){case \x22GeometryCollection\x22:t.geometries.forEach(e);break;case \x22LineString\x22:u(t.arcs);\nbreak;case \x22MultiLineString\x22:case \x22Polygon\x22:s(t.arcs);break;case \x22MultiPolygon\x22:t.arcs.forEach(s),!0}}(t$jscomp$0),i.forEach(null\x3d\x3dn?function(e){o.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)\x26\x26o.push(e[0].i)}),o}function L(e,n){let r,o,i,a;return e\x3dP(e,n),n\x26\x26n.feature?(r\x3dE,i\x3dn.feature):n\x26\x26n.mesh?(r\x3dU,i\x3dn.mesh,a\x3dD[n.filter]):t$jscomp$2.error(\x22Missing TopoJSON feature or mesh parameter.\x22),o\x3d(o\x3de.objects[i])?r(e,o,a):t$jscomp$2.error(\x22Invalid TopoJSON object: \x22+i),o\x26\x26o.features||[o]}function J(e,\nn){return 1\x3carguments.length?(I[e]\x3dn,this):t$jscomp$2.hasOwnProperty(I,e)?I[e]:null}const r$jscomp$2\x3d/^([A-Za-z]+:)?\\/\\//,o$jscomp$2\x3d/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i,i$jscomp$1\x3d/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g,h$jscomp$0\x3de\x3d\x3e!(Number.isNaN(+e)||e instanceof Date),d\x3d{boolean:t$jscomp$2.toBoolean,integer:t$jscomp$2.toNumber,number:t$jscomp$2.toNumber,date:t$jscomp$2.toDate,string:t$jscomp$2.toString,unknown:t$jscomp$2.identity},\ng\x3d[e\x3d\x3e\x22true\x22\x3d\x3d\x3de||\x22false\x22\x3d\x3d\x3de||!0\x3d\x3d\x3de||!1\x3d\x3d\x3de,e\x3d\x3eh$jscomp$0(e)\x26\x26Number.isInteger(+e),h$jscomp$0,e\x3d\x3e!Number.isNaN(Date.parse(e))],m\x3d[\x22boolean\x22,\x22integer\x22,\x22number\x22,\x22date\x22];var b\x3d{},T\x3d{};O.responseType\x3d\x22text\x22;P.responseType\x3d\x22json\x22;const D\x3d{interior:(e,t)\x3d\x3ee!\x3d\x3dt,exterior:(e,t)\x3d\x3ee\x3d\x3d\x3dt};L.responseType\x3d\x22json\x22;const I\x3d{dsv:O,csv:x(\x22,\x22),tsv:x(\x22\\t\x22),json:P,topojson:L},R\x3dfunction(e,t){return n\x3d\x3e({options:n||{},sanitize:s$jscomp$0,load:u$jscomp$1,fileAccess:!!t,file:c$jscomp$0(t),http:l$jscomp$0(e)})}(\x22undefined\x22!\x3d\ntypeof fetch\x26\x26fetch,null);e$jscomp$3.format\x3dI;e$jscomp$3.formats\x3dJ;e$jscomp$3.inferType\x3dy;e$jscomp$3.inferTypes\x3dv;e$jscomp$3.loader\x3dR;e$jscomp$3.read\x3dfunction(e$jscomp$1,r$jscomp$0,o$jscomp$0,i$jscomp$0){const a\x3dJ((r$jscomp$0\x3dr$jscomp$0||{}).type||\x22json\x22);return a||t$jscomp$2.error(\x22Unknown data format type: \x22+r$jscomp$0.type),e$jscomp$1\x3da(e$jscomp$1,r$jscomp$0),r$jscomp$0.parse\x26\x26function(e$jscomp$0,t,r,o){if(e$jscomp$0.length){var i\x3dn$jscomp$2.timeFormatDefaultLocale();r\x3dr||i.timeParse;o\x3do||i.utcParse;\nvar c,l,p\x3de$jscomp$0.columns||Object.keys(e$jscomp$0[0]);\x22auto\x22\x3d\x3d\x3dt\x26\x26(t\x3dv(e$jscomp$0,p));p\x3dObject.keys(t);var h\x3dp.map(e\x3d\x3e{var n\x3dt[e];if(n\x26\x26(n.startsWith(\x22date:\x22)||n.startsWith(\x22utc:\x22)))return e\x3dn.split(/:(.+)?/,2),n\x3de[1],(\x22\x27\x22\x3d\x3d\x3dn[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dn[n.length-1]||\x27\x22\x27\x3d\x3d\x3dn[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dn[n.length-1])\x26\x26(n\x3dn.slice(1,-1)),(\x22utc\x22\x3d\x3d\x3de[0]?o:r)(n);if(!d[n])throw Error(\x22Illegal format pattern: \x22+e+\x22:\x22+n);return d[n]});var s\x3d0;var f\x3de$jscomp$0.length;for(l\x3dp.length;s\x3cf;++s)for(i\x3de$jscomp$0[s],c\x3d0;c\x3cl;++c){var u\x3dp[c];i[u]\x3d\nh[c](i[u])}}}(e$jscomp$1,r$jscomp$0.parse,o$jscomp$0,i$jscomp$0),t$jscomp$2.hasOwnProperty(e$jscomp$1,\x22columns\x22)\x26\x26delete e$jscomp$1.columns,e$jscomp$1};e$jscomp$3.responseType\x3dfunction(e){return(e\x3dJ(e))\x26\x26e.responseType||\x22text\x22};e$jscomp$3.typeParsers\x3dd;Object.defineProperty(e$jscomp$3,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_dataflow$build$vega_dataflow.js", true , "shadow$provide.module$node_modules$vega_dataflow$build$vega_dataflow\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_loader$build$vega_loader_min\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-loader\x22,\n\x22vega-format\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,vegaLoader,vegaFormat){function UniqueList(idFunc){const $\x3didFunc||vegaUtil.identity,list\x3d[],ids\x3d{};list.add\x3d_\x3d\x3e{const id\x3d$(_);ids[id]||(ids[id]\x3d1,list.push(_));return list};list.remove\x3d_\x3d\x3e{const id\x3d$(_);ids[id]\x26\x26(ids[id]\x3d0,_\x3dlist.indexOf(_),0\x3c\x3d_\x26\x26list.splice(_,1));return list};return list}function asyncCallback(df,callback){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{yield callback(df)}catch(err){df.error(err)}})}\nfunction ingest$1(datum){datum\x3ddatum\x3d\x3d\x3dObject(datum)?datum:{data:datum};if(!datum[TUPLE_ID_KEY]){var id\x3dTUPLE_ID++;datum[TUPLE_ID_KEY]\x3did}return datum}function rederive(t,d){for(const k in t)d[k]\x3dt[k];return d}function isChangeSet(v){return v\x26\x26v.constructor\x3d\x3d\x3dchangeset}function changeset(){const add\x3d[],rem\x3d[],mod\x3d[],remp\x3d[],modp\x3d[];let clean\x3dnull,reflow\x3d!1;return{constructor:changeset,insert(t){t\x3dvegaUtil.array(t);const n\x3dt.length;for(let i\x3d0;i\x3cn;++i)add.push(t[i]);return this},remove(t){const a\x3d\nvegaUtil.isFunction(t)?remp:rem;t\x3dvegaUtil.array(t);const n\x3dt.length;for(let i\x3d0;i\x3cn;++i)a.push(t[i]);return this},modify(t,field,value){field\x3d{field,value:vegaUtil.constant(value)};vegaUtil.isFunction(t)?(field.filter\x3dt,modp.push(field)):(field.tuple\x3dt,mod.push(field));return this},encode(t,set){vegaUtil.isFunction(t)?modp.push({filter:t,field:set}):mod.push({tuple:t,field:set});return this},clean(value){clean\x3dvalue;return this},reflow(){reflow\x3d!0;return this},pulse(pulse,tuples){function modify(t,\nf,v){v?t[f]\x3dv(t):pulse.encode\x3df;reflow||(out[t[TUPLE_ID_KEY]]\x3dt)}const cur\x3d{},out\x3d{};let i,n,m,f$jscomp$0,t$jscomp$0,id;i\x3d0;for(n\x3dtuples.length;i\x3cn;++i)cur[tuples[i][TUPLE_ID_KEY]]\x3d1;i\x3d0;for(n\x3drem.length;i\x3cn;++i)t$jscomp$0\x3drem[i],cur[t$jscomp$0[TUPLE_ID_KEY]]\x3d-1;i\x3d0;for(n\x3dremp.length;i\x3cn;++i)f$jscomp$0\x3dremp[i],tuples.forEach(t\x3d\x3e{f$jscomp$0(t)\x26\x26(cur[t[TUPLE_ID_KEY]]\x3d-1)});i\x3d0;for(n\x3dadd.length;i\x3cn;++i)t$jscomp$0\x3dadd[i],id\x3dt$jscomp$0[TUPLE_ID_KEY],cur[id]?cur[id]\x3d1:pulse.add.push(ingest$1(add[i]));i\x3d\n0;for(n\x3dtuples.length;i\x3cn;++i)t$jscomp$0\x3dtuples[i],0\x3ecur[t$jscomp$0[TUPLE_ID_KEY]]\x26\x26pulse.rem.push(t$jscomp$0);i\x3d0;for(n\x3dmod.length;i\x3cn;++i)m\x3dmod[i],t$jscomp$0\x3dm.tuple,f$jscomp$0\x3dm.field,id\x3dcur[t$jscomp$0[TUPLE_ID_KEY]],0\x3cid\x26\x26(modify(t$jscomp$0,f$jscomp$0,m.value),pulse.modifies(f$jscomp$0));i\x3d0;for(n\x3dmodp.length;i\x3cn;++i)m\x3dmodp[i],f$jscomp$0\x3dm.filter,tuples.forEach(t\x3d\x3e{f$jscomp$0(t)\x26\x260\x3ccur[t[TUPLE_ID_KEY]]\x26\x26modify(t,m.field,m.value)}),pulse.modifies(m.field);if(reflow)pulse.mod\x3drem.length||remp.length?\ntuples.filter(t\x3d\x3e0\x3ccur[t[TUPLE_ID_KEY]]):tuples.slice();else for(id in out)pulse.mod.push(out[id]);(clean||null\x3d\x3dclean\x26\x26(rem.length||remp.length))\x26\x26pulse.clean(!0);return pulse}}}function Parameters(){Object.defineProperty(this,\x22_:mod:_\x22,{writable:!0,value:{}})}function Operator(init,update,params,react){this.id\x3d++OP_ID;this.value\x3dinit;this.qrank\x3dthis.rank\x3dthis.stamp\x3d-1;this.flags\x3d0;update\x26\x26(this._update\x3dupdate);params\x26\x26this.parameters(params,react)}function flag(bit){return function(state){const f\x3d\nthis.flags;if(0\x3d\x3d\x3darguments.length)return!!(f\x26bit);this.flags\x3dstate?f|bit:f\x26~bit;return this}}function EventStream(filter,apply,receive){this.id\x3d++STREAM_ID;this.value\x3dnull;receive\x26\x26(this.receive\x3dreceive);filter\x26\x26(this._filter\x3dfilter);apply\x26\x26(this._apply\x3dapply)}function stream$jscomp$0(filter,apply,receive){return new EventStream(filter,apply,receive)}function loadPending(df){let accept;const pending\x3dnew Promise(a\x3d\x3eaccept\x3da);pending.requests\x3d0;pending.done\x3d()\x3d\x3e{0\x3d\x3d\x3d--pending.requests\x26\x26(df._pending\x3d\nnull,accept(df))};return df._pending\x3dpending}function onStream(df,stream,target,update,params,options){const opt\x3dvegaUtil.extend({},options,SKIP);let op;vegaUtil.isFunction(target)||(target\x3dvegaUtil.constant(target));void 0\x3d\x3d\x3dupdate?params\x3de\x3d\x3edf.touch(target(e)):vegaUtil.isFunction(update)?(op\x3dnew Operator(null,update,params,!1),params\x3de\x3d\x3e{op.evaluate(e);e\x3dtarget(e);const v\x3dop.value;isChangeSet(v)?df.pulse(e,v,options):df.update(e,v,opt)}):params\x3de\x3d\x3edf.update(target(e),update,opt);stream.apply(params)}\nfunction onOperator(df,source,target,update,params,options){void 0\x3d\x3d\x3dupdate?source.targets().add(target):(options\x3doptions||{},update\x3dnew Operator(null,updater(target,update),params,!1),update.modified(options.force),update.rank\x3dsource.rank,source.targets().add(update),target\x26\x26(update.skip(!0),update.value\x3dtarget.value,update.targets().add(target),df.connect(target,[update])))}function updater(target,update){update\x3dvegaUtil.isFunction(update)?update:vegaUtil.constant(update);return target?function(_,\npulse){_\x3dupdate(_,pulse);target.skip()||(target.skip(_!\x3d\x3dthis.value).value\x3d_);return _}:update}function Pulse(dataflow,stamp,encode){this.dataflow\x3ddataflow;this.stamp\x3dnull\x3d\x3dstamp?-1:stamp;this.add\x3d[];this.rem\x3d[];this.mod\x3d[];this.fields\x3dnull;this.encode\x3dencode||null}function materialize(data,filter){const out\x3d[];vegaUtil.visitArray(data,filter,_\x3d\x3eout.push(_));return out}function filter$jscomp$0(pulse,flags){const map\x3d{};pulse.visit(flags,t\x3d\x3e{map[t[TUPLE_ID_KEY]]\x3d1});return t\x3d\x3emap[t[TUPLE_ID_KEY]]?\nnull:t}function addFilter(a,b){return a?(t,i)\x3d\x3ea(t,i)\x26\x26b(t,i):b}function MultiPulse(dataflow,stamp,pulses,encode){const n\x3dpulses.length;let c\x3d0;this.dataflow\x3ddataflow;this.stamp\x3dstamp;this.fields\x3dnull;this.encode\x3dencode||null;this.pulses\x3dpulses;for(dataflow\x3d0;dataflow\x3cn;++dataflow)if(encode\x3dpulses[dataflow],encode.stamp\x3d\x3d\x3dstamp){if(encode.fields){const hash\x3dthis.fields||(this.fields\x3d{});for(const f in encode.fields)hash[f]\x3d1}encode.changed(this.ADD)\x26\x26(c|\x3dthis.ADD);encode.changed(this.REM)\x26\x26(c|\x3dthis.REM);\nencode.changed(this.MOD)\x26\x26(c|\x3dthis.MOD)}this.changes\x3dc}function reentrant(df){df.error(\x22Dataflow already running. Use runAsync() to chain invocations.\x22);return df}function singlePulse(p,s){if(s\x26\x26s.stamp\x3d\x3d\x3dp.stamp)return s;p\x3dp.fork();s\x26\x26s!\x3d\x3dStopPropagation\x26\x26(p.source\x3ds.source);return p}function Heap(cmp){let nodes\x3d[];return{clear:()\x3d\x3enodes\x3d[],size:()\x3d\x3enodes.length,peek:()\x3d\x3enodes[0],push:x\x3d\x3e{nodes.push(x);return siftdown(nodes,0,nodes.length-1,cmp)},pop:()\x3d\x3e{var last\x3dnodes.pop();let item$jscomp$0;if(nodes.length){item$jscomp$0\x3d\nnodes[0];nodes[0]\x3dlast;{last\x3dnodes;var idx\x3d0;const start\x3didx,end\x3dlast.length,item\x3dlast[idx];let cidx\x3d(idx\x3c\x3c1)+1,ridx;for(;cidx\x3cend;)ridx\x3dcidx+1,ridx\x3cend\x26\x260\x3c\x3dcmp(last[cidx],last[ridx])\x26\x26(cidx\x3dridx),last[idx]\x3dlast[cidx],idx\x3dcidx,cidx\x3d(idx\x3c\x3c1)+1;last[idx]\x3ditem;siftdown(last,start,idx,cmp)}}else item$jscomp$0\x3dlast;return item$jscomp$0}}}function siftdown(array,start,idx,cmp){let parent,pidx;const item\x3darray[idx];for(;idx\x3estart;)if(pidx\x3didx-1\x3e\x3e1,parent\x3darray[pidx],0\x3ecmp(item,parent))array[idx]\x3dparent,\nidx\x3dpidx;else break;return array[idx]\x3ditem}function Dataflow(){this.logger(vegaUtil.logger());this.logLevel(vegaUtil.Error);this._rank\x3dthis._clock\x3d0;this._locale\x3dvegaFormat.defaultLocale();try{this._loader\x3dvegaLoader.loader()}catch(e){}this._touched\x3dUniqueList(vegaUtil.id);this._input\x3d{};this._pulse\x3dnull;this._heap\x3dHeap((a,b)\x3d\x3ea.qrank-b.qrank);this._postrun\x3d[]}function logMethod(method){return function(){return this._log[method].apply(this,arguments)}}function Transform(init,params){Operator.call(this,\ninit,null,params)}function transform(type){type\x3dtype\x26\x26type.toLowerCase();return vegaUtil.hasOwnProperty(transforms,type)?transforms[type]:null}const TUPLE_ID_KEY\x3dSymbol(\x22vega_id\x22);let TUPLE_ID\x3d1;Parameters.prototype\x3d{set(name,index,value,force){const v\x3dthis[name],mod\x3dthis[\x22_:mod:_\x22];if(null!\x3dindex\x26\x260\x3c\x3dindex){if(v[index]!\x3d\x3dvalue||force)v[index]\x3dvalue,mod[index+\x22:\x22+name]\x3d-1,mod[name]\x3d-1}else if(v!\x3d\x3dvalue||force)this[name]\x3dvalue,mod[name]\x3dvegaUtil.isArray(value)?1+value.length:-1;return this},modified(name,\nindex){const mod\x3dthis[\x22_:mod:_\x22];if(!arguments.length){for(var k in mod)if(mod[k])return!0;return!1}if(vegaUtil.isArray(name)){for(k\x3d0;k\x3cname.length;++k)if(mod[name[k]])return!0;return!1}return null!\x3dindex\x26\x260\x3c\x3dindex?index+1\x3cmod[name]||!!mod[index+\x22:\x22+name]:!!mod[name]},clear(){this[\x22_:mod:_\x22]\x3d{};return this}};let OP_ID\x3d0;const NO_PARAMS\x3dnew Parameters;Operator.prototype\x3d{targets(){return this._targets||(this._targets\x3dUniqueList(vegaUtil.id))},set(value){return this.value!\x3d\x3dvalue?(this.value\x3dvalue,\n1):0},skip:flag(1),modified:flag(2),parameters(params,react,initonly){react\x3d!1!\x3d\x3dreact;const argval\x3dthis._argval\x3dthis._argval||new Parameters,argops\x3dthis._argops\x3dthis._argops||[],deps\x3d[];let name$jscomp$0,value$jscomp$0,n,i;const add\x3d(name,index,value)\x3d\x3e{value instanceof Operator?(value!\x3d\x3dthis\x26\x26(react\x26\x26value.targets().add(this),deps.push(value)),argops.push({op:value,name,index})):argval.set(name,index,value)};for(name$jscomp$0 in params)if(value$jscomp$0\x3dparams[name$jscomp$0],\x22pulse\x22\x3d\x3d\x3dname$jscomp$0)vegaUtil.array(value$jscomp$0).forEach(op\x3d\x3e\n{op instanceof Operator?op!\x3d\x3dthis\x26\x26(op.targets().add(this),deps.push(op)):vegaUtil.error(\x22Pulse parameters must be operator instances.\x22)}),this.source\x3dvalue$jscomp$0;else if(vegaUtil.isArray(value$jscomp$0))for(argval.set(name$jscomp$0,-1,Array(n\x3dvalue$jscomp$0.length)),i\x3d0;i\x3cn;++i)add(name$jscomp$0,i,value$jscomp$0[i]);else add(name$jscomp$0,-1,value$jscomp$0);this.marshall().clear();initonly\x26\x26(argops.initonly\x3d!0);return deps},marshall(stamp){const argval\x3dthis._argval||NO_PARAMS,argops\x3dthis._argops;\nlet item,i,op,mod;if(argops){const n\x3dargops.length;for(i\x3d0;i\x3cn;++i)item\x3dargops[i],op\x3ditem.op,mod\x3dop.modified()\x26\x26op.stamp\x3d\x3d\x3dstamp,argval.set(item.name,item.index,op.value,mod);if(argops.initonly){for(i\x3d0;i\x3cn;++i)item\x3dargops[i],item.op.targets().remove(this);this._update\x3dthis._argops\x3dnull}}return argval},detach(){const argops\x3dthis._argops;let i,n;if(argops)for(i\x3d0,n\x3dargops.length;i\x3cn;++i){var item\x3dargops[i];item\x3ditem.op;item._targets\x26\x26item._targets.remove(this)}this.source\x3dthis.pulse\x3dnull},evaluate(pulse){var update\x3d\nthis._update;if(update){const params\x3dthis.marshall(pulse.stamp);update\x3dupdate.call(this,params,pulse);params.clear();if(update!\x3d\x3dthis.value)this.value\x3dupdate;else if(!this.modified())return pulse.StopPropagation}},run(pulse){if(pulse.stamp\x3cthis.stamp)return pulse.StopPropagation;let rv;this.skip()?(this.skip(!1),rv\x3d0):rv\x3dthis.evaluate(pulse);return this.pulse\x3drv||pulse}};let STREAM_ID\x3d0;EventStream.prototype\x3d{_filter:vegaUtil.truthy,_apply:vegaUtil.identity,targets(){return this._targets||(this._targets\x3d\nUniqueList(vegaUtil.id))},consume(_){if(!arguments.length)return!!this._consume;this._consume\x3d!!_;return this},receive(evt){if(this._filter(evt)){const val\x3dthis.value\x3dthis._apply(evt),trg\x3dthis._targets,n\x3dtrg?trg.length:0;for(let i\x3d0;i\x3cn;++i)trg[i].receive(val);this._consume\x26\x26(evt.preventDefault(),evt.stopPropagation())}},filter(filter){filter\x3dstream$jscomp$0(filter);this.targets().add(filter);return filter},apply(apply){apply\x3dstream$jscomp$0(null,apply);this.targets().add(apply);return apply},merge(){const s\x3d\nstream$jscomp$0();this.targets().add(s);for(let i\x3d0,n\x3darguments.length;i\x3cn;++i)arguments[i].targets().add(s);return s},throttle(pause){let t\x3d-1;return this.filter(()\x3d\x3e{const now\x3dDate.now();return now-t\x3epause?(t\x3dnow,1):0})},debounce(delay){const s\x3dstream$jscomp$0();this.targets().add(stream$jscomp$0(null,null,vegaUtil.debounce(delay,e\x3d\x3e{const df\x3de.dataflow;s.receive(e);df\x26\x26df.run\x26\x26df.run()})));return s},between(a,b){let active\x3d!1;a.targets().add(stream$jscomp$0(null,null,()\x3d\x3eactive\x3d!0));b.targets().add(stream$jscomp$0(null,\nnull,()\x3d\x3eactive\x3d!1));return this.filter(()\x3d\x3eactive)},detach(){this._filter\x3dvegaUtil.truthy;this._targets\x3dnull}};const SKIP\x3d{skip:!0},StopPropagation\x3d{};Pulse.prototype\x3d{StopPropagation,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(flags){return(new Pulse(this.dataflow)).init(this,flags)},clone(){const p\x3dthis.fork(7);p.add\x3dp.add.slice();p.rem\x3dp.rem.slice();p.mod\x3dp.mod.slice();p.source\x26\x26(p.source\x3dp.source.slice());return p.materialize(23)},addAll(){let p\x3d\nthis;p.source\x26\x26p.add!\x3d\x3dp.rem\x26\x26(p.rem.length||p.source.length!\x3d\x3dp.add.length)\x26\x26(p\x3d(new Pulse(this.dataflow)).init(this),p.add\x3dp.source,p.rem\x3d[]);return p},init(src,flags){this.stamp\x3dsrc.stamp;this.encode\x3dsrc.encode;!src.fields||flags\x2664||(this.fields\x3dsrc.fields);flags\x261?(this.addF\x3dsrc.addF,this.add\x3dsrc.add):(this.addF\x3dnull,this.add\x3d[]);flags\x262?(this.remF\x3dsrc.remF,this.rem\x3dsrc.rem):(this.remF\x3dnull,this.rem\x3d[]);flags\x264?(this.modF\x3dsrc.modF,this.mod\x3dsrc.mod):(this.modF\x3dnull,this.mod\x3d[]);flags\x2632?this.source\x3d\nthis.srcF\x3dnull:(this.srcF\x3dsrc.srcF,this.source\x3dsrc.source,src.cleans\x26\x26(this.cleans\x3dsrc.cleans));return this},runAfter(func){this.dataflow.runAfter(func)},changed(flags){flags\x3dflags||7;return flags\x261\x26\x26this.add.length||flags\x262\x26\x26this.rem.length||flags\x264\x26\x26this.mod.length},reflow(fork){if(fork)return this.fork(7).reflow();fork\x3dthis.add.length;const src\x3dthis.source\x26\x26this.source.length;src\x26\x26src!\x3d\x3dfork\x26\x26(this.mod\x3dthis.source,fork\x26\x26this.filter(4,filter$jscomp$0(this,1)));return this},clean(value){return arguments.length?\n(this.cleans\x3d!!value,this):this.cleans},modifies(_){const hash\x3dthis.fields||(this.fields\x3d{});vegaUtil.isArray(_)?_.forEach(f\x3d\x3ehash[f]\x3d!0):hash[_]\x3d!0;return this},modified(_,nomod){const fields\x3dthis.fields;return(nomod||this.mod.length)\x26\x26fields?arguments.length?vegaUtil.isArray(_)?_.some(f\x3d\x3efields[f]):fields[_]:!!fields:!1},filter(flags,filter){flags\x261\x26\x26(this.addF\x3daddFilter(this.addF,filter));flags\x262\x26\x26(this.remF\x3daddFilter(this.remF,filter));flags\x264\x26\x26(this.modF\x3daddFilter(this.modF,filter));flags\x2616\x26\x26\n(this.srcF\x3daddFilter(this.srcF,filter));return this},materialize(flags){flags\x3dflags||7;flags\x261\x26\x26this.addF\x26\x26(this.add\x3dmaterialize(this.add,this.addF),this.addF\x3dnull);flags\x262\x26\x26this.remF\x26\x26(this.rem\x3dmaterialize(this.rem,this.remF),this.remF\x3dnull);flags\x264\x26\x26this.modF\x26\x26(this.mod\x3dmaterialize(this.mod,this.modF),this.modF\x3dnull);flags\x2616\x26\x26this.srcF\x26\x26(this.source\x3dthis.source.filter(this.srcF),this.srcF\x3dnull);return this},visit(flags,visitor){if(flags\x2616)return vegaUtil.visitArray(this.source,this.srcF,visitor),\nthis;flags\x261\x26\x26vegaUtil.visitArray(this.add,this.addF,visitor);flags\x262\x26\x26vegaUtil.visitArray(this.rem,this.remF,visitor);flags\x264\x26\x26vegaUtil.visitArray(this.mod,this.modF,visitor);const src\x3dthis.source;flags\x268\x26\x26src\x26\x26(flags\x3dthis.add.length+this.mod.length,flags!\x3d\x3dsrc.length\x26\x26(flags?vegaUtil.visitArray(src,filter$jscomp$0(this,5),visitor):vegaUtil.visitArray(src,this.srcF,visitor)));return this}};vegaUtil.inherits(MultiPulse,Pulse,{fork(flags){const p\x3d(new Pulse(this.dataflow)).init(this,flags\x26this.NO_FIELDS);\nvoid 0!\x3d\x3dflags\x26\x26(flags\x26p.ADD\x26\x26this.visit(p.ADD,t\x3d\x3ep.add.push(t)),flags\x26p.REM\x26\x26this.visit(p.REM,t\x3d\x3ep.rem.push(t)),flags\x26p.MOD\x26\x26this.visit(p.MOD,t\x3d\x3ep.mod.push(t)));return p},changed(flags){return this.changes\x26flags},modified(_){const fields\x3dthis.fields;return fields\x26\x26this.changes\x26this.MOD?vegaUtil.isArray(_)?_.some(f\x3d\x3efields[f]):fields[_]:0},filter(){vegaUtil.error(\x22MultiPulse does not support filtering.\x22)},materialize(){vegaUtil.error(\x22MultiPulse does not support materialization.\x22)},visit(flags,visitor){const pulses\x3d\nthis.pulses,n\x3dpulses.length;let i\x3d0;if(flags\x26this.SOURCE)for(;i\x3cn;++i)pulses[i].visit(flags,visitor);else for(;i\x3cn;++i)pulses[i].stamp\x3d\x3d\x3dthis.stamp\x26\x26pulses[i].visit(flags,visitor);return this}});const NO_OPT\x3d{skip:!1,force:!1};Dataflow.prototype\x3d{stamp(){return this._clock},loader(_){return arguments.length?(this._loader\x3d_,this):this._loader},locale(_){return arguments.length?(this._locale\x3d_,this):this._locale},logger(logger){return arguments.length?(this._log\x3dlogger,this):this._log},error:logMethod(\x22error\x22),\nwarn:logMethod(\x22warn\x22),info:logMethod(\x22info\x22),debug:logMethod(\x22debug\x22),logLevel:logMethod(\x22level\x22),cleanThreshold:1E4,add:function(init,update,params,react){let shift\x3d1;init instanceof Operator||(init\x26\x26init.prototype instanceof Operator?init\x3dnew init:vegaUtil.isFunction(init)?init\x3dnew Operator(null,init):(shift\x3d0,init\x3dnew Operator(init,update)));this.rank(init);shift\x26\x26(react\x3dparams,params\x3dupdate);params\x26\x26this.connect(init,init.parameters(params,react));this.touch(init);return init},connect:function(target,\nsources){const targetRank\x3dtarget.rank,n\x3dsources.length;for(let i\x3d0;i\x3cn;++i)if(targetRank\x3csources[i].rank){this.rerank(target);break}},rank:function(op){op.rank\x3d++this._rank},rerank:function(op){const queue\x3d[op];let cur,list,i;for(;queue.length;)if(this.rank(cur\x3dqueue.pop()),list\x3dcur._targets)for(i\x3dlist.length;0\x3c\x3d--i;)queue.push(cur\x3dlist[i]),cur\x3d\x3d\x3dop\x26\x26vegaUtil.error(\x22Cycle detected in dataflow graph.\x22)},pulse:function(op,changeset,options){this.touch(op,options||NO_OPT);options\x3dnew Pulse(this,this._clock+\n(this._pulse?0:1));const t\x3dop.pulse\x26\x26op.pulse.source||[];options.target\x3dop;this._input[op.id]\x3dchangeset.pulse(options,t);return this},touch:function(op,options){options\x3doptions||NO_OPT;this._pulse?this._enqueue(op):this._touched.add(op);options.skip\x26\x26op.skip(!0);return this},update:function(op,value,options){options\x3doptions||NO_OPT;(op.set(value)||options.force)\x26\x26this.touch(op,options);return this},changeset,ingest:function(target,data,format){data\x3dthis.parse(data,format);return this.pulse(target,\nthis.changeset().insert(data))},parse:function(data,format){const locale\x3dthis.locale();return vegaLoader.read(data,format,locale.timeParse,locale.utcParse)},preload:function(target,url,format){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const pending\x3d$jscomp$async$this._pending||loadPending($jscomp$async$this);pending.requests+\x3d1;const res\x3dyield $jscomp$async$this.request(url,format);$jscomp$async$this.pulse(target,$jscomp$async$this.changeset().remove(vegaUtil.truthy).insert(res.data||\n[]));pending.done();return res})},request:function(url,format){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){let status\x3d0,data;try{data\x3dyield $jscomp$async$this.loader().load(url,{context:\x22dataflow\x22,response:vegaLoader.responseType(format\x26\x26format.type)});try{data\x3d$jscomp$async$this.parse(data,format)}catch(err){status\x3d-2,$jscomp$async$this.warn(\x22Data ingestion failed\x22,url,err)}}catch(err){status\x3d-1,$jscomp$async$this.warn(\x22Loading failed\x22,url,err)}return{data,\nstatus}})},events:function(source,type,filter,apply){const df\x3dthis,s\x3dstream$jscomp$0(filter,apply);filter\x3dfunction(e){e.dataflow\x3ddf;try{s.receive(e)}catch(error){df.error(error)}finally{df.run()}};source\x3d\x22string\x22\x3d\x3d\x3dtypeof source\x26\x26\x22undefined\x22!\x3d\x3dtypeof document?document.querySelectorAll(source):vegaUtil.array(source);apply\x3dsource.length;for(let i\x3d0;i\x3capply;++i)source[i].addEventListener(type,filter);return s},on:function(source,target,update,params,options){(source instanceof Operator?onOperator:onStream)(this,\nsource,target,update,params,options);return this},evaluate:function(encode,prerun,postrun){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const async\x3d[];if($jscomp$async$this._pulse)return reentrant($jscomp$async$this);$jscomp$async$this._pending\x26\x26(yield $jscomp$async$this._pending);prerun\x26\x26(yield asyncCallback($jscomp$async$this,prerun));if(!$jscomp$async$this._touched.length)return $jscomp$async$this.debug(\x22Dataflow invoked, but nothing to do.\x22),$jscomp$async$this;\nvar stamp\x3d++$jscomp$async$this._clock;$jscomp$async$this._pulse\x3dnew Pulse($jscomp$async$this,stamp,encode);$jscomp$async$this._touched.forEach(op\x3d\x3e$jscomp$async$this._enqueue(op,!0));$jscomp$async$this._touched\x3dUniqueList(vegaUtil.id);var count\x3d0;let op$jscomp$0,next,error;try{for(;0\x3c$jscomp$async$this._heap.size();)op$jscomp$0\x3d$jscomp$async$this._heap.pop(),op$jscomp$0.rank!\x3d\x3dop$jscomp$0.qrank?$jscomp$async$this._enqueue(op$jscomp$0,!0):(next\x3dop$jscomp$0.run($jscomp$async$this._getPulse(op$jscomp$0,\nencode)),next.then?next\x3dyield next:next.async\x26\x26(async.push(next.async),next\x3dStopPropagation),next!\x3d\x3dStopPropagation\x26\x26op$jscomp$0._targets\x26\x26op$jscomp$0._targets.forEach(op\x3d\x3e$jscomp$async$this._enqueue(op)),++count)}catch(err){$jscomp$async$this._heap.clear(),error\x3derr}$jscomp$async$this._input\x3d{};$jscomp$async$this._pulse\x3dnull;$jscomp$async$this.debug(`Pulse ${stamp}: ${count} operators`);error\x26\x26($jscomp$async$this._postrun\x3d[],$jscomp$async$this.error(error));if($jscomp$async$this._postrun.length)for(stamp\x3d\n$jscomp$async$this._postrun.sort((a,b)\x3d\x3eb.priority-a.priority),$jscomp$async$this._postrun\x3d[],count\x3d0;count\x3cstamp.length;++count)yield asyncCallback($jscomp$async$this,stamp[count].callback);postrun\x26\x26(yield asyncCallback($jscomp$async$this,postrun));async.length\x26\x26Promise.all(async).then(cb\x3d\x3e$jscomp$async$this.runAsync(null,()\x3d\x3e{cb.forEach(f\x3d\x3e{try{f($jscomp$async$this)}catch(err){$jscomp$async$this.error(err)}})}));return $jscomp$async$this})},run:function(encode,prerun,postrun){return this._pulse?\nreentrant(this):(this.evaluate(encode,prerun,postrun),this)},runAsync:function(encode,prerun,postrun){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){for(;$jscomp$async$this._running;)yield $jscomp$async$this._running;const clear\x3d()\x3d\x3e$jscomp$async$this._running\x3dnull;($jscomp$async$this._running\x3d$jscomp$async$this.evaluate(encode,prerun,postrun)).then(clear,clear);return $jscomp$async$this._running})},runAfter:function(callback,enqueue,priority){if(this._pulse||\nenqueue)this._postrun.push({priority:priority||0,callback});else try{callback(this)}catch(err){this.error(err)}},_enqueue:function(op,force){const q\x3dop.stamp\x3cthis._clock;q\x26\x26(op.stamp\x3dthis._clock);if(q||force)op.qrank\x3dop.rank,this._heap.push(op)},_getPulse:function(op,encode){const s\x3dop.source,stamp\x3dthis._clock;return s\x26\x26vegaUtil.isArray(s)?new MultiPulse(this,stamp,s.map(_\x3d\x3e_.pulse),encode):this._input[op.id]||singlePulse(this._pulse,s\x26\x26s.pulse)}};vegaUtil.inherits(Transform,Operator,{run(pulse){if(pulse.stamp\x3c\nthis.stamp)return pulse.StopPropagation;let rv;this.skip()?this.skip(!1):rv\x3dthis.evaluate(pulse);rv\x3drv||pulse;rv.then?rv\x3drv.then(_\x3d\x3ethis.pulse\x3d_):rv!\x3d\x3dpulse.StopPropagation\x26\x26(this.pulse\x3drv);return rv},evaluate(pulse){const params\x3dthis.marshall(pulse.stamp);pulse\x3dthis.transform(params,pulse);params.clear();return pulse},transform(){}});const transforms\x3d{};exports.Dataflow\x3dDataflow;exports.EventStream\x3dEventStream;exports.MultiPulse\x3dMultiPulse;exports.Operator\x3dOperator;exports.Parameters\x3dParameters;\nexports.Pulse\x3dPulse;exports.Transform\x3dTransform;exports.UniqueList\x3dUniqueList;exports.asyncCallback\x3dasyncCallback;exports.changeset\x3dchangeset;exports.definition\x3dfunction(type){return(type\x3dtransform(type))\x26\x26type.Definition||null};exports.derive\x3dfunction(t){return rederive(t,ingest$1({}))};exports.ingest\x3dingest$1;exports.isChangeSet\x3disChangeSet;exports.isTuple\x3dfunction(t){return!(!t||!t[TUPLE_ID_KEY])};exports.rederive\x3drederive;exports.replace\x3dfunction(t,d){d[TUPLE_ID_KEY]\x3dt[TUPLE_ID_KEY];return d};\nexports.stableCompare\x3dfunction(cmp,f){return cmp?f?(a,b)\x3d\x3ecmp(a,b)||f(a)[TUPLE_ID_KEY]-f(b)[TUPLE_ID_KEY]:(a,b)\x3d\x3ecmp(a,b)||a[TUPLE_ID_KEY]-b[TUPLE_ID_KEY]:null};exports.transform\x3dtransform;exports.transforms\x3dtransforms;exports.tupleid\x3dfunction(t){return t[TUPLE_ID_KEY]};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_statistics$build$vega_statistics.js", true , "shadow$provide.module$node_modules$vega_statistics$build$vega_statistics\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.d3))})(this,function(exports,\nd3Array){function*numbers(values,valueof){if(null\x3d\x3dvalueof)for(var value$jscomp$0 of values)null!\x3dvalue$jscomp$0\x26\x26\x22\x22!\x3d\x3dvalue$jscomp$0\x26\x26(value$jscomp$0\x3d+value$jscomp$0)\x3e\x3dvalue$jscomp$0\x26\x26(yield value$jscomp$0);else{value$jscomp$0\x3d-1;for(let value of values)value\x3dvalueof(value,++value$jscomp$0,values),null!\x3dvalue\x26\x26\x22\x22!\x3d\x3dvalue\x26\x26(value\x3d+value)\x3e\x3dvalue\x26\x26(yield value)}}function quantiles(array,p,f){const values\x3dFloat64Array.from(numbers(array,f));values.sort(d3Array.ascending);return p.map(_\x3d\x3ed3Array.quantileSorted(values,\n_))}function quartiles(array,f){return quantiles(array,[.25,.5,.75],f)}function estimateBandwidth(array,f){const n\x3darray.length,d\x3dd3Array.deviation(array,f);array\x3dquartiles(array,f);return 1.06*(Math.min(d,(array[2]-array[0])/1.34)||d||Math.abs(array[0])||1)*Math.pow(n,-.2)}function smoothing(v,thresh){const n\x3dv.length;let a\x3d0,b\x3d1,c,d;for(;v[a]\x3d\x3d\x3dv[b];)++b;for(;b\x3cn;){for(c\x3db+1;v[b]\x3d\x3d\x3dv[c];)++c;if(v[b]-v[b-1]\x3cthresh){for(d\x3db+(a+c-b-b\x3e\x3e1);d\x3cb;)v[d++]\x3dv[b];for(;d\x3eb;)v[d--]\x3dv[a]}a\x3db;b\x3dc}return v}function sampleNormal(mean,\nstdev){mean\x3dmean||0;stdev\x3dnull\x3d\x3dstdev?1:stdev;let x,y;if(nextSample\x3d\x3d\x3dnextSample)x\x3dnextSample,nextSample\x3dNaN;else{do{x\x3d2*exports.random()-1;y\x3d2*exports.random()-1;var rds\x3dx*x+y*y}while(0\x3d\x3d\x3drds||1\x3crds);rds\x3dMath.sqrt(-2*Math.log(rds)/rds);x*\x3drds;nextSample\x3dy*rds}return mean+x*stdev}function densityNormal(value,mean,stdev){stdev\x3dnull\x3d\x3dstdev?1:stdev;value\x3d(value-(mean||0))/stdev;return Math.exp(-.5*value*value)/(stdev*SQRT2PI)}function cumulativeNormal(value,mean,stdev){value\x3d(value-(mean||0))/(null\x3d\x3d\nstdev?1:stdev);mean\x3dMath.abs(value);37\x3cmean?stdev\x3d0:(stdev\x3dMath.exp(-mean*mean/2),7.07106781186547\x3emean?(stdev*\x3d(((((.0352624965998911*mean+.700383064443688)*mean+6.37396220353165)*mean+33.912866078383)*mean+112.079291497871)*mean+221.213596169931)*mean+220.206867912376,stdev/\x3d((((((.0883883476483184*mean+1.75566716318264)*mean+16.064177579207)*mean+86.7807322029461)*mean+296.564248779674)*mean+637.333633378831)*mean+793.826512519948)*mean+440.413735824752):stdev\x3dstdev/(mean+1/(mean+2/(mean+3/(mean+\n4/(mean+.65)))))/2.506628274631);return 0\x3cvalue?1-stdev:stdev}function quantileNormal(p,mean,stdev){if(0\x3ep||1\x3cp)return NaN;p\x3d2*p-1;var w\x3d-Math.log((1-p)*(1+p));6.25\x3ew?(w-\x3d3.125,w\x3d1.6536545626831027+(.24015818242558962+(-.006033670871430149+(-7.40702534166267E-4+(1.8673420803405714E-4+(-1.3882523362786469E-5+(-1.3654692000834679E-6+(4.2347877827932404E-7+(-2.9070369957882005E-8+(-4.112633980346984E-9+(1.0512122733215323E-9+(-5.415412054294628E-11+(-1.2975133253453532E-11+(2.6335093153082323E-12+(-8.151934197605472E-14+\n(-4.054566272975207E-14+(6.637638134358324E-15+(2.0972767875968562E-17+(-1.333171662854621E-16+(1.1157877678025181E-17+(1.28584807152564E-18+(-1.6850591381820166E-19+-3.64441206401782E-21*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):16\x3ew?(w\x3dMath.sqrt(w)-3.25,w\x3d3.0838856104922208+(1.0052589676941592+(.005370914553590064+(-.003751208507569241+(.002491442096107851+(-.0016882755560235047+(9.532893797373805E-4+(-3.550375203628475E-4+(2.4031110387097894E-5+(6.828485145957318E-5+(-4.7318229009055734E-5+\n(1.2475304481671779E-5+(2.9234449089955446E-6+(-4.013867526981546E-6+(1.5027403968909828E-6+(1.8239629214389228E-8+(-2.7517406297064545E-7+(9.075656193888539E-8+2.2137376921775787E-9*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):Number.isFinite(w)?(w\x3dMath.sqrt(w)-5,w\x3d4.849906401408584+(1.0103004648645344+(-1.3871931833623122E-4+(-2.1503011930044477E-4+(7.599527703001776E-5+(-1.968177810553167E-5+(4.526062597223154E-6+(-9.9298272942317E-7+(2.2900482228026655E-7+(-6.771199775845234E-8+(2.914795345090108E-8+\n(-1.496002662714924E-8+(7.61570120807834E-9+(-3.789465440126737E-9+(1.5076572693500548E-9+(-2.555641816996525E-10+-2.7109920616438573E-11*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w)*w):w\x3dInfinity;p*\x3dw;return(mean||0)+(null\x3d\x3dstdev?1:stdev)*SQRT2*p}function gaussian(mean,stdev){let mu,sigma;const dist\x3d{mean(_){return arguments.length?(mu\x3d_||0,dist):mu},stdev(_){return arguments.length?(sigma\x3dnull\x3d\x3d_?1:_,dist):sigma},sample:()\x3d\x3esampleNormal(mu,sigma),pdf:value\x3d\x3edensityNormal(value,mu,sigma),cdf:value\x3d\x3e\ncumulativeNormal(value,mu,sigma),icdf:p\x3d\x3equantileNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)}function sampleLogNormal(mean,stdev){stdev\x3dnull\x3d\x3dstdev?1:stdev;return Math.exp((mean||0)+sampleNormal()*stdev)}function densityLogNormal(value,mean,stdev){if(0\x3e\x3dvalue)return 0;stdev\x3dnull\x3d\x3dstdev?1:stdev;mean\x3d(Math.log(value)-(mean||0))/stdev;return Math.exp(-.5*mean*mean)/(stdev*SQRT2PI*value)}function cumulativeLogNormal(value,mean,stdev){return cumulativeNormal(Math.log(value),mean,stdev)}function quantileLogNormal(p,\nmean,stdev){return Math.exp(quantileNormal(p,mean,stdev))}function sampleUniform(min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return min+(max-min)*exports.random()}function densityUniform(value,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return value\x3e\x3dmin\x26\x26value\x3c\x3dmax?1/(max-min):0}function cumulativeUniform(value,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return value\x3cmin?0:value\x3emax?1:(value-min)/(max-min)}function quantileUniform(p,min,max){null\x3d\x3dmax\x26\x26(max\x3dnull\x3d\x3dmin?1:min,min\x3d0);return 0\x3c\x3d\np\x26\x261\x3e\x3dp?min+p*(max-min):NaN}function ols(uX,uY,uXY,uX2){uX2-\x3duX*uX;uXY\x3d1E-24\x3eMath.abs(uX2)?0:(uXY-uX*uY)/uX2;return[uY-uXY*uX,uXY]}function points(data,x,y,sort){data\x3ddata.filter(d\x3d\x3e{let u\x3dx(d);d\x3dy(d);return null!\x3du\x26\x26(u\x3d+u)\x3e\x3du\x26\x26null!\x3dd\x26\x26(d\x3d+d)\x3e\x3dd});sort\x26\x26data.sort((a,b)\x3d\x3ex(a)-x(b));sort\x3ddata.length;const X\x3dnew Float64Array(sort),Y\x3dnew Float64Array(sort);let i\x3d0,ux\x3d0,uy\x3d0,yv,d$jscomp$0;for(d$jscomp$0 of data)X[i]\x3ddata\x3d+x(d$jscomp$0),Y[i]\x3dyv\x3d+y(d$jscomp$0),++i,ux+\x3d(data-ux)/i,uy+\x3d(yv-uy)/i;for(i\x3d0;i\x3c\nsort;++i)X[i]-\x3dux,Y[i]-\x3duy;return[X,Y,ux,uy]}function visitPoints(data,x,y,callback){let i\x3d-1,v;for(const d of data)data\x3dx(d),v\x3dy(d),null!\x3ddata\x26\x26(data\x3d+data)\x3e\x3ddata\x26\x26null!\x3dv\x26\x26(v\x3d+v)\x3e\x3dv\x26\x26callback(data,v,++i)}function rSquared(data,x,y,uY,predict){let SSE\x3d0,SST\x3d0;visitPoints(data,x,y,(dx,dy)\x3d\x3e{dx\x3ddy-predict(dx);dy-\x3duY;SSE+\x3ddx*dx;SST+\x3ddy*dy});return 1-SSE/SST}function linear(data,x$jscomp$0,y){let X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,n\x3d0;visitPoints(data,x$jscomp$0,y,(dx,dy)\x3d\x3e{++n;X+\x3d(dx-X)/n;Y+\x3d(dy-Y)/n;XY+\x3d(dx*dy-XY)/\nn;X2+\x3d(dx*dx-X2)/n});const coef\x3dols(X,Y,XY,X2),predict\x3dx\x3d\x3ecoef[0]+coef[1]*x;return{coef,predict,rSquared:rSquared(data,x$jscomp$0,y,Y,predict)}}function quad(data,x$jscomp$0,y){const [xv,yv,ux,uy]\x3dpoints(data,x$jscomp$0,y);var n\x3dxv.length,X2\x3d0;let X3\x3d0;var X4\x3d0;let XY\x3d0,X2Y\x3d0,i,dx,dy,x2;for(i\x3d0;i\x3cn;)dx\x3dxv[i],dy\x3dyv[i++],x2\x3ddx*dx,X2+\x3d(x2-X2)/i,X3+\x3d(x2*dx-X3)/i,X4+\x3d(x2*x2-X4)/i,XY+\x3d(dx*dy-XY)/i,X2Y+\x3d(x2*dy-X2Y)/i;n\x3dX4-X2*X2;X4\x3dX2*n-X3*X3;const a\x3d(X2Y*X2-XY*X3)/X4,b\x3d(XY*n-X2Y*X3)/X4,c\x3d-a*X2;X2\x3dx\x3d\x3e{x-\x3d\nux;return a*x*x+b*x+c+uy};return{coef:[c-b*ux+a*ux*ux+uy,b-2*a*ux,a],predict:X2,rSquared:rSquared(data,x$jscomp$0,y,uy,X2)}}function uncenter(k,a,x,y){const z\x3dArray(k);let i,v,c;for(i\x3d0;i\x3ck;++i)z[i]\x3d0;for(i\x3dk-1;0\x3c\x3di;--i)for(v\x3da[i],c\x3d1,z[i]+\x3dv,k\x3d1;k\x3c\x3di;++k)c*\x3d(i+1-k)/k,z[i-k]+\x3dv*Math.pow(x,k)*c;z[0]+\x3dy;return z}function gaussianElimination(matrix){const n\x3dmatrix.length-1,coef\x3d[];let i,j,k,r,t;for(i\x3d0;i\x3cn;++i){r\x3di;for(j\x3di+1;j\x3cn;++j)Math.abs(matrix[i][j])\x3eMath.abs(matrix[i][r])\x26\x26(r\x3dj);for(k\x3di;k\x3cn+1;++k)t\x3d\nmatrix[k][i],matrix[k][i]\x3dmatrix[k][r],matrix[k][r]\x3dt;for(j\x3di+1;j\x3cn;++j)for(k\x3dn;k\x3e\x3di;k--)matrix[k][j]-\x3dmatrix[k][i]*matrix[i][j]/matrix[i][i]}for(j\x3dn-1;0\x3c\x3dj;--j){t\x3d0;for(k\x3dj+1;k\x3cn;++k)t+\x3dmatrix[k][j]*coef[k];coef[j]\x3d(matrix[n][j]-t)/matrix[j][j]}return coef}exports.random\x3dMath.random;const SQRT2PI\x3dMath.sqrt(2*Math.PI),SQRT2\x3dMath.SQRT2;let nextSample\x3dNaN;const MIN_RADIANS\x3d.1*Math.PI/180;exports.bandwidthNRD\x3destimateBandwidth;exports.bin\x3dfunction(_){var maxb\x3d_.maxbins||20;const base\x3d_.base||10,logb\x3d\nMath.log(base),div\x3d_.divide||[5,2];let min\x3d_.extent[0],max\x3d_.extent[1];let minstep,v,i,n;const span\x3d_.span||max-min||Math.abs(min)||1;if(_.step)var step\x3d_.step;else if(_.steps){v\x3dspan/maxb;i\x3d0;for(n\x3d_.steps.length;i\x3cn\x26\x26_.steps[i]\x3cv;++i);step\x3d_.steps[Math.max(0,i-1)]}else{step\x3dMath.ceil(Math.log(maxb)/logb);minstep\x3d_.minstep||0;for(step\x3dMath.max(minstep,Math.pow(base,Math.round(Math.log(span)/logb)-step));Math.ceil(span/step)\x3emaxb;)step*\x3dbase;i\x3d0;for(n\x3ddiv.length;i\x3cn;++i)v\x3dstep/div[i],v\x3e\x3dminstep\x26\x26\nspan/v\x3c\x3dmaxb\x26\x26(step\x3dv)}v\x3dMath.log(step);maxb\x3dMath.pow(base,-(0\x3c\x3dv?0:~~(-v/logb)+1)-1);if(_.nice||void 0\x3d\x3d\x3d_.nice)v\x3dMath.floor(min/step+maxb)*step,min\x3dmin\x3cv?v-step:v,max\x3dMath.ceil(max/step)*step;return{start:min,stop:max\x3d\x3d\x3dmin?min+step:max,step}};exports.bootstrapCI\x3dfunction(array,samples,alpha,f){if(!array.length)return[void 0,void 0];array\x3dFloat64Array.from(numbers(array,f));f\x3darray.length;let a,i,j,mu;j\x3d0;for(mu\x3dArray(samples);j\x3csamples;++j){for(i\x3da\x3d0;i\x3cf;++i)a+\x3darray[~~(exports.random()*f)];mu[j]\x3d\na/f}mu.sort(d3Array.ascending);return[d3Array.quantile(mu,alpha/2),d3Array.quantile(mu,1-alpha/2)]};exports.cumulativeLogNormal\x3dcumulativeLogNormal;exports.cumulativeNormal\x3dcumulativeNormal;exports.cumulativeUniform\x3dcumulativeUniform;exports.densityLogNormal\x3ddensityLogNormal;exports.densityNormal\x3ddensityNormal;exports.densityUniform\x3ddensityUniform;exports.dotbin\x3dfunction(array,step,smooth,f){f\x3df||(_\x3d\x3e_);const n\x3darray.length,v\x3dnew Float64Array(n);let i\x3d0,j\x3d1,a\x3df(array[0]),b\x3da,w\x3da+step,x;for(;j\x3cn;++j){x\x3d\nf(array[j]);if(x\x3e\x3dw){for(b\x3d(a+b)/2;i\x3cj;++i)v[i]\x3db;w\x3dx+step;a\x3dx}b\x3dx}for(b\x3d(a+b)/2;i\x3cj;++i)v[i]\x3db;return smooth?smoothing(v,step+step/4):v};exports.quantileLogNormal\x3dquantileLogNormal;exports.quantileNormal\x3dquantileNormal;exports.quantileUniform\x3dquantileUniform;exports.quantiles\x3dquantiles;exports.quartiles\x3dquartiles;exports.randomInteger\x3dfunction(min,max){null\x3d\x3dmax\x26\x26(max\x3dmin,min\x3d0);let a,b,d;const dist\x3d{min(_){return arguments.length?(a\x3d_||0,d\x3db-a,dist):a},max(_){return arguments.length?(b\x3d_||0,d\x3db-\na,dist):b},sample(){return a+Math.floor(d*exports.random())},pdf(x){return x\x3d\x3d\x3dMath.floor(x)\x26\x26x\x3e\x3da\x26\x26x\x3cb?1/d:0},cdf(x){x\x3dMath.floor(x);return x\x3ca?0:x\x3e\x3db?1:(x-a+1)/d},icdf(p){return 0\x3c\x3dp\x26\x261\x3e\x3dp?a-1+Math.floor(p*d):NaN}};return dist.min(min).max(max)};exports.randomKDE\x3dfunction(support,bandwidth){const kernel\x3dgaussian();let n\x3d0;const dist\x3d{data(_){return arguments.length?(n\x3d(support\x3d_)?_.length:0,dist.bandwidth(bandwidth)):support},bandwidth(_){if(!arguments.length)return bandwidth;bandwidth\x3d_;!bandwidth\x26\x26\nsupport\x26\x26(bandwidth\x3destimateBandwidth(support));return dist},sample(){return support[~~(exports.random()*n)]+bandwidth*kernel.sample()},pdf(x){let y\x3d0,i\x3d0;for(;i\x3cn;++i)y+\x3dkernel.pdf((x-support[i])/bandwidth);return y/bandwidth/n},cdf(x){let y\x3d0,i\x3d0;for(;i\x3cn;++i)y+\x3dkernel.cdf((x-support[i])/bandwidth);return y/n},icdf(){throw Error(\x22KDE icdf not supported.\x22);}};return dist.data(support)};exports.randomLCG\x3dfunction(seed){return function(){seed\x3d(1103515245*seed+12345)%2147483647;return seed/2147483647}};\nexports.randomLogNormal\x3dfunction(mean,stdev){let mu,sigma;const dist\x3d{mean(_){return arguments.length?(mu\x3d_||0,dist):mu},stdev(_){return arguments.length?(sigma\x3dnull\x3d\x3d_?1:_,dist):sigma},sample:()\x3d\x3esampleLogNormal(mu,sigma),pdf:value\x3d\x3edensityLogNormal(value,mu,sigma),cdf:value\x3d\x3ecumulativeLogNormal(value,mu,sigma),icdf:p\x3d\x3equantileLogNormal(p,mu,sigma)};return dist.mean(mean).stdev(stdev)};exports.randomMixture\x3dfunction(dists,weights){let m\x3d0,w$jscomp$0;const dist\x3d{weights(_){if(arguments.length){{var x\x3d\nweights\x3d_||[];const w\x3d[];let sum\x3d0,i;for(i\x3d0;i\x3cm;++i)sum+\x3dw[i]\x3dnull\x3d\x3dx[i]?1:+x[i];for(i\x3d0;i\x3cm;++i)w[i]/\x3dsum;w$jscomp$0\x3dw}return dist}return weights},distributions(_){return arguments.length?(_?(m\x3d_.length,dists\x3d_):(m\x3d0,dists\x3d[]),dist.weights(weights)):dists},sample(){const r\x3dexports.random();let d\x3ddists[m-1],v\x3dw$jscomp$0[0],i\x3d0;for(;i\x3cm-1;v+\x3dw$jscomp$0[++i])if(r\x3cv){d\x3ddists[i];break}return d.sample()},pdf(x){let p\x3d0,i\x3d0;for(;i\x3cm;++i)p+\x3dw$jscomp$0[i]*dists[i].pdf(x);return p},cdf(x){let p\x3d0,i\x3d0;for(;i\x3c\nm;++i)p+\x3dw$jscomp$0[i]*dists[i].cdf(x);return p},icdf(){throw Error(\x22Mixture icdf not supported.\x22);}};return dist.distributions(dists).weights(weights)};exports.randomNormal\x3dgaussian;exports.randomUniform\x3dfunction(min,max){let a,b;const dist\x3d{min(_){return arguments.length?(a\x3d_||0,dist):a},max(_){return arguments.length?(b\x3dnull\x3d\x3d_?1:_,dist):b},sample:()\x3d\x3esampleUniform(a,b),pdf:value\x3d\x3edensityUniform(value,a,b),cdf:value\x3d\x3ecumulativeUniform(value,a,b),icdf:p\x3d\x3equantileUniform(p,a,b)};null\x3d\x3dmax\x26\x26(max\x3d\nnull\x3d\x3dmin?1:min,min\x3d0);return dist.min(min).max(max)};exports.regressionExp\x3dfunction(data,x$jscomp$0,y){const [xv,,ux,uy]\x3dpoints(data,x$jscomp$0,y);let YL\x3d0,XY\x3d0,XYL\x3d0,X2Y\x3d0,n\x3d0,dx,ly,xy;visitPoints(data,x$jscomp$0,y,(_,dy)\x3d\x3e{dx\x3dxv[n++];ly\x3dMath.log(dy);xy\x3ddx*dy;YL+\x3d(dy*ly-YL)/n;XY+\x3d(xy-XY)/n;XYL+\x3d(xy*ly-XYL)/n;X2Y+\x3d(dx*xy-X2Y)/n});const [c0,c1]\x3dols(XY/uy,YL/uy,XYL/uy,X2Y/uy),predict\x3dx\x3d\x3eMath.exp(c0+c1*(x-ux));return{coef:[Math.exp(c0-c1*ux),c1],predict,rSquared:rSquared(data,x$jscomp$0,y,uy,predict)}};\nexports.regressionLinear\x3dlinear;exports.regressionLoess\x3dfunction(data,x$jscomp$0,y,bandwidth){const [xv,yv,ux,uy]\x3dpoints(data,x$jscomp$0,y,!0);data\x3dxv.length;x$jscomp$0\x3dMath.max(2,~~(bandwidth*data));bandwidth\x3dnew Float64Array(data);y\x3dnew Float64Array(data);var robustWeights\x3d(new Float64Array(data)).fill(1);for(var iter\x3d-1;2\x3e\x3d++iter;){var interval\x3d[0,x$jscomp$0-1];for(let i\x3d0;i\x3cdata;++i){var dx\x3dxv[i],i0\x3dinterval[0],i1\x3dinterval[1],W\x3d0,X\x3d0,Y\x3d0,XY\x3d0;let X2\x3d0;const denom\x3d1/Math.abs(xv[dx-xv[i0]\x3exv[i1]-\ndx?i0:i1]-dx||1);for(;i0\x3c\x3di1;++i0){const xk\x3dxv[i0],yk\x3dyv[i0];var x\x3dMath.abs(dx-xk)*denom;const w\x3d(x\x3d1-x*x*x)*x*x*robustWeights[i0];x\x3dxk*w;W+\x3dw;X+\x3dx;Y+\x3dyk*w;XY+\x3dyk*x;X2+\x3dxk*x}const [a,b]\x3dols(X/W,Y/W,XY/W,X2/W);bandwidth[i]\x3da+b*dx;y[i]\x3dMath.abs(yv[i]-bandwidth[i]);dx\x3dxv;i1\x3di+1;W\x3dinterval;X\x3ddx[i1];Y\x3dW[0];XY\x3dW[1]+1;if(!(XY\x3e\x3ddx.length))for(;i1\x3eY\x26\x26dx[XY]-X\x3c\x3dX-dx[Y];)W[0]\x3d++Y,W[1]\x3dXY,++XY}if(2\x3d\x3d\x3diter)break;interval\x3dd3Array.median(y);if(1E-12\x3eMath.abs(interval))break;for(let i\x3d0,arg,w;i\x3cdata;++i)arg\x3dy[i]/\n(6*interval),robustWeights[i]\x3d1\x3c\x3darg?1E-12:(w\x3d1-arg*arg)*w}data\x3dxv.length;x$jscomp$0\x3d[];robustWeights\x3dy\x3d0;for(iter\x3d[];y\x3cdata;++y)interval\x3dxv[y]+ux,iter[0]\x3d\x3d\x3dinterval?iter[1]+\x3d(bandwidth[y]-iter[1])/++robustWeights:(robustWeights\x3d0,iter[1]+\x3duy,iter\x3d[interval,bandwidth[y]],x$jscomp$0.push(iter));iter[1]+\x3duy;return bandwidth\x3dx$jscomp$0};exports.regressionLog\x3dfunction(data,x$jscomp$0,y){let X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,n\x3d0;visitPoints(data,x$jscomp$0,y,(dx,dy)\x3d\x3e{++n;dx\x3dMath.log(dx);X+\x3d(dx-X)/n;Y+\x3d(dy-Y)/n;XY+\x3d(dx*\ndy-XY)/n;X2+\x3d(dx*dx-X2)/n});const coef\x3dols(X,Y,XY,X2),predict\x3dx\x3d\x3ecoef[0]+coef[1]*Math.log(x);return{coef,predict,rSquared:rSquared(data,x$jscomp$0,y,Y,predict)}};exports.regressionPoly\x3dfunction(data,x$jscomp$0,y$jscomp$0,order){if(1\x3d\x3d\x3dorder)return linear(data,x$jscomp$0,y$jscomp$0);if(2\x3d\x3d\x3dorder)return quad(data,x$jscomp$0,y$jscomp$0);const [xv,yv,ux,uy]\x3dpoints(data,x$jscomp$0,y$jscomp$0);var n\x3dxv.length;const lhs\x3d[],rhs\x3d[],k\x3dorder+1;let i,l,v,c;for(i\x3d0;i\x3ck;++i){for(v\x3dl\x3d0;l\x3cn;++l)v+\x3dMath.pow(xv[l],\ni)*yv[l];lhs.push(v);c\x3dnew Float64Array(k);for(order\x3d0;order\x3ck;++order){for(v\x3dl\x3d0;l\x3cn;++l)v+\x3dMath.pow(xv[l],i+order);c[order]\x3dv}rhs.push(c)}rhs.push(lhs);const coef\x3dgaussianElimination(rhs);n\x3dx\x3d\x3e{x-\x3dux;let y\x3duy+coef[0]+coef[1]*x+coef[2]*x*x;for(i\x3d3;i\x3ck;++i)y+\x3dcoef[i]*Math.pow(x,i);return y};return{coef:uncenter(k,coef,-ux,uy),predict:n,rSquared:rSquared(data,x$jscomp$0,y$jscomp$0,uy,n)}};exports.regressionPow\x3dfunction(data,x$jscomp$0,y){let X\x3d0,Y\x3d0,XY\x3d0,X2\x3d0,YS\x3d0,n\x3d0;visitPoints(data,x$jscomp$0,y,\n(dx,dy)\x3d\x3e{dx\x3dMath.log(dx);const ly\x3dMath.log(dy);++n;X+\x3d(dx-X)/n;Y+\x3d(ly-Y)/n;XY+\x3d(dx*ly-XY)/n;X2+\x3d(dx*dx-X2)/n;YS+\x3d(dy-YS)/n});const coef\x3dols(X,Y,XY,X2),predict\x3dx\x3d\x3ecoef[0]*Math.pow(x,coef[1]);coef[0]\x3dMath.exp(coef[0]);return{coef,predict,rSquared:rSquared(data,x$jscomp$0,y,YS,predict)}};exports.regressionQuad\x3dquad;exports.sampleCurve\x3dfunction(f,extent,minSteps,maxSteps){minSteps\x3dminSteps||25;maxSteps\x3dMath.max(minSteps,maxSteps||200);var point\x3dx\x3d\x3e[x,f(x)],minX\x3dextent[0];const maxX\x3dextent[1],span\x3dmaxX-\nminX;var stop\x3dspan/maxSteps;extent\x3d[[minX,f(minX)]];const next\x3d[];if(minSteps\x3d\x3d\x3dmaxSteps){for(stop\x3d1;stop\x3cmaxSteps;++stop)extent.push(point(minX+stop/minSteps*span));extent.push([maxX,f(maxX)]);return extent}next.push([maxX,f(maxX)]);for(maxSteps\x3dminSteps;0\x3c--maxSteps;)next.push(point(minX+maxSteps/minSteps*span));minSteps\x3dextent[0];for(point\x3dnext[next.length-1];point;)minX\x3d(minSteps[0]+point[0])/2,minX\x3d[minX,f(minX)],minX[0]-minSteps[0]\x3e\x3dstop\x26\x26Math.abs(Math.atan2(point[1]-minSteps[1],point[0]-minSteps[0])-\nMath.atan2(minX[1]-minSteps[1],minX[0]-minSteps[0]))\x3eMIN_RADIANS?next.push(minX):(minSteps\x3dpoint,extent.push(point),next.pop()),point\x3dnext[next.length-1];return extent};exports.sampleLogNormal\x3dsampleLogNormal;exports.sampleNormal\x3dsampleNormal;exports.sampleUniform\x3dsampleUniform;exports.setRandom\x3dfunction(r){exports.random\x3dr};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_transforms$build$vega_transforms.js", true , "shadow$provide.module$node_modules$vega_transforms$build$vega_transforms\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-dataflow vega-statistics d3-array vega-time\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.d3,global.vega))})(this,function(exports,vegaUtil,vegaDataflow,vegaStatistics,d3Array,vegaTime){function multikey(f){return x\x3d\x3e{const n\x3df.length;let i\x3d1,k\x3dString(f[0](x));for(;i\x3cn;++i)k+\x3d\x22|\x22+f[i](x);return k}}function groupkey(fields){return fields\x26\x26\nfields.length?1\x3d\x3d\x3dfields.length?fields[0]:multikey(fields):function(){return\x22\x22}}function measure(key,value){return out\x3d\x3evegaUtil.extend({name:key,out:out||key},base_op,value)}function compareIndex(a,b){return a.idx-b.idx}function resolve(agg){const map\x3d{};agg.forEach(a\x3d\x3emap[a.name]\x3da);const getreqs\x3da\x3d\x3e{a.req\x26\x26a.req.forEach(key\x3d\x3e{map[key]||getreqs(map[key]\x3dAggregateOps[key]())})};agg.forEach(getreqs);return Object.values(map).sort(compareIndex)}function init$jscomp$0(){this.missing\x3dthis.valid\x3d0;this._ops.forEach(op\x3d\x3e\nop.init(this))}function add$jscomp$0(v,t){null\x3d\x3dv||\x22\x22\x3d\x3d\x3dv?++this.missing:v\x3d\x3d\x3dv\x26\x26(++this.valid,this._ops.forEach(op\x3d\x3eop.add(this,v,t)))}function rem$jscomp$0(v,t){null\x3d\x3dv||\x22\x22\x3d\x3d\x3dv?--this.missing:v\x3d\x3d\x3dv\x26\x26(--this.valid,this._ops.forEach(op\x3d\x3eop.rem(this,v,t)))}function set$jscomp$0(t){this._out.forEach(op\x3d\x3et[op.out]\x3dop.value(this));return t}function compileMeasures(agg,field){function ctr(cell){this._ops\x3dops;this._out\x3dout;this.cell\x3dcell;this.init()}field\x3dfield||vegaUtil.identity;const ops\x3dresolve(agg),\nout\x3dagg.slice().sort(compareIndex);ctr.prototype.init\x3dinit$jscomp$0;ctr.prototype.add\x3dadd$jscomp$0;ctr.prototype.rem\x3drem$jscomp$0;ctr.prototype.set\x3dset$jscomp$0;ctr.prototype.get\x3dfield;ctr.fields\x3dagg.map(op\x3d\x3eop.out);return ctr}function TupleStore(key){this._key\x3dkey?vegaUtil.field(key):vegaDataflow.tupleid;this.reset()}function Aggregate(params){vegaDataflow.Transform.call(this,null,params);this._adds\x3d[];this._mods\x3d[];this._mlen\x3dthis._alen\x3d0;this._drop\x3d!0;this._cross\x3d!1;this._dims\x3d[];this._dnames\x3d\n[];this._measures\x3d[];this._countOnly\x3d!1;this._outputs\x3dthis._inputs\x3dthis._prev\x3dthis._counts\x3dnull}function Bin(params){vegaDataflow.Transform.call(this,null,params)}function SortedList(idFunc,source,input){let data\x3dsource||[],add\x3dinput||[],rem\x3d{},cnt\x3d0;return{add:t\x3d\x3eadd.push(t),remove:t\x3d\x3erem[idFunc(t)]\x3d++cnt,size:()\x3d\x3edata.length,data:(compare,resort)\x3d\x3e{cnt\x26\x26(data\x3ddata.filter(t\x3d\x3e!rem[idFunc(t)]),rem\x3d{},cnt\x3d0);resort\x26\x26compare\x26\x26data.sort(compare);add.length\x26\x26(data\x3dcompare?vegaUtil.merge(compare,data,add.sort(compare)):\ndata.concat(add),add\x3d[]);return data}}}function Collect(params){vegaDataflow.Transform.call(this,[],params)}function Compare(params){vegaDataflow.Operator.call(this,null,update$5,params)}function update$5(_){return this.value\x26\x26!_.modified()?this.value:vegaUtil.compare(_.fields,_.orders)}function CountPattern(params){vegaDataflow.Transform.call(this,null,params)}function Cross(params){vegaDataflow.Transform.call(this,null,params)}function parse(def,data){var func\x3ddef[\x22function\x22];vegaUtil.hasOwnProperty(Distributions,\nfunc)||vegaUtil.error(\x22Unknown distribution function: \x22+func);func\x3dDistributions[func]();for(const name in def)if(\x22field\x22\x3d\x3d\x3dname)func.data((def.from||data()).map(def[name]));else if(\x22distributions\x22\x3d\x3d\x3dname)func[name](def[name].map(_\x3d\x3eparse(_,data)));else if(\x22function\x22\x3d\x3d\x3dtypeof func[name])func[name](def[name]);return func}function Density(params){vegaDataflow.Transform.call(this,null,params)}function source$jscomp$0(pulse){return()\x3d\x3epulse.materialize(pulse.SOURCE).source}function fieldNames(fields,\nas){return fields?fields.map((f,i)\x3d\x3eas[i]||vegaUtil.accessorName(f)):null}function partition$1(data,groupby,field){const groups\x3d[],get\x3df\x3d\x3ef(t);let map,i,n,t,k,g;if(null\x3d\x3dgroupby)groups.push(data.map(field));else for(map\x3d{},i\x3d0,n\x3ddata.length;i\x3cn;++i)t\x3ddata[i],k\x3dgroupby.map(get),g\x3dmap[k],g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g)),g.push(field(t));return groups}function DotBin(params){vegaDataflow.Transform.call(this,null,params)}function Expression(params){vegaDataflow.Operator.call(this,null,update$4,\nparams);this.modified(!0)}function update$4(_){const expr\x3d_.expr;return this.value\x26\x26!_.modified(\x22expr\x22)?this.value:vegaUtil.accessor(datum\x3d\x3eexpr(datum,_),vegaUtil.accessorFields(expr),vegaUtil.accessorName(expr))}function Extent(params){vegaDataflow.Transform.call(this,[void 0,void 0],params)}function Subflow(pulse,parent){vegaDataflow.Operator.call(this,pulse);this.parent\x3dparent;this.count\x3d0}function Facet(params){vegaDataflow.Transform.call(this,{},params);this._keys\x3dvegaUtil.fastmap();const a\x3d\nthis._targets\x3d[];a.active\x3d0;a.forEach\x3df\x3d\x3e{for(let i\x3d0,n\x3da.active;i\x3cn;++i)f(a[i],i,a)}}function Field(params){vegaDataflow.Operator.call(this,null,update$3,params)}function update$3(_){return this.value\x26\x26!_.modified()?this.value:vegaUtil.isArray(_.name)?vegaUtil.array(_.name).map(f\x3d\x3evegaUtil.field(f)):vegaUtil.field(_.name,_.as)}function Filter(params){vegaDataflow.Transform.call(this,vegaUtil.fastmap(),params)}function Flatten(params){vegaDataflow.Transform.call(this,[],params)}function Fold(params){vegaDataflow.Transform.call(this,\n[],params)}function Formula(params){vegaDataflow.Transform.call(this,null,params)}function Generate(params){vegaDataflow.Transform.call(this,[],params)}function Impute(params){vegaDataflow.Transform.call(this,[],params)}function getValue(_){var m\x3d_.method||Methods.value;if(null\x3d\x3dMethods[m])vegaUtil.error(\x22Unrecognized imputation method: \x22+m);else{if(m\x3d\x3d\x3dMethods.value){var v\x3dvoid 0!\x3d\x3d_.value?_.value:0;return()\x3d\x3ev}return Methods[m]}}function getField(_){const f\x3d_.field;return t\x3d\x3et?f(t):NaN}function partition(data,\ngroupby,key,keyvals){var get\x3df\x3d\x3ef(t),groups\x3d[];keyvals\x3dkeyvals?keyvals.slice():[];var kMap\x3d{},gMap\x3d{},group,n;keyvals.forEach((k,i)\x3d\x3ekMap[k]\x3di+1);var i$jscomp$0\x3d0;for(n\x3ddata.length;i$jscomp$0\x3cn;++i$jscomp$0){var t\x3ddata[i$jscomp$0];var gVals\x3dkey(t);var j\x3dkMap[gVals]||(kMap[gVals]\x3dkeyvals.push(gVals));var gKey\x3d(gVals\x3dgroupby?groupby.map(get):Empty)+\x22\x22;(group\x3dgMap[gKey])||(group\x3dgMap[gKey]\x3d[],groups.push(group),group.values\x3dgVals);group[j-1]\x3dt}groups.domain\x3dkeyvals;return groups}function JoinAggregate(params){Aggregate.call(this,\nparams)}function KDE(params){vegaDataflow.Transform.call(this,null,params)}function Key(params){vegaDataflow.Operator.call(this,null,update$2,params)}function update$2(_){return this.value\x26\x26!_.modified()?this.value:vegaUtil.key(_.fields,_.flat)}function Load(params){vegaDataflow.Transform.call(this,[],params);this._pending\x3dnull}function stop$jscomp$0(_){return _.modified(\x22async\x22)\x26\x26!(_.modified(\x22values\x22)||_.modified(\x22url\x22)||_.modified(\x22format\x22))}function output$jscomp$0(op,pulse,data){data.forEach(vegaDataflow.ingest);\npulse\x3dpulse.fork(pulse.NO_FIELDS\x26pulse.NO_SOURCE);pulse.rem\x3dop.value;op.value\x3dpulse.source\x3dpulse.add\x3ddata;op._pending\x3dnull;pulse.rem.length\x26\x26pulse.clean(!0);return pulse}function Lookup(params){vegaDataflow.Transform.call(this,{},params)}function MultiExtent(params){vegaDataflow.Operator.call(this,null,update$1,params)}function update$1(_){if(this.value\x26\x26!_.modified())return this.value;_\x3d_.extents;const n\x3d_.length;let min\x3dInfinity,max\x3d-Infinity,i,e;for(i\x3d0;i\x3cn;++i)e\x3d_[i],e[0]\x3cmin\x26\x26(min\x3de[0]),e[1]\x3e\nmax\x26\x26(max\x3de[1]);return[min,max]}function MultiValues(params){vegaDataflow.Operator.call(this,null,update$jscomp$0,params)}function update$jscomp$0(_$jscomp$0){return this.value\x26\x26!_$jscomp$0.modified()?this.value:_$jscomp$0.values.reduce((data,_)\x3d\x3edata.concat(_),[])}function Params(params){vegaDataflow.Transform.call(this,null,params)}function Pivot(params){Aggregate.call(this,params)}function aggregateParams(_,pulse){const key\x3d_.field,value\x3d_.value,op\x3d(\x22count\x22\x3d\x3d\x3d_.op?\x22__count__\x22:_.op)||\x22sum\x22,fields\x3d\nvegaUtil.accessorFields(key).concat(vegaUtil.accessorFields(value)),keys\x3dpivotKeys(key,_.limit||0,pulse);pulse.changed()\x26\x26_.set(\x22__pivot__\x22,null,null,!0);return{key:_.key,groupby:_.groupby,ops:keys.map(()\x3d\x3eop),fields:keys.map(k\x3d\x3eget$jscomp$0(k,key,value,fields)),as:keys.map(k\x3d\x3ek+\x22\x22),modified:_.modified.bind(_)}}function get$jscomp$0(k,key,value,fields){return vegaUtil.accessor(d\x3d\x3ekey(d)\x3d\x3d\x3dk?value(d):NaN,fields,k+\x22\x22)}function pivotKeys(key,limit,pulse){const map\x3d{},list\x3d[];pulse.visit(pulse.SOURCE,\nt\x3d\x3e{t\x3dkey(t);map[t]||(map[t]\x3d1,list.push(t))});list.sort(vegaUtil.ascending);return limit?list.slice(0,limit):list}function PreFacet(params){Facet.call(this,params)}function Project(params){vegaDataflow.Transform.call(this,null,params)}function Proxy(params){vegaDataflow.Transform.call(this,null,params)}function Quantile(params){vegaDataflow.Transform.call(this,null,params)}function Relay(params){vegaDataflow.Transform.call(this,null,params)}function Sample(params){vegaDataflow.Transform.call(this,\n[],params);this.count\x3d0}function Sequence(params){vegaDataflow.Transform.call(this,null,params)}function Sieve(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function TimeUnit(params){vegaDataflow.Transform.call(this,null,params)}function TupleIndex(params){vegaDataflow.Transform.call(this,vegaUtil.fastmap(),params)}function Values(params){vegaDataflow.Transform.call(this,null,params)}function WindowOp(op,field,param,as){const fn\x3dWindowOps[op](field,param);return{init:fn.init||\nvegaUtil.zero,update:function(w,t){t[as]\x3dfn.next(w)}}}function WindowState(_$jscomp$0){function visitInputs(f){vegaUtil.array(vegaUtil.accessorFields(f)).forEach(_\x3d\x3einputs[_]\x3d1)}const ops\x3dvegaUtil.array(_$jscomp$0.ops),fields\x3dvegaUtil.array(_$jscomp$0.fields),params\x3dvegaUtil.array(_$jscomp$0.params),as\x3dvegaUtil.array(_$jscomp$0.as),outputs\x3dthis.outputs\x3d[],windows\x3dthis.windows\x3d[],inputs\x3d{},map\x3d{},counts\x3d[],measures\x3d[];let countOnly\x3d!0;visitInputs(_$jscomp$0.sort);ops.forEach((op,i)\x3d\x3e{const field\x3dfields[i],\nmname\x3dvegaUtil.accessorName(field),name\x3das[i]||op+(mname?\x22_\x22+mname:\x22\x22);visitInputs(field);outputs.push(name);vegaUtil.hasOwnProperty(WindowOps,op)?windows.push(WindowOp(op,fields[i],params[i],name)):(null\x3d\x3dfield\x26\x26\x22count\x22!\x3d\x3dop\x26\x26vegaUtil.error(\x22Null aggregate field specified.\x22),\x22count\x22\x3d\x3d\x3dop?counts.push(name):(countOnly\x3d!1,i\x3dmap[mname],i||(i\x3dmap[mname]\x3d[],i.field\x3dfield,measures.push(i)),i.push(AggregateOps[op](name))))});if(counts.length||measures.length)this.cell\x3dcell$jscomp$0(measures,counts,countOnly);\nthis.inputs\x3dObject.keys(inputs)}function cell$jscomp$0(measures,counts,countOnly){measures\x3dmeasures.map(m\x3d\x3ecompileMeasures(m,m.field));const cell\x3d{num:0,agg:null,store:!1,count:counts};if(!countOnly)for(var n$jscomp$0\x3dmeasures.length,a\x3dcell.agg\x3dArray(n$jscomp$0),i$jscomp$0\x3d0;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)a[i$jscomp$0]\x3dnew measures[i$jscomp$0](cell);if(cell.store)var store\x3dcell.data\x3dnew TupleStore;cell.add\x3dfunction(t){cell.num+\x3d1;if(!countOnly){store\x26\x26store.add(t);for(let i\x3d0;i\x3cn$jscomp$0;++i)a[i].add(a[i].get(t),\nt)}};cell.rem\x3dfunction(t){--cell.num;if(!countOnly){store\x26\x26store.rem(t);for(let i\x3d0;i\x3cn$jscomp$0;++i)a[i].rem(a[i].get(t),t)}};cell.set\x3dfunction(t){let i,n;store\x26\x26store.values();i\x3d0;for(n\x3dcounts.length;i\x3cn;++i)t[counts[i]]\x3dcell.num;if(!countOnly)for(i\x3d0,n\x3da.length;i\x3cn;++i)a[i].set(t)};cell.init\x3dfunction(){cell.num\x3d0;store\x26\x26store.reset();for(let i\x3d0;i\x3cn$jscomp$0;++i)a[i].init()};return cell}function Window(params){vegaDataflow.Transform.call(this,{},params);this._mlen\x3d0;this._mods\x3d[]}function processPartition(list,\nstate,cmp,_){var sort\x3d_.sort;const range\x3dsort\x26\x26!_.ignorePeers;_\x3d_.frame||[null,0];list\x3dlist.data(cmp);cmp\x3dlist.length;const b\x3drange?d3Array.bisector(sort):null;sort\x3d{i0:0,i1:0,p0:0,p1:0,index:0,data:list,compare:sort||vegaUtil.constant(-1)};state.init();for(let i\x3d0;i\x3ccmp;++i){var w\x3dsort,f\x3d_,i$jscomp$0\x3di,n$jscomp$0\x3dcmp;w.p0\x3dw.i0;w.p1\x3dw.i1;w.i0\x3dnull\x3d\x3df[0]?0:Math.max(0,i$jscomp$0-Math.abs(f[0]));w.i1\x3dnull\x3d\x3df[1]?n$jscomp$0:Math.min(n$jscomp$0,i$jscomp$0+Math.abs(f[1])+1);w.index\x3di$jscomp$0;if(range){{w\x3d\nsort;f\x3db;i$jscomp$0\x3dw.i0;n$jscomp$0\x3dw.i1-1;const c\x3dw.compare,d\x3dw.data,n\x3dd.length-1;0\x3ci$jscomp$0\x26\x26!c(d[i$jscomp$0],d[i$jscomp$0-1])\x26\x26(w.i0\x3df.left(d,d[i$jscomp$0]));n$jscomp$0\x3cn\x26\x26!c(d[n$jscomp$0],d[n$jscomp$0+1])\x26\x26(w.i1\x3df.right(d,d[n$jscomp$0]))}}state.update(sort,list[i])}}var noop\x3d()\x3d\x3e{};const base_op\x3d{init:noop,add:noop,rem:noop,idx:0},AggregateOps\x3d{values:{init:m\x3d\x3em.cell.store\x3d!0,value:m\x3d\x3em.cell.data.values(),idx:-1},count:{value:m\x3d\x3em.cell.num},__count__:{value:m\x3d\x3em.missing+m.valid},missing:{value:m\x3d\x3e\nm.missing},valid:{value:m\x3d\x3em.valid},sum:{init:m\x3d\x3em.sum\x3d0,value:m\x3d\x3em.sum,add:(m,v)\x3d\x3em.sum+\x3d+v,rem:(m,v)\x3d\x3em.sum-\x3dv},product:{init:m\x3d\x3em.product\x3d1,value:m\x3d\x3em.valid?m.product:void 0,add:(m,v)\x3d\x3em.product*\x3dv,rem:(m,v)\x3d\x3em.product/\x3dv},mean:{init:m\x3d\x3em.mean\x3d0,value:m\x3d\x3em.valid?m.mean:void 0,add:(m,v)\x3d\x3e(m.mean_d\x3dv-m.mean,m.mean+\x3dm.mean_d/m.valid),rem:(m,v)\x3d\x3e(m.mean_d\x3dv-m.mean,m.mean-\x3dm.valid?m.mean_d/m.valid:m.mean)},average:{value:m\x3d\x3em.valid?m.mean:void 0,req:[\x22mean\x22],idx:1},variance:{init:m\x3d\x3em.dev\x3d0,value:m\x3d\x3e\n1\x3cm.valid?m.dev/(m.valid-1):void 0,add:(m,v)\x3d\x3em.dev+\x3dm.mean_d*(v-m.mean),rem:(m,v)\x3d\x3em.dev-\x3dm.mean_d*(v-m.mean),req:[\x22mean\x22],idx:1},variancep:{value:m\x3d\x3e1\x3cm.valid?m.dev/m.valid:void 0,req:[\x22variance\x22],idx:2},stdev:{value:m\x3d\x3e1\x3cm.valid?Math.sqrt(m.dev/(m.valid-1)):void 0,req:[\x22variance\x22],idx:2},stdevp:{value:m\x3d\x3e1\x3cm.valid?Math.sqrt(m.dev/m.valid):void 0,req:[\x22variance\x22],idx:2},stderr:{value:m\x3d\x3e1\x3cm.valid?Math.sqrt(m.dev/(m.valid*(m.valid-1))):void 0,req:[\x22variance\x22],idx:2},distinct:{value:m\x3d\x3em.cell.data.distinct(m.get),\nreq:[\x22values\x22],idx:3},ci0:{value:m\x3d\x3em.cell.data.ci0(m.get),req:[\x22values\x22],idx:3},ci1:{value:m\x3d\x3em.cell.data.ci1(m.get),req:[\x22values\x22],idx:3},median:{value:m\x3d\x3em.cell.data.q2(m.get),req:[\x22values\x22],idx:3},q1:{value:m\x3d\x3em.cell.data.q1(m.get),req:[\x22values\x22],idx:3},q3:{value:m\x3d\x3em.cell.data.q3(m.get),req:[\x22values\x22],idx:3},min:{init:m\x3d\x3em.min\x3dvoid 0,value:m\x3d\x3em.min\x3dNumber.isNaN(m.min)?m.cell.data.min(m.get):m.min,add:(m,v)\x3d\x3e{if(v\x3cm.min||void 0\x3d\x3d\x3dm.min)m.min\x3dv},rem:(m,v)\x3d\x3e{v\x3c\x3dm.min\x26\x26(m.min\x3dNaN)},req:[\x22values\x22],\nidx:4},max:{init:m\x3d\x3em.max\x3dvoid 0,value:m\x3d\x3em.max\x3dNumber.isNaN(m.max)?m.cell.data.max(m.get):m.max,add:(m,v)\x3d\x3e{if(v\x3em.max||void 0\x3d\x3d\x3dm.max)m.max\x3dv},rem:(m,v)\x3d\x3e{v\x3e\x3dm.max\x26\x26(m.max\x3dNaN)},req:[\x22values\x22],idx:4},argmin:{init:m\x3d\x3em.argmin\x3dvoid 0,value:m\x3d\x3em.argmin||m.cell.data.argmin(m.get),add:(m,v,t)\x3d\x3e{v\x3cm.min\x26\x26(m.argmin\x3dt)},rem:(m,v)\x3d\x3e{v\x3c\x3dm.min\x26\x26(m.argmin\x3dvoid 0)},req:[\x22min\x22,\x22values\x22],idx:3},argmax:{init:m\x3d\x3em.argmax\x3dvoid 0,value:m\x3d\x3em.argmax||m.cell.data.argmax(m.get),add:(m,v,t)\x3d\x3e{v\x3em.max\x26\x26(m.argmax\x3dt)},rem:(m,\nv)\x3d\x3e{v\x3e\x3dm.max\x26\x26(m.argmax\x3dvoid 0)},req:[\x22max\x22,\x22values\x22],idx:3}};noop\x3dObject.keys(AggregateOps);noop.forEach(key\x3d\x3e{AggregateOps[key]\x3dmeasure(key,AggregateOps[key])});var prototype$1\x3dTupleStore.prototype;prototype$1.reset\x3dfunction(){this._add\x3d[];this._rem\x3d[];this._q\x3dthis._get\x3dthis._ext\x3dnull};prototype$1.add\x3dfunction(v){this._add.push(v)};prototype$1.rem\x3dfunction(v){this._rem.push(v)};prototype$1.values\x3dfunction(){this._get\x3dnull;if(0\x3d\x3d\x3dthis._rem.length)return this._add;const a\x3dthis._add;var r\x3dthis._rem;\nconst k\x3dthis._key,n\x3da.length,m\x3dr.length,x\x3dArray(n-m),map\x3d{};let i,v;for(i\x3d0;i\x3cm;++i)map[k(r[i])]\x3d1;for(r\x3di\x3d0;i\x3cn;++i)map[k(v\x3da[i])]?map[k(v)]\x3d0:x[r++]\x3dv;this._rem\x3d[];return this._add\x3dx};prototype$1.distinct\x3dfunction(get){const v\x3dthis.values(),map\x3d{};let n\x3dv.length,count\x3d0,s;for(;0\x3c\x3d--n;)s\x3dget(v[n])+\x22\x22,vegaUtil.hasOwnProperty(map,s)||(map[s]\x3d1,++count);return count};prototype$1.extent\x3dfunction(get){if(this._get!\x3d\x3dget||!this._ext){const v\x3dthis.values(),i\x3dvegaUtil.extentIndex(v,get);this._ext\x3d[v[i[0]],\nv[i[1]]];this._get\x3dget}return this._ext};prototype$1.argmin\x3dfunction(get){return this.extent(get)[0]||{}};prototype$1.argmax\x3dfunction(get){return this.extent(get)[1]||{}};prototype$1.min\x3dfunction(get){const m\x3dthis.extent(get)[0];return null!\x3dm?get(m):void 0};prototype$1.max\x3dfunction(get){const m\x3dthis.extent(get)[1];return null!\x3dm?get(m):void 0};prototype$1.quartile\x3dfunction(get){this._get\x3d\x3d\x3dget\x26\x26this._q||(this._q\x3dvegaStatistics.quartiles(this.values(),get),this._get\x3dget);return this._q};prototype$1.q1\x3d\nfunction(get){return this.quartile(get)[0]};prototype$1.q2\x3dfunction(get){return this.quartile(get)[1]};prototype$1.q3\x3dfunction(get){return this.quartile(get)[2]};prototype$1.ci\x3dfunction(get){this._get\x3d\x3d\x3dget\x26\x26this._ci||(this._ci\x3dvegaStatistics.bootstrapCI(this.values(),1E3,.05,get),this._get\x3dget);return this._ci};prototype$1.ci0\x3dfunction(get){return this.ci(get)[0]};prototype$1.ci1\x3dfunction(get){return this.ci(get)[1]};Aggregate.Definition\x3d{type:\x22Aggregate\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22groupby\x22,\ntype:\x22field\x22,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:noop},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22drop\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22cross\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22key\x22,type:\x22field\x22}]};vegaUtil.inherits(Aggregate,vegaDataflow.Transform,{transform(_,pulse){const aggr\x3dthis,out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),mod\x3d_.modified();aggr.stamp\x3dout.stamp;aggr.value\x26\x26(mod||pulse.modified(aggr._inputs,!0))?(aggr._prev\x3d\naggr.value,aggr.value\x3dmod?aggr.init(_):{},pulse.visit(pulse.SOURCE,t\x3d\x3eaggr.add(t))):(aggr.value\x3daggr.value||aggr.init(_),pulse.visit(pulse.REM,t\x3d\x3eaggr.rem(t)),pulse.visit(pulse.ADD,t\x3d\x3eaggr.add(t)));out.modifies(aggr._outputs);aggr._drop\x3d!1!\x3d\x3d_.drop;_.cross\x26\x261\x3caggr._dims.length\x26\x26(aggr._drop\x3d!1,aggr.cross());pulse.clean()\x26\x26aggr._drop\x26\x26out.clean(!0).runAfter(()\x3d\x3ethis.clean());return aggr.changes(out)},cross(){function collect(cells){let key,i,t,v;for(key in cells)for(t\x3dcells[key].tuple,i\x3d0;i\x3cn;++i)vals[i][v\x3d\nt[dims[i]]]\x3dv}function generate(base,tuple,index){const name\x3ddims[index],v\x3dvals[index++];for(const k in v){const key\x3dbase?base+\x22|\x22+k:k;tuple[name]\x3dv[k];index\x3cn?generate(key,tuple,index):curr[key]||aggr.cell(key,tuple)}}const aggr\x3dthis,curr\x3daggr.value,dims\x3daggr._dnames,vals\x3ddims.map(()\x3d\x3e({})),n\x3ddims.length;collect(aggr._prev);collect(curr);generate(\x22\x22,{},0)},init(_){function inputVisit(get){get\x3dvegaUtil.array(vegaUtil.accessorFields(get));const n\x3dget.length;let i\x3d0,f;for(;i\x3cn;++i)inputMap[f\x3dget[i]]||\n(inputMap[f]\x3d1,inputs.push(f))}const inputs\x3dthis._inputs\x3d[],outputs\x3dthis._outputs\x3d[],inputMap\x3d{};this._dims\x3dvegaUtil.array(_.groupby);this._dnames\x3dthis._dims.map(d\x3d\x3e{const dname\x3dvegaUtil.accessorName(d);inputVisit(d);outputs.push(dname);return dname});this.cellkey\x3d_.key?_.key:groupkey(this._dims);this._countOnly\x3d!0;this._counts\x3d[];this._measures\x3d[];const fields\x3d_.fields||[null],ops\x3d_.ops||[\x22count\x22];_\x3d_.as||[];const n$jscomp$0\x3dfields.length,map\x3d{};let field,op,m$jscomp$0,mname,outname,i$jscomp$0;n$jscomp$0!\x3d\x3d\nops.length\x26\x26vegaUtil.error(\x22Unmatched number of fields and aggregate ops.\x22);for(i$jscomp$0\x3d0;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)field\x3dfields[i$jscomp$0],op\x3dops[i$jscomp$0],null\x3d\x3dfield\x26\x26\x22count\x22!\x3d\x3dop\x26\x26vegaUtil.error(\x22Null aggregate field specified.\x22),mname\x3dvegaUtil.accessorName(field),outname\x3d_[i$jscomp$0]||op+(mname?\x22_\x22+mname:\x22\x22),outputs.push(outname),\x22count\x22\x3d\x3d\x3dop?this._counts.push(outname):(m$jscomp$0\x3dmap[mname],m$jscomp$0||(inputVisit(field),m$jscomp$0\x3dmap[mname]\x3d[],m$jscomp$0.field\x3dfield,this._measures.push(m$jscomp$0)),\n\x22count\x22!\x3d\x3dop\x26\x26(this._countOnly\x3d!1),m$jscomp$0.push(AggregateOps[op](outname)));this._measures\x3dthis._measures.map(m\x3d\x3ecompileMeasures(m,m.field));return{}},cellkey:groupkey(),cell(key,t){let cell\x3dthis.value[key];cell?0\x3d\x3d\x3dcell.num\x26\x26this._drop\x26\x26cell.stamp\x3cthis.stamp?(cell.stamp\x3dthis.stamp,this._adds[this._alen++]\x3dcell):cell.stamp\x3cthis.stamp\x26\x26(cell.stamp\x3dthis.stamp,this._mods[this._mlen++]\x3dcell):(cell\x3dthis.value[key]\x3dthis.newcell(key,t),this._adds[this._alen++]\x3dcell);return cell},newcell(key,t){key\x3d{key,\nnum:0,agg:null,tuple:this.newtuple(t,this._prev\x26\x26this._prev[key]),stamp:this.stamp,store:!1};if(!this._countOnly){t\x3dthis._measures;const n\x3dt.length;key.agg\x3dArray(n);for(let i\x3d0;i\x3cn;++i)key.agg[i]\x3dnew t[i](key)}key.store\x26\x26(key.data\x3dnew TupleStore);return key},newtuple(t,p){const names\x3dthis._dnames,dims\x3dthis._dims,n\x3ddims.length,x\x3d{};for(let i\x3d0;i\x3cn;++i)x[names[i]]\x3ddims[i](t);return p?vegaDataflow.replace(p.tuple,x):vegaDataflow.ingest(x)},clean(){const cells\x3dthis.value;for(const key in cells)0\x3d\x3d\x3dcells[key].num\x26\x26\ndelete cells[key]},add(t){var key\x3dthis.cellkey(t);key\x3dthis.cell(key,t);key.num+\x3d1;if(!this._countOnly){key.store\x26\x26key.data.add(t);key\x3dkey.agg;for(let i\x3d0,n\x3dkey.length;i\x3cn;++i)key[i].add(key[i].get(t),t)}},rem(t){var key\x3dthis.cellkey(t);key\x3dthis.cell(key,t);--key.num;if(!this._countOnly){key.store\x26\x26key.data.rem(t);key\x3dkey.agg;for(let i\x3d0,n\x3dkey.length;i\x3cn;++i)key[i].rem(key[i].get(t),t)}},celltuple(cell){const tuple\x3dcell.tuple,counts\x3dthis._counts;cell.store\x26\x26cell.data.values();for(let i\x3d0,n\x3dcounts.length;i\x3c\nn;++i)tuple[counts[i]]\x3dcell.num;if(!this._countOnly){cell\x3dcell.agg;for(let i\x3d0,n\x3dcell.length;i\x3cn;++i)cell[i].set(tuple)}return tuple},changes(out){const adds\x3dthis._adds,mods\x3dthis._mods;var prev\x3dthis._prev;const drop\x3dthis._drop,add\x3dout.add,rem\x3dout.rem,mod\x3dout.mod;let cell;var key;if(prev)for(key in prev)cell\x3dprev[key],drop\x26\x26!cell.num||rem.push(cell.tuple);prev\x3d0;for(key\x3dthis._alen;prev\x3ckey;++prev)add.push(this.celltuple(adds[prev])),adds[prev]\x3dnull;prev\x3d0;for(key\x3dthis._mlen;prev\x3ckey;++prev)cell\x3dmods[prev],\n(0\x3d\x3d\x3dcell.num\x26\x26drop?rem:mod).push(this.celltuple(cell)),mods[prev]\x3dnull;this._alen\x3dthis._mlen\x3d0;this._prev\x3dnull;return out}});Bin.Definition\x3d{type:\x22Bin\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22interval\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22anchor\x22,type:\x22number\x22},{name:\x22maxbins\x22,type:\x22number\x22,\x22default\x22:20},{name:\x22base\x22,type:\x22number\x22,\x22default\x22:10},{name:\x22divide\x22,type:\x22number\x22,array:!0,\x22default\x22:[5,2]},{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22span\x22,\ntype:\x22number\x22},{name:\x22step\x22,type:\x22number\x22},{name:\x22steps\x22,type:\x22number\x22,array:!0},{name:\x22minstep\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22name\x22,type:\x22string\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22bin0\x22,\x22bin1\x22]}]};vegaUtil.inherits(Bin,vegaDataflow.Transform,{transform(_,pulse){const band\x3d!1!\x3d\x3d_.interval,bins\x3dthis._bins(_),start\x3dbins.start,step\x3dbins.step,as\x3d_.as||[\x22bin0\x22,\x22bin1\x22],b0\x3das[0],b1\x3das[1];_.modified()?(pulse\x3dpulse.reflow(!0),_\x3dpulse.SOURCE):\n_\x3dpulse.modified(vegaUtil.accessorFields(_.field))?pulse.ADD_MOD:pulse.ADD;pulse.visit(_,band?t\x3d\x3e{const v\x3dbins(t);t[b0]\x3dv;t[b1]\x3dnull\x3d\x3dv?null:start+step*(1+(v-start)/step)}:t\x3d\x3et[b0]\x3dbins(t));return pulse.modifies(band?as:b0)},_bins(_){if(this.value\x26\x26!_.modified())return this.value;const field\x3d_.field,bins\x3dvegaStatistics.bin(_),step\x3dbins.step;let start\x3dbins.start,stop\x3dstart+Math.ceil((bins.stop-start)/step)*step;var a;null!\x3d(a\x3d_.anchor)\x26\x26(a-\x3dstart+step*Math.floor((a-start)/step),start+\x3da,stop+\x3da);a\x3d\nfunction(t){t\x3dvegaUtil.toNumber(field(t));return null\x3d\x3dt?null:t\x3cstart?-Infinity:t\x3estop?Infinity:(t\x3dMath.max(start,Math.min(t,stop-step)),start+step*Math.floor(1E-14+(t-start)/step))};a.start\x3dstart;a.stop\x3dbins.stop;a.step\x3dstep;return this.value\x3dvegaUtil.accessor(a,vegaUtil.accessorFields(field),_.name||\x22bin_\x22+vegaUtil.accessorName(field))}});Collect.Definition\x3d{type:\x22Collect\x22,metadata:{source:!0},params:[{name:\x22sort\x22,type:\x22compare\x22}]};vegaUtil.inherits(Collect,vegaDataflow.Transform,{transform(_,pulse){const out\x3d\npulse.fork(pulse.ALL),list\x3dSortedList(vegaDataflow.tupleid,this.value,out.materialize(out.ADD).add),sort\x3d_.sort;_\x3dpulse.changed()||sort\x26\x26(_.modified(\x22sort\x22)||pulse.modified(sort.fields));out.visit(out.REM,list.remove);this.modified(_);this.value\x3dout.source\x3dlist.data(vegaDataflow.stableCompare(sort),_);pulse.source\x26\x26pulse.source.root\x26\x26(this.value.root\x3dpulse.source.root);return out}});vegaUtil.inherits(Compare,vegaDataflow.Operator);CountPattern.Definition\x3d{type:\x22CountPattern\x22,metadata:{generates:!0,\nchanges:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22case\x22,type:\x22enum\x22,values:[\x22upper\x22,\x22lower\x22,\x22mixed\x22],\x22default\x22:\x22mixed\x22},{name:\x22pattern\x22,type:\x22string\x22,\x22default\x22:\x27[\\\\w\x22]+\x27},{name:\x22stopwords\x22,type:\x22string\x22,\x22default\x22:\x22\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22text\x22,\x22count\x22]}]};vegaUtil.inherits(CountPattern,vegaDataflow.Transform,{transform(_,pulse){var process\x3dupdate\x3d\x3etuple\x3d\x3e{tuple\x3dget(tuple);var match\x3dmatch$jscomp$0;switch(_.case){case \x22upper\x22:tuple\x3dtuple.toUpperCase();\nbreak;case \x22lower\x22:tuple\x3dtuple.toLowerCase()}tuple\x3dtuple.match(match)||[];var t;match\x3d0;for(var n\x3dtuple.length;match\x3cn;++match)stop.test(t\x3dtuple[match])||update(t)};const init\x3dthis._parameterCheck(_,pulse),counts\x3dthis._counts,match$jscomp$0\x3dthis._match,stop\x3dthis._stop,get\x3d_.field,as\x3d_.as||[\x22text\x22,\x22count\x22],add\x3dprocess(t\x3d\x3ecounts[t]\x3d1+(counts[t]||0));process\x3dprocess(t\x3d\x3e--counts[t]);init?pulse.visit(pulse.SOURCE,add):(pulse.visit(pulse.ADD,add),pulse.visit(pulse.REM,process));return this._finish(pulse,\nas)},_parameterCheck(_,pulse){let init\x3d!1;if(_.modified(\x22stopwords\x22)||!this._stop)this._stop\x3dnew RegExp(\x22^\x22+(_.stopwords||\x22\x22)+\x22$\x22,\x22i\x22),init\x3d!0;if(_.modified(\x22pattern\x22)||!this._match)this._match\x3dnew RegExp(_.pattern||\x22[\\\\w\x27]+\x22,\x22g\x22),init\x3d!0;if(_.modified(\x22field\x22)||pulse.modified(_.field.fields))init\x3d!0;init\x26\x26(this._counts\x3d{});return init},_finish(pulse,as){const counts\x3dthis._counts,tuples\x3dthis._tuples||(this._tuples\x3d{}),text\x3das[0],count\x3das[1];pulse\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);let w,\nt,c;for(w in counts)t\x3dtuples[w],c\x3dcounts[w]||0,!t\x26\x26c?(tuples[w]\x3dt\x3dvegaDataflow.ingest({}),t[text]\x3dw,t[count]\x3dc,pulse.add.push(t)):0\x3d\x3d\x3dc?(t\x26\x26pulse.rem.push(t),counts[w]\x3dnull,tuples[w]\x3dnull):t[count]!\x3d\x3dc\x26\x26(t[count]\x3dc,pulse.mod.push(t));return pulse.modifies(as)}});Cross.Definition\x3d{type:\x22Cross\x22,metadata:{generates:!0},params:[{name:\x22filter\x22,type:\x22expr\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22a\x22,\x22b\x22]}]};vegaUtil.inherits(Cross,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE),\nas\x3d_.as||[\x22a\x22,\x22b\x22],a\x3das[0],b\x3das[1];var reset\x3d!this.value||pulse.changed(pulse.ADD_REM)||_.modified(\x22as\x22)||_.modified(\x22filter\x22),data\x3dthis.value;if(reset){data\x26\x26(out.rem\x3ddata);pulse\x3ddata\x3dpulse.materialize(pulse.SOURCE).source;_\x3d_.filter||vegaUtil.truthy;reset\x3d[];data\x3d{};for(var n\x3dpulse.length,i\x3d0,j,left;i\x3cn;++i)for(data[a]\x3dleft\x3dpulse[i],j\x3d0;j\x3cn;++j)data[b]\x3dpulse[j],_(data)\x26\x26(reset.push(vegaDataflow.ingest(data)),data\x3d{},data[a]\x3dleft);out.add\x3dthis.value\x3dreset}else out.mod\x3ddata;out.source\x3dthis.value;\nreturn out.modifies(as)}});const Distributions\x3d{kde:vegaStatistics.randomKDE,mixture:vegaStatistics.randomMixture,normal:vegaStatistics.randomNormal,lognormal:vegaStatistics.randomLogNormal,uniform:vegaStatistics.randomUniform};prototype$1\x3d[{key:{\x22function\x22:\x22normal\x22},params:[{name:\x22mean\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22stdev\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22lognormal\x22},params:[{name:\x22mean\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22stdev\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22uniform\x22},\nparams:[{name:\x22min\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22max\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{\x22function\x22:\x22kde\x22},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22from\x22,type:\x22data\x22},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:0}]}];Density.Definition\x3d{type:\x22Density\x22,metadata:{generates:!0},params:[{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2},{name:\x22steps\x22,type:\x22number\x22},{name:\x22minsteps\x22,type:\x22number\x22,\x22default\x22:25},{name:\x22maxsteps\x22,type:\x22number\x22,\x22default\x22:200},{name:\x22method\x22,type:\x22string\x22,\x22default\x22:\x22pdf\x22,\nvalues:[\x22pdf\x22,\x22cdf\x22]},{name:\x22distribution\x22,type:\x22param\x22,params:prototype$1.concat({key:{\x22function\x22:\x22mixture\x22},params:[{name:\x22distributions\x22,type:\x22param\x22,array:!0,params:prototype$1},{name:\x22weights\x22,type:\x22number\x22,array:!0}]})},{name:\x22as\x22,type:\x22string\x22,array:!0,\x22default\x22:[\x22value\x22,\x22density\x22]}]};vegaUtil.inherits(Density,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){const dist\x3dparse(_.distribution,source$jscomp$0(pulse));\npulse\x3d_.steps||_.minsteps||25;const maxsteps\x3d_.steps||_.maxsteps||200;let method\x3d_.method||\x22pdf\x22;\x22pdf\x22!\x3d\x3dmethod\x26\x26\x22cdf\x22!\x3d\x3dmethod\x26\x26vegaUtil.error(\x22Invalid density method: \x22+method);_.extent||dist.data||vegaUtil.error(\x22Missing density extent parameter.\x22);method\x3ddist[method];const as\x3d_.as||[\x22value\x22,\x22density\x22];_\x3d_.extent||vegaUtil.extent(dist.data());_\x3dvegaStatistics.sampleCurve(method,_,pulse,maxsteps).map(v\x3d\x3e{const tuple\x3d{};tuple[as[0]]\x3dv[0];tuple[as[1]]\x3dv[1];return vegaDataflow.ingest(tuple)});this.value\x26\x26\n(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3d_}return out}});DotBin.Definition\x3d{type:\x22DotBin\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22step\x22,type:\x22number\x22},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22bin\x22}]};vegaUtil.inherits(DotBin,vegaDataflow.Transform,{transform(_,pulse){if(this.value\x26\x26!_.modified()\x26\x26!pulse.changed())return pulse;var source\x3dpulse.materialize(pulse.SOURCE).source;\nconst groups\x3dpartition$1(pulse.source,_.groupby,vegaUtil.identity),smooth\x3d_.smooth||!1,field\x3d_.field;source\x3d_.step||vegaUtil.span(vegaUtil.extent(source,field))/30;const sort\x3dvegaDataflow.stableCompare((a,b)\x3d\x3efield(a)-field(b));_\x3d_.as||\x22bin\x22;const n\x3dgroups.length;let min\x3dInfinity,max\x3d-Infinity,i\x3d0,j;for(;i\x3cn;++i){const g\x3dgroups[i].sort(sort);j\x3d-1;for(const v of vegaStatistics.dotbin(g,source,smooth,field))v\x3cmin\x26\x26(min\x3dv),v\x3emax\x26\x26(max\x3dv),g[++j][_]\x3dv}this.value\x3d{start:min,stop:max,step:source};return pulse.reflow(!0).modifies(_)}});\nvegaUtil.inherits(Expression,vegaDataflow.Operator);Extent.Definition\x3d{type:\x22Extent\x22,metadata:{},params:[{name:\x22field\x22,type:\x22field\x22,required:!0}]};vegaUtil.inherits(Extent,vegaDataflow.Transform,{transform(_,pulse){var extent\x3dthis.value;const field\x3d_.field;_\x3dpulse.changed()||pulse.modified(field.fields)||_.modified(\x22field\x22);let min\x3dextent[0],max\x3dextent[1];if(_||null\x3d\x3dmin)min\x3dInfinity,max\x3d-Infinity;pulse.visit(_?pulse.SOURCE:pulse.ADD,t\x3d\x3e{t\x3dvegaUtil.toNumber(field(t));null!\x3dt\x26\x26(t\x3cmin\x26\x26(min\x3dt),t\x3emax\x26\x26\n(max\x3dt))});Number.isFinite(min)\x26\x26Number.isFinite(max)||((extent\x3dvegaUtil.accessorName(field))\x26\x26(extent\x3d` for field \x22${extent}\x22`),pulse.dataflow.warn(`Infinite extent${extent}: [${min}, ${max}]`),min\x3dmax\x3dvoid 0);this.value\x3d[min,max]}});vegaUtil.inherits(Subflow,vegaDataflow.Operator,{connect(target){this.detachSubflow\x3dtarget.detachSubflow;this.targets().add(target);return target.source\x3dthis},add(t){this.count+\x3d1;this.value.add.push(t)},rem(t){--this.count;this.value.rem.push(t)},mod(t){this.value.mod.push(t)},\ninit(pulse){this.value.init(pulse,pulse.NO_SOURCE)},evaluate(){return this.value}});vegaUtil.inherits(Facet,vegaDataflow.Transform,{activate(flow){this._targets[this._targets.active++]\x3dflow},subflow(key,flow,pulse,parent){const flows\x3dthis.value;let sf\x3dvegaUtil.hasOwnProperty(flows,key)\x26\x26flows[key],p;sf?sf.value.stamp\x3cpulse.stamp\x26\x26(sf.init(pulse),this.activate(sf)):(p\x3dparent||(p\x3dthis._group[key])\x26\x26p.tuple,parent\x3dpulse.dataflow,sf\x3dnew Subflow(pulse.fork(pulse.NO_SOURCE),this),parent.add(sf).connect(flow(parent,\nkey,p)),flows[key]\x3dsf,this.activate(sf));return sf},clean(){var flows\x3dthis.value;let detached\x3d0;for(const key in flows)if(0\x3d\x3d\x3dflows[key].count){const detach\x3dflows[key].detachSubflow;detach\x26\x26detach();delete flows[key];++detached}detached\x26\x26(flows\x3dthis._targets.filter(sf\x3d\x3esf\x26\x260\x3csf.count),this.initTargets(flows))},initTargets(act){const a\x3dthis._targets,n\x3da.length,m\x3dact?act.length:0;let i\x3d0;for(;i\x3cm;++i)a[i]\x3dact[i];for(;i\x3cn\x26\x26null!\x3da[i];++i)a[i]\x3dnull;a.active\x3dm},transform(_,pulse){const df\x3dpulse.dataflow,\nkey$jscomp$0\x3d_.key,flow\x3d_.subflow,cache\x3dthis._keys,rekey\x3d_.modified(\x22key\x22),subflow\x3dkey\x3d\x3ethis.subflow(key,flow,pulse);this._group\x3d_.group||{};this.initTargets();pulse.visit(pulse.REM,t\x3d\x3e{const id\x3dvegaDataflow.tupleid(t),k\x3dcache.get(id);void 0!\x3d\x3dk\x26\x26(cache.delete(id),subflow(k).rem(t))});pulse.visit(pulse.ADD,t\x3d\x3e{const k\x3dkey$jscomp$0(t);cache.set(vegaDataflow.tupleid(t),k);subflow(k).add(t)});rekey||pulse.modified(key$jscomp$0.fields)?pulse.visit(pulse.MOD,t\x3d\x3e{const id\x3dvegaDataflow.tupleid(t),k0\x3dcache.get(id),\nk1\x3dkey$jscomp$0(t);k0\x3d\x3d\x3dk1?subflow(k1).mod(t):(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))}):pulse.changed(pulse.MOD)\x26\x26pulse.visit(pulse.MOD,t\x3d\x3e{subflow(cache.get(vegaDataflow.tupleid(t))).mod(t)});rekey\x26\x26pulse.visit(pulse.REFLOW,t\x3d\x3e{const id\x3dvegaDataflow.tupleid(t),k0\x3dcache.get(id),k1\x3dkey$jscomp$0(t);k0!\x3d\x3dk1\x26\x26(cache.set(id,k1),subflow(k0).rem(t),subflow(k1).add(t))});pulse.clean()?df.runAfter(()\x3d\x3e{this.clean();cache.clean()}):cache.empty\x3edf.cleanThreshold\x26\x26df.runAfter(cache.clean);return pulse}});\nvegaUtil.inherits(Field,vegaDataflow.Operator);Filter.Definition\x3d{type:\x22Filter\x22,metadata:{changes:!0},params:[{name:\x22expr\x22,type:\x22expr\x22,required:!0}]};vegaUtil.inherits(Filter,vegaDataflow.Transform,{transform(_,pulse){function revisit(t){const id\x3dvegaDataflow.tupleid(t),b\x3dtest(t,_),s\x3dcache.get(id);b\x26\x26s?(cache.delete(id),add.push(t)):b||s?isMod\x26\x26b\x26\x26!s\x26\x26mod.push(t):(cache.set(id,1),rem.push(t))}const df\x3dpulse.dataflow,cache\x3dthis.value,output\x3dpulse.fork(),add\x3doutput.add,rem\x3doutput.rem,mod\x3doutput.mod,\ntest\x3d_.expr;let isMod\x3d!0;pulse.visit(pulse.REM,t\x3d\x3e{const id\x3dvegaDataflow.tupleid(t);cache.has(id)?cache.delete(id):rem.push(t)});pulse.visit(pulse.ADD,t\x3d\x3e{test(t,_)?add.push(t):cache.set(vegaDataflow.tupleid(t),1)});pulse.visit(pulse.MOD,revisit);_.modified()\x26\x26(isMod\x3d!1,pulse.visit(pulse.REFLOW,revisit));cache.empty\x3edf.cleanThreshold\x26\x26df.runAfter(cache.clean);return output}});Flatten.Definition\x3d{type:\x22Flatten\x22,metadata:{generates:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22index\x22,\ntype:\x22string\x22},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Flatten,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE),fields\x3d_.fields,as\x3dfieldNames(fields,_.as||[]),index\x3d_.index||null,m\x3das.length;out.rem\x3dthis.value;pulse.visit(pulse.SOURCE,t\x3d\x3e{const arrays\x3dfields.map(f\x3d\x3ef(t)),maxlen\x3darrays.reduce((l,a)\x3d\x3eMath.max(l,a.length),0);let i\x3d0,j,d,v;for(;i\x3cmaxlen;++i){d\x3dvegaDataflow.derive(t);for(j\x3d0;j\x3cm;++j)d[as[j]]\x3dnull\x3d\x3d(v\x3darrays[j][i])?null:v;index\x26\x26(d[index]\x3d\ni);out.add.push(d)}});this.value\x3dout.source\x3dout.add;index\x26\x26out.modifies(index);return out.modifies(as)}});Fold.Definition\x3d{type:\x22Fold\x22,metadata:{generates:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22key\x22,\x22value\x22]}]};vegaUtil.inherits(Fold,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE),fields\x3d_.fields,fnames\x3dfields.map(vegaUtil.accessorName);_\x3d_.as||[\x22key\x22,\x22value\x22];const k\x3d_[0],v\x3d_[1],n\x3dfields.length;\nout.rem\x3dthis.value;pulse.visit(pulse.SOURCE,t\x3d\x3e{for(let i\x3d0,d;i\x3cn;++i)d\x3dvegaDataflow.derive(t),d[k]\x3dfnames[i],d[v]\x3dfields[i](t),out.add.push(d)});this.value\x3dout.source\x3dout.add;return out.modifies(_)}});Formula.Definition\x3d{type:\x22Formula\x22,metadata:{modifies:!0},params:[{name:\x22expr\x22,type:\x22expr\x22,required:!0},{name:\x22as\x22,type:\x22string\x22,required:!0},{name:\x22initonly\x22,type:\x22boolean\x22}]};vegaUtil.inherits(Formula,vegaDataflow.Transform,{transform(_,pulse){const func\x3d_.expr,as\x3d_.as,mod\x3d_.modified(),flag\x3d_.initonly?\npulse.ADD:mod?pulse.SOURCE:pulse.modified(func.fields)||pulse.modified(as)?pulse.ADD_MOD:pulse.ADD;mod\x26\x26(pulse\x3dpulse.materialize().reflow(!0));_.initonly||pulse.modifies(as);return pulse.visit(flag,t\x3d\x3et[as]\x3dfunc(t,_))}});vegaUtil.inherits(Generate,vegaDataflow.Transform,{transform(_,pulse){pulse\x3dpulse.fork(pulse.ALL);const gen\x3d_.generator;let data\x3dthis.value,num\x3d_.size-data.length,add,t;if(0\x3cnum){for(add\x3d[];0\x3c\x3d--num;)add.push(t\x3dvegaDataflow.ingest(gen(_))),data.push(t);pulse.add\x3dpulse.add.length?\npulse.materialize(pulse.ADD).add.concat(add):add}else _\x3ddata.slice(0,-num),pulse.rem\x3dpulse.rem.length?pulse.materialize(pulse.REM).rem.concat(_):_,data\x3ddata.slice(-num);pulse.source\x3dthis.value\x3ddata;return pulse}});const Methods\x3d{value:\x22value\x22,median:d3Array.median,mean:d3Array.mean,min:d3Array.min,max:d3Array.max},Empty\x3d[];Impute.Definition\x3d{type:\x22Impute\x22,metadata:{changes:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22key\x22,type:\x22field\x22,required:!0},{name:\x22keyvals\x22,array:!0},{name:\x22groupby\x22,\ntype:\x22field\x22,array:!0},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22value\x22,values:[\x22value\x22,\x22mean\x22,\x22median\x22,\x22max\x22,\x22min\x22]},{name:\x22value\x22,\x22default\x22:0}]};vegaUtil.inherits(Impute,vegaDataflow.Transform,{transform(_,pulse){var out\x3dpulse.fork(pulse.ALL),impute\x3dgetValue(_),field\x3dgetField(_),fName\x3dvegaUtil.accessorName(_.field),kName\x3dvegaUtil.accessorName(_.key),gNames\x3d(_.groupby||[]).map(vegaUtil.accessorName);_\x3dpartition(pulse.source,_.groupby,_.key,_.keyvals);pulse\x3d[];var prev\x3dthis.value,m\x3d_.domain.length,j,\nl,n;var g\x3d0;for(l\x3d_.length;g\x3cl;++g){var group\x3d_[g];var gVals\x3dgroup.values;var value\x3dNaN;for(j\x3d0;j\x3cm;++j)if(null\x3d\x3dgroup[j]){var kVal\x3d_.domain[j];var t\x3d{_impute:!0};var i\x3d0;for(n\x3dgVals.length;i\x3cn;++i)t[gNames[i]]\x3dgVals[i];t[kName]\x3dkVal;t[fName]\x3dNumber.isNaN(value)?value\x3dimpute(group,field):value;pulse.push(vegaDataflow.ingest(t))}}pulse.length\x26\x26(out.add\x3dout.materialize(out.ADD).add.concat(pulse));prev.length\x26\x26(out.rem\x3dout.materialize(out.REM).rem.concat(prev));this.value\x3dpulse;return out}});JoinAggregate.Definition\x3d\n{type:\x22JoinAggregate\x22,metadata:{modifies:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:noop},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22key\x22,type:\x22field\x22}]};vegaUtil.inherits(JoinAggregate,Aggregate,{transform(_,pulse){const aggr\x3dthis,mod\x3d_.modified();let cells;aggr.value\x26\x26(mod||pulse.modified(aggr._inputs,!0))?(cells\x3daggr.value\x3dmod?aggr.init(_):{},pulse.visit(pulse.SOURCE,t\x3d\x3eaggr.add(t))):(cells\x3d\naggr.value\x3daggr.value||this.init(_),pulse.visit(pulse.REM,t\x3d\x3eaggr.rem(t)),pulse.visit(pulse.ADD,t\x3d\x3eaggr.add(t)));aggr.changes();pulse.visit(pulse.SOURCE,t\x3d\x3e{vegaUtil.extend(t,cells[aggr.cellkey(t)].tuple)});return pulse.reflow(mod).modifies(this._outputs)},changes(){const adds\x3dthis._adds,mods\x3dthis._mods;let i,n;i\x3d0;for(n\x3dthis._alen;i\x3cn;++i)this.celltuple(adds[i]),adds[i]\x3dnull;i\x3d0;for(n\x3dthis._mlen;i\x3cn;++i)this.celltuple(mods[i]),mods[i]\x3dnull;this._alen\x3dthis._mlen\x3d0}});KDE.Definition\x3d{type:\x22KDE\x22,metadata:{generates:!0},\nparams:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22cumulative\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22counts\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\x22default\x22:\x22independent\x22},{name:\x22steps\x22,type:\x22number\x22},{name:\x22minsteps\x22,type:\x22number\x22,\x22default\x22:25},{name:\x22maxsteps\x22,type:\x22number\x22,\x22default\x22:200},{name:\x22as\x22,type:\x22string\x22,\narray:!0,\x22default\x22:[\x22value\x22,\x22density\x22]}]};vegaUtil.inherits(KDE,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){pulse\x3dpulse.materialize(pulse.SOURCE).source;const groups\x3dpartition$1(pulse,_.groupby,_.field),names\x3d(_.groupby||[]).map(vegaUtil.accessorName),bandwidth\x3d_.bandwidth,method\x3d_.cumulative?\x22cdf\x22:\x22pdf\x22,as\x3d_.as||[\x22value\x22,\x22density\x22],values\x3d[];let domain\x3d_.extent,minsteps\x3d_.steps||_.minsteps||25,maxsteps\x3d\n_.steps||_.maxsteps||200;\x22pdf\x22!\x3d\x3dmethod\x26\x26\x22cdf\x22!\x3d\x3dmethod\x26\x26vegaUtil.error(\x22Invalid density method: \x22+method);\x22shared\x22\x3d\x3d\x3d_.resolve\x26\x26(domain||(domain\x3dvegaUtil.extent(pulse,_.field)),minsteps\x3dmaxsteps\x3d_.steps||maxsteps);groups.forEach(g\x3d\x3e{const density\x3dvegaStatistics.randomKDE(g,bandwidth)[method],scale\x3d_.counts?g.length:1,local\x3ddomain||vegaUtil.extent(g);vegaStatistics.sampleCurve(density,local,minsteps,maxsteps).forEach(v\x3d\x3e{const t\x3d{};for(let i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dv[0];\nt[as[1]]\x3dv[1]*scale;values.push(vegaDataflow.ingest(t))})});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues}return out}});vegaUtil.inherits(Key,vegaDataflow.Operator);vegaUtil.inherits(Load,vegaDataflow.Transform,{transform(_,pulse){const df$jscomp$0\x3dpulse.dataflow;return this._pending?output$jscomp$0(this,pulse,this._pending):stop$jscomp$0(_)?pulse.StopPropagation:_.values?output$jscomp$0(this,pulse,df$jscomp$0.parse(_.values,_.format)):_.async?{async:df$jscomp$0.request(_.url,\n_.format).then(res\x3d\x3e{this._pending\x3dvegaUtil.array(res.data);return df\x3d\x3edf.touch(this)})}:df$jscomp$0.request(_.url,_.format).then(res\x3d\x3eoutput$jscomp$0(this,pulse,vegaUtil.array(res.data)))}});Lookup.Definition\x3d{type:\x22Lookup\x22,metadata:{modifies:!0},params:[{name:\x22index\x22,type:\x22index\x22,params:[{name:\x22from\x22,type:\x22data\x22,required:!0},{name:\x22key\x22,type:\x22field\x22,required:!0}]},{name:\x22values\x22,type:\x22field\x22,array:!0},{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22as\x22,type:\x22string\x22,array:!0},{name:\x22default\x22,\n\x22default\x22:null}]};vegaUtil.inherits(Lookup,vegaDataflow.Transform,{transform(_,pulse){const keys\x3d_.fields,index\x3d_.index,values\x3d_.values,defaultValue\x3dnull\x3d\x3d_.default?null:_.default;var reset\x3d_.modified();const n\x3dkeys.length;let flag\x3dreset?pulse.SOURCE:pulse.ADD,out\x3dpulse,as\x3d_.as,m;values?(m\x3dvalues.length,1\x3cn\x26\x26!as\x26\x26vegaUtil.error(\x27Multi-field lookup requires explicit \x22as\x22 parameter.\x27),as\x26\x26as.length!\x3d\x3dn*m\x26\x26vegaUtil.error(\x27The \x22as\x22 parameter has too few output field names.\x27),as\x3das||values.map(vegaUtil.accessorName),\n_\x3dfunction(t){for(var i\x3d0,k\x3d0,j,v;i\x3cn;++i)if(v\x3dindex.get(keys[i](t)),null\x3d\x3dv)for(j\x3d0;j\x3cm;++j,++k)t[as[k]]\x3ddefaultValue;else for(j\x3d0;j\x3cm;++j,++k)t[as[k]]\x3dvalues[j](v)}):(as||vegaUtil.error(\x22Missing output field names.\x22),_\x3dfunction(t){for(var i\x3d0,v;i\x3cn;++i)v\x3dindex.get(keys[i](t)),t[as[i]]\x3dnull\x3d\x3dv?defaultValue:v});reset?out\x3dpulse.reflow(!0):(reset\x3dkeys.some(k\x3d\x3epulse.modified(k.fields)),flag|\x3dreset?pulse.MOD:0);pulse.visit(flag,_);return out.modifies(as)}});vegaUtil.inherits(MultiExtent,vegaDataflow.Operator);\nvegaUtil.inherits(MultiValues,vegaDataflow.Operator);vegaUtil.inherits(Params,vegaDataflow.Transform,{transform(_,pulse){this.modified(_.modified());this.value\x3d_;return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}});Pivot.Definition\x3d{type:\x22Pivot\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22value\x22,type:\x22field\x22,required:!0},{name:\x22op\x22,type:\x22enum\x22,values:noop,\x22default\x22:\x22sum\x22},{name:\x22limit\x22,type:\x22number\x22,\x22default\x22:0},\n{name:\x22key\x22,type:\x22field\x22}]};vegaUtil.inherits(Pivot,Aggregate,{_transform:Aggregate.prototype.transform,transform(_,pulse){return this._transform(aggregateParams(_,pulse),pulse)}});vegaUtil.inherits(PreFacet,Facet,{transform(_$jscomp$0,pulse){const flow\x3d_$jscomp$0.subflow,field\x3d_$jscomp$0.field,subflow\x3dt\x3d\x3ethis.subflow(vegaDataflow.tupleid(t),flow,pulse,t);(_$jscomp$0.modified(\x22field\x22)||field\x26\x26pulse.modified(vegaUtil.accessorFields(field)))\x26\x26vegaUtil.error(\x22PreFacet does not support field modification.\x22);\nthis.initTargets();field?(pulse.visit(pulse.MOD,t\x3d\x3e{const sf\x3dsubflow(t);field(t).forEach(_\x3d\x3esf.mod(_))}),pulse.visit(pulse.ADD,t\x3d\x3e{const sf\x3dsubflow(t);field(t).forEach(_\x3d\x3esf.add(vegaDataflow.ingest(_)))}),pulse.visit(pulse.REM,t\x3d\x3e{const sf\x3dsubflow(t);field(t).forEach(_\x3d\x3esf.rem(_))})):(pulse.visit(pulse.MOD,t\x3d\x3esubflow(t).mod(t)),pulse.visit(pulse.ADD,t\x3d\x3esubflow(t).add(t)),pulse.visit(pulse.REM,t\x3d\x3esubflow(t).rem(t)));pulse.clean()\x26\x26pulse.runAfter(()\x3d\x3ethis.clean());return pulse}});Project.Definition\x3d\n{type:\x22Project\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0}]};vegaUtil.inherits(Project,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE),fields\x3d_.fields,as\x3dfieldNames(_.fields,_.as||[]),derive\x3dfields?(s,t)\x3d\x3e{for(let i\x3d0,n\x3dfields.length;i\x3cn;++i)t[as[i]]\x3dfields[i](s);return t}:vegaDataflow.rederive;let lut;this.value?lut\x3dthis.value:(pulse\x3dpulse.addAll(),lut\x3dthis.value\x3d{});pulse.visit(pulse.REM,\nt\x3d\x3e{t\x3dvegaDataflow.tupleid(t);out.rem.push(lut[t]);lut[t]\x3dnull});pulse.visit(pulse.ADD,t\x3d\x3e{const dt\x3dderive(t,vegaDataflow.ingest({}));lut[vegaDataflow.tupleid(t)]\x3ddt;out.add.push(dt)});pulse.visit(pulse.MOD,t\x3d\x3e{out.mod.push(derive(t,lut[vegaDataflow.tupleid(t)]))});return out}});vegaUtil.inherits(Proxy,vegaDataflow.Transform,{transform(_,pulse){this.value\x3d_.value;return _.modified(\x22value\x22)?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation}});Quantile.Definition\x3d{type:\x22Quantile\x22,metadata:{generates:!0,\nchanges:!0},params:[{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22probs\x22,type:\x22number\x22,array:!0},{name:\x22step\x22,type:\x22number\x22,\x22default\x22:.01},{name:\x22as\x22,type:\x22string\x22,array:!0,\x22default\x22:[\x22prob\x22,\x22value\x22]}]};vegaUtil.inherits(Quantile,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),as\x3d_.as||[\x22prob\x22,\x22value\x22];if(this.value\x26\x26!_.modified()\x26\x26!pulse.changed())return out.source\x3dthis.value,out;pulse\x3dpulse.materialize(pulse.SOURCE).source;\npulse\x3dpartition$1(pulse,_.groupby,_.field);const names\x3d(_.groupby||[]).map(vegaUtil.accessorName),values\x3d[],step\x3d_.step||.01,p\x3d_.probs||d3Array.range(step/2,1-1E-14,step),n\x3dp.length;pulse.forEach(g\x3d\x3e{const q\x3dvegaStatistics.quantiles(g,p);for(let i$jscomp$0\x3d0;i$jscomp$0\x3cn;++i$jscomp$0){const t\x3d{};for(let i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dp[i$jscomp$0];t[as[1]]\x3dq[i$jscomp$0];values.push(vegaDataflow.ingest(t))}});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues;\nreturn out}});vegaUtil.inherits(Relay,vegaDataflow.Transform,{transform(_,pulse){let out,lut;this.value?lut\x3dthis.value:(out\x3dpulse\x3dpulse.addAll(),lut\x3dthis.value\x3d{});_.derive\x26\x26(out\x3dpulse.fork(pulse.NO_SOURCE),pulse.visit(pulse.REM,t\x3d\x3e{t\x3dvegaDataflow.tupleid(t);out.rem.push(lut[t]);lut[t]\x3dnull}),pulse.visit(pulse.ADD,t\x3d\x3e{const dt\x3dvegaDataflow.derive(t);lut[vegaDataflow.tupleid(t)]\x3ddt;out.add.push(dt)}),pulse.visit(pulse.MOD,t\x3d\x3e{const dt\x3dlut[vegaDataflow.tupleid(t)];for(const k in t)dt[k]\x3dt[k],out.modifies(k);\nout.mod.push(dt)}));return out}});Sample.Definition\x3d{type:\x22Sample\x22,metadata:{},params:[{name:\x22size\x22,type:\x22number\x22,\x22default\x22:1E3}]};vegaUtil.inherits(Sample,vegaDataflow.Transform,{transform(_,pulse){function update(t){let p,idx;res.length\x3cnum?res.push(t):(idx\x3d~~((cnt+1)*vegaStatistics.random()),idx\x3cres.length\x26\x26idx\x3e\x3dcap\x26\x26(p\x3dres[idx],map[vegaDataflow.tupleid(p)]\x26\x26out.rem.push(p),res[idx]\x3dt));++cnt}const out\x3dpulse.fork(pulse.NO_SOURCE);var mod\x3d_.modified(\x22size\x22);const num\x3d_.size,map\x3dthis.value.reduce((m,\nt)\x3d\x3e(m[vegaDataflow.tupleid(t)]\x3d1,m),{});let res\x3dthis.value,cnt\x3dthis.count,cap\x3d0;pulse.rem.length\x26\x26(pulse.visit(pulse.REM,t\x3d\x3e{const id\x3dvegaDataflow.tupleid(t);map[id]\x26\x26(map[id]\x3d-1,out.rem.push(t));--cnt}),res\x3dres.filter(t\x3d\x3e-1!\x3d\x3dmap[vegaDataflow.tupleid(t)]));(pulse.rem.length||mod)\x26\x26res.length\x3cnum\x26\x26pulse.source\x26\x26(cap\x3dcnt\x3dres.length,pulse.visit(pulse.SOURCE,t\x3d\x3e{map[vegaDataflow.tupleid(t)]||update(t)}),cap\x3d-1);if(mod\x26\x26res.length\x3enum){_\x3dres.length-num;for(mod\x3d0;mod\x3c_;++mod)map[vegaDataflow.tupleid(res[mod])]\x3d\n-1,out.rem.push(res[mod]);res\x3dres.slice(_)}pulse.mod.length\x26\x26pulse.visit(pulse.MOD,t\x3d\x3e{map[vegaDataflow.tupleid(t)]\x26\x26out.mod.push(t)});pulse.add.length\x26\x26pulse.visit(pulse.ADD,update);if(pulse.add.length||0\x3ecap)out.add\x3dres.filter(t\x3d\x3e!map[vegaDataflow.tupleid(t)]);this.count\x3dcnt;this.value\x3dout.source\x3dres;return out}});Sequence.Definition\x3d{type:\x22Sequence\x22,metadata:{generates:!0,changes:!0},params:[{name:\x22start\x22,type:\x22number\x22,required:!0},{name:\x22stop\x22,type:\x22number\x22,required:!0},{name:\x22step\x22,type:\x22number\x22,\n\x22default\x22:1},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22data\x22}]};vegaUtil.inherits(Sequence,vegaDataflow.Transform,{transform(_,pulse){if(!this.value||_.modified()){var out\x3dpulse.materialize().fork(pulse.MOD),as\x3d_.as||\x22data\x22;out.rem\x3dthis.value?pulse.rem.concat(this.value):pulse.rem;this.value\x3dd3Array.range(_.start,_.stop,_.step||1).map(v\x3d\x3e{const t\x3d{};t[as]\x3dv;return vegaDataflow.ingest(t)});out.add\x3dpulse.add.concat(this.value);return out}}});vegaUtil.inherits(Sieve,vegaDataflow.Transform,{transform(_,pulse){this.value\x3d\npulse.source;return pulse.changed()?pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS):pulse.StopPropagation}});const OUTPUT\x3d[\x22unit0\x22,\x22unit1\x22];TimeUnit.Definition\x3d{type:\x22TimeUnit\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22,required:!0},{name:\x22interval\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22units\x22,type:\x22enum\x22,values:vegaTime.TIME_UNITS,array:!0},{name:\x22step\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22maxbins\x22,type:\x22number\x22,\x22default\x22:40},{name:\x22extent\x22,type:\x22date\x22,array:!0},{name:\x22timezone\x22,type:\x22enum\x22,\n\x22default\x22:\x22local\x22,values:[\x22local\x22,\x22utc\x22]},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:OUTPUT}]};vegaUtil.inherits(TimeUnit,vegaDataflow.Transform,{transform(_,pulse){const field\x3d_.field,band\x3d!1!\x3d\x3d_.interval;var utc\x3d\x22utc\x22\x3d\x3d\x3d_.timezone;const floor\x3dthis._floor(_,pulse),offset\x3d(utc?vegaTime.utcInterval:vegaTime.timeInterval)(floor.unit).offset;utc\x3d_.as||OUTPUT;const u0\x3dutc[0],u1\x3dutc[1],step\x3dfloor.step;let min\x3dfloor.start||Infinity,max\x3dfloor.stop||-Infinity,flag\x3dpulse.ADD;if(_.modified()||pulse.modified(vegaUtil.accessorFields(field)))pulse\x3d\npulse.reflow(!0),flag\x3dpulse.SOURCE,min\x3dInfinity,max\x3d-Infinity;pulse.visit(flag,t\x3d\x3e{var v\x3dfield(t);let b;null\x3d\x3dv?(t[u0]\x3dnull,band\x26\x26(t[u1]\x3dnull)):(t[u0]\x3dv\x3db\x3dfloor(v),band\x26\x26(t[u1]\x3db\x3doffset(v,step)),v\x3cmin\x26\x26(min\x3dv),b\x3emax\x26\x26(max\x3db))});floor.start\x3dmin;floor.stop\x3dmax;return pulse.modifies(band?utc:u0)},_floor(_,pulse){var utc\x3d\x22utc\x22\x3d\x3d\x3d_.timezone;const {units,step}\x3d_.units?{units:_.units,step:_.step||1}:vegaTime.timeBin({extent:_.extent||vegaUtil.extent(pulse.materialize(pulse.SOURCE).source,_.field),maxbins:_.maxbins});\n_\x3dvegaTime.timeUnits(units);pulse\x3dthis.value||{};utc\x3d(utc?vegaTime.utcFloor:vegaTime.timeFloor)(_,step);utc.unit\x3dvegaUtil.peek(_);utc.units\x3d_;utc.step\x3dstep;utc.start\x3dpulse.start;utc.stop\x3dpulse.stop;return this.value\x3dutc}});vegaUtil.inherits(TupleIndex,vegaDataflow.Transform,{transform(_,pulse){const df\x3dpulse.dataflow,field\x3d_.field,index\x3dthis.value,set\x3dt\x3d\x3eindex.set(field(t),t);let mod\x3d!0;_.modified(\x22field\x22)||pulse.modified(field.fields)?(index.clear(),pulse.visit(pulse.SOURCE,set)):pulse.changed()?\n(pulse.visit(pulse.REM,t\x3d\x3eindex.delete(field(t))),pulse.visit(pulse.ADD,set)):mod\x3d!1;this.modified(mod);index.empty\x3edf.cleanThreshold\x26\x26df.runAfter(index.clean);return pulse.fork()}});vegaUtil.inherits(Values,vegaDataflow.Transform,{transform(_,pulse){if(!this.value||_.modified(\x22field\x22)||_.modified(\x22sort\x22)||pulse.changed()||_.sort\x26\x26pulse.modified(_.sort.fields))this.value\x3d(_.sort?pulse.source.slice().sort(vegaDataflow.stableCompare(_.sort)):pulse.source).map(_.field)}});const WindowOps\x3d{row_number:function(){return{next:w\x3d\x3e\nw.index+1}},rank:function(){let rank;return{init:()\x3d\x3erank\x3d1,next:w\x3d\x3e{const i\x3dw.index,data\x3dw.data;return i\x26\x26w.compare(data[i-1],data[i])?rank\x3di+1:rank}}},dense_rank:function(){let drank;return{init:()\x3d\x3edrank\x3d1,next:w\x3d\x3e{const i\x3dw.index,d\x3dw.data;return i\x26\x26w.compare(d[i-1],d[i])?++drank:drank}}},percent_rank:function(){const rank\x3dWindowOps.rank(),next\x3drank.next;return{init:rank.init,next:w\x3d\x3e(next(w)-1)/(w.data.length-1)}},cume_dist:function(){let cume;return{init:()\x3d\x3ecume\x3d0,next:w\x3d\x3e{const d\x3dw.data,c\x3d\nw.compare;w\x3dw.index;if(cume\x3cw){for(;w+1\x3cd.length\x26\x26!c(d[w],d[w+1]);)++w;cume\x3dw}return(1+cume)/d.length}}},ntile:function(field,num){num\x3d+num;0\x3cnum||vegaUtil.error(\x22ntile num must be greater than zero.\x22);field\x3dWindowOps.cume_dist();const next\x3dfield.next;return{init:field.init,next:w\x3d\x3eMath.ceil(num*next(w))}},lag:function(field,offset){offset\x3d+offset||1;return{next:w\x3d\x3e{const i\x3dw.index-offset;return 0\x3c\x3di?field(w.data[i]):null}}},lead:function(field,offset){offset\x3d+offset||1;return{next:w\x3d\x3e{const i\x3dw.index+\noffset;w\x3dw.data;return i\x3cw.length?field(w[i]):null}}},first_value:function(field){return{next:w\x3d\x3efield(w.data[w.i0])}},last_value:function(field){return{next:w\x3d\x3efield(w.data[w.i1-1])}},nth_value:function(field,nth){nth\x3d+nth;0\x3cnth||vegaUtil.error(\x22nth_value nth must be greater than zero.\x22);return{next:w\x3d\x3e{const i\x3dw.i0+(nth-1);return i\x3cw.i1?field(w.data[i]):null}}},prev_value:function(field){let prev;return{init:()\x3d\x3eprev\x3dnull,next:w\x3d\x3e{w\x3dfield(w.data[w.index]);return null!\x3dw?prev\x3dw:prev}}},next_value:function(field){let v,\ni;return{init:()\x3d\x3e(v\x3dnull,i\x3d-1),next:w\x3d\x3e{var d\x3dw.data;if(w.index\x3c\x3di)d\x3dv;else{a:{w\x3dw.index;for(let n\x3dd.length;w\x3cn;++w)if(null!\x3dfield(d[w]))break a;w\x3d-1}d\x3d0\x3e(i\x3dw)?(i\x3dd.length,v\x3dnull):v\x3dfield(d[i])}return d}}}};prototype$1\x3dObject.keys(WindowOps);const prototype\x3dWindowState.prototype;prototype.init\x3dfunction(){this.windows.forEach(_\x3d\x3e_.init());this.cell\x26\x26this.cell.init()};prototype.update\x3dfunction(w,t){const cell\x3dthis.cell,wind\x3dthis.windows,data\x3dw.data,m\x3dwind\x26\x26wind.length;let j;if(cell){for(j\x3dw.p0;j\x3cw.i0;++j)cell.rem(data[j]);\nfor(j\x3dw.p1;j\x3cw.i1;++j)cell.add(data[j]);cell.set(t)}for(j\x3d0;j\x3cm;++j)wind[j].update(w,t)};Window.Definition\x3d{type:\x22Window\x22,metadata:{modifies:!0},params:[{name:\x22sort\x22,type:\x22compare\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22ops\x22,type:\x22enum\x22,array:!0,values:prototype$1.concat(noop)},{name:\x22params\x22,type:\x22number\x22,\x22null\x22:!0,array:!0},{name:\x22fields\x22,type:\x22field\x22,\x22null\x22:!0,array:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,array:!0},{name:\x22frame\x22,type:\x22number\x22,\x22null\x22:!0,array:!0,length:2,\x22default\x22:[null,\n0]},{name:\x22ignorePeers\x22,type:\x22boolean\x22,\x22default\x22:!1}]};vegaUtil.inherits(Window,vegaDataflow.Transform,{transform(_,pulse){this.stamp\x3dpulse.stamp;const mod\x3d_.modified(),cmp\x3dvegaDataflow.stableCompare(_.sort),key\x3dgroupkey(_.groupby),group\x3dt\x3d\x3ethis.group(key(t));let state\x3dthis.state;if(!state||mod)state\x3dthis.state\x3dnew WindowState(_);mod||pulse.modified(state.inputs)?(this.value\x3d{},pulse.visit(pulse.SOURCE,t\x3d\x3egroup(t).add(t))):(pulse.visit(pulse.REM,t\x3d\x3egroup(t).remove(t)),pulse.visit(pulse.ADD,t\x3d\x3egroup(t).add(t)));\nfor(let i\x3d0,n\x3dthis._mlen;i\x3cn;++i)processPartition(this._mods[i],state,cmp,_);this._mlen\x3d0;this._mods\x3d[];return pulse.reflow(mod).modifies(state.outputs)},group(key){let group\x3dthis.value[key];group||(group\x3dthis.value[key]\x3dSortedList(vegaDataflow.tupleid),group.stamp\x3d-1);group.stamp\x3cthis.stamp\x26\x26(group.stamp\x3dthis.stamp,this._mods[this._mlen++]\x3dgroup);return group}});exports.aggregate\x3dAggregate;exports.bin\x3dBin;exports.collect\x3dCollect;exports.compare\x3dCompare;exports.countpattern\x3dCountPattern;exports.cross\x3d\nCross;exports.density\x3dDensity;exports.dotbin\x3dDotBin;exports.expression\x3dExpression;exports.extent\x3dExtent;exports.facet\x3dFacet;exports.field\x3dField;exports.filter\x3dFilter;exports.flatten\x3dFlatten;exports.fold\x3dFold;exports.formula\x3dFormula;exports.generate\x3dGenerate;exports.impute\x3dImpute;exports.joinaggregate\x3dJoinAggregate;exports.kde\x3dKDE;exports.key\x3dKey;exports.load\x3dLoad;exports.lookup\x3dLookup;exports.multiextent\x3dMultiExtent;exports.multivalues\x3dMultiValues;exports.params\x3dParams;exports.pivot\x3dPivot;exports.prefacet\x3d\nPreFacet;exports.project\x3dProject;exports.proxy\x3dProxy;exports.quantile\x3dQuantile;exports.relay\x3dRelay;exports.sample\x3dSample;exports.sequence\x3dSequence;exports.sieve\x3dSieve;exports.subflow\x3dSubflow;exports.timeunit\x3dTimeUnit;exports.tupleindex\x3dTupleIndex;exports.values\x3dValues;exports.window\x3dWindow;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_path$dist$d3_path.js", true , "shadow$provide.module$node_modules$d3_path$dist$d3_path\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function Path(){this._x0\x3dthis._y0\x3dthis._x1\x3dthis._y1\x3dnull;this._\x3d\x22\x22}function path(){return new Path}const pi\x3dMath.PI,tau\x3d2*pi,\ntauEpsilon\x3dtau-1E-6;Path.prototype\x3dpath.prototype\x3d{constructor:Path,moveTo:function(x,y){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3dthis._y1\x3d+y)},closePath:function(){null!\x3d\x3dthis._x1\x26\x26(this._x1\x3dthis._x0,this._y1\x3dthis._y0,this._+\x3d\x22Z\x22)},lineTo:function(x,y){this._+\x3d\x22L\x22+(this._x1\x3d+x)+\x22,\x22+(this._y1\x3d+y)},quadraticCurveTo:function(x1,y1,x,y){this._+\x3d\x22Q\x22+ +x1+\x22,\x22+ +y1+\x22,\x22+(this._x1\x3d+x)+\x22,\x22+(this._y1\x3d+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+\x3d\x22C\x22+ +x1+\x22,\x22+ +y1+\x22,\x22+ +x2+\x22,\x22+ +y2+\x22,\x22+(this._x1\x3d\n+x)+\x22,\x22+(this._y1\x3d+y)},arcTo:function(x1,y1,x2,y2,r){x1\x3d+x1;y1\x3d+y1;x2\x3d+x2;y2\x3d+y2;r\x3d+r;var x0\x3dthis._x1,y0\x3dthis._y1,x21\x3dx2-x1,y21\x3dy2-y1,x01\x3dx0-x1,y01\x3dy0-y1,l01_2\x3dx01*x01+y01*y01;if(0\x3er)throw Error(\x22negative radius: \x22+r);if(null\x3d\x3d\x3dthis._x1)this._+\x3d\x22M\x22+(this._x1\x3dx1)+\x22,\x22+(this._y1\x3dy1);else if(1E-6\x3cl01_2)if(1E-6\x3cMath.abs(y01*x21-y21*x01)\x26\x26r){x2-\x3dx0;y2-\x3dy0;var l21_2\x3dx21*x21+y21*y21;y0\x3dMath.sqrt(l21_2);x0\x3dMath.sqrt(l01_2);l01_2\x3dr*Math.tan((pi-Math.acos((l21_2+l01_2-(x2*x2+y2*y2))/(2*y0*x0)))/2);x0\x3dl01_2/\nx0;l01_2/\x3dy0;1E-6\x3cMath.abs(x0-1)\x26\x26(this._+\x3d\x22L\x22+(x1+x0*x01)+\x22,\x22+(y1+x0*y01));this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,0,\x22+ +(y01*x2\x3ex01*y2)+\x22,\x22+(this._x1\x3dx1+l01_2*x21)+\x22,\x22+(this._y1\x3dy1+l01_2*y21)}else this._+\x3d\x22L\x22+(this._x1\x3dx1)+\x22,\x22+(this._y1\x3dy1)},arc:function(x,y,r,a0,a1,ccw){x\x3d+x;y\x3d+y;r\x3d+r;ccw\x3d!!ccw;var dx\x3dr*Math.cos(a0),dy\x3dr*Math.sin(a0),x0\x3dx+dx,y0\x3dy+dy,cw\x3d1^ccw;a0\x3dccw?a0-a1:a1-a0;if(0\x3er)throw Error(\x22negative radius: \x22+r);if(null\x3d\x3d\x3dthis._x1)this._+\x3d\x22M\x22+x0+\x22,\x22+y0;else if(1E-6\x3cMath.abs(this._x1-x0)||1E-6\x3cMath.abs(this._y1-\ny0))this._+\x3d\x22L\x22+x0+\x22,\x22+y0;r\x26\x26(0\x3ea0\x26\x26(a0\x3da0%tau+tau),a0\x3etauEpsilon?this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,1,\x22+cw+\x22,\x22+(x-dx)+\x22,\x22+(y-dy)+\x22A\x22+r+\x22,\x22+r+\x22,0,1,\x22+cw+\x22,\x22+(this._x1\x3dx0)+\x22,\x22+(this._y1\x3dy0):1E-6\x3ca0\x26\x26(this._+\x3d\x22A\x22+r+\x22,\x22+r+\x22,0,\x22+ +(a0\x3e\x3dpi)+\x22,\x22+cw+\x22,\x22+(this._x1\x3dx+r*Math.cos(a1))+\x22,\x22+(this._y1\x3dy+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+\x3d\x22M\x22+(this._x0\x3dthis._x1\x3d+x)+\x22,\x22+(this._y0\x3dthis._y1\x3d+y)+\x22h\x22+ +w+\x22v\x22+ +h+\x22h\x22+-w+\x22Z\x22},toString:function(){return this._}};exports.path\x3dpath;Object.defineProperty(exports,\x22__esModule\x22,\n{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_shape$dist$d3_shape.js", true , "shadow$provide.module$node_modules$d3_shape$dist$d3_shape\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_path$dist$d3_path\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-path\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Path){function constant(x){return function(){return x}}\nfunction asin(x){return 1\x3c\x3dx?halfPi:-1\x3e\x3dx?-halfPi:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d\x26\x26d.padAngle}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01\x3dx0-x1,y01\x3dy0-y1;cw\x3d(cw?rc:-rc)/sqrt(x01*x01+y01*y01);y01*\x3dcw;x01*\x3d-cw;var x11\x3dx0+y01,y11\x3dy0+x01,x10\x3dx1+y01,y10\x3dy1+x01;x1\x3d(x11+x10)/2;y1\x3d(y11+y10)/2;y0\x3dx10-\nx11;x0\x3dy10-y11;cw\x3dy0*y0+x0*x0;rc\x3dr1-rc;y10\x3dx11*y10-x10*y11;var d\x3d(0\x3ex0?-1:1)*sqrt(max(0,rc*rc*cw-y10*y10));x11\x3d(y10*x0-y0*d)/cw;y11\x3d(-y10*y0-x0*d)/cw;x10\x3d(y10*x0+y0*d)/cw;y0\x3d(-y10*y0+x0*d)/cw;x0\x3dx11-x1;cw\x3dy11-y1;x1\x3dx10-x1;y1\x3dy0-y1;x0*x0+cw*cw\x3ex1*x1+y1*y1\x26\x26(x11\x3dx10,y11\x3dy0);return{cx:x11,cy:y11,x01:-y01,y01:-x01,x11:x11*(r1/rc-1),y11:y11*(r1/rc-1)}}function array(x){return\x22object\x22\x3d\x3d\x3dtypeof x\x26\x26\x22length\x22in x?x:Array.from(x)}function Linear(context){this._context\x3dcontext}function curveLinear(context){return new Linear(context)}\nfunction x$jscomp$0(p){return p[0]}function y$jscomp$0(p){return p[1]}function line$jscomp$0(x$1,y$1){function line(data){var i,n\x3d(data\x3darray(data)).length,d,defined0\x3d!1,buffer;null\x3d\x3dcontext\x26\x26(output\x3dcurve(buffer\x3dd3Path.path()));for(i\x3d0;i\x3c\x3dn;++i)!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0\x26\x26((defined0\x3d!defined0)?output.lineStart():output.lineEnd()),defined0\x26\x26output.point(+x$1(d,i,data),+y$1(d,i,data));if(buffer)return output\x3dnull,buffer+\x22\x22||null}var defined\x3dconstant(!0),context\x3dnull,curve\x3dcurveLinear,\noutput\x3dnull;x$1\x3d\x22function\x22\x3d\x3d\x3dtypeof x$1?x$1:void 0\x3d\x3d\x3dx$1?x$jscomp$0:constant(x$1);y$1\x3d\x22function\x22\x3d\x3d\x3dtypeof y$1?y$1:void 0\x3d\x3d\x3dy$1?y$jscomp$0:constant(y$1);line.x\x3dfunction(_){return arguments.length?(x$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),line):x$1};line.y\x3dfunction(_){return arguments.length?(y$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),line):y$1};line.defined\x3dfunction(_){return arguments.length?(defined\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(!!_),line):defined};line.curve\x3dfunction(_){return arguments.length?\n(curve\x3d_,null!\x3dcontext\x26\x26(output\x3dcurve(context)),line):curve};line.context\x3dfunction(_){return arguments.length?(null\x3d\x3d_?context\x3doutput\x3dnull:output\x3dcurve(context\x3d_),line):context};return line}function area$jscomp$0(x0,y0,y1){function area(data){var i,k,n\x3d(data\x3darray(data)).length,d,defined0\x3d!1,buffer,x0z\x3dArray(n),y0z\x3dArray(n);null\x3d\x3dcontext\x26\x26(output\x3dcurve(buffer\x3dd3Path.path()));for(i\x3d0;i\x3c\x3dn;++i){if(!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0)if(defined0\x3d!defined0){var j\x3di;output.areaStart();output.lineStart()}else{output.lineEnd();\noutput.lineStart();for(k\x3di-1;k\x3e\x3dj;--k)output.point(x0z[k],y0z[k]);output.lineEnd();output.areaEnd()}defined0\x26\x26(x0z[i]\x3d+x0(d,i,data),y0z[i]\x3d+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output\x3dnull,buffer+\x22\x22||null}function arealine(){return line$jscomp$0().defined(defined).curve(curve).context(context)}var x1\x3dnull,defined\x3dconstant(!0),context\x3dnull,curve\x3dcurveLinear,output\x3dnull;x0\x3d\x22function\x22\x3d\x3d\x3dtypeof x0?x0:void 0\x3d\x3d\x3dx0?x$jscomp$0:constant(+x0);y0\x3d\x22function\x22\x3d\x3d\x3d\ntypeof y0?y0:void 0\x3d\x3d\x3dy0?constant(0):constant(+y0);y1\x3d\x22function\x22\x3d\x3d\x3dtypeof y1?y1:void 0\x3d\x3d\x3dy1?y$jscomp$0:constant(+y1);area.x\x3dfunction(_){return arguments.length?(x0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),x1\x3dnull,area):x0};area.x0\x3dfunction(_){return arguments.length?(x0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):x0};area.x1\x3dfunction(_){return arguments.length?(x1\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):x1};area.y\x3dfunction(_){return arguments.length?(y0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),\ny1\x3dnull,area):y0};area.y0\x3dfunction(_){return arguments.length?(y0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):y0};area.y1\x3dfunction(_){return arguments.length?(y1\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),area):y1};area.lineX0\x3darea.lineY0\x3dfunction(){return arealine().x(x0).y(y0)};area.lineY1\x3dfunction(){return arealine().x(x0).y(y1)};area.lineX1\x3dfunction(){return arealine().x(x1).y(y0)};area.defined\x3dfunction(_){return arguments.length?(defined\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(!!_),area):defined};\narea.curve\x3dfunction(_){return arguments.length?(curve\x3d_,null!\x3dcontext\x26\x26(output\x3dcurve(context)),area):curve};area.context\x3dfunction(_){return arguments.length?(null\x3d\x3d_?context\x3doutput\x3dnull:output\x3dcurve(context\x3d_),area):context};return area}function descending$1(a,b){return b\x3ca?-1:b\x3ea?1:b\x3e\x3da?0:NaN}function identity(d){return d}function Radial(curve){this._curve\x3dcurve}function curveRadial$1(curve){function radial(context){return new Radial(curve(context))}radial._curve\x3dcurve;return radial}function lineRadial(l){var c\x3d\nl.curve;l.angle\x3dl.x;delete l.x;l.radius\x3dl.y;delete l.y;l.curve\x3dfunction(_){return arguments.length?c(curveRadial$1(_)):c()._curve};return l}function lineRadial$1(){return lineRadial(line$jscomp$0().curve(curveRadialLinear))}function areaRadial(){var a\x3darea$jscomp$0().curve(curveRadialLinear),c\x3da.curve,x0\x3da.lineX0,x1\x3da.lineX1,y0\x3da.lineY0,y1\x3da.lineY1;a.angle\x3da.x;delete a.x;a.startAngle\x3da.x0;delete a.x0;a.endAngle\x3da.x1;delete a.x1;a.radius\x3da.y;delete a.y;a.innerRadius\x3da.y0;delete a.y0;a.outerRadius\x3d\na.y1;delete a.y1;a.lineStartAngle\x3dfunction(){return lineRadial(x0())};delete a.lineX0;a.lineEndAngle\x3dfunction(){return lineRadial(x1())};delete a.lineX1;a.lineInnerRadius\x3dfunction(){return lineRadial(y0())};delete a.lineY0;a.lineOuterRadius\x3dfunction(){return lineRadial(y1())};delete a.lineY1;a.curve\x3dfunction(_){return arguments.length?c(curveRadial$1(_)):c()._curve};return a}function pointRadial(x,y){return[(y\x3d+y)*Math.cos(x-\x3dMath.PI/2),y*Math.sin(x)]}function linkSource(d){return d.source}function linkTarget(d){return d.target}\nfunction link$jscomp$0(curve){function link(){var buffer,argv\x3dslice.call(arguments),s\x3dsource.apply(this,argv),t\x3dtarget.apply(this,argv);context||(context\x3dbuffer\x3dd3Path.path());curve(context,+x$1.apply(this,(argv[0]\x3ds,argv)),+y$1.apply(this,argv),+x$1.apply(this,(argv[0]\x3dt,argv)),+y$1.apply(this,argv));if(buffer)return context\x3dnull,buffer+\x22\x22||null}var source\x3dlinkSource,target\x3dlinkTarget,x$1\x3dx$jscomp$0,y$1\x3dy$jscomp$0,context\x3dnull;link.source\x3dfunction(_){return arguments.length?(source\x3d_,link):source};\nlink.target\x3dfunction(_){return arguments.length?(target\x3d_,link):target};link.x\x3dfunction(_){return arguments.length?(x$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),link):x$1};link.y\x3dfunction(_){return arguments.length?(y$1\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),link):y$1};link.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,link):context};return link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0\x3d(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,\nx0,y0,x1,y1){context.moveTo(x0,y0);context.bezierCurveTo(x0,y0\x3d(y0+y1)/2,x1,y0,x1,y1)}function curveRadial(context,x0,y0,x1,y1){var p0\x3dpointRadial(x0,y0);x0\x3dpointRadial(x0,y0\x3d(y0+y1)/2);y0\x3dpointRadial(x1,y0);x1\x3dpointRadial(x1,y1);context.moveTo(p0[0],p0[1]);context.bezierCurveTo(x0[0],x0[1],y0[0],y0[1],x1[0],x1[1])}function noop(){}function point$3(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+\nx)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context\x3dcontext}function BasisClosed(context){this._context\x3dcontext}function BasisOpen(context){this._context\x3dcontext}function Bundle(context,beta){this._basis\x3dnew Basis(context);this._beta\x3dbeta}function point$2(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context\x3d\ncontext;this._k\x3d(1-tension)/6}function CardinalClosed(context,tension){this._context\x3dcontext;this._k\x3d(1-tension)/6}function CardinalOpen(context,tension){this._context\x3dcontext;this._k\x3d(1-tension)/6}function point$1(that,x,y){var x1\x3dthat._x1,y1\x3dthat._y1,x2\x3dthat._x2,y2\x3dthat._y2;if(1E-12\x3cthat._l01_a){var a\x3d2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n\x3d3*that._l01_a*(that._l01_a+that._l12_a);x1\x3d(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n;y1\x3d(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/\nn}1E-12\x3cthat._l23_a\x26\x26(a\x3d2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,n\x3d3*that._l23_a*(that._l23_a+that._l12_a),x2\x3d(x2*a+that._x1*that._l23_2a-x*that._l12_2a)/n,y2\x3d(y2*a+that._y1*that._l23_2a-y*that._l12_2a)/n);that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context\x3dcontext;this._alpha\x3dalpha}function CatmullRomClosed(context,alpha){this._context\x3dcontext;this._alpha\x3dalpha}function CatmullRomOpen(context,alpha){this._context\x3dcontext;this._alpha\x3d\nalpha}function LinearClosed(context){this._context\x3dcontext}function slope3(that,x2,y2){var h0\x3dthat._x1-that._x0;x2-\x3dthat._x1;var s0\x3d(that._y1-that._y0)/(h0||0\x3ex2\x26\x26-0);that\x3d(y2-that._y1)/(x2||0\x3eh0\x26\x26-0);return((0\x3es0?-1:1)+(0\x3ethat?-1:1))*Math.min(Math.abs(s0),Math.abs(that),.5*Math.abs((s0*x2+that*h0)/(h0+x2)))||0}function slope2(that,t){var h\x3dthat._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function point(that,t0,t1){var x0\x3dthat._x0,x1\x3dthat._x1,y1\x3dthat._y1,dx\x3d(x1-x0)/3;that._context.bezierCurveTo(x0+\ndx,that._y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context\x3dcontext}function MonotoneY(context){this._context\x3dnew ReflectContext(context)}function ReflectContext(context){this._context\x3dcontext}function Natural(context){this._context\x3dcontext}function controlPoints(x){var i,n\x3dx.length-1,a\x3dArray(n),b\x3dArray(n),r\x3dArray(n);a[0]\x3d0;b[0]\x3d2;r[0]\x3dx[0]+2*x[1];for(i\x3d1;i\x3cn-1;++i)a[i]\x3d1,b[i]\x3d4,r[i]\x3d4*x[i]+2*x[i+1];a[n-1]\x3d2;b[n-1]\x3d7;r[n-1]\x3d8*x[n-1]+x[n];for(i\x3d1;i\x3cn;++i){var m\x3da[i]/b[i-1];b[i]-\x3d\nm;r[i]-\x3dm*r[i-1]}a[n-1]\x3dr[n-1]/b[n-1];for(i\x3dn-2;0\x3c\x3di;--i)a[i]\x3d(r[i]-a[i+1])/b[i];b[n-1]\x3d(x[n]+a[n-1])/2;for(i\x3d0;i\x3cn-1;++i)b[i]\x3d2*x[i+1]-a[i+1];return[a,b]}function Step(context,t){this._context\x3dcontext;this._t\x3dt}function none$1(series,order){if(1\x3c(n\x3dseries.length))for(var i\x3d1,j,s0,s1\x3dseries[order[0]],n,m\x3ds1.length;i\x3cn;++i)for(s0\x3ds1,s1\x3dseries[order[i]],j\x3d0;j\x3cm;++j)s1[j][1]+\x3ds1[j][0]\x3disNaN(s0[j][1])?s0[j][0]:s0[j][1]}function none(series){series\x3dseries.length;for(var o\x3dArray(series);0\x3c\x3d--series;)o[series]\x3d\nseries;return o}function stackValue(d,key){return d[key]}function stackSeries(key){const series\x3d[];series.key\x3dkey;return series}function appearance(series){var peaks\x3dseries.map(peak);return none(series).sort(function(a,b){return peaks[a]-peaks[b]})}function peak(series){for(var i\x3d-1,j\x3d0,n\x3dseries.length,vi,vj\x3d-Infinity;++i\x3cn;)(vi\x3d+series[i][1])\x3evj\x26\x26(vj\x3dvi,j\x3di);return j}function ascending(series){var sums\x3dseries.map(sum);return none(series).sort(function(a,b){return sums[a]-sums[b]})}function sum(series){for(var s\x3d\n0,i\x3d-1,n\x3dseries.length,v;++i\x3cn;)if(v\x3d+series[i][1])s+\x3dv;return s}var abs\x3dMath.abs,atan2\x3dMath.atan2,cos\x3dMath.cos,max\x3dMath.max,min\x3dMath.min,sin\x3dMath.sin,sqrt\x3dMath.sqrt,pi\x3dMath.PI,halfPi\x3dpi/2,tau\x3d2*pi,slice\x3dArray.prototype.slice;Linear.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;default:this._context.lineTo(x,y)}}};var curveRadialLinear\x3dcurveRadial$1(curveLinear);Radial.prototype\x3d{areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};var circle\x3d{draw:function(context,size){size\x3dMath.sqrt(size/\npi);context.moveTo(size,0);context.arc(0,0,size,0,tau)}},cross\x3d{draw:function(context,size){size\x3dMath.sqrt(size/5)/2;context.moveTo(-3*size,-size);context.lineTo(-size,-size);context.lineTo(-size,-3*size);context.lineTo(size,-3*size);context.lineTo(size,-size);context.lineTo(3*size,-size);context.lineTo(3*size,size);context.lineTo(size,size);context.lineTo(size,3*size);context.lineTo(-size,3*size);context.lineTo(-size,size);context.lineTo(-3*size,size);context.closePath()}},tan30\x3dMath.sqrt(1/3),tan30_2\x3d\n2*tan30,diamond\x3d{draw:function(context,size){size\x3dMath.sqrt(size/tan30_2);var x\x3dsize*tan30;context.moveTo(0,-size);context.lineTo(x,0);context.lineTo(0,size);context.lineTo(-x,0);context.closePath()}},kr\x3dMath.sin(pi/10)/Math.sin(7*pi/10),kx\x3dMath.sin(tau/10)*kr,ky\x3d-Math.cos(tau/10)*kr,star\x3d{draw:function(context,size){size\x3dMath.sqrt(.8908130915292852*size);var x\x3dkx*size,y\x3dky*size;context.moveTo(0,-size);context.lineTo(x,y);for(var i\x3d1;5\x3ei;++i){var a\x3dtau*i/5,c\x3dMath.cos(a);a\x3dMath.sin(a);context.lineTo(a*\nsize,-c*size);context.lineTo(c*x-a*y,a*x+c*y)}context.closePath()}},square\x3d{draw:function(context,size){size\x3dMath.sqrt(size);var x\x3d-size/2;context.rect(x,x,size,size)}},sqrt3\x3dMath.sqrt(3),triangle\x3d{draw:function(context,size){size\x3d-Math.sqrt(size/(3*sqrt3));context.moveTo(0,2*size);context.lineTo(-sqrt3*size,-size);context.lineTo(sqrt3*size,-size);context.closePath()}},s$jscomp$0\x3dMath.sqrt(3)/2,k$jscomp$0\x3d1/Math.sqrt(12),a$jscomp$0\x3d3*(k$jscomp$0/2+1),wye\x3d{draw:function(context,size){var r\x3dMath.sqrt(size/\na$jscomp$0);size\x3dr/2;var y0\x3dr*k$jscomp$0;r\x3dr*k$jscomp$0+r;var x2\x3d-size;context.moveTo(size,y0);context.lineTo(size,r);context.lineTo(x2,r);context.lineTo(-.5*size-s$jscomp$0*y0,s$jscomp$0*size+-.5*y0);context.lineTo(-.5*size-s$jscomp$0*r,s$jscomp$0*size+-.5*r);context.lineTo(-.5*x2-s$jscomp$0*r,s$jscomp$0*x2+-.5*r);context.lineTo(-.5*size+s$jscomp$0*y0,-.5*y0-s$jscomp$0*size);context.lineTo(-.5*size+s$jscomp$0*r,-.5*r-s$jscomp$0*size);context.lineTo(-.5*x2+s$jscomp$0*r,-.5*r-s$jscomp$0*x2);context.closePath()}},\nsymbols\x3d[circle,cross,diamond,square,star,triangle,wye];Basis.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._y0\x3dthis._y1\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;case 2:this._point\x3d3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};BasisClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dthis._y3\x3dthis._y4\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,\nthis._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._x2\x3dx;this._y2\x3dy;break;case 1:this._point\x3d2;this._x3\x3dx;this._y3\x3dy;break;case 2:this._point\x3d3;this._x4\x3dx;this._y4\x3d\ny;this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:point$3(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};BasisOpen.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._y0\x3dthis._y1\x3dNaN;this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x263\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d\n1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;var x0\x3d(this._x0+4*this._x1+x)/6,y0\x3d(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point\x3d4;default:point$3(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy}};class Bump{constructor(context,x){this._context\x3dcontext;this._x\x3dx}areaStart(){this._line\x3d0}areaEnd(){this._line\x3dNaN}lineStart(){this._point\x3d0}lineEnd(){(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();\nthis._line\x3d1-this._line}point(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;default:this._x?this._context.bezierCurveTo(this._x0\x3d(this._x0+x)/2,this._y0,this._x0,y,x,y):this._context.bezierCurveTo(this._x0,this._y0\x3d(this._y0+y)/2,x,this._y0,x,y)}this._x0\x3dx;this._y0\x3dy}}Bundle.prototype\x3d{lineStart:function(){this._x\x3d[];this._y\x3d[];this._basis.lineStart()},lineEnd:function(){var x\x3dthis._x,y\x3dthis._y,j\x3dx.length-\n1;if(0\x3cj)for(var x0\x3dx[0],y0\x3dy[0],dx\x3dx[j]-x0,dy\x3dy[j]-y0,i\x3d-1,t;++i\x3c\x3dj;)t\x3di/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x\x3dthis._y\x3dnull;this._basis.lineEnd()},point:function(x,y){this._x.push(+x);this._y.push(+y)}};var bundle\x3dfunction custom(beta$jscomp$0){function bundle(context){return 1\x3d\x3d\x3dbeta$jscomp$0?new Basis(context):new Bundle(context,beta$jscomp$0)}bundle.beta\x3dfunction(beta){return custom(+beta)};return bundle}(.85);Cardinal.prototype\x3d\n{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):\nthis._context.moveTo(x,y);break;case 1:this._point\x3d2;this._x1\x3dx;this._y1\x3dy;break;case 2:this._point\x3d3;default:point$2(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinal\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new Cardinal(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CardinalClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._x0\x3d\nthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._x5\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dthis._y3\x3dthis._y4\x3dthis._y5\x3dNaN;this._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._x3\x3dx;this._y3\x3d\ny;break;case 1:this._point\x3d2;this._context.moveTo(this._x4\x3dx,this._y4\x3dy);break;case 2:this._point\x3d3;this._x5\x3dx;this._y5\x3dy;break;default:point$2(this,x,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinalClosed\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new CardinalClosed(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CardinalOpen.prototype\x3d{areaStart:function(){this._line\x3d\n0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x263\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point\x3d4;default:point$2(this,\nx,y)}this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var cardinalOpen\x3dfunction custom(tension$jscomp$0){function cardinal(context){return new CardinalOpen(context,tension$jscomp$0)}cardinal.tension\x3dfunction(tension){return custom(+tension)};return cardinal}(0);CatmullRom.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._l01_a\x3dthis._l12_a\x3d\nthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,\ny):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;default:point$1(this,x,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3dthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRom\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRom(context,alpha$jscomp$0):new Cardinal(context,0)}catmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};\nreturn catmullRom}(.5);CatmullRomClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._x0\x3dthis._x1\x3dthis._x2\x3dthis._x3\x3dthis._x4\x3dthis._x5\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dthis._y3\x3dthis._y4\x3dthis._y5\x3dNaN;this._l01_a\x3dthis._l12_a\x3dthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,\nthis._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d1;this._x3\x3dx;this._y3\x3dy;break;case 1:this._point\x3d2;this._context.moveTo(this._x4\x3dx,this._y4\x3dy);break;case 2:this._point\x3d3;this._x5\x3dx;this._y5\x3dy;break;default:point$1(this,x,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3d\nthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRomClosed\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRomClosed(context,alpha$jscomp$0):new CardinalClosed(context,0)}catmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};return catmullRom}(.5);CatmullRomOpen.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3d\nthis._x1\x3dthis._x2\x3dthis._y0\x3dthis._y1\x3dthis._y2\x3dNaN;this._l01_a\x3dthis._l12_a\x3dthis._l23_a\x3dthis._l01_2a\x3dthis._l12_2a\x3dthis._l23_2a\x3dthis._point\x3d0},lineEnd:function(){(this._line||0!\x3d\x3dthis._line\x26\x263\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){x\x3d+x;y\x3d+y;if(this._point){var x23\x3dthis._x2-x,y23\x3dthis._y2-y;this._l23_a\x3dMath.sqrt(this._l23_2a\x3dMath.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point\x3d1;break;case 1:this._point\x3d2;break;case 2:this._point\x3d\n3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point\x3d4;default:point$1(this,x,y)}this._l01_a\x3dthis._l12_a;this._l12_a\x3dthis._l23_a;this._l01_2a\x3dthis._l12_2a;this._l12_2a\x3dthis._l23_2a;this._x0\x3dthis._x1;this._x1\x3dthis._x2;this._x2\x3dx;this._y0\x3dthis._y1;this._y1\x3dthis._y2;this._y2\x3dy}};var catmullRomOpen\x3dfunction custom(alpha$jscomp$0){function catmullRom(context){return alpha$jscomp$0?new CatmullRomOpen(context,alpha$jscomp$0):new CardinalOpen(context,\n0)}catmullRom.alpha\x3dfunction(alpha){return custom(+alpha)};return catmullRom}(.5);LinearClosed.prototype\x3d{areaStart:noop,areaEnd:noop,lineStart:function(){this._point\x3d0},lineEnd:function(){this._point\x26\x26this._context.closePath()},point:function(x,y){x\x3d+x;y\x3d+y;this._point?this._context.lineTo(x,y):(this._point\x3d1,this._context.moveTo(x,y))}};MonotoneX.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x0\x3dthis._x1\x3dthis._y0\x3dthis._y1\x3dthis._t0\x3dNaN;\nthis._point\x3d0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0))}(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();this._line\x3d1-this._line},point:function(x,y){var t1\x3dNaN;x\x3d+x;y\x3d+y;if(x!\x3d\x3dthis._x1||y!\x3d\x3dthis._y1){switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;break;case 2:this._point\x3d3;point(this,slope2(this,\nt1\x3dslope3(this,x,y)),t1);break;default:point(this,this._t0,t1\x3dslope3(this,x,y))}this._x0\x3dthis._x1;this._x1\x3dx;this._y0\x3dthis._y1;this._y1\x3dy;this._t0\x3dt1}}};(MonotoneY.prototype\x3dObject.create(MonotoneX.prototype)).point\x3dfunction(x,y){MonotoneX.prototype.point.call(this,y,x)};ReflectContext.prototype\x3d{moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,\nx1,y2,x2,y,x)}};Natural.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x\x3d[];this._y\x3d[]},lineEnd:function(){var x\x3dthis._x,y\x3dthis._y,n\x3dx.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2\x3d\x3d\x3dn)this._context.lineTo(x[1],y[1]);else for(var px\x3dcontrolPoints(x),py\x3dcontrolPoints(y),i0\x3d0,i1\x3d1;i1\x3cn;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!\x3d\x3dthis._line\x26\x26\n1\x3d\x3d\x3dn)\x26\x26this._context.closePath();this._line\x3d1-this._line;this._x\x3dthis._y\x3dnull},point:function(x,y){this._x.push(+x);this._y.push(+y)}};Step.prototype\x3d{areaStart:function(){this._line\x3d0},areaEnd:function(){this._line\x3dNaN},lineStart:function(){this._x\x3dthis._y\x3dNaN;this._point\x3d0},lineEnd:function(){0\x3cthis._t\x26\x261\x3ethis._t\x26\x262\x3d\x3d\x3dthis._point\x26\x26this._context.lineTo(this._x,this._y);(this._line||0!\x3d\x3dthis._line\x26\x261\x3d\x3d\x3dthis._point)\x26\x26this._context.closePath();0\x3c\x3dthis._line\x26\x26(this._t\x3d1-this._t,this._line\x3d1-this._line)},\npoint:function(x,y){x\x3d+x;y\x3d+y;switch(this._point){case 0:this._point\x3d1;this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point\x3d2;default:if(0\x3e\x3dthis._t)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1\x3dthis._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y);this._context.lineTo(x1,y)}}this._x\x3dx;this._y\x3dy}};exports.arc\x3dfunction(){function arc(){var buffer,r0\x3d+innerRadius.apply(this,arguments),r1\x3d+outerRadius.apply(this,arguments),a0\x3dstartAngle.apply(this,\narguments)-halfPi,a1\x3dendAngle.apply(this,arguments)-halfPi,da\x3dabs(a1-a0),cw\x3da1\x3ea0;context||(context\x3dbuffer\x3dd3Path.path());if(r1\x3cr0){var r\x3dr1;r1\x3dr0;r0\x3dr}if(1E-12\x3cr1)if(da\x3etau-1E-12)context.moveTo(r1*cos(a0),r1*sin(a0)),context.arc(0,0,r1,a0,a1,!cw),1E-12\x3cr0\x26\x26(context.moveTo(r0*cos(a1),r0*sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var a01\x3da0,a11\x3da1;r\x3da0;var a10\x3da1,da0\x3dda,da1\x3dda,ap\x3dpadAngle.apply(this,arguments)/2,rp\x3d1E-12\x3cap\x26\x26(padRadius?+padRadius.apply(this,arguments):sqrt(r0*r0+r1*r1)),rc\x3dmin(abs(r1-\nr0)/2,+cornerRadius.apply(this,arguments)),rc0\x3drc,rc1\x3drc;if(1E-12\x3crp){var p0\x3dasin(rp/r0*sin(ap));ap\x3dasin(rp/r1*sin(ap));1E-12\x3c(da0-\x3d2*p0)?(p0*\x3dcw?1:-1,r+\x3dp0,a10-\x3dp0):(da0\x3d0,r\x3da10\x3d(a0+a1)/2);1E-12\x3c(da1-\x3d2*ap)?(ap*\x3dcw?1:-1,a01+\x3dap,a11-\x3dap):(da1\x3d0,a01\x3da11\x3d(a0+a1)/2)}a0\x3dr1*cos(a01);a1\x3dr1*sin(a01);p0\x3dr0*cos(a10);ap\x3dr0*sin(a10);if(1E-12\x3crc){var x11\x3dr1*cos(a11),y11\x3dr1*sin(a11),x00\x3dr0*cos(r),y00\x3dr0*sin(r);if(da\x3dda\x3cpi){var oc\x3dx00-a0;da\x3dy00-a1;rp\x3dp0-x11;var y32\x3dap-y11,t\x3dy32*oc-rp*da;1E-12\x3et*t?oc\x3dvoid 0:(t\x3d\n(rp*(a1-y11)-y32*(a0-x11))/t,oc\x3d[a0+t*oc,a1+t*da]);da\x3doc}da\x26\x26(rc0\x3da0-oc[0],rc1\x3da1-oc[1],da\x3dx11-oc[0],rp\x3dy11-oc[1],rc0\x3d(rc0*da+rc1*rp)/(sqrt(rc0*rc0+rc1*rc1)*sqrt(da*da+rp*rp)),rc1\x3d1/sin((1\x3crc0?0:-1\x3erc0?pi:Math.acos(rc0))/2),oc\x3dsqrt(oc[0]*oc[0]+oc[1]*oc[1]),rc0\x3dmin(rc,(r0-oc)/(rc1-1)),rc1\x3dmin(rc,(r1-oc)/(rc1+1)))}1E-12\x3cda1?1E-12\x3crc1?(a01\x3dcornerTangents(x00,y00,a0,a1,r1,rc1,cw),a11\x3dcornerTangents(x11,y11,p0,ap,r1,rc1,cw),context.moveTo(a01.cx+a01.x01,a01.cy+a01.y01),rc1\x3crc?context.arc(a01.cx,a01.cy,\nrc1,atan2(a01.y01,a01.x01),atan2(a11.y01,a11.x01),!cw):(context.arc(a01.cx,a01.cy,rc1,atan2(a01.y01,a01.x01),atan2(a01.y11,a01.x11),!cw),context.arc(0,0,r1,atan2(a01.cy+a01.y11,a01.cx+a01.x11),atan2(a11.cy+a11.y11,a11.cx+a11.x11),!cw),context.arc(a11.cx,a11.cy,rc1,atan2(a11.y11,a11.x11),atan2(a11.y01,a11.x01),!cw))):(context.moveTo(a0,a1),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(a0,a1);1E-12\x3cr0\x26\x261E-12\x3cda0?1E-12\x3crc0?(a01\x3dcornerTangents(p0,ap,x11,y11,r0,-rc0,cw),a11\x3dcornerTangents(a0,a1,x00,\ny00,r0,-rc0,cw),context.lineTo(a01.cx+a01.x01,a01.cy+a01.y01),rc0\x3crc?context.arc(a01.cx,a01.cy,rc0,atan2(a01.y01,a01.x01),atan2(a11.y01,a11.x01),!cw):(context.arc(a01.cx,a01.cy,rc0,atan2(a01.y01,a01.x01),atan2(a01.y11,a01.x11),!cw),context.arc(0,0,r0,atan2(a01.cy+a01.y11,a01.cx+a01.x11),atan2(a11.cy+a11.y11,a11.cx+a11.x11),cw),context.arc(a11.cx,a11.cy,rc0,atan2(a11.y11,a11.x11),atan2(a11.y01,a11.x01),!cw))):context.arc(0,0,r0,a10,r,cw):context.lineTo(p0,ap)}else context.moveTo(0,0);context.closePath();\nif(buffer)return context\x3dnull,buffer+\x22\x22||null}var innerRadius\x3darcInnerRadius,outerRadius\x3darcOuterRadius,cornerRadius\x3dconstant(0),padRadius\x3dnull,startAngle\x3darcStartAngle,endAngle\x3darcEndAngle,padAngle\x3darcPadAngle,context\x3dnull;arc.centroid\x3dfunction(){var r\x3d(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a\x3d(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-pi/2;return[cos(a)*r,sin(a)*r]};arc.innerRadius\x3dfunction(_){return arguments.length?(innerRadius\x3d\x22function\x22\x3d\x3d\x3d\ntypeof _?_:constant(+_),arc):innerRadius};arc.outerRadius\x3dfunction(_){return arguments.length?(outerRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):outerRadius};arc.cornerRadius\x3dfunction(_){return arguments.length?(cornerRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):cornerRadius};arc.padRadius\x3dfunction(_){return arguments.length?(padRadius\x3dnull\x3d\x3d_?null:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):padRadius};arc.startAngle\x3dfunction(_){return arguments.length?(startAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),\narc):startAngle};arc.endAngle\x3dfunction(_){return arguments.length?(endAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):endAngle};arc.padAngle\x3dfunction(_){return arguments.length?(padAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),arc):padAngle};arc.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,arc):context};return arc};exports.area\x3darea$jscomp$0;exports.areaRadial\x3dareaRadial;exports.curveBasis\x3dfunction(context){return new Basis(context)};exports.curveBasisClosed\x3dfunction(context){return new BasisClosed(context)};\nexports.curveBasisOpen\x3dfunction(context){return new BasisOpen(context)};exports.curveBumpX\x3dfunction(context){return new Bump(context,!0)};exports.curveBumpY\x3dfunction(context){return new Bump(context,!1)};exports.curveBundle\x3dbundle;exports.curveCardinal\x3dcardinal;exports.curveCardinalClosed\x3dcardinalClosed;exports.curveCardinalOpen\x3dcardinalOpen;exports.curveCatmullRom\x3dcatmullRom;exports.curveCatmullRomClosed\x3dcatmullRomClosed;exports.curveCatmullRomOpen\x3dcatmullRomOpen;exports.curveLinear\x3dcurveLinear;\nexports.curveLinearClosed\x3dfunction(context){return new LinearClosed(context)};exports.curveMonotoneX\x3dfunction(context){return new MonotoneX(context)};exports.curveMonotoneY\x3dfunction(context){return new MonotoneY(context)};exports.curveNatural\x3dfunction(context){return new Natural(context)};exports.curveStep\x3dfunction(context){return new Step(context,.5)};exports.curveStepAfter\x3dfunction(context){return new Step(context,1)};exports.curveStepBefore\x3dfunction(context){return new Step(context,0)};exports.line\x3d\nline$jscomp$0;exports.lineRadial\x3dlineRadial$1;exports.linkHorizontal\x3dfunction(){return link$jscomp$0(curveHorizontal)};exports.linkRadial\x3dfunction(){var l\x3dlink$jscomp$0(curveRadial);l.angle\x3dl.x;delete l.x;l.radius\x3dl.y;delete l.y;return l};exports.linkVertical\x3dfunction(){return link$jscomp$0(curveVertical)};exports.pie\x3dfunction(){function pie(data){var i$jscomp$0,n\x3d(data\x3darray(data)).length;var j$jscomp$0\x3d0;var index\x3dArray(n),arcs\x3dArray(n),a0\x3d+startAngle.apply(this,arguments);var k\x3dMath.min(tau,Math.max(-tau,\nendAngle.apply(this,arguments)-a0));var p\x3dMath.min(Math.abs(k)/n,padAngle.apply(this,arguments)),pa\x3dp*(0\x3ek?-1:1),v;for(i$jscomp$0\x3d0;i$jscomp$0\x3cn;++i$jscomp$0)0\x3c(v\x3darcs[index[i$jscomp$0]\x3di$jscomp$0]\x3d+value(data[i$jscomp$0],i$jscomp$0,data))\x26\x26(j$jscomp$0+\x3dv);null!\x3dsortValues?index.sort(function(i,j){return sortValues(arcs[i],arcs[j])}):null!\x3dsort\x26\x26index.sort(function(i,j){return sort(data[i],data[j])});i$jscomp$0\x3d0;for(k\x3dj$jscomp$0?(k-n*pa)/j$jscomp$0:0;i$jscomp$0\x3cn;++i$jscomp$0,a0\x3da1){j$jscomp$0\x3dindex[i$jscomp$0];\nv\x3darcs[j$jscomp$0];var a1\x3da0+(0\x3cv?v*k:0)+pa;arcs[j$jscomp$0]\x3d{data:data[j$jscomp$0],index:i$jscomp$0,value:v,startAngle:a0,endAngle:a1,padAngle:p}}return arcs}var value\x3didentity,sortValues\x3ddescending$1,sort\x3dnull,startAngle\x3dconstant(0),endAngle\x3dconstant(tau),padAngle\x3dconstant(0);pie.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):value};pie.sortValues\x3dfunction(_){return arguments.length?(sortValues\x3d_,sort\x3dnull,pie):sortValues};pie.sort\x3dfunction(_){return arguments.length?\n(sort\x3d_,sortValues\x3dnull,pie):sort};pie.startAngle\x3dfunction(_){return arguments.length?(startAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):startAngle};pie.endAngle\x3dfunction(_){return arguments.length?(endAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):endAngle};pie.padAngle\x3dfunction(_){return arguments.length?(padAngle\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),pie):padAngle};return pie};exports.pointRadial\x3dpointRadial;exports.radialArea\x3dareaRadial;exports.radialLine\x3dlineRadial$1;exports.stack\x3dfunction(){function stack(data){var sz\x3d\nArray.from(keys.apply(this,arguments),stackSeries),n\x3dsz.length,j\x3d-1;for(const d of data){var i\x3d0;for(++j;i\x3cn;++i)(sz[i][j]\x3d[0,+value(d,sz[i].key,j,data)]).data\x3dd}i\x3d0;for(j\x3darray(order(sz));i\x3cn;++i)sz[j[i]].index\x3di;offset(sz,j);return sz}var keys\x3dconstant([]),order\x3dnone,offset\x3dnone$1,value\x3dstackValue;stack.keys\x3dfunction(_){return arguments.length?(keys\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(Array.from(_)),stack):keys};stack.value\x3dfunction(_){return arguments.length?(value\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),\nstack):value};stack.order\x3dfunction(_){return arguments.length?(order\x3dnull\x3d\x3d_?none:\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(Array.from(_)),stack):order};stack.offset\x3dfunction(_){return arguments.length?(offset\x3dnull\x3d\x3d_?none$1:_,stack):offset};return stack};exports.stackOffsetDiverging\x3dfunction(series,order){if(0\x3c(n\x3dseries.length))for(var i,j\x3d0,d,dy,yp,yn,n,m\x3dseries[order[0]].length;j\x3cm;++j)for(i\x3dyp\x3dyn\x3d0;i\x3cn;++i)0\x3c(dy\x3d(d\x3dseries[order[i]][j])[1]-d[0])?(d[0]\x3dyp,d[1]\x3dyp+\x3ddy):0\x3edy?(d[1]\x3dyn,d[0]\x3dyn+\x3ddy):(d[0]\x3d0,\nd[1]\x3ddy)};exports.stackOffsetExpand\x3dfunction(series,order){if(0\x3c(n\x3dseries.length)){for(var i,n,j\x3d0,m\x3dseries[0].length,y;j\x3cm;++j){for(y\x3di\x3d0;i\x3cn;++i)y+\x3dseries[i][j][1]||0;if(y)for(i\x3d0;i\x3cn;++i)series[i][j][1]/\x3dy}none$1(series,order)}};exports.stackOffsetNone\x3dnone$1;exports.stackOffsetSilhouette\x3dfunction(series,order){if(0\x3c(n\x3dseries.length)){for(var j\x3d0,s0\x3dseries[order[0]],n,m\x3ds0.length;j\x3cm;++j){for(var i\x3d0,y\x3d0;i\x3cn;++i)y+\x3dseries[i][j][1]||0;s0[j][1]+\x3ds0[j][0]\x3d-y/2}none$1(series,order)}};exports.stackOffsetWiggle\x3d\nfunction(series,order){if(0\x3c(n\x3dseries.length)\x26\x260\x3c(m\x3d(s0\x3dseries[order[0]]).length)){for(var y\x3d0,j\x3d1,s0,m,n;j\x3cm;++j){for(var i\x3d0,s1\x3d0,s2\x3d0;i\x3cn;++i){var si\x3dseries[order[i]],sij0\x3dsi[j][1]||0;si\x3d(sij0-(si[j-1][1]||0))/2;for(var k\x3d0;k\x3ci;++k){var sk\x3dseries[order[k]];si+\x3d(sk[j][1]||0)-(sk[j-1][1]||0)}s1+\x3dsij0;s2+\x3dsi*sij0}s0[j-1][1]+\x3ds0[j-1][0]\x3dy;s1\x26\x26(y-\x3ds2/s1)}s0[j-1][1]+\x3ds0[j-1][0]\x3dy;none$1(series,order)}};exports.stackOrderAppearance\x3dappearance;exports.stackOrderAscending\x3dascending;exports.stackOrderDescending\x3d\nfunction(series){return ascending(series).reverse()};exports.stackOrderInsideOut\x3dfunction(series){var n\x3dseries.length,sums\x3dseries.map(sum),order\x3dappearance(series),top\x3d0,bottom\x3d0,tops\x3d[],bottoms\x3d[];for(series\x3d0;series\x3cn;++series){var j\x3dorder[series];top\x3cbottom?(top+\x3dsums[j],tops.push(j)):(bottom+\x3dsums[j],bottoms.push(j))}return bottoms.reverse().concat(tops)};exports.stackOrderNone\x3dnone;exports.stackOrderReverse\x3dfunction(series){return none(series).reverse()};exports.symbol\x3dfunction(type,size){function symbol(){var buffer;\ncontext||(context\x3dbuffer\x3dd3Path.path());type.apply(this,arguments).draw(context,+size.apply(this,arguments));if(buffer)return context\x3dnull,buffer+\x22\x22||null}var context\x3dnull;type\x3d\x22function\x22\x3d\x3d\x3dtypeof type?type:constant(type||circle);size\x3d\x22function\x22\x3d\x3d\x3dtypeof size?size:constant(void 0\x3d\x3d\x3dsize?64:+size);symbol.type\x3dfunction(_){return arguments.length?(type\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(_),symbol):type};symbol.size\x3dfunction(_){return arguments.length?(size\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),symbol):\nsize};symbol.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,symbol):context};return symbol};exports.symbolCircle\x3dcircle;exports.symbolCross\x3dcross;exports.symbolDiamond\x3ddiamond;exports.symbolSquare\x3dsquare;exports.symbolStar\x3dstar;exports.symbolTriangle\x3dtriangle;exports.symbolWye\x3dwye;exports.symbols\x3dsymbols;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_canvas$build$vega_canvas_min.js", true , "shadow$provide.module$node_modules$vega_canvas$build$vega_canvas_min\x3dfunction(global,require,module,exports){!function(e,n){\x22object\x22\x3d\x3dtypeof exports\x26\x26\x22undefined\x22!\x3dtypeof module?n(exports):\x22function\x22\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],n):n((e\x3d\x22undefined\x22!\x3dtypeof globalThis?globalThis:e||self).vega\x3d{})}(this,function(e$jscomp$0){function n$jscomp$0(e,n){if(\x22undefined\x22!\x3dtypeof document\x26\x26document.createElement){const t\x3ddocument.createElement(\x22canvas\x22);if(t\x26\x26t.getContext)return t.width\x3de,t.height\x3d\nn,t}return null}e$jscomp$0.canvas\x3dn$jscomp$0;e$jscomp$0.domCanvas\x3dn$jscomp$0;e$jscomp$0.image\x3d()\x3d\x3e\x22undefined\x22!\x3dtypeof Image?Image:null;Object.defineProperty(e$jscomp$0,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_color$dist$d3_color.js", true , "shadow$provide.module$node_modules$d3_color$dist$d3_color\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function define(constructor,factory,prototype){constructor.prototype\x3dfactory.prototype\x3dprototype;prototype.constructor\x3dconstructor}\nfunction extend(parent,definition){parent\x3dObject.create(parent.prototype);for(var key in definition)parent[key]\x3ddefinition[key];return parent}function Color(){}function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;format\x3d(format+\x22\x22).trim().toLowerCase();return(m\x3dreHex.exec(format))?(l\x3dm[1].length,m\x3dparseInt(m[1],16),6\x3d\x3d\x3dl?rgbn(m):3\x3d\x3d\x3dl?new Rgb(m\x3e\x3e8\x2615|m\x3e\x3e4\x26240,m\x3e\x3e4\x2615|m\x26240,(m\x2615)\x3c\x3c4|m\x2615,1):8\x3d\x3d\x3dl?rgba(m\x3e\x3e24\x26\n255,m\x3e\x3e16\x26255,m\x3e\x3e8\x26255,(m\x26255)/255):4\x3d\x3d\x3dl?rgba(m\x3e\x3e12\x2615|m\x3e\x3e8\x26240,m\x3e\x3e8\x2615|m\x3e\x3e4\x26240,m\x3e\x3e4\x2615|m\x26240,((m\x2615)\x3c\x3c4|m\x2615)/255):null):(m\x3dreRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m\x3dreRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m\x3dreRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m\x3dreRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m\x3dreHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m\x3dreHslaPercent.exec(format))?hsla(m[1],m[2]/\n100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):\x22transparent\x22\x3d\x3d\x3dformat?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n\x3e\x3e16\x26255,n\x3e\x3e8\x26255,n\x26255,1)}function rgba(r,g,b,a){0\x3e\x3da\x26\x26(r\x3dg\x3db\x3dNaN);return new Rgb(r,g,b,a)}function rgbConvert(o){o instanceof Color||(o\x3dcolor(o));if(!o)return new Rgb;o\x3do.rgb();return new Rgb(o.r,o.g,o.b,o.opacity)}function rgb(r,g,b,opacity){return 1\x3d\x3d\x3darguments.length?rgbConvert(r):new Rgb(r,g,b,null\x3d\x3dopacity?1:opacity)}function Rgb(r,g,b,opacity){this.r\x3d\n+r;this.g\x3d+g;this.b\x3d+b;this.opacity\x3d+opacity}function rgb_formatHex(){return\x22#\x22+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a\x3dthis.opacity;a\x3disNaN(a)?1:Math.max(0,Math.min(1,a));return(1\x3d\x3d\x3da?\x22rgb(\x22:\x22rgba(\x22)+Math.max(0,Math.min(255,Math.round(this.r)||0))+\x22, \x22+Math.max(0,Math.min(255,Math.round(this.g)||0))+\x22, \x22+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1\x3d\x3d\x3da?\x22)\x22:\x22, \x22+a+\x22)\x22)}function hex(value){value\x3dMath.max(0,Math.min(255,Math.round(value)||0));return(16\x3evalue?\x220\x22:\x22\x22)+\nvalue.toString(16)}function hsla(h,s,l,a){0\x3e\x3da?h\x3ds\x3dl\x3dNaN:0\x3e\x3dl||1\x3c\x3dl?h\x3ds\x3dNaN:0\x3e\x3ds\x26\x26(h\x3dNaN);return new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);o instanceof Color||(o\x3dcolor(o));if(!o)return new Hsl;if(o instanceof Hsl)return o;o\x3do.rgb();var r\x3do.r/255,g\x3do.g/255,b\x3do.b/255,min\x3dMath.min(r,g,b),max\x3dMath.max(r,g,b),h\x3dNaN,s\x3dmax-min,l\x3d(max+min)/2;s?(h\x3dr\x3d\x3d\x3dmax?(g-b)/s+6*(g\x3cb):g\x3d\x3d\x3dmax?(b-r)/s+2:(r-g)/s+4,s/\x3d.5\x3el?max+min:2-max-min,h*\x3d60):s\x3d0\x3cl\x26\x261\x3el?0:h;return new Hsl(h,\ns,l,o.opacity)}function hsl(h,s,l,opacity){return 1\x3d\x3d\x3darguments.length?hslConvert(h):new Hsl(h,s,l,null\x3d\x3dopacity?1:opacity)}function Hsl(h,s,l,opacity){this.h\x3d+h;this.s\x3d+s;this.l\x3d+l;this.opacity\x3d+opacity}function hsl2rgb(h,m1,m2){return 255*(60\x3eh?m1+(m2-m1)*h/60:180\x3eh?m2:240\x3eh?m1+(m2-m1)*(240-h)/60:m1)}function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o\x3drgbConvert(o));var r\x3drgb2lrgb(o.r),g\x3drgb2lrgb(o.g),b\x3drgb2lrgb(o.b),\ny\x3dxyz2lab(.2225045*r+.7168786*g+.0606169*b);if(r\x3d\x3d\x3dg\x26\x26g\x3d\x3d\x3db)var x\x3dr\x3dy;else x\x3dxyz2lab((.4360747*r+.3850649*g+.1430804*b)/.96422),r\x3dxyz2lab((.0139322*r+.0971045*g+.7141733*b)/.82521);return new Lab(116*y-16,500*(x-y),200*(y-r),o.opacity)}function lab(l,a,b,opacity){return 1\x3d\x3d\x3darguments.length?labConvert(l):new Lab(l,a,b,null\x3d\x3dopacity?1:opacity)}function Lab(l,a,b,opacity){this.l\x3d+l;this.a\x3d+a;this.b\x3d+b;this.opacity\x3d+opacity}function xyz2lab(t){return t\x3et3?Math.pow(t,1/3):t/t2+t0}function lab2xyz(t){return t\x3e\nt1?t*t*t:t2*(t-t0)}function lrgb2rgb(x){return 255*(.0031308\x3e\x3dx?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return.04045\x3e\x3d(x/\x3d255)?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);o instanceof Lab||(o\x3dlabConvert(o));if(0\x3d\x3d\x3do.a\x26\x260\x3d\x3d\x3do.b)return new Hcl(NaN,0\x3co.l\x26\x26100\x3eo.l?0:NaN,o.l,o.opacity);var h\x3dMath.atan2(o.b,o.a)*degrees;return new Hcl(0\x3eh?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1\x3d\x3d\x3d\narguments.length?hclConvert(h):new Hcl(h,c,l,null\x3d\x3dopacity?1:opacity)}function Hcl(h,c,l,opacity){this.h\x3d+h;this.c\x3d+c;this.l\x3d+l;this.opacity\x3d+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h\x3do.h*radians;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}function cubehelix(h,s,l$jscomp$0,opacity){if(1\x3d\x3d\x3darguments.length){var JSCompiler_temp\x3dh;if(JSCompiler_temp instanceof Cubehelix)JSCompiler_temp\x3dnew Cubehelix(JSCompiler_temp.h,JSCompiler_temp.s,JSCompiler_temp.l,\nJSCompiler_temp.opacity);else{JSCompiler_temp instanceof Rgb||(JSCompiler_temp\x3drgbConvert(JSCompiler_temp));var g\x3dJSCompiler_temp.g/255,b\x3dJSCompiler_temp.b/255,l\x3d(BC_DA*b+JSCompiler_temp.r/255*-1.7884503806-3.5172982438*g)/(BC_DA+-1.7884503806-3.5172982438);b-\x3dl;var k\x3d(1.97294*(g-l)- -.29227*b)/-.90649;b\x3d(g\x3dMath.sqrt(k*k+b*b)/(1.97294*l*(1-l)))?Math.atan2(k,b)*degrees-120:NaN;JSCompiler_temp\x3dnew Cubehelix(0\x3eb?b+360:b,g,l,JSCompiler_temp.opacity)}}else JSCompiler_temp\x3dnew Cubehelix(h,s,l$jscomp$0,\nnull\x3d\x3dopacity?1:opacity);return JSCompiler_temp}function Cubehelix(h,s,l,opacity){this.h\x3d+h;this.s\x3d+s;this.l\x3d+l;this.opacity\x3d+opacity}var brighter\x3d1/.7,reHex\x3d/^#([0-9a-f]{3,8})$/,reRgbInteger\x3d/^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$/,reRgbPercent\x3d/^rgb\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$/,reRgbaInteger\x3d/^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,\nreRgbaPercent\x3d/^rgba\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,reHslPercent\x3d/^hsl\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$/,reHslaPercent\x3d/^hsla\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$/,\nnamed\x3d{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,\ndarkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,\nhotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,\nlinen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,\npalevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,\nturquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb});define(Rgb,rgb,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3dk?brighter:\nMath.pow(brighter,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5\x3c\x3dthis.r\x26\x26255.5\x3ethis.r\x26\x26-.5\x3c\x3dthis.g\x26\x26255.5\x3ethis.g\x26\x26-.5\x3c\x3dthis.b\x26\x26255.5\x3ethis.b\x26\x260\x3c\x3dthis.opacity\x26\x261\x3e\x3dthis.opacity},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));define(Hsl,hsl,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3d\nk?brighter:Math.pow(brighter,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h\x3dthis.h%360+360*(0\x3ethis.h),s\x3disNaN(h)||isNaN(this.s)?0:this.s,l\x3dthis.l;s\x3dl+(.5\x3el?l:1-l)*s;l\x3d2*l-s;return new Rgb(hsl2rgb(240\x3c\x3dh?h-240:h+120,l,s),hsl2rgb(h,l,s),hsl2rgb(120\x3eh?h+240:h-120,l,s),this.opacity)},displayable:function(){return(0\x3c\x3dthis.s\x26\x261\x3e\x3dthis.s||isNaN(this.s))\x26\x260\x3c\x3dthis.l\x26\x261\x3e\x3dthis.l\x26\x26\n0\x3c\x3dthis.opacity\x26\x261\x3e\x3dthis.opacity},formatHsl:function(){var a\x3dthis.opacity;a\x3disNaN(a)?1:Math.max(0,Math.min(1,a));return(1\x3d\x3d\x3da?\x22hsl(\x22:\x22hsla(\x22)+(this.h||0)+\x22, \x22+100*(this.s||0)+\x22%, \x22+100*(this.l||0)+\x22%\x22+(1\x3d\x3d\x3da?\x22)\x22:\x22, \x22+a+\x22)\x22)}}));const radians\x3dMath.PI/180,degrees\x3d180/Math.PI,t0\x3d4/29,t1\x3d6/29,t2\x3d3*t1*t1,t3\x3dt1*t1*t1;define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null\x3d\x3dk?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null\x3d\x3dk?1:k),this.a,this.b,\nthis.opacity)},rgb:function(){var y\x3d(this.l+16)/116,x\x3disNaN(this.a)?y:y+this.a/500,z\x3disNaN(this.b)?y:y-this.b/200;x\x3d.96422*lab2xyz(x);y\x3d1*lab2xyz(y);z\x3d.82521*lab2xyz(z);return new Rgb(lrgb2rgb(3.1338561*x-1.6168667*y-.4906146*z),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}}));define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null\x3d\x3dk?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,\nthis.l-18*(null\x3d\x3dk?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var BC_DA\x3d1.78277*-.29227-.1347134789;define(Cubehelix,cubehelix,extend(Color,{brighter:function(k){k\x3dnull\x3d\x3dk?brighter:Math.pow(brighter,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){k\x3dnull\x3d\x3dk?.7:Math.pow(.7,k);return new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h\x3disNaN(this.h)?0:(this.h+120)*radians,l\x3d+this.l,a\x3disNaN(this.s)?0:this.s*l*(1-l),cosh\x3dMath.cos(h);\nh\x3dMath.sin(h);return new Rgb(255*(l+a*(-.14861*cosh+1.78277*h)),255*(l+a*(-.29227*cosh+-.90649*h)),255*(l+1.97294*a*cosh),this.opacity)}}));exports.color\x3dcolor;exports.cubehelix\x3dcubehelix;exports.gray\x3dfunction(l,opacity){return new Lab(l,0,0,null\x3d\x3dopacity?1:opacity)};exports.hcl\x3dhcl;exports.hsl\x3dhsl;exports.lab\x3dlab;exports.lch\x3dfunction(l,c,h,opacity){return 1\x3d\x3d\x3darguments.length?hclConvert(l):new Hcl(h,c,l,null\x3d\x3dopacity?1:opacity)};exports.rgb\x3drgb;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_interpolate$dist$d3_interpolate.js", true , "shadow$provide.module$node_modules$d3_interpolate$dist$d3_interpolate\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_color$dist$d3_color\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-color\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Color){function basis(t1,v0,v1,v2,\nv3){var t2\x3dt1*t1,t3\x3dt2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}function basis$1(values){var n\x3dvalues.length-1;return function(t){var i\x3d0\x3e\x3dt?t\x3d0:1\x3c\x3dt?(t\x3d1,n-1):Math.floor(t*n),v1\x3dvalues[i],v2\x3dvalues[i+1];return basis((t-i/n)*n,0\x3ci?values[i-1]:2*v1-v2,v1,v2,i\x3cn-1?values[i+2]:2*v2-v1)}}function basisClosed(values){var n\x3dvalues.length;return function(t){var i\x3dMath.floor((0\x3e(t%\x3d1)?++t:t)*n);return basis((t-i/n)*n,values[(i+n-1)%n],values[i%n],values[(i+1)%n],values[(i+\n2)%n])}}function linear(a,d){return function(t){return a+t*d}}function exponential(a,b,y){return a\x3dMath.pow(a,y),b\x3dMath.pow(b,y)-a,y\x3d1/y,function(t){return Math.pow(a+t*b,y)}}function hue(a,b){var d\x3db-a;return d?linear(a,180\x3cd||-180\x3ed?d-360*Math.round(d/360):d):constant(isNaN(a)?b:a)}function gamma(y){return 1\x3d\x3d\x3d(y\x3d+y)?nogamma:function(a,b){return b-a?exponential(a,b,y):constant(isNaN(a)?b:a)}}function nogamma(a,b){var d\x3db-a;return d?linear(a,d):constant(isNaN(a)?b:a)}function rgbSpline(spline){return function(colors){var n\x3d\ncolors.length,r\x3dArray(n),g\x3dArray(n),b\x3dArray(n),i;for(i\x3d0;i\x3cn;++i){var color\x3dd3Color.rgb(colors[i]);r[i]\x3dcolor.r||0;g[i]\x3dcolor.g||0;b[i]\x3dcolor.b||0}r\x3dspline(r);g\x3dspline(g);b\x3dspline(b);color.opacity\x3d1;return function(t){color.r\x3dr(t);color.g\x3dg(t);color.b\x3db(t);return color+\x22\x22}}}function numberArray(a,b){b||(b\x3d[]);var n\x3da?Math.min(b.length,a.length):0,c\x3db.slice(),i;return function(t){for(i\x3d0;i\x3cn;++i)c[i]\x3da[i]*(1-t)+b[i]*t;return c}}function isNumberArray(x){return ArrayBuffer.isView(x)\x26\x26!(x instanceof\nDataView)}function genericArray(a,b){var nb\x3db?b.length:0,na\x3da?Math.min(nb,a.length):0,x\x3dArray(na),c\x3dArray(nb),i;for(i\x3d0;i\x3cna;++i)x[i]\x3dvalue$jscomp$0(a[i],b[i]);for(;i\x3cnb;++i)c[i]\x3db[i];return function(t){for(i\x3d0;i\x3cna;++i)c[i]\x3dx[i](t);return c}}function date(a,b){var d\x3dnew Date;return a\x3d+a,b\x3d+b,function(t){return d.setTime(a*(1-t)+b*t),d}}function number(a,b){return a\x3d+a,b\x3d+b,function(t){return a*(1-t)+b*t}}function object(a,b){var i\x3d{},c\x3d{},k;if(null\x3d\x3d\x3da||\x22object\x22!\x3d\x3dtypeof a)a\x3d{};if(null\x3d\x3d\x3db||\x22object\x22!\x3d\x3d\ntypeof b)b\x3d{};for(k in b)k in a?i[k]\x3dvalue$jscomp$0(a[k],b[k]):c[k]\x3db[k];return function(t){for(k in i)c[k]\x3di[k](t);return c}}function zero(b){return function(){return b}}function one(b){return function(t){return b(t)+\x22\x22}}function string(a,b){var bi\x3dreA.lastIndex\x3dreB.lastIndex\x3d0,am,bm,bs,i$jscomp$0\x3d-1,s\x3d[],q\x3d[];a+\x3d\x22\x22;for(b+\x3d\x22\x22;(am\x3dreA.exec(a))\x26\x26(bm\x3dreB.exec(b));)(bs\x3dbm.index)\x3ebi\x26\x26(bs\x3db.slice(bi,bs),s[i$jscomp$0]?s[i$jscomp$0]+\x3dbs:s[++i$jscomp$0]\x3dbs),(am\x3dam[0])\x3d\x3d\x3d(bm\x3dbm[0])?s[i$jscomp$0]?s[i$jscomp$0]+\x3d\nbm:s[++i$jscomp$0]\x3dbm:(s[++i$jscomp$0]\x3dnull,q.push({i:i$jscomp$0,x:number(am,bm)})),bi\x3dreB.lastIndex;bi\x3cb.length\x26\x26(bs\x3db.slice(bi),s[i$jscomp$0]?s[i$jscomp$0]+\x3dbs:s[++i$jscomp$0]\x3dbs);return 2\x3es.length?q[0]?one(q[0].x):zero(b):(b\x3dq.length,function(t){for(var i\x3d0,o;i\x3cb;++i)s[(o\x3dq[i]).i]\x3do.x(t);return s.join(\x22\x22)})}function value$jscomp$0(a,b){var t\x3dtypeof b,c;return null\x3d\x3db||\x22boolean\x22\x3d\x3d\x3dt?constant(b):(\x22number\x22\x3d\x3d\x3dt?number:\x22string\x22\x3d\x3d\x3dt?(c\x3dd3Color.color(b))?(b\x3dc,rgb$jscomp$0):string:b instanceof d3Color.color?\nrgb$jscomp$0:b instanceof Date?date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:\x22function\x22!\x3d\x3dtypeof b.valueOf\x26\x26\x22function\x22!\x3d\x3dtypeof b.toString||isNaN(b)?object:number)(a,b)}function decompose(a,b,c,d,e,f){var scaleX,scaleY,skewX;if(scaleX\x3dMath.sqrt(a*a+b*b))a/\x3dscaleX,b/\x3dscaleX;if(skewX\x3da*c+b*d)c-\x3da*skewX,d-\x3db*skewX;if(scaleY\x3dMath.sqrt(c*c+d*d))c/\x3dscaleY,d/\x3dscaleY,skewX/\x3dscaleY;a*d\x3cb*c\x26\x26(a\x3d-a,b\x3d-b,skewX\x3d-skewX,scaleX\x3d-scaleX);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,\nskewX:Math.atan(skewX)*degrees,scaleX,scaleY}}function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+\x22 \x22:\x22\x22}function translate(xa,ya,xb,yb,s,q){xa!\x3d\x3dxb||ya!\x3d\x3dyb?(s\x3ds.push(\x22translate(\x22,null,pxComma,null,pxParen),q.push({i:s-4,x:number(xa,xb)},{i:s-2,x:number(ya,yb)})):(xb||yb)\x26\x26s.push(\x22translate(\x22+xb+pxComma+yb+pxParen)}function rotate(a,b,s,q){a!\x3d\x3db?(180\x3ca-b?b+\x3d360:180\x3cb-a\x26\x26(a+\x3d360),q.push({i:s.push(pop(s)+\x22rotate(\x22,null,degParen)-2,x:number(a,b)})):\nb\x26\x26s.push(pop(s)+\x22rotate(\x22+b+degParen)}function skewX(a,b,s,q){a!\x3d\x3db?q.push({i:s.push(pop(s)+\x22skewX(\x22,null,degParen)-2,x:number(a,b)}):b\x26\x26s.push(pop(s)+\x22skewX(\x22+b+degParen)}function scale(xa,ya,xb,yb,s,q){xa!\x3d\x3dxb||ya!\x3d\x3dyb?(s\x3ds.push(pop(s)+\x22scale(\x22,null,\x22,\x22,null,\x22)\x22),q.push({i:s-4,x:number(xa,xb)},{i:s-2,x:number(ya,yb)})):1\x3d\x3d\x3dxb\x26\x261\x3d\x3d\x3dyb||s.push(pop(s)+\x22scale(\x22+xb+\x22,\x22+yb+\x22)\x22)}return function(a,b){var s\x3d[],q\x3d[];a\x3dparse(a);b\x3dparse(b);translate(a.translateX,a.translateY,b.translateX,b.translateY,s,q);\nrotate(a.rotate,b.rotate,s,q);skewX(a.skewX,b.skewX,s,q);scale(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q);a\x3db\x3dnull;return function(t){for(var i\x3d-1,n\x3dq.length,o;++i\x3cn;)s[(o\x3dq[i]).i]\x3do.x(t);return s.join(\x22\x22)}}}function cosh(x){return((x\x3dMath.exp(x))+1/x)/2}function hsl(hue){return function(start,end){var h\x3dhue((start\x3dd3Color.hsl(start)).h,(end\x3dd3Color.hsl(end)).h),s\x3dnogamma(start.s,end.s),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3dh(t);start.s\x3ds(t);\nstart.l\x3dl(t);start.opacity\x3dopacity(t);return start+\x22\x22}}}function hcl(hue){return function(start,end){var h\x3dhue((start\x3dd3Color.hcl(start)).h,(end\x3dd3Color.hcl(end)).h),c\x3dnogamma(start.c,end.c),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3dh(t);start.c\x3dc(t);start.l\x3dl(t);start.opacity\x3dopacity(t);return start+\x22\x22}}}function cubehelix$jscomp$0(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h\x3dhue((start\x3dd3Color.cubehelix(start)).h,\n(end\x3dd3Color.cubehelix(end)).h),s\x3dnogamma(start.s,end.s),l\x3dnogamma(start.l,end.l),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.h\x3dh(t);start.s\x3ds(t);start.l\x3dl(Math.pow(t,y));start.opacity\x3dopacity(t);return start+\x22\x22}}y\x3d+y;cubehelix.gamma\x3dcubehelixGamma;return cubehelix}(1)}var constant\x3dx\x3d\x3e()\x3d\x3ex,rgb$jscomp$0\x3dfunction rgbGamma(y){function rgb(start,end){var r\x3dcolor((start\x3dd3Color.rgb(start)).r,(end\x3dd3Color.rgb(end)).r),g\x3dcolor(start.g,end.g),b\x3dcolor(start.b,end.b),opacity\x3dnogamma(start.opacity,\nend.opacity);return function(t){start.r\x3dr(t);start.g\x3dg(t);start.b\x3db(t);start.opacity\x3dopacity(t);return start+\x22\x22}}var color\x3dgamma(y);rgb.gamma\x3drgbGamma;return rgb}(1),rgbBasis\x3drgbSpline(basis$1),rgbBasisClosed\x3drgbSpline(basisClosed),reA\x3d/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,reB\x3dnew RegExp(reA.source,\x22g\x22),degrees\x3d180/Math.PI,identity\x3d{translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},svgNode,interpolateTransformCss\x3dinterpolateTransform(function(value){value\x3dnew (\x22function\x22\x3d\x3d\x3dtypeof DOMMatrix?\nDOMMatrix:WebKitCSSMatrix)(value+\x22\x22);return value.isIdentity?identity:decompose(value.a,value.b,value.c,value.d,value.e,value.f)},\x22px, \x22,\x22px)\x22,\x22deg)\x22),interpolateTransformSvg\x3dinterpolateTransform(function(value){if(null\x3d\x3dvalue)return identity;svgNode||(svgNode\x3ddocument.createElementNS(\x22http://www.w3.org/2000/svg\x22,\x22g\x22));svgNode.setAttribute(\x22transform\x22,value);if(!(value\x3dsvgNode.transform.baseVal.consolidate()))return identity;value\x3dvalue.matrix;return decompose(value.a,value.b,value.c,value.d,value.e,\nvalue.f)},\x22, \x22,\x22)\x22,\x22)\x22),zoom$jscomp$0\x3dfunction zoomRho(rho,rho2,rho4){function zoom(p0,p1){var ux0\x3dp0[0],uy0\x3dp0[1],w0\x3dp0[2];p0\x3dp1[2];var dx\x3dp1[0]-ux0,dy\x3dp1[1]-uy0,d2\x3ddx*dx+dy*dy;if(1E-12\x3ed2){var S\x3dMath.log(p0/w0)/rho;p0\x3dfunction(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]}}else{var d1\x3dMath.sqrt(d2);p1\x3d(p0*p0-w0*w0+rho4*d2)/(2*w0*rho2*d1);p0\x3d(p0*p0-w0*w0-rho4*d2)/(2*p0*rho2*d1);var r0\x3dMath.log(Math.sqrt(p1*p1+1)-p1);S\x3d(Math.log(Math.sqrt(p0*p0+1)-p0)-r0)/rho;p0\x3dfunction(t){t*\x3dS;var coshr0\x3dcosh(r0),\nx\x3drho*t+r0;var JSCompiler_inline_result\x3d((x\x3dMath.exp(2*x))-1)/(x+1);var x$jscomp$0\x3dr0;x\x3d((x$jscomp$0\x3dMath.exp(x$jscomp$0))-1/x$jscomp$0)/2;JSCompiler_inline_result\x3dw0/(rho2*d1)*(coshr0*JSCompiler_inline_result-x);return[ux0+JSCompiler_inline_result*dx,uy0+JSCompiler_inline_result*dy,w0*coshr0/cosh(rho*t+r0)]}}p0.duration\x3d1E3*S*rho/Math.SQRT2;return p0}zoom.rho\x3dfunction(_){_\x3dMath.max(.001,+_);var _2\x3d_*_;return zoomRho(_,_2,_2*_2)};return zoom}(Math.SQRT2,2,4),hsl$1\x3dhsl(hue),hslLong\x3dhsl(nogamma),hcl$1\x3d\nhcl(hue),hclLong\x3dhcl(nogamma),cubehelix$1\x3dcubehelix$jscomp$0(hue),cubehelixLong\x3dcubehelix$jscomp$0(nogamma);exports.interpolate\x3dvalue$jscomp$0;exports.interpolateArray\x3dfunction(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)};exports.interpolateBasis\x3dbasis$1;exports.interpolateBasisClosed\x3dbasisClosed;exports.interpolateCubehelix\x3dcubehelix$1;exports.interpolateCubehelixLong\x3dcubehelixLong;exports.interpolateDate\x3ddate;exports.interpolateDiscrete\x3dfunction(range){var n\x3drange.length;return function(t){return range[Math.max(0,\nMath.min(n-1,Math.floor(t*n)))]}};exports.interpolateHcl\x3dhcl$1;exports.interpolateHclLong\x3dhclLong;exports.interpolateHsl\x3dhsl$1;exports.interpolateHslLong\x3dhslLong;exports.interpolateHue\x3dfunction(a,b){var i\x3dhue(+a,+b);return function(t){t\x3di(t);return t-360*Math.floor(t/360)}};exports.interpolateLab\x3dfunction(start,end){var l\x3dnogamma((start\x3dd3Color.lab(start)).l,(end\x3dd3Color.lab(end)).l),a\x3dnogamma(start.a,end.a),b\x3dnogamma(start.b,end.b),opacity\x3dnogamma(start.opacity,end.opacity);return function(t){start.l\x3d\nl(t);start.a\x3da(t);start.b\x3db(t);start.opacity\x3dopacity(t);return start+\x22\x22}};exports.interpolateNumber\x3dnumber;exports.interpolateNumberArray\x3dnumberArray;exports.interpolateObject\x3dobject;exports.interpolateRgb\x3drgb$jscomp$0;exports.interpolateRgbBasis\x3drgbBasis;exports.interpolateRgbBasisClosed\x3drgbBasisClosed;exports.interpolateRound\x3dfunction(a,b){return a\x3d+a,b\x3d+b,function(t){return Math.round(a*(1-t)+b*t)}};exports.interpolateString\x3dstring;exports.interpolateTransformCss\x3dinterpolateTransformCss;exports.interpolateTransformSvg\x3d\ninterpolateTransformSvg;exports.interpolateZoom\x3dzoom$jscomp$0;exports.piecewise\x3dfunction(interpolate,values){void 0\x3d\x3d\x3dvalues\x26\x26(values\x3dinterpolate,interpolate\x3dvalue$jscomp$0);for(var i$jscomp$0\x3d0,n\x3dvalues.length-1,v\x3dvalues[0],I\x3dArray(0\x3en?0:n);i$jscomp$0\x3cn;)I[i$jscomp$0]\x3dinterpolate(v,v\x3dvalues[++i$jscomp$0]);return function(t){var i\x3dMath.max(0,Math.min(n-1,Math.floor(t*\x3dn)));return I[i](t-i)}};exports.quantize\x3dfunction(interpolator,n){for(var samples\x3dArray(n),i\x3d0;i\x3cn;++i)samples[i]\x3dinterpolator(i/(n-\n1));return samples};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_scale$dist$d3_scale.js", true , "shadow$provide.module$node_modules$d3_scale$dist$d3_scale\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22),require(\x22module$node_modules$d3_format$dist$d3_format\x22),require(\x22module$node_modules$d3_time$dist$d3_time\x22),require(\x22module$node_modules$d3_time_format$dist$d3_time_format\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports d3-array d3-interpolate d3-format d3-time d3-time-format\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.d3\x3dglobal.d3||{},global.d3,global.d3,global.d3,global.d3,global.d3))})(this,function(exports,d3Array,d3Interpolate,d3Format,d3Time,d3TimeFormat){function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}\nfunction initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:\x22function\x22\x3d\x3d\x3dtypeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),\x22function\x22\x3d\x3d\x3dtypeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}function ordinal(){function scale(d){var key\x3dd+\x22\x22,i\x3dindex.get(key);if(!i){if(unknown!\x3d\x3dimplicit)return unknown;index.set(key,i\x3ddomain.push(d))}return range[(i-1)%range.length]}var index\x3dnew Map,domain\x3d\n[],range\x3d[],unknown\x3dimplicit;scale.domain\x3dfunction(_){if(!arguments.length)return domain.slice();domain\x3d[];index\x3dnew Map;for(const value of _){const key\x3dvalue+\x22\x22;index.has(key)||index.set(key,domain.push(value))}return scale};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),scale):range.slice()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return ordinal(domain,range).unknown(unknown)};initRange.apply(scale,arguments);return scale}\nfunction band(){function rescale(){var n\x3ddomain().length,reverse\x3dr1\x3cr0,start\x3dreverse?r1:r0,stop\x3dreverse?r0:r1;step\x3d(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter);round\x26\x26(step\x3dMath.floor(step));start+\x3d(stop-start-step*(n-paddingInner))*align;bandwidth\x3dstep*(1-paddingInner);round\x26\x26(start\x3dMath.round(start),bandwidth\x3dMath.round(bandwidth));n\x3dd3Array.range(n).map(function(i){return start+step*i});return ordinalRange(reverse?n.reverse():n)}var scale\x3dordinal().unknown(void 0),domain\x3dscale.domain,\nordinalRange\x3dscale.range,r0\x3d0,r1\x3d1,step,bandwidth,round\x3d!1,paddingInner\x3d0,paddingOuter\x3d0,align\x3d.5;delete scale.unknown;scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):domain()};scale.range\x3dfunction(_){return arguments.length?([r0,r1]\x3d_,r0\x3d+r0,r1\x3d+r1,rescale()):[r0,r1]};scale.rangeRound\x3dfunction(_){return[r0,r1]\x3d_,r0\x3d+r0,r1\x3d+r1,round\x3d!0,rescale()};scale.bandwidth\x3dfunction(){return bandwidth};scale.step\x3dfunction(){return step};scale.round\x3dfunction(_){return arguments.length?(round\x3d\n!!_,rescale()):round};scale.padding\x3dfunction(_){return arguments.length?(paddingInner\x3dMath.min(1,paddingOuter\x3d+_),rescale()):paddingInner};scale.paddingInner\x3dfunction(_){return arguments.length?(paddingInner\x3dMath.min(1,_),rescale()):paddingInner};scale.paddingOuter\x3dfunction(_){return arguments.length?(paddingOuter\x3d+_,rescale()):paddingOuter};scale.align\x3dfunction(_){return arguments.length?(align\x3dMath.max(0,Math.min(1,_)),rescale()):align};scale.copy\x3dfunction(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};\nreturn initRange.apply(rescale(),arguments)}function pointish(scale){var copy\x3dscale.copy;scale.padding\x3dscale.paddingOuter;delete scale.paddingInner;delete scale.paddingOuter;scale.copy\x3dfunction(){return pointish(copy())};return scale}function constants(x){return function(){return x}}function number$1(x){return+x}function identity$1(x){return x}function normalize(a,b){return(b-\x3da\x3d+a)?function(x){return(x-a)/b}:constants(isNaN(b)?NaN:.5)}function clamper(a,b){if(a\x3eb){var t\x3da;a\x3db;b\x3dt}return function(x){return Math.max(a,\nMath.min(b,x))}}function bimap(domain,range,interpolate){var d0\x3ddomain[0];domain\x3ddomain[1];var r0\x3drange[0];range\x3drange[1];domain\x3cd0?(d0\x3dnormalize(domain,d0),r0\x3dinterpolate(range,r0)):(d0\x3dnormalize(d0,domain),r0\x3dinterpolate(r0,range));return function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j\x3dMath.min(domain.length,range.length)-1,d\x3dArray(j),r\x3dArray(j),i$jscomp$0\x3d-1;domain[j]\x3cdomain[0]\x26\x26(domain\x3ddomain.slice().reverse(),range\x3drange.slice().reverse());for(;++i$jscomp$0\x3cj;)d[i$jscomp$0]\x3d\nnormalize(domain[i$jscomp$0],domain[i$jscomp$0+1]),r[i$jscomp$0]\x3dinterpolate(range[i$jscomp$0],range[i$jscomp$0+1]);return function(x){var i\x3dd3Array.bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy$1(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function transformer$2(){function rescale(){var n\x3dMath.min(domain.length,range.length);clamp!\x3d\x3didentity$1\x26\x26(clamp\x3dclamper(domain[0],domain[n-\n1]));piecewise\x3d2\x3cn?polymap:bimap;output\x3dinput\x3dnull;return scale}function scale(x){return null\x3d\x3dx||isNaN(x\x3d+x)?unknown:(output||(output\x3dpiecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}var domain\x3dunit,range\x3dunit,interpolate\x3dd3Interpolate.interpolate,transform,untransform,unknown,clamp\x3didentity$1,piecewise,output,input;scale.invert\x3dfunction(y){return clamp(untransform((input||(input\x3dpiecewise(range,domain.map(transform),d3Interpolate.interpolateNumber)))(y)))};scale.domain\x3d\nfunction(_){return arguments.length?(domain\x3dArray.from(_,number$1),rescale()):domain.slice()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),rescale()):range.slice()};scale.rangeRound\x3dfunction(_){return range\x3dArray.from(_),interpolate\x3dd3Interpolate.interpolateRound,rescale()};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d_?!0:identity$1,rescale()):clamp!\x3d\x3didentity$1};scale.interpolate\x3dfunction(_){return arguments.length?(interpolate\x3d_,rescale()):interpolate};scale.unknown\x3d\nfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};return function(t,u){transform\x3dt;untransform\x3du;return rescale()}}function tickFormat(start,stop,count,specifier){count\x3dd3Array.tickStep(start,stop,count);var precision;specifier\x3dd3Format.formatSpecifier(null\x3d\x3dspecifier?\x22,f\x22:specifier);switch(specifier.type){case \x22s\x22:return start\x3dMath.max(Math.abs(start),Math.abs(stop)),null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionPrefix(count,start))||(specifier.precision\x3dprecision),d3Format.formatPrefix(specifier,\nstart);case \x22\x22:case \x22e\x22:case \x22g\x22:case \x22p\x22:case \x22r\x22:null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionRound(count,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision\x3dprecision-(\x22e\x22\x3d\x3d\x3dspecifier.type));break;case \x22f\x22:case \x22%\x22:null!\x3dspecifier.precision||isNaN(precision\x3dd3Format.precisionFixed(count))||(specifier.precision\x3dprecision-2*(\x22%\x22\x3d\x3d\x3dspecifier.type))}return d3Format.format(specifier)}function linearish(scale){var domain\x3dscale.domain;scale.ticks\x3dfunction(count){var d\x3ddomain();\nreturn d3Array.ticks(d[0],d[d.length-1],null\x3d\x3dcount?10:count)};scale.tickFormat\x3dfunction(count,specifier){var d\x3ddomain();return tickFormat(d[0],d[d.length-1],null\x3d\x3dcount?10:count,specifier)};scale.nice\x3dfunction(count){null\x3d\x3dcount\x26\x26(count\x3d10);var d\x3ddomain(),i0\x3d0,i1\x3dd.length-1,start\x3dd[i0],stop\x3dd[i1],maxIter\x3d10;if(stop\x3cstart){var step\x3dstart;start\x3dstop;stop\x3dstep;step\x3di0;i0\x3di1;i1\x3dstep}for(;0\x3cmaxIter--;){step\x3dd3Array.tickIncrement(start,stop,count);if(step\x3d\x3d\x3dprestep)return d[i0]\x3dstart,d[i1]\x3dstop,domain(d);\nif(0\x3cstep)start\x3dMath.floor(start/step)*step,stop\x3dMath.ceil(stop/step)*step;else if(0\x3estep)start\x3dMath.ceil(start*step)/step,stop\x3dMath.floor(stop*step)/step;else break;var prestep\x3dstep}return scale};return scale}function linear(){var scale\x3dtransformer$2()(identity$1,identity$1);scale.copy\x3dfunction(){return copy$1(scale,linear())};initRange.apply(scale,arguments);return linearish(scale)}function identity(domain){function scale(x){return null\x3d\x3dx||isNaN(x\x3d+x)?unknown:x}var unknown;scale.invert\x3dscale;scale.domain\x3d\nscale.range\x3dfunction(_){return arguments.length?(domain\x3dArray.from(_,number$1),scale):domain.slice()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return identity(domain).unknown(unknown)};domain\x3darguments.length?Array.from(domain,number$1):[0,1];return linearish(scale)}function nice(domain,interval){domain\x3ddomain.slice();var i0\x3d0,i1\x3ddomain.length-1,x0\x3ddomain[i0],x1\x3ddomain[i1];if(x1\x3cx0){var t\x3di0;i0\x3di1;i1\x3dt;t\x3dx0;x0\x3dx1;x1\x3dt}domain[i0]\x3dinterval.floor(x0);\ndomain[i1]\x3dinterval.ceil(x1);return domain}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+(\x221e\x22+x):0\x3ex?0:x}function powp(base){return 10\x3d\x3d\x3dbase?pow10:base\x3d\x3d\x3dMath.E?Math.exp:function(x){return Math.pow(base,x)}}function logp(base){return base\x3d\x3d\x3dMath.E?Math.log:10\x3d\x3d\x3dbase\x26\x26Math.log10||2\x3d\x3d\x3dbase\x26\x26Math.log2||(base\x3dMath.log(base),function(x){return Math.log(x)/\nbase})}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){function rescale(){logs\x3dlogp(base);pows\x3dpowp(base);0\x3edomain()[0]?(logs\x3dreflect(logs),pows\x3dreflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp);return scale}var scale\x3dtransform(transformLog,transformExp),domain\x3dscale.domain,base\x3d10,logs,pows;scale.base\x3dfunction(_){return arguments.length?(base\x3d+_,rescale()):base};scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):\ndomain()};scale.ticks\x3dfunction(count){var d\x3ddomain(),u\x3dd[0];d\x3dd[d.length-1];var r;if(r\x3dd\x3cu)i\x3du,u\x3dd,d\x3di;var i\x3dlogs(u),j\x3dlogs(d),n\x3dnull\x3d\x3dcount?10:+count,z\x3d[];if(!(base%1)\x26\x26j-i\x3cn){i\x3dMath.floor(i);j\x3dMath.ceil(j);if(0\x3cu)for(;i\x3c\x3dj;++i){var k\x3d1;for(count\x3dpows(i);k\x3cbase;++k){var t\x3dcount*k;if(!(t\x3cu)){if(t\x3ed)break;z.push(t)}}}else for(;i\x3c\x3dj;++i)for(k\x3dbase-1,count\x3dpows(i);1\x3c\x3dk;--k)if(t\x3dcount*k,!(t\x3cu)){if(t\x3ed)break;z.push(t)}2*z.length\x3cn\x26\x26(z\x3dd3Array.ticks(u,d,n))}else z\x3dd3Array.ticks(i,j,Math.min(j-i,n)).map(pows);\nreturn r?z.reverse():z};scale.tickFormat\x3dfunction(count,specifier){null\x3d\x3dspecifier\x26\x26(specifier\x3d10\x3d\x3d\x3dbase?\x22.0e\x22:\x22,\x22);\x22function\x22!\x3d\x3dtypeof specifier\x26\x26(specifier\x3dd3Format.format(specifier));if(Infinity\x3d\x3d\x3dcount)return specifier;null\x3d\x3dcount\x26\x26(count\x3d10);var k\x3dMath.max(1,base*count/scale.ticks().length);return function(d){var i\x3dd/pows(Math.round(logs(d)));i*base\x3cbase-.5\x26\x26(i*\x3dbase);return i\x3c\x3dk?specifier(d):\x22\x22}};scale.nice\x3dfunction(){return domain(nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},\nceil:function(x){return pows(Math.ceil(logs(x)))}}))};return scale}function log(){var scale\x3dloggish(transformer$2()).domain([1,10]);scale.copy\x3dfunction(){return copy$1(scale,log()).base(scale.base())};initRange.apply(scale,arguments);return scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c\x3d1,scale\x3dtransform(transformSymlog(c),\ntransformSymexp(c));scale.constant\x3dfunction(_){return arguments.length?transform(transformSymlog(c\x3d+_),transformSymexp(c)):c};return linearish(scale)}function symlog(){var scale\x3dsymlogish(transformer$2());scale.copy\x3dfunction(){return copy$1(scale,symlog()).constant(scale.constant())};return initRange.apply(scale,arguments)}function transformPow(exponent){return function(x){return 0\x3ex?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return 0\x3ex?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return 0\x3e\nx?-x*x:x*x}function powish(transform){var scale\x3dtransform(identity$1,identity$1),exponent\x3d1;scale.exponent\x3dfunction(_){return arguments.length?(exponent\x3d+_,1\x3d\x3d\x3dexponent?transform(identity$1,identity$1):.5\x3d\x3d\x3dexponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))):exponent};return linearish(scale)}function pow(){var scale\x3dpowish(transformer$2());scale.copy\x3dfunction(){return copy$1(scale,pow()).exponent(scale.exponent())};initRange.apply(scale,arguments);\nreturn scale}function square(x){return Math.sign(x)*x*x}function radial(){function scale(x){x\x3dsquared(x);x\x3dMath.sign(x)*Math.sqrt(Math.abs(x));return isNaN(x)?unknown:round?Math.round(x):x}var squared\x3dtransformer$2()(identity$1,identity$1),range\x3d[0,1],round\x3d!1,unknown;scale.invert\x3dfunction(y){return squared.invert(square(y))};scale.domain\x3dfunction(_){return arguments.length?(squared.domain(_),scale):squared.domain()};scale.range\x3dfunction(_){return arguments.length?(squared.range((range\x3dArray.from(_,\nnumber$1)).map(square)),scale):range.slice()};scale.rangeRound\x3dfunction(_){return scale.range(_).round(!0)};scale.round\x3dfunction(_){return arguments.length?(round\x3d!!_,scale):round};scale.clamp\x3dfunction(_){return arguments.length?(squared.clamp(_),scale):squared.clamp()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return radial(squared.domain(),range).round(round).clamp(squared.clamp()).unknown(unknown)};initRange.apply(scale,arguments);return linearish(scale)}\nfunction quantile(){function rescale(){var i\x3d0,n\x3dMath.max(1,range.length);for(thresholds\x3dArray(n-1);++i\x3cn;)thresholds[i-1]\x3dd3Array.quantileSorted(domain,i/n);return scale}function scale(x){return null\x3d\x3dx||isNaN(x\x3d+x)?unknown:range[d3Array.bisect(thresholds,x)]}var domain\x3d[],range\x3d[],thresholds\x3d[],unknown;scale.invertExtent\x3dfunction(y){y\x3drange.indexOf(y);return 0\x3ey?[NaN,NaN]:[0\x3cy?thresholds[y-1]:domain[0],y\x3cthresholds.length?thresholds[y]:domain[domain.length-1]]};scale.domain\x3dfunction(_){if(!arguments.length)return domain.slice();\ndomain\x3d[];for(let d of _)null\x3d\x3dd||isNaN(d\x3d+d)||domain.push(d);domain.sort(d3Array.ascending);return rescale()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),rescale()):range.slice()};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.quantiles\x3dfunction(){return thresholds.slice()};scale.copy\x3dfunction(){return quantile().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}function quantize(){function scale(x){return null!\x3d\nx\x26\x26x\x3c\x3dx?range[d3Array.bisect(domain,x,0,n)]:unknown}function rescale(){var i\x3d-1;for(domain\x3dArray(n);++i\x3cn;)domain[i]\x3d((i+1)*x1-(i-n)*x0)/(n+1);return scale}var x0\x3d0,x1\x3d1,n\x3d1,domain\x3d[.5],range\x3d[0,1],unknown;scale.domain\x3dfunction(_){return arguments.length?([x0,x1]\x3d_,x0\x3d+x0,x1\x3d+x1,rescale()):[x0,x1]};scale.range\x3dfunction(_){return arguments.length?(n\x3d(range\x3dArray.from(_)).length-1,rescale()):range.slice()};scale.invertExtent\x3dfunction(y){y\x3drange.indexOf(y);return 0\x3ey?[NaN,NaN]:1\x3ey?[x0,domain[0]]:y\x3e\x3d\nn?[domain[n-1],x1]:[domain[y-1],domain[y]]};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):scale};scale.thresholds\x3dfunction(){return domain.slice()};scale.copy\x3dfunction(){return quantize().domain([x0,x1]).range(range).unknown(unknown)};return initRange.apply(linearish(scale),arguments)}function threshold(){function scale(x){return null!\x3dx\x26\x26x\x3c\x3dx?range[d3Array.bisect(domain,x,0,n)]:unknown}var domain\x3d[.5],range\x3d[0,1],unknown,n\x3d1;scale.domain\x3dfunction(_){return arguments.length?\n(domain\x3dArray.from(_),n\x3dMath.min(domain.length,range.length-1),scale):domain.slice()};scale.range\x3dfunction(_){return arguments.length?(range\x3dArray.from(_),n\x3dMath.min(domain.length,range.length-1),scale):range.slice()};scale.invertExtent\x3dfunction(y){y\x3drange.indexOf(y);return[domain[y-1],domain[y]]};scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};scale.copy\x3dfunction(){return threshold().domain(domain).range(range).unknown(unknown)};return initRange.apply(scale,arguments)}\nfunction date$jscomp$0(t){return new Date(t)}function number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){function tickFormat(date){return(second(date)\x3cdate?formatMillisecond:minute(date)\x3cdate?formatSecond:hour(date)\x3cdate?formatMinute:day(date)\x3cdate?formatHour:month(date)\x3cdate?week(date)\x3cdate?formatDay:formatWeek:year(date)\x3cdate?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop){null\x3d\x3dinterval\x26\x26(interval\x3d\n10);if(\x22number\x22\x3d\x3d\x3dtypeof interval){var target\x3dMath.abs(stop-start)/interval,i$jscomp$0\x3dd3Array.bisector(function(i){return i[2]}).right(tickIntervals,target);i$jscomp$0\x3d\x3d\x3dtickIntervals.length?(start\x3dd3Array.tickStep(start/durationYear,stop/durationYear,interval),interval\x3dyear):i$jscomp$0?(i$jscomp$0\x3dtickIntervals[target/tickIntervals[i$jscomp$0-1][2]\x3ctickIntervals[i$jscomp$0][2]/target?i$jscomp$0-1:i$jscomp$0],start\x3di$jscomp$0[1],interval\x3di$jscomp$0[0]):(start\x3dMath.max(d3Array.tickStep(start,stop,\ninterval),1),interval\x3dmillisecond);return interval.every(start)}return interval}var scale\x3dtransformer$2()(identity$1,identity$1),invert\x3dscale.invert,domain\x3dscale.domain,formatMillisecond\x3dformat(\x22.%L\x22),formatSecond\x3dformat(\x22:%S\x22),formatMinute\x3dformat(\x22%I:%M\x22),formatHour\x3dformat(\x22%I %p\x22),formatDay\x3dformat(\x22%a %d\x22),formatWeek\x3dformat(\x22%b %d\x22),formatMonth\x3dformat(\x22%B\x22),formatYear\x3dformat(\x22%Y\x22),tickIntervals\x3d[[second,1,1E3],[second,5,5E3],[second,15,15E3],[second,30,3E4],[minute,1,6E4],[minute,5,3E5],[minute,\n15,9E5],[minute,30,18E5],[hour,1,36E5],[hour,3,108E5],[hour,6,216E5],[hour,12,432E5],[day,1,864E5],[day,2,1728E5],[week,1,durationWeek],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];scale.invert\x3dfunction(y){return new Date(invert(y))};scale.domain\x3dfunction(_){return arguments.length?domain(Array.from(_,number)):domain().map(date$jscomp$0)};scale.ticks\x3dfunction(interval){var d\x3ddomain(),t0\x3dd[0];d\x3dd[d.length-1];var r\x3dd\x3ct0;if(r){var t\x3dt0;t0\x3dd;d\x3dt}t\x3d(t\x3dtickInterval(interval,\nt0,d))?t.range(t0,d+1):[];return r?t.reverse():t};scale.tickFormat\x3dfunction(count,specifier){return null\x3d\x3dspecifier?tickFormat:format(specifier)};scale.nice\x3dfunction(interval){var d\x3ddomain();return(interval\x3dtickInterval(interval,d[0],d[d.length-1]))?domain(nice(d,interval)):scale};scale.copy\x3dfunction(){return copy$1(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))};return scale}function transformer$1(){function scale(x){return null\x3d\x3dx||isNaN(x\x3d+x)?unknown:interpolator(0\x3d\x3d\x3d\nk10?.5:(x\x3d(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]\x3d_,interpolator\x3dinterpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}var x0\x3d0,x1\x3d1,t0,t1,k10,transform,interpolator\x3didentity$1,clamp\x3d!1,unknown;scale.domain\x3dfunction(_){return arguments.length?([x0,x1]\x3d_,t0\x3dtransform(x0\x3d+x0),t1\x3dtransform(x1\x3d+x1),k10\x3dt0\x3d\x3d\x3dt1?0:1/(t1-t0),scale):[x0,x1]};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d\n!!_,scale):clamp};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};scale.range\x3drange(d3Interpolate.interpolate);scale.rangeRound\x3drange(d3Interpolate.interpolateRound);scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};return function(t){transform\x3dt;t0\x3dt(x0);t1\x3dt(x1);k10\x3dt0\x3d\x3d\x3dt1?0:1/(t1-t0);return scale}}function copy$jscomp$0(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}\nfunction sequential(){var scale\x3dlinearish(transformer$1()(identity$1));scale.copy\x3dfunction(){return copy$jscomp$0(scale,sequential())};return initInterpolator.apply(scale,arguments)}function sequentialLog(){var scale\x3dloggish(transformer$1()).domain([1,10]);scale.copy\x3dfunction(){return copy$jscomp$0(scale,sequentialLog()).base(scale.base())};return initInterpolator.apply(scale,arguments)}function sequentialSymlog(){var scale\x3dsymlogish(transformer$1());scale.copy\x3dfunction(){return copy$jscomp$0(scale,\nsequentialSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale\x3dpowish(transformer$1());scale.copy\x3dfunction(){return copy$jscomp$0(scale,sequentialPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}function sequentialQuantile(){function scale(x){if(null!\x3dx\x26\x26!isNaN(x\x3d+x))return interpolator((d3Array.bisect(domain,x,1)-1)/(domain.length-1))}var domain\x3d[],interpolator\x3didentity$1;scale.domain\x3dfunction(_){if(!arguments.length)return domain.slice();\ndomain\x3d[];for(let d of _)null\x3d\x3dd||isNaN(d\x3d+d)||domain.push(d);domain.sort(d3Array.ascending);return scale};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};scale.range\x3dfunction(){return domain.map((d,i)\x3d\x3einterpolator(i/(domain.length-1)))};scale.quantiles\x3dfunction(n){return Array.from({length:n+1},(_,i)\x3d\x3ed3Array.quantile(domain,i/n))};scale.copy\x3dfunction(){return sequentialQuantile(interpolator).domain(domain)};return initInterpolator.apply(scale,arguments)}\nfunction transformer(){function scale(x){return isNaN(x\x3d+x)?unknown:(x\x3d.5+((x\x3d+transform(x))-t1)*(s*x\x3cs*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1,r2;return arguments.length?([r0,r1,r2]\x3d_,interpolator\x3dd3Interpolate.piecewise(interpolate,[r0,r1,r2]),scale):[interpolator(0),interpolator(.5),interpolator(1)]}}var x0\x3d0,x1\x3d.5,x2\x3d1,s\x3d1,t0,t1,t2,k10,k21,interpolator\x3didentity$1,transform,clamp\x3d!1,unknown;scale.domain\x3dfunction(_){return arguments.length?\n([x0,x1,x2]\x3d_,t0\x3dtransform(x0\x3d+x0),t1\x3dtransform(x1\x3d+x1),t2\x3dtransform(x2\x3d+x2),k10\x3dt0\x3d\x3d\x3dt1?0:.5/(t1-t0),k21\x3dt1\x3d\x3d\x3dt2?0:.5/(t2-t1),s\x3dt1\x3ct0?-1:1,scale):[x0,x1,x2]};scale.clamp\x3dfunction(_){return arguments.length?(clamp\x3d!!_,scale):clamp};scale.interpolator\x3dfunction(_){return arguments.length?(interpolator\x3d_,scale):interpolator};scale.range\x3drange(d3Interpolate.interpolate);scale.rangeRound\x3drange(d3Interpolate.interpolateRound);scale.unknown\x3dfunction(_){return arguments.length?(unknown\x3d_,scale):unknown};\nreturn function(t){transform\x3dt;t0\x3dt(x0);t1\x3dt(x1);t2\x3dt(x2);k10\x3dt0\x3d\x3d\x3dt1?0:.5/(t1-t0);k21\x3dt1\x3d\x3d\x3dt2?0:.5/(t2-t1);s\x3dt1\x3ct0?-1:1;return scale}}function diverging(){var scale\x3dlinearish(transformer()(identity$1));scale.copy\x3dfunction(){return copy$jscomp$0(scale,diverging())};return initInterpolator.apply(scale,arguments)}function divergingLog(){var scale\x3dloggish(transformer()).domain([.1,1,10]);scale.copy\x3dfunction(){return copy$jscomp$0(scale,divergingLog()).base(scale.base())};return initInterpolator.apply(scale,\narguments)}function divergingSymlog(){var scale\x3dsymlogish(transformer());scale.copy\x3dfunction(){return copy$jscomp$0(scale,divergingSymlog()).constant(scale.constant())};return initInterpolator.apply(scale,arguments)}function divergingPow(){var scale\x3dpowish(transformer());scale.copy\x3dfunction(){return copy$jscomp$0(scale,divergingPow()).exponent(scale.exponent())};return initInterpolator.apply(scale,arguments)}const implicit\x3dSymbol(\x22implicit\x22);var unit\x3d[0,1],durationWeek\x3d6048E5,durationMonth\x3d2592E6,\ndurationYear\x3d31536E6;exports.scaleBand\x3dband;exports.scaleDiverging\x3ddiverging;exports.scaleDivergingLog\x3ddivergingLog;exports.scaleDivergingPow\x3ddivergingPow;exports.scaleDivergingSqrt\x3dfunction(){return divergingPow.apply(null,arguments).exponent(.5)};exports.scaleDivergingSymlog\x3ddivergingSymlog;exports.scaleIdentity\x3didentity;exports.scaleImplicit\x3dimplicit;exports.scaleLinear\x3dlinear;exports.scaleLog\x3dlog;exports.scaleOrdinal\x3dordinal;exports.scalePoint\x3dfunction(){return pointish(band.apply(null,arguments).paddingInner(1))};\nexports.scalePow\x3dpow;exports.scaleQuantile\x3dquantile;exports.scaleQuantize\x3dquantize;exports.scaleRadial\x3dradial;exports.scaleSequential\x3dsequential;exports.scaleSequentialLog\x3dsequentialLog;exports.scaleSequentialPow\x3dsequentialPow;exports.scaleSequentialQuantile\x3dsequentialQuantile;exports.scaleSequentialSqrt\x3dfunction(){return sequentialPow.apply(null,arguments).exponent(.5)};exports.scaleSequentialSymlog\x3dsequentialSymlog;exports.scaleSqrt\x3dfunction(){return pow.apply(null,arguments).exponent(.5)};exports.scaleSymlog\x3d\nsymlog;exports.scaleThreshold\x3dthreshold;exports.scaleTime\x3dfunction(){return initRange.apply(calendar(d3Time.timeYear,d3Time.timeMonth,d3Time.timeWeek,d3Time.timeDay,d3Time.timeHour,d3Time.timeMinute,d3Time.timeSecond,d3Time.timeMillisecond,d3TimeFormat.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)};exports.scaleUtc\x3dfunction(){return initRange.apply(calendar(d3Time.utcYear,d3Time.utcMonth,d3Time.utcWeek,d3Time.utcDay,d3Time.utcHour,d3Time.utcMinute,d3Time.utcSecond,d3Time.utcMillisecond,\nd3TimeFormat.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)};exports.tickFormat\x3dtickFormat;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_scale$build$vega_scale.js", true , "shadow$provide.module$node_modules$vega_scale$build$vega_scale\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_scale$dist$d3_scale\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util d3-array d3-scale d3-interpolate vega-time\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3,global.d3,global.vega))})(this,function(exports,vegaUtil,d3Array,$,$$1,vegaTime){function bandSpace(count,paddingInner,paddingOuter){paddingInner\x3dcount-paddingInner+2*paddingOuter;return count?0\x3cpaddingInner?paddingInner:1:0}function invertRange(scale){return function(_){let lo\x3d\n_[0];_\x3d_[1];let t;_\x3clo\x26\x26(t\x3dlo,lo\x3d_,_\x3dt);return[scale.invert(lo),scale.invert(_)]}}function invertRangeExtent(scale){return function(_){const range\x3dscale.range();let lo\x3d_[0];_\x3d_[1];let min\x3d-1,max;let n;if(_\x3clo){var t\x3dlo;lo\x3d_;_\x3dt}t\x3d0;for(n\x3drange.length;t\x3cn;++t)range[t]\x3e\x3dlo\x26\x26range[t]\x3c\x3d_\x26\x26(0\x3emin\x26\x26(min\x3dt),max\x3dt);if(!(0\x3emin))return lo\x3dscale.invertExtent(range[min]),_\x3dscale.invertExtent(range[max]),[void 0\x3d\x3d\x3dlo[0]?lo[1]:lo[0],void 0\x3d\x3d\x3d_[1]?_[0]:_[1]]}}function band(){function rescale(){var n\x3ddomain().length;\nconst reverse\x3drange[1]\x3crange[0],stop\x3drange[1-reverse],space\x3dbandSpace(n,paddingInner,paddingOuter);let start\x3drange[reverse-0];step\x3d(stop-start)/(space||1);round\x26\x26(step\x3dMath.floor(step));start+\x3d(stop-start-step*(n-paddingInner))*align;bandwidth\x3dstep*(1-paddingInner);round\x26\x26(start\x3dMath.round(start),bandwidth\x3dMath.round(bandwidth));n\x3dd3Array.range(n).map(i\x3d\x3estart+step*i);return ordinalRange(reverse?n.reverse():n)}const scale\x3d$.scaleOrdinal().unknown(void 0),domain\x3dscale.domain,ordinalRange\x3dscale.range;\nlet range\x3d[0,1],step,bandwidth,round\x3d!1,paddingInner\x3d0,paddingOuter\x3d0,align\x3d.5;delete scale.unknown;scale.domain\x3dfunction(_){return arguments.length?(domain(_),rescale()):domain()};scale.range\x3dfunction(_){return arguments.length?(range\x3d[+_[0],+_[1]],rescale()):range.slice()};scale.rangeRound\x3dfunction(_){range\x3d[+_[0],+_[1]];round\x3d!0;return rescale()};scale.bandwidth\x3dfunction(){return bandwidth};scale.step\x3dfunction(){return step};scale.round\x3dfunction(_){return arguments.length?(round\x3d!!_,rescale()):\nround};scale.padding\x3dfunction(_){return arguments.length?(paddingInner\x3dpaddingOuter\x3dMath.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingInner\x3dfunction(_){return arguments.length?(paddingInner\x3dMath.max(0,Math.min(1,_)),rescale()):paddingInner};scale.paddingOuter\x3dfunction(_){return arguments.length?(paddingOuter\x3dMath.max(0,Math.min(1,_)),rescale()):paddingOuter};scale.align\x3dfunction(_){return arguments.length?(align\x3dMath.max(0,Math.min(1,_)),rescale()):align};scale.invertRange\x3dfunction(_){if(null!\x3d\n_[0]\x26\x26null!\x3d_[1]){var reverse\x3drange[1]\x3crange[0],values\x3dreverse?ordinalRange().reverse():ordinalRange(),n\x3dvalues.length-1,lo\x3d+_[0],hi\x3d+_[1];if(lo\x3d\x3d\x3dlo\x26\x26hi\x3d\x3d\x3dhi){if(hi\x3clo){var t\x3dlo;lo\x3dhi;hi\x3dt}if(!(hi\x3cvalues[0]||lo\x3erange[1-reverse]))return _\x3dMath.max(0,d3Array.bisectRight(values,lo)-1),hi\x3dlo\x3d\x3d\x3dhi?_:d3Array.bisectRight(values,hi)-1,lo-values[_]\x3ebandwidth+1E-10\x26\x26++_,reverse\x26\x26(t\x3d_,_\x3dn-hi,hi\x3dn-t),_\x3ehi?void 0:domain().slice(_,hi+1)}}};scale.invert\x3dfunction(_){return(_\x3dscale.invertRange([_,_]))?_[0]:_};scale.copy\x3d\nfunction(){return band().domain(domain()).range(range).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)};return rescale()}function pointish(scale){const copy\x3dscale.copy;scale.padding\x3dscale.paddingOuter;delete scale.paddingInner;scale.copy\x3dfunction(){return pointish(copy())};return scale}function scaleBinOrdinal(){function scale(x){return null\x3d\x3dx||x!\x3d\x3dx?void 0:range[(d3Array.bisect(domain,x)-1)%range.length]}let domain\x3d[],range\x3d[];scale.domain\x3dfunction(_){return arguments.length?\n(domain\x3dmap.call(_,vegaUtil.toNumber),scale):domain.slice()};scale.range\x3dfunction(_){return arguments.length?(range\x3dslice.call(_),scale):range.slice()};scale.tickFormat\x3dfunction(count,specifier){return $.tickFormat(domain[0],vegaUtil.peek(domain),null\x3d\x3dcount?10:count,specifier)};scale.copy\x3dfunction(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())};return scale}function create(type,constructor,metadata){const ctr\x3dfunction(){const s\x3dconstructor();s.invertRange||(s.invertRange\x3d\ns.invert?invertRange(s):s.invertExtent?invertRangeExtent(s):void 0);s.type\x3dtype;return s};ctr.metadata\x3dvegaUtil.toSet(vegaUtil.array(metadata));return ctr}function scale$jscomp$0(type,scale,metadata){return 1\x3carguments.length?(scales[type]\x3dcreate(type,scale,metadata),this):isValidScaleType(type)?scales[type]:void 0}function isValidScaleType(type){return vegaUtil.hasOwnProperty(scales,type)}function hasType(key,type){return(key\x3dscales[key])\x26\x26key.metadata[type]}function isDiscrete(key){return hasType(key,\n\x22discrete\x22)}function isDiscretizing(key){return hasType(key,\x22discretizing\x22)}function isLogarithmic(key){return hasType(key,\x22log\x22)}function isTemporal(key){return hasType(key,\x22temporal\x22)}function interpolateColors(colors,type,gamma){return $$1.piecewise(interpolate(type||\x22rgb\x22,gamma),colors)}function interpolate(type,gamma){type\x3d$__namespace[method(type)];return null!\x3dgamma\x26\x26type\x26\x26type.gamma?type.gamma(gamma):type}function method(type){return\x22interpolate\x22+type.toLowerCase().split(\x22-\x22).map(s\x3d\x3es[0].toUpperCase()+\ns.slice(1)).join(\x22\x22)}function colors$jscomp$0(palette){const n\x3dpalette.length/6|0,c\x3dArray(n);for(let i\x3d0;i\x3cn;)c[i]\x3d\x22#\x22+palette.slice(6*i,6*++i);return c}function apply(_,f){for(const k in _)scheme$jscomp$0(k,f(_[k]))}function scheme$jscomp$0(name,scheme){name\x3dname\x26\x26name.toLowerCase();return 1\x3carguments.length?(schemes[name]\x3dscheme,this):schemes[name]}function validTicks(scale,ticks,count){var range\x3dscale.range();let lo\x3drange[0],hi\x3dvegaUtil.peek(range);range\x3dascending;lo\x3ehi\x26\x26(range\x3dhi,hi\x3dlo,lo\x3drange,\nrange\x3ddescending);lo\x3dMath.floor(lo);hi\x3dMath.ceil(hi);ticks\x3dticks.map(v\x3d\x3e[v,scale(v)]).filter(_\x3d\x3elo\x3c\x3d_[1]\x26\x26_[1]\x3c\x3dhi).sort(range).map(_\x3d\x3e_[0]);if(0\x3ccount\x26\x261\x3cticks.length){for(range\x3d[ticks[0],vegaUtil.peek(ticks)];ticks.length\x3ecount\x26\x263\x3c\x3dticks.length;)ticks\x3dticks.filter((_,i)\x3d\x3e!(i%2));3\x3eticks.length\x26\x26(ticks\x3drange)}return ticks}function tickValues(scale,count){return scale.bins?validTicks(scale,scale.bins):scale.ticks?scale.ticks(count):scale.domain()}function tickFormat(locale,scale,count,specifier,formatType,\nnoSkip){const type\x3dscale.type;let format\x3ddefaultFormatter;if(\x22time\x22\x3d\x3d\x3dtype||\x22time\x22\x3d\x3d\x3dformatType)format\x3dlocale.timeFormat(specifier);else if(\x22utc\x22\x3d\x3d\x3dtype||\x22utc\x22\x3d\x3d\x3dformatType)format\x3dlocale.utcFormat(specifier);else if(isLogarithmic(type)){const varfmt\x3dlocale.formatFloat(specifier);if(noSkip||scale.bins)format\x3dvarfmt;else{const test\x3dtickLog(scale,count,!1);format\x3d_\x3d\x3etest(_)?varfmt(_):\x22\x22}}else scale.tickFormat?(scale\x3dscale.domain(),format\x3dlocale.formatSpan(scale[0],scale[scale.length-1],count,specifier)):\nspecifier\x26\x26(format\x3dlocale.format(specifier));return format}function tickLog(scale,count,values){const ticks\x3dtickValues(scale,count),base\x3dscale.base(),logb\x3dMath.log(base),k\x3dMath.max(1,base*count/ticks.length);scale\x3dd\x3d\x3e{d/\x3dMath.pow(base,Math.round(Math.log(d)/logb));d*base\x3cbase-.5\x26\x26(d*\x3dbase);return d\x3c\x3dk};return values?ticks.filter(scale):scale}function labelValues(scale,count){scale.bins?(scale\x3dscale.bins,count\x3dscale.slice(0,-1),count.max\x3dvegaUtil.peek(scale),scale\x3dcount):\x22log\x22\x3d\x3d\x3dscale.type?scale\x3dtickLog(scale,\ncount,!0):symbols[scale.type]?(scale\x3dscale[symbols[scale.type]](),scale\x3d[-Infinity].concat(scale),scale.max\x3dInfinity):scale\x3dtickValues(scale,count);return scale}function labelFormat(locale,scale,count,type,specifier,formatType,noSkip){if(formats[scale.type]\x26\x26\x22time\x22!\x3d\x3dformatType\x26\x26\x22utc\x22!\x3d\x3dformatType){{count\x3dscale[formats[scale.type]]();formatType\x3dcount.length;noSkip\x3d1\x3cformatType?count[1]-count[0]:count[0];let i;for(i\x3d1;i\x3cformatType;++i)noSkip\x3dMath.min(noSkip,count[i]-count[i-1]);locale\x3dlocale.formatSpan(0,\nnoSkip,30,specifier)}}else locale\x3dtickFormat(locale,scale,count,specifier,formatType,noSkip);return\x22symbol\x22\x3d\x3d\x3dtype\x26\x26(symbols[scale.type]||scale.bins)?formatRange(locale):\x22discrete\x22\x3d\x3d\x3dtype?formatDiscrete(locale):formatPoint(locale)}var $__namespace\x3dfunction(e){if(e\x26\x26e.__esModule)return e;var n\x3dObject.create(null);e\x26\x26Object.keys(e).forEach(function(k){if(\x22default\x22!\x3d\x3dk){var d\x3dObject.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}});n[\x22default\x22]\x3d\ne;return Object.freeze(n)}($$1),map\x3dArray.prototype.map;const slice\x3dArray.prototype.slice,scales\x3d{};scale$jscomp$0(\x22identity\x22,$.scaleIdentity);scale$jscomp$0(\x22linear\x22,$.scaleLinear,\x22continuous\x22);scale$jscomp$0(\x22log\x22,$.scaleLog,[\x22continuous\x22,\x22log\x22]);scale$jscomp$0(\x22pow\x22,$.scalePow,\x22continuous\x22);scale$jscomp$0(\x22sqrt\x22,$.scaleSqrt,\x22continuous\x22);scale$jscomp$0(\x22symlog\x22,$.scaleSymlog,\x22continuous\x22);scale$jscomp$0(\x22time\x22,$.scaleTime,[\x22continuous\x22,\x22temporal\x22]);scale$jscomp$0(\x22utc\x22,$.scaleUtc,[\x22continuous\x22,\n\x22temporal\x22]);scale$jscomp$0(\x22sequential\x22,$.scaleSequential,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-linear\x22,$.scaleSequential,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-log\x22,$.scaleSequentialLog,[\x22continuous\x22,\x22interpolating\x22,\x22log\x22]);scale$jscomp$0(\x22sequential-pow\x22,$.scaleSequentialPow,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-sqrt\x22,$.scaleSequentialSqrt,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22sequential-symlog\x22,$.scaleSequentialSymlog,[\x22continuous\x22,\n\x22interpolating\x22]);scale$jscomp$0(\x22diverging-linear\x22,$.scaleDiverging,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-log\x22,$.scaleDivergingLog,[\x22continuous\x22,\x22interpolating\x22,\x22log\x22]);scale$jscomp$0(\x22diverging-pow\x22,$.scaleDivergingPow,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-sqrt\x22,$.scaleDivergingSqrt,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22diverging-symlog\x22,$.scaleDivergingSymlog,[\x22continuous\x22,\x22interpolating\x22]);scale$jscomp$0(\x22quantile\x22,$.scaleQuantile,[\x22discretizing\x22,\n\x22quantile\x22]);scale$jscomp$0(\x22quantize\x22,$.scaleQuantize,\x22discretizing\x22);scale$jscomp$0(\x22threshold\x22,$.scaleThreshold,\x22discretizing\x22);scale$jscomp$0(\x22bin-ordinal\x22,scaleBinOrdinal,[\x22discrete\x22,\x22discretizing\x22]);scale$jscomp$0(\x22ordinal\x22,$.scaleOrdinal,\x22discrete\x22);scale$jscomp$0(\x22band\x22,band,\x22discrete\x22);scale$jscomp$0(\x22point\x22,function(){return pointish(band().paddingInner(1))},\x22discrete\x22);const scaleProps\x3d[\x22clamp\x22,\x22base\x22,\x22constant\x22,\x22exponent\x22],schemes\x3d{};apply({category10:\x221f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\x22,\ncategory20:\x221f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\x22,category20b:\x22393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\x22,category20c:\x223182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\x22,tableau10:\x224c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac\x22,tableau20:\x224c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5\x22,\naccent:\x227fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\x22,dark2:\x221b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\x22,paired:\x22a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\x22,pastel1:\x22fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\x22,pastel2:\x22b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\x22,set1:\x22e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\x22,set2:\x2266c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\x22,set3:\x228dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\x22},\ncolors$jscomp$0);apply({blues:\x22cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90\x22,greens:\x22d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429\x22,greys:\x22e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e\x22,oranges:\x22fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303\x22,purples:\x22e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c\x22,reds:\x22fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13\x22,blueGreen:\x22d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429\x22,\nbluePurple:\x22ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71\x22,greenBlue:\x22d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1\x22,orangeRed:\x22fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403\x22,purpleBlue:\x22dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281\x22,purpleBlueGreen:\x22dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353\x22,purpleRed:\x22dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a\x22,redPurple:\x22fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174\x22,\nyellowGreen:\x22e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034\x22,yellowOrangeBrown:\x22feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204\x22,yellowOrangeRed:\x22fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225\x22,blueOrange:\x22134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07\x22,brownBlueGreen:\x22704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147\x22,purpleGreen:\x225b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29\x22,purpleOrange:\x224114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07\x22,\nredBlue:\x228c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85\x22,redGrey:\x228c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434\x22,yellowGreenBlue:\x22eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185\x22,redYellowBlue:\x22a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695\x22,redYellowGreen:\x22a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837\x22,pinkYellowGreen:\x228e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419\x22,spectral:\x229e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2\x22,\nviridis:\x22440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725\x22,magma:\x220000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf\x22,inferno:\x220000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4\x22,\nplasma:\x220d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921\x22,cividis:\x2200205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647\x22,\nrainbow:\x226e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa\x22,sinebow:\x22ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040\x22,turbo:\x2223171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00\x22,\nbrowns:\x22eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632\x22,tealBlues:\x22bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985\x22,teals:\x22bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667\x22,warmGreys:\x22dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e\x22,goldGreen:\x22f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36\x22,goldOrange:\x22f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26\x22,goldRed:\x22f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e\x22,\nlightGreyRed:\x22efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b\x22,lightGreyTeal:\x22e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc\x22,lightMulti:\x22e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c\x22,lightOrange:\x22f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b\x22,lightTealBlue:\x22e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988\x22,darkBlue:\x223232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff\x22,darkGold:\x223c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff\x22,\ndarkGreen:\x223a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa\x22,darkMulti:\x223737371f5287197d8c29a86995ce3fffe800ffffff\x22,darkRed:\x223434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c\x22},_\x3d\x3einterpolateColors(colors$jscomp$0(_)));const defaultFormatter\x3dvalue\x3d\x3evegaUtil.isArray(value)?value.map(v\x3d\x3eString(v)):String(value),ascending\x3d(a,b)\x3d\x3ea[1]-b[1],descending\x3d(a,b)\x3d\x3eb[1]-a[1],symbols\x3d{[\x22quantile\x22]:\x22quantiles\x22,[\x22quantize\x22]:\x22thresholds\x22,[\x22threshold\x22]:\x22domain\x22},formats\x3d{[\x22quantile\x22]:\x22quantiles\x22,\n[\x22quantize\x22]:\x22domain\x22},formatRange\x3dformat\x3d\x3e(value,index,array)\x3d\x3e{index\x3darray[index+1];array\x3darray.max;array\x3dnull!\x3darray?array:Infinity;index\x3dnull!\x3dindex?index:array;value\x3dNumber.isFinite(value)?format(value):null;index\x3dNumber.isFinite(index)?format(index):null;return value\x26\x26index?value+\x22 \u2013 \x22+index:index?\x22\\x3c \x22+index:\x22\u2265 \x22+value},formatDiscrete\x3dformat\x3d\x3e(value,index)\x3d\x3eindex?format(value):null,formatPoint\x3dformat\x3d\x3evalue\x3d\x3eformat(value);Object.defineProperty(exports,\x22scaleImplicit\x22,{enumerable:!0,get:function(){return $.scaleImplicit}});\nexports.Band\x3d\x22band\x22;exports.BinOrdinal\x3d\x22bin-ordinal\x22;exports.DiscreteLegend\x3d\x22discrete\x22;exports.Diverging\x3d\x22diverging\x22;exports.GradientLegend\x3d\x22gradient\x22;exports.Identity\x3d\x22identity\x22;exports.Linear\x3d\x22linear\x22;exports.Log\x3d\x22log\x22;exports.Ordinal\x3d\x22ordinal\x22;exports.Point\x3d\x22point\x22;exports.Pow\x3d\x22pow\x22;exports.Quantile\x3d\x22quantile\x22;exports.Quantize\x3d\x22quantize\x22;exports.Sequential\x3d\x22sequential\x22;exports.Sqrt\x3d\x22sqrt\x22;exports.SymbolLegend\x3d\x22symbol\x22;exports.Symlog\x3d\x22symlog\x22;exports.Threshold\x3d\x22threshold\x22;exports.Time\x3d\x22time\x22;exports.UTC\x3d\n\x22utc\x22;exports.bandSpace\x3dbandSpace;exports.domainCaption\x3dfunction(locale,scale,opt){opt\x3dopt||{};var max\x3dMath.max(3,opt.maxlen||7);{var specifier\x3dopt.format;const type\x3d(opt\x3dopt.formatType)||scale.type;vegaUtil.isString(specifier)\x26\x26isTemporal(type)\x26\x26(specifier\x3dspecifier.replace(/%a/g,\x22%A\x22).replace(/%b/g,\x22%B\x22));locale\x3dspecifier||\x22time\x22!\x3d\x3dtype?specifier||\x22utc\x22!\x3d\x3dtype?labelFormat(locale,scale,5,null,specifier,opt,!0):locale.utcFormat(\x22%A, %d %B %Y, %X UTC\x22):locale.timeFormat(\x22%A, %d %B %Y, %X\x22)}if(isDiscretizing(scale.type))return max\x3d\nlabelValues(scale).slice(1).map(locale),scale\x3dmax.length,`${scale} boundar${1\x3d\x3d\x3dscale?\x22y\x22:\x22ies\x22}: ${max.join(\x22, \x22)}`;if(isDiscrete(scale.type))return specifier\x3dscale.domain(),scale\x3dspecifier.length,max\x3dscale\x3emax?specifier.slice(0,max-2).map(locale).join(\x22, \x22)+\x22, ending with \x22+specifier.slice(-1).map(locale):specifier.map(locale).join(\x22, \x22),`${scale} value${1\x3d\x3d\x3dscale?\x22\x22:\x22s\x22}: ${max}`;max\x3dscale.domain();return`values from ${locale(max[0])} to ${locale(vegaUtil.peek(max))}`};exports.interpolate\x3dinterpolate;\nexports.interpolateColors\x3dinterpolateColors;exports.interpolateRange\x3dfunction(interpolator,range){const start\x3drange[0],span\x3dvegaUtil.peek(range)-start;return function(i){return interpolator(start+i*span)}};exports.isContinuous\x3dfunction(key){return hasType(key,\x22continuous\x22)};exports.isDiscrete\x3disDiscrete;exports.isDiscretizing\x3disDiscretizing;exports.isInterpolating\x3dfunction(key){return hasType(key,\x22interpolating\x22)};exports.isLogarithmic\x3disLogarithmic;exports.isQuantile\x3dfunction(key){return hasType(key,\n\x22quantile\x22)};exports.isTemporal\x3disTemporal;exports.isValidScaleType\x3disValidScaleType;exports.labelFormat\x3dlabelFormat;exports.labelFraction\x3dfunction(scale){var domain\x3dscale.domain();const count\x3ddomain.length-1;let lo\x3d+domain[0];domain\x3d+vegaUtil.peek(domain);let span\x3ddomain-lo;\x22threshold\x22\x3d\x3d\x3dscale.type\x26\x26(scale\x3dcount?span/count:.1,lo-\x3dscale,domain+\x3dscale,span\x3ddomain-lo);return value\x3d\x3e(value-lo)/span};exports.labelValues\x3dlabelValues;exports.quantizeInterpolator\x3dfunction(interpolator,count){const samples\x3d\nArray(count),n\x3dcount+1;for(let i\x3d0;i\x3ccount;)samples[i]\x3dinterpolator(++i/n);return samples};exports.scale\x3dscale$jscomp$0;exports.scaleCopy\x3dfunction(scale){const t\x3dscale.type;scale\x3dscale.copy();scale.type\x3dt;return scale};exports.scaleFraction\x3dfunction(scale$1,min,max){var delta\x3dmax-min;let t,s;return delta\x26\x26Number.isFinite(delta)?(delta\x3d(t\x3dscale$1.type).indexOf(\x22-\x22),t\x3d0\x3edelta?t:t.slice(delta+1),s\x3dscale$jscomp$0(t)().domain([min,max]).range([0,1]),scaleProps.forEach(m\x3d\x3escale$1[m]?s[m](scale$1[m]()):\n0),s):vegaUtil.constant(.5)};exports.scheme\x3dscheme$jscomp$0;exports.tickCount\x3dfunction(scale,count,minStep){let step;vegaUtil.isNumber(count)\x26\x26(scale.bins\x26\x26(count\x3dMath.max(count,scale.bins.length)),null!\x3dminStep\x26\x26(count\x3dMath.min(count,Math.floor(vegaUtil.span(scale.domain())/minStep||1))));vegaUtil.isObject(count)\x26\x26(step\x3dcount.step,count\x3dcount.interval);vegaUtil.isString(count)\x26\x26(count\x3d\x22time\x22\x3d\x3d\x3dscale.type?vegaTime.timeInterval(count):\x22utc\x22\x3d\x3dscale.type?vegaTime.utcInterval(count):vegaUtil.error(\x22Only time and utc scales accept interval strings.\x22),\nstep\x26\x26(count\x3dcount.every(step)));return count};exports.tickFormat\x3dtickFormat;exports.tickValues\x3dtickValues;exports.validTicks\x3dvalidTicks;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_scenegraph$build$vega_scenegraph.js", true , "shadow$provide.module$node_modules$vega_scenegraph$build$vega_scenegraph\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_shape$dist$d3_shape\x22),require(\x22module$node_modules$d3_path$dist$d3_path\x22),require(\x22module$node_modules$vega_canvas$build$vega_canvas_min\x22),require(\x22module$node_modules$vega_loader$build$vega_loader_min\x22),\nrequire(\x22module$node_modules$vega_scale$build$vega_scale\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util d3-shape d3-path vega-canvas vega-loader vega-scale\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.d3,global.d3,global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,d3Shape,d3Path,vegaCanvas,vegaLoader,vegaScale){function gradientRef(g,defs,base){const type\x3dg.gradient;let id\x3dg.id,\nprefix\x3d\x22radial\x22\x3d\x3d\x3dtype?\x22p_\x22:\x22\x22;id||(id\x3dg.id\x3d\x22gradient_\x22+gradient_id++,\x22radial\x22\x3d\x3d\x3dtype?(g.x1\x3dget(g.x1,.5),g.y1\x3dget(g.y1,.5),g.r1\x3dget(g.r1,0),g.x2\x3dget(g.x2,.5),g.y2\x3dget(g.y2,.5),g.r2\x3dget(g.r2,.5),prefix\x3d\x22p_\x22):(g.x1\x3dget(g.x1,0),g.y1\x3dget(g.y1,0),g.x2\x3dget(g.x2,1),g.y2\x3dget(g.y2,0)));defs[id]\x3dg;return\x22url(\x22+(base||\x22\x22)+\x22#\x22+prefix+id+\x22)\x22}function get(val,def){return null!\x3dval?val:def}function curves(type,orientation,tension){type\x3dvegaUtil.hasOwnProperty(lookup,type)\x26\x26lookup[type];var curve\x3dnull;type\x26\x26(curve\x3d\ntype.curve||type[orientation||\x22vertical\x22],type.tension\x26\x26null!\x3dtension\x26\x26(curve\x3dcurve[type.tension](tension)));return curve}function pathParse(pathstr){const result\x3d[];let param,cmd,j,n;var m;const path\x3dpathstr.slice().replace(regexp[0],\x22###$1\x22).split(regexp[1]).slice(1);pathstr\x3d0;for(n\x3dpath.length;pathstr\x3cn;++pathstr){var curr\x3dpath[pathstr];var chunks\x3dcurr.slice(1).trim().replace(regexp[2],\x22$1###$2\x22).replace(regexp[3],\x22$1###$2\x22).split(regexp[4]);cmd\x3dcurr.charAt(0);curr\x3d[cmd];j\x3d0;for(m\x3dchunks.length;j\x3c\nm;++j)(param\x3d+chunks[j])\x3d\x3d\x3dparam\x26\x26curr.push(param);chunks\x3dcmdlen[cmd.toLowerCase()];if(curr.length-1\x3echunks)for(m\x3dcurr.length,j\x3d1,result.push([cmd].concat(curr.slice(j,j+\x3dchunks))),cmd\x3d\x22M\x22\x3d\x3d\x3dcmd?\x22L\x22:\x22m\x22\x3d\x3d\x3dcmd?\x22l\x22:cmd;j\x3cm;j+\x3dchunks)result.push([cmd].concat(curr.slice(j,j+chunks)));else result.push(curr)}return result}function segments(x,y,rx,ry,large,sweep,rotateX,ox,oy){const key\x3djoin.call(arguments);if(segmentCache[key])return segmentCache[key];var th\x3drotateX*DegToRad;const sin_th\x3dMath.sin(th);th\x3d\nMath.cos(th);rx\x3dMath.abs(rx);ry\x3dMath.abs(ry);var px\x3dth*(ox-x)*.5+sin_th*(oy-y)*.5,py\x3dth*(oy-y)*.5-sin_th*(ox-x)*.5;px\x3dpx*px/(rx*rx)+py*py/(ry*ry);1\x3cpx\x26\x26(px\x3dMath.sqrt(px),rx*\x3dpx,ry*\x3dpx);var a00\x3dth/rx,a01\x3dsin_th/rx,a10\x3d-sin_th/ry,a11\x3dth/ry;px\x3da00*ox+a01*oy;py\x3da10*ox+a11*oy;a00\x3da00*x+a01*y;a01\x3da10*x+a11*y;a10\x3d1/((a00-px)*(a00-px)+(a01-py)*(a01-py))-.25;0\x3ea10\x26\x26(a10\x3d0);a11\x3dMath.sqrt(a10);sweep\x3d\x3dlarge\x26\x26(a11\x3d-a11);a10\x3d.5*(px+a00)-a11*(a01-py);a11\x3d.5*(py+a01)+a11*(a00-px);px\x3dMath.atan2(py-a11,px-a10);py\x3d\nMath.atan2(a01-a11,a00-a10)-px;0\x3epy\x26\x261\x3d\x3d\x3dsweep?py+\x3dTau:0\x3cpy\x26\x260\x3d\x3d\x3dsweep\x26\x26(py-\x3dTau);a00\x3dMath.ceil(Math.abs(py/(HalfPi+.001)));a01\x3d[];for(let i\x3d0;i\x3ca00;++i)a01[i]\x3d[a10,a11,px+i*py/a00,px+(i+1)*py/a00,rx,ry,sin_th,th];return segmentCache[key]\x3da01}function pathRender(context,path,l,t,sX,sY){var previous\x3dnull,x\x3d0,y\x3d0,controlX\x3d0,controlY\x3d0;null\x3d\x3dl\x26\x26(l\x3d0);null\x3d\x3dt\x26\x26(t\x3d0);null\x3d\x3dsX\x26\x26(sX\x3d1);null\x3d\x3dsY\x26\x26(sY\x3dsX);context.beginPath\x26\x26context.beginPath();for(var i\x3d0,len\x3dpath.length;i\x3clen;++i){var current\x3dpath[i];if(1!\x3d\x3d\nsX||1!\x3d\x3dsY){var tempX\x3dsX;var tempY\x3dsY;var c\x3dtemp[0]\x3dcurrent[0];if(\x22a\x22\x3d\x3d\x3dc||\x22A\x22\x3d\x3d\x3dc)temp[1]\x3dtempX*current[1],temp[2]\x3dtempY*current[2],temp[3]\x3dcurrent[3],temp[4]\x3dcurrent[4],temp[5]\x3dcurrent[5],temp[6]\x3dtempX*current[6],temp[7]\x3dtempY*current[7];else if(\x22h\x22\x3d\x3d\x3dc||\x22H\x22\x3d\x3d\x3dc)temp[1]\x3dtempX*current[1];else if(\x22v\x22\x3d\x3d\x3dc||\x22V\x22\x3d\x3d\x3dc)temp[1]\x3dtempY*current[1];else{c\x3d1;for(var n\x3dcurrent.length;c\x3cn;++c)temp[c]\x3d(1\x3d\x3dc%2?tempX:tempY)*current[c]}current\x3dtemp}switch(current[0]){case \x22l\x22:x+\x3dcurrent[1];y+\x3dcurrent[2];context.lineTo(x+\nl,y+t);break;case \x22L\x22:x\x3dcurrent[1];y\x3dcurrent[2];context.lineTo(x+l,y+t);break;case \x22h\x22:x+\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22H\x22:x\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22v\x22:y+\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22V\x22:y\x3dcurrent[1];context.lineTo(x+l,y+t);break;case \x22m\x22:x+\x3dcurrent[1];y+\x3dcurrent[2];context.moveTo(x+l,y+t);break;case \x22M\x22:x\x3dcurrent[1];y\x3dcurrent[2];context.moveTo(x+l,y+t);break;case \x22c\x22:tempX\x3dx+current[5];tempY\x3dy+current[6];controlX\x3dx+current[3];controlY\x3dy+current[4];\ncontext.bezierCurveTo(x+current[1]+l,y+current[2]+t,controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22C\x22:x\x3dcurrent[5];y\x3dcurrent[6];controlX\x3dcurrent[3];controlY\x3dcurrent[4];context.bezierCurveTo(current[1]+l,current[2]+t,controlX+l,controlY+t,x+l,y+t);break;case \x22s\x22:tempX\x3dx+current[3];tempY\x3dy+current[4];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.bezierCurveTo(controlX+l,controlY+t,x+current[1]+l,y+current[2]+t,tempX+l,tempY+t);controlX\x3dx+current[1];controlY\x3dy+current[2];x\x3d\ntempX;y\x3dtempY;break;case \x22S\x22:tempX\x3dcurrent[3];tempY\x3dcurrent[4];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.bezierCurveTo(controlX+l,controlY+t,current[1]+l,current[2]+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dcurrent[1];controlY\x3dcurrent[2];break;case \x22q\x22:tempX\x3dx+current[3];tempY\x3dy+current[4];controlX\x3dx+current[1];controlY\x3dy+current[2];context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22Q\x22:tempX\x3dcurrent[3];tempY\x3dcurrent[4];context.quadraticCurveTo(current[1]+\nl,current[2]+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dcurrent[1];controlY\x3dcurrent[2];break;case \x22t\x22:tempX\x3dx+current[1];tempY\x3dy+current[2];null\x3d\x3d\x3dprevious[0].match(/[QqTt]/)?(controlX\x3dx,controlY\x3dy):\x22t\x22\x3d\x3d\x3dprevious[0]?(controlX\x3d2*x-tempControlX,controlY\x3d2*y-tempControlY):\x22q\x22\x3d\x3d\x3dprevious[0]\x26\x26(controlX\x3d2*x-controlX,controlY\x3d2*y-controlY);var tempControlX\x3dcontrolX;var tempControlY\x3dcontrolY;context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;controlX\x3dx+current[1];controlY\x3dy+\ncurrent[2];break;case \x22T\x22:tempX\x3dcurrent[1];tempY\x3dcurrent[2];controlX\x3d2*x-controlX;controlY\x3d2*y-controlY;context.quadraticCurveTo(controlX+l,controlY+t,tempX+l,tempY+t);x\x3dtempX;y\x3dtempY;break;case \x22a\x22:drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+x+l,current[7]+y+t]);x+\x3dcurrent[6];y+\x3dcurrent[7];break;case \x22A\x22:drawArc(context,x+l,y+t,[current[1],current[2],current[3],current[4],current[5],current[6]+l,current[7]+t]);x\x3dcurrent[6];y\x3dcurrent[7];break;case \x22z\x22:case \x22Z\x22:context.closePath()}previous\x3d\ncurrent}}function drawArc(context,x,y,coords){x\x3dsegments(coords[5],coords[6],coords[0],coords[1],coords[3],coords[4],coords[2],x,y);for(y\x3d0;y\x3cx.length;++y){a:{var params\x3dx[y];coords\x3djoin.call(params);if(bezierCache[coords]){coords\x3dbezierCache[coords];break a}var cx\x3dparams[0],cy\x3dparams[1],th0\x3dparams[2],th1\x3dparams[3],rx\x3dparams[4],ry\x3dparams[5],sin_th\x3dparams[6],cos_th\x3dparams[7];params\x3dcos_th*rx;const a01\x3d-sin_th*ry;rx*\x3dsin_th;ry*\x3dcos_th;var cos_th0\x3dMath.cos(th0);const sin_th0\x3dMath.sin(th0);sin_th\x3dMath.cos(th1);\ncos_th\x3dMath.sin(th1);th0\x3d.5*(th1-th0);th1\x3dMath.sin(.5*th0);th1\x3d8/3*th1*th1/Math.sin(th0);th0\x3dcx+cos_th0-th1*sin_th0;cos_th0\x3dcy+sin_th0+th1*cos_th0;cx+\x3dsin_th;cy+\x3dcos_th;cos_th\x3dcx+th1*cos_th;sin_th\x3dcy-th1*sin_th;coords\x3dbezierCache[coords]\x3d[params*th0+a01*cos_th0,rx*th0+ry*cos_th0,params*cos_th+a01*sin_th,rx*cos_th+ry*sin_th,params*cx+a01*cy,rx*cx+ry*cy]}context.bezierCurveTo(coords[0],coords[1],coords[2],coords[3],coords[4],coords[5])}}function symbols(_){return vegaUtil.hasOwnProperty(builtins,_)?\nbuiltins[_]:customSymbol(_)}function customSymbol(path){if(!vegaUtil.hasOwnProperty(custom,path)){const parsed\x3dpathParse(path);custom[path]\x3d{draw:function(context,size){pathRender(context,parsed,0,0,Math.sqrt(size)/2)}}}return custom[path]}function rectangleX(d){return d.x}function rectangleY(d){return d.y}function rectangleWidth(d){return d.width}function rectangleHeight(d){return d.height}function number(_){return\x22function\x22\x3d\x3d\x3dtypeof _?_:()\x3d\x3e+_}function clamp(value,min,max){return Math.max(min,Math.min(value,\nmax))}function vg_rect(){function rectangle(_,x0,y0){var buffer;x0\x3dnull!\x3dx0?x0:+x.call(this,_);y0\x3dnull!\x3dy0?y0:+y.call(this,_);var w\x3d+width.call(this,_),h\x3d+height.call(this,_),s\x3dMath.min(w,h)/2,tl\x3dclamp(+crTL.call(this,_),0,s),tr\x3dclamp(+crTR.call(this,_),0,s),bl\x3dclamp(+crBL.call(this,_),0,s);_\x3dclamp(+crBR.call(this,_),0,s);context||(context\x3dbuffer\x3dd3Path.path());0\x3e\x3dtl\x26\x260\x3e\x3dtr\x26\x260\x3e\x3dbl\x26\x260\x3e\x3d_?context.rect(x0,y0,w,h):(w\x3dx0+w,h\x3dy0+h,context.moveTo(x0+tl,y0),context.lineTo(w-tr,y0),context.bezierCurveTo(w-\n.448084975506*tr,y0,w,y0+.448084975506*tr,w,y0+tr),context.lineTo(w,h-_),context.bezierCurveTo(w,h-.448084975506*_,w-.448084975506*_,h,w-_,h),context.lineTo(x0+bl,h),context.bezierCurveTo(x0+.448084975506*bl,h,x0,h-.448084975506*bl,x0,h-bl),context.lineTo(x0,y0+tl),context.bezierCurveTo(x0,y0+.448084975506*tl,x0+.448084975506*tl,y0,x0+tl,y0),context.closePath());if(buffer)return context\x3dnull,buffer+\x22\x22||null}var x\x3drectangleX,y\x3drectangleY,width\x3drectangleWidth,height\x3drectangleHeight,crTL\x3dnumber(0),crTR\x3d\ncrTL,crBL\x3dcrTL,crBR\x3dcrTL,context\x3dnull;rectangle.x\x3dfunction(_){return arguments.length?(x\x3dnumber(_),rectangle):x};rectangle.y\x3dfunction(_){return arguments.length?(y\x3dnumber(_),rectangle):y};rectangle.width\x3dfunction(_){return arguments.length?(width\x3dnumber(_),rectangle):width};rectangle.height\x3dfunction(_){return arguments.length?(height\x3dnumber(_),rectangle):height};rectangle.cornerRadius\x3dfunction(tl,tr,br,bl){return arguments.length?(crTL\x3dnumber(tl),crTR\x3dnull!\x3dtr?number(tr):crTL,crBR\x3dnull!\x3dbr?number(br):\ncrTL,crBL\x3dnull!\x3dbl?number(bl):crTR,rectangle):crTL};rectangle.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,rectangle):context};return rectangle}function vg_trail(){function trail(data){var i,n\x3ddata.length,d,defined0\x3d!1,buffer;null\x3d\x3dcontext\x26\x26(context\x3dbuffer\x3dd3Path.path());for(i\x3d0;i\x3c\x3dn;++i)if(!(i\x3cn\x26\x26defined(d\x3ddata[i],i,data))\x3d\x3d\x3ddefined0\x26\x26(defined0\x3d!defined0)\x26\x26(ready\x3d0),defined0){{var x2\x3d+x(d,i,data),y2\x3d+y(d,i,data);const r2\x3d+size(d,i,data)/2;if(ready){var ux\x3dy1-y2,uy\x3dx2-x1;if(ux||\nuy){var ud\x3dMath.sqrt(ux*ux+uy*uy),rx\x3d(ux/\x3dud)*r1;ud\x3d(uy/\x3dud)*r1;var t\x3dMath.atan2(uy,ux);context.moveTo(x1-rx,y1-ud);context.lineTo(x2-ux*r2,y2-uy*r2);context.arc(x2,y2,r2,t-Math.PI,t);context.lineTo(x1+rx,y1+ud);context.arc(x1,y1,r1,t,t+Math.PI)}else context.arc(x2,y2,r2,0,Tau);context.closePath()}else ready\x3d1;x1\x3dx2;y1\x3dy2;r1\x3dr2}}if(buffer)return context\x3dnull,buffer+\x22\x22||null}var x,y,size,defined,context\x3dnull,ready,x1,y1,r1;trail.x\x3dfunction(_){return arguments.length?(x\x3d_,trail):x};trail.y\x3dfunction(_){return arguments.length?\n(y\x3d_,trail):y};trail.size\x3dfunction(_){return arguments.length?(size\x3d_,trail):size};trail.defined\x3dfunction(_){return arguments.length?(defined\x3d_,trail):defined};trail.context\x3dfunction(_){return arguments.length?(context\x3dnull\x3d\x3d_?null:_,trail):context};return trail}function value$1(a,b){return null!\x3da?a:b}function hasCornerRadius(item){return item.cornerRadius||item.cornerRadiusTopLeft||item.cornerRadiusTopRight||item.cornerRadiusBottomRight||item.cornerRadiusBottomLeft}function rectangle(context,item,\nx,y){return rectShape.context(context)(item,x,y)}function clip$1(renderer,item,size){var clip\x3ditem.clip;renderer\x3drenderer._defs;item\x3ditem.clip_id||(item.clip_id\x3d\x22clip\x22+clip_id++);renderer\x3drenderer.clipping[item]||(renderer.clipping[item]\x3d{id:item});vegaUtil.isFunction(clip)?renderer.path\x3dclip(null):hasCornerRadius(size)?renderer.path\x3drectangle(null,size,0,0):(renderer.width\x3dsize.width||0,renderer.height\x3dsize.height||0);return\x22url(#\x22+item+\x22)\x22}function Bounds(b){this.clear();b\x26\x26this.union(b)}function Item(mark){this.mark\x3d\nmark;this.bounds\x3dthis.bounds||new Bounds}function GroupItem(mark){Item.call(this,mark);this.items\x3dthis.items||[]}function ResourceLoader(customLoader){this._pending\x3d0;this._loader\x3dcustomLoader||vegaLoader.loader()}function boundStroke(bounds,item,miter){if(item.stroke\x26\x260!\x3d\x3ditem.opacity\x26\x260!\x3d\x3ditem.strokeOpacity){const sw\x3dnull!\x3ditem.strokeWidth?+item.strokeWidth:1;bounds.expand(sw+(miter?item.strokeJoin\x26\x26\x22miter\x22!\x3d\x3ditem.strokeJoin?0:sw:0))}return bounds}function boundContext(_,deg){bounds$jscomp$0\x3d_;\ndeg?(rot\x3ddeg*DegToRad,ma\x3dmd\x3dMath.cos(rot),mb\x3dMath.sin(rot),mc\x3d-mb):(ma\x3dmd\x3d1,rot\x3dmb\x3dmc\x3d0);return context$1}function quadExtrema(x0,x1,x2,cb){x2\x3d(x0-x1)/(x0+x2-2*x1);0\x3cx2\x26\x261\x3ex2\x26\x26cb(x0+(x1-x0)*x2)}function cubicExtrema(x0,x1,x2,x3,cb){const a\x3dx3-x0+3*x1-3*x2,b\x3dx0+x2-2*x1;var c\x3dx0-x1;let t0\x3d0,t1\x3d0;1E-14\x3cMath.abs(a)?(c\x3db*b+c*a,0\x3c\x3dc\x26\x26(c\x3dMath.sqrt(c),t0\x3d(-b+c)/a,t1\x3d(-b-c)/a)):t0\x3d.5*c/b;0\x3ct0\x26\x261\x3et0\x26\x26cb(cubic(t0,x0,x1,x2,x3));0\x3ct1\x26\x261\x3et1\x26\x26cb(cubic(t1,x0,x1,x2,x3))}function cubic(t,x0,x1,x2,x3){const s\x3d1-t,s2\x3d\ns*s,t2\x3dt*t;return s2*s*x0+3*s2*t*x1+3*s*t2*x2+t2*t*x3}function intersectPath(draw){return function(item,brush){if(!context$jscomp$0)return!0;draw(context$jscomp$0,item);b$jscomp$0.clear().union(item.bounds).intersect(brush).round();const {x1,y1,x2,y2}\x3db$jscomp$0;for(item\x3dy1;item\x3c\x3dy2;++item)for(brush\x3dx1;brush\x3c\x3dx2;++brush)if(context$jscomp$0.isPointInPath(brush,item))return!0;return!1}}function intersectPoint(item,box){return box.contains(item.x||0,item.y||0)}function intersectRect(item,box){const x\x3d\nitem.x||0,y\x3ditem.y||0;return box.intersects(b$jscomp$0.set(x,y,x+(item.width||0),y+(item.height||0)))}function intersectRule(item,box){const x\x3ditem.x||0,y\x3ditem.y||0;return intersectBoxLine(box,x,y,null!\x3ditem.x2?item.x2:x,null!\x3ditem.y2?item.y2:y)}function intersectBoxLine(box,x,y,u,v){const {x1,y1,x2,y2}\x3dbox;box\x3du-x;v-\x3dy;u\x3d0;let t1\x3d1,p,q,r,e;for(e\x3d0;4\x3ee;++e){0\x3d\x3d\x3de\x26\x26(p\x3d-box,q\x3d-(x1-x));1\x3d\x3d\x3de\x26\x26(p\x3dbox,q\x3dx2-x);2\x3d\x3d\x3de\x26\x26(p\x3d-v,q\x3d-(y1-y));3\x3d\x3d\x3de\x26\x26(p\x3dv,q\x3dy2-y);if(1E-10\x3eMath.abs(p)\x26\x260\x3eq)return!1;r\x3dq/p;if(0\x3ep){if(r\x3e\nt1)return!1;r\x3eu\x26\x26(u\x3dr)}else if(0\x3cp){if(r\x3cu)return!1;r\x3ct1\x26\x26(t1\x3dr)}}return!0}function blend(context,item){context.globalCompositeOperation\x3ditem.blend||\x22source-over\x22}function value$jscomp$0(value,dflt){return null\x3d\x3dvalue?dflt:value}function addStops(gradient,stops){const n\x3dstops.length;for(let i\x3d0;i\x3cn;++i)gradient.addColorStop(stops[i].offset,stops[i].color);return gradient}function gradient$jscomp$0(context,spec,bounds){const w\x3dbounds.width(),h\x3dbounds.height();if(\x22radial\x22\x3d\x3d\x3dspec.gradient)context\x3dcontext.createRadialGradient(bounds.x1+\nvalue$jscomp$0(spec.x1,.5)*w,bounds.y1+value$jscomp$0(spec.y1,.5)*h,Math.max(w,h)*value$jscomp$0(spec.r1,0),bounds.x1+value$jscomp$0(spec.x2,.5)*w,bounds.y1+value$jscomp$0(spec.y2,.5)*h,Math.max(w,h)*value$jscomp$0(spec.r2,.5));else{const x1\x3dvalue$jscomp$0(spec.x1,0),y1\x3dvalue$jscomp$0(spec.y1,0),x2\x3dvalue$jscomp$0(spec.x2,1),y2\x3dvalue$jscomp$0(spec.y2,0);if(x1\x3d\x3d\x3dx2||y1\x3d\x3d\x3dy2||w\x3d\x3d\x3dh)context\x3dcontext.createLinearGradient(bounds.x1+x1*w,bounds.y1+y1*h,bounds.x1+x2*w,bounds.y1+y2*h);else{bounds\x3dvegaCanvas.canvas(Math.ceil(w),\nMath.ceil(h));const ictx\x3dbounds.getContext(\x222d\x22);ictx.scale(w,h);ictx.fillStyle\x3daddStops(ictx.createLinearGradient(x1,y1,x2,y2),spec.stops);ictx.fillRect(0,0,w,h);return context.createPattern(bounds,\x22no-repeat\x22)}}return addStops(context,spec.stops)}function fill$jscomp$0(context,item,opacity){opacity*\x3dnull\x3d\x3ditem.fillOpacity?1:item.fillOpacity;return 0\x3copacity?(context.globalAlpha\x3dopacity,item\x3d(opacity\x3ditem.fill)\x26\x26opacity.gradient?gradient$jscomp$0(context,opacity,item.bounds):opacity,context.fillStyle\x3d\nitem,!0):!1}function stroke$jscomp$0(context,item,opacity){var lw\x3dnull!\x3d(lw\x3ditem.strokeWidth)?lw:1;if(0\x3e\x3dlw)return!1;opacity*\x3dnull\x3d\x3ditem.strokeOpacity?1:item.strokeOpacity;return 0\x3copacity?(context.globalAlpha\x3dopacity,opacity\x3d(opacity\x3ditem.stroke)\x26\x26opacity.gradient?gradient$jscomp$0(context,opacity,item.bounds):opacity,context.strokeStyle\x3dopacity,context.lineWidth\x3dlw,context.lineCap\x3ditem.strokeCap||\x22butt\x22,context.lineJoin\x3ditem.strokeJoin||\x22miter\x22,context.miterLimit\x3ditem.strokeMiterLimit||10,context.setLineDash\x26\x26\n(context.setLineDash(item.strokeDash||Empty),context.lineDashOffset\x3ditem.strokeDashOffset||0),!0):!1}function compare(a,b){return a.zindex-b.zindex||a.index-b.index}function zorder(scene){if(!scene.zdirty)return scene.zitems;var items\x3dscene.items,output\x3d[],n;var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var item\x3ditems[i];item.index\x3di;item.zindex\x26\x26output.push(item)}scene.zdirty\x3d!1;return scene.zitems\x3doutput.sort(compare)}function visit(scene,visitor){var items\x3dscene.items,n;if(items\x26\x26items.length){var zitems\x3d\nzorder(scene);if(zitems\x26\x26zitems.length){scene\x3d0;for(n\x3ditems.length;scene\x3cn;++scene)items[scene].zindex||visitor(items[scene]);items\x3dzitems}scene\x3d0;for(n\x3ditems.length;scene\x3cn;++scene)visitor(items[scene])}}function pickVisit(scene,visitor){var items\x3dscene.items,hit,i;if(!items||!items.length)return null;const zitems\x3dzorder(scene);zitems\x26\x26zitems.length\x26\x26(items\x3dzitems);for(i\x3ditems.length;0\x3c\x3d--i;)if(hit\x3dvisitor(items[i]))return hit;if(items\x3d\x3d\x3dzitems)for(items\x3dscene.items,i\x3ditems.length;0\x3c\x3d--i;)if(!items[i].zindex\x26\x26\n(hit\x3dvisitor(items[i])))return hit;return null}function drawAll(path){return function(context,scene,bounds){visit(scene,item\x3d\x3e{bounds\x26\x26!bounds.intersects(item.bounds)||drawPath(path,context,item,item)})}}function drawOne(path){return function(context,scene,bounds){!scene.items.length||bounds\x26\x26!bounds.intersects(scene.bounds)||drawPath(path,context,scene.items[0],scene.items)}}function drawPath(path,context,item,items){var opacity\x3dnull\x3d\x3ditem.opacity?1:item.opacity;0\x3d\x3d\x3dopacity||path(context,items)||\n(blend(context,item),item.fill\x26\x26fill$jscomp$0(context,item,opacity)\x26\x26context.fill(),item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.stroke())}function pick$1(test){test\x3dtest||vegaUtil.truthy;return function(context,scene,x,y,gx,gy){x*\x3dcontext.pixelRatio;y*\x3dcontext.pixelRatio;return pickVisit(scene,item\x3d\x3e{const b\x3ditem.bounds;if((!b||b.contains(gx,gy))\x26\x26b\x26\x26test(context,item,x,y,gx,gy))return item})}}function hitPath(path,filled){return function(context,o,x,y){var item\x3dArray.isArray(o)?o[0]:\no,fill\x3dnull\x3d\x3dfilled?item.fill:filled,stroke\x3ditem.stroke\x26\x26context.isPointInStroke;if(stroke){var lw\x3ditem.strokeWidth;item\x3ditem.strokeCap;context.lineWidth\x3dnull!\x3dlw?lw:1;context.lineCap\x3dnull!\x3ditem?item:\x22butt\x22}return path(context,o)?!1:fill\x26\x26context.isPointInPath(x,y)||stroke\x26\x26context.isPointInStroke(x,y)}}function translate(x,y){return\x22translate(\x22+x+\x22,\x22+y+\x22)\x22}function markItemPath(type,shape,isect){function draw(context,item){var x\x3ditem.x||0,y\x3ditem.y||0,a\x3ditem.angle||0;context.translate(x,y);a\x26\x26context.rotate(a*\x3d\nDegToRad);context.beginPath();shape(context,item);a\x26\x26context.rotate(-a);context.translate(-x,-y)}return{type,tag:\x22path\x22,nested:!1,attr:function(emit,item){var JSCompiler_inline_result\x3dtranslate(item.x||0,item.y||0)+(item.angle?\x22 rotate(\x22+(item.angle+\x22)\x22):\x22\x22);emit(\x22transform\x22,JSCompiler_inline_result);emit(\x22d\x22,shape(null,item))},bound:function(bounds,item){shape(boundContext(bounds,item.angle),item);return boundStroke(bounds,item).translate(item.x||0,item.y||0)},draw:drawAll(draw),pick:pick$1(hitPath(draw)),\nisect:isect||intersectPath(draw)}}function markMultiItemPath(type,shape,tip){function draw(context,items){context.beginPath();shape(context,items)}const hit\x3dhitPath(draw);return{type,tag:\x22path\x22,nested:!0,attr:function(emit,item){item\x3ditem.mark.items;item.length\x26\x26emit(\x22d\x22,shape(null,item))},bound:function(bounds,mark){mark\x3dmark.items;if(0\x3d\x3d\x3dmark.length)return bounds;shape(boundContext(bounds),mark);return boundStroke(bounds,mark[0])},draw:drawOne(draw),pick:function(context,scene,x,y,gx,gy){var items\x3d\nscene.items;scene\x3dscene.bounds;if(!items||!items.length||scene\x26\x26!scene.contains(gx,gy))return null;x*\x3dcontext.pixelRatio;y*\x3dcontext.pixelRatio;return hit(context,items,x,y)?items[0]:null},isect:intersectPoint,tip}}function clipGroup(context,group){context.beginPath();hasCornerRadius(group)?rectangle(context,group,0,0):context.rect(0,0,group.width||0,group.height||0);context.clip()}function offset$1(item){const sw\x3dvalue$jscomp$0(item.strokeWidth,1);return null!\x3ditem.strokeOffset?item.strokeOffset:\nitem.stroke\x26\x26.5\x3csw\x26\x261.5\x3esw?.5-Math.abs(sw-1):0}function rectanglePath(context,group,x,y){const off\x3doffset$1(group);context.beginPath();rectangle(context,group,(x||0)+off,(y||0)+off)}function getImage(item,renderer){var image$jscomp$0\x3ditem.image;if(!image$jscomp$0||item.url\x26\x26item.url!\x3d\x3dimage$jscomp$0.url)image$jscomp$0\x3d{complete:!1,width:0,height:0},renderer.loadImage(item.url).then(image\x3d\x3e{item.image\x3dimage;item.image.url\x3ditem.url});return image$jscomp$0}function imageWidth(item,image){return null!\x3d\nitem.width?item.width:image\x26\x26image.width?!1!\x3d\x3ditem.aspect\x26\x26item.height?item.height*image.width/image.height:image.width:0}function imageHeight(item,image){return null!\x3ditem.height?item.height:image\x26\x26image.height?!1!\x3d\x3ditem.aspect\x26\x26item.width?item.width*image.height/image.width:image.height:0}function imageXOffset(align,w){return\x22center\x22\x3d\x3d\x3dalign?w/2:\x22right\x22\x3d\x3d\x3dalign?w:0}function imageYOffset(baseline,h){return\x22middle\x22\x3d\x3d\x3dbaseline?h/2:\x22bottom\x22\x3d\x3d\x3dbaseline?h:0}function path$1(context,item){var path\x3ditem.path;\nif(null\x3d\x3dpath)return!0;var x\x3ditem.x||0,y\x3ditem.y||0,sx\x3ditem.scaleX||1,sy\x3ditem.scaleY||1,a\x3d(item.angle||0)*DegToRad,cache\x3ditem.pathCache;cache\x26\x26cache.path\x3d\x3d\x3dpath||((item.pathCache\x3dcache\x3dpathParse(path)).path\x3dpath);a\x26\x26context.rotate\x26\x26context.translate?(context.translate(x,y),context.rotate(a),pathRender(context,cache,0,0,sx,sy),context.rotate(-a),context.translate(-x,-y)):pathRender(context,cache,x,y,sx,sy)}function draw$2(context,item){context.beginPath();rectangle(context,item)}function path$jscomp$0(context,\nitem,opacity){if(item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)){opacity\x3ditem.x||0;var y1\x3ditem.y||0;var x2\x3dnull!\x3ditem.x2?item.x2:opacity;item\x3dnull!\x3ditem.y2?item.y2:y1;context.beginPath();context.moveTo(opacity,y1);context.lineTo(x2,item);return!0}return!1}function useCanvas(use){textMetrics.width\x3duse\x26\x26context$jscomp$0?measureWidth:estimateWidth}function estimateWidth(item,text){text\x3dtextValue(item,text);item\x3dfontSize(item);return~~(.8*text.length*item)}function measureWidth(item,text){return 0\x3e\x3d\nfontSize(item)||!(text\x3dtextValue(item,text))?0:_measureWidth(text,font(item))}function _measureWidth(text,currentFont){const key\x3d`(${currentFont}) ${text}`;let width\x3dwidthCache.get(key);void 0\x3d\x3d\x3dwidth\x26\x26(context$jscomp$0.font\x3dcurrentFont,width\x3dcontext$jscomp$0.measureText(text).width,widthCache.set(key,width));return width}function fontSize(item){return null!\x3ditem.fontSize?+item.fontSize||0:11}function lineHeight(item){return null!\x3ditem.lineHeight?item.lineHeight:fontSize(item)+2}function textLines(item){item\x3d\nitem.lineBreak\x26\x26item.text\x26\x26!vegaUtil.isArray(item.text)?item.text.split(item.lineBreak):item.text;return vegaUtil.isArray(item)?1\x3citem.length?item:item[0]:item}function textValue(item,line){line\x3dnull\x3d\x3dline?\x22\x22:(line+\x22\x22).trim();if(0\x3citem.limit\x26\x26line.length){var limit\x3d+item.limit,width\x3dwidthGetter(item);if(!(width(line)\x3climit)){var ellipsis\x3ditem.ellipsis||\x22\u2026\x22,rtl\x3d\x22rtl\x22\x3d\x3d\x3ditem.dir;item\x3d0;var hi\x3dline.length;limit-\x3dwidth(ellipsis);if(rtl){for(;item\x3chi;)rtl\x3ditem+hi\x3e\x3e\x3e1,width(line.slice(rtl))\x3elimit?item\x3d\nrtl+1:hi\x3drtl;line\x3dellipsis+line.slice(item)}else{for(;item\x3chi;)rtl\x3d1+(item+hi\x3e\x3e\x3e1),width(line.slice(0,rtl))\x3climit?item\x3drtl:hi\x3drtl-1;line\x3dline.slice(0,item)+ellipsis}}}return line}function widthGetter(item){if(textMetrics.width\x3d\x3d\x3dmeasureWidth){const currentFont\x3dfont(item);return text\x3d\x3e_measureWidth(text,currentFont)}{const currentFontHeight\x3dfontSize(item);return text\x3d\x3e~~(.8*text.length*currentFontHeight)}}function fontFamily(item,quote){item\x3ditem.font;return(quote\x26\x26item?String(item).replace(/\x22/g,\x22\x27\x22):\nitem)||\x22sans-serif\x22}function font(item,quote){return(item.fontStyle?item.fontStyle+\x22 \x22:\x22\x22)+(item.fontVariant?item.fontVariant+\x22 \x22:\x22\x22)+(item.fontWeight?item.fontWeight+\x22 \x22:\x22\x22)+fontSize(item)+\x22px \x22+fontFamily(item,quote)}function offset$jscomp$0(item){var baseline\x3ditem.baseline,h\x3dfontSize(item);return Math.round(\x22top\x22\x3d\x3d\x3dbaseline?.79*h:\x22middle\x22\x3d\x3d\x3dbaseline?.3*h:\x22bottom\x22\x3d\x3d\x3dbaseline?-.21*h:\x22line-top\x22\x3d\x3d\x3dbaseline?.29*h+.5*lineHeight(item):\x22line-bottom\x22\x3d\x3d\x3dbaseline?.29*h-.5*lineHeight(item):0)}function anchorPoint(item){var x\x3d\nitem.x||0,y\x3ditem.y||0,r\x3ditem.radius||0;r\x26\x26(item\x3d(item.theta||0)-HalfPi,x+\x3dr*Math.cos(item),y+\x3dr*Math.sin(item));tempBounds.x1\x3dx;tempBounds.y1\x3dy;return tempBounds}function bound$jscomp$0(bounds,item,mode){var h\x3dtextMetrics.height(item),a\x3ditem.align,p\x3danchorPoint(item),x\x3dp.x1;p\x3dp.y1;var dx\x3ditem.dx||0,dy\x3d(item.dy||0)+offset$jscomp$0(item)-Math.round(.8*h),tl\x3dtextLines(item);vegaUtil.isArray(tl)?(h+\x3dlineHeight(item)*(tl.length-1),tl\x3dtl.reduce((w,t)\x3d\x3eMath.max(w,textMetrics.width(item,t)),0)):tl\x3dtextMetrics.width(item,\ntl);\x22center\x22\x3d\x3d\x3da?dx-\x3dtl/2:\x22right\x22\x3d\x3d\x3da\x26\x26(dx-\x3dtl);bounds.set(dx+\x3dx,dy+\x3dp,dx+tl,dy+h);if(item.angle\x26\x26!mode)bounds.rotate(item.angle*DegToRad,x,p);else if(2\x3d\x3d\x3dmode)return bounds.rotatedPoints(item.angle*DegToRad,x,p);return bounds}function boundItem(item,func,opt){var type\x3dMarks[item.mark.marktype];func\x3dfunc||type.bound;type.nested\x26\x26(item\x3ditem.mark);return func(item.bounds||(item.bounds\x3dnew Bounds),item,opt)}function boundMark(mark,bounds,opt){var type\x3dMarks[mark.marktype],bound\x3dtype.bound,items\x3dmark.items,\nhasItems\x3ditems\x26\x26items.length;if(type.nested)return hasItems?mark\x3ditems[0]:(DUMMY.mark\x3dmark,mark\x3dDUMMY),opt\x3dboundItem(mark,bound,opt),bounds\x3dbounds\x26\x26bounds.union(opt)||opt;bounds\x3dbounds||mark.bounds\x26\x26mark.bounds.clear()||new Bounds;if(hasItems)for(type\x3d0,hasItems\x3ditems.length;type\x3chasItems;++type)bounds.union(boundItem(items[type],bound,opt));return mark.bounds\x3dbounds}function sceneToJSON(scene,indent){return JSON.stringify(scene,keys,indent)}function sceneFromJSON(json){json\x3d\x22string\x22\x3d\x3d\x3dtypeof json?\nJSON.parse(json):json;return initialize(json)}function initialize(scene){var type\x3dscene.marktype,items\x3dscene.items,n;if(items){var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var parent\x3dtype?\x22mark\x22:\x22group\x22;items[i][parent]\x3dscene;items[i].zindex\x26\x26(items[i][parent].zdirty\x3d!0);\x22group\x22\x3d\x3d\x3d(type||parent)\x26\x26initialize(items[i])}}type\x26\x26boundMark(scene);return scene}function Scenegraph(scene){arguments.length?this.root\x3dsceneFromJSON(scene):(this.root\x3dcreateMark({marktype:\x22group\x22,name:\x22root\x22,role:\x22frame\x22}),this.root.items\x3d\n[new GroupItem(this.root)])}function createMark(def,group){group\x3d{bounds:new Bounds,clip:!!def.clip,group,interactive:!1\x3d\x3d\x3ddef.interactive?!1:!0,items:[],marktype:def.marktype,name:def.name||void 0,role:def.role||void 0,zindex:def.zindex||0};null!\x3ddef.aria\x26\x26(group.aria\x3ddef.aria);def.description\x26\x26(group.description\x3ddef.description);return group}function domCreate(doc,tag,ns){!doc\x26\x26\x22undefined\x22!\x3d\x3dtypeof document\x26\x26document.createElement\x26\x26(doc\x3ddocument);return doc?ns?doc.createElementNS(ns,tag):doc.createElement(tag):\nnull}function domFind(el,tag){tag\x3dtag.toLowerCase();el\x3del.childNodes;for(var i\x3d0,n\x3del.length;i\x3cn;++i)if(el[i].tagName.toLowerCase()\x3d\x3d\x3dtag)return el[i]}function domChild(el,index,tag,ns){index\x3del.childNodes[index];if(!index||index.tagName.toLowerCase()!\x3d\x3dtag.toLowerCase()){var b\x3dindex||null;index\x3ddomCreate(el.ownerDocument,tag,ns);el.insertBefore(index,b)}return index}function domClear(el,index){for(var nodes\x3del.childNodes,curr\x3dnodes.length;curr\x3eindex;)el.removeChild(nodes[--curr]);return el}function cssClass(mark){return\x22mark-\x22+\nmark.marktype+(mark.role?\x22 role-\x22+mark.role:\x22\x22)+(mark.name?\x22 \x22+mark.name:\x22\x22)}function point(event,el){const rect\x3del.getBoundingClientRect();return[event.clientX-rect.left-(el.clientLeft||0),event.clientY-rect.top-(el.clientTop||0)]}function Handler(customLoader,customTooltip){this._active\x3dnull;this._handlers\x3d{};this._loader\x3dcustomLoader||vegaLoader.loader();this._tooltip\x3dcustomTooltip||defaultTooltip}function defaultTooltip(handler,event,item,value){handler.element().setAttribute(\x22title\x22,value||\x22\x22)}\nfunction Renderer(loader){this._bgcolor\x3dthis._el\x3dnull;this._loader\x3dnew ResourceLoader(loader)}function CanvasHandler(loader,tooltip){Handler.call(this,loader,tooltip);this._touch\x3dthis._down\x3dnull;this._first\x3d!0;this._events\x3d{}}function eventListenerCheck(handler,type){(\x22touchstart\x22\x3d\x3d\x3dtype||\x22touchmove\x22\x3d\x3d\x3dtype||\x22touchend\x22\x3d\x3d\x3dtype?[\x22touchstart\x22,\x22touchmove\x22,\x22touchend\x22]:[type]).forEach(_\x3d\x3eaddEventListener(handler,_))}function addEventListener(handler,type){const canvas\x3dhandler.canvas();canvas\x26\x26!handler._events[type]\x26\x26\n(handler._events[type]\x3d1,canvas.addEventListener(type,handler[type]?evt\x3d\x3ehandler[type](evt):evt\x3d\x3ehandler.fire(type,evt)))}function move(moveEvent,overEvent,outEvent){return function(evt){const a\x3dthis._active,p\x3dthis.pickEvent(evt);p!\x3d\x3da\x26\x26(a\x26\x26a.exit||this.fire(outEvent,evt),this._active\x3dp,this.fire(overEvent,evt));this.fire(moveEvent,evt)}}function inactive(type){return function(evt){this.fire(type,evt);this._active\x3dnull}}function CanvasRenderer(loader){Renderer.call(this,loader);this._options\x3d{};this._redraw\x3d\n!1;this._dirty\x3dnew Bounds;this._tempb\x3dnew Bounds}function SVGHandler(loader,tooltip){Handler.call(this,loader,tooltip);const h\x3dthis;h._hrefHandler\x3dlistener(h,(evt,item)\x3d\x3e{item\x26\x26item.href\x26\x26h.handleHref(evt,item,item.href)});h._tooltipHandler\x3dlistener(h,(evt,item)\x3d\x3e{h.handleTooltip(evt,item,\x22mouseout\x22!\x3d\x3devt.type)})}function ariaItemAttributes(emit,item){var hide\x3d!1\x3d\x3d\x3ditem.aria;emit(\x22aria-hidden\x22,hide||void 0);if(hide||null\x3d\x3ditem.description)for(const prop in AriaEncode)emit(AriaEncode[prop],void 0);\nelse hide\x3ditem.mark.marktype,emit(\x22aria-label\x22,item.description),emit(\x22role\x22,item.ariaRole||(\x22group\x22\x3d\x3d\x3dhide?\x22graphics-object\x22:\x22graphics-symbol\x22)),emit(\x22aria-roledescription\x22,item.ariaRoleDescription||`${hide} mark`)}function ariaMarkAttributes(mark){return!1\x3d\x3d\x3dmark.aria?{[\x22aria-hidden\x22]:!0}:AriaIgnore[mark.role]?null:AriaGuides[mark.role]?ariaGuide(mark,AriaGuides[mark.role]):ariaMark(mark)}function ariaMark(mark){const type\x3dmark.marktype,recurse\x3d\x22group\x22\x3d\x3d\x3dtype||\x22text\x22\x3d\x3d\x3dtype||mark.items.some(_\x3d\x3e\nnull!\x3d_.description\x26\x26!1!\x3d\x3d_.aria);return bundle(recurse?\x22graphics-object\x22:\x22graphics-symbol\x22,`${type} mark container`,mark.description)}function ariaGuide(mark,opt){try{const item\x3dmark.items[0],caption\x3dopt.caption||(()\x3d\x3e\x22\x22);return bundle(opt.role||\x22graphics-symbol\x22,opt.desc,item.description||caption(item))}catch(err){return null}}function extractTitle(item){try{return vegaUtil.array(vegaUtil.peek(item.items).items[0].text).join(\x22 \x22)}catch(err){return null}}function channelCaption(props){props\x3dprops.map(p\x3d\x3e\np+(\x22fill\x22\x3d\x3d\x3dp||\x22stroke\x22\x3d\x3d\x3dp?\x22 color\x22:\x22\x22));return 2\x3eprops.length?props[0]:props.slice(0,-1).join(\x22, \x22)+\x22 and \x22+vegaUtil.peek(props)}function markup(){let buf\x3d\x22\x22,outer\x3d\x22\x22,inner\x3d\x22\x22;const stack\x3d[],attr\x3d(name,value)\x3d\x3e{null!\x3dvalue\x26\x26(outer+\x3d` ${name}\x3d\x22${innerText(value).replace(/\x22/g,\x22\\x26quot;\x22).replace(/\\t/g,\x22\\x26#x9;\x22).replace(/\\n/g,\x22\\x26#xA;\x22).replace(/\\r/g,\x22\\x26#xD;\x22)}\x22`);return m},m\x3d{open(tag,...attrs){outer\x26\x26(buf+\x3d`${outer}\x3e${inner}`,outer\x3dinner\x3d\x22\x22);stack.push(tag);outer\x3d\x22\\x3c\x22+tag;for(const set of attrs)for(const key in set)attr(key,\nset[key]);return m},close(){const tag\x3dstack.pop();buf\x3douter?buf+(outer+(inner?`\x3e${inner}\x3c/${tag}\x3e`:\x22/\\x3e\x22)):buf+`\x3c/${tag}\x3e`;outer\x3dinner\x3d\x22\x22;return m},attr,text:t\x3d\x3e(inner+\x3dinnerText(t),m),toString:()\x3d\x3ebuf};return m}function _serialize(m,node){m.open(node.tagName);if(node.hasAttributes()){var attrs\x3dnode.attributes,n\x3dattrs.length;for(var i\x3d0;i\x3cn;++i)m.attr(attrs[i].name,attrs[i].value)}if(node.hasChildNodes())for(node\x3dnode.childNodes,attrs\x3dnode.length,n\x3d0;n\x3cattrs;n++)i\x3dnode[n],3\x3d\x3d\x3di.nodeType?m.text(i.nodeValue):\n_serialize(m,i);return m.close()}function SVGRenderer(loader){Renderer.call(this,loader);this._dirtyID\x3d0;this._dirty\x3d[];this._defs\x3dthis._root\x3dthis._svg\x3dnull}function dirtyParents(item,id){for(;item\x26\x26item.dirty!\x3d\x3did;item\x3ditem.mark.group)if(item.dirty\x3did,item.mark\x26\x26item.mark.dirty!\x3d\x3did)item.mark.dirty\x3did;else break}function recurse$jscomp$0(renderer,el,group){el\x3del.lastChild.previousSibling;let prev,idx\x3d0;visit(group,item\x3d\x3e{prev\x3drenderer.mark(el,item,prev);++idx});domClear(el,1+idx)}function bind(item,\nel,sibling,tag,svg){let node\x3ditem._svg;if(!node){var doc\x3del.ownerDocument;node\x3ddomCreate(doc,tag,svgns);item._svg\x3dnode;item.mark\x26\x26(node.__data__\x3ditem,node.__values__\x3d{fill:\x22default\x22},\x22g\x22\x3d\x3d\x3dtag\x26\x26(tag\x3ddomCreate(doc,\x22path\x22,svgns),node.appendChild(tag),tag.__data__\x3ditem,tag\x3ddomCreate(doc,\x22g\x22,svgns),node.appendChild(tag),tag.__data__\x3ditem,doc\x3ddomCreate(doc,\x22path\x22,svgns),node.appendChild(doc),doc.__data__\x3ditem,doc.__values__\x3d{fill:\x22default\x22}))}(node.ownerSVGElement!\x3d\x3dsvg||node.parentNode\x26\x261\x3cnode.parentNode.childNodes.length\x26\x26\nnode.previousSibling!\x3dsibling)\x26\x26el.insertBefore(node,sibling?sibling.nextSibling:el.firstChild);return node}function emit$jscomp$0(name,value,ns){if(value!\x3d\x3dvalues[name]){if(ns){var el\x3delement;null!\x3dvalue?el.setAttributeNS(ns,name,value):el.removeAttributeNS(ns,name)}else setAttribute(element,name,value);values[name]\x3dvalue}}function setStyle(el,name,value){value!\x3d\x3dvalues[name]\x26\x26(null\x3d\x3dvalue?el.style.removeProperty(name):el.style.setProperty(name,value+\x22\x22),values[name]\x3dvalue)}function setAttributes(el,\nattrs){for(const key in attrs)setAttribute(el,key,attrs[key])}function setAttribute(el,name,value){null!\x3dvalue?el.setAttribute(name,value):el.removeAttribute(name)}function href(){let loc;return\x22undefined\x22\x3d\x3d\x3dtypeof window?\x22\x22:(loc\x3dwindow.location).hash?loc.href.slice(0,-loc.hash.length):loc.href}function SVGStringRenderer(loader){Renderer.call(this,loader);this._text\x3dnull;this._defs\x3d{gradient:{},clipping:{}}}function style(s,item,scene,tag,defs){if(null\x3d\x3ditem)return s;\x22bgrect\x22\x3d\x3d\x3dtag\x26\x26!1\x3d\x3d\x3dscene.interactive\x26\x26\n(s[\x22pointer-events\x22]\x3d\x22none\x22);if(\x22bgfore\x22\x3d\x3d\x3dtag\x26\x26(!1\x3d\x3d\x3dscene.interactive\x26\x26(s[\x22pointer-events\x22]\x3d\x22none\x22),s.display\x3d\x22none\x22,null!\x3d\x3ditem.fill))return s;\x22image\x22\x3d\x3d\x3dtag\x26\x26!1\x3d\x3d\x3ditem.smooth\x26\x26(s.style\x3d\x22image-rendering: optimizeSpeed; image-rendering: pixelated;\x22);\x22text\x22\x3d\x3d\x3dtag\x26\x26(s[\x22font-family\x22]\x3dfontFamily(item),s[\x22font-size\x22]\x3dfontSize(item)+\x22px\x22,s[\x22font-style\x22]\x3ditem.fontStyle,s[\x22font-variant\x22]\x3ditem.fontVariant,s[\x22font-weight\x22]\x3ditem.fontWeight);for(const prop in styles)scene\x3ditem[prop],tag\x3dstyles[prop],(\x22transparent\x22!\x3d\x3d\nscene||\x22fill\x22!\x3d\x3dtag\x26\x26\x22stroke\x22!\x3d\x3dtag)\x26\x26null!\x3dscene\x26\x26(scene\x26\x26scene.gradient\x26\x26(scene\x3dgradientRef(scene,defs.gradient,\x22\x22)),s[tag]\x3dscene);return s}function intersectMark(mark,box,filter,hits){if(mark.bounds\x26\x26box.intersects(mark.bounds)\x26\x26(\x22group\x22\x3d\x3d\x3dmark.marktype||!1!\x3d\x3dmark.interactive\x26\x26(!filter||filter(mark)))){const items\x3dmark.items;var type\x3dmark.marktype;mark\x3ditems.length;let i\x3d0;if(\x22group\x22\x3d\x3d\x3dtype)for(;i\x3cmark;++i)intersectGroup(items[i],box,filter,hits);else for(filter\x3dMarks[type].isect;i\x3cmark;++i)type\x3d\nitems[i],intersectItem(type,box,filter)\x26\x26hits.push(type)}return hits}function intersectGroup(group,box,filter,hits){filter\x26\x26filter(group.mark)\x26\x26intersectItem(group,box,Marks.group.isect)\x26\x26hits.push(group);const marks\x3dgroup.items,n\x3dmarks\x26\x26marks.length;if(n){const x\x3dgroup.x||0;group\x3dgroup.y||0;box.translate(-x,-group);for(let i\x3d0;i\x3cn;++i)intersectMark(marks[i],box,filter,hits);box.translate(x,group)}return hits}function intersectItem(item,box,test){const bounds\x3ditem.bounds;return box.encloses(bounds)||\nbox.intersects(bounds)\x26\x26test(item,box)}function sceneEqual(a,b,key){return a\x3d\x3d\x3db?!0:\x22path\x22\x3d\x3d\x3dkey?pathEqual(a,b):a instanceof Date\x26\x26b instanceof Date?+a\x3d\x3d\x3d+b:vegaUtil.isNumber(a)\x26\x26vegaUtil.isNumber(b)?1E-9\x3e\x3dMath.abs(a-b):a\x26\x26b\x26\x26(vegaUtil.isObject(a)||vegaUtil.isObject(b))?objectEqual(a,b):a\x3d\x3db}function pathEqual(a,b){return sceneEqual(pathParse(a),pathParse(b))}function objectEqual(a,b){var ka\x3dObject.keys(a),kb\x3dObject.keys(b),i;if(ka.length!\x3d\x3dkb.length)return!1;ka.sort();kb.sort();for(i\x3dka.length-1;0\x3c\x3d\ni;i--)if(ka[i]!\x3dkb[i])return!1;for(i\x3dka.length-1;0\x3c\x3di;i--)if(kb\x3dka[i],!sceneEqual(a[kb],b[kb],kb))return!1;return typeof a\x3d\x3d\x3dtypeof b}let gradient_id\x3d0;const lookup\x3d{basis:{curve:d3Shape.curveBasis},\x22basis-closed\x22:{curve:d3Shape.curveBasisClosed},\x22basis-open\x22:{curve:d3Shape.curveBasisOpen},bundle:{curve:d3Shape.curveBundle,tension:\x22beta\x22,value:.85},cardinal:{curve:d3Shape.curveCardinal,tension:\x22tension\x22,value:0},\x22cardinal-open\x22:{curve:d3Shape.curveCardinalOpen,tension:\x22tension\x22,value:0},\x22cardinal-closed\x22:{curve:d3Shape.curveCardinalClosed,\ntension:\x22tension\x22,value:0},\x22catmull-rom\x22:{curve:d3Shape.curveCatmullRom,tension:\x22alpha\x22,value:.5},\x22catmull-rom-closed\x22:{curve:d3Shape.curveCatmullRomClosed,tension:\x22alpha\x22,value:.5},\x22catmull-rom-open\x22:{curve:d3Shape.curveCatmullRomOpen,tension:\x22alpha\x22,value:.5},linear:{curve:d3Shape.curveLinear},\x22linear-closed\x22:{curve:d3Shape.curveLinearClosed},monotone:{horizontal:d3Shape.curveMonotoneY,vertical:d3Shape.curveMonotoneX},natural:{curve:d3Shape.curveNatural},step:{curve:d3Shape.curveStep},\x22step-after\x22:{curve:d3Shape.curveStepAfter},\n\x22step-before\x22:{curve:d3Shape.curveStepBefore}},cmdlen\x3d{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},regexp\x3d[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\\.\\d+)(\\.\\d)/g,/(\\d)([-+])/g,/\\s|,|###/],DegToRad\x3dMath.PI/180,HalfPi\x3dMath.PI/2,Tau\x3d2*Math.PI,HalfSqrt3\x3dMath.sqrt(3)/2;var segmentCache\x3d{},bezierCache\x3d{},join\x3d[].join;const temp\x3d[\x22l\x22,0,0,0,0,0,0,0],builtins\x3d{circle:{draw:function(context,size){size\x3dMath.sqrt(size)/2;context.moveTo(size,0);context.arc(0,0,size,0,Tau)}},cross:{draw:function(context,size){size\x3dMath.sqrt(size)/\n2;var s\x3dsize/2.5;context.moveTo(-size,-s);context.lineTo(-size,s);context.lineTo(-s,s);context.lineTo(-s,size);context.lineTo(s,size);context.lineTo(s,s);context.lineTo(size,s);context.lineTo(size,-s);context.lineTo(s,-s);context.lineTo(s,-size);context.lineTo(-s,-size);context.lineTo(-s,-s);context.closePath()}},diamond:{draw:function(context,size){size\x3dMath.sqrt(size)/2;context.moveTo(-size,0);context.lineTo(0,-size);context.lineTo(size,0);context.lineTo(0,size);context.closePath()}},square:{draw:function(context,\nsize){size\x3dMath.sqrt(size);var x\x3d-size/2;context.rect(x,x,size,size)}},arrow:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var s\x3dsize/7,t\x3dsize/2.5,v\x3dsize/8;context.moveTo(-s,size);context.lineTo(s,size);context.lineTo(s,-v);context.lineTo(t,-v);context.lineTo(0,-size);context.lineTo(-t,-v);context.lineTo(-s,-v);context.closePath()}},wedge:{draw:function(context,size){var r\x3dMath.sqrt(size)/2;size\x3dHalfSqrt3*r;var o\x3dsize-.5773502691896257*r;r/\x3d4;context.moveTo(0,-size-o);context.lineTo(-r,size-\no);context.lineTo(r,size-o);context.closePath()}},triangle:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size,o\x3dh-.5773502691896257*size;context.moveTo(0,-h-o);context.lineTo(-size,h-o);context.lineTo(size,h-o);context.closePath()}},\x22triangle-up\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(0,-h);context.lineTo(-size,h);context.lineTo(size,h);context.closePath()}},\x22triangle-down\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3d\nHalfSqrt3*size;context.moveTo(0,h);context.lineTo(-size,-h);context.lineTo(size,-h);context.closePath()}},\x22triangle-right\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(h,0);context.lineTo(-h,-size);context.lineTo(-h,size);context.closePath()}},\x22triangle-left\x22:{draw:function(context,size){size\x3dMath.sqrt(size)/2;var h\x3dHalfSqrt3*size;context.moveTo(-h,0);context.lineTo(h,-size);context.lineTo(h,size);context.closePath()}},stroke:{draw:function(context,size){size\x3d\nMath.sqrt(size)/2;context.moveTo(-size,0);context.lineTo(size,0)}}};var custom\x3d{};const x$jscomp$0\x3ditem\x3d\x3eitem.x||0,y$jscomp$0\x3ditem\x3d\x3eitem.y||0,def$jscomp$0\x3ditem\x3d\x3e!1!\x3d\x3ditem.defined,arcShape\x3dd3Shape.arc().startAngle(item\x3d\x3eitem.startAngle||0).endAngle(item\x3d\x3eitem.endAngle||0).padAngle(item\x3d\x3eitem.padAngle||0).innerRadius(item\x3d\x3eitem.innerRadius||0).outerRadius(item\x3d\x3eitem.outerRadius||0).cornerRadius(item\x3d\x3eitem.cornerRadius||0),areavShape\x3dd3Shape.area().x(x$jscomp$0).y1(y$jscomp$0).y0(item\x3d\x3e(item.y||0)+(item.height||\n0)).defined(def$jscomp$0),areahShape\x3dd3Shape.area().y(y$jscomp$0).x1(x$jscomp$0).x0(item\x3d\x3e(item.x||0)+(item.width||0)).defined(def$jscomp$0),lineShape\x3dd3Shape.line().x(x$jscomp$0).y(y$jscomp$0).defined(def$jscomp$0),rectShape\x3dvg_rect().x(x$jscomp$0).y(y$jscomp$0).width(item\x3d\x3eitem.width||0).height(item\x3d\x3eitem.height||0).cornerRadius(item\x3d\x3evalue$1(item.cornerRadiusTopLeft,item.cornerRadius)||0,item\x3d\x3evalue$1(item.cornerRadiusTopRight,item.cornerRadius)||0,item\x3d\x3evalue$1(item.cornerRadiusBottomRight,item.cornerRadius)||\n0,item\x3d\x3evalue$1(item.cornerRadiusBottomLeft,item.cornerRadius)||0),symbolShape\x3dd3Shape.symbol().type(item\x3d\x3esymbols(item.shape||\x22circle\x22)).size(item\x3d\x3evalue$1(item.size,64)),trailShape\x3dvg_trail().x(x$jscomp$0).y(y$jscomp$0).defined(def$jscomp$0).size(item\x3d\x3eitem.size||1);var clip_id\x3d1;Bounds.prototype\x3d{clone(){return new Bounds(this)},clear(){this.x1\x3d+Number.MAX_VALUE;this.y1\x3d+Number.MAX_VALUE;this.x2\x3d-Number.MAX_VALUE;this.y2\x3d-Number.MAX_VALUE;return this},empty(){return this.x1\x3d\x3d\x3d+Number.MAX_VALUE\x26\x26\nthis.y1\x3d\x3d\x3d+Number.MAX_VALUE\x26\x26this.x2\x3d\x3d\x3d-Number.MAX_VALUE\x26\x26this.y2\x3d\x3d\x3d-Number.MAX_VALUE},equals(b){return this.x1\x3d\x3d\x3db.x1\x26\x26this.y1\x3d\x3d\x3db.y1\x26\x26this.x2\x3d\x3d\x3db.x2\x26\x26this.y2\x3d\x3d\x3db.y2},set(x1,y1,x2,y2){x2\x3cx1?(this.x2\x3dx1,this.x1\x3dx2):(this.x1\x3dx1,this.x2\x3dx2);y2\x3cy1?(this.y2\x3dy1,this.y1\x3dy2):(this.y1\x3dy1,this.y2\x3dy2);return this},add(x,y){x\x3cthis.x1\x26\x26(this.x1\x3dx);y\x3cthis.y1\x26\x26(this.y1\x3dy);x\x3ethis.x2\x26\x26(this.x2\x3dx);y\x3ethis.y2\x26\x26(this.y2\x3dy);return this},expand(d){this.x1-\x3dd;this.y1-\x3dd;this.x2+\x3dd;this.y2+\x3dd;return this},round(){this.x1\x3d\nMath.floor(this.x1);this.y1\x3dMath.floor(this.y1);this.x2\x3dMath.ceil(this.x2);this.y2\x3dMath.ceil(this.y2);return this},scale(s){this.x1*\x3ds;this.y1*\x3ds;this.x2*\x3ds;this.y2*\x3ds;return this},translate(dx,dy){this.x1+\x3ddx;this.x2+\x3ddx;this.y1+\x3ddy;this.y2+\x3ddy;return this},rotate(angle,x,y){angle\x3dthis.rotatedPoints(angle,x,y);return this.clear().add(angle[0],angle[1]).add(angle[2],angle[3]).add(angle[4],angle[5]).add(angle[6],angle[7])},rotatedPoints(angle,x,y){var {x1,y1,x2,y2}\x3dthis,cos\x3dMath.cos(angle);angle\x3dMath.sin(angle);\nvar cx\x3dx-x*cos+y*angle;x\x3dy-x*angle-y*cos;return[cos*x1-angle*y1+cx,angle*x1+cos*y1+x,cos*x1-angle*y2+cx,angle*x1+cos*y2+x,cos*x2-angle*y1+cx,angle*x2+cos*y1+x,cos*x2-angle*y2+cx,angle*x2+cos*y2+x]},union(b){b.x1\x3cthis.x1\x26\x26(this.x1\x3db.x1);b.y1\x3cthis.y1\x26\x26(this.y1\x3db.y1);b.x2\x3ethis.x2\x26\x26(this.x2\x3db.x2);b.y2\x3ethis.y2\x26\x26(this.y2\x3db.y2);return this},intersect(b){b.x1\x3ethis.x1\x26\x26(this.x1\x3db.x1);b.y1\x3ethis.y1\x26\x26(this.y1\x3db.y1);b.x2\x3cthis.x2\x26\x26(this.x2\x3db.x2);b.y2\x3cthis.y2\x26\x26(this.y2\x3db.y2);return this},encloses(b){return b\x26\x26this.x1\x3c\x3d\nb.x1\x26\x26this.x2\x3e\x3db.x2\x26\x26this.y1\x3c\x3db.y1\x26\x26this.y2\x3e\x3db.y2},alignsWith(b){return b\x26\x26(this.x1\x3d\x3db.x1||this.x2\x3d\x3db.x2||this.y1\x3d\x3db.y1||this.y2\x3d\x3db.y2)},intersects(b){return b\x26\x26!(this.x2\x3cb.x1||this.x1\x3eb.x2||this.y2\x3cb.y1||this.y1\x3eb.y2)},contains(x,y){return!(x\x3cthis.x1||x\x3ethis.x2||y\x3cthis.y1||y\x3ethis.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};vegaUtil.inherits(GroupItem,Item);ResourceLoader.prototype\x3d{pending(){return this._pending},sanitizeURL(uri){const loader\x3dthis;loader._pending+\x3d1;return loader._loader.sanitize(uri,\n{context:\x22href\x22}).then(opt\x3d\x3e{--loader._pending;return opt}).catch(()\x3d\x3e{--loader._pending;return null})},loadImage(uri){const loader\x3dthis,Image\x3dvegaCanvas.image();loader._pending+\x3d1;return loader._loader.sanitize(uri,{context:\x22image\x22}).then(opt\x3d\x3e{const url\x3dopt.href;if(!url||!Image)throw{url};const img\x3dnew Image;opt\x3dvegaUtil.hasOwnProperty(opt,\x22crossOrigin\x22)?opt.crossOrigin:\x22anonymous\x22;null!\x3dopt\x26\x26(img.crossOrigin\x3dopt);img.onload\x3d()\x3d\x3e{--loader._pending};img.onerror\x3d()\x3d\x3e{--loader._pending};img.src\x3durl;\nreturn img}).catch(e\x3d\x3e{--loader._pending;return{complete:!1,width:0,height:0,src:e\x26\x26e.url||\x22\x22}})},ready(){const loader\x3dthis;return new Promise(accept\x3d\x3e{function poll(value){loader.pending()?setTimeout(()\x3d\x3e{poll(!0)},10):accept(value)}poll(!1)})}};const circleThreshold\x3dTau-1E-8;let bounds$jscomp$0,lx,ly,rot,ma,mb,mc,md;const addL\x3d(x,y)\x3d\x3e{x\x3dlx\x3dx;y\x3dly\x3dy;return bounds$jscomp$0.add(x,y)},addX\x3dx\x3d\x3ebounds$jscomp$0.add(x,bounds$jscomp$0.y1),addY\x3dy\x3d\x3ebounds$jscomp$0.add(bounds$jscomp$0.x1,y),addp\x3d(x,y)\x3d\x3ebounds$jscomp$0.add(ma*\nx+mc*y,mb*x+md*y),addpL\x3d(x,y)\x3d\x3eaddL(ma*x+mc*y,mb*x+md*y),context$1\x3d{beginPath(){},closePath(){},moveTo:addpL,lineTo:addpL,rect(x,y,w,h){rot?(addp(x+w,y),addp(x+w,y+h),addp(x,y+h),addpL(x,y)):(bounds$jscomp$0.add(x+w,y+h),addL(x,y))},quadraticCurveTo(x1,y1,x2,y2){const py1\x3dmb*x1+md*y1,px2\x3dma*x2+mc*y2;x2\x3dmb*x2+md*y2;quadExtrema(lx,ma*x1+mc*y1,px2,addX);quadExtrema(ly,py1,x2,addY);addL(px2,x2)},bezierCurveTo(x1,y1,x2,y2,x3,y3){const py1\x3dmb*x1+md*y1,py2\x3dmb*x2+md*y2,px3\x3dma*x3+mc*y3;x3\x3dmb*x3+md*y3;cubicExtrema(lx,\nma*x1+mc*y1,ma*x2+mc*y2,px3,addX);cubicExtrema(ly,py1,py2,x3,addY);addL(px3,x3)},arc(cx,cy,r,sa,ea,ccw){sa+\x3drot;ea+\x3drot;lx\x3dr*Math.cos(ea)+cx;ly\x3dr*Math.sin(ea)+cy;if(Math.abs(ea-sa)\x3ecircleThreshold)bounds$jscomp$0.add(cx-r,cy-r),bounds$jscomp$0.add(cx+r,cy+r);else{const update\x3da\x3d\x3ebounds$jscomp$0.add(r*Math.cos(a)+cx,r*Math.sin(a)+cy);let s;update(sa);update(ea);if(ea!\x3d\x3dsa)if(sa%\x3dTau,0\x3esa\x26\x26(sa+\x3dTau),ea%\x3dTau,0\x3eea\x26\x26(ea+\x3dTau),ea\x3csa\x26\x26(ccw\x3d!ccw,s\x3dsa,sa\x3dea,ea\x3ds),ccw)for(ea-\x3dTau,s\x3dsa-sa%HalfPi,sa\x3d0;4\x3esa\x26\x26\ns\x3eea;++sa,s-\x3dHalfPi)update(s);else for(s\x3dsa-sa%HalfPi+HalfPi,sa\x3d0;4\x3esa\x26\x26s\x3cea;++sa,s+\x3dHalfPi)update(s)}}};var context$jscomp$0\x3d(context$jscomp$0\x3dvegaCanvas.canvas(1,1))?context$jscomp$0.getContext(\x222d\x22):null;const b$jscomp$0\x3dnew Bounds;var Empty\x3d[],arc\x3dmarkItemPath(\x22arc\x22,function(context,item){return arcShape.context(context)(item)}),area\x3dmarkMultiItemPath(\x22area\x22,function(context,items){const item\x3ditems[0];return(\x22horizontal\x22\x3d\x3d\x3ditem.orient?areahShape:areavShape).curve(curves(item.interpolate||\x22linear\x22,\nitem.orient,item.tension)).context(context)(items)},function(a,p){p\x3d\x22horizontal\x22\x3d\x3d\x3da[0].orient?p[1]:p[0];for(var z\x3d\x22horizontal\x22\x3d\x3d\x3da[0].orient?\x22y\x22:\x22x\x22,i\x3da.length,min\x3dInfinity,hit,d;0\x3c\x3d--i;)!1!\x3d\x3da[i].defined\x26\x26(d\x3dMath.abs(a[i][z]-p),d\x3cmin\x26\x26(min\x3dd,hit\x3da[i]));return hit});const hitBackground\x3dhitPath(rectanglePath),hitForeground\x3dhitPath(rectanglePath,!1),hitCorner\x3dhitPath(rectanglePath,!0);var group$jscomp$0\x3d{type:\x22group\x22,tag:\x22g\x22,nested:!1,attr:function(emit,item){emit(\x22transform\x22,translate(item.x||0,item.y||\n0))},bound:function(bounds,group){if(!group.clip\x26\x26group.items){const items\x3dgroup.items,m\x3ditems.length;for(let j\x3d0;j\x3cm;++j)bounds.union(items[j].bounds)}(group.clip||group.width||group.height)\x26\x26!group.noBound\x26\x26bounds.add(0,0).add(group.width||0,group.height||0);boundStroke(bounds,group);return bounds.translate(group.x||0,group.y||0)},draw:function(context,scene,bounds){visit(scene,group\x3d\x3e{const gx\x3dgroup.x||0,gy\x3dgroup.y||0,fore\x3dgroup.strokeForeground,opacity\x3dnull\x3d\x3dgroup.opacity?1:group.opacity;(group.stroke||\ngroup.fill)\x26\x26opacity\x26\x26(rectanglePath(context,group,gx,gy),blend(context,group),group.fill\x26\x26fill$jscomp$0(context,group,opacity)\x26\x26context.fill(),group.stroke\x26\x26!fore\x26\x26stroke$jscomp$0(context,group,opacity)\x26\x26context.stroke());context.save();context.translate(gx,gy);group.clip\x26\x26clipGroup(context,group);bounds\x26\x26bounds.translate(-gx,-gy);visit(group,item\x3d\x3e{this.draw(context,item,bounds)});bounds\x26\x26bounds.translate(gx,gy);context.restore();fore\x26\x26group.stroke\x26\x26opacity\x26\x26(rectanglePath(context,group,gx,gy),\nblend(context,group),stroke$jscomp$0(context,group,opacity)\x26\x26context.stroke())})},pick:function(context,scene,x,y,gx,gy){if(scene.bounds\x26\x26!scene.bounds.contains(gx,gy)||!scene.items)return null;const cx\x3dx*context.pixelRatio,cy\x3dy*context.pixelRatio;return pickVisit(scene,group\x3d\x3e{let dx,dy;var hit\x3dgroup.bounds;if(!hit||hit.contains(gx,gy)){dx\x3dgroup.x||0;dy\x3dgroup.y||0;hit\x3ddx+(group.width||0);var dh\x3ddy+(group.height||0),c\x3dgroup.clip;if(!c||!(gx\x3cdx||gx\x3ehit||gy\x3cdy||gy\x3edh)){context.save();context.translate(dx,\ndy);dx\x3dgx-dx;dy\x3dgy-dy;if(c\x26\x26hasCornerRadius(group)\x26\x26!hitCorner(context,group,cx,cy))return context.restore(),null;dh\x3dgroup.strokeForeground;if((c\x3d!1!\x3d\x3dscene.interactive)\x26\x26dh\x26\x26group.stroke\x26\x26hitForeground(context,group,cx,cy))return context.restore(),group;hit\x3dpickVisit(group,mark\x3d\x3e(!1!\x3d\x3dmark.interactive||\x22group\x22\x3d\x3d\x3dmark.marktype)\x26\x26mark.bounds\x26\x26mark.bounds.contains(dx,dy)?this.pick(mark,x,y,dx,dy):null);!hit\x26\x26c\x26\x26(group.fill||!dh\x26\x26group.stroke)\x26\x26hitBackground(context,group,cx,cy)\x26\x26(hit\x3dgroup);context.restore();\nreturn hit||null}}})},isect:intersectRect,content:function(emit,item,renderer){item\x3ditem.clip?clip$1(renderer,item,item):null;emit(\x22clip-path\x22,item)},background:function(emit,item){emit(\x22class\x22,\x22background\x22);emit(\x22aria-hidden\x22,!0);{const off\x3doffset$1(item);emit(\x22d\x22,rectangle(null,item,off,off))}},foreground:function(emit,item){emit(\x22class\x22,\x22foreground\x22);emit(\x22aria-hidden\x22,!0);if(item.strokeForeground){{const off\x3doffset$1(item);emit(\x22d\x22,rectangle(null,item,off,off))}}else emit(\x22d\x22,\x22\x22)}},metadata\x3d{xmlns:\x22http://www.w3.org/2000/svg\x22,\n\x22xmlns:xlink\x22:\x22http://www.w3.org/1999/xlink\x22,version:\x221.1\x22},image$jscomp$1\x3d{type:\x22image\x22,tag:\x22image\x22,nested:!1,attr:function(emit,item,renderer){var img\x3dgetImage(item,renderer);renderer\x3dimageWidth(item,img);const h\x3dimageHeight(item,img),x\x3d(item.x||0)-imageXOffset(item.align,renderer),y\x3d(item.y||0)-imageYOffset(item.baseline,h);img\x3d!img.src\x26\x26img.toDataURL?img.toDataURL():img.src||\x22\x22;emit(\x22href\x22,img,metadata[\x22xmlns:xlink\x22],\x22xlink:href\x22);emit(\x22transform\x22,translate(x,y));emit(\x22width\x22,renderer);emit(\x22height\x22,\nh);emit(\x22preserveAspectRatio\x22,!1\x3d\x3d\x3ditem.aspect?\x22none\x22:\x22xMidYMid\x22)},bound:function(bounds,item){var img\x3ditem.image;const w\x3dimageWidth(item,img);img\x3dimageHeight(item,img);const x\x3d(item.x||0)-imageXOffset(item.align,w);item\x3d(item.y||0)-imageYOffset(item.baseline,img);return bounds.set(x,item,x+w,item+img)},draw:function(context,scene,bounds){visit(scene,item\x3d\x3e{if(!bounds||bounds.intersects(item.bounds)){var img\x3dgetImage(item,this),w\x3dimageWidth(item,img),h\x3dimageHeight(item,img);if(0!\x3d\x3dw\x26\x260!\x3d\x3dh){var x\x3d\n(item.x||0)-imageXOffset(item.align,w),y\x3d(item.y||0)-imageYOffset(item.baseline,h),opacity;if(!1!\x3d\x3ditem.aspect){var ar0\x3dimg.width/img.height;var ar1\x3ditem.width/item.height;ar0\x3d\x3d\x3dar0\x26\x26ar1\x3d\x3d\x3dar1\x26\x26ar0!\x3d\x3dar1\x26\x26(ar1\x3car0?(ar0\x3dw/ar0,y+\x3d(h-ar0)/2,h\x3dar0):(ar0*\x3dh,x+\x3d(w-ar0)/2,w\x3dar0))}if(img.complete||img.toDataURL)blend(context,item),context.globalAlpha\x3dnull!\x3d(opacity\x3ditem.opacity)?opacity:1,context.imageSmoothingEnabled\x3d!1!\x3d\x3ditem.smooth,context.drawImage(img,x,y,w,h)}}})},pick:pick$1(),isect:vegaUtil.truthy,\nget:getImage,xOffset:imageXOffset,yOffset:imageYOffset},line$jscomp$0\x3dmarkMultiItemPath(\x22line\x22,function(context,items){const item\x3ditems[0];return lineShape.curve(curves(item.interpolate||\x22linear\x22,item.orient,item.tension)).context(context)(items)},function(a,p){for(var t\x3dMath.pow(a[0].strokeWidth||1,2),i\x3da.length,dx,dy;0\x3c\x3d--i;)if(!1!\x3d\x3da[i].defined\x26\x26(dx\x3da[i].x-p[0],dy\x3da[i].y-p[1],dx\x3ddx*dx+dy*dy,dx\x3ct))return a[i];return null}),path$2\x3d{type:\x22path\x22,tag:\x22path\x22,nested:!1,attr:function(emit,item){var sy\x3d\nitem.scaleY||1;1\x3d\x3d\x3d(item.scaleX||1)\x26\x261\x3d\x3d\x3dsy||emit(\x22vector-effect\x22,\x22non-scaling-stroke\x22);sy\x3dtranslate(item.x||0,item.y||0)+(item.angle?\x22 rotate(\x22+(item.angle+\x22)\x22):\x22\x22)+(item.scaleX||item.scaleY?\x22 scale(\x22+((item.scaleX||1)+\x22,\x22+(item.scaleY||1)+\x22)\x22):\x22\x22);emit(\x22transform\x22,sy);emit(\x22d\x22,item.path)},bound:function(bounds,item){return path$1(boundContext(bounds,item.angle),item)?bounds.set(0,0,0,0):boundStroke(bounds,item,!0)},draw:drawAll(path$1),pick:pick$1(hitPath(path$1)),isect:intersectPath(path$1)},rect$jscomp$0\x3d\n{type:\x22rect\x22,tag:\x22path\x22,nested:!1,attr:function(emit,item){emit(\x22d\x22,rectangle(null,item))},bound:function(bounds,item){var x,y;return boundStroke(bounds.set(x\x3ditem.x||0,y\x3ditem.y||0,x+item.width||0,y+item.height||0),item)},draw:drawAll(draw$2),pick:pick$1(hitPath(draw$2)),isect:intersectRect},rule\x3d{type:\x22rule\x22,tag:\x22line\x22,nested:!1,attr:function(emit,item){emit(\x22transform\x22,translate(item.x||0,item.y||0));emit(\x22x2\x22,null!\x3ditem.x2?item.x2-(item.x||0):0);emit(\x22y2\x22,null!\x3ditem.y2?item.y2-(item.y||0):0)},\nbound:function(bounds,item){var x1,y1;return boundStroke(bounds.set(x1\x3ditem.x||0,y1\x3ditem.y||0,null!\x3ditem.x2?item.x2:x1,null!\x3ditem.y2?item.y2:y1),item)},draw:function(context,scene,bounds){visit(scene,item\x3d\x3e{if(!bounds||bounds.intersects(item.bounds)){var opacity\x3dnull\x3d\x3ditem.opacity?1:item.opacity;opacity\x26\x26path$jscomp$0(context,item,opacity)\x26\x26(blend(context,item),context.stroke())}})},pick:pick$1(function(context,item,x,y){return context.isPointInStroke?path$jscomp$0(context,item,1)\x26\x26context.isPointInStroke(x,\ny):!1}),isect:intersectRule},shape$jscomp$0\x3dmarkItemPath(\x22shape\x22,function(context,item){return(item.mark.shape||item.shape).context(context)(item)}),symbol\x3dmarkItemPath(\x22symbol\x22,function(context,item){return symbolShape.context(context)(item)},intersectPoint);const widthCache\x3dvegaUtil.lruCache();var textMetrics\x3d{height:fontSize,measureWidth,estimateWidth,width:estimateWidth,canvas:useCanvas};useCanvas(!0);const textAlign\x3d{left:\x22start\x22,center:\x22middle\x22,right:\x22end\x22},tempBounds\x3dnew Bounds;var text$jscomp$0\x3d\n{type:\x22text\x22,tag:\x22text\x22,nested:!1,attr:function(emit,item){var dx\x3ditem.dx||0,dy\x3d(item.dy||0)+offset$jscomp$0(item),p\x3danchorPoint(item),x\x3dp.x1;p\x3dp.y1;var a\x3ditem.angle||0;emit(\x22text-anchor\x22,textAlign[item.align]||\x22start\x22);if(a){if(item\x3dtranslate(x,p)+\x22 rotate(\x22+(a+\x22)\x22),dx||dy)item+\x3d\x22 \x22+translate(dx,dy)}else item\x3dtranslate(x+dx,p+dy);emit(\x22transform\x22,item)},bound:bound$jscomp$0,draw:function(context,scene,bounds){visit(scene,item\x3d\x3e{var opacity\x3dnull\x3d\x3ditem.opacity?1:item.opacity,i;if(!(bounds\x26\x26!bounds.intersects(item.bounds)||\n0\x3d\x3d\x3dopacity||0\x3e\x3ditem.fontSize||null\x3d\x3ditem.text||0\x3d\x3d\x3ditem.text.length)){context.font\x3dfont(item);context.textAlign\x3ditem.align||\x22left\x22;var p\x3danchorPoint(item);var x\x3dp.x1;p\x3dp.y1;item.angle\x26\x26(context.save(),context.translate(x,p),context.rotate(item.angle*DegToRad),x\x3dp\x3d0);x+\x3ditem.dx||0;p+\x3d(item.dy||0)+offset$jscomp$0(item);var tl\x3dtextLines(item);blend(context,item);if(vegaUtil.isArray(tl)){var lh\x3dlineHeight(item);for(i\x3d0;i\x3ctl.length;++i){var str\x3dtextValue(item,tl[i]);item.fill\x26\x26fill$jscomp$0(context,item,\nopacity)\x26\x26context.fillText(str,x,p);item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.strokeText(str,x,p);p+\x3dlh}}else str\x3dtextValue(item,tl),item.fill\x26\x26fill$jscomp$0(context,item,opacity)\x26\x26context.fillText(str,x,p),item.stroke\x26\x26stroke$jscomp$0(context,item,opacity)\x26\x26context.strokeText(str,x,p);item.angle\x26\x26context.restore()}})},pick:pick$1(function(context,item,x,y,gx,gy){if(0\x3e\x3ditem.fontSize)return!1;if(!item.angle)return!0;x\x3danchorPoint(item);context\x3dx.x1;x\x3dx.y1;y\x3dbound$jscomp$0(tempBounds,\nitem,1);var a\x3d-item.angle*DegToRad;item\x3dMath.cos(a);a\x3dMath.sin(a);return y.contains(item*gx-a*gy+(context-item*context+a*x),a*gx+item*gy+(x-a*context-item*x))}),isect:function(item,box){item\x3dbound$jscomp$0(tempBounds,item,2);return intersectBoxLine(box,item[0],item[1],item[2],item[3])||intersectBoxLine(box,item[0],item[1],item[4],item[5])||intersectBoxLine(box,item[4],item[5],item[6],item[7])||intersectBoxLine(box,item[2],item[3],item[6],item[7])}},trail$jscomp$0\x3dmarkMultiItemPath(\x22trail\x22,function(context,\nitems){return trailShape.context(context)(items)},function(a,p){for(var i\x3da.length,dx,dy;0\x3c\x3d--i;)if(!1!\x3d\x3da[i].defined\x26\x26(dx\x3da[i].x-p[0],dy\x3da[i].y-p[1],dy\x3ddx*dx+dy*dy,dx\x3da[i].size||1,dy\x3cdx*dx))return a[i];return null}),Marks\x3d{arc,area,group:group$jscomp$0,image:image$jscomp$1,line:line$jscomp$0,path:path$2,rect:rect$jscomp$0,rule,shape:shape$jscomp$0,symbol,text:text$jscomp$0,trail:trail$jscomp$0},DUMMY\x3d{mark:null};const keys\x3d\x22marktype name role interactive clip items zindex x y width height align baseline fill fillOpacity opacity blend stroke strokeOpacity strokeWidth strokeCap strokeDash strokeDashOffset strokeForeground strokeOffset startAngle endAngle innerRadius outerRadius cornerRadius padAngle cornerRadiusTopLeft cornerRadiusTopRight cornerRadiusBottomLeft cornerRadiusBottomRight interpolate tension orient defined url aspect smooth path scaleX scaleY x2 y2 size shape text angle theta radius dir dx dy ellipsis limit lineBreak lineHeight font fontSize fontWeight fontStyle fontVariant description aria ariaRole ariaRoleDescription\x22.split(\x22 \x22);\nScenegraph.prototype\x3d{toJSON(indent){return sceneToJSON(this.root,indent||0)},mark(markdef,group,index){group\x3dgroup||this.root.items[0];markdef\x3dcreateMark(markdef,group);group.items[index]\x3dmarkdef;markdef.zindex\x26\x26(markdef.group.zdirty\x3d!0);return markdef}};Handler.prototype\x3d{initialize(el,origin,obj){this._el\x3del;this._obj\x3dobj||null;return this.origin(origin)},element(){return this._el},canvas(){return this._el\x26\x26this._el.firstChild},origin(origin){return arguments.length?(this._origin\x3dorigin||[0,0],\nthis):this._origin.slice()},scene(scene){if(!arguments.length)return this._scene;this._scene\x3dscene;return this},on(){},off(){},_handlerIndex(h,type,handler){for(let i\x3dh?h.length:0;0\x3c\x3d--i;)if(h[i].type\x3d\x3d\x3dtype\x26\x26(!handler||h[i].handler\x3d\x3d\x3dhandler))return i;return-1},handlers(type){const h\x3dthis._handlers,a\x3d[];if(type)a.push(...h[this.eventName(type)]);else for(const k in h)a.push(...h[k]);return a},eventName(name){const i\x3dname.indexOf(\x22.\x22);return 0\x3ei?name:name.slice(0,i)},handleHref(event,item,href){this._loader.sanitize(href,\n{context:\x22href\x22}).then(opt\x3d\x3e{const e\x3dnew MouseEvent(event.type,event),a\x3ddomCreate(null,\x22a\x22);for(const name in opt)a.setAttribute(name,opt[name]);a.dispatchEvent(e)}).catch(()\x3d\x3e{})},handleTooltip(event,item,show){if(item\x26\x26null!\x3ditem.tooltip){var el\x3dthis.canvas(),origin\x3dthis._origin,mark\x3ditem\x26\x26item.mark,mdef;if(mark\x26\x26(mdef\x3dMarks[mark.marktype]).tip){el\x3dpoint(event,el);el[0]-\x3dorigin[0];for(el[1]-\x3dorigin[1];item\x3ditem.mark.group;)el[0]-\x3ditem.x||0,el[1]-\x3ditem.y||0;item\x3dmdef.tip(mark.items,el)}this._tooltip.call(this._obj,\nthis,event,item,show\x26\x26item\x26\x26item.tooltip||null)}},getItemBoundingClientRect(item){var el\x3dthis.canvas();if(el){var rect\x3del.getBoundingClientRect(),origin\x3dthis._origin,bounds\x3ditem.bounds;el\x3dbounds.width();var height\x3dbounds.height(),x\x3dbounds.x1+origin[0]+rect.left;for(rect\x3dbounds.y1+origin[1]+rect.top;item.mark\x26\x26(item\x3ditem.mark.group);)x+\x3ditem.x||0,rect+\x3ditem.y||0;return{x,y:rect,width:el,height,left:x,top:rect,right:x+el,bottom:rect+height}}}};Renderer.prototype\x3d{initialize(el,width,height,origin,scaleFactor){this._el\x3d\nel;return this.resize(width,height,origin,scaleFactor)},element(){return this._el},canvas(){return this._el\x26\x26this._el.firstChild},background(bgcolor){if(0\x3d\x3d\x3darguments.length)return this._bgcolor;this._bgcolor\x3dbgcolor;return this},resize(width,height,origin,scaleFactor){this._width\x3dwidth;this._height\x3dheight;this._origin\x3dorigin||[0,0];this._scale\x3dscaleFactor||1;return this},dirty(){},render(scene){const r\x3dthis;r._call\x3dfunction(){r._render(scene)};r._call();r._call\x3dnull;return r},_render(){},renderAsync(scene){const r\x3d\nthis.render(scene);return this._ready?this._ready.then(()\x3d\x3er):Promise.resolve(r)},_load(method,uri){var r\x3dthis;method\x3dr._loader[method](uri);if(!r._ready){const call\x3dr._call;r._ready\x3dr._loader.ready().then(redraw\x3d\x3e{redraw\x26\x26call();r._ready\x3dnull})}return method},sanitizeURL(uri){return this._load(\x22sanitizeURL\x22,uri)},loadImage(uri){return this._load(\x22loadImage\x22,uri)}};vegaUtil.inherits(CanvasHandler,Handler,{initialize(el,origin,obj){this._canvas\x3del\x26\x26domFind(el,\x22canvas\x22);[\x22click\x22,\x22mousedown\x22,\x22mousemove\x22,\n\x22mouseout\x22,\x22dragleave\x22].forEach(type\x3d\x3eeventListenerCheck(this,type));return Handler.prototype.initialize.call(this,el,origin,obj)},canvas(){return this._canvas},context(){return this._canvas.getContext(\x222d\x22)},events:\x22keydown keypress keyup dragenter dragleave dragover mousedown mouseup mousemove mouseout mouseover click dblclick wheel mousewheel touchstart touchmove touchend\x22.split(\x22 \x22),DOMMouseScroll(evt){this.fire(\x22mousewheel\x22,evt)},mousemove:move(\x22mousemove\x22,\x22mouseover\x22,\x22mouseout\x22),dragover:move(\x22dragover\x22,\n\x22dragenter\x22,\x22dragleave\x22),mouseout:inactive(\x22mouseout\x22),dragleave:inactive(\x22dragleave\x22),mousedown(evt){this._down\x3dthis._active;this.fire(\x22mousedown\x22,evt)},click(evt){this._down\x3d\x3d\x3dthis._active\x26\x26(this.fire(\x22click\x22,evt),this._down\x3dnull)},touchstart(evt){this._touch\x3dthis.pickEvent(evt.changedTouches[0]);this._first\x26\x26(this._active\x3dthis._touch,this._first\x3d!1);this.fire(\x22touchstart\x22,evt,!0)},touchmove(evt){this.fire(\x22touchmove\x22,evt,!0)},touchend(evt){this.fire(\x22touchend\x22,evt,!0);this._touch\x3dnull},fire(type,\nevt,touch){touch\x3dtouch?this._touch:this._active;const h\x3dthis._handlers[type];evt.vegaType\x3dtype;\x22click\x22\x3d\x3d\x3dtype\x26\x26touch\x26\x26touch.href?this.handleHref(evt,touch,touch.href):(\x22mousemove\x22\x3d\x3d\x3dtype||\x22mouseout\x22\x3d\x3d\x3dtype)\x26\x26this.handleTooltip(evt,touch,\x22mouseout\x22!\x3d\x3dtype);if(h)for(let i\x3d0,len\x3dh.length;i\x3clen;++i)h[i].handler.call(this._obj,evt,touch)},on(type,handler){const name\x3dthis.eventName(type),h\x3dthis._handlers;0\x3ethis._handlerIndex(h[name],type,handler)\x26\x26(eventListenerCheck(this,type),(h[name]||(h[name]\x3d[])).push({type,\nhandler}));return this},off(type,handler){var name\x3dthis.eventName(type);name\x3dthis._handlers[name];type\x3dthis._handlerIndex(name,type,handler);0\x3c\x3dtype\x26\x26name.splice(type,1);return this},pickEvent(evt){evt\x3dpoint(evt,this._canvas);const o\x3dthis._origin;return this.pick(this._scene,evt[0],evt[1],evt[0]-o[0],evt[1]-o[1])},pick(scene,x,y,gx,gy){const g\x3dthis.context();return Marks[scene.marktype].pick.call(this,g,scene,x,y,gx,gy)}});var pixelRatio\x3d\x22undefined\x22!\x3d\x3dtypeof window?window.devicePixelRatio||1:1;const base$1\x3d\nRenderer.prototype;vegaUtil.inherits(CanvasRenderer,Renderer,{initialize(el,width,height,origin,scaleFactor,options){this._options\x3doptions||{};this._canvas\x3dthis._options.externalContext?null:vegaCanvas.canvas(1,1,this._options.type);el\x26\x26this._canvas\x26\x26(domClear(el,0).appendChild(this._canvas),this._canvas.setAttribute(\x22class\x22,\x22marks\x22));return base$1.initialize.call(this,el,width,height,origin,scaleFactor)},resize(width,height,origin,scaleFactor$jscomp$0){base$1.resize.call(this,width,height,origin,\nscaleFactor$jscomp$0);if(this._canvas){{width\x3dthis._canvas;height\x3dthis._width;origin\x3dthis._height;scaleFactor$jscomp$0\x3dthis._origin;var scaleFactor\x3dthis._scale,opt\x3dthis._options.context;const inDOM\x3d\x22undefined\x22!\x3d\x3dtypeof HTMLElement\x26\x26width instanceof HTMLElement\x26\x26null!\x3dwidth.parentNode,context\x3dwidth.getContext(\x222d\x22);scaleFactor\x3dinDOM?pixelRatio:scaleFactor;width.width\x3dheight*scaleFactor;width.height\x3dorigin*scaleFactor;for(var key in opt)context[key]\x3dopt[key];inDOM\x26\x261!\x3d\x3dscaleFactor\x26\x26(width.style.width\x3d\nheight+\x22px\x22,width.style.height\x3dorigin+\x22px\x22);context.pixelRatio\x3dscaleFactor;context.setTransform(scaleFactor,0,0,scaleFactor,scaleFactor*scaleFactor$jscomp$0[0],scaleFactor*scaleFactor$jscomp$0[1])}}else(key\x3dthis._options.externalContext)||vegaUtil.error(\x22CanvasRenderer is missing a valid canvas or context\x22),key.scale(this._scale,this._scale),key.translate(this._origin[0],this._origin[1]);this._redraw\x3d!0;return this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?\nthis._canvas.getContext(\x222d\x22):null)},dirty(item){const b\x3dthis._tempb.clear().union(item.bounds);for(item\x3ditem.mark.group;item;)b.translate(item.x||0,item.y||0),item\x3ditem.mark.group;this._dirty.union(b)},_render(scene){const g\x3dthis.context(),o\x3dthis._origin,w\x3dthis._width,h\x3dthis._height,db\x3dthis._dirty;var JSCompiler_inline_result\x3d(new Bounds).set(0,0,w,h).translate(-o[0],-o[1]);g.save();this._redraw||db.empty()?JSCompiler_inline_result\x3d(this._redraw\x3d!1,JSCompiler_inline_result.expand(1)):(JSCompiler_inline_result\x3d\nJSCompiler_inline_result.intersect(db),JSCompiler_inline_result.expand(1).round(),g.pixelRatio%1\x26\x26JSCompiler_inline_result.scale(g.pixelRatio).round().scale(1/g.pixelRatio),JSCompiler_inline_result.translate(-(o[0]%1),-(o[1]%1)),g.beginPath(),g.rect(JSCompiler_inline_result.x1,JSCompiler_inline_result.y1,JSCompiler_inline_result.width(),JSCompiler_inline_result.height()),g.clip());this.clear(-o[0],-o[1],w,h);this.draw(g,scene,JSCompiler_inline_result);g.restore();db.clear();return this},draw(ctx,\nscene,bounds){const mark\x3dMarks[scene.marktype];if(scene.clip){var clip\x3dscene.clip;ctx.save();vegaUtil.isFunction(clip)?(ctx.beginPath(),clip(ctx),ctx.clip()):clipGroup(ctx,scene.group)}mark.draw.call(this,ctx,scene,bounds);scene.clip\x26\x26ctx.restore()},clear(x,y,w,h){const opt\x3dthis._options,g\x3dthis.context();\x22pdf\x22\x3d\x3d\x3dopt.type||opt.externalContext||g.clearRect(x,y,w,h);null!\x3dthis._bgcolor\x26\x26(g.fillStyle\x3dthis._bgcolor,g.fillRect(x,y,w,h))}});const listener\x3d(context,handler)\x3d\x3eevt\x3d\x3e{let item\x3devt.target.__data__;\nitem\x3dArray.isArray(item)?item[0]:item;evt.vegaType\x3devt.type;handler.call(context._obj,evt,item)};vegaUtil.inherits(SVGHandler,Handler,{initialize(el,origin,obj){let svg\x3dthis._svg;svg\x26\x26(svg.removeEventListener(\x22click\x22,this._hrefHandler),svg.removeEventListener(\x22mousemove\x22,this._tooltipHandler),svg.removeEventListener(\x22mouseout\x22,this._tooltipHandler));if(this._svg\x3dsvg\x3del\x26\x26domFind(el,\x22svg\x22))svg.addEventListener(\x22click\x22,this._hrefHandler),svg.addEventListener(\x22mousemove\x22,this._tooltipHandler),svg.addEventListener(\x22mouseout\x22,\nthis._tooltipHandler);return Handler.prototype.initialize.call(this,el,origin,obj)},canvas(){return this._svg},on(type,handler){const name\x3dthis.eventName(type),h\x3dthis._handlers;0\x3ethis._handlerIndex(h[name],type,handler)\x26\x26(type\x3d{type,handler,listener:listener(this,handler)},(h[name]||(h[name]\x3d[])).push(type),this._svg\x26\x26this._svg.addEventListener(name,type.listener));return this},off(type,handler){const name\x3dthis.eventName(type),h\x3dthis._handlers[name];type\x3dthis._handlerIndex(h,type,handler);0\x3c\x3dtype\x26\x26\n(this._svg\x26\x26this._svg.removeEventListener(name,h[type].listener),h.splice(type,1));return this}});const bundle\x3d(role,roledesc,label)\x3d\x3e({[\x22role\x22]:role,[\x22aria-roledescription\x22]:roledesc,[\x22aria-label\x22]:label||void 0}),AriaIgnore\x3dvegaUtil.toSet(\x22axis-domain axis-grid axis-label axis-tick axis-title legend-band legend-entry legend-gradient legend-label legend-title legend-symbol title\x22.split(\x22 \x22)),AriaGuides\x3d{axis:{desc:\x22axis\x22,caption:function(item){var datum\x3ditem.datum;const orient\x3ditem.orient,title\x3d\ndatum.title?extractTitle(item):null;var ctx\x3ditem.context;datum\x3dctx.scales[datum.scale].value;ctx\x3dctx.dataflow.locale();const type\x3ddatum.type;return`${\x22left\x22\x3d\x3d\x3dorient||\x22right\x22\x3d\x3d\x3dorient?\x22Y\x22:\x22X\x22}-axis`+(title?` titled \x27${title}\x27`:\x22\x22)+` for a ${vegaScale.isDiscrete(type)?\x22discrete\x22:type} scale`+` with ${vegaScale.domainCaption(ctx,datum,item)}`}},legend:{desc:\x22legend\x22,caption:function(item){var datum\x3ditem.datum;const title\x3ddatum.title?extractTitle(item):null,type\x3d`${datum.type||\x22\x22} legend`.trim();var scales\x3d\ndatum.scales;datum\x3dObject.keys(scales);var ctx\x3ditem.context;scales\x3dctx.scales[scales[datum[0]]].value;ctx\x3dctx.dataflow.locale();return(type.length?type[0].toUpperCase()+type.slice(1):type)+(title?` titled \x27${title}\x27`:\x22\x22)+` for ${channelCaption(datum)}`+` with ${vegaScale.domainCaption(ctx,scales,item)}`}},\x22title-text\x22:{desc:\x22title\x22,caption:item\x3d\x3e`Title text \x27${vegaUtil.array(item.text).join(\x22 \x22)}\x27`},\x22title-subtitle\x22:{desc:\x22subtitle\x22,caption:item\x3d\x3e`Subtitle text \x27${vegaUtil.array(item.text).join(\x22 \x22)}\x27`}},\nAriaEncode\x3d{ariaRole:\x22role\x22,ariaRoleDescription:\x22aria-roledescription\x22,description:\x22aria-label\x22},innerText\x3dval\x3d\x3e(val+\x22\x22).replace(/\x26/g,\x22\\x26amp;\x22).replace(/\x3c/g,\x22\\x26lt;\x22).replace(/\x3e/g,\x22\\x26gt;\x22),serializeXML\x3dnode\x3d\x3e_serialize(markup(),node)+\x22\x22,styles\x3d{fill:\x22fill\x22,fillOpacity:\x22fill-opacity\x22,stroke:\x22stroke\x22,strokeOpacity:\x22stroke-opacity\x22,strokeWidth:\x22stroke-width\x22,strokeCap:\x22stroke-linecap\x22,strokeJoin:\x22stroke-linejoin\x22,strokeDash:\x22stroke-dasharray\x22,strokeDashOffset:\x22stroke-dashoffset\x22,strokeMiterLimit:\x22stroke-miterlimit\x22,\nopacity:\x22opacity\x22,blend:\x22mix-blend-mode\x22},rootAttributes\x3d{fill:\x22none\x22,\x22stroke-miterlimit\x22:10},svgns\x3dmetadata.xmlns,base$jscomp$0\x3dRenderer.prototype;vegaUtil.inherits(SVGRenderer,Renderer,{initialize(el,width,height,origin,scaleFactor){this._defs\x3d{};this._clearDefs();el\x26\x26(this._svg\x3ddomChild(el,0,\x22svg\x22,svgns),this._svg.setAttributeNS(\x22http://www.w3.org/2000/xmlns/\x22,\x22xmlns\x22,svgns),this._svg.setAttributeNS(\x22http://www.w3.org/2000/xmlns/\x22,\x22xmlns:xlink\x22,metadata[\x22xmlns:xlink\x22]),this._svg.setAttribute(\x22version\x22,\nmetadata.version),this._svg.setAttribute(\x22class\x22,\x22marks\x22),domClear(el,1),this._root\x3ddomChild(this._svg,0,\x22g\x22,svgns),setAttributes(this._root,rootAttributes),domClear(this._svg,1));this.background(this._bgcolor);return base$jscomp$0.initialize.call(this,el,width,height,origin,scaleFactor)},background(bgcolor){arguments.length\x26\x26this._svg\x26\x26this._svg.style.setProperty(\x22background-color\x22,bgcolor);return base$jscomp$0.background.apply(this,arguments)},resize(width,height,origin,scaleFactor){base$jscomp$0.resize.call(this,\nwidth,height,origin,scaleFactor);this._svg\x26\x26(setAttributes(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute(\x22transform\x22,`translate(${this._origin})`));this._dirty\x3d[];return this},canvas(){return this._svg},svg(){const svg\x3dthis._svg,bg\x3dthis._bgcolor;if(!svg)return null;let node;bg\x26\x26(svg.removeAttribute(\x22style\x22),node\x3ddomChild(svg,0,\x22rect\x22,svgns),setAttributes(node,{width:this._width,height:this._height,fill:bg}));\nconst text\x3dserializeXML(svg);bg\x26\x26(svg.removeChild(node),this._svg.style.setProperty(\x22background-color\x22,bg));return text},_render(scene){this._dirtyCheck()\x26\x26(this._dirtyAll\x26\x26this._clearDefs(),this.mark(this._root,scene),domClear(this._root,1));this.defs();this._dirty\x3d[];++this._dirtyID;return this},dirty(item){item.dirty!\x3d\x3dthis._dirtyID\x26\x26(item.dirty\x3dthis._dirtyID,this._dirty.push(item))},isDirty(item){return this._dirtyAll||!item._svg||item.dirty\x3d\x3d\x3dthis._dirtyID},_dirtyCheck(){this._dirtyAll\x3d!0;const items\x3d\nthis._dirty;if(!items.length||!this._dirtyID)return!0;const id\x3d++this._dirtyID;let item;let type,mdef,i$jscomp$0,n;i$jscomp$0\x3d0;for(n\x3ditems.length;i$jscomp$0\x3cn;++i$jscomp$0){item\x3ditems[i$jscomp$0];var mark\x3ditem.mark;mark.marktype!\x3d\x3dtype\x26\x26(type\x3dmark.marktype,mdef\x3dMarks[type]);mark.zdirty\x26\x26mark.dirty!\x3d\x3did\x26\x26(this._dirtyAll\x3d!1,dirtyParents(item,id),mark.items.forEach(i\x3d\x3e{i.dirty\x3did}));mark.zdirty||(item.exit?(mdef.nested\x26\x26mark.items.length?(mark\x3dmark.items[0],mark._svg\x26\x26this._update(mdef,mark._svg,mark)):\nitem._svg\x26\x26(mark\x3ditem._svg.parentNode)\x26\x26mark.removeChild(item._svg),item._svg\x3dnull):(item\x3dmdef.nested?mark.items[0]:item,item._update!\x3d\x3did\x26\x26(item._svg\x26\x26item._svg.ownerSVGElement?this._update(mdef,item._svg,item):(this._dirtyAll\x3d!1,dirtyParents(item,id)),item._update\x3did)))}return!this._dirtyAll},mark(el,scene,prev){if(!this.isDirty(scene))return scene._svg;const svg\x3dthis._svg,mdef\x3dMarks[scene.marktype];var events\x3d!1\x3d\x3d\x3dscene.interactive?\x22none\x22:null;const isGroup\x3d\x22g\x22\x3d\x3d\x3dmdef.tag;let sibling\x3dnull,i\x3d0;\nconst parent\x3dbind(scene,el,prev,\x22g\x22,svg);parent.setAttribute(\x22class\x22,cssClass(scene));el\x3dariaMarkAttributes(scene);for(const key in el)setAttribute(parent,key,el[key]);isGroup||setAttribute(parent,\x22pointer-events\x22,events);setAttribute(parent,\x22clip-path\x22,scene.clip?clip$1(this,scene,scene.group):null);events\x3ditem\x3d\x3e{const dirty\x3dthis.isDirty(item),node\x3dbind(item,parent,sibling,mdef.tag,svg);dirty\x26\x26(this._update(mdef,node,item),isGroup\x26\x26recurse$jscomp$0(this,node,item));sibling\x3dnode;++i};mdef.nested?\nscene.items.length\x26\x26events(scene.items[0]):visit(scene,events);domClear(parent,i);return parent},_update(mdef,el,item){element\x3del;values\x3del.__values__;ariaItemAttributes(emit$jscomp$0,item);mdef.attr(emit$jscomp$0,item,this);const extra\x3dmark_extras[mdef.type];extra\x26\x26extra.call(this,mdef,el,item);element\x26\x26this.style(element,item)},style(el,item){if(null!\x3ditem)for(const prop in styles){let value\x3d\x22font\x22\x3d\x3d\x3dprop?fontFamily(item):item[prop];if(value\x3d\x3d\x3dvalues[prop])continue;const name\x3dstyles[prop];null\x3d\x3d\nvalue?el.removeAttribute(name):(value\x26\x26value.gradient\x26\x26(value\x3dgradientRef(value,this._defs.gradient,href())),el.setAttribute(name,value+\x22\x22));values[prop]\x3dvalue}},defs(){const svg\x3dthis._svg,defs\x3dthis._defs;let el\x3ddefs.el;var index\x3d0;for(var id$jscomp$0 in defs.gradient){el||(defs.el\x3del\x3ddomChild(svg,1,\x22defs\x22,svgns));{var stop\x3dvoid 0;let n,i;var el$jscomp$0\x3del,grad\x3ddefs.gradient[id$jscomp$0];\x22radial\x22\x3d\x3d\x3dgrad.gradient?(stop\x3ddomChild(el$jscomp$0,index++,\x22pattern\x22,svgns),setAttributes(stop,{id:\x22p_\x22+grad.id,\nviewBox:\x220,0,1,1\x22,width:\x22100%\x22,height:\x22100%\x22,preserveAspectRatio:\x22xMidYMid slice\x22}),stop\x3ddomChild(stop,0,\x22rect\x22,svgns),setAttributes(stop,{width:1,height:1,fill:`url(${href()}#${grad.id})`}),el$jscomp$0\x3ddomChild(el$jscomp$0,index++,\x22radialGradient\x22,svgns),setAttributes(el$jscomp$0,{id:grad.id,fx:grad.x1,fy:grad.y1,fr:grad.r1,cx:grad.x2,cy:grad.y2,r:grad.r2})):(el$jscomp$0\x3ddomChild(el$jscomp$0,index++,\x22linearGradient\x22,svgns),setAttributes(el$jscomp$0,{id:grad.id,x1:grad.x1,x2:grad.x2,y1:grad.y1,y2:grad.y2}));\ni\x3d0;for(n\x3dgrad.stops.length;i\x3cn;++i)stop\x3ddomChild(el$jscomp$0,i,\x22stop\x22,svgns),stop.setAttribute(\x22offset\x22,grad.stops[i].offset),stop.setAttribute(\x22stop-color\x22,grad.stops[i].color);domClear(el$jscomp$0,i)}}for(const id in defs.clipping)el||(defs.el\x3del\x3ddomChild(svg,1,\x22defs\x22,svgns)),el$jscomp$0\x3del,grad\x3ddefs.clipping[id],id$jscomp$0\x3dindex,el$jscomp$0\x3ddomChild(el$jscomp$0,id$jscomp$0,\x22clipPath\x22,svgns),el$jscomp$0.setAttribute(\x22id\x22,grad.id),grad.path?(index\x3ddomChild(el$jscomp$0,0,\x22path\x22,svgns),index.setAttribute(\x22d\x22,\ngrad.path)):(index\x3ddomChild(el$jscomp$0,0,\x22rect\x22,svgns),setAttributes(index,{x:0,y:0,width:grad.width,height:grad.height})),domClear(el$jscomp$0,1),index\x3did$jscomp$0+1;el\x26\x26(0\x3d\x3d\x3dindex?(svg.removeChild(el),defs.el\x3dnull):domClear(el,index))},_clearDefs(){const def\x3dthis._defs;def.gradient\x3d{};def.clipping\x3d{}}});let element\x3dnull,values\x3dnull;const mark_extras\x3d{group(mdef,el,item){const fg\x3delement\x3del.childNodes[2];values\x3dfg.__values__;mdef.foreground(emit$jscomp$0,item,this);values\x3del.__values__;element\x3d\nel.childNodes[1];mdef.content(emit$jscomp$0,item,this);el\x3delement\x3del.childNodes[0];mdef.background(emit$jscomp$0,item,this);mdef\x3d!1\x3d\x3d\x3ditem.mark.interactive?\x22none\x22:null;mdef!\x3d\x3dvalues.events\x26\x26(setAttribute(fg,\x22pointer-events\x22,mdef),setAttribute(el,\x22pointer-events\x22,mdef),values.events\x3dmdef);item.strokeForeground\x26\x26item.stroke?(mdef\x3ditem.fill,setAttribute(fg,\x22display\x22,null),this.style(el,item),setAttribute(el,\x22stroke\x22,null),mdef\x26\x26(item.fill\x3dnull),values\x3dfg.__values__,this.style(fg,item),mdef\x26\x26(item.fill\x3d\nmdef),element\x3dnull):setAttribute(fg,\x22display\x22,\x22none\x22)},image(mdef,el,item){!1\x3d\x3d\x3ditem.smooth?(setStyle(el,\x22image-rendering\x22,\x22optimizeSpeed\x22),setStyle(el,\x22image-rendering\x22,\x22pixelated\x22)):setStyle(el,\x22image-rendering\x22,null)},text(mdef,el,item){mdef\x3dtextLines(item);let value,doc,lh;vegaUtil.isArray(mdef)?(value\x3dmdef.map(_\x3d\x3etextValue(item,_)),mdef\x3dvalue.join(\x22\\n\x22),mdef!\x3d\x3dvalues.text\x26\x26(domClear(el,0),doc\x3del.ownerDocument,lh\x3dlineHeight(item),value.forEach((t,i)\x3d\x3e{const ts\x3ddomCreate(doc,\x22tspan\x22,svgns);ts.__data__\x3d\nitem;ts.textContent\x3dt;i\x26\x26(ts.setAttribute(\x22x\x22,0),ts.setAttribute(\x22dy\x22,lh));el.appendChild(ts)}),values.text\x3dmdef)):(value\x3dtextValue(item,mdef),value!\x3d\x3dvalues.text\x26\x26(el.textContent\x3dvalue,values.text\x3dvalue));setAttribute(el,\x22font-family\x22,fontFamily(item));setAttribute(el,\x22font-size\x22,fontSize(item)+\x22px\x22);setAttribute(el,\x22font-style\x22,item.fontStyle);setAttribute(el,\x22font-variant\x22,item.fontVariant);setAttribute(el,\x22font-weight\x22,item.fontWeight)}};vegaUtil.inherits(SVGStringRenderer,Renderer,{svg(){return this._text},\n_render(scene){const m\x3dmarkup();m.open(\x22svg\x22,vegaUtil.extend({},metadata,{class:\x22marks\x22,width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const bg\x3dthis._bgcolor;bg\x26\x26\x22transparent\x22!\x3d\x3dbg\x26\x26\x22none\x22!\x3d\x3dbg\x26\x26m.open(\x22rect\x22,{width:this._width,height:this._height,fill:bg}).close();m.open(\x22g\x22,rootAttributes,{transform:\x22translate(\x22+this._origin+\x22)\x22});this.mark(m,scene);m.close();this.defs(m);this._text\x3dm.close()+\x22\x22;return this},mark(m,scene$jscomp$0){const mdef\x3d\nMarks[scene$jscomp$0.marktype],tag\x3dmdef.tag,attrList\x3d[ariaItemAttributes,mdef.attr];m.open(\x22g\x22,{\x22class\x22:cssClass(scene$jscomp$0),\x22clip-path\x22:scene$jscomp$0.clip?clip$1(this,scene$jscomp$0,scene$jscomp$0.group):null},ariaMarkAttributes(scene$jscomp$0),{\x22pointer-events\x22:\x22g\x22!\x3d\x3dtag\x26\x26!1\x3d\x3d\x3dscene$jscomp$0.interactive?\x22none\x22:null});const process\x3ditem\x3d\x3e{const href\x3dthis.href(item);href\x26\x26m.open(\x22a\x22,href);m.open(tag,this.attr(scene$jscomp$0,item,attrList,\x22g\x22!\x3d\x3dtag?tag:null));if(\x22text\x22\x3d\x3d\x3dtag){var tl\x3dtextLines(item);\nif(vegaUtil.isArray(tl)){var attrs\x3d{x:0,dy:lineHeight(item)};for(var i\x3d0;i\x3ctl.length;++i)m.open(\x22tspan\x22,i?attrs:null).text(textValue(item,tl[i])).close()}else m.text(textValue(item,tl))}else\x22g\x22\x3d\x3d\x3dtag\x26\x26(tl\x3ditem.strokeForeground,attrs\x3ditem.fill,i\x3ditem.stroke,tl\x26\x26i\x26\x26(item.stroke\x3dnull),m.open(\x22path\x22,this.attr(scene$jscomp$0,item,mdef.background,\x22bgrect\x22)).close(),m.open(\x22g\x22,this.attr(scene$jscomp$0,item,mdef.content)),visit(item,scene\x3d\x3ethis.mark(m,scene)),m.close(),tl\x26\x26i?(attrs\x26\x26(item.fill\x3dnull),item.stroke\x3d\ni,m.open(\x22path\x22,this.attr(scene$jscomp$0,item,mdef.foreground,\x22bgrect\x22)).close(),attrs\x26\x26(item.fill\x3dattrs)):m.open(\x22path\x22,this.attr(scene$jscomp$0,item,mdef.foreground,\x22bgfore\x22)).close());m.close();href\x26\x26m.close()};mdef.nested?scene$jscomp$0.items\x26\x26scene$jscomp$0.items.length\x26\x26process(scene$jscomp$0.items[0]):visit(scene$jscomp$0,process);return m.close()},href(item){const href\x3ditem.href;if(href){if(item\x3dthis._hrefs\x26\x26this._hrefs[href])return item;this.sanitizeURL(href).then(attr\x3d\x3e{attr[\x22xlink:href\x22]\x3d\nattr.href;attr.href\x3dnull;(this._hrefs||(this._hrefs\x3d{}))[href]\x3dattr})}return null},attr(scene,item,attrs,tag){const object\x3d{},emit\x3d(name,value,ns,prefixed)\x3d\x3e{object[prefixed||name]\x3dvalue};Array.isArray(attrs)?attrs.forEach(fn\x3d\x3efn(emit,item,this)):attrs(emit,item,this);tag\x26\x26style(object,item,scene,tag,this._defs);return object},defs(m){var gradient\x3dthis._defs.gradient;const clipping\x3dthis._defs.clipping;if(0!\x3d\x3dObject.keys(gradient).length+Object.keys(clipping).length){m.open(\x22defs\x22);for(const id in gradient){var def\x3d\ngradient[id];const stops\x3ddef.stops;\x22radial\x22\x3d\x3d\x3ddef.gradient?(m.open(\x22pattern\x22,{id:\x22p_\x22+id,viewBox:\x220,0,1,1\x22,width:\x22100%\x22,height:\x22100%\x22,preserveAspectRatio:\x22xMidYMid slice\x22}),m.open(\x22rect\x22,{width:\x221\x22,height:\x221\x22,fill:\x22url(#\x22+id+\x22)\x22}).close(),m.close(),m.open(\x22radialGradient\x22,{id,fx:def.x1,fy:def.y1,fr:def.r1,cx:def.x2,cy:def.y2,r:def.r2})):m.open(\x22linearGradient\x22,{id,x1:def.x1,x2:def.x2,y1:def.y1,y2:def.y2});for(def\x3d0;def\x3cstops.length;++def)m.open(\x22stop\x22,{offset:stops[def].offset,\x22stop-color\x22:stops[def].color}).close();\nm.close()}for(const id in clipping)gradient\x3dclipping[id],m.open(\x22clipPath\x22,{id}),gradient.path?m.open(\x22path\x22,{d:gradient.path}).close():m.open(\x22rect\x22,{x:0,y:0,width:gradient.width,height:gradient.height}).close(),m.close();m.close()}}});const modules\x3d{};modules.canvas\x3dmodules.png\x3d{renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler};modules.svg\x3d{renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler};modules.none\x3d{};const clipBounds\x3dnew Bounds;exports.Bounds\x3dBounds;exports.CanvasHandler\x3d\nCanvasHandler;exports.CanvasRenderer\x3dCanvasRenderer;exports.Gradient\x3dfunction(p0,p1){var stops\x3d[],gradient;return gradient\x3d{gradient:\x22linear\x22,x1:p0?p0[0]:0,y1:p0?p0[1]:0,x2:p1?p1[0]:1,y2:p1?p1[1]:0,stops,stop:function(offset,color){stops.push({offset,color});return gradient}}};exports.GroupItem\x3dGroupItem;exports.Handler\x3dHandler;exports.Item\x3dItem;exports.Marks\x3dMarks;exports.RenderType\x3d{Canvas:\x22canvas\x22,PNG:\x22png\x22,SVG:\x22svg\x22,None:\x22none\x22};exports.Renderer\x3dRenderer;exports.ResourceLoader\x3dResourceLoader;\nexports.SVGHandler\x3dSVGHandler;exports.SVGRenderer\x3dSVGRenderer;exports.SVGStringRenderer\x3dSVGStringRenderer;exports.Scenegraph\x3dScenegraph;exports.boundClip\x3dfunction(mark){const clip\x3dmark.clip;if(vegaUtil.isFunction(clip))clip(boundContext(clipBounds.clear()));else if(clip)clipBounds.set(0,0,mark.group.width,mark.group.height);else return;mark.bounds.intersect(clipBounds)};exports.boundContext\x3dboundContext;exports.boundItem\x3dboundItem;exports.boundMark\x3dboundMark;exports.boundStroke\x3dboundStroke;exports.domChild\x3d\ndomChild;exports.domClear\x3ddomClear;exports.domCreate\x3ddomCreate;exports.domFind\x3ddomFind;exports.font\x3dfont;exports.fontFamily\x3dfontFamily;exports.fontSize\x3dfontSize;exports.intersect\x3dfunction(scene,bounds,filter){const hits\x3d[];bounds\x3d(new Bounds).union(bounds);const type\x3dscene.marktype;return type?intersectMark(scene,bounds,filter,hits):\x22group\x22\x3d\x3d\x3dtype?intersectGroup(scene,bounds,filter,hits):vegaUtil.error(\x22Intersect scene must be mark node or group item.\x22)};exports.intersectBoxLine\x3dintersectBoxLine;\nexports.intersectPath\x3dintersectPath;exports.intersectPoint\x3dintersectPoint;exports.intersectRule\x3dintersectRule;exports.lineHeight\x3dlineHeight;exports.markup\x3dmarkup;exports.multiLineOffset\x3dfunction(item){const tl\x3dtextLines(item);return(vegaUtil.isArray(tl)?tl.length-1:0)*lineHeight(item)};exports.pathCurves\x3dcurves;exports.pathEqual\x3dpathEqual;exports.pathParse\x3dpathParse;exports.pathRectangle\x3dvg_rect;exports.pathRender\x3dpathRender;exports.pathSymbols\x3dsymbols;exports.pathTrail\x3dvg_trail;exports.point\x3dpoint;\nexports.renderModule\x3dfunction(name,_){name\x3dString(name||\x22\x22).toLowerCase();return 1\x3carguments.length?(modules[name]\x3d_,this):modules[name]};exports.resetSVGClipId\x3dfunction(){clip_id\x3d1};exports.resetSVGDefIds\x3dfunction(){clip_id\x3d1;gradient_id\x3d0};exports.sceneEqual\x3dsceneEqual;exports.sceneFromJSON\x3dsceneFromJSON;exports.scenePickVisit\x3dpickVisit;exports.sceneToJSON\x3dsceneToJSON;exports.sceneVisit\x3dvisit;exports.sceneZOrder\x3dzorder;exports.serializeXML\x3dserializeXML;exports.textMetrics\x3dtextMetrics;Object.defineProperty(exports,\n\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_view_transforms$build$vega_view_transforms.js", true , "shadow$provide.module$node_modules$vega_view_transforms$build$vega_view_transforms\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\n\x22vega-dataflow\x22,\x22vega-scenegraph\x22,\x22vega-util\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega))})(this,function(exports,vegaDataflow,vegaScenegraph,vegaUtil){function Bound(params){vegaDataflow.Transform.call(this,null,params)}function boundItem(item,bound,opt){return bound(item.bounds.clear(),item,opt)}function Identifier(params){vegaDataflow.Transform.call(this,0,params)}\nfunction getCounter(view){return view._signals[\x22:vega_identifier:\x22]||(view._signals[\x22:vega_identifier:\x22]\x3dview.add(0))}function Mark(params){vegaDataflow.Transform.call(this,null,params)}function lookup(_){const g\x3d_.groups;_\x3d_.parent;return g\x26\x261\x3d\x3d\x3dg.size?g.get(Object.keys(g.object)[0]):g\x26\x26_?g.lookup(_):null}function Overlap(params){vegaDataflow.Transform.call(this,null,params)}function Render(params){vegaDataflow.Transform.call(this,null,params)}function set(item,property,value){return item[property]\x3d\x3d\x3d\nvalue?0:(item[property]\x3dvalue,1)}function isYAxis(mark){mark\x3dmark.items[0].orient;return\x22left\x22\x3d\x3d\x3dmark||\x22right\x22\x3d\x3d\x3dmark}function axisLayout(view,axis,width,height){axis\x3daxis.items[0];var datum\x3daxis.datum,delta\x3dnull!\x3daxis.translate?axis.translate:.5,orient\x3daxis.orient,index\x3d+datum.grid;var indices\x3d[datum.ticks?index++:-1,datum.labels?index++:-1,index+ +datum.domain];index\x3daxis.range;var offset\x3daxis.offset,position\x3daxis.position,minExtent\x3daxis.minExtent,maxExtent\x3daxis.maxExtent;datum\x3ddatum.title\x26\x26axis.items[indices[2]].items[0];\nvar titlePadding\x3daxis.titlePadding,bounds\x3daxis.bounds,dl\x3ddatum\x26\x26vegaScenegraph.multiLineOffset(datum),i;tempBounds.clear().union(bounds);bounds.clear();-1\x3c(i\x3dindices[0])\x26\x26bounds.union(axis.items[i].bounds);-1\x3c(i\x3dindices[1])\x26\x26bounds.union(axis.items[i].bounds);switch(orient){case \x22top\x22:width\x3dposition||0;height\x3d-offset;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,-bounds.y1));bounds.add(0,-minExtent).add(index,0);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,0,-1,bounds);break;case \x22left\x22:width\x3d\n-offset;height\x3dposition||0;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,-bounds.x1));bounds.add(-minExtent,0).add(0,index);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,1,-1,bounds);break;case \x22right\x22:width+\x3doffset;height\x3dposition||0;minExtent\x3dMath.max(minExtent,Math.min(maxExtent,bounds.x2));bounds.add(0,0).add(minExtent,index);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,dl,1,1,bounds);break;case \x22bottom\x22:width\x3dposition||0;height+\x3doffset;minExtent\x3dMath.max(minExtent,\nMath.min(maxExtent,bounds.y2));bounds.add(0,0).add(index,minExtent);datum\x26\x26axisTitleLayout(view,datum,minExtent,titlePadding,0,0,1,bounds);break;default:width\x3daxis.x,height\x3daxis.y}vegaScenegraph.boundStroke(bounds.translate(width,height),axis);set(axis,\x22x\x22,width+delta)|set(axis,\x22y\x22,height+delta)\x26\x26(axis.bounds\x3dtempBounds,view.dirty(axis),axis.bounds\x3dbounds,view.dirty(axis));return axis.mark.bounds.clear().union(bounds)}function axisTitleLayout(view,title,offset,pad,dl,isYAxis,sign,bounds){const b\x3d\ntitle.bounds;title.auto\x26\x26(offset\x3dsign*(offset+dl+pad),dl\x3dpad\x3d0,view.dirty(title),isYAxis?pad\x3d(title.x||0)-(title.x\x3doffset):dl\x3d(title.y||0)-(title.y\x3doffset),title.mark.bounds.clear().union(b.translate(-pad,-dl)),view.dirty(title));bounds.union(b)}function bboxFlush(item){return(new vegaScenegraph.Bounds).set(0,0,item.width||0,item.height||0)}function bboxFull(item){const b\x3ditem.bounds.clone();return b.empty()?b.set(0,0,0,0):b.translate(-(item.x||0),-(item.y||0))}function get(opt,key,d){opt\x3dvegaUtil.isObject(opt)?\nopt[key]:opt;return null!\x3dopt?opt:void 0!\x3d\x3dd?d:0}function offsetValue(v){return 0\x3ev?Math.ceil(-v):0}function gridLayout(view,groups,opt){var dirty\x3d!opt.nodirty,bbox\x3d\x22flush\x22\x3d\x3d\x3dopt.bounds?bboxFlush:bboxFull,bounds\x3dtempBounds.set(0,0,0,0),alignCol\x3dget(opt.align,\x22column\x22),alignRow\x3dget(opt.align,\x22row\x22),padCol\x3dget(opt.padding,\x22column\x22),padRow\x3dget(opt.padding,\x22row\x22),ncols\x3dopt.columns||groups.length,nrows\x3d0\x3e\x3dncols?1:Math.ceil(groups.length/ncols),n\x3dgroups.length,xOffset\x3dArray(n),xExtent\x3dArray(ncols),xMax\x3d\n0,yOffset\x3dArray(n),yExtent\x3dArray(nrows),yMax\x3d0,dx\x3dArray(n),dy\x3dArray(n),boxes\x3dArray(n),i,px,py;for(i\x3d0;i\x3cncols;++i)xExtent[i]\x3d0;for(i\x3d0;i\x3cnrows;++i)yExtent[i]\x3d0;for(i\x3d0;i\x3cn;++i){var m\x3dgroups[i];var b\x3dboxes[i]\x3dbbox(m);m.x\x3dm.x||0;dx[i]\x3d0;m.y\x3dm.y||0;dy[i]\x3d0;m\x3di%ncols;var r\x3d~~(i/ncols);xMax\x3dMath.max(xMax,px\x3dMath.ceil(b.x2));yMax\x3dMath.max(yMax,py\x3dMath.ceil(b.y2));xExtent[m]\x3dMath.max(xExtent[m],px);yExtent[r]\x3dMath.max(yExtent[r],py);xOffset[i]\x3dpadCol+offsetValue(b.x1);yOffset[i]\x3dpadRow+offsetValue(b.y1);\ndirty\x26\x26view.dirty(groups[i])}for(i\x3d0;i\x3cn;++i)0\x3d\x3d\x3di%ncols\x26\x26(xOffset[i]\x3d0),i\x3cncols\x26\x26(yOffset[i]\x3d0);if(\x22each\x22\x3d\x3d\x3dalignCol)for(m\x3d1;m\x3cncols;++m){bbox\x3d0;for(i\x3dm;i\x3cn;i+\x3dncols)bbox\x3cxOffset[i]\x26\x26(bbox\x3dxOffset[i]);for(i\x3dm;i\x3cn;i+\x3dncols)xOffset[i]\x3dbbox+xExtent[m-1]}else if(\x22all\x22\x3d\x3d\x3dalignCol){for(i\x3dbbox\x3d0;i\x3cn;++i)i%ncols\x26\x26bbox\x3cxOffset[i]\x26\x26(bbox\x3dxOffset[i]);for(i\x3d0;i\x3cn;++i)i%ncols\x26\x26(xOffset[i]\x3dbbox+xMax)}else for(alignCol\x3d!1,m\x3d1;m\x3cncols;++m)for(i\x3dm;i\x3cn;i+\x3dncols)xOffset[i]+\x3dxExtent[m-1];if(\x22each\x22\x3d\x3d\x3dalignRow)for(r\x3d\n1;r\x3cnrows;++r){bbox\x3d0;i\x3dr*ncols;for(m\x3di+ncols;i\x3cm;++i)bbox\x3cyOffset[i]\x26\x26(bbox\x3dyOffset[i]);for(i\x3dr*ncols;i\x3cm;++i)yOffset[i]\x3dbbox+yExtent[r-1]}else if(\x22all\x22\x3d\x3d\x3dalignRow){bbox\x3d0;for(i\x3dncols;i\x3cn;++i)bbox\x3cyOffset[i]\x26\x26(bbox\x3dyOffset[i]);for(i\x3dncols;i\x3cn;++i)yOffset[i]\x3dbbox+yMax}else for(alignRow\x3d!1,r\x3d1;r\x3cnrows;++r)for(i\x3dr*ncols,m\x3di+ncols;i\x3cm;++i)yOffset[i]+\x3dyExtent[r-1];for(i\x3dr\x3d0;i\x3cn;++i)r\x3dxOffset[i]+(i%ncols?r:0),dx[i]+\x3dr-groups[i].x;for(m\x3d0;m\x3cncols;++m)for(xOffset\x3d0,i\x3dm;i\x3cn;i+\x3dncols)xOffset+\x3dyOffset[i],dy[i]+\x3d\nxOffset-groups[i].y;if(alignCol\x26\x26get(opt.center,\x22column\x22)\x26\x261\x3cnrows)for(i\x3d0;i\x3cn;++i)b\x3d\x22all\x22\x3d\x3d\x3dalignCol?xMax:xExtent[i%ncols],r\x3db-boxes[i].x2-groups[i].x-dx[i],0\x3cr\x26\x26(dx[i]+\x3dr/2);if(alignRow\x26\x26get(opt.center,\x22row\x22)\x26\x261!\x3d\x3dncols)for(i\x3d0;i\x3cn;++i)b\x3d\x22all\x22\x3d\x3d\x3dalignRow?yMax:yExtent[~~(i/ncols)],xOffset\x3db-boxes[i].y2-groups[i].y-dy[i],0\x3cxOffset\x26\x26(dy[i]+\x3dxOffset/2);for(i\x3d0;i\x3cn;++i)bounds.union(boxes[i].translate(dx[i],dy[i]));r\x3dget(opt.anchor,\x22x\x22);xOffset\x3dget(opt.anchor,\x22y\x22);switch(get(opt.anchor,\x22column\x22)){case \x22end\x22:r-\x3d\nbounds.width();break;case \x22middle\x22:r-\x3dbounds.width()/2}switch(get(opt.anchor,\x22row\x22)){case \x22end\x22:xOffset-\x3dbounds.height();break;case \x22middle\x22:xOffset-\x3dbounds.height()/2}r\x3dMath.round(r);xOffset\x3dMath.round(xOffset);bounds.clear();for(i\x3d0;i\x3cn;++i)groups[i].mark.bounds.clear();for(i\x3d0;i\x3cn;++i)m\x3dgroups[i],m.x+\x3ddx[i]+\x3dr,m.y+\x3ddy[i]+\x3dxOffset,bounds.union(m.mark.bounds.union(m.bounds.translate(dx[i],dy[i]))),dirty\x26\x26view.dirty(m);return bounds}function boundFlush(item,field){return\x22x1\x22\x3d\x3d\x3dfield?item.x||0:\x22y1\x22\x3d\x3d\x3d\nfield?item.y||0:\x22x2\x22\x3d\x3d\x3dfield?(item.x||0)+(item.width||0):\x22y2\x22\x3d\x3d\x3dfield?(item.y||0)+(item.height||0):void 0}function boundFull(item,field){return item.bounds[field]}function layoutHeaders(view,headers,groups,ncols,limit,offset,agg,isX,bound,bf,start,stride,back,band){var n\x3dgroups.length,edge\x3dncols\x3d0,i,g;if(!n)return ncols;for(i\x3dstart;i\x3cn;i+\x3dstride)groups[i]\x26\x26(ncols\x3dagg(ncols,bound(groups[i],bf)));if(!headers.length)return ncols;headers.length\x3elimit\x26\x26(view.warn(\x22Grid headers exceed limit: \x22+limit),headers\x3d\nheaders.slice(0,limit));ncols+\x3doffset;limit\x3d0;for(offset\x3dheaders.length;limit\x3coffset;++limit)view.dirty(headers[limit]),headers[limit].mark.bounds.clear();i\x3dstart;limit\x3d0;for(offset\x3dheaders.length;limit\x3coffset;++limit,i+\x3dstride){bound\x3dheaders[limit];start\x3dbound.mark.bounds;for(n\x3di;0\x3c\x3dn\x26\x26null\x3d\x3d(g\x3dgroups[n]);n-\x3dback);if(isX){n\x3dnull\x3d\x3dband?g.x:Math.round(g.bounds.x1+band*g.bounds.width());var y\x3dncols}else n\x3dncols,y\x3dnull\x3d\x3dband?g.y:Math.round(g.bounds.y1+band*g.bounds.height());start.union(bound.bounds.translate(n-\n(bound.x||0),y-(bound.y||0)));bound.x\x3dn;bound.y\x3dy;view.dirty(bound);edge\x3dagg(edge,start[bf])}return edge}function layoutTitle(view,g,offset,isX,bounds,band){if(g){view.dirty(g);var x\x3doffset;isX?x\x3dMath.round(bounds.x1+band*bounds.width()):offset\x3dMath.round(bounds.y1+band*bounds.height());g.bounds.translate(x-(g.x||0),offset-(g.y||0));g.mark.bounds.clear().union(g.bounds);g.x\x3dx;g.y\x3doffset;view.dirty(g)}}function lookup$1(config,orient){const opt\x3dconfig[orient]||{};return(key,d)\x3d\x3enull!\x3dopt[key]?opt[key]:\nnull!\x3dconfig[key]?config[key]:d}function offsets(legends,value){let max\x3d-Infinity;legends.forEach(item\x3d\x3e{null!\x3ditem.offset\x26\x26(max\x3dMath.max(max,item.offset))});return-Infinity\x3cmax?max:value}function legendParams(g,orient,config,xb,yb,w,h){const _\x3dlookup$1(config,orient);config\x3doffsets(g,_(\x22offset\x22,0));const anchor\x3d_(\x22anchor\x22,\x22start\x22),mult\x3d\x22end\x22\x3d\x3d\x3danchor?1:\x22middle\x22\x3d\x3d\x3danchor?.5:0;g\x3d{align:\x22each\x22,bounds:_(\x22bounds\x22,\x22flush\x22),columns:\x22vertical\x22\x3d\x3d\x3d_(\x22direction\x22)?1:g.length,padding:_(\x22margin\x22,8),center:_(\x22center\x22),\nnodirty:!0};switch(orient){case \x22left\x22:g.anchor\x3d{x:Math.floor(xb.x1)-config,column:\x22end\x22,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case \x22right\x22:g.anchor\x3d{x:Math.ceil(xb.x2)+config,y:mult*(h||xb.height()+2*xb.y1),row:anchor};break;case \x22top\x22:g.anchor\x3d{y:Math.floor(yb.y1)-config,row:\x22end\x22,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case \x22bottom\x22:g.anchor\x3d{y:Math.ceil(yb.y2)+config,x:mult*(w||yb.width()+2*yb.x1),column:anchor};break;case \x22top-left\x22:g.anchor\x3d{x:config,y:config};break;\ncase \x22top-right\x22:g.anchor\x3d{x:w-config,y:config,column:\x22end\x22};break;case \x22bottom-left\x22:g.anchor\x3d{x:config,y:h-config,row:\x22end\x22};break;case \x22bottom-right\x22:g.anchor\x3d{x:w-config,y:h-config,column:\x22end\x22,row:\x22end\x22}}return g}function legendLayout(view,legend){legend\x3dlegend.items[0];var datum\x3dlegend.datum,orient\x3dlegend.orient,bounds\x3dlegend.bounds,x\x3dlegend.x,y\x3dlegend.y;legend._bounds?legend._bounds.clear().union(bounds):legend._bounds\x3dbounds.clone();bounds.clear();var h\x3dlegend.items[0].items[0];var pad\x3dlegend.padding,\nex\x3dpad-h.x,ey\x3dpad-h.y;if(legend.datum.title){var title\x3dlegend.items[1].items[0],anchor\x3dtitle.anchor,tpad\x3dlegend.titlePadding||0,tx\x3dpad-title.x,ty\x3dpad-title.y;switch(title.orient){case \x22left\x22:ex+\x3dMath.ceil(title.bounds.width())+tpad;break;case \x22right\x22:case \x22bottom\x22:break;default:ey+\x3dtitle.bounds.height()+tpad}(ex||ey)\x26\x26translate(view,h,ex,ey);switch(title.orient){case \x22left\x22:ty+\x3dlegendTitleOffset(legend,h,title,anchor,1,1);break;case \x22right\x22:tx+\x3dlegendTitleOffset(legend,h,title,\x22end\x22,0,0)+tpad;ty+\x3d\nlegendTitleOffset(legend,h,title,anchor,1,1);break;case \x22bottom\x22:tx+\x3dlegendTitleOffset(legend,h,title,anchor,0,0);ty+\x3dlegendTitleOffset(legend,h,title,\x22end\x22,-1,0,1)+tpad;break;default:tx+\x3dlegendTitleOffset(legend,h,title,anchor,0,0)}(tx||ty)\x26\x26translate(view,title,tx,ty);0\x3e(tx\x3dMath.round(title.bounds.x1-pad))\x26\x26(translate(view,h,-tx,0),translate(view,title,-tx,0))}else(ex||ey)\x26\x26translate(view,h,ex,ey);bounds\x3dlegendBounds(legend,bounds);view\x3d2*legend.padding;h\x3d2*legend.padding;bounds.empty()||(view\x3d\nMath.ceil(bounds.width()+view),h\x3dMath.ceil(bounds.height()+h));\x22symbol\x22\x3d\x3d\x3ddatum.type\x26\x26legendEntryLayout(legend.items[0].items[0].items[0].items);\x22none\x22!\x3d\x3dorient\x26\x26(legend.x\x3dx\x3d0,legend.y\x3dy\x3d0);legend.width\x3dview;legend.height\x3dh;vegaScenegraph.boundStroke(bounds.set(x,y,x+view,y+h),legend);legend.mark.bounds.clear().union(bounds);return legend}function legendBounds(item,b){item.items.forEach(_\x3d\x3eb.union(_.bounds));b.x1\x3ditem.padding;b.y1\x3ditem.padding;return b}function legendTitleOffset(item,entry,title,\nanchor,y,lr,noBar){const vgrad\x3dtitle.datum.vgrad;item\x3d(\x22symbol\x22\x3d\x3d\x3ditem.datum.type||!lr\x26\x26vgrad||noBar?entry:entry.items[0]).bounds[y?\x22y2\x22:\x22x2\x22]-item.padding;entry\x3dvgrad\x26\x26lr?item:0;lr\x3dvgrad\x26\x26lr?0:item;title\x3d0\x3e\x3dy?0:vegaScenegraph.multiLineOffset(title);return Math.round(\x22start\x22\x3d\x3d\x3danchor?entry:\x22end\x22\x3d\x3d\x3danchor?lr-title:.5*(item-title))}function translate(view,item,dx,dy){item.x+\x3ddx;item.y+\x3ddy;item.bounds.translate(dx,dy);item.mark.bounds.translate(dx,dy);view.dirty(item)}function legendEntryLayout(entries){const widths\x3d\nentries.reduce((w,g)\x3d\x3e{w[g.column]\x3dMath.max(g.bounds.x2-g.x,w[g.column]||0);return w},{});entries.forEach(g\x3d\x3e{g.width\x3dwidths[g.column];g.height\x3dg.bounds.y2-g.y})}function titleLayout(view,mark,width,height,viewBounds){var group\x3dmark.items[0],orient\x3dgroup.orient,anchor\x3dgroup.anchor,offset\x3dgroup.offset,padding\x3dgroup.padding,title\x3dgroup.items[0].items[0],subtitle\x3dgroup.items[1]\x26\x26group.items[1].items[0],end\x3d\x22left\x22\x3d\x3d\x3dorient||\x22right\x22\x3d\x3d\x3dorient?height:width,start\x3d0,sy\x3dwidth\x3d0;\x22group\x22!\x3d\x3dgroup.frame?\x22left\x22\x3d\x3d\x3d\norient?(start\x3dviewBounds.y2,end\x3dviewBounds.y1):\x22right\x22\x3d\x3d\x3dorient?(start\x3dviewBounds.y1,end\x3dviewBounds.y2):(start\x3dviewBounds.x1,end\x3dviewBounds.x2):\x22left\x22\x3d\x3d\x3dorient\x26\x26(start\x3dheight,end\x3d0);height\x3d\x22start\x22\x3d\x3d\x3danchor?start:\x22end\x22\x3d\x3d\x3danchor?end:(start+end)/2;if(subtitle\x26\x26subtitle.text){switch(orient){case \x22top\x22:case \x22bottom\x22:sy\x3dtitle.bounds.height()+padding;break;case \x22left\x22:width\x3dtitle.bounds.width()+padding;break;case \x22right\x22:width\x3d-title.bounds.width()-padding}tempBounds.clear().union(subtitle.bounds);tempBounds.translate(width-\n(subtitle.x||0),sy-(subtitle.y||0));set(subtitle,\x22x\x22,width)|set(subtitle,\x22y\x22,sy)\x26\x26(view.dirty(subtitle),subtitle.bounds.clear().union(tempBounds),subtitle.mark.bounds.clear().union(tempBounds),view.dirty(subtitle));tempBounds.clear().union(subtitle.bounds)}else tempBounds.clear();tempBounds.union(title.bounds);switch(orient){case \x22top\x22:orient\x3dheight;viewBounds\x3dviewBounds.y1-tempBounds.height()-offset;break;case \x22left\x22:orient\x3dviewBounds.x1-tempBounds.width()-offset;viewBounds\x3dheight;break;case \x22right\x22:orient\x3d\nviewBounds.x2+tempBounds.width()+offset;viewBounds\x3dheight;break;case \x22bottom\x22:orient\x3dheight;viewBounds\x3dviewBounds.y2+offset;break;default:orient\x3dgroup.x,viewBounds\x3dgroup.y}set(group,\x22x\x22,orient)|set(group,\x22y\x22,viewBounds)\x26\x26(tempBounds.translate(orient,viewBounds),view.dirty(group),group.bounds.clear().union(tempBounds),mark.bounds.clear().union(tempBounds),view.dirty(group));return group.bounds}function ViewLayout(params){vegaDataflow.Transform.call(this,null,params)}function shouldReflow(group){return group\x26\x26\n\x22legend-entry\x22!\x3d\x3dgroup.mark.role}function layoutGroup(view,group,_){var items\x3dgroup.items,width\x3dMath.max(0,group.width||0),height\x3dMath.max(0,group.height||0),viewBounds\x3d(new vegaScenegraph.Bounds).set(0,0,width,height),xBounds\x3dviewBounds.clone(),yBounds\x3dviewBounds.clone(),legends\x3d[],orient$jscomp$0,n;var i\x3d0;for(n\x3ditems.length;i\x3cn;++i){var mark\x3ditems[i];switch(mark.role){case \x22axis\x22:var b$jscomp$0\x3disYAxis(mark)?xBounds:yBounds;b$jscomp$0.union(axisLayout(view,mark,width,height));break;case \x22title\x22:var title\x3d\nmark;break;case \x22legend\x22:legends.push(legendLayout(view,mark));break;case \x22frame\x22:case \x22scope\x22:case \x22row-header\x22:case \x22row-footer\x22:case \x22row-title\x22:case \x22column-header\x22:case \x22column-footer\x22:case \x22column-title\x22:xBounds.union(mark.bounds);yBounds.union(mark.bounds);break;default:viewBounds.union(mark.bounds)}}if(legends.length){const l\x3d{};legends.forEach(item\x3d\x3e{orient$jscomp$0\x3ditem.orient||\x22right\x22;\x22none\x22!\x3d\x3dorient$jscomp$0\x26\x26(l[orient$jscomp$0]||(l[orient$jscomp$0]\x3d[])).push(item)});for(const orient in l)items\x3d\nl[orient],gridLayout(view,items,legendParams(items,orient,_.legends,xBounds,yBounds,width,height));legends.forEach(item\x3d\x3e{const b\x3ditem.bounds;b.equals(item._bounds)||(item.bounds\x3ditem._bounds,view.dirty(item),item.bounds\x3db,view.dirty(item));if(_.autosize\x26\x26\x22fit\x22\x3d\x3d\x3d_.autosize.type)switch(item.orient){case \x22left\x22:case \x22right\x22:viewBounds.add(b.x1,0).add(b.x2,0);break;case \x22top\x22:case \x22bottom\x22:viewBounds.add(0,b.y1).add(0,b.y2)}else viewBounds.union(b)})}viewBounds.union(xBounds).union(yBounds);title\x26\x26\nviewBounds.union(titleLayout(view,title,width,height,viewBounds));group.clip\x26\x26viewBounds.set(0,0,group.width||0,group.height||0);viewSizeLayout(view,group,viewBounds,_)}function viewSizeLayout(view,group,viewBounds,_){_\x3d_.autosize||{};const type\x3d_.type;if(!(1\x3eview._autosize)\x26\x26type){var viewWidth\x3dview._width,viewHeight\x3dview._height,width\x3dMath.max(0,group.width||0),left\x3dMath.max(0,Math.ceil(-viewBounds.x1));group\x3dMath.max(0,group.height||0);var top\x3dMath.max(0,Math.ceil(-viewBounds.y1)),right\x3dMath.max(0,\nMath.ceil(viewBounds.x2-width));viewBounds\x3dMath.max(0,Math.ceil(viewBounds.y2-group));if(\x22padding\x22\x3d\x3d\x3d_.contains){const padding\x3dview.padding();viewWidth-\x3dpadding.left+padding.right;viewHeight-\x3dpadding.top+padding.bottom}\x22none\x22\x3d\x3d\x3dtype?(top\x3dleft\x3d0,width\x3dviewWidth,group\x3dviewHeight):\x22fit\x22\x3d\x3d\x3dtype?(width\x3dMath.max(0,viewWidth-left-right),group\x3dMath.max(0,viewHeight-top-viewBounds)):\x22fit-x\x22\x3d\x3d\x3dtype?(width\x3dMath.max(0,viewWidth-left-right),viewHeight\x3dgroup+top+viewBounds):\x22fit-y\x22\x3d\x3d\x3dtype?(viewWidth\x3dwidth+left+\nright,group\x3dMath.max(0,viewHeight-top-viewBounds)):\x22pad\x22\x3d\x3d\x3dtype\x26\x26(viewWidth\x3dwidth+left+right,viewHeight\x3dgroup+top+viewBounds);view._resizeView(viewWidth,viewHeight,width,group,[left,top],_.resize)}}vegaUtil.inherits(Bound,vegaDataflow.Transform,{transform(_,pulse){const view\x3dpulse.dataflow,mark\x3d_.mark,type\x3dmark.marktype,entry\x3dvegaScenegraph.Marks[type],bound\x3dentry.bound;let markBounds\x3dmark.bounds,rebound;if(entry.nested)mark.items.length\x26\x26view.dirty(mark.items[0]),markBounds\x3dboundItem(mark,bound),\nmark.items.forEach(item\x3d\x3e{item.bounds.clear().union(markBounds)});else if(\x22group\x22\x3d\x3d\x3dtype||_.modified())switch(pulse.visit(pulse.MOD,item\x3d\x3eview.dirty(item)),markBounds.clear(),mark.items.forEach(item\x3d\x3emarkBounds.union(boundItem(item,bound))),mark.role){case \x22axis\x22:case \x22legend\x22:case \x22title\x22:pulse.reflow()}else rebound\x3dpulse.changed(pulse.REM),pulse.visit(pulse.ADD,item\x3d\x3e{markBounds.union(boundItem(item,bound))}),pulse.visit(pulse.MOD,item\x3d\x3e{rebound\x3drebound||markBounds.alignsWith(item.bounds);view.dirty(item);\nmarkBounds.union(boundItem(item,bound))}),rebound\x26\x26(markBounds.clear(),mark.items.forEach(item\x3d\x3emarkBounds.union(item.bounds)));vegaScenegraph.boundClip(mark);return pulse.modifies(\x22bounds\x22)}});Identifier.Definition\x3d{type:\x22Identifier\x22,metadata:{modifies:!0},params:[{name:\x22as\x22,type:\x22string\x22,required:!0}]};vegaUtil.inherits(Identifier,vegaDataflow.Transform,{transform(_,pulse){const counter\x3dgetCounter(pulse.dataflow),as\x3d_.as;let id\x3dcounter.value;pulse.visit(pulse.ADD,t\x3d\x3et[as]\x3dt[as]||++id);counter.set(this.value\x3d\nid);return pulse}});vegaUtil.inherits(Mark,vegaDataflow.Transform,{transform(_,pulse){let mark\x3dthis.value;mark||(mark\x3dpulse.dataflow.scenegraph().mark(_.markdef,lookup(_),_.index),mark.group.context\x3d_.context,_.context.group||(_.context.group\x3dmark.group),mark.source\x3dthis.source,mark.clip\x3d_.clip,mark.interactive\x3d_.interactive,this.value\x3dmark);const Init\x3d\x22group\x22\x3d\x3d\x3dmark.marktype?vegaScenegraph.GroupItem:vegaScenegraph.Item;pulse.visit(pulse.ADD,item\x3d\x3eInit.call(item,mark));if(_.modified(\x22clip\x22)||_.modified(\x22interactive\x22))mark.clip\x3d\n_.clip,mark.interactive\x3d!!_.interactive,mark.zdirty\x3d!0,pulse.reflow();mark.items\x3dpulse.source;return pulse}});const methods\x3d{parity:items\x3d\x3eitems.filter((item,i)\x3d\x3ei%2?item.opacity\x3d0:1),greedy:(items,sep)\x3d\x3e{let a;return items.filter((b,i)\x3d\x3ei\x26\x26intersect(a.bounds,b.bounds,sep)?b.opacity\x3d0:(a\x3db,1))}},intersect\x3d(a,b,sep)\x3d\x3esep\x3eMath.max(b.x1-a.x2,a.x1-b.x2,b.y1-a.y2,a.y1-b.y2),hasOverlap\x3d(items,pad)\x3d\x3e{for(var i\x3d1,n\x3ditems.length,a\x3ditems[0].bounds;i\x3cn;++i)if(intersect(a,a\x3ditems[i].bounds,pad))return!0},hasBounds\x3d\nitem\x3d\x3e{item\x3ditem.bounds;return 1\x3citem.width()\x26\x261\x3citem.height()},boundTest\x3d(scale,orient,tolerance)\x3d\x3e{scale\x3dscale.range();var b\x3dnew vegaScenegraph.Bounds;\x22top\x22\x3d\x3d\x3dorient||\x22bottom\x22\x3d\x3d\x3dorient?b.set(scale[0],-Infinity,scale[1],Infinity):b.set(-Infinity,scale[0],Infinity,scale[1]);b.expand(tolerance||1);return item\x3d\x3eb.encloses(item.bounds)},reset\x3dsource\x3d\x3e{source.forEach(item\x3d\x3eitem.opacity\x3d1);return source};vegaUtil.inherits(Overlap,vegaDataflow.Transform,{transform(_,pulse){const reduce\x3dmethods[_.method]||\nmethods.parity,sep\x3d_.separation||0;let source\x3dpulse.materialize(pulse.SOURCE).source,items,test;if(source\x26\x26source.length){if(!_.method)return _.modified(\x22method\x22)\x26\x26(reset(source),pulse\x3dpulse.reflow(_.modified()).modifies(\x22opacity\x22)),pulse;source\x3dsource.filter(hasBounds);if(source.length){_.sort\x26\x26(source\x3dsource.slice().sort(_.sort));items\x3dreset(source);pulse\x3dpulse.reflow(_.modified()).modifies(\x22opacity\x22);if(3\x3c\x3ditems.length\x26\x26hasOverlap(items,sep)){do items\x3dreduce(items,sep);while(3\x3c\x3ditems.length\x26\x26hasOverlap(items,\nsep));3\x3eitems.length\x26\x26!vegaUtil.peek(source).opacity\x26\x26(1\x3citems.length\x26\x26(vegaUtil.peek(items).opacity\x3d0),vegaUtil.peek(source).opacity\x3d1)}_.boundScale\x26\x260\x3c\x3d_.boundTolerance\x26\x26(test\x3dboundTest(_.boundScale,_.boundOrient,+_.boundTolerance),source.forEach(item\x3d\x3e{test(item)||(item.opacity\x3d0)}));var bounds\x3ditems[0].mark.bounds.clear();source.forEach(item\x3d\x3e{item.opacity\x26\x26bounds.union(item.bounds)});return pulse}}}});vegaUtil.inherits(Render,vegaDataflow.Transform,{transform(_,pulse){const view\x3dpulse.dataflow;\npulse.visit(pulse.ALL,item\x3d\x3eview.dirty(item));pulse.fields\x26\x26pulse.fields.zindex\x26\x26(_\x3dpulse.source\x26\x26pulse.source[0])\x26\x26(_.mark.zdirty\x3d!0)}});const tempBounds\x3dnew vegaScenegraph.Bounds,min\x3d(a,b)\x3d\x3eMath.floor(Math.min(a,b)),max$jscomp$0\x3d(a,b)\x3d\x3eMath.ceil(Math.max(a,b));vegaUtil.inherits(ViewLayout,vegaDataflow.Transform,{transform(_,pulse){const view\x3dpulse.dataflow;_.mark.items.forEach(group\x3d\x3e{if(_.layout){var opt\x3d_.layout;var views\x3dgroup.items;for(var n\x3dviews.length,i\x3d0,mark,items,views$jscomp$0\x3d{marks:[],\nrowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};i\x3cn;++i)if(mark\x3dviews[i],items\x3dmark.items,\x22group\x22\x3d\x3d\x3dmark.marktype)switch(mark.role){case \x22axis\x22:case \x22legend\x22:case \x22title\x22:break;case \x22row-header\x22:views$jscomp$0.rowheaders.push(...items);break;case \x22row-footer\x22:views$jscomp$0.rowfooters.push(...items);break;case \x22column-header\x22:views$jscomp$0.colheaders.push(...items);break;case \x22column-footer\x22:views$jscomp$0.colfooters.push(...items);break;case \x22row-title\x22:views$jscomp$0.rowtitle\x3d\nitems[0];break;case \x22column-title\x22:views$jscomp$0.coltitle\x3ditems[0];break;default:views$jscomp$0.marks.push(...items)}views\x3dviews$jscomp$0;items\x3dviews.marks;views$jscomp$0\x3d\x22flush\x22\x3d\x3d\x3dopt.bounds?boundFlush:boundFull;n\x3dopt.offset;var ncols\x3dopt.columns||items.length,nrows\x3d0\x3e\x3dncols?1:Math.ceil(items.length/ncols),cells\x3dnrows*ncols;i\x3dgridLayout(view,items,opt);i.empty()\x26\x26i.set(0,0,0,0);if(views.rowheaders){mark\x3dget(opt.headerBand,\x22row\x22,null);var x\x3dlayoutHeaders(view,views.rowheaders,items,ncols,nrows,-get(n,\n\x22rowHeader\x22),min,0,views$jscomp$0,\x22x1\x22,0,ncols,1,mark)}if(views.colheaders){mark\x3dget(opt.headerBand,\x22column\x22,null);var y\x3dlayoutHeaders(view,views.colheaders,items,ncols,ncols,-get(n,\x22columnHeader\x22),min,1,views$jscomp$0,\x22y1\x22,0,1,ncols,mark)}if(views.rowfooters){mark\x3dget(opt.footerBand,\x22row\x22,null);var x2\x3dlayoutHeaders(view,views.rowfooters,items,ncols,nrows,get(n,\x22rowFooter\x22),max$jscomp$0,0,views$jscomp$0,\x22x2\x22,ncols-1,ncols,1,mark)}if(views.colfooters){mark\x3dget(opt.footerBand,\x22column\x22,null);var y2\x3d\nlayoutHeaders(view,views.colfooters,items,ncols,ncols,get(n,\x22columnFooter\x22),max$jscomp$0,1,views$jscomp$0,\x22y2\x22,cells-ncols,1,ncols,mark)}views.rowtitle\x26\x26(mark\x3dget(opt.titleAnchor,\x22row\x22),items\x3dget(n,\x22rowTitle\x22),items\x3d\x22end\x22\x3d\x3d\x3dmark?x2+items:x-items,mark\x3dget(opt.titleBand,\x22row\x22,.5),layoutTitle(view,views.rowtitle,items,0,i,mark));views.coltitle\x26\x26(mark\x3dget(opt.titleAnchor,\x22column\x22),items\x3dget(n,\x22columnTitle\x22),items\x3d\x22end\x22\x3d\x3d\x3dmark?y2+items:y-items,mark\x3dget(opt.titleBand,\x22column\x22,.5),layoutTitle(view,views.coltitle,\nitems,1,i,mark))}layoutGroup(view,group,_)});return shouldReflow(_.mark.group)?pulse.reflow():pulse}});exports.bound\x3dBound;exports.identifier\x3dIdentifier;exports.mark\x3dMark;exports.overlap\x3dOverlap;exports.render\x3dRender;exports.viewlayout\x3dViewLayout;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_encode$build$vega_encode.js", true , "shadow$provide.module$node_modules$vega_encode$build$vega_encode\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$d3_interpolate$dist$d3_interpolate\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-dataflow vega-scale vega-util d3-array d3-interpolate\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.d3,global.d3))})(this,function(exports,vegaDataflow,vegaScale,vegaUtil,d3Array,d3Interpolate){function AxisTicks(params){vegaDataflow.Transform.call(this,null,params)}function DataJoin(params){vegaDataflow.Transform.call(this,null,params)}\nfunction defaultItemCreate(){return vegaDataflow.ingest({})}function newMap(key){const map\x3dvegaUtil.fastmap().test(t\x3d\x3et.exit);map.lookup\x3dt\x3d\x3emap.get(key(t));return map}function Encode(params){vegaDataflow.Transform.call(this,null,params)}function LegendEntries(params){vegaDataflow.Transform.call(this,[],params)}function LinkPath(params){vegaDataflow.Transform.call(this,{},params)}function Pie(params){vegaDataflow.Transform.call(this,null,params)}function includePad(type){return vegaScale.isContinuous(type)\x26\x26\ntype!\x3d\x3dvegaScale.Sequential}function Scale(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function domainCheck(type,domain,df){vegaScale.isLogarithmic(type)\x26\x26Math.abs(domain.reduce((s,v)\x3d\x3es+(0\x3ev?-1:0\x3cv?1:0),0))!\x3d\x3ddomain.length\x26\x26df.warn(\x22Log scale domain includes zero: \x22+vegaUtil.stringValue(domain));return domain}function adjustScheme(scheme,extent,reverse){return vegaUtil.isFunction(scheme)\x26\x26(extent||reverse)?vegaScale.interpolateRange(scheme,flip(extent||[0,1],reverse)):\nscheme}function flip(array,reverse){return reverse?array.slice().reverse():array}function SortItems(params){vegaDataflow.Transform.call(this,null,params)}function Stack(params){vegaDataflow.Transform.call(this,null,params)}function stackCenter(group,max,field,y0,y1){max\x3d(max-group.sum)/2;for(var m\x3dgroup.length,j\x3d0,t;j\x3cm;++j)t\x3dgroup[j],t[y0]\x3dmax,t[y1]\x3dmax+\x3dMath.abs(field(t))}function stackNormalize(group,max,field,y0,y1){max\x3d1/group.sum;for(var last\x3d0,m\x3dgroup.length,j\x3d0,v\x3d0,t;j\x3cm;++j)t\x3dgroup[j],t[y0]\x3d\nlast,t[y1]\x3dlast\x3dmax*(v+\x3dMath.abs(field(t)))}function stackZero(group,max,field,y0,y1){for(var lastNeg\x3dmax\x3d0,m\x3dgroup.length,j\x3d0,v,t;j\x3cm;++j)t\x3dgroup[j],v\x3d+field(t),0\x3ev?(t[y0]\x3dlastNeg,t[y1]\x3dlastNeg+\x3dv):(t[y0]\x3dmax,t[y1]\x3dmax+\x3dv)}function partition(data,groupby,sort,field){var groups\x3d[],get\x3df\x3d\x3ef(t),n;if(null\x3d\x3dgroupby)groups.push(data.slice());else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],groups.push(g));g.push(t)}}get\x3dk\x3d0;for(data\x3dgroups.length;k\x3c\ndata;++k){g\x3dgroups[k];groupby\x3di\x3d0;for(n\x3dg.length;i\x3cn;++i)groupby+\x3dMath.abs(field(g[i]));g.sum\x3dgroupby;groupby\x3eget\x26\x26(get\x3dgroupby);sort\x26\x26g.sort(sort)}groups.max\x3dget;return groups}vegaUtil.inherits(AxisTicks,vegaDataflow.Transform,{transform(_,pulse){if(this.value\x26\x26!_.modified())return pulse.StopPropagation;var locale\x3dpulse.dataflow.locale();pulse\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);var ticks\x3dthis.value,scale\x3d_.scale,count\x3dvegaScale.tickCount(scale,null\x3d\x3d_.count?_.values?_.values.length:10:_.count,\n_.minstep),format\x3d_.format||vegaScale.tickFormat(locale,scale,count,_.formatSpecifier,_.formatType,!!_.values),values\x3d_.values?vegaScale.validTicks(scale,_.values,count):vegaScale.tickValues(scale,count);ticks\x26\x26(pulse.rem\x3dticks);ticks\x3dvalues.map((value,i)\x3d\x3evegaDataflow.ingest({index:i/(values.length-1||1),value,label:format(value)}));_.extra\x26\x26ticks.length\x26\x26ticks.push(vegaDataflow.ingest({index:-1,extra:{value:ticks[0].value},label:\x22\x22}));pulse.source\x3dticks;this.value\x3dpulse.add\x3dticks;return pulse}});\nvegaUtil.inherits(DataJoin,vegaDataflow.Transform,{transform(_,pulse){var df\x3dpulse.dataflow,out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),item\x3d_.item||defaultItemCreate,key\x3d_.key||vegaDataflow.tupleid,map\x3dthis.value;vegaUtil.isArray(out.encode)\x26\x26(out.encode\x3dnull);map\x26\x26(_.modified(\x22key\x22)||pulse.modified(key))\x26\x26vegaUtil.error(\x22DataJoin does not support modified key function or fields.\x22);map||(pulse\x3dpulse.addAll(),this.value\x3dmap\x3dnewMap(key));pulse.visit(pulse.ADD,t\x3d\x3e{const k\x3dkey(t);let x\x3dmap.get(k);\nx?x.exit?(map.empty--,out.add.push(x)):out.mod.push(x):(x\x3ditem(t),map.set(k,x),out.add.push(x));x.datum\x3dt;x.exit\x3d!1});pulse.visit(pulse.MOD,t\x3d\x3e{var k\x3dkey(t);if(k\x3dmap.get(k))k.datum\x3dt,out.mod.push(k)});pulse.visit(pulse.REM,t\x3d\x3e{var k\x3dkey(t);k\x3dmap.get(k);t!\x3d\x3dk.datum||k.exit||(out.rem.push(k),k.exit\x3d!0,++map.empty)});pulse.changed(pulse.ADD_MOD)\x26\x26out.modifies(\x22datum\x22);(pulse.clean()||_.clean\x26\x26map.empty\x3edf.cleanThreshold)\x26\x26df.runAfter(map.clean);return out}});vegaUtil.inherits(Encode,vegaDataflow.Transform,\n{transform(_,pulse){var out\x3dpulse.fork(pulse.ADD_REM),fmod\x3d_.mod||!1,encoders\x3d_.encoders,encode\x3dpulse.encode;if(vegaUtil.isArray(encode))if(out.changed()||encode.every(e\x3d\x3eencoders[e]))encode\x3dencode[0],out.encode\x3dnull;else return pulse.StopPropagation;var reenter\x3d\x22enter\x22\x3d\x3d\x3dencode,update\x3dencoders.update||vegaUtil.falsy,enter\x3dencoders.enter||vegaUtil.falsy,exit\x3dencoders.exit||vegaUtil.falsy,set\x3d(encode\x26\x26!reenter?encoders[encode]:update)||vegaUtil.falsy;pulse.changed(pulse.ADD)\x26\x26(pulse.visit(pulse.ADD,\nt\x3d\x3e{enter(t,_);update(t,_)}),out.modifies(enter.output),out.modifies(update.output),set!\x3d\x3dvegaUtil.falsy\x26\x26set!\x3d\x3dupdate\x26\x26(pulse.visit(pulse.ADD,t\x3d\x3e{set(t,_)}),out.modifies(set.output)));pulse.changed(pulse.REM)\x26\x26exit!\x3d\x3dvegaUtil.falsy\x26\x26(pulse.visit(pulse.REM,t\x3d\x3e{exit(t,_)}),out.modifies(exit.output));if(reenter||set!\x3d\x3dvegaUtil.falsy)encode\x3dpulse.MOD|(_.modified()?pulse.REFLOW:0),reenter?(pulse.visit(encode,t\x3d\x3e{const mod\x3denter(t,_)||fmod;(set(t,_)||mod)\x26\x26out.mod.push(t)}),out.mod.length\x26\x26out.modifies(enter.output)):\npulse.visit(encode,t\x3d\x3e{(set(t,_)||fmod)\x26\x26out.mod.push(t)}),out.mod.length\x26\x26out.modifies(set.output);return out.changed()?out:pulse.StopPropagation}});vegaUtil.inherits(LegendEntries,vegaDataflow.Transform,{transform(_,pulse){if(null!\x3dthis.value\x26\x26!_.modified())return pulse.StopPropagation;var locale\x3dpulse.dataflow.locale(),out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),items\x3dthis.value,type\x3d_.type||vegaScale.SymbolLegend,scale\x3d_.scale,limit\x3d+_.limit,count\x3dvegaScale.tickCount(scale,null\x3d\x3d_.count?5:\n_.count,_.minstep),lskip\x3d!!_.values||type\x3d\x3d\x3dvegaScale.SymbolLegend,format\x3d_.format||vegaScale.labelFormat(locale,scale,count,type,_.formatSpecifier,_.formatType,lskip),values\x3d_.values||vegaScale.labelValues(scale,count),size;items\x26\x26(out.rem\x3ditems);if(type\x3d\x3d\x3dvegaScale.SymbolLegend){if(limit\x26\x26values.length\x3elimit){pulse.dataflow.warn(\x22Symbol legend count exceeds limit, filtering items.\x22);items\x3dvalues.slice(0,limit-1);var ellipsis\x3d!0}else items\x3dvalues;if(vegaUtil.isFunction(size\x3d_.size)){_.values||0!\x3d\x3d\nscale(items[0])||(items\x3ditems.slice(1));var offset\x3ditems.reduce((max,value)\x3d\x3eMath.max(max,size(value,_)),0)}else size\x3dvegaUtil.constant(offset\x3dsize||8);items\x3ditems.map((value,index)\x3d\x3evegaDataflow.ingest({index,label:format(value,index,items),value,offset,size:size(value,_)}));ellipsis\x26\x26(ellipsis\x3dvalues[items.length],items.push(vegaDataflow.ingest({index:items.length,label:`\\u2026${values.length-items.length} entries`,value:ellipsis,offset,size:size(ellipsis,_)})))}else if(type\x3d\x3d\x3dvegaScale.GradientLegend){pulse\x3d\nscale.domain();var fraction\x3dvegaScale.scaleFraction(scale,pulse[0],vegaUtil.peek(pulse));3\x3evalues.length\x26\x26!_.values\x26\x26pulse[0]!\x3d\x3dvegaUtil.peek(pulse)\x26\x26(values\x3d[pulse[0],vegaUtil.peek(pulse)]);items\x3dvalues.map((value,index)\x3d\x3evegaDataflow.ingest({index,label:format(value,index,values),value,perc:fraction(value)}))}else size\x3dvalues.length-1,fraction\x3dvegaScale.labelFraction(scale),items\x3dvalues.map((value,index)\x3d\x3evegaDataflow.ingest({index,label:format(value,index,values),value,perc:index?fraction(value):\n0,perc2:index\x3d\x3d\x3dsize?1:fraction(values[index+1])}));out.source\x3ditems;this.value\x3dout.add\x3ditems;return out}});const sourceX\x3dt\x3d\x3et.source.x,sourceY\x3dt\x3d\x3et.source.y,targetX\x3dt\x3d\x3et.target.x,targetY\x3dt\x3d\x3et.target.y;LinkPath.Definition\x3d{type:\x22LinkPath\x22,metadata:{modifies:!0},params:[{name:\x22sourceX\x22,type:\x22field\x22,\x22default\x22:\x22source.x\x22},{name:\x22sourceY\x22,type:\x22field\x22,\x22default\x22:\x22source.y\x22},{name:\x22targetX\x22,type:\x22field\x22,\x22default\x22:\x22target.x\x22},{name:\x22targetY\x22,type:\x22field\x22,\x22default\x22:\x22target.y\x22},{name:\x22orient\x22,type:\x22enum\x22,\n\x22default\x22:\x22vertical\x22,values:[\x22horizontal\x22,\x22vertical\x22,\x22radial\x22]},{name:\x22shape\x22,type:\x22enum\x22,\x22default\x22:\x22line\x22,values:[\x22line\x22,\x22arc\x22,\x22curve\x22,\x22diagonal\x22,\x22orthogonal\x22]},{name:\x22require\x22,type:\x22signal\x22},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};vegaUtil.inherits(LinkPath,vegaDataflow.Transform,{transform(_,pulse){var sx\x3d_.sourceX||sourceX,sy\x3d_.sourceY||sourceY,tx\x3d_.targetX||targetX,ty\x3d_.targetY||targetY,as\x3d_.as||\x22path\x22,shape\x3d_.shape||\x22line\x22,path\x3dPaths.get(shape+\x22-\x22+(_.orient||\x22vertical\x22))||Paths.get(shape);\npath||vegaUtil.error(\x22LinkPath unsupported type: \x22+_.shape+(_.orient?\x22-\x22+_.orient:\x22\x22));pulse.visit(pulse.SOURCE,t\x3d\x3e{t[as]\x3dpath(sx(t),sy(t),tx(t),ty(t))});return pulse.reflow(_.modified()).modifies(as)}});const line\x3d(sx,sy,tx,ty)\x3d\x3e\x22M\x22+sx+\x22,\x22+sy+\x22L\x22+tx+\x22,\x22+ty,arc\x3d(sx,sy,tx,ty)\x3d\x3e{var dx\x3dtx-sx,dy\x3dty-sy,rr\x3dMath.sqrt(dx*dx+dy*dy)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22A\x22+rr+\x22,\x22+rr+\x22 \x22+180*Math.atan2(dy,dx)/Math.PI+\x22 0 1 \x22+tx+\x22,\x22+ty},curve\x3d(sx,sy,tx,ty)\x3d\x3e{var dx\x3dtx-sx;const dy\x3dty-sy,ix\x3d.2*(dx+dy);dx\x3d.2*(dy-dx);return\x22M\x22+\nsx+\x22,\x22+sy+\x22C\x22+(sx+ix)+\x22,\x22+(sy+dx)+\x22 \x22+(tx+dx)+\x22,\x22+(ty-ix)+\x22 \x22+tx+\x22,\x22+ty},Paths\x3dvegaUtil.fastmap({line,\x22line-radial\x22:(sa,sr,ta,tr)\x3d\x3eline(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),arc,\x22arc-radial\x22:(sa,sr,ta,tr)\x3d\x3earc(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),curve,\x22curve-radial\x22:(sa,sr,ta,tr)\x3d\x3ecurve(sr*Math.cos(sa),sr*Math.sin(sa),tr*Math.cos(ta),tr*Math.sin(ta)),\x22orthogonal-horizontal\x22:(sx,sy,tx,ty)\x3d\x3e\x22M\x22+sx+\x22,\x22+sy+\x22V\x22+ty+\x22H\x22+tx,\x22orthogonal-vertical\x22:(sx,\nsy,tx,ty)\x3d\x3e\x22M\x22+sx+\x22,\x22+sy+\x22H\x22+tx+\x22V\x22+ty,\x22orthogonal-radial\x22:(sa,sr,ta,tr)\x3d\x3e{const tc\x3dMath.cos(ta),ts\x3dMath.sin(ta);return\x22M\x22+sr*Math.cos(sa)+\x22,\x22+sr*Math.sin(sa)+\x22A\x22+sr+\x22,\x22+sr+\x22 0 0,\x22+((Math.abs(ta-sa)\x3eMath.PI?ta\x3c\x3dsa:ta\x3esa)?1:0)+\x22 \x22+sr*tc+\x22,\x22+sr*ts+\x22L\x22+tr*tc+\x22,\x22+tr*ts},\x22diagonal-horizontal\x22:(sx,sy,tx,ty)\x3d\x3e{const m\x3d(sx+tx)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22C\x22+m+\x22,\x22+sy+\x22 \x22+m+\x22,\x22+ty+\x22 \x22+tx+\x22,\x22+ty},\x22diagonal-vertical\x22:(sx,sy,tx,ty)\x3d\x3e{const m\x3d(sy+ty)/2;return\x22M\x22+sx+\x22,\x22+sy+\x22C\x22+sx+\x22,\x22+m+\x22 \x22+tx+\x22,\x22+m+\x22 \x22+tx+\x22,\x22+ty},\x22diagonal-radial\x22:(sa,\nsr,ta,tr)\x3d\x3e{const sc\x3dMath.cos(sa);sa\x3dMath.sin(sa);const tc\x3dMath.cos(ta);ta\x3dMath.sin(ta);const mr\x3d(sr+tr)/2;return\x22M\x22+sr*sc+\x22,\x22+sr*sa+\x22C\x22+mr*sc+\x22,\x22+mr*sa+\x22 \x22+mr*tc+\x22,\x22+mr*ta+\x22 \x22+tr*tc+\x22,\x22+tr*ta}});Pie.Definition\x3d{type:\x22Pie\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22startAngle\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22endAngle\x22,type:\x22number\x22,\x22default\x22:6.283185307179586},{name:\x22sort\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22startAngle\x22,\x22endAngle\x22]}]};\nvegaUtil.inherits(Pie,vegaDataflow.Transform,{transform(_,pulse){var as\x3d_.as||[\x22startAngle\x22,\x22endAngle\x22],startAngle\x3das[0],endAngle\x3das[1],start\x3d_.startAngle||0,stop\x3dnull!\x3d_.endAngle?_.endAngle:2*Math.PI,data\x3dpulse.source,values\x3ddata.map(_.field||vegaUtil.one),n\x3dvalues.length,a$jscomp$0\x3dstart;start\x3d(stop-start)/d3Array.sum(values);stop\x3dd3Array.range(n);var i;_.sort\x26\x26stop.sort((a,b)\x3d\x3evalues[a]-values[b]);for(i\x3d0;i\x3cn;++i){var v\x3dvalues[stop[i]];var t\x3ddata[stop[i]];t[startAngle]\x3da$jscomp$0;t[endAngle]\x3da$jscomp$0+\x3d\nv*start}this.value\x3dvalues;return pulse.reflow(_.modified()).modifies(as)}});const SKIP\x3dvegaUtil.toSet(\x22set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma\x22.split(\x22 \x22));vegaUtil.inherits(Scale,vegaDataflow.Transform,{transform(_,pulse){var df\x3dpulse.dataflow,scale\x3dthis.value;var key\x3d_.type;var d\x3d\x22\x22;if(key\x3d\x3d\x3dvegaScale.Sequential)key\x3dvegaScale.Sequential+\x22-\x22+vegaScale.Linear;\nelse{var JSCompiler_inline_result\x3d_.type;if(JSCompiler_inline_result\x3dvegaScale.isContinuous(JSCompiler_inline_result)\x26\x26JSCompiler_inline_result!\x3d\x3dvegaScale.Time\x26\x26JSCompiler_inline_result!\x3d\x3dvegaScale.UTC\x26\x26(_.scheme||_.range\x26\x26_.range.length\x26\x26_.range.every(vegaUtil.isString)))d\x3d_.rawDomain?_.rawDomain.length:_.domain?_.domain.length+ +(null!\x3d_.domainMid):0,d\x3d2\x3d\x3d\x3dd?vegaScale.Sequential+\x22-\x22:3\x3d\x3d\x3dd?vegaScale.Diverging+\x22-\x22:\x22\x22;key\x3d(d+key||vegaScale.Linear).toLowerCase()}scale\x26\x26key\x3d\x3d\x3dscale.type||(this.value\x3d\nscale\x3dvegaScale.scale(key)());for(key in _)SKIP[key]||\x22padding\x22\x3d\x3d\x3dkey\x26\x26includePad(scale.type)||(vegaUtil.isFunction(scale[key])?scale[key](_[key]):df.warn(\x22Unsupported scale property: \x22+key));d\x3dkey\x3dscale;(JSCompiler_inline_result\x3d_.domainRaw)?(scale.domain(domainCheck(scale.type,JSCompiler_inline_result,df)),JSCompiler_inline_result\x3dJSCompiler_inline_result.length):JSCompiler_inline_result\x3d-1;if(-1\x3cJSCompiler_inline_result)df\x3dJSCompiler_inline_result;else{var domain\x3d_.domain;JSCompiler_inline_result\x3d\nscale.type;var JSCompiler_temp;!(JSCompiler_temp\x3d_.zero)\x26\x26(JSCompiler_temp\x3dvoid 0\x3d\x3d\x3d_.zero)\x26\x26(JSCompiler_temp\x3dscale.type,JSCompiler_temp\x3d!scale.bins\x26\x26(JSCompiler_temp\x3d\x3d\x3dvegaScale.Linear||JSCompiler_temp\x3d\x3d\x3dvegaScale.Pow||JSCompiler_temp\x3d\x3d\x3dvegaScale.Sqrt));if(domain){if(includePad(JSCompiler_inline_result)\x26\x26_.padding\x26\x26domain[0]!\x3d\x3dvegaUtil.peek(domain)){var range\x3d_.range,pad\x3d_.padding;var n\x3d_.exponent;var constant\x3d_.constant;range\x3dMath.abs(vegaUtil.peek(range)-range[0]);pad\x3drange/(range-2*pad);n\x3dJSCompiler_inline_result\x3d\x3d\x3d\nvegaScale.Log?vegaUtil.zoomLog(domain,null,pad):JSCompiler_inline_result\x3d\x3d\x3dvegaScale.Sqrt?vegaUtil.zoomPow(domain,null,pad,.5):JSCompiler_inline_result\x3d\x3d\x3dvegaScale.Pow?vegaUtil.zoomPow(domain,null,pad,n||1):JSCompiler_inline_result\x3d\x3d\x3dvegaScale.Symlog?vegaUtil.zoomSymlog(domain,null,pad,constant||1):vegaUtil.zoomLinear(domain,null,pad);domain\x3ddomain.slice();domain[0]\x3dn[0];domain[domain.length-1]\x3dn[1]}if(JSCompiler_temp||null!\x3d_.domainMin||null!\x3d_.domainMax||null!\x3d_.domainMid)n\x3d(domain\x3ddomain.slice()).length-\n1||1,JSCompiler_temp\x26\x26(0\x3cdomain[0]\x26\x26(domain[0]\x3d0),0\x3edomain[n]\x26\x26(domain[n]\x3d0)),null!\x3d_.domainMin\x26\x26(domain[0]\x3d_.domainMin),null!\x3d_.domainMax\x26\x26(domain[n]\x3d_.domainMax),null!\x3d_.domainMid\x26\x26(JSCompiler_temp\x3d_.domainMid,constant\x3dJSCompiler_temp\x3edomain[n]?n+1:JSCompiler_temp\x3cdomain[0]?0:n,constant!\x3d\x3dn\x26\x26df.warn(\x22Scale domainMid exceeds domain min or max.\x22,JSCompiler_temp),domain.splice(constant,0,JSCompiler_temp));scale.domain(domainCheck(JSCompiler_inline_result,domain,df));JSCompiler_inline_result\x3d\x3d\x3dvegaScale.Ordinal\x26\x26\nscale.unknown(_.domainImplicit?vegaScale.scaleImplicit:void 0);_.nice\x26\x26scale.nice\x26\x26scale.nice(!0!\x3d\x3d_.nice\x26\x26vegaScale.tickCount(scale,_.nice)||null);df\x3ddomain.length}else df\x3d0}(JSCompiler_inline_result\x3d_.bins)\x26\x26!vegaUtil.isArray(JSCompiler_inline_result)\x26\x26(JSCompiler_temp\x3dd.domain(),scale\x3dJSCompiler_temp[0],JSCompiler_temp\x3dvegaUtil.peek(JSCompiler_temp),domain\x3dJSCompiler_inline_result.step,n\x3dnull\x3d\x3dJSCompiler_inline_result.start?scale:JSCompiler_inline_result.start,JSCompiler_inline_result\x3dnull\x3d\x3dJSCompiler_inline_result.stop?\nJSCompiler_temp:JSCompiler_inline_result.stop,domain||vegaUtil.error(\x22Scale bins parameter missing step property.\x22),n\x3cscale\x26\x26(n\x3ddomain*Math.ceil(scale/domain)),JSCompiler_inline_result\x3eJSCompiler_temp\x26\x26(JSCompiler_inline_result\x3ddomain*Math.floor(JSCompiler_temp/domain)),JSCompiler_inline_result\x3dd3Array.range(n,JSCompiler_inline_result+domain/2,domain));JSCompiler_inline_result?d.bins\x3dJSCompiler_inline_result:d.bins\x26\x26delete d.bins;d.type\x3d\x3d\x3dvegaScale.BinOrdinal\x26\x26(JSCompiler_inline_result?_.domain||\n_.domainRaw||(d.domain(JSCompiler_inline_result),df\x3dJSCompiler_inline_result.length):d.bins\x3dd.domain());scale\x3ddf;a:{d\x3dkey.type;df\x3d_.round||!1;JSCompiler_inline_result\x3d_.range;if(null!\x3d_.rangeStep)d!\x3d\x3dvegaScale.Band\x26\x26d!\x3d\x3dvegaScale.Point\x26\x26vegaUtil.error(\x22Only band and point scales support rangeStep.\x22),JSCompiler_inline_result\x3d[0,_.rangeStep*vegaScale.bandSpace(scale,d\x3d\x3d\x3dvegaScale.Point?1:(null!\x3d_.paddingInner?_.paddingInner:_.padding)||0,(null!\x3d_.paddingOuter?_.paddingOuter:_.padding)||0)];else if(_.scheme\x26\x26\n(JSCompiler_inline_result\x3d_.schemeExtent,vegaUtil.isArray(_.scheme)?JSCompiler_temp\x3dvegaScale.interpolateColors(_.scheme,_.interpolate,_.interpolateGamma):(JSCompiler_temp\x3d_.scheme.toLowerCase(),(JSCompiler_temp\x3dvegaScale.scheme(JSCompiler_temp))||vegaUtil.error(`Unrecognized scheme name: ${_.scheme}`)),scale\x3dd\x3d\x3d\x3dvegaScale.Threshold?scale+1:d\x3d\x3d\x3dvegaScale.BinOrdinal?scale-1:d\x3d\x3d\x3dvegaScale.Quantile||d\x3d\x3d\x3dvegaScale.Quantize?+_.schemeCount||5:scale,JSCompiler_inline_result\x3dvegaScale.isInterpolating(d)?\nadjustScheme(JSCompiler_temp,JSCompiler_inline_result,_.reverse):vegaUtil.isFunction(JSCompiler_temp)?vegaScale.quantizeInterpolator(adjustScheme(JSCompiler_temp,JSCompiler_inline_result),scale):d\x3d\x3d\x3dvegaScale.Ordinal?JSCompiler_temp:JSCompiler_temp.slice(0,scale),vegaUtil.isFunction(JSCompiler_inline_result)))if(key.interpolator){key.interpolator(JSCompiler_inline_result);break a}else vegaUtil.error(`Scale type ${d} does not support interpolating color schemes.`);JSCompiler_inline_result\x26\x26vegaScale.isInterpolating(d)?\nkey.interpolator(vegaScale.interpolateColors(flip(JSCompiler_inline_result,_.reverse),_.interpolate,_.interpolateGamma)):(JSCompiler_inline_result\x26\x26_.interpolate\x26\x26key.interpolate?key.interpolate(vegaScale.interpolate(_.interpolate,_.interpolateGamma)):vegaUtil.isFunction(key.round)?key.round(df):vegaUtil.isFunction(key.rangeRound)\x26\x26key.interpolate(df?d3Interpolate.interpolateRound:d3Interpolate.interpolate),JSCompiler_inline_result\x26\x26key.range(flip(JSCompiler_inline_result,_.reverse)))}return pulse.fork(pulse.NO_SOURCE|\npulse.NO_FIELDS)}});vegaUtil.inherits(SortItems,vegaDataflow.Transform,{transform(_,pulse){const mod\x3d_.modified(\x22sort\x22)||pulse.changed(pulse.ADD)||pulse.modified(_.sort.fields)||pulse.modified(\x22datum\x22);mod\x26\x26pulse.source.sort(vegaDataflow.stableCompare(_.sort));this.modified(mod);return pulse}});const DefOutput\x3d[\x22y0\x22,\x22y1\x22];Stack.Definition\x3d{type:\x22Stack\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22offset\x22,type:\x22enum\x22,\n\x22default\x22:\x22zero\x22,values:[\x22zero\x22,\x22center\x22,\x22normalize\x22]},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:DefOutput}]};vegaUtil.inherits(Stack,vegaDataflow.Transform,{transform(_,pulse){var as\x3d_.as||DefOutput,y0\x3das[0],y1\x3das[1],sort\x3dvegaDataflow.stableCompare(_.sort),field\x3d_.field||vegaUtil.one,stack\x3d\x22center\x22\x3d\x3d\x3d_.offset?stackCenter:\x22normalize\x22\x3d\x3d\x3d_.offset?stackNormalize:stackZero,max;sort\x3dpartition(pulse.source,_.groupby,sort,field);var i\x3d0;var n\x3dsort.length;for(max\x3dsort.max;i\x3cn;++i)stack(sort[i],\nmax,field,y0,y1);return pulse.reflow(_.modified()).modifies(as)}});exports.axisticks\x3dAxisTicks;exports.datajoin\x3dDataJoin;exports.encode\x3dEncode;exports.legendentries\x3dLegendEntries;exports.linkpath\x3dLinkPath;exports.pie\x3dPie;exports.scale\x3dScale;exports.sortitems\x3dSortItems;exports.stack\x3dStack;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_geo$dist$d3_geo.js", true , "shadow$provide.module$node_modules$d3_geo$dist$d3_geo\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3))})(this,function(exports,d3Array){function acos(x){return 1\x3cx?0:-1\x3ex?pi:Math.acos(x)}\nfunction asin(x){return 1\x3cx?halfPi:-1\x3ex?-halfPi:Math.asin(x)}function haversin(x){return(x\x3dsin(x/2))*x}function noop(){}function streamGeometry(geometry,stream){if(geometry\x26\x26streamGeometryType.hasOwnProperty(geometry.type))streamGeometryType[geometry.type](geometry,stream)}function streamLine(coordinates,stream,closed){var i\x3d-1;closed\x3dcoordinates.length-closed;for(stream.lineStart();++i\x3cclosed;){var coordinate\x3dcoordinates[i];stream.point(coordinate[0],coordinate[1],coordinate[2])}stream.lineEnd()}\nfunction streamPolygon(coordinates,stream){var i\x3d-1,n\x3dcoordinates.length;for(stream.polygonStart();++i\x3cn;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function geoStream(object,stream){if(object\x26\x26streamObjectType.hasOwnProperty(object.type))streamObjectType[object.type](object,stream);else streamGeometry(object,stream)}function areaRingStart(){areaStream.point\x3dareaPointFirst}function areaRingEnd(){areaPoint(lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point\x3dareaPoint;\nlambda00\x3dlambda;phi00\x3dphi;lambda*\x3dradians;phi*\x3dradians;lambda0\x3dlambda;cosPhi0\x3dcos(phi\x3dphi/2+quarterPi);sinPhi0\x3dsin(phi)}function areaPoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;phi\x3dphi/2+quarterPi;var dLambda\x3dlambda-lambda0,sdLambda\x3d0\x3c\x3ddLambda?1:-1,adLambda\x3dsdLambda*dLambda;dLambda\x3dcos(phi);phi\x3dsin(phi);var k\x3dsinPhi0*phi,u\x3dcosPhi0*dLambda+k*cos(adLambda);sdLambda\x3dk*sdLambda*sin(adLambda);areaRingSum.add(atan2(sdLambda,u));lambda0\x3dlambda;cosPhi0\x3ddLambda;sinPhi0\x3dphi}function spherical$jscomp$0(cartesian){return[atan2(cartesian[1],\ncartesian[0]),asin(cartesian[2])]}function cartesian$jscomp$0(spherical){var lambda\x3dspherical[0];spherical\x3dspherical[1];var cosPhi\x3dcos(spherical);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(spherical)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+\x3db[0];a[1]+\x3db[1];a[2]+\x3db[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*\nk]}function cartesianNormalizeInPlace(d){var l\x3dsqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/\x3dl;d[1]/\x3dl;d[2]/\x3dl}function boundsPoint(lambda,phi){ranges.push(range$jscomp$0\x3d[lambda0$1\x3dlambda,lambda1\x3dlambda]);phi\x3cphi0\x26\x26(phi0\x3dphi);phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi)}function linePoint(lambda,phi){var p\x3dcartesian$jscomp$0([lambda*radians,phi*radians]);if(p0$jscomp$0){var normal\x3dcartesianCross(p0$jscomp$0,p);normal\x3dcartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(normal);normal\x3d\nspherical$jscomp$0(normal);var delta\x3dlambda-lambda2$jscomp$0,sign\x3d0\x3cdelta?1:-1,lambdai\x3dnormal[0]*degrees*sign;delta\x3d180\x3cabs(delta);delta^(sign*lambda2$jscomp$0\x3clambdai\x26\x26lambdai\x3csign*lambda)?(normal\x3dnormal[1]*degrees,normal\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dnormal)):(lambdai\x3d(lambdai+360)%360-180,delta^(sign*lambda2$jscomp$0\x3clambdai\x26\x26lambdai\x3csign*lambda))?(normal\x3d-normal[1]*degrees,normal\x3cphi0\x26\x26(phi0\x3dnormal)):(phi\x3cphi0\x26\x26(phi0\x3dphi),phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi));delta?lambda\x3clambda2$jscomp$0?angle$jscomp$0(lambda0$1,\nlambda)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda1\x3dlambda):angle$jscomp$0(lambda,lambda1)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda0$1\x3dlambda):lambda1\x3e\x3dlambda0$1?(lambda\x3clambda0$1\x26\x26(lambda0$1\x3dlambda),lambda\x3elambda1\x26\x26(lambda1\x3dlambda)):lambda\x3elambda2$jscomp$0?angle$jscomp$0(lambda0$1,lambda)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda1\x3dlambda):angle$jscomp$0(lambda,lambda1)\x3eangle$jscomp$0(lambda0$1,lambda1)\x26\x26(lambda0$1\x3dlambda)}else ranges.push(range$jscomp$0\x3d[lambda0$1\x3dlambda,lambda1\x3dlambda]);phi\x3c\nphi0\x26\x26(phi0\x3dphi);phi\x3ephi1$jscomp$0\x26\x26(phi1$jscomp$0\x3dphi);p0$jscomp$0\x3dp;lambda2$jscomp$0\x3dlambda}function boundsLineStart(){boundsStream.point\x3dlinePoint}function boundsLineEnd(){range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1;boundsStream.point\x3dboundsPoint;p0$jscomp$0\x3dnull}function boundsRingPoint(lambda,phi){if(p0$jscomp$0){var delta\x3dlambda-lambda2$jscomp$0;deltaSum.add(180\x3cabs(delta)?delta+(0\x3cdelta?360:-360):delta)}else lambda00$1\x3dlambda,phi00$1\x3dphi;areaStream.point(lambda,phi);linePoint(lambda,\nphi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1);areaStream.lineEnd();1E-6\x3cabs(deltaSum)\x26\x26(lambda0$1\x3d-(lambda1\x3d180));range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1;p0$jscomp$0\x3dnull}function angle$jscomp$0(lambda0,lambda1){return 0\x3e(lambda1-\x3dlambda0)?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]\x3c\x3drange[1]?range[0]\x3c\x3dx\x26\x26x\x3c\x3drange[1]:x\x3crange[0]||range[1]\x3cx}function centroidPoint(lambda,\nphi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi);centroidPointCartesian(cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi))}function centroidPointCartesian(x,y,z){++W0;X0+\x3d(x-X0)/W0;Y0+\x3d(y-Y0)/W0;Z0+\x3d(z-Z0)/W0}function centroidLineStart(){centroidStream.point\x3dcentroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi);x0$jscomp$0\x3dcosPhi*cos(lambda);y0$jscomp$0\x3dcosPhi*sin(lambda);z0\x3dsin(phi);centroidStream.point\x3dcentroidLinePoint;centroidPointCartesian(x0$jscomp$0,\ny0$jscomp$0,z0)}function centroidLinePoint(lambda,phi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi),x\x3dcosPhi*cos(lambda);lambda\x3dcosPhi*sin(lambda);phi\x3dsin(phi);var w\x3datan2(sqrt((w\x3dy0$jscomp$0*phi-z0*lambda)*w+(w\x3dz0*x-x0$jscomp$0*phi)*w+(w\x3dx0$jscomp$0*lambda-y0$jscomp$0*x)*w),x0$jscomp$0*x+y0$jscomp$0*lambda+z0*phi);W1+\x3dw;X1+\x3dw*(x0$jscomp$0+(x0$jscomp$0\x3dx));Y1+\x3dw*(y0$jscomp$0+(y0$jscomp$0\x3dlambda));Z1+\x3dw*(z0+(z0\x3dphi));centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function centroidLineEnd(){centroidStream.point\x3d\ncentroidPoint}function centroidRingStart(){centroidStream.point\x3dcentroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(lambda00$2,phi00$2);centroidStream.point\x3dcentroidPoint}function centroidRingPointFirst(lambda,phi){lambda00$2\x3dlambda;phi00$2\x3dphi;lambda*\x3dradians;phi*\x3dradians;centroidStream.point\x3dcentroidRingPoint;var cosPhi\x3dcos(phi);x0$jscomp$0\x3dcosPhi*cos(lambda);y0$jscomp$0\x3dcosPhi*sin(lambda);z0\x3dsin(phi);centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function centroidRingPoint(lambda,\nphi){lambda*\x3dradians;phi*\x3dradians;var cosPhi\x3dcos(phi),x\x3dcosPhi*cos(lambda);lambda\x3dcosPhi*sin(lambda);phi\x3dsin(phi);cosPhi\x3dy0$jscomp$0*phi-z0*lambda;var cy\x3dz0*x-x0$jscomp$0*phi,cz\x3dx0$jscomp$0*lambda-y0$jscomp$0*x,m\x3dhypot(cosPhi,cy,cz),w\x3dasin(m);m\x3dm\x26\x26-w/m;X2.add(m*cosPhi);Y2.add(m*cy);Z2.add(m*cz);W1+\x3dw;X1+\x3dw*(x0$jscomp$0+(x0$jscomp$0\x3dx));Y1+\x3dw*(y0$jscomp$0+(y0$jscomp$0\x3dlambda));Z1+\x3dw*(z0+(z0\x3dphi));centroidPointCartesian(x0$jscomp$0,y0$jscomp$0,z0)}function constant(x){return function(){return x}}function compose$jscomp$0(a,\nb){function compose(x,y){return x\x3da(x,y),b(x[0],x[1])}a.invert\x26\x26b.invert\x26\x26(compose.invert\x3dfunction(x,y){return x\x3db.invert(x,y),x\x26\x26a.invert(x[0],x[1])});return compose}function rotationIdentity(lambda,phi){return[abs(lambda)\x3epi?lambda+Math.round(-lambda/tau)*tau:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%\x3dtau)?deltaPhi||deltaGamma?compose$jscomp$0(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?\nrotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return lambda+\x3ddeltaLambda,[lambda\x3epi?lambda-tau:lambda\x3c-pi?lambda+tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation\x3dforwardRotationLambda(deltaLambda);rotation.invert\x3dforwardRotationLambda(-deltaLambda);return rotation}function rotationPhiGamma(deltaPhi,deltaGamma){function rotation(lambda,phi){var cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*\ncosPhi;phi\x3dsin(phi);cosPhi\x3dphi*cosDeltaPhi+x*sinDeltaPhi;return[atan2(lambda*cosDeltaGamma-cosPhi*sinDeltaGamma,x*cosDeltaPhi-phi*sinDeltaPhi),asin(cosPhi*cosDeltaGamma+lambda*sinDeltaGamma)]}var cosDeltaPhi\x3dcos(deltaPhi),sinDeltaPhi\x3dsin(deltaPhi),cosDeltaGamma\x3dcos(deltaGamma),sinDeltaGamma\x3dsin(deltaGamma);rotation.invert\x3dfunction(lambda,phi){var cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(phi);cosPhi\x3dphi*cosDeltaGamma-lambda*sinDeltaGamma;return[atan2(lambda*cosDeltaGamma+\nphi*sinDeltaGamma,x*cosDeltaPhi+cosPhi*sinDeltaPhi),asin(cosPhi*cosDeltaPhi-x*sinDeltaPhi)]};return rotation}function rotation$jscomp$0(rotate){function forward(coordinates){coordinates\x3drotate(coordinates[0]*radians,coordinates[1]*radians);return coordinates[0]*\x3ddegrees,coordinates[1]*\x3ddegrees,coordinates}rotate\x3drotateRadians(rotate[0]*radians,rotate[1]*radians,2\x3crotate.length?rotate[2]*radians:0);forward.invert\x3dfunction(coordinates){coordinates\x3drotate.invert(coordinates[0]*radians,coordinates[1]*\nradians);return coordinates[0]*\x3ddegrees,coordinates[1]*\x3ddegrees,coordinates};return forward}function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius\x3dcos(radius),sinRadius\x3dsin(radius);delta*\x3ddirection;if(null\x3d\x3dt0)t0\x3dradius+direction*tau,t1\x3dradius-delta/2;else if(t0\x3dcircleRadius(cosRadius,t0),t1\x3dcircleRadius(cosRadius,t1),0\x3cdirection?t0\x3ct1:t0\x3et1)t0+\x3ddirection*tau;for(;0\x3cdirection?t0\x3et1:t0\x3ct1;t0-\x3ddelta)radius\x3dspherical$jscomp$0([cosRadius,-sinRadius*cos(t0),-sinRadius*sin(t0)]),\nstream.point(radius[0],radius[1])}}function circleRadius(cosRadius,point){point\x3dcartesian$jscomp$0(point);point[0]-\x3dcosRadius;cartesianNormalizeInPlace(point);cosRadius\x3dacos(-point[1]);return((0\x3e-point[2]?-cosRadius:cosRadius)+tau-1E-6)%tau}function clipBuffer(){var lines\x3d[],line;return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line\x3d[])},lineEnd:noop,rejoin:function(){1\x3clines.length\x26\x26lines.push(lines.pop().concat(lines.shift()))},result:function(){var result\x3dlines;\nlines\x3d[];line\x3dnull;return result}}}function pointEqual(a,b){return 1E-6\x3eabs(a[0]-b[0])\x26\x261E-6\x3eabs(a[1]-b[1])}function Intersection(point,points,other,entry){this.x\x3dpoint;this.z\x3dpoints;this.o\x3dother;this.e\x3dentry;this.v\x3d!1;this.n\x3dthis.p\x3dnull}function clipRejoin(segments,compareIntersection,startInside,interpolate,stream){var subject\x3d[],clip\x3d[];segments.forEach(function(segment){if(!(0\x3e\x3d(n\x3dsegment.length-1))){var n,p0\x3dsegment[0],p1\x3dsegment[n];if(pointEqual(p0,p1)){if(!p0[2]\x26\x26!p1[2]){stream.lineStart();\nfor(i\x3d0;i\x3cn;++i)stream.point((p0\x3dsegment[i])[0],p0[1]);stream.lineEnd();return}p1[0]+\x3d2E-6}subject.push(n\x3dnew Intersection(p0,segment,null,!0));clip.push(n.o\x3dnew Intersection(p0,null,n,!1));subject.push(n\x3dnew Intersection(p1,segment,null,!1));clip.push(n.o\x3dnew Intersection(p1,null,n,!0))}});if(subject.length){clip.sort(compareIntersection);link(subject);link(clip);var i\x3d0;for(segments\x3dclip.length;i\x3csegments;++i)clip[i].e\x3dstartInside\x3d!startInside;startInside\x3dsubject[0];for(var point;;){for(var current\x3d\nstartInside,isSubject\x3d!0;current.v;)if((current\x3dcurrent.n)\x3d\x3d\x3dstartInside)return;compareIntersection\x3dcurrent.z;stream.lineStart();do{current.v\x3dcurrent.o.v\x3d!0;if(current.e){if(isSubject)for(i\x3d0,segments\x3dcompareIntersection.length;i\x3csegments;++i)stream.point((point\x3dcompareIntersection[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current\x3dcurrent.n}else{if(isSubject)for(compareIntersection\x3dcurrent.p.z,i\x3dcompareIntersection.length-1;0\x3c\x3di;--i)stream.point((point\x3dcompareIntersection[i])[0],\npoint[1]);else interpolate(current.x,current.p.x,-1,stream);current\x3dcurrent.p}current\x3dcurrent.o;compareIntersection\x3dcurrent.z;isSubject\x3d!isSubject}while(!current.v);stream.lineEnd()}}}function link(array){if(n\x3darray.length){for(var n,i\x3d0,a\x3darray[0],b;++i\x3cn;)a.n\x3db\x3darray[i],b.p\x3da,a\x3db;a.n\x3db\x3darray[0];b.p\x3da}}function longitude(point){return abs(point[0])\x3c\x3dpi?point[0]:sign$jscomp$0(point[0])*((abs(point[0])+pi)%tau-pi)}function polygonContains(polygon,point){var lambda\x3dlongitude(point);point\x3dpoint[1];var sinPhi\x3d\nsin(point),normal\x3d[sin(lambda),-cos(lambda),0],angle\x3d0,winding\x3d0,sum\x3dnew d3Array.Adder;1\x3d\x3d\x3dsinPhi?point\x3dhalfPi+1E-6:-1\x3d\x3d\x3dsinPhi\x26\x26(point\x3d-halfPi-1E-6);sinPhi\x3d0;for(var n\x3dpolygon.length;sinPhi\x3cn;++sinPhi)if(m\x3d(ring\x3dpolygon[sinPhi]).length){var ring,m,point0\x3dring[m-1],lambda0\x3dlongitude(point0),phi0\x3dpoint0[1]/2+quarterPi,sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0);for(phi0\x3d0;phi0\x3cm;++phi0,lambda0\x3dlambda1,sinPhi0\x3dsinPhi1,cosPhi0\x3dcosPhi1,point0\x3dpoint1){var point1\x3dring[phi0],lambda1\x3dlongitude(point1);cosPhi1\x3dpoint1[1]/\n2+quarterPi;var sinPhi1\x3dsin(cosPhi1),cosPhi1\x3dcos(cosPhi1),delta\x3dlambda1-lambda0,sign\x3d0\x3c\x3ddelta?1:-1,absDelta\x3dsign*delta,antimeridian\x3dabsDelta\x3epi;sinPhi0*\x3dsinPhi1;sum.add(atan2(sinPhi0*sign*sin(absDelta),cosPhi0*cosPhi1+sinPhi0*cos(absDelta)));angle+\x3dantimeridian?delta+sign*tau:delta;antimeridian^lambda0\x3e\x3dlambda^lambda1\x3e\x3dlambda\x26\x26(point0\x3dcartesianCross(cartesian$jscomp$0(point0),cartesian$jscomp$0(point1)),cartesianNormalizeInPlace(point0),lambda0\x3dcartesianCross(normal,point0),cartesianNormalizeInPlace(lambda0),\nlambda0\x3d(antimeridian^0\x3c\x3ddelta?-1:1)*asin(lambda0[2]),point\x3elambda0||point\x3d\x3d\x3dlambda0\x26\x26(point0[0]||point0[1]))\x26\x26(winding+\x3dantimeridian^0\x3c\x3ddelta?1:-1)}}return(-1E-6\x3eangle||1E-6\x3eangle\x26\x26-1E-12\x3esum)^winding\x261}function clip$jscomp$0(pointVisible,clipLine,interpolate,start){return function(sink){function point$jscomp$0(lambda,phi){pointVisible(lambda,phi)\x26\x26sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point\x3dpointLine;line.lineStart()}function lineEnd(){clip.point\x3d\npoint$jscomp$0;line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]);ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart();ring\x3d[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]);ringSink.lineEnd();var clean\x3dringSink.clean(),ringSegments\x3dringBuffer.result(),n\x3dringSegments.length,point;ring.pop();polygon.push(ring);ring\x3dnull;if(n)if(clean\x261){if(n\x3dringSegments[0],0\x3c(ringSegments\x3dn.length-1)){polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0);sink.lineStart();\nfor(clean\x3d0;clean\x3cringSegments;++clean)sink.point((point\x3dn[clean])[0],point[1]);sink.lineEnd()}}else 1\x3cn\x26\x26clean\x262\x26\x26ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}var line\x3dclipLine(sink),ringBuffer\x3dclipBuffer(),ringSink\x3dclipLine(ringBuffer),polygonStarted\x3d!1,polygon,segments,ring,clip\x3d{point:point$jscomp$0,lineStart,lineEnd,polygonStart:function(){clip.point\x3dpointRing;clip.lineStart\x3dringStart;clip.lineEnd\x3dringEnd;segments\x3d[];polygon\x3d\n[]},polygonEnd:function(){clip.point\x3dpoint$jscomp$0;clip.lineStart\x3dlineStart;clip.lineEnd\x3dlineEnd;segments\x3dd3Array.merge(segments);var startInside\x3dpolygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0),clipRejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside\x26\x26(polygonStarted||(sink.polygonStart(),polygonStarted\x3d!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd());polygonStarted\x26\x26(sink.polygonEnd(),polygonStarted\x3d\n!1);segments\x3dpolygon\x3dnull},sphere:function(){sink.polygonStart();sink.lineStart();interpolate(null,null,1,sink);sink.lineEnd();sink.polygonEnd()}};return clip}}function validSegment(segment){return 1\x3csegment.length}function compareIntersection(a,b){return(0\x3e(a\x3da.x)[0]?a[1]-halfPi-1E-6:halfPi-a[1])-(0\x3e(b\x3db.x)[0]?b[1]-halfPi-1E-6:halfPi-b[1])}function clipCircle(radius){function visible(lambda,phi){return cos(lambda)*cos(phi)\x3ecr}function intersect(a,b,two){var pa\x3dcartesian$jscomp$0(a),pb\x3dcartesian$jscomp$0(b),\nn1\x3d[1,0,0];pb\x3dcartesianCross(pa,pb);var n2n2\x3dcartesianDot(pb,pb);pa\x3dpb[0];var determinant\x3dn2n2-pa*pa;if(!determinant)return!two\x26\x26a;n2n2\x3dcr*n2n2/determinant;determinant\x3d-cr*pa/determinant;pa\x3dcartesianCross(n1,pb);n1\x3dcartesianScale(n1,n2n2);pb\x3dcartesianScale(pb,determinant);cartesianAddInPlace(n1,pb);pb\x3dcartesianDot(n1,pa);n2n2\x3dcartesianDot(pa,pa);determinant\x3dpb*pb-n2n2*(cartesianDot(n1,n1)-1);if(!(0\x3edeterminant)){var t\x3dsqrt(determinant);determinant\x3dcartesianScale(pa,(-pb-t)/n2n2);cartesianAddInPlace(determinant,\nn1);determinant\x3dspherical$jscomp$0(determinant);if(!two)return determinant;two\x3da[0];var lambda1\x3db[0];a\x3da[1];b\x3db[1];if(lambda1\x3ctwo){var z\x3dtwo;two\x3dlambda1;lambda1\x3dz}var delta\x3dlambda1-two,polar\x3d1E-6\x3eabs(delta-pi);!polar\x26\x26b\x3ca\x26\x26(z\x3da,a\x3db,b\x3dz);if(polar||1E-6\x3edelta?polar?0\x3ca+b^determinant[1]\x3c(1E-6\x3eabs(determinant[0]-two)?a:b):a\x3c\x3ddeterminant[1]\x26\x26determinant[1]\x3c\x3db:delta\x3epi^(two\x3c\x3ddeterminant[0]\x26\x26determinant[0]\x3c\x3dlambda1))return b\x3dcartesianScale(pa,(-pb+t)/n2n2),cartesianAddInPlace(b,n1),[determinant,spherical$jscomp$0(b)]}}\nfunction code$jscomp$0(lambda,phi){var r\x3dsmallRadius?radius:pi-radius,code\x3d0;lambda\x3c-r?code|\x3d1:lambda\x3er\x26\x26(code|\x3d2);phi\x3c-r?code|\x3d4:phi\x3er\x26\x26(code|\x3d8);return code}var cr\x3dcos(radius),delta$jscomp$0\x3d6*radians,smallRadius\x3d0\x3ccr,notHemisphere\x3d1E-6\x3cabs(cr);return clip$jscomp$0(visible,function(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00\x3dv0\x3d!1;clean\x3d1},point:function(lambda,phi){var point1\x3d[lambda,phi],v\x3dvisible(lambda,phi);phi\x3dsmallRadius?v?0:code$jscomp$0(lambda,phi):v?code$jscomp$0(lambda+\n(0\x3elambda?pi:-pi),phi):0;!point0\x26\x26(v00\x3dv0\x3dv)\x26\x26stream.lineStart();v!\x3d\x3dv0\x26\x26(lambda\x3dintersect(point0,point1),!lambda||pointEqual(point0,lambda)||pointEqual(point1,lambda))\x26\x26(point1[2]\x3d1);if(v!\x3d\x3dv0)clean\x3d0,v?(stream.lineStart(),lambda\x3dintersect(point1,point0),stream.point(lambda[0],lambda[1])):(lambda\x3dintersect(point0,point1),stream.point(lambda[0],lambda[1],2),stream.lineEnd()),point0\x3dlambda;else if(notHemisphere\x26\x26point0\x26\x26smallRadius^v){var t;phi\x26c0||!(t\x3dintersect(point1,point0,!0))||(clean\x3d0,smallRadius?\n(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0\x26\x26pointEqual(point0,point1)||stream.point(point1[0],point1[1]);point0\x3dpoint1;v0\x3dv;c0\x3dphi},lineEnd:function(){v0\x26\x26stream.lineEnd();point0\x3dnull},clean:function(){return clean|(v00\x26\x26v0)\x3c\x3c1}}},function(from,to,direction,stream){circleStream(stream,radius,delta$jscomp$0,direction,from,to)},smallRadius?\n[0,-radius]:[-pi,radius-pi])}function clipLine$jscomp$0(a,b,x0,y0,x1,y1){var ax\x3da[0],ay\x3da[1],t0\x3d0,t1\x3d1,dx\x3db[0]-ax,dy\x3db[1]-ay;x0-\x3dax;if(dx||!(0\x3cx0)){x0/\x3ddx;if(0\x3edx){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}else if(0\x3cdx){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}x0\x3dx1-ax;if(dx||!(0\x3ex0)){x0/\x3ddx;if(0\x3edx){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}else if(0\x3cdx){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}x0\x3dy0-ay;if(dy||!(0\x3cx0)){x0/\x3ddy;if(0\x3edy){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}else if(0\x3cdy){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}x0\x3dy1-ay;if(dy||!(0\x3ex0)){x0/\x3d\ndy;if(0\x3edy){if(x0\x3et1)return;x0\x3et0\x26\x26(t0\x3dx0)}else if(0\x3cdy){if(x0\x3ct0)return;x0\x3ct1\x26\x26(t1\x3dx0)}0\x3ct0\x26\x26(a[0]\x3dax+t0*dx,a[1]\x3day+t0*dy);1\x3et1\x26\x26(b[0]\x3dax+t1*dx,b[1]\x3day+t1*dy);return!0}}}}}function clipRectangle(x0,y0,x1,y1){function interpolate(from,to,direction,stream){var a\x3d0,a1\x3d0;if(null\x3d\x3dfrom||(a\x3dcorner(from,direction))!\x3d\x3d(a1\x3dcorner(to,direction))||0\x3ecomparePoint(from,to)^0\x3cdirection){do stream.point(0\x3d\x3d\x3da||3\x3d\x3d\x3da?x0:x1,1\x3ca?y1:y0);while((a\x3d(a+direction+4)%4)!\x3d\x3da1)}else stream.point(to[0],to[1])}function corner(p,\ndirection){return 1E-6\x3eabs(p[0]-x0)?0\x3cdirection?0:3:1E-6\x3eabs(p[0]-x1)?0\x3cdirection?2:1:1E-6\x3eabs(p[1]-y0)?0\x3cdirection?1:0:0\x3cdirection?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca\x3dcorner(a,1),cb\x3dcorner(b,1);return ca!\x3d\x3dcb?ca-cb:0\x3d\x3d\x3dca?b[1]-a[1]:1\x3d\x3d\x3dca?a[0]-b[0]:2\x3d\x3d\x3dca?a[1]-b[1]:b[0]-a[0]}return function(stream){function point$jscomp$0(x,y){x0\x3c\x3dx\x26\x26x\x3c\x3dx1\x26\x26y0\x3c\x3dy\x26\x26y\x3c\x3dy1\x26\x26activeStream.point(x,y)}function linePoint(x,y){var v\x3dx0\x3c\x3dx\x26\x26x\x3c\x3dx1\x26\x26y0\x3c\x3dy\x26\x26y\x3c\x3d\ny1;polygon\x26\x26ring$jscomp$0.push([x,y]);if(first)x__\x3dx,y__\x3dy,v__\x3dv,first\x3d!1,v\x26\x26(activeStream.lineStart(),activeStream.point(x,y));else if(v\x26\x26v_)activeStream.point(x,y);else{var a\x3d[x_\x3dMath.max(-1E9,Math.min(1E9,x_)),y_\x3dMath.max(-1E9,Math.min(1E9,y_))],b\x3d[x\x3dMath.max(-1E9,Math.min(1E9,x)),y\x3dMath.max(-1E9,Math.min(1E9,y))];clipLine$jscomp$0(a,b,x0,y0,x1,y1)?(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean\x3d!1):v\x26\x26(activeStream.lineStart(),\nactiveStream.point(x,y),clean\x3d!1)}x_\x3dx;y_\x3dy;v_\x3dv}var activeStream\x3dstream,bufferStream\x3dclipBuffer(),segments,polygon,ring$jscomp$0,x__,y__,v__,x_,y_,v_,first,clean,clipStream\x3d{point:point$jscomp$0,lineStart:function(){clipStream.point\x3dlinePoint;polygon\x26\x26polygon.push(ring$jscomp$0\x3d[]);first\x3d!0;v_\x3d!1;x_\x3dy_\x3dNaN},lineEnd:function(){segments\x26\x26(linePoint(x__,y__),v__\x26\x26v_\x26\x26bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point\x3dpoint$jscomp$0;v_\x26\x26activeStream.lineEnd()},polygonStart:function(){activeStream\x3d\nbufferStream;segments\x3d[];polygon\x3d[];clean\x3d!0},polygonEnd:function(){for(var startInside,i\x3dstartInside\x3d0,n\x3dpolygon.length;i\x3cn;++i){var ring\x3dpolygon[i],j\x3d1,m\x3dring.length,point\x3dring[0],b0\x3dpoint[0];for(point\x3dpoint[1];j\x3cm;++j){var a0\x3db0;var a1\x3dpoint;point\x3dring[j];b0\x3dpoint[0];point\x3dpoint[1];a1\x3c\x3dy1?point\x3ey1\x26\x26(b0-a0)*(y1-a1)\x3e(point-a1)*(x0-a0)\x26\x26++startInside:point\x3c\x3dy1\x26\x26(b0-a0)*(y1-a1)\x3c(point-a1)*(x0-a0)\x26\x26--startInside}}i\x3dclean\x26\x26startInside;n\x3d(segments\x3dd3Array.merge(segments)).length;if(i||n)stream.polygonStart(),\ni\x26\x26(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),n\x26\x26clipRejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd();activeStream\x3dstream;segments\x3dpolygon\x3dring$jscomp$0\x3dnull}};return clipStream}}function lengthLineEnd(){lengthStream.point\x3dlengthStream.lineEnd\x3dnoop}function lengthPointFirst(lambda,phi){lambda*\x3dradians;phi*\x3dradians;lambda0$2\x3dlambda;sinPhi0$1\x3dsin(phi);cosPhi0$1\x3dcos(phi);lengthStream.point\x3dlengthPoint}function lengthPoint(lambda,phi){lambda*\x3d\nradians;phi*\x3dradians;var sinPhi\x3dsin(phi);phi\x3dcos(phi);var delta\x3dabs(lambda-lambda0$2),cosDelta\x3dcos(delta);delta\x3dsin(delta);delta*\x3dphi;var y\x3dcosPhi0$1*sinPhi-sinPhi0$1*phi*cosDelta;cosDelta\x3dsinPhi0$1*sinPhi+cosPhi0$1*phi*cosDelta;lengthSum.add(atan2(sqrt(delta*delta+y*y),cosDelta));lambda0$2\x3dlambda;sinPhi0$1\x3dsinPhi;cosPhi0$1\x3dphi}function length$jscomp$0(object){lengthSum\x3dnew d3Array.Adder;geoStream(object,lengthStream);return+lengthSum}function distance(a,b){coordinates$jscomp$0[0]\x3da;coordinates$jscomp$0[1]\x3d\nb;return length$jscomp$0(object$jscomp$0)}function containsGeometry(geometry,point){return geometry\x26\x26containsGeometryType.hasOwnProperty(geometry.type)?containsGeometryType[geometry.type](geometry,point):!1}function containsLine(coordinates,point){for(var ao,bo,ab,i\x3d0,n\x3dcoordinates.length;i\x3cn;i++){bo\x3ddistance(coordinates[i],point);if(0\x3d\x3d\x3dbo||0\x3ci\x26\x26(ab\x3ddistance(coordinates[i],coordinates[i-1]),0\x3cab\x26\x26ao\x3c\x3dab\x26\x26bo\x3c\x3dab\x26\x26(ao+bo-ab)*(1-Math.pow((ao-bo)/ab,2))\x3c1E-12*ab))return!0;ao\x3dbo}return!1}function containsPolygon(coordinates,\npoint){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return ring\x3dring.map(pointRadians),ring.pop(),ring}function pointRadians(point){return[point[0]*radians,point[1]*radians]}function graticuleX(y0,y1,dy){var y$jscomp$0\x3dd3Array.range(y0,y1-1E-6,dy).concat(y1);return function(x){return y$jscomp$0.map(function(y){return[x,y]})}}function graticuleY(x0,x1,dx){var x$jscomp$0\x3dd3Array.range(x0,x1-1E-6,dx).concat(x1);return function(y){return x$jscomp$0.map(function(x){return[x,\ny]})}}function graticule$jscomp$0(){function graticule(){return{type:\x22MultiLineString\x22,coordinates:lines()}}function lines(){return d3Array.range(ceil(X0/DX)*DX,X1,DX).map(X).concat(d3Array.range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3Array.range(ceil(x0/dx)*dx,x1,dx).filter(function(x){return 1E-6\x3cabs(x%DX)}).map(x$jscomp$0)).concat(d3Array.range(ceil(y0/dy)*dy,y1,dy).filter(function(y){return 1E-6\x3cabs(y%DY)}).map(y$jscomp$0))}var x1,x0,X1,X0,y1,y0,Y1,Y0,dx\x3d10,dy\x3ddx,DX\x3d90,DY\x3d360,x$jscomp$0,y$jscomp$0,\nX,Y,precision\x3d2.5;graticule.lines\x3dfunction(){return lines().map(function(coordinates){return{type:\x22LineString\x22,coordinates}})};graticule.outline\x3dfunction(){return{type:\x22Polygon\x22,coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}};graticule.extent\x3dfunction(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()};graticule.extentMajor\x3dfunction(_){if(!arguments.length)return[[X0,Y0],[X1,Y1]];X0\x3d+_[0][0];X1\x3d+_[1][0];Y0\x3d+_[0][1];\nY1\x3d+_[1][1];X0\x3eX1\x26\x26(_\x3dX0,X0\x3dX1,X1\x3d_);Y0\x3eY1\x26\x26(_\x3dY0,Y0\x3dY1,Y1\x3d_);return graticule.precision(precision)};graticule.extentMinor\x3dfunction(_){if(!arguments.length)return[[x0,y0],[x1,y1]];x0\x3d+_[0][0];x1\x3d+_[1][0];y0\x3d+_[0][1];y1\x3d+_[1][1];x0\x3ex1\x26\x26(_\x3dx0,x0\x3dx1,x1\x3d_);y0\x3ey1\x26\x26(_\x3dy0,y0\x3dy1,y1\x3d_);return graticule.precision(precision)};graticule.step\x3dfunction(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()};graticule.stepMajor\x3dfunction(_){if(!arguments.length)return[DX,DY];DX\x3d+_[0];\nDY\x3d+_[1];return graticule};graticule.stepMinor\x3dfunction(_){if(!arguments.length)return[dx,dy];dx\x3d+_[0];dy\x3d+_[1];return graticule};graticule.precision\x3dfunction(_){if(!arguments.length)return precision;precision\x3d+_;x$jscomp$0\x3dgraticuleX(y0,y1,90);y$jscomp$0\x3dgraticuleY(x0,x1,precision);X\x3dgraticuleX(Y0,Y1,90);Y\x3dgraticuleY(X0,X1,precision);return graticule};return graticule.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function areaRingStart$1(){areaStream$1.point\x3d\nareaPointFirst$1}function areaPointFirst$1(x,y){areaStream$1.point\x3dareaPoint$1;x00$jscomp$0\x3dx0$1\x3dx;y00$jscomp$0\x3dy0$1\x3dy}function areaPoint$1(x,y){areaRingSum$1.add(y0$1*x-x0$1*y);x0$1\x3dx;y0$1\x3dy}function areaRingEnd$1(){areaPoint$1(x00$jscomp$0,y00$jscomp$0)}function centroidPoint$1(x,y){X0$1+\x3dx;Y0$1+\x3dy;++Z0$1}function centroidLineStart$1(){centroidStream$1.point\x3dcentroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream$1.point\x3dcentroidPointLine;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function centroidPointLine(x,\ny){var dx\x3dx-x0$3,dy\x3dy-y0$3;dx\x3dsqrt(dx*dx+dy*dy);X1$1+\x3ddx*(x0$3+x)/2;Y1$1+\x3ddx*(y0$3+y)/2;Z1$1+\x3ddx;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function centroidLineEnd$1(){centroidStream$1.point\x3dcentroidPoint$1}function centroidRingStart$1(){centroidStream$1.point\x3dcentroidPointFirstRing}function centroidRingEnd$1(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(x,y){centroidStream$1.point\x3dcentroidPointRing;centroidPoint$1(x00$1\x3dx0$3\x3dx,y00$1\x3dy0$3\x3dy)}function centroidPointRing(x,y){var dx\x3dx-x0$3,dy\x3d\ny-y0$3;dx\x3dsqrt(dx*dx+dy*dy);X1$1+\x3ddx*(x0$3+x)/2;Y1$1+\x3ddx*(y0$3+y)/2;Z1$1+\x3ddx;dx\x3dy0$3*x-x0$3*y;X2$1+\x3ddx*(x0$3+x);Y2$1+\x3ddx*(y0$3+y);Z2$1+\x3d3*dx;centroidPoint$1(x0$3\x3dx,y0$3\x3dy)}function PathContext(context){this._context\x3dcontext}function lengthPointFirst$1(x,y){lengthStream$1.point\x3dlengthPoint$1;x00$2\x3dx0$4\x3dx;y00$2\x3dy0$4\x3dy}function lengthPoint$1(x,y){x0$4-\x3dx;y0$4-\x3dy;lengthSum$1.add(sqrt(x0$4*x0$4+y0$4*y0$4));x0$4\x3dx;y0$4\x3dy}function PathString(){this._string\x3d[]}function circle$1(radius){return\x22m0,\x22+radius+\n\x22a\x22+radius+\x22,\x22+radius+\x22 0 1,1 0,\x22+-2*radius+\x22a\x22+radius+\x22,\x22+radius+\x22 0 1,1 0,\x22+2*radius+\x22z\x22}function transformer(methods){return function(stream){var s\x3dnew TransformStream,key;for(key in methods)s[key]\x3dmethods[key];s.stream\x3dstream;return s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip\x3dprojection.clipExtent\x26\x26projection.clipExtent();projection.scale(150).translate([0,0]);null!\x3dclip\x26\x26projection.clipExtent(null);geoStream(object,projection.stream(boundsStream$1));fitBounds(boundsStream$1.result());\nnull!\x3dclip\x26\x26projection.clipExtent(clip);return projection}function fitExtent(projection,extent,object){return fit(projection,function(b){var w\x3dextent[1][0]-extent[0][0],h\x3dextent[1][1]-extent[0][1],k\x3dMath.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1]));w\x3d+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2;b\x3d+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([w,b])},object)}function fitWidth(projection,width,object){return fit(projection,function(b){var w\x3d+width,k\x3dw/(b[1][0]-b[0][0]);w\x3d(w-k*\n(b[1][0]+b[0][0]))/2;b\x3d-k*b[0][1];projection.scale(150*k).translate([w,b])},object)}function fitHeight(projection,height,object){return fit(projection,function(b){var h\x3d+height,k\x3dh/(b[1][1]-b[0][1]),x\x3d-k*b[0][0];b\x3d(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,b])},object)}function resampleNone(project){return transformer({point:function(x,y){x\x3dproject(x,y);this.stream.point(x[0],x[1])}})}function resample$1(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,\na1,b1,c1,depth,stream){var dx\x3dx1-x0,dy\x3dy1-y0,d2\x3ddx*dx+dy*dy;if(d2\x3e4*delta2\x26\x26depth--){var a\x3da0+a1,b\x3db0+b1,c\x3dc0+c1,m\x3dsqrt(a*a+b*b+c*c),phi2\x3dasin(c/\x3dm),lambda2\x3d1E-6\x3eabs(abs(c)-1)||1E-6\x3eabs(lambda0-lambda1)?(lambda0+lambda1)/2:atan2(b,a),p\x3dproject(lambda2,phi2);phi2\x3dp[0];p\x3dp[1];var dx2\x3dphi2-x0,dy2\x3dp-y0,dz\x3ddy*dx2-dx*dy2;if(dz*dz/d2\x3edelta2||.3\x3cabs((dx*dx2+dy*dy2)/d2-.5)||a0*a1+b0*b1+c0*c1\x3ccosMinDistance)resampleLineTo(x0,y0,lambda0,a0,b0,c0,phi2,p,lambda2,a/\x3dm,b/\x3dm,c,depth,stream),stream.point(phi2,p),\nresampleLineTo(phi2,p,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream)}}return function(stream){function point(x,y){x\x3dproject(x,y);stream.point(x[0],x[1])}function lineStart(){x0\x3dNaN;resampleStream.point\x3dlinePoint;stream.lineStart()}function linePoint(lambda,phi){var c\x3dcartesian$jscomp$0([lambda,phi]);phi\x3dproject(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0\x3dphi[0],y0\x3dphi[1],lambda0\x3dlambda,a0\x3dc[0],b0\x3dc[1],c0\x3dc[2],16,stream);stream.point(x0,y0)}function lineEnd(){resampleStream.point\x3dpoint;\nstream.lineEnd()}function ringStart(){lineStart();resampleStream.point\x3dringPoint;resampleStream.lineEnd\x3dringEnd}function ringPoint(lambda,phi){linePoint(lambda00\x3dlambda,phi);x00\x3dx0;y00\x3dy0;a00\x3da0;b00\x3db0;c00\x3dc0;resampleStream.point\x3dlinePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,16,stream);resampleStream.lineEnd\x3dlineEnd;lineEnd()}var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream\x3d{point,lineStart,lineEnd,polygonStart:function(){stream.polygonStart();\nresampleStream.lineStart\x3dringStart},polygonEnd:function(){stream.polygonEnd();resampleStream.lineStart\x3dlineStart}};return resampleStream}}function transformRotate(rotate){return transformer({point:function(x,y){x\x3drotate(x,y);return this.stream.point(x[0],x[1])}})}function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){x*\x3dsx;y*\x3dsy;return[dx+k*x,dy-k*y]}transform.invert\x3dfunction(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]};return transform}function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){function transform(x,\ny){x*\x3dsx;y*\x3dsy;return[a*x-b*y+dx,dy-b*x-a*y]}if(!alpha)return scaleTranslate(k,dx,dy,sx,sy);var cosAlpha\x3dcos(alpha);alpha\x3dsin(alpha);var a\x3dcosAlpha*k,b\x3dalpha*k,ai\x3dcosAlpha/k,bi\x3dalpha/k,ci\x3d(alpha*dy-cosAlpha*dx)/k,fi\x3d(alpha*dx+cosAlpha*dy)/k;transform.invert\x3dfunction(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]};return transform}function projection$jscomp$0(project){return projectionMutator(function(){return project})()}function projectionMutator(projectAt){function projection(point){return projectRotateTransform(point[0]*\nradians,point[1]*radians)}function invert(point){return(point\x3dprojectRotateTransform.invert(point[0],point[1]))\x26\x26[point[0]*degrees,point[1]*degrees]}function recenter(){var center\x3dscaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi));center\x3dscaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);rotate\x3drotateRadians(deltaLambda,deltaPhi,deltaGamma);projectTransform\x3dcompose$jscomp$0(project,center);projectRotateTransform\x3dcompose$jscomp$0(rotate,projectTransform);center\x3dprojectTransform;\nprojectResample\x3d+delta2$jscomp$0?resample$1(center,delta2$jscomp$0):resampleNone(center);return reset()}function reset(){cache\x3dcacheStream\x3dnull;return projection}var project,k\x3d150,x\x3d480,y\x3d250,lambda\x3d0,phi\x3d0,deltaLambda\x3d0,deltaPhi\x3d0,deltaGamma\x3d0,rotate,alpha\x3d0,sx\x3d1,sy\x3d1,theta\x3dnull,preclip\x3dclipAntimeridian,x0\x3dnull,y0,x1,y1,postclip\x3didentity,delta2$jscomp$0\x3d.5,projectResample,projectTransform,projectRotateTransform,cache,cacheStream;projection.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?\ncache:cache\x3dtransformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream\x3dstream)))))};projection.preclip\x3dfunction(_){return arguments.length?(preclip\x3d_,theta\x3dvoid 0,reset()):preclip};projection.postclip\x3dfunction(_){return arguments.length?(postclip\x3d_,x0\x3dy0\x3dx1\x3dy1\x3dnull,reset()):postclip};projection.clipAngle\x3dfunction(_){return arguments.length?(preclip\x3d+_?clipCircle(theta\x3d_*radians):(theta\x3dnull,clipAntimeridian),reset()):theta*degrees};projection.clipExtent\x3dfunction(_){return arguments.length?\n(postclip\x3dnull\x3d\x3d_?(x0\x3dy0\x3dx1\x3dy1\x3dnull,identity):clipRectangle(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reset()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};projection.scale\x3dfunction(_){return arguments.length?(k\x3d+_,recenter()):k};projection.translate\x3dfunction(_){return arguments.length?(x\x3d+_[0],y\x3d+_[1],recenter()):[x,y]};projection.center\x3dfunction(_){return arguments.length?(lambda\x3d_[0]%360*radians,phi\x3d_[1]%360*radians,recenter()):[lambda*degrees,phi*degrees]};projection.rotate\x3dfunction(_){return arguments.length?\n(deltaLambda\x3d_[0]%360*radians,deltaPhi\x3d_[1]%360*radians,deltaGamma\x3d2\x3c_.length?_[2]%360*radians:0,recenter()):[deltaLambda*degrees,deltaPhi*degrees,deltaGamma*degrees]};projection.angle\x3dfunction(_){return arguments.length?(alpha\x3d_%360*radians,recenter()):alpha*degrees};projection.reflectX\x3dfunction(_){return arguments.length?(sx\x3d_?-1:1,recenter()):0\x3esx};projection.reflectY\x3dfunction(_){return arguments.length?(sy\x3d_?-1:1,recenter()):0\x3esy};projection.precision\x3dfunction(_){if(arguments.length){var JSCompiler_temp\x3d\nprojectTransform;var delta2\x3ddelta2$jscomp$0\x3d_*_;JSCompiler_temp\x3d(projectResample\x3d+delta2?resample$1(JSCompiler_temp,delta2):resampleNone(JSCompiler_temp),reset())}else JSCompiler_temp\x3dsqrt(delta2$jscomp$0);return JSCompiler_temp};projection.fitExtent\x3dfunction(extent,object){return fitExtent(projection,extent,object)};projection.fitSize\x3dfunction(size,object){return fitExtent(projection,[[0,0],size],object)};projection.fitWidth\x3dfunction(width,object){return fitWidth(projection,width,object)};projection.fitHeight\x3d\nfunction(height,object){return fitHeight(projection,height,object)};return function(){project\x3dprojectAt.apply(this,arguments);projection.invert\x3dproject.invert\x26\x26invert;return recenter()}}function conicProjection(projectAt){var phi0\x3d0,phi1\x3dpi/3,m\x3dprojectionMutator(projectAt);projectAt\x3dm(phi0,phi1);projectAt.parallels\x3dfunction(_){return arguments.length?m(phi0\x3d_[0]*radians,phi1\x3d_[1]*radians):[phi0*degrees,phi1*degrees]};return projectAt}function cylindricalEqualAreaRaw(phi0){function forward(lambda,\nphi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,asin(y*cosPhi0)]};return forward}function conicEqualAreaRaw(y0,y1){function project(x,y){y\x3dsqrt(c-2*n*sin(y))/n;return[y*sin(x*\x3dn),r0-y*cos(x)]}var sy0\x3dsin(y0),n\x3d(sy0+sin(y1))/2;if(1E-6\x3eabs(n))return cylindricalEqualAreaRaw(y0);var c\x3d1+sy0*(2*n-sy0),r0\x3dsqrt(c)/n;project.invert\x3dfunction(x,y){y\x3dr0-y;var l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/\nn,asin((c-(x*x+y*y)*n*n)/(2*n))]};return project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(streams){var n\x3dstreams.length;return{point:function(x,y){for(var i\x3d-1;++i\x3cn;)streams[i].point(x,y)},sphere:function(){for(var i\x3d-1;++i\x3cn;)streams[i].sphere()},lineStart:function(){for(var i\x3d-1;++i\x3cn;)streams[i].lineStart()},\nlineEnd:function(){for(var i\x3d-1;++i\x3cn;)streams[i].lineEnd()},polygonStart:function(){for(var i\x3d-1;++i\x3cn;)streams[i].polygonStart()},polygonEnd:function(){for(var i\x3d-1;++i\x3cn;)streams[i].polygonEnd()}}}function azimuthalRaw(scale){return function(x,y){var cx\x3dcos(x),cy\x3dcos(y);cx\x3dscale(cx*cy);return Infinity\x3d\x3d\x3dcx?[2,0]:[cx*cy*sin(x),cx*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z\x3dsqrt(x*x+y*y),c\x3dangle(z),sc\x3dsin(c);c\x3dcos(c);return[atan2(x*sc,z*c),asin(z\x26\x26y*sc/z)]}}function mercatorRaw(lambda,\nphi){return[lambda,log(tan((halfPi+phi)/2))]}function mercatorProjection(project){function reclip(){var k\x3dpi*scale(),t\x3dm(rotation$jscomp$0(m.rotate()).invert([0,0]));return clipExtent(null\x3d\x3dx0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project\x3d\x3d\x3dmercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}var m\x3dprojection$jscomp$0(project),center\x3dm.center,scale\x3dm.scale,translate\x3dm.translate,clipExtent\x3dm.clipExtent,x0\x3dnull,y0,x1,y1;m.scale\x3dfunction(_){return arguments.length?\n(scale(_),reclip()):scale()};m.translate\x3dfunction(_){return arguments.length?(translate(_),reclip()):translate()};m.center\x3dfunction(_){return arguments.length?(center(_),reclip()):center()};m.clipExtent\x3dfunction(_){return arguments.length?(null\x3d\x3d_?x0\x3dy0\x3dx1\x3dy1\x3dnull:(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reclip()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};return reclip()}function conicConformalRaw(y0,y1){function project(x,y){0\x3cf?y\x3c-halfPi+1E-6\x26\x26(y\x3d-halfPi+1E-6):y\x3ehalfPi-1E-6\x26\x26(y\x3dhalfPi-1E-6);y\x3df/\npow(tan((halfPi+y)/2),n);return[y*sin(n*x),f-y*cos(n*x)]}var cy0\x3dcos(y0),n\x3dy0\x3d\x3d\x3dy1?sin(y0):log(cy0/cos(y1))/log(tan((halfPi+y1)/2)/tan((halfPi+y0)/2)),f\x3dcy0*pow(tan((halfPi+y0)/2),n)/n;if(!n)return mercatorRaw;project.invert\x3dfunction(x,y){y\x3df-y;var r\x3dsign$jscomp$0(n)*sqrt(x*x+y*y),l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/n,2*atan(pow(f/r,1/n))-halfPi]};return project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,\ny1){function project(x,y){y\x3dg-y;x*\x3dn;return[y*sin(x),g-y*cos(x)]}var cy0\x3dcos(y0),n\x3dy0\x3d\x3d\x3dy1?sin(y0):(cy0-cos(y1))/(y1-y0),g\x3dcy0/n+y0;if(1E-6\x3eabs(n))return equirectangularRaw;project.invert\x3dfunction(x,y){y\x3dg-y;var l\x3datan2(x,abs(y))*sign$jscomp$0(y);0\x3ey*n\x26\x26(l-\x3dpi*sign$jscomp$0(x)*sign$jscomp$0(y));return[l/n,g-sign$jscomp$0(n)*sqrt(x*x+y*y)]};return project}function equalEarthRaw(lambda,phi){phi\x3dasin(M*sin(phi));var l2\x3dphi*phi,l6\x3dl2*l2*l2;return[lambda*cos(phi)/(M*(1.340264+3*-.081106*l2+l6*(7*8.93E-4+\n.034164*l2))),phi*(1.340264+-.081106*l2+l6*(8.93E-4+.003796*l2))]}function gnomonicRaw(x,y){var cy\x3dcos(y),k\x3dcos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function naturalEarth1Raw(lambda,phi){var phi2\x3dphi*phi,phi4\x3dphi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(-.013791+phi4*(.003971*phi2-.001529*phi4))),phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))]}function orthographicRaw(x,y){return[cos(y)*sin(x),sin(y)]}function stereographicRaw(x,y){var cy\x3dcos(y),k\x3d1+cos(x)*cy;return[cy*\nsin(x)/k,sin(y)/k]}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}var pi\x3dMath.PI,halfPi\x3dpi/2,quarterPi\x3dpi/4,tau\x3d2*pi,degrees\x3d180/pi,radians\x3dpi/180,abs\x3dMath.abs,atan\x3dMath.atan,atan2\x3dMath.atan2,cos\x3dMath.cos,ceil\x3dMath.ceil,exp\x3dMath.exp,hypot\x3dMath.hypot,log\x3dMath.log,pow\x3dMath.pow,sin\x3dMath.sin,sign$jscomp$0\x3dMath.sign||function(x){return 0\x3cx?1:0\x3ex?-1:0},sqrt\x3dMath.sqrt,tan\x3dMath.tan,streamObjectType\x3d{Feature:function(object,stream){streamGeometry(object.geometry,stream)},\nFeatureCollection:function(object,stream){object\x3dobject.features;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamGeometry(object[i].geometry,stream)}},streamGeometryType\x3d{Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object\x3dobject.coordinates;stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates\x3dobject.coordinates,i\x3d-1,n\x3dcoordinates.length;++i\x3cn;)object\x3dcoordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,\nstream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamLine(object[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamPolygon(object[i],stream)},GeometryCollection:function(object,stream){object\x3dobject.geometries;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)streamGeometry(object[i],\nstream)}},areaRingSum\x3dnew d3Array.Adder,areaSum\x3dnew d3Array.Adder,lambda00,phi00,lambda0,cosPhi0,sinPhi0,areaStream\x3d{point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum\x3dnew d3Array.Adder;areaStream.lineStart\x3dareaRingStart;areaStream.lineEnd\x3dareaRingEnd},polygonEnd:function(){var areaRing\x3d+areaRingSum;areaSum.add(0\x3eareaRing?tau+areaRing:areaRing);this.lineStart\x3dthis.lineEnd\x3dthis.point\x3dnoop},sphere:function(){areaSum.add(tau)}},lambda0$1,phi0,lambda1,phi1$jscomp$0,lambda2$jscomp$0,\nlambda00$1,phi00$1,p0$jscomp$0,deltaSum,ranges,range$jscomp$0,boundsStream\x3d{point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point\x3dboundsRingPoint;boundsStream.lineStart\x3dboundsRingStart;boundsStream.lineEnd\x3dboundsRingEnd;deltaSum\x3dnew d3Array.Adder;areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd();boundsStream.point\x3dboundsPoint;boundsStream.lineStart\x3dboundsLineStart;boundsStream.lineEnd\x3dboundsLineEnd;0\x3eareaRingSum?(lambda0$1\x3d\n-(lambda1\x3d180),phi0\x3d-(phi1$jscomp$0\x3d90)):1E-6\x3cdeltaSum?phi1$jscomp$0\x3d90:-1E-6\x3edeltaSum\x26\x26(phi0\x3d-90);range$jscomp$0[0]\x3dlambda0$1;range$jscomp$0[1]\x3dlambda1},sphere:function(){lambda0$1\x3d-(lambda1\x3d180);phi0\x3d-(phi1$jscomp$0\x3d90)}},W0,W1,X0,Y0,Z0,X1,Y1,Z1,X2,Y2,Z2,lambda00$2,phi00$2,x0$jscomp$0,y0$jscomp$0,z0,centroidStream\x3d{sphere:noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart\x3dcentroidRingStart;centroidStream.lineEnd\x3dcentroidRingEnd},\npolygonEnd:function(){centroidStream.lineStart\x3dcentroidLineStart;centroidStream.lineEnd\x3dcentroidLineEnd}};rotationIdentity.invert\x3drotationIdentity;var clipAntimeridian\x3dclip$jscomp$0(function(){return!0},function(stream){var lambda0\x3dNaN,phi0$jscomp$0\x3dNaN,sign0\x3dNaN,clean;return{lineStart:function(){stream.lineStart();clean\x3d1},point:function(lambda1$jscomp$0,phi1){var sign1\x3d0\x3clambda1$jscomp$0?pi:-pi,delta\x3dabs(lambda1$jscomp$0-lambda0);if(1E-6\x3eabs(delta-pi))stream.point(lambda0,phi0$jscomp$0\x3d0\x3c(phi0$jscomp$0+\nphi1)/2?halfPi:-halfPi),stream.point(sign0,phi0$jscomp$0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0$jscomp$0),stream.point(lambda1$jscomp$0,phi0$jscomp$0),clean\x3d0;else if(sign0!\x3d\x3dsign1\x26\x26delta\x3e\x3dpi){1E-6\x3eabs(lambda0-sign0)\x26\x26(lambda0-\x3d1E-6*sign0);1E-6\x3eabs(lambda1$jscomp$0-sign1)\x26\x26(lambda1$jscomp$0-\x3d1E-6*sign1);delta\x3dlambda0;var phi0\x3dphi0$jscomp$0,lambda1\x3dlambda1$jscomp$0,cosPhi0,cosPhi1,sinLambda0Lambda1\x3dsin(delta-lambda1);phi0$jscomp$0\x3d1E-6\x3cabs(sinLambda0Lambda1)?atan((sin(phi0)*(cosPhi1\x3d\ncos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0\x3dcos(phi0))*sin(delta))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2;stream.point(sign0,phi0$jscomp$0);stream.lineEnd();stream.lineStart();stream.point(sign1,phi0$jscomp$0);clean\x3d0}stream.point(lambda0\x3dlambda1$jscomp$0,phi0$jscomp$0\x3dphi1);sign0\x3dsign1},lineEnd:function(){stream.lineEnd();lambda0\x3dphi0$jscomp$0\x3dNaN},clean:function(){return 2-clean}}},function(from,to,direction,stream){null\x3d\x3dfrom?(direction*\x3dhalfPi,stream.point(-pi,direction),stream.point(0,\ndirection),stream.point(pi,direction),stream.point(pi,0),stream.point(pi,-direction),stream.point(0,-direction),stream.point(-pi,-direction),stream.point(-pi,0),stream.point(-pi,direction)):1E-6\x3cabs(from[0]-to[0])?(from\x3dfrom[0]\x3cto[0]?pi:-pi,direction\x3ddirection*from/2,stream.point(-from,direction),stream.point(0,direction),stream.point(from,direction)):stream.point(to[0],to[1])},[-pi,-halfPi]),lengthSum,lambda0$2,sinPhi0$1,cosPhi0$1,lengthStream\x3d{sphere:noop,point:noop,lineStart:function(){lengthStream.point\x3d\nlengthPointFirst;lengthStream.lineEnd\x3dlengthLineEnd},lineEnd:noop,polygonStart:noop,polygonEnd:noop},coordinates$jscomp$0\x3d[null,null],object$jscomp$0\x3d{type:\x22LineString\x22,coordinates:coordinates$jscomp$0},containsObjectType\x3d{Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){object\x3dobject.features;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsGeometry(object[i].geometry,point))return!0;return!1}},containsGeometryType\x3d{Sphere:function(){return!0},\nPoint:function(object,point){return 0\x3d\x3d\x3ddistance(object.coordinates,point)},MultiPoint:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(0\x3d\x3d\x3ddistance(object[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsLine(object[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,\npoint)},MultiPolygon:function(object,point){object\x3dobject.coordinates;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsPolygon(object[i],point))return!0;return!1},GeometryCollection:function(object,point){object\x3dobject.geometries;for(var i\x3d-1,n\x3dobject.length;++i\x3cn;)if(containsGeometry(object[i],point))return!0;return!1}},identity\x3dx\x3d\x3ex,areaSum$1\x3dnew d3Array.Adder,areaRingSum$1\x3dnew d3Array.Adder,x00$jscomp$0,y00$jscomp$0,x0$1,y0$1,areaStream$1\x3d{point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaStream$1.lineStart\x3d\nareaRingStart$1;areaStream$1.lineEnd\x3dareaRingEnd$1},polygonEnd:function(){areaStream$1.lineStart\x3dareaStream$1.lineEnd\x3dareaStream$1.point\x3dnoop;areaSum$1.add(abs(areaRingSum$1));areaRingSum$1\x3dnew d3Array.Adder},result:function(){var area\x3dareaSum$1/2;areaSum$1\x3dnew d3Array.Adder;return area}},x0$2\x3dInfinity,y0$2\x3dx0$2,x1$jscomp$0\x3d-x0$2,y1$jscomp$0\x3dx1$jscomp$0,boundsStream$1\x3d{point:function(x,y){x\x3cx0$2\x26\x26(x0$2\x3dx);x\x3ex1$jscomp$0\x26\x26(x1$jscomp$0\x3dx);y\x3cy0$2\x26\x26(y0$2\x3dy);y\x3ey1$jscomp$0\x26\x26(y1$jscomp$0\x3dy)},lineStart:noop,\nlineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var bounds\x3d[[x0$2,y0$2],[x1$jscomp$0,y1$jscomp$0]];x1$jscomp$0\x3dy1$jscomp$0\x3d-(y0$2\x3dx0$2\x3dInfinity);return bounds}},X0$1\x3d0,Y0$1\x3d0,Z0$1\x3d0,X1$1\x3d0,Y1$1\x3d0,Z1$1\x3d0,X2$1\x3d0,Y2$1\x3d0,Z2$1\x3d0,x00$1,y00$1,x0$3,y0$3,centroidStream$1\x3d{point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart\x3dcentroidRingStart$1;centroidStream$1.lineEnd\x3dcentroidRingEnd$1},polygonEnd:function(){centroidStream$1.point\x3d\ncentroidPoint$1;centroidStream$1.lineStart\x3dcentroidLineStart$1;centroidStream$1.lineEnd\x3dcentroidLineEnd$1},result:function(){var centroid\x3dZ2$1?[X2$1/Z2$1,Y2$1/Z2$1]:Z1$1?[X1$1/Z1$1,Y1$1/Z1$1]:Z0$1?[X0$1/Z0$1,Y0$1/Z0$1]:[NaN,NaN];X0$1\x3dY0$1\x3dZ0$1\x3dX1$1\x3dY1$1\x3dZ1$1\x3dX2$1\x3dY2$1\x3dZ2$1\x3d0;return centroid}};PathContext.prototype\x3d{_radius:4.5,pointRadius:function(_){return this._radius\x3d_,this},polygonStart:function(){this._line\x3d0},polygonEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){0\x3d\x3d\x3d\nthis._line\x26\x26this._context.closePath();this._point\x3dNaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y);this._point\x3d1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau)}},result:noop};var lengthSum$1\x3dnew d3Array.Adder,lengthRing,x00$2,y00$2,x0$4,y0$4,lengthStream$1\x3d{point:noop,lineStart:function(){lengthStream$1.point\x3dlengthPointFirst$1},lineEnd:function(){lengthRing\x26\x26lengthPoint$1(x00$2,y00$2);\nlengthStream$1.point\x3dnoop},polygonStart:function(){lengthRing\x3d!0},polygonEnd:function(){lengthRing\x3dnull},result:function(){var length\x3d+lengthSum$1;lengthSum$1\x3dnew d3Array.Adder;return length}};PathString.prototype\x3d{_radius:4.5,_circle:circle$1(4.5),pointRadius:function(_){(_\x3d+_)!\x3d\x3dthis._radius\x26\x26(this._radius\x3d_,this._circle\x3dnull);return this},polygonStart:function(){this._line\x3d0},polygonEnd:function(){this._line\x3dNaN},lineStart:function(){this._point\x3d0},lineEnd:function(){0\x3d\x3d\x3dthis._line\x26\x26this._string.push(\x22Z\x22);\nthis._point\x3dNaN},point:function(x,y){switch(this._point){case 0:this._string.push(\x22M\x22,x,\x22,\x22,y);this._point\x3d1;break;case 1:this._string.push(\x22L\x22,x,\x22,\x22,y);break;default:null\x3d\x3dthis._circle\x26\x26(this._circle\x3dcircle$1(this._radius)),this._string.push(\x22M\x22,x,\x22,\x22,y,this._circle)}},result:function(){if(this._string.length){var result\x3dthis._string.join(\x22\x22);this._string\x3d[];return result}return null}};TransformStream.prototype\x3d{constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},\nlineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance\x3dcos(30*radians),transformRadians\x3dtransformer({point:function(x,y){this.stream.point(x*radians,y*radians)}}),azimuthalEqualAreaRaw\x3dazimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy))});azimuthalEqualAreaRaw.invert\x3dazimuthalInvert(function(z){return 2*asin(z/2)});var azimuthalEquidistantRaw\x3dazimuthalRaw(function(c){return(c\x3d\nacos(c))\x26\x26c/sin(c)});azimuthalEquidistantRaw.invert\x3dazimuthalInvert(function(z){return z});mercatorRaw.invert\x3dfunction(x,y){return[x,2*atan(exp(y))-halfPi]};equirectangularRaw.invert\x3dequirectangularRaw;var M\x3dsqrt(3)/2;equalEarthRaw.invert\x3dfunction(x,y){for(var l\x3dy,l2\x3dl*l,l6\x3dl2*l2*l2,i\x3d0,delta;12\x3ei\x26\x26!(delta\x3dl*(1.340264+-.081106*l2+l6*(8.93E-4+.003796*l2))-y,l2\x3d1.340264+3*-.081106*l2+l6*(7*8.93E-4+.034164*l2),l-\x3ddelta/\x3dl2,l2\x3dl*l,l6\x3dl2*l2*l2,1E-12\x3eabs(delta));++i);return[M*x*(1.340264+3*-.081106*l2+\nl6*(7*8.93E-4+.034164*l2))/cos(l),asin(sin(l)/M)]};gnomonicRaw.invert\x3dazimuthalInvert(atan);naturalEarth1Raw.invert\x3dfunction(x,y){var phi\x3dy,i\x3d25;do{var phi2\x3dphi*phi;var delta\x3dphi2*phi2;phi-\x3ddelta\x3d(phi*(1.007226+phi2*(.015085+delta*(-.044475+.028874*phi2-.005916*delta)))-y)/(1.007226+phi2*(.045255+delta*(-.311325+.259866*phi2-.005916*11*delta)))}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);return[x/(.8707+(phi2\x3dphi*phi)*(-.131979+phi2*(-.013791+phi2*phi2*phi2*(.003971-.001529*phi2)))),phi]};orthographicRaw.invert\x3d\nazimuthalInvert(asin);stereographicRaw.invert\x3dazimuthalInvert(function(z){return 2*atan(z)});transverseMercatorRaw.invert\x3dfunction(x,y){return[-y,2*atan(exp(x))-halfPi]};exports.geoAlbers\x3dalbers;exports.geoAlbersUsa\x3dfunction(){function albersUsa(coordinates){var x\x3dcoordinates[0];coordinates\x3dcoordinates[1];return point\x3dnull,(lower48Point.point(x,coordinates),point)||(alaskaPoint.point(x,coordinates),point)||(hawaiiPoint.point(x,coordinates),point)}function reset(){cache\x3dcacheStream\x3dnull;return albersUsa}\nvar cache,cacheStream,lower48\x3dalbers(),lower48Point,alaska\x3dconicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),alaskaPoint,hawaii\x3dconicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),hawaiiPoint,point,pointStream\x3d{point:function(x,y){point\x3d[x,y]}};albersUsa.invert\x3dfunction(coordinates){var k\x3dlower48.scale(),t\x3dlower48.translate(),x\x3d(coordinates[0]-t[0])/k;k\x3d(coordinates[1]-t[1])/k;return(.12\x3c\x3dk\x26\x26.234\x3ek\x26\x26-.425\x3c\x3dx\x26\x26-.214\x3ex?alaska:.166\x3c\x3dk\x26\x26.234\x3ek\x26\x26-.214\x3c\x3dx\x26\x26-.115\x3ex?hawaii:\nlower48).invert(coordinates)};albersUsa.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dmultiplex([lower48.stream(cacheStream\x3dstream),alaska.stream(stream),hawaii.stream(stream)])};albersUsa.precision\x3dfunction(_){if(!arguments.length)return lower48.precision();lower48.precision(_);alaska.precision(_);hawaii.precision(_);return reset()};albersUsa.scale\x3dfunction(_){if(!arguments.length)return lower48.scale();lower48.scale(_);alaska.scale(.35*_);hawaii.scale(_);return albersUsa.translate(lower48.translate())};\nalbersUsa.translate\x3dfunction(_){if(!arguments.length)return lower48.translate();var k\x3dlower48.scale(),x\x3d+_[0],y\x3d+_[1];lower48Point\x3dlower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream);alaskaPoint\x3dalaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+1E-6,y+.12*k+1E-6],[x-.214*k-1E-6,y+.234*k-1E-6]]).stream(pointStream);hawaiiPoint\x3dhawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+1E-6,y+.166*k+1E-6],[x-.115*k-1E-6,y+.234*k-1E-6]]).stream(pointStream);\nreturn reset()};albersUsa.fitExtent\x3dfunction(extent,object){return fitExtent(albersUsa,extent,object)};albersUsa.fitSize\x3dfunction(size,object){return fitExtent(albersUsa,[[0,0],size],object)};albersUsa.fitWidth\x3dfunction(width,object){return fitWidth(albersUsa,width,object)};albersUsa.fitHeight\x3dfunction(height,object){return fitHeight(albersUsa,height,object)};return albersUsa.scale(1070)};exports.geoArea\x3dfunction(object){areaSum\x3dnew d3Array.Adder;geoStream(object,areaStream);return 2*areaSum};exports.geoAzimuthalEqualArea\x3d\nfunction(){return projection$jscomp$0(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)};exports.geoAzimuthalEqualAreaRaw\x3dazimuthalEqualAreaRaw;exports.geoAzimuthalEquidistant\x3dfunction(){return projection$jscomp$0(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)};exports.geoAzimuthalEquidistantRaw\x3dazimuthalEquidistantRaw;exports.geoBounds\x3dfunction(feature){var n,merged,delta;phi1$jscomp$0\x3dlambda1\x3d-(lambda0$1\x3dphi0\x3dInfinity);ranges\x3d[];geoStream(feature,boundsStream);if(n\x3dranges.length){ranges.sort(rangeCompare);\nfeature\x3d1;var a\x3dranges[0];for(merged\x3d[a];feature\x3cn;++feature){var b\x3dranges[feature];rangeContains(a,b[0])||rangeContains(a,b[1])?(angle$jscomp$0(a[0],b[1])\x3eangle$jscomp$0(a[0],a[1])\x26\x26(a[1]\x3db[1]),angle$jscomp$0(b[0],a[1])\x3eangle$jscomp$0(a[0],a[1])\x26\x26(a[0]\x3db[0])):merged.push(a\x3db)}var deltaMax\x3d-Infinity;n\x3dmerged.length-1;feature\x3d0;for(a\x3dmerged[n];feature\x3c\x3dn;a\x3db,++feature)b\x3dmerged[feature],(delta\x3dangle$jscomp$0(a[1],b[0]))\x3edeltaMax\x26\x26(deltaMax\x3ddelta,lambda0$1\x3db[0],lambda1\x3da[1])}ranges\x3drange$jscomp$0\x3dnull;\nreturn Infinity\x3d\x3d\x3dlambda0$1||Infinity\x3d\x3d\x3dphi0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1$jscomp$0]]};exports.geoCentroid\x3dfunction(object){W0\x3dW1\x3dX0\x3dY0\x3dZ0\x3dX1\x3dY1\x3dZ1\x3d0;X2\x3dnew d3Array.Adder;Y2\x3dnew d3Array.Adder;Z2\x3dnew d3Array.Adder;geoStream(object,centroidStream);object\x3d+X2;var y\x3d+Y2,z\x3d+Z2,m\x3dhypot(object,y,z);return 1E-12\x3em\x26\x26(object\x3dX1,y\x3dY1,z\x3dZ1,1E-6\x3eW1\x26\x26(object\x3dX0,y\x3dY0,z\x3dZ0),m\x3dhypot(object,y,z),1E-12\x3em)?[NaN,NaN]:[atan2(y,object)*degrees,asin(z/m)*degrees]};exports.geoCircle\x3dfunction(){function circle(){var c\x3d\ncenter.apply(this,arguments),r\x3dradius.apply(this,arguments)*radians,p\x3dprecision.apply(this,arguments)*radians;ring\x3d[];rotate\x3drotateRadians(-c[0]*radians,-c[1]*radians,0).invert;circleStream(stream,r,p,1);c\x3d{type:\x22Polygon\x22,coordinates:[ring]};ring\x3drotate\x3dnull;return c}var center\x3dconstant([0,0]),radius\x3dconstant(90),precision\x3dconstant(6),ring,rotate,stream\x3d{point:function(x,y){ring.push(x\x3drotate(x,y));x[0]*\x3ddegrees;x[1]*\x3ddegrees}};circle.center\x3dfunction(_){return arguments.length?(center\x3d\x22function\x22\x3d\x3d\x3d\ntypeof _?_:constant([+_[0],+_[1]]),circle):center};circle.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),circle):radius};circle.precision\x3dfunction(_){return arguments.length?(precision\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),circle):precision};return circle};exports.geoClipAntimeridian\x3dclipAntimeridian;exports.geoClipCircle\x3dclipCircle;exports.geoClipExtent\x3dfunction(){var x0\x3d0,y0\x3d0,x1\x3d960,y1\x3d500,cache,cacheStream,clip;return clip\x3d{stream:function(stream){return cache\x26\x26\ncacheStream\x3d\x3d\x3dstream?cache:cache\x3dclipRectangle(x0,y0,x1,y1)(cacheStream\x3dstream)},extent:function(_){return arguments.length?(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1],cache\x3dcacheStream\x3dnull,clip):[[x0,y0],[x1,y1]]}}};exports.geoClipRectangle\x3dclipRectangle;exports.geoConicConformal\x3dfunction(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};exports.geoConicConformalRaw\x3dconicConformalRaw;exports.geoConicEqualArea\x3dconicEqualArea;exports.geoConicEqualAreaRaw\x3dconicEqualAreaRaw;\nexports.geoConicEquidistant\x3dfunction(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])};exports.geoConicEquidistantRaw\x3dconicEquidistantRaw;exports.geoContains\x3dfunction(object,point){return(object\x26\x26containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)};exports.geoDistance\x3ddistance;exports.geoEqualEarth\x3dfunction(){return projection$jscomp$0(equalEarthRaw).scale(177.158)};exports.geoEqualEarthRaw\x3dequalEarthRaw;exports.geoEquirectangular\x3d\nfunction(){return projection$jscomp$0(equirectangularRaw).scale(152.63)};exports.geoEquirectangularRaw\x3dequirectangularRaw;exports.geoGnomonic\x3dfunction(){return projection$jscomp$0(gnomonicRaw).scale(144.049).clipAngle(60)};exports.geoGnomonicRaw\x3dgnomonicRaw;exports.geoGraticule\x3dgraticule$jscomp$0;exports.geoGraticule10\x3dfunction(){return graticule$jscomp$0()()};exports.geoIdentity\x3dfunction(){function reset(){kx\x3dk*sx;ky\x3dk*sy;cache\x3dcacheStream\x3dnull;return projection}function projection(p){var x\x3dp[0]*\nkx;p\x3dp[1]*ky;if(alpha){var t\x3dp*ca-x*sa;x\x3dx*ca+p*sa;p\x3dt}return[x+tx,p+ty]}var k\x3d1,tx\x3d0,ty\x3d0,sx\x3d1,sy\x3d1,alpha\x3d0,ca,sa,x0\x3dnull,y0,x1,y1,kx\x3d1,ky\x3d1,transform\x3dtransformer({point:function(x,y){x\x3dprojection([x,y]);this.stream.point(x[0],x[1])}}),postclip\x3didentity,cache,cacheStream;projection.invert\x3dfunction(p){var x\x3dp[0]-tx;p\x3dp[1]-ty;if(alpha){var t\x3dp*ca+x*sa;x\x3dx*ca-p*sa;p\x3dt}return[x/kx,p/ky]};projection.stream\x3dfunction(stream){return cache\x26\x26cacheStream\x3d\x3d\x3dstream?cache:cache\x3dtransform(postclip(cacheStream\x3d\nstream))};projection.postclip\x3dfunction(_){return arguments.length?(postclip\x3d_,x0\x3dy0\x3dx1\x3dy1\x3dnull,reset()):postclip};projection.clipExtent\x3dfunction(_){return arguments.length?(postclip\x3dnull\x3d\x3d_?(x0\x3dy0\x3dx1\x3dy1\x3dnull,identity):clipRectangle(x0\x3d+_[0][0],y0\x3d+_[0][1],x1\x3d+_[1][0],y1\x3d+_[1][1]),reset()):null\x3d\x3dx0?null:[[x0,y0],[x1,y1]]};projection.scale\x3dfunction(_){return arguments.length?(k\x3d+_,reset()):k};projection.translate\x3dfunction(_){return arguments.length?(tx\x3d+_[0],ty\x3d+_[1],reset()):[tx,ty]};projection.angle\x3d\nfunction(_){return arguments.length?(alpha\x3d_%360*radians,sa\x3dsin(alpha),ca\x3dcos(alpha),reset()):alpha*degrees};projection.reflectX\x3dfunction(_){return arguments.length?(sx\x3d_?-1:1,reset()):0\x3esx};projection.reflectY\x3dfunction(_){return arguments.length?(sy\x3d_?-1:1,reset()):0\x3esy};projection.fitExtent\x3dfunction(extent,object){return fitExtent(projection,extent,object)};projection.fitSize\x3dfunction(size,object){return fitExtent(projection,[[0,0],size],object)};projection.fitWidth\x3dfunction(width,object){return fitWidth(projection,\nwidth,object)};projection.fitHeight\x3dfunction(height,object){return fitHeight(projection,height,object)};return projection};exports.geoInterpolate\x3dfunction(a,b){var x0\x3da[0]*radians,y0\x3da[1]*radians;a\x3db[0]*radians;b\x3db[1]*radians;var cy0\x3dcos(y0),sy0\x3dsin(y0),cy1\x3dcos(b),sy1\x3dsin(b),kx0\x3dcy0*cos(x0),ky0\x3dcy0*sin(x0),kx1\x3dcy1*cos(a),ky1\x3dcy1*sin(a),d\x3d2*asin(sqrt(haversin(b-y0)+cy0*cy1*haversin(a-x0))),k\x3dsin(d);a\x3dd?function(t){var B\x3dsin(t*\x3dd)/k,A\x3dsin(d-t)/k;t\x3dA*kx0+B*kx1;var y\x3dA*ky0+B*ky1;B\x3dA*sy0+B*sy1;return[atan2(y,\nt)*degrees,atan2(B,sqrt(t*t+y*y))*degrees]}:function(){return[x0*degrees,y0*degrees]};a.distance\x3dd;return a};exports.geoLength\x3dlength$jscomp$0;exports.geoMercator\x3dfunction(){return mercatorProjection(mercatorRaw).scale(961/tau)};exports.geoMercatorRaw\x3dmercatorRaw;exports.geoNaturalEarth1\x3dfunction(){return projection$jscomp$0(naturalEarth1Raw).scale(175.295)};exports.geoNaturalEarth1Raw\x3dnaturalEarth1Raw;exports.geoOrthographic\x3dfunction(){return projection$jscomp$0(orthographicRaw).scale(249.5).clipAngle(90.000001)};\nexports.geoOrthographicRaw\x3dorthographicRaw;exports.geoPath\x3dfunction(projection,context){function path(object){object\x26\x26(\x22function\x22\x3d\x3d\x3dtypeof pointRadius\x26\x26contextStream.pointRadius(+pointRadius.apply(this,arguments)),geoStream(object,projectionStream(contextStream)));return contextStream.result()}var pointRadius\x3d4.5,projectionStream,contextStream;path.area\x3dfunction(object){geoStream(object,projectionStream(areaStream$1));return areaStream$1.result()};path.measure\x3dfunction(object){geoStream(object,projectionStream(lengthStream$1));\nreturn lengthStream$1.result()};path.bounds\x3dfunction(object){geoStream(object,projectionStream(boundsStream$1));return boundsStream$1.result()};path.centroid\x3dfunction(object){geoStream(object,projectionStream(centroidStream$1));return centroidStream$1.result()};path.projection\x3dfunction(_){return arguments.length?(projectionStream\x3dnull\x3d\x3d_?(projection\x3dnull,identity):(projection\x3d_).stream,path):projection};path.context\x3dfunction(_){if(!arguments.length)return context;contextStream\x3dnull\x3d\x3d_?(context\x3dnull,\nnew PathString):new PathContext(context\x3d_);\x22function\x22!\x3d\x3dtypeof pointRadius\x26\x26contextStream.pointRadius(pointRadius);return path};path.pointRadius\x3dfunction(_){if(!arguments.length)return pointRadius;pointRadius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:(contextStream.pointRadius(+_),+_);return path};return path.projection(projection).context(context)};exports.geoProjection\x3dprojection$jscomp$0;exports.geoProjectionMutator\x3dprojectionMutator;exports.geoRotation\x3drotation$jscomp$0;exports.geoStereographic\x3dfunction(){return projection$jscomp$0(stereographicRaw).scale(250).clipAngle(142)};\nexports.geoStereographicRaw\x3dstereographicRaw;exports.geoStream\x3dgeoStream;exports.geoTransform\x3dfunction(methods){return{stream:transformer(methods)}};exports.geoTransverseMercator\x3dfunction(){var m\x3dmercatorProjection(transverseMercatorRaw),center\x3dm.center,rotate\x3dm.rotate;m.center\x3dfunction(_){return arguments.length?center([-_[1],_[0]]):(_\x3dcenter(),[_[1],-_[0]])};m.rotate\x3dfunction(_){return arguments.length?rotate([_[0],_[1],2\x3c_.length?_[2]+90:90]):(_\x3drotate(),[_[0],_[1],_[2]-90])};return rotate([0,\n0,90]).scale(159.155)};exports.geoTransverseMercatorRaw\x3dtransverseMercatorRaw;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_geo_projection$dist$d3_geo_projection.js", true , "shadow$provide.module$node_modules$d3_geo_projection$dist$d3_geo_projection\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-geo\x22,\x22d3-array\x22],factory):factory(global.d3\x3dglobal.d3||{},global.d3,global.d3)})(this,\nfunction(exports,d3Geo,d3Array){function asin(x){return 1\x3cx?halfPi:-1\x3ex?-halfPi:Math.asin(x)}function acos(x){return 1\x3cx?0:-1\x3ex?pi$jscomp$0:Math.acos(x)}function sqrt(x){return 0\x3cx?Math.sqrt(x):0}function sinh(x){return(exp(x)-exp(-x))/2}function cosh(x){return(exp(x)+exp(-x))/2}function airyRaw(beta){function forward(x,y){var cosx\x3dcos(x),cosy\x3dcos(y);y\x3dsin(y);cosx*\x3dcosy;cosx\x3d-((1-cosx?log((1+cosx)/2)/(1-cosx):-.5)+b/(1+cosx));return[cosx*cosy*sin(x),cosx*y]}var tanBeta_2\x3dtan(beta/2),b\x3d2*log(cos(beta/\n2))/(tanBeta_2*tanBeta_2);forward.invert\x3dfunction(x,y){var r\x3dsqrt(x*x+y*y),z\x3d-beta/2,i\x3d50;if(!r)return[0,0];do{var z_2\x3dz/2;var delta\x3dcos(z_2);z_2\x3dsin(z_2);var tanz_2\x3dz_2/delta,lnsecz_2\x3d-log(abs(delta));z-\x3ddelta\x3d(2/tanz_2*lnsecz_2-b*tanz_2-r)/(-lnsecz_2/(z_2*z_2)+1-b/(2*delta*delta))*(0\x3edelta?.7:1)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);i\x3dsin(z);return[atan2(x*i,r*cos(z)),asin(y*i/r)]};return forward}function aitoffRaw(x,y){var cosy\x3dcos(y);var sincia\x3d(sincia\x3dacos(cosy*cos(x/\x3d2)))?sincia/Math.sin(sincia):1;\nreturn[2*cosy*sin(x)*sincia,sin(y)*sincia]}function armadilloRaw(phi0){function forward(lambda,phi){var cosPhi\x3dcos(phi),cosLambda\x3dcos(lambda/\x3d2);return[(1+cosPhi)*sin(lambda),(sPhi0*phi\x3e-atan2(cosLambda,tanPhi0)-.001?0:10*-sPhi0)+k+sin(phi)*cosPhi0-(1+cosPhi)*sinPhi0*cosLambda]}var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0),sPhi0\x3d0\x3c\x3dphi0?1:-1,tanPhi0\x3dtan(sPhi0*phi0),k\x3d(1+sinPhi0-cosPhi0)/2;forward.invert\x3dfunction(x,y){var lambda\x3d0,phi\x3d0,i\x3d50;do{var cosLambda\x3dcos(lambda),sinLambda\x3dsin(lambda),cosPhi\x3dcos(phi),\nsinPhi\x3dsin(phi),A\x3d1+cosPhi,fx\x3dA*sinLambda-x,fy\x3dk+sinPhi*cosPhi0-A*sinPhi0*cosLambda-y,dxdLambda\x3dA*cosLambda/2,dxdPhi\x3d-sinLambda*sinPhi;sinLambda\x3dsinPhi0*A*sinLambda/2;cosPhi\x3dcosPhi0*cosPhi+sinPhi0*cosLambda*sinPhi;cosLambda\x3ddxdPhi*sinLambda-cosPhi*dxdLambda;dxdPhi\x3d(fy*dxdPhi-fx*cosPhi)/cosLambda/2;fx\x3d(fx*sinLambda-fy*dxdLambda)/cosLambda;2\x3cabs(fx)\x26\x26(fx/\x3d2);lambda-\x3ddxdPhi;phi-\x3dfx}while((1E-6\x3cabs(dxdPhi)||1E-6\x3cabs(fx))\x26\x260\x3c--i);return sPhi0*phi\x3e-atan2(cos(lambda),tanPhi0)-.001?[2*lambda,phi]:null};return forward}\nfunction augustRaw(lambda,phi){phi\x3dtan(phi/2);var k\x3dsqrt(1-phi*phi),c\x3d1+k*cos(lambda/\x3d2);lambda\x3dsin(lambda)*k/c;phi/\x3dc;c\x3dlambda*lambda;k\x3dphi*phi;return[4/3*lambda*(3+c-3*k),4/3*phi*(3+3*c-k)]}function bakerRaw(lambda,phi){var phi0\x3dabs(phi);return phi0\x3cquarterPi?[lambda,log(tan(quarterPi+phi/2))]:[lambda*cos(phi0)*(2*sqrt2-1/sin(phi0)),sign(phi)*(2*sqrt2*(phi0-quarterPi)-log(tan(phi0/2)))]}function berghausRaw(lobes){function forward(lambda,phi){phi\x3dd3Geo.geoAzimuthalEquidistantRaw(lambda,phi);if(abs(lambda)\x3e\nhalfPi){lambda\x3datan2(phi[1],phi[0]);var r\x3dsqrt(phi[0]*phi[0]+phi[1]*phi[1]),theta0\x3dk*round((lambda-halfPi)/k)+halfPi,alpha\x3datan2(sin(lambda-\x3dtheta0),2-cos(lambda));lambda\x3dtheta0+asin(pi$jscomp$0/r*sin(alpha))-alpha;phi[0]\x3dr*cos(lambda);phi[1]\x3dr*sin(lambda)}return phi}var k\x3d2*pi$jscomp$0/lobes;forward.invert\x3dfunction(x,y){var r\x3dsqrt(x*x+y*y);if(r\x3ehalfPi){var theta\x3datan2(y,x);x\x3dk*round((theta-halfPi)/k)+halfPi;y\x3dtheta\x3ex?-1:1;theta\x3dr*cos(x-theta);theta\x3d1/tan(y*acos((theta-pi$jscomp$0)/sqrt(pi$jscomp$0*\n(pi$jscomp$0-2*theta)+r*r)));theta\x3dx+2*atan((theta+y*sqrt(theta*theta-3))/3);x\x3dr*cos(theta);y\x3dr*sin(theta)}return d3Geo.geoAzimuthalEquidistantRaw.invert(x,y)};return forward}function hammerRaw(A,B){function forward(lambda,phi){lambda\x3dd3Geo.geoAzimuthalEqualAreaRaw(lambda/B,phi);lambda[0]*\x3dA;return lambda}2\x3earguments.length\x26\x26(B\x3dA);if(1\x3d\x3d\x3dB)return d3Geo.geoAzimuthalEqualAreaRaw;if(Infinity\x3d\x3d\x3dB)return hammerQuarticAuthalicRaw;forward.invert\x3dfunction(x,y){x\x3dd3Geo.geoAzimuthalEqualAreaRaw.invert(x/A,\ny);x[0]*\x3dB;return x};return forward}function hammerQuarticAuthalicRaw(lambda,phi){return[lambda*cos(phi)/cos(phi/\x3d2),2*sin(phi)]}function solve(f,y,x){var steps\x3d100;x\x3dvoid 0\x3d\x3d\x3dx?0:+x;y\x3d+y;do{var delta\x3df(x);var f1\x3df(x+1E-6);delta\x3d\x3d\x3df1\x26\x26(f1\x3ddelta+1E-6);x-\x3ddelta\x3d-1E-6*(delta-y)/(delta-f1)}while(0\x3csteps--\x26\x261E-6\x3cabs(delta));return 0\x3esteps?NaN:x}function solve2d(f,MAX_ITERATIONS,eps){void 0\x3d\x3d\x3dMAX_ITERATIONS\x26\x26(MAX_ITERATIONS\x3d40);void 0\x3d\x3d\x3deps\x26\x26(eps\x3d1E-12);return function(x,y,a,b){a\x3dvoid 0\x3d\x3d\x3da?0:+a;b\x3dvoid 0\x3d\x3d\x3d\nb?0:+b;for(var i\x3d0;i\x3cMAX_ITERATIONS;i++){var p\x3df(a,b),tx\x3dp[0]-x,ty\x3dp[1]-y;if(abs(tx)\x3ceps\x26\x26abs(ty)\x3ceps)break;var h\x3dtx*tx+ty*ty;if(h\x3eerr2)a-\x3dda/\x3d2,b-\x3ddb/\x3d2;else{var err2\x3dh;h\x3d(0\x3ca?-1:1)*eps;var eb\x3d(0\x3cb?-1:1)*eps;var da\x3df(a+h,b);var pb\x3df(a,b+eb);var db\x3d(da[0]-p[0])/h;h\x3d(da[1]-p[1])/h;da\x3d(pb[0]-p[0])/eb;p\x3d(pb[1]-p[1])/eb;eb\x3dp*db-h*da;eb\x3d(.5\x3eabs(eb)?.5:1)/eb;da\x3d(ty*da-tx*p)*eb;db\x3d(tx*h-ty*db)*eb;a+\x3dda;b+\x3ddb;if(abs(da)\x3ceps\x26\x26abs(db)\x3ceps)break}}return[a,b]}}function bertin1953Raw(){function forward(lambda,\nphi){if(-1.4\x3elambda+phi){var u\x3d(lambda-phi+1.6)*(lambda+phi+1.4)/8;lambda+\x3du;phi-\x3d.8*u*sin(phi+pi$jscomp$0/2)}u\x3dhammer$$1(lambda,phi);lambda\x3d(1-cos(lambda*phi))/12;0\x3eu[1]\x26\x26(u[0]*\x3d1+lambda);0\x3cu[1]\x26\x26(u[1]*\x3d1+lambda/1.5*u[0]*u[0]);return u}var hammer$$1\x3dhammerRaw(1.68,2);forward.invert\x3dsolve2d(forward);return forward}function mollweideBromleyTheta(cp,phi){cp*\x3dsin(phi);var i\x3d30,delta;do phi-\x3ddelta\x3d(phi+sin(phi)-cp)/(1+cos(phi));while(1E-6\x3cabs(delta)\x26\x260\x3c--i);return phi/2}function mollweideBromleyRaw(cx,\ncy,cp){function forward(lambda,phi){return[cx*lambda*cos(phi\x3dmollweideBromleyTheta(cp,phi)),cy*sin(phi)]}forward.invert\x3dfunction(x,y){return y\x3dasin(y/cy),[x/(cx*cos(y)),asin((2*y+sin(2*y))/cp)]};return forward}function boggsRaw(lambda,phi){var theta\x3dmollweideBromleyTheta(pi$jscomp$0,phi);return[2.00276*lambda/(1/cos(phi)+1.11072/cos(theta)),(phi+sqrt2*sin(theta))/2.00276]}function parallel1(projectAt){var phi0\x3d0,m\x3dd3Geo.geoProjectionMutator(projectAt);projectAt\x3dm(phi0);projectAt.parallel\x3dfunction(_){return arguments.length?\nm(phi0\x3d_*radians):phi0*degrees};return projectAt}function sinusoidalRaw(lambda,phi){return[lambda*cos(phi),phi]}function bonneRaw(phi0){function forward(lambda,phi){var rho\x3dcotPhi0+phi0-phi;lambda\x3drho?lambda*cos(phi)/rho:rho;return[rho*sin(lambda),cotPhi0-rho*cos(lambda)]}if(!phi0)return sinusoidalRaw;var cotPhi0\x3d1/tan(phi0);forward.invert\x3dfunction(x,y){var rho\x3dsqrt(x*x+(y\x3dcotPhi0-y)*y),phi\x3dcotPhi0+phi0-rho;return[rho/cos(phi)*atan2(x,y),phi]};return forward}function bottomleyRaw(sinPsi){function forward(lambda,\nphi){lambda\x3d(phi\x3dhalfPi-phi)?lambda*sinPsi*sin(phi)/phi:phi;return[phi*sin(lambda)/sinPsi,halfPi-phi*cos(lambda)]}forward.invert\x3dfunction(x,y){x*\x3dsinPsi;var y1\x3dhalfPi-y;y\x3dsqrt(x*x+y1*y1);x\x3datan2(x,y1);return[(y?y/sin(y):1)*x/sinPsi,halfPi-y]};return forward}function distance$jscomp$0(dPhi,c1,s1,c2,s2,dLambda){var cosdLambda\x3dcos(dLambda);if(1\x3cabs(dPhi)||1\x3cabs(dLambda))dPhi\x3dacos(s1*s2+c1*c2*cosdLambda);else{dPhi\x3dsin(dPhi/2);var sindLambda\x3dsin(dLambda/2);dPhi\x3d2*asin(sqrt(dPhi*dPhi+c1*c2*sindLambda*sindLambda))}return 1E-6\x3c\nabs(dPhi)?[dPhi,atan2(c2*sin(dLambda),c1*s2-s1*c2*cosdLambda)]:[0,0]}function angle(b,c,a){return acos((b*b+c*c-a*a)/(2*b*c))}function chamberlinRaw(p0,p1,p2){var points\x3d[[p0[0],p0[1],sin(p0[1]),cos(p0[1])],[p1[0],p1[1],sin(p1[1]),cos(p1[1])],[p2[0],p2[1],sin(p2[1]),cos(p2[1])]];p0\x3dpoints[2];for(p2\x3d0;3\x3ep2;++p2,p0\x3dp1)p1\x3dpoints[p2],p0.v\x3ddistance$jscomp$0(p1[1]-p0[1],p0[3],p0[2],p1[3],p1[2],p1[0]-p0[0]),p0.point\x3d[0,0];p0\x3dangle(points[0].v[0],points[2].v[0],points[1].v[0]);var beta1\x3dangle(points[0].v[0],\npoints[1].v[0],points[2].v[0]),beta2\x3dpi$jscomp$0-p0;points[2].point[1]\x3d0;points[0].point[0]\x3d-(points[1].point[0]\x3dpoints[0].v[0]/2);var mean\x3d[points[2].point[0]\x3dpoints[0].point[0]+points[2].v[0]*cos(p0),2*(points[0].point[1]\x3dpoints[1].point[1]\x3dpoints[2].v[0]*sin(p0))];return function(lambda,phi){var sinPhi\x3dsin(phi),cosPhi\x3dcos(phi),v\x3dArray(3),i;for(i\x3d0;3\x3ei;++i){var p\x3dpoints[i];v[i]\x3ddistance$jscomp$0(phi-p[1],p[3],p[2],cosPhi,sinPhi,lambda-p[0]);if(!v[i][0])return p.point;var JSCompiler_temp_const\x3dv[i];\np\x3dv[i][1]-p.v[1];p-\x3d2*pi$jscomp$0*floor((p+pi$jscomp$0)/(2*pi$jscomp$0));JSCompiler_temp_const[1]\x3dp}lambda\x3dmean.slice();for(i\x3d0;3\x3ei;++i)phi\x3dangle(points[i].v[0],v[i][0],v[2\x3d\x3di?0:i+1][0]),0\x3ev[i][1]\x26\x26(phi\x3d-phi),i?1\x3d\x3di?(phi\x3dbeta1-phi,lambda[0]-\x3dv[i][0]*cos(phi),lambda[1]-\x3dv[i][0]*sin(phi)):(phi\x3dbeta2-phi,lambda[0]+\x3dv[i][0]*cos(phi),lambda[1]+\x3dv[i][0]*sin(phi)):(lambda[0]+\x3dv[i][0]*cos(phi),lambda[1]-\x3dv[i][0]*sin(phi));lambda[0]/\x3d3;lambda[1]/\x3d3;return lambda}}function pointRadians(p){return p[0]*\x3dradians,\np[1]*\x3dradians,p}function chamberlin(p0,p1,p2){var c\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:[p0,p1,p2]});c\x3d[-c[0],-c[1]];var r\x3dd3Geo.geoRotation(c);p0\x3dchamberlinRaw(pointRadians(r(p0)),pointRadians(r(p1)),pointRadians(r(p2)));p0.invert\x3dsolve2d(p0);p0\x3dd3Geo.geoProjection(p0).rotate(c);var center\x3dp0.center;delete p0.rotate;p0.center\x3dfunction(_){return arguments.length?center(r(_)):r.invert(center())};return p0.clipAngle(90)}function collignonRaw(lambda,phi){phi\x3dsqrt(1-sin(phi));return[2/sqrtPi*\nlambda*phi,sqrtPi*(1-phi)]}function craigRaw(phi0){function forward(lambda,phi){return[lambda,(lambda?lambda/sin(lambda):1)*(sin(phi)*cos(lambda)-tanPhi0*cos(phi))]}var tanPhi0\x3dtan(phi0);forward.invert\x3dtanPhi0?function(x,y){x\x26\x26(y*\x3dsin(x)/x);var cosLambda\x3dcos(x);return[x,2*atan2(sqrt(cosLambda*cosLambda+tanPhi0*tanPhi0-y*y)-cosLambda,tanPhi0-y)]}:function(x,y){return[x,asin(x?y*tan(x)/x:y)]};return forward}function crasterRaw(lambda,phi){return[sqrt3*lambda*(2*cos(2*phi/3)-1)/sqrtPi,sqrt3*sqrtPi*sin(phi/\n3)]}function cylindricalEqualAreaRaw(phi0){function forward(lambda,phi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,asin(y*cosPhi0)]};return forward}function cylindricalStereographicRaw(phi0){function forward(lambda,phi){return[lambda*cosPhi0,(1+cosPhi0)*tan(phi/2)]}var cosPhi0\x3dcos(phi0);forward.invert\x3dfunction(x,y){return[x/cosPhi0,2*atan(y/(1+cosPhi0))]};return forward}function eckert1Raw(lambda,phi){var alpha\x3dsqrt(8/(3*pi$jscomp$0));\nreturn[alpha*lambda*(1-abs(phi)/pi$jscomp$0),alpha*phi]}function eckert2Raw(lambda,phi){var alpha\x3dsqrt(4-3*sin(abs(phi)));return[2/sqrt(6*pi$jscomp$0)*lambda*alpha,sign(phi)*sqrt(2*pi$jscomp$0/3)*(2-alpha)]}function eckert3Raw(lambda,phi){var k\x3dsqrt(pi$jscomp$0*(4+pi$jscomp$0));return[2/k*lambda*(1+sqrt(1-4*phi*phi/(pi$jscomp$0*pi$jscomp$0))),4/k*phi]}function eckert4Raw(lambda,phi){var k\x3d(2+halfPi)*sin(phi);phi/\x3d2;for(var i\x3d0,delta\x3dInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);i++)delta\x3dcos(phi),phi-\x3ddelta\x3d(phi+\nsin(phi)*(delta+2)-k)/(2*delta*(1+delta));return[2/sqrt(pi$jscomp$0*(4+pi$jscomp$0))*lambda*(1+cos(phi)),2*sqrt(pi$jscomp$0/(4+pi$jscomp$0))*sin(phi)]}function eckert5Raw(lambda,phi){return[lambda*(1+cos(phi))/sqrt(2+pi$jscomp$0),2*phi/sqrt(2+pi$jscomp$0)]}function eckert6Raw(lambda,phi){for(var k\x3d(1+halfPi)*sin(phi),i\x3d0,delta\x3dInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);i++)phi-\x3ddelta\x3d(phi+sin(phi)-k)/(1+cos(phi));k\x3dsqrt(2+pi$jscomp$0);return[lambda*(1+cos(phi))/k,2*phi/k]}function eisenlohrRaw(lambda,phi){var s0\x3d\nsin(lambda/\x3d2);lambda\x3dcos(lambda);var k\x3dsqrt(cos(phi)),c1\x3dcos(phi/\x3d2);phi\x3dsin(phi)/(c1+sqrt2*lambda*k);var c\x3dsqrt(2/(1+phi*phi));s0\x3dsqrt((sqrt2*c1+(lambda+s0)*k)/(sqrt2*c1+(lambda-s0)*k));return[eisenlohrK*(c*(s0-1/s0)-2*log(s0)),eisenlohrK*(c*phi*(s0+1/s0)-2*atan(phi))]}function faheyRaw(lambda,phi){phi\x3dtan(phi/2);return[lambda*faheyK*sqrt(1-phi*phi),(1+faheyK)*phi]}function foucautRaw(lambda,phi){var k\x3dphi/2,cosk\x3dcos(k);return[2*lambda/sqrtPi*cos(phi)*cosk*cosk,sqrtPi*tan(k)]}function foucautSinusoidalRaw(alpha){function raw(lambda,\nphi){var cosphi\x3dcos(phi),sinphi\x3dsin(phi);return[cosphi/(beta+alpha*cosphi)*lambda,beta*phi+alpha*sinphi]}function forward(lambda,phi){lambda\x3draw(lambda,phi);return[lambda[0]*ratio,lambda[1]/ratio]}function forwardMeridian(phi){return forward(0,phi)[1]}var beta\x3d1-alpha,equatorial\x3draw(pi$jscomp$0,0)[0]-raw(-pi$jscomp$0,0)[0],polar\x3draw(0,halfPi)[1]-raw(0,-halfPi)[1],ratio\x3dsqrt(2*polar/equatorial);forward.invert\x3dfunction(x,y){y\x3dsolve(forwardMeridian,y);return[x/ratio*(alpha+beta/cos(y)),y]};return forward}\nfunction gilbertInvert(point){return[2*point[0],2*atan(sin(point[1]*radians))*degrees]}function gingeryRaw(rho,n){function forward(lambda,phi){lambda\x3dd3Geo.geoAzimuthalEquidistantRaw(lambda,phi);phi\x3dlambda[0];var y\x3dlambda[1],r2\x3dphi*phi+y*y;if(r2\x3erho2){var r\x3dsqrt(r2);phi\x3datan2(y,phi);r2\x3dk*round(phi/k);y\x3dphi-r2;var rhoCosAlpha\x3drho*cos(y),k_\x3d(rho*sin(y)-y*sin(rhoCosAlpha))/(halfPi-rhoCosAlpha),s_\x3dgingeryLength(y,k_),e\x3d(pi$jscomp$0-rho)/gingeryIntegrate(s_,rhoCosAlpha,pi$jscomp$0);phi\x3dr;var i\x3d50,delta;\ndo phi-\x3ddelta\x3d(rho+gingeryIntegrate(s_,rhoCosAlpha,phi)*e-r)/(s_(phi)*e);while(1E-6\x3cabs(delta)\x26\x260\x3c--i);y*\x3dsin(phi);phi\x3chalfPi\x26\x26(y-\x3dk_*(phi-halfPi));r\x3dsin(r2);r2\x3dcos(r2);lambda[0]\x3dphi*r2-y*r;lambda[1]\x3dphi*r+y*r2}return lambda}var k\x3d2*pi$jscomp$0/n,rho2\x3drho*rho;forward.invert\x3dfunction(x,y){var r2\x3dx*x+y*y;if(r2\x3erho2){var r\x3dsqrt(r2);y\x3datan2(y,x);r2\x3dk*round(y/k);y-\x3dr2;x\x3dr*cos(y);y\x3dr*sin(y);r\x3dx-halfPi;for(var sinx\x3dsin(x),alpha\x3dy/sinx,delta\x3dx\x3chalfPi?Infinity:0,i\x3d10;;){var rhosinAlpha\x3drho*sin(alpha),rhoCosAlpha\x3d\nrho*cos(alpha),sinRhoCosAlpha\x3dsin(rhoCosAlpha),halfPi_RhoCosAlpha\x3dhalfPi-rhoCosAlpha,k_\x3d(rhosinAlpha-alpha*sinRhoCosAlpha)/halfPi_RhoCosAlpha,s_\x3dgingeryLength(alpha,k_);if(1E-12\x3eabs(delta)||!--i)break;alpha-\x3ddelta\x3d(alpha*sinx-k_*r-y)/(sinx-2*r*(halfPi_RhoCosAlpha*(rhoCosAlpha+alpha*rhosinAlpha*cos(rhoCosAlpha)-sinRhoCosAlpha)-rhosinAlpha*(rhosinAlpha-alpha*sinRhoCosAlpha))/(halfPi_RhoCosAlpha*halfPi_RhoCosAlpha))}r\x3drho+gingeryIntegrate(s_,rhoCosAlpha,x)*(pi$jscomp$0-rho)/gingeryIntegrate(s_,rhoCosAlpha,\npi$jscomp$0);y\x3dr2+alpha;x\x3dr*cos(y);y\x3dr*sin(y)}return d3Geo.geoAzimuthalEquidistantRaw.invert(x,y)};return forward}function gingeryLength(alpha,k){return function(x){var y_\x3dalpha*cos(x);x\x3chalfPi\x26\x26(y_-\x3dk);return sqrt(1+y_*y_)}}function gingeryIntegrate(f,a,b){var h\x3d(b-a)/50;b\x3df(a)+f(b);for(var i\x3d1;50\x3ei;++i)b+\x3d2*f(a+\x3dh);return.5*b*h}function ginzburgPolyconicRaw(a,b,c,d,e,f,g,h){function forward(lambda,phi){if(!phi)return[a*lambda/pi$jscomp$0,0];var phi2\x3dphi*phi,xB\x3da+phi2*(b+phi2*(c+phi2*d)),yB\x3dphi*\n(e-1+phi2*(f-h+phi2*g));yB\x3d(xB*xB+yB*yB)/(2*yB);lambda\x3dlambda*asin(xB/yB)/pi$jscomp$0;return[yB*sin(lambda),phi*(1+phi2*h)+yB*(1-cos(lambda))]}8\x3earguments.length\x26\x26(h\x3d0);forward.invert\x3dfunction(x,y){var lambda\x3dpi$jscomp$0*x/a,phi\x3dy,i\x3d50;do{var phi2\x3dphi*phi,xB\x3da+phi2*(b+phi2*(c+phi2*d)),yB\x3dphi*(e-1+phi2*(f-h+phi2*g)),p\x3dxB*xB+yB*yB,q\x3d2*yB;var deltaLambda\x3dp/q;var m2\x3ddeltaLambda*deltaLambda;var deltaPhi\x3dasin(xB/deltaLambda)/pi$jscomp$0;var alpha\x3dlambda*deltaPhi,xB2\x3dxB*xB,dxBdPhi\x3d(2*b+phi2*(4*c+6*phi2*\nd))*phi,dyBdPhi\x3de+phi2*(3*f+5*phi2*g);yB\x3d(2*(xB*dxBdPhi+yB*(dyBdPhi-1))*q-2*p*(dyBdPhi-1))/(q*q);p\x3dcos(alpha);dyBdPhi\x3dsin(alpha);q\x3ddeltaLambda*p;alpha\x3ddeltaLambda*dyBdPhi;m2\x3dlambda/pi$jscomp$0*(1/sqrt(1-xB2/m2))*(dxBdPhi*deltaLambda-xB*yB)/m2;xB\x3dalpha-x;phi2\x3dphi*(1+phi2*h)+deltaLambda-q-y;deltaLambda\x3dyB*dyBdPhi+q*m2;xB2\x3dq*deltaPhi;yB\x3d1+yB-(yB*p-alpha*m2);deltaPhi*\x3dalpha;p\x3ddeltaLambda*deltaPhi-yB*xB2;if(!p)break;lambda-\x3ddeltaLambda\x3d(phi2*deltaLambda-xB*yB)/p;phi-\x3ddeltaPhi\x3d(xB*deltaPhi-phi2*xB2)/p}while((1E-6\x3c\nabs(deltaLambda)||1E-6\x3cabs(deltaPhi))\x26\x260\x3c--i);return[lambda,phi]};return forward}function ginzburg8Raw(lambda,phi){var lambda2\x3dlambda*lambda,phi2\x3dphi*phi;return[lambda*(1-.162388*phi2)*(.87-9.52426E-4*lambda2*lambda2),phi*(1+phi2/12)]}function squareRaw(project){function projectSquare(lambda,phi){var s\x3d0\x3clambda?-.5:.5;lambda\x3dproject(lambda+s*pi$jscomp$0,phi);lambda[0]-\x3ds*dx;return lambda}var dx\x3dproject(halfPi,0)[0]-project(-halfPi,0)[0];project.invert\x26\x26(projectSquare.invert\x3dfunction(x,y){var s\x3d0\x3c\nx?-.5:.5;x\x3dproject.invert(x+s*dx,y);s\x3dx[0]-s*pi$jscomp$0;s\x3c-pi$jscomp$0?s+\x3d2*pi$jscomp$0:s\x3epi$jscomp$0\x26\x26(s-\x3d2*pi$jscomp$0);x[0]\x3ds;return x});return projectSquare}function gringortenRaw(lambda,phi){var sLambda\x3dsign(lambda),sPhi\x3dsign(phi),cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(sPhi*phi);lambda\x3dabs(atan2(lambda,phi));phi\x3dasin(x);1E-6\x3cabs(lambda-halfPi)\x26\x26(lambda%\x3dhalfPi);x\x3dgringortenHexadecant(lambda\x3epi$jscomp$0/4?halfPi-lambda:lambda,phi);lambda\x3epi$jscomp$0/4\x26\x26(phi\x3dx[0],\nx[0]\x3d-x[1],x[1]\x3d-phi);return x[0]*\x3dsLambda,x[1]*\x3d-sPhi,x}function gringortenHexadecant(lambda,phi){if(phi\x3d\x3d\x3dhalfPi)return[0,0];var sinPhi\x3dsin(phi),r\x3dsinPhi*sinPhi,r2\x3dr*r,j\x3d1+r2,k\x3d1+3*r2,q\x3d1-r2,z\x3dasin(1/sqrt(j)),v\x3dq+r*j*z,p2\x3d(1-sinPhi)/v,p\x3dsqrt(p2),a2\x3dp2*j,a\x3dsqrt(a2),h\x3dp*q;if(0\x3d\x3d\x3dlambda)return[0,-(h+r*a)];var cosPhi\x3dcos(phi),secPhi\x3d1/cosPhi,drdPhi\x3d2*sinPhi*cosPhi;z\x3d(-v*cosPhi-(1-sinPhi)*(-3*r+z*k)*drdPhi)/(v*v);sinPhi\x3d-secPhi*drdPhi;j\x3d-secPhi*(r*j*z+p2*k*drdPhi);q\x3d-2*secPhi*(.5*z/p*q-2*r*p*drdPhi);\np\x3d4*lambda/pi$jscomp$0;if(lambda\x3e.222*pi$jscomp$0||phi\x3cpi$jscomp$0/4\x26\x26lambda\x3e.175*pi$jscomp$0){phi\x3d(h+r*sqrt(a2*(1+r2)-h*h))/(1+r2);if(lambda\x3epi$jscomp$0/4)return[phi,phi];r2\x3dphi;secPhi\x3d.5*phi;phi\x3d.5*(secPhi+r2);lambda\x3d50;do{drdPhi\x3dsqrt(a2-phi*phi);drdPhi\x3dphi*(q+sinPhi*drdPhi)+j*asin(phi/a)-p;if(!drdPhi)break;0\x3edrdPhi?secPhi\x3dphi:r2\x3dphi;phi\x3d.5*(secPhi+r2)}while(1E-6\x3cabs(r2-secPhi)\x26\x260\x3c--lambda)}else{phi\x3d1E-6;lambda\x3d25;do drdPhi\x3dphi*phi,r2\x3dsqrt(a2-drdPhi),k\x3dq+sinPhi*r2,secPhi\x3dphi*k+j*asin(phi/a)-p,drdPhi\x3d\nk+(j-sinPhi*drdPhi)/r2,phi-\x3dr2\x3dr2?secPhi/drdPhi:0;while(1E-6\x3cabs(r2)\x26\x260\x3c--lambda)}return[phi,-h-r*sqrt(a2-phi*phi)]}function ellipticJ(u,m){if(1E-6\x3em){var t\x3dsin(u);var b\x3dcos(u);var ai\x3dm*(u-t*b)/4;return[t-ai*b,b+ai*t,1-m*t*t/2,u-ai]}if(.999999\x3c\x3dm){ai\x3d(1-m)/4;b\x3dcosh(u);t\x3dexp(2*u);t\x3d(t-1)/(t+1);m\x3d1/b;var twon\x3db*sinh(u);return[t+ai*(twon-u)/(b*b),m-ai*t*m*(twon-u),m+ai*t*m*(twon+u),2*atan(exp(u))-halfPi+ai*(twon-u)/b]}var a\x3d[1,0,0,0,0,0,0,0,0],c\x3d[sqrt(m),0,0,0,0,0,0,0,0],i\x3d0;b\x3dsqrt(1-m);for(twon\x3d1;1E-6\x3c\nabs(c[i]/a[i])\x26\x268\x3ei;)ai\x3da[i++],c[i]\x3d(ai-b)/2,a[i]\x3d(ai+b)/2,b\x3dsqrt(ai*b),twon*\x3d2;m\x3dtwon*a[i]*u;do t\x3dc[i]*sin(b\x3dm)/a[i],m\x3d(asin(t)+m)/2;while(--i);return[sin(m),t\x3dcos(m),t/cos(m-b),m]}function ellipticF(phi,m){if(!m)return phi;if(1\x3d\x3d\x3dm)return log(tan(phi/2+quarterPi));var a\x3d1,b\x3dsqrt(1-m),c\x3dsqrt(m);for(m\x3d0;1E-6\x3cabs(c);m++)phi%pi$jscomp$0?(c\x3datan(b*tan(phi)/a),0\x3ec\x26\x26(c+\x3dpi$jscomp$0),phi+\x3dc+~~(phi/pi$jscomp$0)*pi$jscomp$0):phi+\x3dphi,c\x3d(a+b)/2,b\x3dsqrt(a*b),c\x3d((a\x3dc)-b)/2;return phi/(pow(2,m)*a)}function guyouRaw(lambda,\nphi){var k_\x3d(sqrt2-1)/(sqrt2+1),k\x3dsqrt(1-k_*k_),K\x3dellipticF(halfPi,k*k),psi\x3dlog(tan(pi$jscomp$0/4+abs(phi)/2));psi\x3dexp(-1*psi)/sqrt(k_);k_\x3dpsi*cos(-1*lambda);var y\x3dpsi*sin(-1*lambda);lambda\x3dk_*k_;psi\x3dy+1;y\x3d1-lambda-y*y;lambda\x3d[.5*((0\x3c\x3dk_?halfPi:-halfPi)-atan2(y,2*k_)),-.25*log(y*y+4*lambda)+.5*log(psi*psi+lambda)];k_\x3dlambda[0];lambda\x3dlambda[1];k*\x3dk;psi\x3dabs(k_);y\x3dabs(lambda);y\x3dsinh(y);if(psi){var cscPhi\x3d1/sin(psi);psi\x3d1/(tan(psi)*tan(psi));y\x3d-(psi+k*y*y*cscPhi*cscPhi-1+k);y\x3d(-y+sqrt(y*y-4*(k-1)*psi))/\n2;k\x3d[ellipticF(atan(1/sqrt(y)),k)*sign(k_),ellipticF(atan(sqrt((y/psi-1)/k)),1-k)*sign(lambda)]}else k\x3d[0,ellipticF(atan(y),1-k)*sign(lambda)];return[-k[1],(0\x3c\x3dphi?1:-1)*(.5*K-k[0])]}function hammerRetroazimuthalRaw(phi0){function forward(lambda,phi){var p\x3drotate(lambda,phi);lambda\x3dp[0];phi\x3dp[1];p\x3dsin(phi);phi\x3dcos(phi);var cosLambda\x3dcos(lambda),z\x3dacos(sinPhi0*p+cosPhi0*phi*cosLambda),sinz\x3dsin(z);z\x3d1E-6\x3cabs(sinz)?z/sinz:1;return[z*cosPhi0*sin(lambda),(abs(lambda)\x3ehalfPi?z:-z)*(sinPhi0*phi-cosPhi0*\np*cosLambda)]}var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0),rotate\x3dhammerRetroazimuthalRotation(phi0);rotate.invert\x3dhammerRetroazimuthalRotation(-phi0);forward.invert\x3dfunction(x,y){var rho\x3dsqrt(x*x+y*y),sinz\x3d-sin(rho),cosz\x3dcos(rho),a\x3drho*cosz,b\x3d-y*sinz,c\x3drho*sinPhi0,d\x3dsqrt(a*a+b*b-c*c);a\x3datan2(a*c+b*d,b*c-a*d);x\x3d(rho\x3ehalfPi?-1:1)*atan2(x*sinz,rho*cos(a)*cosz+y*sin(a)*sinz);return rotate.invert(x,a)};return forward}function hammerRetroazimuthalRotation(phi0){var sinPhi0\x3dsin(phi0),cosPhi0\x3dcos(phi0);return function(lambda,\nphi){var cosPhi\x3dcos(phi),x\x3dcos(lambda)*cosPhi;lambda\x3dsin(lambda)*cosPhi;phi\x3dsin(phi);return[atan2(lambda,x*cosPhi0-phi*sinPhi0),asin(phi*cosPhi0+x*sinPhi0)]}}function healpixRaw(H){function forward(lambda,phi){var phi2\x3dabs(phi);if(phi2\x3ephi0){var i\x3dmin(H-1,max(0,floor((lambda+pi$jscomp$0)/k)));lambda+\x3dpi$jscomp$0*(H-1)/H-i*k;lambda\x3dcollignonRaw(lambda,phi2);lambda[0]\x3dlambda[0]*tau/dx-tau*(H-1)/(2*H)+i*tau/H;lambda[1]\x3dy0+4*(lambda[1]-y1)*dy1/tau;0\x3ephi\x26\x26(lambda[1]\x3d-lambda[1])}else lambda\x3dhealpixLambert(lambda,\nphi);lambda[0]*\x3dw;lambda[1]/\x3dh;return lambda}var phi0\x3dhealpixParallel*radians,dx\x3dcollignonRaw(pi$jscomp$0,phi0)[0]-collignonRaw(-pi$jscomp$0,phi0)[0],y0\x3dhealpixLambert(0,phi0)[1],y1\x3dcollignonRaw(0,phi0)[1],dy1\x3dsqrtPi-y1,k\x3dtau/H,w\x3d4/tau,h\x3dy0+dy1*dy1*4/tau;forward.invert\x3dfunction(x,y){x/\x3dw;y*\x3dh;var y2\x3dabs(y);if(y2\x3ey0){var i\x3dmin(H-1,max(0,floor((x+pi$jscomp$0)/k)));x\x3d(x+pi$jscomp$0*(H-1)/H-i*k)*dx/tau;x\x3dcollignonRaw.invert(x,.25*(y2-y0)*tau/dy1+y1);x[0]-\x3dpi$jscomp$0*(H-1)/H-i*k;0\x3ey\x26\x26(x[1]\x3d-x[1]);return x}return healpixLambert.invert(x,\ny)};return forward}function sphereTop(x,i){return[x,i\x261?89.999999:healpixParallel]}function sphereBottom(x,i){return[x,i\x261?-89.999999:-healpixParallel]}function sphereNudge(d){return[.999999*d[0],d[1]]}function sphere$jscomp$0(step){var c\x3d[].concat(d3Array.range(-180,180+step/2,step).map(sphereTop),d3Array.range(180,-180-step/2,-step).map(sphereBottom));return{type:\x22Polygon\x22,coordinates:[180\x3d\x3d\x3dstep?c.map(sphereNudge):c]}}function hillRaw(K){function forward(lambda,phi){var t\x3d1-sin(phi);if(t\x26\x262\x3et){var theta\x3d\nhalfPi-phi,i\x3d25;do{var delta\x3dsin(theta);var cosTheta\x3dcos(theta);phi\x3dBt+atan2(delta,L-cosTheta);cosTheta\x3d1+L2-2*L*cosTheta;theta-\x3ddelta\x3d(theta-K2*Bt-L*delta+cosTheta*phi-.5*t*B)/(2*L*delta*phi)}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);t\x3dA*sqrt(cosTheta);lambda\x3dlambda*phi/pi$jscomp$0}else t\x3dA*(K+t),lambda\x3dlambda*Bt/pi$jscomp$0;return[t*sin(lambda),rho0-t*cos(lambda)]}var L\x3d1+K,sinBt\x3dsin(1/L),Bt\x3dasin(sinBt),A\x3d2*sqrt(pi$jscomp$0/(B\x3dpi$jscomp$0+4*Bt*L)),B,rho0\x3d.5*A*(L+sqrt(K*(2+K))),K2\x3dK*K,L2\x3dL*L;forward.invert\x3d\nfunction(x,y){var rho2\x3dx*x+(y-\x3drho0)*y;y\x3d(1+L2-rho2/(A*A))/(2*L);var theta\x3dacos(y),sinTheta\x3dsin(theta),Bt_Bt1\x3dBt+atan2(sinTheta,L-y);return[asin(x/sqrt(rho2))*pi$jscomp$0/Bt_Bt1,asin(1-2*(theta-K2*Bt-L*sinTheta+(1+L2-2*L*y)*Bt_Bt1)/B)]};return forward}function sinuMollweideRaw(lambda,phi){return-.7109889596207567\x3cphi?(lambda\x3dmollweideRaw(lambda,phi),lambda[1]+\x3d.0528035274542,lambda):sinusoidalRaw(lambda,phi)}function homolosineRaw(lambda,phi){return.7109889596207567\x3cabs(phi)?(lambda\x3dmollweideRaw(lambda,\nphi),lambda[1]-\x3d0\x3cphi?.0528035274542:-.0528035274542,lambda):sinusoidalRaw(lambda,phi)}function hufnagelRaw(a,b,psiMax,ratio){function radius(psi){return sqrt(1+a*cos(2*psi)+b*cos(4*psi))}function mapping(t){t*\x3dpsiMax;return(2*t+(1+a-b/2)*sin(2*t)+(a+b)/2*sin(4*t)+b/2*sin(6*t))/psiMax}function inversemapping(psi){return radius(psi)*sin(psi)}var k\x3dsqrt(4*pi$jscomp$0/(2*psiMax+(1+a-b/2)*sin(2*psiMax)+(a+b)/2*sin(4*psiMax)+b/2*sin(6*psiMax))),c\x3dsqrt(ratio*sin(psiMax)*sqrt((1+a*cos(2*psiMax)+b*cos(4*\npsiMax))/(1+a+b))),M\x3dpsiMax*mapping(1),forward\x3dfunction(lambda,phi){var psi\x3dpsiMax*solve(mapping,M*sin(phi)/psiMax,phi/pi$jscomp$0);isNaN(psi)\x26\x26(psi\x3dpsiMax*sign(phi));phi\x3dk*radius(psi);return[phi*c*lambda/pi$jscomp$0*cos(psi),phi/c*sin(psi)]};forward.invert\x3dfunction(x,y){y\x3dsolve(inversemapping,y*c/k);return[x*pi$jscomp$0/(cos(y)*k*c*radius(y)),asin(psiMax*mapping(y/psiMax)/M)]};0\x3d\x3d\x3dpsiMax\x26\x26(k\x3dsqrt(ratio/pi$jscomp$0),forward\x3dfunction(lambda,phi){return[lambda*k,sin(phi)/k]},forward.invert\x3dfunction(x,\ny){return[x/k,asin(y*k)]});return forward}function adsimp(f,a,b,fa,fm,fb,V0,tol,maxdepth,depth,state){if(state.nanEncountered)return NaN;var h\x3db-a;var f1\x3df(a+.25*h);var f2\x3df(b-.25*h);if(isNaN(f1))state.nanEncountered\x3d!0;else if(isNaN(f2))state.nanEncountered\x3d!0;else{var sl\x3dh*(fa+4*f1+fm)/12;var sr\x3dh*(fm+4*f2+fb)/12;var s2\x3dsl+sr;V0\x3d(s2-V0)/15;if(depth\x3emaxdepth)return state.maxDepthCount++,s2+V0;if(Math.abs(V0)\x3ctol)return s2+V0;h\x3da+.5*h;a\x3dadsimp(f,a,h,fa,f1,fm,sl,.5*tol,maxdepth,depth+1,state);if(isNaN(a))return state.nanEncountered\x3d\n!0,NaN;f\x3dadsimp(f,h,b,fm,f2,fb,sr,.5*tol,maxdepth,depth+1,state);return isNaN(f)?(state.nanEncountered\x3d!0,NaN):a+f}}function integrate(f,a,b,tol,maxdepth){void 0\x3d\x3d\x3dtol\x26\x26(tol\x3d1E-8);void 0\x3d\x3d\x3dmaxdepth\x26\x26(maxdepth\x3d20);var fa\x3df(a),fm\x3df(.5*(a+b)),fb\x3df(b);return adsimp(f,a,b,fa,fm,fb,(fa+4*fm+fb)*(b-a)/6,tol,maxdepth,1,{maxDepthCount:0,nanEncountered:!1})}function hyperellipticalRaw(alpha,k,gamma){function elliptic(f){return alpha+(1-alpha)*pow(1-pow(f,k),1/k)}function Y(sinphi){var rmin\x3d0,rmax\x3d1E3,r\x3d500;\ndo approx[r]\x3esinphi?rmax\x3dr:rmin\x3dr,r\x3drmin+rmax\x3e\x3e1;while(r\x3ermin);(rmin\x3dapprox[r+1]-approx[r])\x26\x26(rmin\x3d(sinphi-approx[r+1])/rmin);return(r+1+rmin)/1E3}for(var G\x3d1/integrate(elliptic,0,1,1E-4),m\x3d1.00000001*G,approx\x3d[],i\x3d0;1E3\x3e\x3di;i++)approx.push(integrate(elliptic,0,i/1E3,1E-4)*m);var ratio\x3d2*Y(1)/pi$jscomp$0*G/gamma;gamma\x3dfunction(lambda,phi){var y\x3dY(abs(sin(phi)));lambda*\x3delliptic(y);y/\x3dratio;return[lambda,0\x3c\x3dphi?y:-y]};gamma.invert\x3dfunction(x,y){var phi;y*\x3dratio;1\x3eabs(y)\x26\x26(phi\x3dsign(y)*asin(integrate(elliptic,\n0,abs(y),1E-4)*G));return[x/elliptic(abs(y)),phi]};return gamma}function interpolateLine(coordinates,m){for(var i\x3d-1,n\x3dcoordinates.length,p0\x3dcoordinates[0],p1,dx,dy,resampled\x3d[];++i\x3cn;){p1\x3dcoordinates[i];dx\x3d(p1[0]-p0[0])/m;dy\x3d(p1[1]-p0[1])/m;for(var j\x3d0;j\x3cm;++j)resampled.push([p0[0]+j*dx,p0[1]+j*dy]);p0\x3dp1}resampled.push(p1);return resampled}function interpolateSphere(lobes){var coordinates\x3d[],i,n\x3dlobes[0].length;for(i\x3d0;i\x3cn;++i){var lobe\x3dlobes[0][i];var lambda0\x3dlobe[0][0];var phi0\x3dlobe[0][1];var phi1\x3d\nlobe[1][1];var lambda2\x3dlobe[2][0];lobe\x3dlobe[2][1];coordinates.push(interpolateLine([[lambda0+1E-6,phi0+1E-6],[lambda0+1E-6,phi1-1E-6],[lambda2-1E-6,phi1-1E-6],[lambda2-1E-6,lobe+1E-6]],30))}for(i\x3dlobes[1].length-1;0\x3c\x3di;--i)lobe\x3dlobes[1][i],lambda0\x3dlobe[0][0],phi0\x3dlobe[0][1],phi1\x3dlobe[1][1],lambda2\x3dlobe[2][0],lobe\x3dlobe[2][1],coordinates.push(interpolateLine([[lambda2-1E-6,lobe-1E-6],[lambda2-1E-6,phi1+1E-6],[lambda0+1E-6,phi1+1E-6],[lambda0+1E-6,phi0-1E-6]],30));return{type:\x22Polygon\x22,coordinates:[d3Array.merge(coordinates)]}}\nfunction interrupt(project,lobes,inverse){function forward(lambda,phi){for(var sign$$1\x3d0\x3ephi?-1:1,lobe\x3dlobes[+(0\x3ephi)],i\x3d0,n\x3dlobe.length-1;i\x3cn\x26\x26lambda\x3elobe[i][2][0];++i);lambda\x3dproject(lambda-lobe[i][1][0],phi);lambda[0]+\x3dproject(lobe[i][1][0],sign$$1*phi\x3esign$$1*lobe[i][0][1]?lobe[i][0][1]:phi)[0];return lambda}var sphere,bounds;inverse?forward.invert\x3dinverse(forward):project.invert\x26\x26(forward.invert\x3dfunction(x,y){for(var bound\x3dbounds[+(0\x3ey)],lobe\x3dlobes[+(0\x3ey)],i\x3d0,n\x3dbound.length;i\x3cn;++i){var b\x3dbound[i];\nif(b[0][0]\x3c\x3dx\x26\x26x\x3cb[1][0]\x26\x26b[0][1]\x3c\x3dy\x26\x26y\x3cb[1][1])return bound\x3dproject.invert(x-project(lobe[i][1][0],0)[0],y),bound[0]+\x3dlobe[i][1][0],lobe\x3dforward(bound[0],bound[1]),x\x3d[x,y],1E-6\x3eabs(lobe[0]-x[0])\x26\x261E-6\x3eabs(lobe[1]-x[1])?bound:null}});var p\x3dd3Geo.geoProjection(forward),stream_\x3dp.stream;p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){d3Geo.geoStream(sphere,sphereStream)};return rotateStream};\np.lobes\x3dfunction(_){if(!arguments.length)return lobes.map(function(lobe){return lobe.map(function(l){return[[l[0][0]*degrees,l[0][1]*degrees],[l[1][0]*degrees,l[1][1]*degrees],[l[2][0]*degrees,l[2][1]*degrees]]})});sphere\x3dinterpolateSphere(_);lobes\x3d_.map(function(lobe){return lobe.map(function(l){return[[l[0][0]*radians,l[0][1]*radians],[l[1][0]*radians,l[1][1]*radians],[l[2][0]*radians,l[2][1]*radians]]})});bounds\x3dlobes.map(function(lobe){return lobe.map(function(l){var x0\x3dproject(l[0][0],l[0][1])[0],\nx1\x3dproject(l[2][0],l[2][1])[0],y0\x3dproject(l[1][0],l[0][1])[1];l\x3dproject(l[1][0],l[1][1])[1];if(y0\x3el){var t\x3dy0;y0\x3dl;l\x3dt}return[[x0,y0],[x1,l]]})});return p};null!\x3dlobes\x26\x26p.lobes(lobes);return p}function kavrayskiy7Raw(lambda,phi){return[3/tau*lambda*sqrt(pi$jscomp$0*pi$jscomp$0/3-phi*phi),phi]}function lagrangeRaw(n){function forward(lambda,phi){if(1E-6\x3eabs(abs(phi)-halfPi))return[0,0\x3ephi?-2:2];phi\x3dsin(phi);phi\x3dpow((1+phi)/(1-phi),n/2);var c\x3d.5*(phi+1/phi)+cos(lambda*\x3dn);return[2*sin(lambda)/c,(phi-\n1/phi)/c]}forward.invert\x3dfunction(x,y){var y0\x3dabs(y);if(1E-6\x3eabs(y0-2))return x?null:[0,sign(y)*halfPi];if(2\x3cy0)return null;x/\x3d2;y/\x3d2;y0\x3dx*x;var y2\x3dy*y;y\x3d2*y/(1+y0+y2);y\x3dpow((1+y)/(1-y),1/n);return[atan2(2*x,1-y0-y2)/n,asin((y-1)/(y+1))]};return forward}function larriveeRaw(lambda,phi){return[lambda*(1+sqrt(cos(phi)))/2,phi/(cos(phi/2)*cos(lambda/6))]}function laskowskiRaw(lambda,phi){var lambda2\x3dlambda*lambda,phi2\x3dphi*phi;return[lambda*(.975534+phi2*(-.119161+-.0143059*lambda2+-.0547009*phi2)),phi*\n(1.00384+lambda2*(.0802894+-.02855*phi2+1.99025E-4*lambda2)+phi2*(.0998909+-.0491032*phi2))]}function littrowRaw(lambda,phi){return[sin(lambda)/cos(phi),tan(phi)*cos(lambda)]}function loximuthalRaw(phi0){function forward(lambda,phi){var y\x3dphi-phi0,x\x3d1E-6\x3eabs(y)?lambda*cosPhi0:1E-6\x3eabs(x\x3dquarterPi+phi/2)||1E-6\x3eabs(abs(x)-halfPi)?0:lambda*y/log(tan(x)/tanPhi0);return[x,y]}var cosPhi0\x3dcos(phi0),tanPhi0\x3dtan(quarterPi+phi0/2);forward.invert\x3dfunction(x,y){var lambda,phi\x3dy+phi0;return[1E-6\x3eabs(y)?x/cosPhi0:\n1E-6\x3eabs(lambda\x3dquarterPi+phi/2)||1E-6\x3eabs(abs(lambda)-halfPi)?0:x*log(tan(lambda)/tanPhi0)/y,phi]};return forward}function millerRaw(lambda,phi){return[lambda,1.25*log(tan(quarterPi+.4*phi))]}function modifiedStereographicRaw(C){function forward(lambda,phi){var cosPhi\x3dcos(phi),k\x3d2/(1+cosPhi*cos(lambda));lambda\x3dk*cosPhi*sin(lambda);phi\x3dk*sin(phi);k\x3dm;cosPhi\x3dC[k];for(var ar\x3dcosPhi[0],ai\x3dcosPhi[1],t;0\x3c\x3d--k;)cosPhi\x3dC[k],ar\x3dcosPhi[0]+lambda*(t\x3dar)-phi*ai,ai\x3dcosPhi[1]+lambda*ai+phi*t;ar\x3dlambda*(t\x3dar)-\nphi*ai;return[ar,lambda*ai+phi*t]}var m\x3dC.length-1;forward.invert\x3dfunction(x,y){var i\x3d20,zr\x3dx,zi\x3dy;do{for(var j\x3dm,w\x3dC[j],ar\x3dw[0],ai\x3dw[1],br\x3d0,bi\x3d0,t;0\x3c\x3d--j;)w\x3dC[j],br\x3dar+zr*(t\x3dbr)-zi*bi,bi\x3dai+zr*bi+zi*t,ar\x3dw[0]+zr*(t\x3dar)-zi*ai,ai\x3dw[1]+zr*ai+zi*t;br\x3dar+zr*(t\x3dbr)-zi*bi;bi\x3dai+zr*bi+zi*t;ar\x3dzr*(t\x3dar)-zi*ai-x;ai\x3dzr*ai+zi*t-y;w\x3dbr*br+bi*bi;zr-\x3dj\x3d(ar*br+ai*bi)/w;zi-\x3dar\x3d(ai*br-ar*bi)/w}while(1E-12\x3cabs(j)+abs(ar)\x26\x260\x3c--i);if(i)return x\x3dsqrt(zr*zr+zi*zi),y\x3d2*atan(.5*x),i\x3dsin(y),[atan2(zr*i,x*cos(y)),x?asin(zi*\ni/x):0]};return forward}function modifiedStereographic(coefficients,rotate){coefficients\x3dd3Geo.geoProjection(modifiedStereographicRaw(coefficients)).rotate(rotate).clipAngle(90);var r\x3dd3Geo.geoRotation(rotate),center\x3dcoefficients.center;delete coefficients.rotate;coefficients.center\x3dfunction(_){return arguments.length?center(r(_)):r.invert(center())};return coefficients}function mtFlatPolarParabolicRaw(lambda,phi){phi\x3dasin(7*sin(phi)/(3*sqrt6));return[sqrt6*lambda*(2*cos(2*phi/3)-1)/sqrt7,9*sin(phi/\n3)/sqrt7]}function mtFlatPolarQuarticRaw(lambda,phi){for(var k\x3d(1+sqrt1_2)*sin(phi),i\x3d0,delta;25\x3ei\x26\x26!(phi-\x3ddelta\x3d(sin(phi/2)+sin(phi)-k)/(.5*cos(phi/2)+cos(phi)),1E-6\x3eabs(delta));i++);return[lambda*(1+2*cos(phi)/cos(phi/2))/(3*sqrt2),2*sqrt(3)*sin(phi/2)/sqrt(2+sqrt2)]}function mtFlatPolarSinusoidalRaw(lambda,phi){var A\x3dsqrt(6/(4+pi$jscomp$0)),k\x3d(1+pi$jscomp$0/4)*sin(phi);phi/\x3d2;for(var i\x3d0,delta;25\x3ei\x26\x26!(phi-\x3ddelta\x3d(phi/2+sin(phi)-k)/(.5+cos(phi)),1E-6\x3eabs(delta));i++);return[A*(.5+cos(phi))*lambda/\n1.5,A*phi]}function naturalEarth2Raw(lambda,phi){var phi2\x3dphi*phi,phi4\x3dphi2*phi2,phi6\x3dphi2*phi4;return[lambda*(.84719-.13063*phi2+phi6*phi6*(-.04515+.05494*phi2-.02326*phi4+.00331*phi6)),phi*(1.01183+phi4*phi4*(-.02625+.01926*phi2-.00396*phi4))]}function nellHammerRaw(lambda,phi){return[lambda*(1+cos(phi))/2,2*(phi-tan(phi/2))]}function nicolosiRaw(lambda,phi){var sinPhi\x3dsin(phi),q\x3dcos(phi),s\x3dsign(lambda);if(0\x3d\x3d\x3dlambda||abs(phi)\x3d\x3d\x3dhalfPi)return[0,phi];if(0\x3d\x3d\x3dphi)return[lambda,0];if(abs(lambda)\x3d\x3d\x3d\nhalfPi)return[lambda*q,halfPi*sinPhi];lambda\x3dpi$jscomp$0/(2*lambda)-2*lambda/pi$jscomp$0;var c\x3d2*phi/pi$jscomp$0,d\x3d(1-c*c)/(sinPhi-c),b2\x3dlambda*lambda,d2\x3dd*d;c\x3d1+b2/d2;var d2b2\x3d1+d2/b2,M\x3d(lambda*sinPhi/d-lambda/2)/c,N\x3d(d2*sinPhi/b2+d/2)/d2b2;sinPhi\x3dN*N-(d2*sinPhi*sinPhi/b2+d*sinPhi-1)/d2b2;return[halfPi*(M+sqrt(M*M+q*q/c)*s),halfPi*(N+sqrt(0\x3esinPhi?0:sinPhi)*sign(-phi*lambda)*s)]}function pattersonRaw(lambda,phi){var phi2\x3dphi*phi;return[lambda,phi*(1.0148+phi2*phi2*(.23185+phi2*(-.14499+.02406*phi2)))]}\nfunction polyconicRaw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var tanPhi\x3dtan(phi);lambda*\x3dsin(phi);return[sin(lambda)/tanPhi,phi+(1-cos(lambda))/tanPhi]}function matrix(a,b){var u\x3dsubtract(a[1],a[0]),v\x3dsubtract(b[1],b[0]),phi\x3datan2(u[0]*v[1]-u[1]*v[0],u[0]*v[0]+u[1]*v[1]);u\x3dsqrt(u[0]*u[0]+u[1]*u[1])/sqrt(v[0]*v[0]+v[1]*v[1]);return multiply([1,0,a[0][0],0,1,a[0][1]],multiply([u,0,0,0,u,0],multiply([cos(phi),sin(phi),0,-sin(phi),cos(phi),0],[1,0,-b[0][0],0,1,-b[0][1]])))}function multiply(a,\nb){return[a[0]*b[0]+a[1]*b[3],a[0]*b[1]+a[1]*b[4],a[0]*b[2]+a[1]*b[5]+a[2],a[3]*b[0]+a[4]*b[3],a[3]*b[1]+a[4]*b[4],a[3]*b[2]+a[4]*b[5]+a[5]]}function subtract(a,b){return[a[0]-b[0],a[1]-b[1]]}function polyhedral(root,face){function recurse(node,parent){node.edges\x3dfaceEdges(node.face);if(parent.face){var shared\x3dnode.shared\x3dsharedEdge(node.face,parent.face),m\x3dmatrix(shared.map(parent.project),shared.map(node.project));node.transform\x3dparent.transform?multiply(parent.transform,m):m;m\x3dparent.edges;for(var i\x3d\n0,n\x3dm.length;i\x3cn;++i)pointEqual$1(shared[0],m[i][1])\x26\x26pointEqual$1(shared[1],m[i][0])\x26\x26(m[i]\x3dnode),pointEqual$1(shared[0],m[i][0])\x26\x26pointEqual$1(shared[1],m[i][1])\x26\x26(m[i]\x3dnode);m\x3dnode.edges;i\x3d0;for(n\x3dm.length;i\x3cn;++i)pointEqual$1(shared[0],m[i][0])\x26\x26pointEqual$1(shared[1],m[i][1])\x26\x26(m[i]\x3dparent),pointEqual$1(shared[0],m[i][1])\x26\x26pointEqual$1(shared[1],m[i][0])\x26\x26(m[i]\x3dparent)}else node.transform\x3dparent.transform;node.children\x26\x26node.children.forEach(function(child){recurse(child,node)});return node}\nfunction forward(lambda,phi){var node\x3dface(lambda,phi);lambda\x3dnode.project([lambda*degrees,phi*degrees]);if(node\x3dnode.transform)return[node[0]*lambda[0]+node[1]*lambda[1]+node[2],-(node[3]*lambda[0]+node[4]*lambda[1]+node[5])];lambda[1]\x3d-lambda[1];return lambda}function faceInvert(node,coordinates){var invert\x3dnode.project.invert,t\x3dnode.transform,point\x3dcoordinates;if(t){var k\x3d1/(t[0]*t[4]-t[1]*t[3]);t\x3d[k*t[4],-k*t[1],k*(t[1]*t[5]-t[2]*t[4]),-k*t[3],k*t[0],k*(t[2]*t[3]-t[0]*t[5])];point\x3d[t[0]*point[0]+\nt[1]*point[1]+t[2],t[3]*point[0]+t[4]*point[1]+t[5]]}if(t\x3dinvert)invert\x3dp\x3dinvert(point),invert\x3dface(invert[0]*radians,invert[1]*radians),t\x3dnode\x3d\x3d\x3dinvert;if(t)return p;var p;node\x3dnode.children;invert\x3d0;for(point\x3dnode\x26\x26node.length;invert\x3cpoint;++invert)if(p\x3dfaceInvert(node[invert],coordinates))return p}recurse(root,{transform:null});hasInverse(root)\x26\x26(forward.invert\x3dfunction(x,y){return(x\x3dfaceInvert(root,[x,-y]))\x26\x26(x[0]*\x3dradians,x[1]*\x3dradians,x)});var proj\x3dd3Geo.geoProjection(forward),stream_\x3dproj.stream;\nproj.stream\x3dfunction(stream){var rotate\x3dproj.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(proj.rotate([0,0]),stream_(stream));proj.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();outline(sphereStream,root);sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return proj.angle(-30)}function outline(stream,node,parent){var point,edges\x3dnode.edges,n\x3dedges.length;var edge\x3d{type:\x22MultiPoint\x22,coordinates:node.face};var notPoles\x3d\nnode.face.filter(function(d){return 90!\x3d\x3dabs(d[1])}),b\x3dd3Geo.geoBounds({type:\x22MultiPoint\x22,coordinates:notPoles});notPoles\x3d!1;var j\x3d-1,dx\x3db[1][0]-b[0][0];b\x3d180\x3d\x3d\x3ddx||360\x3d\x3d\x3ddx?[(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]:d3Geo.geoCentroid(edge);if(parent)for(;++j\x3cn\x26\x26edges[j]!\x3d\x3dparent;);++j;for(dx\x3d0;dx\x3cn;++dx)edge\x3dedges[(dx+j)%n],Array.isArray(edge)?(notPoles||(stream.point((point\x3dd3Geo.geoInterpolate(edge[0],b)(1E-6))[0],point[1]),notPoles\x3d!0),stream.point((point\x3dd3Geo.geoInterpolate(edge[1],b)(1E-6))[0],\npoint[1])):(notPoles\x3d!1,edge!\x3d\x3dparent\x26\x26outline(stream,edge,node))}function pointEqual$1(a,b){return a\x26\x26b\x26\x26a[0]\x3d\x3d\x3db[0]\x26\x26a[1]\x3d\x3d\x3db[1]}function sharedEdge(a,b){for(var x,y,n\x3da.length,found\x3dnull,i\x3d0;i\x3cn;++i){x\x3da[i];for(var j\x3db.length;0\x3c\x3d--j;)if(y\x3db[j],x[0]\x3d\x3d\x3dy[0]\x26\x26x[1]\x3d\x3d\x3dy[1]){if(found)return[found,x];found\x3dx}}}function faceEdges(face){for(var n\x3dface.length,edges\x3d[],a\x3dface[n-1],i\x3d0;i\x3cn;++i)edges.push([a,a\x3dface[i]]);return edges}function hasInverse(node){return node.project.invert||node.children\x26\x26node.children.some(hasInverse)}\nfunction collignonK(a,b){a\x3dcollignonRaw(a,b);return[a[0]*kx,a[1]]}function dot(a,b){for(var i\x3d0,n\x3da.length,s\x3d0;i\x3cn;++i)s+\x3da[i]*b[i];return s}function cross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0])*degrees,asin(max(-1,min(1,cartesian[2])))*degrees]}function cartesian$jscomp$0(coordinates){var lambda\x3dcoordinates[0]*radians;coordinates\x3dcoordinates[1]*radians;var cosphi\x3dcos(coordinates);return[cosphi*\ncos(lambda),cosphi*sin(lambda),sin(coordinates)]}function projectFeatureCollection(o,stream){return{type:\x22FeatureCollection\x22,features:o.features.map(function(f){return projectFeature(f,stream)})}}function projectFeature(o,stream){return{type:\x22Feature\x22,id:o.id,properties:o.properties,geometry:projectGeometry(o.geometry,stream)}}function projectGeometryCollection(o$jscomp$0,stream){return{type:\x22GeometryCollection\x22,geometries:o$jscomp$0.geometries.map(function(o){return projectGeometry(o,stream)})}}\nfunction projectGeometry(o,stream){if(!o)return null;if(\x22GeometryCollection\x22\x3d\x3d\x3do.type)return projectGeometryCollection(o,stream);switch(o.type){case \x22Point\x22:var sink\x3dsinkPoint;break;case \x22MultiPoint\x22:sink\x3dsinkPoint;break;case \x22LineString\x22:sink\x3dsinkLine;break;case \x22MultiLineString\x22:sink\x3dsinkLine;break;case \x22Polygon\x22:sink\x3dsinkPolygon;break;case \x22MultiPolygon\x22:sink\x3dsinkPolygon;break;case \x22Sphere\x22:sink\x3dsinkPolygon;break;default:return null}d3Geo.geoStream(o,stream(sink));return sink.result()}function quincuncial(project){function projectQuincuncial(lambda,\nphi){var t\x3dabs(lambda)\x3chalfPi;phi\x3dproject(t?lambda:0\x3clambda?lambda-pi$jscomp$0:lambda+pi$jscomp$0,phi);lambda\x3d(phi[0]-phi[1])*sqrt1_2;phi\x3d(phi[0]+phi[1])*sqrt1_2;if(t)return[lambda,phi];t\x3ddx*sqrt1_2;var s\x3d0\x3clambda^0\x3cphi?-1:1;return[s*lambda-sign(phi)*t,s*phi-sign(lambda)*t]}var dx\x3dproject(halfPi,0)[0]-project(-halfPi,0)[0];project.invert\x26\x26(projectQuincuncial.invert\x3dfunction(x0,y0){var x\x3d(x0+y0)*sqrt1_2,y\x3d(y0-x0)*sqrt1_2,t\x3dabs(x)\x3c.5*dx\x26\x26abs(y)\x3c.5*dx;if(!t){var d\x3ddx*sqrt1_2,s\x3d0\x3cx^0\x3cy?-1:1;x0\x3d-s*x0+\n(0\x3cy?1:-1)*d;y0\x3d-s*y0+(0\x3cx?1:-1)*d;x\x3d(-x0-y0)*sqrt1_2;y\x3d(x0-y0)*sqrt1_2}y0\x3dproject.invert(x,y);t||(y0[0]+\x3d0\x3cx?pi$jscomp$0:-pi$jscomp$0);return y0});return d3Geo.geoProjection(projectQuincuncial).rotate([-90,-90,45]).clipAngle(179.999)}function rectangularPolyconicRaw(phi0){function forward(lambda,phi){lambda\x3dsinPhi0?tan(lambda*sinPhi0/2)/sinPhi0:lambda/2;if(!phi)return[2*lambda,-phi0];lambda\x3d2*atan(lambda*sin(phi));var cotPhi\x3d1/tan(phi);return[sin(lambda)*cotPhi,phi+(1-cos(lambda))*cotPhi-phi0]}var sinPhi0\x3d\nsin(phi0);forward.invert\x3dfunction(x,y){if(1E-6\x3eabs(y+\x3dphi0))return[sinPhi0?2*atan(sinPhi0*x/2)/sinPhi0:x,0];var k\x3dx*x+y*y,phi\x3d0,i\x3d10;do{var delta\x3dtan(phi);var secPhi\x3d1/cos(phi),j\x3dk-2*y*phi+phi*phi;phi-\x3ddelta\x3d(delta*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*delta)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);x*\x3ddelta\x3dtan(phi);y\x3dtan(abs(y)\x3cabs(phi+1/delta)?.5*asin(x):.5*acos(x)+pi$jscomp$0/4)/sin(phi);return[sinPhi0?2*atan(sinPhi0*y)/sinPhi0:2*y,phi]};return forward}function robinsonRaw(lambda,phi){var i\x3dmin(18,36*\nabs(phi)/pi$jscomp$0),i0\x3dfloor(i);i-\x3di0;var ax\x3d(k\x3dK$1[i0])[0],ay\x3dk[1],bx\x3d(k\x3dK$1[++i0])[0],by\x3dk[1];i0\x3d(k\x3dK$1[min(19,++i0)])[0];k\x3dk[1];var k;return[lambda*(bx+i*(i0-ax)/2+i*i*(i0-2*bx+ax)/2),(0\x3cphi?halfPi:-halfPi)*(by+i*(k-ay)/2+i*i*(k-2*by+ay)/2)]}function satelliteVerticalRaw(P){function forward(lambda,phi){var cosPhi\x3dcos(phi),k\x3d(P-1)/(P-cosPhi*cos(lambda));return[k*cosPhi*sin(lambda),k*sin(phi)]}forward.invert\x3dfunction(x,y){var rho2\x3dx*x+y*y,rho\x3dsqrt(rho2);rho2\x3d(P-sqrt(1-rho2*(P+1)/(P-1)))/((P-1)/\nrho+rho/(P-1));return[atan2(x*rho2,rho*sqrt(1-rho2*rho2)),rho?asin(y*rho2/rho):0]};return forward}function satelliteRaw(P,omega){function forward(lambda,phi){lambda\x3dvertical(lambda,phi);phi\x3dlambda[1];var A\x3dphi*sinOmega/(P-1)+cosOmega;return[lambda[0]*cosOmega/A,phi/A]}var vertical\x3dsatelliteVerticalRaw(P);if(!omega)return vertical;var cosOmega\x3dcos(omega),sinOmega\x3dsin(omega);forward.invert\x3dfunction(x,y){var k\x3d(P-1)/(P-1-y*sinOmega);return vertical.invert(k*x,k*y*cosOmega)};return forward}function nonempty(coordinates){return 0\x3c\ncoordinates.length}function normalizePoint(y){return-90\x3d\x3d\x3dy||90\x3d\x3d\x3dy?[0,y]:[-180,Math.floor(1E4*y)/1E4]}function clampPoint(p){var x\x3dp[0],y\x3dp[1],clamped\x3d!1;-179.9999\x3e\x3dx?(x\x3d-180,clamped\x3d!0):179.9999\x3c\x3dx\x26\x26(x\x3d180,clamped\x3d!0);-89.9999\x3e\x3dy?(y\x3d-90,clamped\x3d!0):89.9999\x3c\x3dy\x26\x26(y\x3d90,clamped\x3d!0);return clamped?[x,y]:p}function clampPoints(points){return points.map(clampPoint)}function extractFragments(rings,polygon,fragments){for(var j\x3d0,m\x3drings.length;j\x3cm;++j){var ring\x3drings[j].slice();fragments.push({index:-1,\npolygon,ring});for(var i\x3d0,n\x3dring.length;i\x3cn;++i){var point\x3dring[i],x\x3dpoint[0],y\x3dpoint[1];if(-179.9999\x3e\x3dx||179.9999\x3c\x3dx||-89.9999\x3e\x3dy||89.9999\x3c\x3dy){ring[i]\x3dclampPoint(point);for(point\x3di+1;point\x3cn;++point){var pointk\x3dring[point];x\x3dpointk[0];pointk\x3dpointk[1];if(-179.9999\x3cx\x26\x26179.9999\x3ex\x26\x26-89.9999\x3cpointk\x26\x2689.9999\x3epointk)break}if(point!\x3d\x3di+1){i?(i\x3d{index:-1,polygon,ring:ring.slice(0,i+1)},i.ring[i.ring.length-1]\x3dnormalizePoint(y),fragments[fragments.length-1]\x3di):fragments.pop();if(point\x3e\x3dn)break;fragments.push({index:-1,\npolygon,ring:ring\x3dring.slice(point-1)});ring[0]\x3dnormalizePoint(ring[0][1]);i\x3d-1;n\x3dring.length}}}}}function stitchFragments(fragments){var i,n\x3dfragments.length,fragmentByStart\x3d{},fragmentByEnd\x3d{};for(i\x3d0;i\x3cn;++i){var fragment\x3dfragments[i];var start\x3dfragment.ring[0];var end\x3dfragment.ring[fragment.ring.length-1];start[0]\x3d\x3d\x3dend[0]\x26\x26start[1]\x3d\x3d\x3dend[1]?(fragment.polygon.push(fragment.ring),fragments[i]\x3dnull):(fragment.index\x3di,fragmentByStart[start]\x3dfragmentByEnd[end]\x3dfragment)}for(i\x3d0;i\x3cn;++i)if(fragment\x3d\nfragments[i]){start\x3dfragment.ring[0];end\x3dfragment.ring[fragment.ring.length-1];var startFragment\x3dfragmentByEnd[start];var endFragment\x3dfragmentByStart[end];delete fragmentByStart[start];delete fragmentByEnd[end];start[0]\x3d\x3d\x3dend[0]\x26\x26start[1]\x3d\x3d\x3dend[1]?fragment.polygon.push(fragment.ring):startFragment?(delete fragmentByEnd[start],delete fragmentByStart[startFragment.ring[0]],startFragment.ring.pop(),fragments[startFragment.index]\x3dnull,fragment\x3d{index:-1,polygon:startFragment.polygon,ring:startFragment.ring.concat(fragment.ring)},\nstartFragment\x3d\x3d\x3dendFragment?fragment.polygon.push(fragment.ring):(fragment.index\x3dn++,fragments.push(fragmentByStart[fragment.ring[0]]\x3dfragmentByEnd[fragment.ring[fragment.ring.length-1]]\x3dfragment))):endFragment?(delete fragmentByStart[end],delete fragmentByEnd[endFragment.ring[endFragment.ring.length-1]],fragment.ring.pop(),fragment\x3d{index:n++,polygon:endFragment.polygon,ring:fragment.ring.concat(endFragment.ring)},fragments[endFragment.index]\x3dnull,fragments.push(fragmentByStart[fragment.ring[0]]\x3d\nfragmentByEnd[fragment.ring[fragment.ring.length-1]]\x3dfragment)):(fragment.ring.push(fragment.ring[0]),fragment.polygon.push(fragment.ring))}}function stitchFeature(input){var output\x3d{type:\x22Feature\x22,geometry:stitchGeometry(input.geometry)};null!\x3dinput.id\x26\x26(output.id\x3dinput.id);null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);null!\x3dinput.properties\x26\x26(output.properties\x3dinput.properties);return output}function stitchGeometry(input){if(null\x3d\x3dinput)return input;switch(input.type){case \x22GeometryCollection\x22:var output\x3d\n{type:\x22GeometryCollection\x22,geometries:input.geometries.map(stitchGeometry)};break;case \x22Point\x22:output\x3d{type:\x22Point\x22,coordinates:clampPoint(input.coordinates)};break;case \x22MultiPoint\x22:case \x22LineString\x22:output\x3d{type:input.type,coordinates:clampPoints(input.coordinates)};break;case \x22MultiLineString\x22:output\x3d{type:\x22MultiLineString\x22,coordinates:input.coordinates.map(clampPoints)};break;case \x22Polygon\x22:var i\x3d[];extractFragments(input.coordinates,i,output\x3d[]);stitchFragments(output);output\x3d{type:\x22Polygon\x22,\ncoordinates:i};break;case \x22MultiPolygon\x22:output\x3d[];i\x3d-1;var n\x3dinput.coordinates.length;for(var polygons\x3dArray(n);++i\x3cn;)extractFragments(input.coordinates[i],polygons[i]\x3d[],output);stitchFragments(output);output\x3d{type:\x22MultiPolygon\x22,coordinates:polygons.filter(nonempty)};break;default:return input}null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}function timesRaw(lambda,phi){phi\x3dtan(phi/2);var s\x3dsin(quarterPi*phi);return[lambda*(.74482-.34588*s*s),1.70711*phi]}function twoPoint(raw,p0,p1){var i\x3d\nd3Geo.geoInterpolate(p0,p1);p1\x3di(.5);p0\x3dd3Geo.geoRotation([-p1[0],-p1[1]])(p0);i\x3di.distance/2;var y\x3d-asin(sin(p0[1]*radians)/sin(i));p1\x3d[-p1[0],-p1[1],-(0\x3cp0[0]?pi$jscomp$0-y:y)*degrees];raw\x3dd3Geo.geoProjection(raw(i)).rotate(p1);var r\x3dd3Geo.geoRotation(p1),center\x3draw.center;delete raw.rotate;raw.center\x3dfunction(_){return arguments.length?center(r(_)):r.invert(center())};return raw.clipAngle(90)}function twoPointAzimuthalRaw(d){function forward(lambda,phi){lambda\x3dd3Geo.geoGnomonicRaw(lambda,phi);\nlambda[0]*\x3dcosd;return lambda}var cosd\x3dcos(d);forward.invert\x3dfunction(x,y){return d3Geo.geoGnomonicRaw.invert(x/cosd,y)};return forward}function twoPointAzimuthal(p0,p1){return twoPoint(twoPointAzimuthalRaw,p0,p1)}function twoPointEquidistantRaw(z0){function forward(lambda,phi){var za\x3dacos(cos(phi)*cos(lambda-lambdaa));lambda\x3dacos(cos(phi)*cos(lambda-lambdab));za*\x3dza;lambda*\x3dlambda;return[(za-lambda)/(2*z0),(0\x3ephi?-1:1)*sqrt(4*z02*lambda-(z02-za+lambda)*(z02-za+lambda))/(2*z0)]}if(!(z0*\x3d2))return d3Geo.geoAzimuthalEquidistantRaw;\nvar lambdaa\x3d-z0/2,lambdab\x3d-lambdaa,z02\x3dz0*z0,tanLambda0\x3dtan(lambdab),S\x3d.5/sin(lambdab);forward.invert\x3dfunction(x,y){var y2\x3dy*y,cosza\x3dcos(sqrt(y2+(t\x3dx+lambdaa)*t));x\x3dcos(sqrt(y2+(t\x3dx+lambdab)*t));var t,d;return[atan2(d\x3dcosza-x,t\x3d(cosza+x)*tanLambda0),(0\x3ey?-1:1)*acos(sqrt(t*t+d*d)*S)]};return forward}function twoPointEquidistant(p0,p1){return twoPoint(twoPointEquidistantRaw,p0,p1)}function vanDerGrintenRaw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,0];var sinTheta\x3dabs(phi/halfPi),theta\x3dasin(sinTheta);\nif(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,sign(phi)*pi$jscomp$0*tan(theta/2)];var cosTheta\x3dcos(theta);theta\x3dabs(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/2;var A2\x3dtheta*theta;cosTheta/\x3dsinTheta+cosTheta-1;sinTheta\x3dcosTheta*(2/sinTheta-1);var P2\x3dsinTheta*sinTheta,P2_A2\x3dP2+A2,G_P2\x3dcosTheta-P2,Q\x3dA2+cosTheta;return[sign(lambda)*pi$jscomp$0*(theta*G_P2+sqrt(A2*G_P2*G_P2-P2_A2*(cosTheta*cosTheta-P2)))/P2_A2,sign(phi)*pi$jscomp$0*(sinTheta*Q-theta*sqrt((A2+1)*P2_A2-Q*Q))/P2_A2]}function vanDerGrinten2Raw(lambda,\nphi){if(1E-6\x3eabs(phi))return[lambda,0];var sinTheta\x3dabs(phi/halfPi),theta\x3dasin(sinTheta);if(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,sign(phi)*pi$jscomp$0*tan(theta/2)];var cosTheta\x3dcos(theta);theta\x3dabs(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/2;var A2\x3dtheta*theta;sinTheta\x3dcosTheta*(sqrt(1+A2)-theta*cosTheta)/(1+A2*sinTheta*sinTheta);return[sign(lambda)*pi$jscomp$0*sinTheta,sign(phi)*pi$jscomp$0*sqrt(1-sinTheta*(2*theta+sinTheta))]}function vanDerGrinten3Raw(lambda,phi){if(1E-6\x3eabs(phi))return[lambda,\n0];var sinTheta\x3dphi/halfPi,theta\x3dasin(sinTheta);if(1E-6\x3eabs(lambda)||1E-6\x3eabs(abs(phi)-halfPi))return[0,pi$jscomp$0*tan(theta/2)];phi\x3d(pi$jscomp$0/lambda-lambda/pi$jscomp$0)/2;sinTheta/\x3d1+cos(theta);return[pi$jscomp$0*(sign(lambda)*sqrt(phi*phi+1-sinTheta*sinTheta)-phi),pi$jscomp$0*sinTheta]}function vanDerGrinten4Raw(lambda,phi){if(!phi)return[lambda,0];var phi0\x3dabs(phi);if(!lambda||phi0\x3d\x3d\x3dhalfPi)return[0,phi];var B\x3dphi0/halfPi;phi0\x3dB*B;var C\x3d(8*B-phi0*(phi0+2)-5)/(2*phi0*(B-1)),C2\x3dC*C,BC\x3dB*C,B_C2\x3d\nphi0+C2+2*BC;B+\x3d3*C;C\x3dlambda/halfPi;C+\x3d1/C;C\x3dsign(abs(lambda)-halfPi)*sqrt(C*C-4);var D2\x3dC*C;phi0\x3d(C*(B_C2+C2-1)+2*sqrt(B_C2*(phi0+C2*D2-1)+(1-phi0)*(phi0*(B*B+4*C2)+12*BC*C2+4*C2*C2)))/(4*B_C2+D2);return[sign(lambda)*halfPi*phi0,sign(phi)*halfPi*sqrt(1+C*abs(phi0)-phi0*phi0)]}function wagnerFormula(cx,cy,m1,m2,n){function forward(lambda,phi){phi\x3dm1*sin(m2*phi);var c0\x3dsqrt(1-phi*phi),c1\x3dsqrt(2/(1+c0*cos(lambda*\x3dn)));return[cx*c0*c1*sin(lambda),cy*phi*c1]}forward.invert\x3dfunction(x,y){var t1\x3dx/cx,t2\x3d\ny/cy;t1\x3dsqrt(t1*t1+t2*t2);t2\x3d2*asin(t1/2);return[atan2(x*tan(t2),cx*t1)/n,t1\x26\x26asin(y*sin(t2)/(cy*m1*t1))/m2]};return forward}function wagnerRaw(poleline,parallels,inflation,ratio){var phi1\x3dpi$jscomp$0/3;poleline\x3dmax(poleline,1E-6);parallels\x3dmax(parallels,1E-6);poleline\x3dmin(poleline,halfPi);parallels\x3dmin(parallels,pi$jscomp$0-1E-6);inflation\x3dmax(inflation,0);inflation\x3dmin(inflation,99.999999);ratio\x3dmax(ratio,1E-6);var vratio\x3dratio/100;inflation\x3dacos((inflation/100+1)*cos(phi1))/phi1;phi1\x3dsin(poleline)/\nsin(inflation*halfPi);ratio\x3dparallels/pi$jscomp$0;parallels\x3dsqrt(vratio*sin(poleline/2)/sin(parallels/2));poleline\x3dparallels/sqrt(ratio*phi1*inflation);parallels\x3d1/(parallels*sqrt(ratio*phi1*inflation));return wagnerFormula(poleline,parallels,phi1,inflation,ratio)}function wagner(){var poleline\x3d65*radians,parallels\x3d60*radians,inflation\x3d20,ratio\x3d200,mutate\x3dd3Geo.geoProjectionMutator(wagnerRaw),projection\x3dmutate(poleline,parallels,inflation,ratio);projection.poleline\x3dfunction(_){return arguments.length?\nmutate(poleline\x3d+_*radians,parallels,inflation,ratio):poleline*degrees};projection.parallels\x3dfunction(_){return arguments.length?mutate(poleline,parallels\x3d+_*radians,inflation,ratio):parallels*degrees};projection.inflation\x3dfunction(_){return arguments.length?mutate(poleline,parallels,inflation\x3d+_,ratio):inflation};projection.ratio\x3dfunction(_){return arguments.length?mutate(poleline,parallels,inflation,ratio\x3d+_):ratio};return projection.scale(163.775)}function wagner6Raw(lambda,phi){return[lambda*\nsqrt(1-3*phi*phi/(pi$jscomp$0*pi$jscomp$0)),phi]}function wiechelRaw(lambda,phi){var cosPhi\x3dcos(phi),sinPhi\x3dcos(lambda)*cosPhi,sin1_Phi\x3d1-sinPhi;phi\x3dcos(lambda\x3datan2(sin(lambda)*cosPhi,-sin(phi)));lambda\x3dsin(lambda);cosPhi\x3dsqrt(1-sinPhi*sinPhi);return[lambda*cosPhi-phi*sin1_Phi,-phi*cosPhi-lambda*sin1_Phi]}function winkel3Raw(lambda,phi){var coordinates\x3daitoffRaw(lambda,phi);return[(coordinates[0]+lambda/halfPi)/2,(coordinates[1]+phi)/2]}var abs\x3dMath.abs,atan\x3dMath.atan,atan2\x3dMath.atan2,cos\x3dMath.cos,\nexp\x3dMath.exp,floor\x3dMath.floor,log\x3dMath.log,max\x3dMath.max,min\x3dMath.min,pow\x3dMath.pow,round\x3dMath.round,sign\x3dMath.sign||function(x){return 0\x3cx?1:0\x3ex?-1:0},sin\x3dMath.sin,tan\x3dMath.tan,pi$jscomp$0\x3dMath.PI,halfPi\x3dpi$jscomp$0/2,quarterPi\x3dpi$jscomp$0/4,sqrt1_2\x3dMath.SQRT1_2,sqrt2\x3dsqrt(2),sqrtPi\x3dsqrt(pi$jscomp$0),tau\x3d2*pi$jscomp$0,degrees\x3d180/pi$jscomp$0,radians\x3dpi$jscomp$0/180;aitoffRaw.invert\x3dfunction(x,y){if(!(x*x+4*y*y\x3epi$jscomp$0*pi$jscomp$0+1E-6)){var x1\x3dx,y1\x3dy,i\x3d25;do{var sinx\x3dsin(x1),sinx_2\x3dsin(x1/2),cosx_2\x3d\ncos(x1/2),siny\x3dsin(y1),cosy\x3dcos(y1),sin_2y\x3dsin(2*y1),sin2y\x3dsiny*siny,cos2y\x3dcosy*cosy,sin2x_2\x3dsinx_2*sinx_2,c\x3d1-cos2y*cosx_2*cosx_2,e\x3dc?acos(cosy*cosx_2)*sqrt(f\x3d1/c):f\x3d0,f;c\x3d2*e*cosy*sinx_2-x;var fy\x3de*siny-y,dxdx\x3df*(cos2y*sin2x_2+e*cosy*cosx_2*sin2y),dxdy\x3df*(.5*sinx*sin_2y-2*e*siny*sinx_2);sinx\x3d.25*f*(sin_2y*sinx_2-e*siny*cos2y*sinx);cosy\x3df*(sin2y*cosx_2+e*sin2x_2*cosy);cosx_2\x3ddxdy*sinx-cosy*dxdx;if(!cosx_2)break;dxdy\x3d(fy*dxdy-c*cosy)/cosx_2;c\x3d(c*sinx-fy*dxdx)/cosx_2;x1-\x3ddxdy;y1-\x3dc}while((1E-6\x3cabs(dxdy)||\n1E-6\x3cabs(c))\x26\x260\x3c--i);return[x1,y1]}};augustRaw.invert\x3dfunction(x,y){x*\x3d.375;y*\x3d.375;if(!x\x26\x261\x3cabs(y))return null;var s\x3d1+x*x+y*y,sin3Eta\x3dsqrt((s-sqrt(s*s-4*y*y))/2);s\x3dasin(sin3Eta)/3;sin3Eta?(sin3Eta\x3dabs(y/sin3Eta),sin3Eta\x3dlog(sin3Eta+sqrt(sin3Eta*sin3Eta-1))/3):(sin3Eta\x3dabs(x),sin3Eta\x3dlog(sin3Eta+sqrt(sin3Eta*sin3Eta+1))/3);var cosEta\x3dcos(s),coshXi\x3dcosh(sin3Eta),d\x3dcoshXi*coshXi-cosEta*cosEta;return[2*sign(x)*atan2(sinh(sin3Eta)*cosEta,.25-d),2*sign(y)*atan2(coshXi*sin(s),.25+d)]};var sqrt8\x3dsqrt(8),\nphi0$jscomp$0\x3dlog(1+sqrt2);bakerRaw.invert\x3dfunction(x,y){if((y0\x3dabs(y))\x3cphi0$jscomp$0)return[x,2*atan(exp(y))-halfPi];var phi\x3dquarterPi,i\x3d25,y0;do{var delta\x3dcos(phi/2);var tanPhi_2\x3dtan(phi/2);phi-\x3ddelta\x3d(sqrt8*(phi-quarterPi)-log(tanPhi_2)-y0)/(sqrt8-delta*delta/(2*tanPhi_2))}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);return[x/(cos(phi)*(sqrt8-1/sin(phi))),sign(y)*phi]};hammerQuarticAuthalicRaw.invert\x3dfunction(x,y){y\x3d2*asin(y/2);return[x*cos(y/2)/cos(y),y]};var mollweideRaw\x3dmollweideBromleyRaw(sqrt2/halfPi,sqrt2,\npi$jscomp$0);boggsRaw.invert\x3dfunction(x,y){var ky\x3d2.00276*y;y\x3d0\x3ey?-quarterPi:quarterPi;var i\x3d25;do{var delta\x3dky-sqrt2*sin(y);y-\x3ddelta\x3d(sin(2*y)+2*y-pi$jscomp$0*sin(delta))/(2*cos(2*y)+2+pi$jscomp$0*cos(delta)*sqrt2*cos(y))}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);delta\x3dky-sqrt2*sin(y);return[x*(1/cos(delta)+1.11072/cos(y))/2.00276,delta]};sinusoidalRaw.invert\x3dfunction(x,y){return[x/cos(y),y]};var bromleyRaw\x3dmollweideBromleyRaw(1,4/pi$jscomp$0,pi$jscomp$0);collignonRaw.invert\x3dfunction(x,y){var lambda\x3d(lambda\x3d\ny/sqrtPi-1)*lambda;return[0\x3clambda?x*sqrt(pi$jscomp$0/lambda)/2:0,asin(1-lambda)]};var sqrt3\x3dsqrt(3);crasterRaw.invert\x3dfunction(x,y){y\x3d3*asin(y/(sqrt3*sqrtPi));return[sqrtPi*x/(sqrt3*(2*cos(2*y/3)-1)),y]};eckert1Raw.invert\x3dfunction(x,y){var alpha\x3dsqrt(8/(3*pi$jscomp$0));y/\x3dalpha;return[x/(alpha*(1-abs(y)/pi$jscomp$0)),y]};eckert2Raw.invert\x3dfunction(x,y){var alpha\x3d2-abs(y)/sqrt(2*pi$jscomp$0/3);return[x*sqrt(6*pi$jscomp$0)/(2*alpha),sign(y)*asin((4-alpha*alpha)/3)]};eckert3Raw.invert\x3dfunction(x,y){var k\x3d\nsqrt(pi$jscomp$0*(4+pi$jscomp$0))/2;return[x*k/(1+sqrt(1-y*y*(4+pi$jscomp$0)/(4*pi$jscomp$0))),y*k/2]};eckert4Raw.invert\x3dfunction(x,y){y\x3dy*sqrt((4+pi$jscomp$0)/pi$jscomp$0)/2;var k\x3dasin(y),c\x3dcos(k);return[x/(2/sqrt(pi$jscomp$0*(4+pi$jscomp$0))*(1+c)),asin((k+y*(c+2))/(2+halfPi))]};eckert5Raw.invert\x3dfunction(x,y){var k\x3dsqrt(2+pi$jscomp$0);y\x3dy*k/2;return[k*x/(1+cos(y)),y]};eckert6Raw.invert\x3dfunction(x,y){var j\x3d1+halfPi,k\x3dsqrt(j/2);return[2*x*k/(1+cos(y*\x3dk)),asin((y+sin(y))/j)]};var eisenlohrK\x3d3+2*sqrt2;\neisenlohrRaw.invert\x3dfunction(x,y){if(!(p\x3daugustRaw.invert(x/1.2,1.065*y)))return null;var lambda\x3dp[0];p\x3dp[1];var i\x3d20,p;x/\x3deisenlohrK;y/\x3deisenlohrK;do{var _0\x3dlambda/2,_1\x3dp/2,s0\x3dsin(_0),c0\x3dcos(_0),s1\x3dsin(_1),c1\x3dcos(_1),cos1\x3dcos(p),k\x3dsqrt(cos1),t\x3ds1/(c1+sqrt2*c0*k),t2\x3dt*t,c\x3dsqrt(2/(1+t2)),v2\x3d(sqrt2*c1+(c0+s0)*k)/(sqrt2*c1+(c0-s0)*k),v\x3dsqrt(v2),vm1v\x3dv-1/v,vp1v\x3dv+1/v;_1\x3dc*vm1v-2*log(v)-x;_0\x3dc*t*vp1v-2*atan(t)-y;var deltatDeltaLambda\x3ds1\x26\x26sqrt1_2*k*s0*t2/s1,deltatDeltaPhi\x3d(sqrt2*c0*c1+k)/(2*(c1+sqrt2*c0*\nk)*(c1+sqrt2*c0*k)*k),deltacDeltat\x3d-.5*t*c*c*c,deltacDeltaLambda\x3ddeltacDeltat*deltatDeltaLambda;deltacDeltat*\x3ddeltatDeltaPhi;var A\x3d(A\x3d2*c1+sqrt2*k*(c0-s0))*A*v;c0\x3d(sqrt2*c0*c1*k+cos1)/A;s1\x3d-(sqrt2*s0*s1)/(k*A);s0\x3dvm1v*deltacDeltaLambda-2*c0/v+c*(c0+c0/v2);v\x3dvm1v*deltacDeltat-2*s1/v+c*(s1+s1/v2);deltatDeltaLambda\x3dt*vp1v*deltacDeltaLambda-2*deltatDeltaLambda/(1+t2)+c*vp1v*deltatDeltaLambda+c*t*(c0-c0/v2);t2\x3dt*vp1v*deltacDeltat-2*deltatDeltaPhi/(1+t2)+c*vp1v*deltatDeltaPhi+c*t*(s1-s1/v2);t\x3dv*deltatDeltaLambda-\nt2*s0;if(!t)break;t2\x3d(_0*v-_1*t2)/t;_1\x3d(_1*deltatDeltaLambda-_0*s0)/t;lambda-\x3dt2;p\x3dmax(-halfPi,min(halfPi,p-_1))}while((1E-6\x3cabs(t2)||1E-6\x3cabs(_1))\x26\x260\x3c--i);return 1E-6\x3eabs(abs(p)-halfPi)?[0,p]:i\x26\x26[lambda,p]};var faheyK\x3dcos(35*radians);faheyRaw.invert\x3dfunction(x,y){y/\x3d1+faheyK;return[x\x26\x26x/(faheyK*sqrt(1-y*y)),2*atan(y)]};foucautRaw.invert\x3dfunction(x,y){var k\x3datan(y/sqrtPi);y\x3dcos(k);k*\x3d2;return[x*sqrtPi/2/(cos(k)*y*y),k]};var ginzburg4Raw\x3dginzburgPolyconicRaw(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,\n.042555),ginzburg5Raw\x3dginzburgPolyconicRaw(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),ginzburg6Raw\x3dginzburgPolyconicRaw(5/6*pi$jscomp$0,-.62636,-.0344,0,1.3493,-.05524,0,.045);ginzburg8Raw.invert\x3dfunction(x,y){var lambda\x3dx,phi\x3dy,i\x3d50,delta;do{var phi2\x3dphi*phi;phi-\x3ddelta\x3d(phi*(1+phi2/12)-y)/(1+phi2/4)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);i\x3d50;x/\x3d1-.162388*phi2;do{var lambda4\x3d(lambda4\x3dlambda*lambda)*lambda4;lambda-\x3ddelta\x3d(lambda*(.87-9.52426E-4*lambda4)-x)/(.87-.00476213*lambda4)}while(1E-6\x3c\nabs(delta)\x26\x260\x3c--i);return[lambda,phi]};var ginzburg9Raw\x3dginzburgPolyconicRaw(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);gringortenRaw.invert\x3dfunction(x,y$jscomp$0){1\x3cabs(x)\x26\x26(x\x3d2*sign(x)-x);1\x3cabs(y$jscomp$0)\x26\x26(y$jscomp$0\x3d2*sign(y$jscomp$0)-y$jscomp$0);var sx\x3dsign(x),sy\x3dsign(y$jscomp$0),x0\x3d-sx*x,y0\x3d-sy*y$jscomp$0;y$jscomp$0\x3d1\x3ey0/x0;x\x3dy$jscomp$0?y0:x0;var y\x3dy$jscomp$0?x0:y0,x0$jscomp$0\x3d0,x1\x3d1;x0\x3d.5;for(var i\x3d50;;){y0\x3dx0*x0;var sinPhi\x3dsqrt(x0),z\x3dasin(1/sqrt(1+y0)),v\x3d1-y0+x0*(1+y0)*z,p2\x3d\n(1-sinPhi)/v,p\x3dsqrt(p2),a2\x3dp2*(1+y0),h\x3dp*(1-y0),g\x3dsqrt(a2-x*x);h\x3dy+h+x0*g;if(1E-12\x3eabs(x1-x0$jscomp$0)||0\x3d\x3d\x3d--i||0\x3d\x3d\x3dh)break;0\x3ch?x0$jscomp$0\x3dx0:x1\x3dx0;x0\x3d.5*(x0$jscomp$0+x1)}i?(y\x3dasin(sinPhi),i\x3dcos(y),x0$jscomp$0\x3d1/i,x1\x3d2*sinPhi*i,sinPhi\x3d(-v*i-(1-sinPhi)*(-3*x0+z*(1+3*y0))*x1)/(v*v),x0\x3d[pi$jscomp$0/4*(x*(-2*x0$jscomp$0*(.5*sinPhi/p*(1-y0)-2*x0*p*x1)+-x0$jscomp$0*x1*g)+-x0$jscomp$0*(x0*(1+y0)*sinPhi+p2*(1+3*y0)*x1)*asin(x/sqrt(a2))),y]):x0\x3dnull;x\x3dx0[0];x0\x3dx0[1];y0\x3dcos(x0);y$jscomp$0\x26\x26(x\x3d-halfPi-x);\nreturn[sx*(atan2(sin(x)*y0,-sin(x0))+pi$jscomp$0),sy*asin(cos(x)*y0)]};guyouRaw.invert\x3dfunction(x,y){var k_\x3d(sqrt2-1)/(sqrt2+1),k\x3dsqrt(1-k_*k_);y\x3d.5*ellipticF(halfPi,k*k)-y;x\x3d-x;k*\x3dk;if(y)if(y\x3dellipticJ(y,k),x){x\x3dellipticJ(x,1-k);var c\x3dx[1]*x[1]+k*y[0]*y[0]*x[0]*x[0];y\x3d[[y[0]*x[2]/c,y[1]*y[2]*x[0]*x[1]/c],[y[1]*x[1]/c,-y[0]*y[2]*x[0]*x[2]/c],[y[2]*x[1]*x[2]/c,-k*y[0]*y[1]*x[0]/c]]}else y\x3d[[y[0],0],[y[1],0],[y[2],0]];else x\x3dellipticJ(x,1-k),y\x3d[[0,x[0]/x[1]],[1/x[1],0],[x[2]/x[1],0]];k\x3dy[0];y\x3dy[1];\nx\x3dy[0]*y[0]+y[1]*y[1];k\x3d[(k[0]*y[0]+k[1]*y[1])/x,(k[1]*y[0]-k[0]*y[1])/x];return[atan2(k[1],k[0])/-1,2*atan(exp(-.5*log(k_*k[0]*k[0]+k_*k[1]*k[1])))-halfPi]};var healpixParallel\x3dasin(1-1/3)*degrees,healpixLambert\x3dcylindricalEqualAreaRaw(0);sinuMollweideRaw.invert\x3dfunction(x,y){return-.7109889596207567\x3cy?mollweideRaw.invert(x,y-.0528035274542):sinusoidalRaw.invert(x,y)};homolosineRaw.invert\x3dfunction(x,y){return.7109889596207567\x3cabs(y)?mollweideRaw.invert(x,y+(0\x3cy?.0528035274542:-.0528035274542)):sinusoidalRaw.invert(x,\ny)};var lobes\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$1\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$2\x3d[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,\n0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],lobes$3\x3d[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],lobes$4\x3d[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],lobes$5\x3d[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];\nkavrayskiy7Raw.invert\x3dfunction(x,y){return[tau/3*x/sqrt(pi$jscomp$0*pi$jscomp$0/3-y*y),y]};var pi_sqrt2\x3dpi$jscomp$0/sqrt2;larriveeRaw.invert\x3dfunction(x,y){var x0\x3dabs(x),y0\x3dabs(y),lambda\x3d1E-6,phi\x3dhalfPi;y0\x3cpi_sqrt2?phi*\x3dy0/pi_sqrt2:lambda+\x3d6*acos(pi_sqrt2/y0);for(var i\x3d0;25\x3ei;i++){var sinPhi\x3dsin(phi),sqrtcosPhi\x3dsqrt(cos(phi)),sinPhi_2\x3dsin(phi/2),cosPhi_2\x3dcos(phi/2),sinLambda_6\x3dsin(lambda/6),cosLambda_6\x3dcos(lambda/6),f0\x3d.5*lambda*(1+sqrtcosPhi)-x0,f1\x3dphi/(cosPhi_2*cosLambda_6)-y0;sinPhi\x3dsqrtcosPhi?\n-.25*lambda*sinPhi/sqrtcosPhi:0;sqrtcosPhi\x3d.5*(1+sqrtcosPhi);sinPhi_2\x3d(1+.5*phi*sinPhi_2/cosPhi_2)/(cosPhi_2*cosLambda_6);sinLambda_6\x3dphi/cosPhi_2*(sinLambda_6/6)/(cosLambda_6*cosLambda_6);cosPhi_2\x3dsinPhi*sinLambda_6-sinPhi_2*sqrtcosPhi;sinLambda_6\x3d(f0*sinLambda_6-f1*sqrtcosPhi)/cosPhi_2;f0\x3d(f1*sinPhi-f0*sinPhi_2)/cosPhi_2;phi-\x3dsinLambda_6;lambda-\x3df0;if(1E-6\x3eabs(sinLambda_6)\x26\x261E-6\x3eabs(f0))break}return[0\x3ex?-lambda:lambda,0\x3ey?-phi:phi]};laskowskiRaw.invert\x3dfunction(x,y){var lambda\x3dsign(x)*pi$jscomp$0,\nphi\x3dy/2,i\x3d50;do{var lambda2\x3dlambda*lambda,phi2\x3dphi*phi,lambdaPhi\x3dlambda*phi,fx\x3dlambda*(.975534+phi2*(-.119161+-.0143059*lambda2+-.0547009*phi2))-x,fy\x3dphi*(1.00384+lambda2*(.0802894+-.02855*phi2+1.99025E-4*lambda2)+phi2*(.0998909+-.0491032*phi2))-y,deltaxDeltaLambda\x3d.975534-phi2*(.119161+.0429177*lambda2+.0547009*phi2),deltaxDeltaPhi\x3d-lambdaPhi*(.238322+.2188036*phi2+.0286118*lambda2);lambdaPhi*\x3d.1605788+7.961E-4*lambda2+-.0571*phi2;phi2\x3d1.00384+lambda2*(.0802894+1.99025E-4*lambda2)+phi2*(3*(.0998909-\n.02855*lambda2)-.245516*phi2);lambda2\x3ddeltaxDeltaPhi*lambdaPhi-phi2*deltaxDeltaLambda;deltaxDeltaPhi\x3d(fy*deltaxDeltaPhi-fx*phi2)/lambda2;fx\x3d(fx*lambdaPhi-fy*deltaxDeltaLambda)/lambda2;lambda-\x3ddeltaxDeltaPhi;phi-\x3dfx}while((1E-6\x3cabs(deltaxDeltaPhi)||1E-6\x3cabs(fx))\x26\x260\x3c--i);return i\x26\x26[lambda,phi]};littrowRaw.invert\x3dfunction(x,y){var x2\x3dx*x,y2_1\x3dy*y+1,x2_y2_1\x3dx2+y2_1;x2\x3dx?sqrt1_2*sqrt((x2_y2_1-sqrt(x2_y2_1*x2_y2_1-4*x2))/x2):1/sqrt(y2_1);return[asin(x*x2),sign(y)*acos(x2)]};millerRaw.invert\x3dfunction(x,\ny){return[x,2.5*atan(exp(.8*y))-.625*pi$jscomp$0]};var alaska\x3d[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48\x3d[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50\x3d[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7.388E-4,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller$1\x3d[[.9245,0],[0,0],[.01943,0]],lee\x3d[[.721316,0],[0,\n0],[-.00881625,-.00617325]],sqrt6\x3dsqrt(6),sqrt7\x3dsqrt(7);mtFlatPolarParabolicRaw.invert\x3dfunction(x,y){y\x3d3*asin(y*sqrt7/9);return[x*sqrt7/(sqrt6*(2*cos(2*y/3)-1)),asin(3*sin(y)*sqrt6/7)]};mtFlatPolarQuarticRaw.invert\x3dfunction(x,y){y\x3dy*sqrt(2+sqrt2)/(2*sqrt(3));var theta\x3d2*asin(y);return[3*sqrt2*x/(1+2*cos(theta)/cos(theta/2)),asin((y+sin(theta))/(1+sqrt1_2))]};mtFlatPolarSinusoidalRaw.invert\x3dfunction(x,y){var A\x3dsqrt(6/(4+pi$jscomp$0));y/\x3dA;1E-6\x3eabs(abs(y)-halfPi)\x26\x26(y\x3d0\x3ey?-halfPi:halfPi);return[1.5*\nx/(A*(.5+cos(y))),asin((y/2+sin(y))/(1+pi$jscomp$0/4))]};naturalEarth2Raw.invert\x3dfunction(x,y){var phi\x3dy,i\x3d25;do{var delta\x3dphi*phi;var phi4\x3ddelta*delta;phi-\x3ddelta\x3d(phi*(1.01183+phi4*phi4*(-.02625+.01926*delta-.00396*phi4))-y)/(1.01183+phi4*phi4*(-.23625+.21186*delta+-.05148*phi4))}while(1E-12\x3cabs(delta)\x26\x260\x3c--i);delta\x3dphi*phi;phi4\x3ddelta*delta;y\x3ddelta*phi4;return[x/(.84719-.13063*delta+y*y*(-.04515+.05494*delta-.02326*phi4+.00331*y)),phi]};nellHammerRaw.invert\x3dfunction(x,y){for(var p\x3dy/2,i\x3d0,delta\x3d\nInfinity;10\x3ei\x26\x261E-6\x3cabs(delta);++i)delta\x3dcos(y/2),y-\x3ddelta\x3d(y-tan(y/2)-p)/(1-.5/(delta*delta));return[2*x/(1+cos(y)),y]};var lobes$6\x3d[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];nicolosiRaw.invert\x3dfunction(x,y){x/\x3dhalfPi;y/\x3dhalfPi;var x2\x3dx*x,x2y2\x3dx2+y*y,pi2\x3dpi$jscomp$0*pi$jscomp$0;return[x?(x2y2-1+sqrt((1-x2y2)*(1-x2y2)+4*x2))/(2*x)*halfPi:0,solve(function(phi){return x2y2*(pi$jscomp$0*sin(phi)-2*phi)*pi$jscomp$0+4*phi*phi*(y-sin(phi))+\n2*pi$jscomp$0*phi-pi2*y},0)]};var pattersonC2\x3d5*.23185;pattersonRaw.invert\x3dfunction(x,y){1.790857183\x3cy?y\x3d1.790857183:-1.790857183\x3ey\x26\x26(y\x3d-1.790857183);var yc\x3dy;do{var delta\x3dyc*yc;yc-\x3ddelta\x3d(yc*(1.0148+delta*delta*(.23185+delta*(-.14499+.02406*delta)))-y)/(1.0148+delta*delta*(pattersonC2+delta*(-1.01493+.21654*delta)))}while(1E-6\x3cabs(delta));return[x,yc]};polyconicRaw.invert\x3dfunction(x,y){if(1E-6\x3eabs(y))return[x,0];var k\x3dx*x+y*y,phi\x3d.5*y,i\x3d10;do{var delta\x3dtan(phi);var secPhi\x3d1/cos(phi),j\x3dk-2*y*phi+\nphi*phi;phi-\x3ddelta\x3d(delta*j+2*(phi-y))/(2+j*secPhi*secPhi+2*(phi-y)*delta)}while(1E-6\x3cabs(delta)\x26\x260\x3c--i);delta\x3dtan(phi);return[(abs(y)\x3cabs(phi+1/delta)?asin(x*delta):sign(y)*sign(x)*(acos(abs(x*delta))+halfPi))/sin(phi),phi]};var octahedron\x3d[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],octahedron$1\x3d[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(face){return face.map(function(i){return octahedron[i]})}),kx\x3d2/sqrt(3);collignonK.invert\x3dfunction(x,y){return collignonRaw.invert(x/\nkx,y)};var noop\x3d()\x3d\x3e{},points$jscomp$0\x3d[],lines\x3d[],sinkPoint\x3d{point:function(x,y){points$jscomp$0.push([x,y])},result:function(){var result\x3dpoints$jscomp$0.length?2\x3epoints$jscomp$0.length?{type:\x22Point\x22,coordinates:points$jscomp$0[0]}:{type:\x22MultiPoint\x22,coordinates:points$jscomp$0}:null;points$jscomp$0\x3d[];return result}},sinkLine\x3d{lineStart:noop,point:function(x,y){points$jscomp$0.push([x,y])},lineEnd:function(){points$jscomp$0.length\x26\x26(lines.push(points$jscomp$0),points$jscomp$0\x3d[])},result:function(){var result\x3d\nlines.length?2\x3elines.length?{type:\x22LineString\x22,coordinates:lines[0]}:{type:\x22MultiLineString\x22,coordinates:lines}:null;lines\x3d[];return result}},sinkPolygon\x3d{polygonStart:noop,lineStart:noop,point:function(x,y){points$jscomp$0.push([x,y])},lineEnd:function(){var n\x3dpoints$jscomp$0.length;if(n){do points$jscomp$0.push(points$jscomp$0[0].slice());while(4\x3e++n);lines.push(points$jscomp$0);points$jscomp$0\x3d[]}},polygonEnd:noop,result:function(){if(!lines.length)return null;var polygons\x3d[],holes\x3d[];lines.forEach(function(ring){if(4\x3e\n(n\x3dring.length))var JSCompiler_inline_result\x3d!1;else{JSCompiler_inline_result\x3d0;for(var n,area\x3dring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++JSCompiler_inline_result\x3cn;)area+\x3dring[JSCompiler_inline_result-1][1]*ring[JSCompiler_inline_result][0]-ring[JSCompiler_inline_result-1][0]*ring[JSCompiler_inline_result][1];JSCompiler_inline_result\x3d0\x3e\x3darea}JSCompiler_inline_result?polygons.push([ring]):holes.push(ring)});holes.forEach(function(hole){var point\x3dhole[0];polygons.some(function(polygon){for(var ring\x3d\npolygon[0],x\x3dpoint[0],y\x3dpoint[1],contains\x3d!1,i\x3d0,n\x3dring.length,j\x3dn-1;i\x3cn;j\x3di++){var pi\x3dring[i],xi\x3dpi[0];pi\x3dpi[1];var pj\x3dring[j];j\x3dpj[0];pj\x3dpj[1];pi\x3ey^pj\x3ey\x26\x26x\x3c(j-xi)*(y-pi)/(pj-pi)+xi\x26\x26(contains\x3d!contains)}if(contains)return polygon.push(hole),!0})||polygons.push([hole])});lines\x3d[];return polygons.length?1\x3cpolygons.length?{type:\x22MultiPolygon\x22,coordinates:polygons}:{type:\x22Polygon\x22,coordinates:polygons[0]}:null}},K$1\x3d[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,\n.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];K$1.forEach(function(d){d[1]*\x3d1.0144});robinsonRaw.invert\x3dfunction(x,y){var yy\x3dy/halfPi,phi\x3d90*yy,i\x3dmin(18,abs(phi/5)),i0\x3dmax(0,floor(i));do{var ay\x3dK$1[i0][1],by\x3dK$1[i0+1][1],cy\x3dK$1[min(19,i0+2)][1],u\x3dcy-ay;ay\x3dcy-2*by+ay;by\x3d2*(abs(yy)-by)/u;u\x3day/u;u\x3dby*(1-u*by*(1-2*u*by));if(0\x3c\x3du||1\x3d\x3d\x3di0){phi\x3d(0\x3c\x3dy?5:-5)*(u+i);yy\x3d50;do i\x3dmin(18,abs(phi)/\n5),i0\x3dfloor(i),u\x3di-i0,ay\x3dK$1[i0][1],by\x3dK$1[i0+1][1],cy\x3dK$1[min(19,i0+2)][1],phi-\x3d(i\x3d(0\x3c\x3dy?halfPi:-halfPi)*(by+u*(cy-ay)/2+u*u*(cy-2*by+ay)/2)-y)*degrees;while(1E-12\x3cabs(i)\x26\x260\x3c--yy);break}}while(0\x3c\x3d--i0);y\x3dK$1[i0][0];i\x3dK$1[i0+1][0];i0\x3dK$1[min(19,i0+2)][0];return[x/(i+u*(i0-y)/2+u*u*(i0-2*i+y)/2),phi*radians]};timesRaw.invert\x3dfunction(x,y){y/\x3d1.70711;var s\x3dsin(quarterPi*y);return[x/(.74482-.34588*s*s),2*atan(y)]};vanDerGrintenRaw.invert\x3dfunction(x,y){if(1E-6\x3eabs(y))return[x,0];if(1E-6\x3eabs(x))return[0,\nhalfPi*sin(2*atan(y/pi$jscomp$0))];var x2\x3d(x/\x3dpi$jscomp$0)*x,y2\x3d(y/\x3dpi$jscomp$0)*y,x2_y2\x3dx2+y2,z\x3dx2_y2*x2_y2,c1\x3d-abs(y)*(1+x2_y2),c2\x3dc1-2*y2+x2,c3\x3d-2*c1+1+2*y2+z,d\x3dy2/c3+(2*c2*c2*c2/(c3*c3*c3)-9*c1*c2/(c3*c3))/27,a1\x3d(c1-c2*c2/(3*c3))/c3;c1\x3d2*sqrt(-a1/3);d\x3dacos(3*d/(a1*c1))/3;return[pi$jscomp$0*(x2_y2-1+sqrt(1+2*(x2-y2)+z))/(2*x),sign(y)*pi$jscomp$0*(-c1*cos(d+pi$jscomp$0/3)-c2/(3*c3))]};vanDerGrinten2Raw.invert\x3dfunction(x,y){if(!x)return[0,halfPi*sin(2*atan(y/pi$jscomp$0))];var x1\x3dabs(x/pi$jscomp$0),\nA\x3d(1-x1*x1-(y/\x3dpi$jscomp$0)*y)/(2*x1),B\x3dsqrt(A*A+1);return[sign(x)*pi$jscomp$0*(B-A),sign(y)*halfPi*sin(2*atan2(sqrt((1-2*A*x1)*(A+B)-x1),sqrt(B+A+x1)))]};vanDerGrinten3Raw.invert\x3dfunction(x,y){if(!y)return[x,0];y/\x3dpi$jscomp$0;var A\x3d(pi$jscomp$0*pi$jscomp$0*(1-y*y)-x*x)/(2*pi$jscomp$0*x);return[x?pi$jscomp$0*(sign(x)*sqrt(A*A+1)-A):0,halfPi*sin(2*atan(y))]};vanDerGrinten4Raw.invert\x3dfunction(x,y){if(!x||!y)return[x,y];var sy\x3dsign(y);y\x3dabs(y)/pi$jscomp$0;var x1\x3dsign(x)*x/halfPi,D\x3d(x1*x1-1+4*y*y)/abs(x1),\nD2\x3dD*D,B\x3dy*(2-(.5\x3cy?min(y,abs(x)):0));y\x3dx*x+y*y;var i\x3d50;do{var B2\x3dB*B;var delta\x3d(8*B-B2*(B2+2)-5)/(2*B2*(B-1));var C_\x3d(3*B-B2*B-10)/(2*B2*B),C2\x3ddelta*delta,BC\x3dB*delta,B_C\x3dB+delta,B_C2\x3dB_C*B_C,B_3C\x3dB+3*delta,F_\x3d-2*B_C*(4*BC*C2+(1-4*B2+3*B2*B2)*(1+C_)+C2*(-6+14*B2-D2+(-8+8*B2-2*D2)*C_)+BC*(-8+12*B2+(-10+10*B2-D2)*C_));B2\x3dsqrt(B_C2*(B2+C2*D2-1)+(1-B2)*(B2*(B_3C*B_3C+4*C2)+C2*(12*BC+4*C2)));B-\x3ddelta\x3d(D*(B_C2+C2-1)+2*B2-x1*(4*B_C2+D2))/(D*(2*delta*C_+2*B_C*(1+C_))+F_/B2-8*B_C*(D*(-1+C2+B_C2)+2*B2)*(1+\nC_)/(D2+4*B_C2))}while(1E-6\x3cdelta*y*y\x26\x260\x3c--i);return[sign(x)*(sqrt(D*D+4)+D)*pi$jscomp$0/4,sy*halfPi*B]};var A$jscomp$0\x3d4*pi$jscomp$0+3*sqrt(3),B$jscomp$0\x3d2*sqrt(2*pi$jscomp$0*sqrt(3)/A$jscomp$0),wagner4Raw\x3dmollweideBromleyRaw(B$jscomp$0*sqrt(3)/pi$jscomp$0,B$jscomp$0,A$jscomp$0/6);wagner6Raw.invert\x3dfunction(x,y){return[x/sqrt(1-3*y*y/(pi$jscomp$0*pi$jscomp$0)),y]};wiechelRaw.invert\x3dfunction(x,y){var w\x3d(x*x+y*y)/-2,k\x3dsqrt(-w*(2+w)),b\x3dy*w+x*k;x\x3dx*w-y*k;y\x3dsqrt(x*x+b*b);return[atan2(k*b,y*(1+w)),y?-asin(k*\nx/y):0]};winkel3Raw.invert\x3dfunction(x,y){var lambda\x3dx,phi\x3dy,i\x3d25;do{var cosphi\x3dcos(phi),sinphi\x3dsin(phi),sin_2phi\x3dsin(2*phi),sin2phi\x3dsinphi*sinphi,cos2phi\x3dcosphi*cosphi,sinlambda\x3dsin(lambda),coslambda_2\x3dcos(lambda/2),sinlambda_2\x3dsin(lambda/2),sin2lambda_2\x3dsinlambda_2*sinlambda_2,C\x3d1-cos2phi*coslambda_2*coslambda_2,E\x3dC?acos(cosphi*coslambda_2)*sqrt(F\x3d1/C):F\x3d0,F;C\x3d.5*(2*E*cosphi*sinlambda_2+lambda/halfPi)-x;var fy\x3d.5*(E*sinphi+phi)-y,dxdlambda\x3d.5*F*(cos2phi*sin2lambda_2+E*cosphi*coslambda_2*sin2phi)+\n.5/halfPi,dxdphi\x3dF*(sinlambda*sin_2phi/4-E*sinphi*sinlambda_2);sinphi\x3d.125*F*(sin_2phi*sinlambda_2-E*sinphi*cos2phi*sinlambda);sin2phi\x3d.5*F*(sin2phi*coslambda_2+E*sin2lambda_2*cosphi)+.5;cosphi\x3ddxdphi*sinphi-sin2phi*dxdlambda;dxdphi\x3d(fy*dxdphi-C*sin2phi)/cosphi;C\x3d(C*sinphi-fy*dxdlambda)/cosphi;lambda-\x3ddxdphi;phi-\x3dC}while((1E-6\x3cabs(dxdphi)||1E-6\x3cabs(C))\x26\x260\x3c--i);return[lambda,phi]};exports.geoAiry\x3dfunction(){var beta\x3dhalfPi,m\x3dd3Geo.geoProjectionMutator(airyRaw),p\x3dm(beta);p.radius\x3dfunction(_){return arguments.length?\nm(beta\x3d_*radians):beta*degrees};return p.scale(179.976).clipAngle(147)};exports.geoAiryRaw\x3dairyRaw;exports.geoAitoff\x3dfunction(){return d3Geo.geoProjection(aitoffRaw).scale(152.63)};exports.geoAitoffRaw\x3daitoffRaw;exports.geoArmadillo\x3dfunction(){var phi0\x3d20*radians,sPhi0\x3d0\x3c\x3dphi0?1:-1,tanPhi0\x3dtan(sPhi0*phi0),m\x3dd3Geo.geoProjectionMutator(armadilloRaw),p\x3dm(phi0),stream_\x3dp.stream;p.parallel\x3dfunction(_){if(!arguments.length)return phi0*degrees;tanPhi0\x3dtan((sPhi0\x3d0\x3c\x3d(phi0\x3d_*radians)?1:-1)*phi0);return m(phi0)};\np.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream)),precision\x3dp.precision();p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var lambda\x3d-180*sPhi0;180\x3esPhi0*lambda;lambda+\x3d90*sPhi0)sphereStream.point(lambda,90*sPhi0);if(phi0)for(;-180\x3c\x3dsPhi0*(lambda-\x3d3*sPhi0*precision);)sphereStream.point(lambda,sPhi0*-atan2(cos(lambda*radians/2),tanPhi0)*degrees);sphereStream.lineEnd();\nsphereStream.polygonEnd()};return rotateStream};return p.scale(218.695).center([0,28.0974])};exports.geoArmadilloRaw\x3darmadilloRaw;exports.geoAugust\x3dfunction(){return d3Geo.geoProjection(augustRaw).scale(66.1603)};exports.geoAugustRaw\x3daugustRaw;exports.geoBaker\x3dfunction(){return d3Geo.geoProjection(bakerRaw).scale(112.314)};exports.geoBakerRaw\x3dbakerRaw;exports.geoBerghaus\x3dfunction(){var lobes\x3d5,m\x3dd3Geo.geoProjectionMutator(berghausRaw),p\x3dm(lobes),projectionStream\x3dp.stream,cr\x3d-cos(.01*radians),sr\x3dsin(.01*\nradians);p.lobes\x3dfunction(_){return arguments.length?m(lobes\x3d+_):lobes};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dprojectionStream(stream),sphereStream\x3d(p.rotate([0,0]),projectionStream(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var i\x3d0,delta\x3d360/lobes,delta0\x3d2*pi$jscomp$0/lobes,phi\x3d90-180/lobes,phi0\x3dhalfPi;i\x3clobes;++i,phi-\x3ddelta,phi0-\x3ddelta0)sphereStream.point(atan2(sr*cos(phi0),cr)*degrees,asin(sr*sin(phi0))*\ndegrees),-90\x3ephi?(sphereStream.point(-90,-180-phi-.01),sphereStream.point(-90,-180-phi+.01)):(sphereStream.point(90,phi+.01),sphereStream.point(90,phi-.01));sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return p.scale(87.8076).center([0,17.1875]).clipAngle(179.999)};exports.geoBerghausRaw\x3dberghausRaw;exports.geoBertin1953\x3dfunction(){return d3Geo.geoProjection(bertin1953Raw()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])};exports.geoBertin1953Raw\x3dbertin1953Raw;exports.geoBoggs\x3d\nfunction(){return d3Geo.geoProjection(boggsRaw).scale(160.857)};exports.geoBoggsRaw\x3dboggsRaw;exports.geoBonne\x3dfunction(){return parallel1(bonneRaw).scale(123.082).center([0,26.1441]).parallel(45)};exports.geoBonneRaw\x3dbonneRaw;exports.geoBottomley\x3dfunction(){var sinPsi\x3d.5,m\x3dd3Geo.geoProjectionMutator(bottomleyRaw),p\x3dm(sinPsi);p.fraction\x3dfunction(_){return arguments.length?m(sinPsi\x3d+_):sinPsi};return p.scale(158.837)};exports.geoBottomleyRaw\x3dbottomleyRaw;exports.geoBromley\x3dfunction(){return d3Geo.geoProjection(bromleyRaw).scale(152.63)};\nexports.geoBromleyRaw\x3dbromleyRaw;exports.geoChamberlin\x3dchamberlin;exports.geoChamberlinRaw\x3dchamberlinRaw;exports.geoChamberlinAfrica\x3dfunction(){return chamberlin([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])};exports.geoCollignon\x3dfunction(){return d3Geo.geoProjection(collignonRaw).scale(95.6464).center([0,30])};exports.geoCollignonRaw\x3dcollignonRaw;exports.geoCraig\x3dfunction(){return parallel1(craigRaw).scale(249.828).clipAngle(90)};exports.geoCraigRaw\x3dcraigRaw;exports.geoCraster\x3dfunction(){return d3Geo.geoProjection(crasterRaw).scale(156.19)};\nexports.geoCrasterRaw\x3dcrasterRaw;exports.geoCylindricalEqualArea\x3dfunction(){return parallel1(cylindricalEqualAreaRaw).parallel(38.58).scale(195.044)};exports.geoCylindricalEqualAreaRaw\x3dcylindricalEqualAreaRaw;exports.geoCylindricalStereographic\x3dfunction(){return parallel1(cylindricalStereographicRaw).scale(124.75)};exports.geoCylindricalStereographicRaw\x3dcylindricalStereographicRaw;exports.geoEckert1\x3dfunction(){return d3Geo.geoProjection(eckert1Raw).scale(165.664)};exports.geoEckert1Raw\x3deckert1Raw;\nexports.geoEckert2\x3dfunction(){return d3Geo.geoProjection(eckert2Raw).scale(165.664)};exports.geoEckert2Raw\x3deckert2Raw;exports.geoEckert3\x3dfunction(){return d3Geo.geoProjection(eckert3Raw).scale(180.739)};exports.geoEckert3Raw\x3deckert3Raw;exports.geoEckert4\x3dfunction(){return d3Geo.geoProjection(eckert4Raw).scale(180.739)};exports.geoEckert4Raw\x3deckert4Raw;exports.geoEckert5\x3dfunction(){return d3Geo.geoProjection(eckert5Raw).scale(173.044)};exports.geoEckert5Raw\x3deckert5Raw;exports.geoEckert6\x3dfunction(){return d3Geo.geoProjection(eckert6Raw).scale(173.044)};\nexports.geoEckert6Raw\x3deckert6Raw;exports.geoEisenlohr\x3dfunction(){return d3Geo.geoProjection(eisenlohrRaw).scale(62.5271)};exports.geoEisenlohrRaw\x3deisenlohrRaw;exports.geoFahey\x3dfunction(){return d3Geo.geoProjection(faheyRaw).scale(137.152)};exports.geoFaheyRaw\x3dfaheyRaw;exports.geoFoucaut\x3dfunction(){return d3Geo.geoProjection(foucautRaw).scale(135.264)};exports.geoFoucautRaw\x3dfoucautRaw;exports.geoFoucautSinusoidal\x3dfunction(){var alpha\x3d.5,m\x3dd3Geo.geoProjectionMutator(foucautSinusoidalRaw),p\x3dm(alpha);\np.alpha\x3dfunction(_){return arguments.length?m(alpha\x3d+_):alpha};return p.scale(168.725)};exports.geoFoucautSinusoidalRaw\x3dfoucautSinusoidalRaw;exports.geoGilbert\x3dfunction(projectionType){function gilbert(point){return projection([point[0]/2,asin(tan(point[1]/2*radians))*degrees])}function property(name){gilbert[name]\x3dfunction(){return arguments.length?(projection[name].apply(projection,arguments),gilbert):projection[name]()}}null\x3d\x3dprojectionType\x26\x26(projectionType\x3dd3Geo.geoOrthographic);var projection\x3d\nprojectionType(),equirectangular\x3dd3Geo.geoEquirectangular().scale(degrees).precision(0).clipAngle(null).translate([0,0]);projection.invert\x26\x26(gilbert.invert\x3dfunction(point){return gilbertInvert(projection.invert(point))});gilbert.stream\x3dfunction(stream){var s1\x3dprojection.stream(stream);stream\x3dequirectangular.stream({point:function(lambda,phi){s1.point(lambda/2,asin(tan(-phi/2*radians))*degrees)},lineStart:function(){s1.lineStart()},lineEnd:function(){s1.lineEnd()},polygonStart:function(){s1.polygonStart()},\npolygonEnd:function(){s1.polygonEnd()}});stream.sphere\x3ds1.sphere;return stream};gilbert.rotate\x3dfunction(_){return arguments.length?(equirectangular.rotate(_),gilbert):equirectangular.rotate()};gilbert.center\x3dfunction(_){return arguments.length?(projection.center([_[0]/2,asin(tan(_[1]/2*radians))*degrees]),gilbert):gilbertInvert(projection.center())};property(\x22angle\x22);property(\x22clipAngle\x22);property(\x22clipExtent\x22);property(\x22fitExtent\x22);property(\x22fitHeight\x22);property(\x22fitSize\x22);property(\x22fitWidth\x22);property(\x22scale\x22);\nproperty(\x22translate\x22);property(\x22precision\x22);return gilbert.scale(249.5)};exports.geoGingery\x3dfunction(){var n\x3d6,rho\x3d30*radians,cRho\x3dcos(rho),sRho\x3dsin(rho),m\x3dd3Geo.geoProjectionMutator(gingeryRaw),p\x3dm(rho,n),stream_\x3dp.stream,cr\x3d-cos(.01*radians),sr\x3dsin(.01*radians);p.radius\x3dfunction(_){if(!arguments.length)return rho*degrees;cRho\x3dcos(rho\x3d_*radians);sRho\x3dsin(rho);return m(rho,n)};p.lobes\x3dfunction(_){return arguments.length?m(rho,n\x3d+_):n};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),\nsphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){sphereStream.polygonStart();sphereStream.lineStart();for(var i\x3d0,delta\x3d2*pi$jscomp$0/n,phi\x3d0;i\x3cn;++i,phi-\x3ddelta)sphereStream.point(atan2(sr*cos(phi),cr)*degrees,asin(sr*sin(phi))*degrees),sphereStream.point(atan2(sRho*cos(phi-delta/2),cRho)*degrees,asin(sRho*sin(phi-delta/2))*degrees);sphereStream.lineEnd();sphereStream.polygonEnd()};return rotateStream};return p.rotate([90,-40]).scale(91.7095).clipAngle(179.999)};\nexports.geoGingeryRaw\x3dgingeryRaw;exports.geoGinzburg4\x3dfunction(){return d3Geo.geoProjection(ginzburg4Raw).scale(149.995)};exports.geoGinzburg4Raw\x3dginzburg4Raw;exports.geoGinzburg5\x3dfunction(){return d3Geo.geoProjection(ginzburg5Raw).scale(153.93)};exports.geoGinzburg5Raw\x3dginzburg5Raw;exports.geoGinzburg6\x3dfunction(){return d3Geo.geoProjection(ginzburg6Raw).scale(130.945)};exports.geoGinzburg6Raw\x3dginzburg6Raw;exports.geoGinzburg8\x3dfunction(){return d3Geo.geoProjection(ginzburg8Raw).scale(131.747)};exports.geoGinzburg8Raw\x3d\nginzburg8Raw;exports.geoGinzburg9\x3dfunction(){return d3Geo.geoProjection(ginzburg9Raw).scale(131.087)};exports.geoGinzburg9Raw\x3dginzburg9Raw;exports.geoGringorten\x3dfunction(){return d3Geo.geoProjection(squareRaw(gringortenRaw)).scale(239.75)};exports.geoGringortenRaw\x3dgringortenRaw;exports.geoGuyou\x3dfunction(){return d3Geo.geoProjection(squareRaw(guyouRaw)).scale(151.496)};exports.geoGuyouRaw\x3dguyouRaw;exports.geoHammer\x3dfunction(){var B\x3d2,m\x3dd3Geo.geoProjectionMutator(hammerRaw),p\x3dm(B);p.coefficient\x3dfunction(_){return arguments.length?\nm(B\x3d+_):B};return p.scale(169.529)};exports.geoHammerRaw\x3dhammerRaw;exports.geoHammerRetroazimuthal\x3dfunction(){var phi0\x3d0,m\x3dd3Geo.geoProjectionMutator(hammerRetroazimuthalRaw),p$jscomp$0\x3dm(phi0),rotate_\x3dp$jscomp$0.rotate,stream_\x3dp$jscomp$0.stream,circle\x3dd3Geo.geoCircle();p$jscomp$0.parallel\x3dfunction(_){if(!arguments.length)return phi0*degrees;var r\x3dp$jscomp$0.rotate();return m(phi0\x3d_*radians).rotate(r)};p$jscomp$0.rotate\x3dfunction(_){if(!arguments.length)return _\x3drotate_.call(p$jscomp$0),_[1]+\x3dphi0*\ndegrees,_;rotate_.call(p$jscomp$0,[_[0],_[1]-phi0*degrees]);circle.center([-_[0],-_[1]]);return p$jscomp$0};p$jscomp$0.stream\x3dfunction(stream){stream\x3dstream_(stream);stream.sphere\x3dfunction(){stream.polygonStart();var ring\x3dcircle.radius(89.99)().coordinates[0],n\x3dring.length-1,i\x3d-1,p;for(stream.lineStart();++i\x3cn;)stream.point((p\x3dring[i])[0],p[1]);stream.lineEnd();ring\x3dcircle.radius(90.01)().coordinates[0];for(stream.lineStart();0\x3c\x3d--i;)stream.point((p\x3dring[i])[0],p[1]);stream.lineEnd();stream.polygonEnd()};\nreturn stream};return p$jscomp$0.scale(79.4187).parallel(45).clipAngle(179.999)};exports.geoHammerRetroazimuthalRaw\x3dhammerRetroazimuthalRaw;exports.geoHealpix\x3dfunction(){var H\x3d4,m\x3dd3Geo.geoProjectionMutator(healpixRaw),p\x3dm(H),stream_\x3dp.stream;p.lobes\x3dfunction(_){return arguments.length?m(H\x3d+_):H};p.stream\x3dfunction(stream){var rotate\x3dp.rotate(),rotateStream\x3dstream_(stream),sphereStream\x3d(p.rotate([0,0]),stream_(stream));p.rotate(rotate);rotateStream.sphere\x3dfunction(){d3Geo.geoStream(sphere$jscomp$0(180/\nH),sphereStream)};return rotateStream};return p.scale(239.75)};exports.geoHealpixRaw\x3dhealpixRaw;exports.geoHill\x3dfunction(){var K\x3d1,m\x3dd3Geo.geoProjectionMutator(hillRaw),p\x3dm(K);p.ratio\x3dfunction(_){return arguments.length?m(K\x3d+_):K};return p.scale(167.774).center([0,18.67])};exports.geoHillRaw\x3dhillRaw;exports.geoHomolosine\x3dfunction(){return d3Geo.geoProjection(homolosineRaw).scale(152.63)};exports.geoHomolosineRaw\x3dhomolosineRaw;exports.geoHufnagel\x3dfunction(){var a\x3d1,b\x3d0,psiMax\x3d45*radians,ratio\x3d2,mutate\x3d\nd3Geo.geoProjectionMutator(hufnagelRaw),projection\x3dmutate(a,b,psiMax,ratio);projection.a\x3dfunction(_){return arguments.length?mutate(a\x3d+_,b,psiMax,ratio):a};projection.b\x3dfunction(_){return arguments.length?mutate(a,b\x3d+_,psiMax,ratio):b};projection.psiMax\x3dfunction(_){return arguments.length?mutate(a,b,psiMax\x3d+_*radians,ratio):psiMax*degrees};projection.ratio\x3dfunction(_){return arguments.length?mutate(a,b,psiMax,ratio\x3d+_):ratio};return projection.scale(180.739)};exports.geoHufnagelRaw\x3dhufnagelRaw;exports.geoHyperelliptical\x3d\nfunction(){var alpha\x3d0,k\x3d2.5,gamma\x3d1.183136,m\x3dd3Geo.geoProjectionMutator(hyperellipticalRaw),p\x3dm(alpha,k,gamma);p.alpha\x3dfunction(_){return arguments.length?m(alpha\x3d+_,k,gamma):alpha};p.k\x3dfunction(_){return arguments.length?m(alpha,k\x3d+_,gamma):k};p.gamma\x3dfunction(_){return arguments.length?m(alpha,k,gamma\x3d+_):gamma};return p.scale(152.63)};exports.geoHyperellipticalRaw\x3dhyperellipticalRaw;exports.geoInterrupt\x3dinterrupt;exports.geoInterruptedBoggs\x3dfunction(){return interrupt(boggsRaw,lobes).scale(160.857)};\nexports.geoInterruptedHomolosine\x3dfunction(){return interrupt(homolosineRaw,lobes$1).scale(152.63)};exports.geoInterruptedMollweide\x3dfunction(){return interrupt(mollweideRaw,lobes$2).scale(169.529)};exports.geoInterruptedMollweideHemispheres\x3dfunction(){return interrupt(mollweideRaw,lobes$3).scale(169.529).rotate([20,0])};exports.geoInterruptedSinuMollweide\x3dfunction(){return interrupt(sinuMollweideRaw,lobes$4,solve2d).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};exports.geoInterruptedSinusoidal\x3d\nfunction(){return interrupt(sinusoidalRaw,lobes$5).scale(152.63).rotate([-20,0])};exports.geoKavrayskiy7\x3dfunction(){return d3Geo.geoProjection(kavrayskiy7Raw).scale(158.837)};exports.geoKavrayskiy7Raw\x3dkavrayskiy7Raw;exports.geoLagrange\x3dfunction(){var n\x3d.5,m\x3dd3Geo.geoProjectionMutator(lagrangeRaw),p\x3dm(n);p.spacing\x3dfunction(_){return arguments.length?m(n\x3d+_):n};return p.scale(124.75)};exports.geoLagrangeRaw\x3dlagrangeRaw;exports.geoLarrivee\x3dfunction(){return d3Geo.geoProjection(larriveeRaw).scale(97.2672)};\nexports.geoLarriveeRaw\x3dlarriveeRaw;exports.geoLaskowski\x3dfunction(){return d3Geo.geoProjection(laskowskiRaw).scale(139.98)};exports.geoLaskowskiRaw\x3dlaskowskiRaw;exports.geoLittrow\x3dfunction(){return d3Geo.geoProjection(littrowRaw).scale(144.049).clipAngle(89.999)};exports.geoLittrowRaw\x3dlittrowRaw;exports.geoLoximuthal\x3dfunction(){return parallel1(loximuthalRaw).parallel(40).scale(158.837)};exports.geoLoximuthalRaw\x3dloximuthalRaw;exports.geoMiller\x3dfunction(){return d3Geo.geoProjection(millerRaw).scale(108.318)};\nexports.geoMillerRaw\x3dmillerRaw;exports.geoModifiedStereographic\x3dmodifiedStereographic;exports.geoModifiedStereographicRaw\x3dmodifiedStereographicRaw;exports.geoModifiedStereographicAlaska\x3dfunction(){return modifiedStereographic(alaska,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)};exports.geoModifiedStereographicGs48\x3dfunction(){return modifiedStereographic(gs48,[95,-38]).scale(1E3).clipAngle(55).center([-96.5563,38.8675])};exports.geoModifiedStereographicGs50\x3dfunction(){return modifiedStereographic(gs50,\n[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])};exports.geoModifiedStereographicMiller\x3dfunction(){return modifiedStereographic(miller$1,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)};exports.geoModifiedStereographicLee\x3dfunction(){return modifiedStereographic(lee,[165,10]).scale(250).clipAngle(130).center([-165,-10])};exports.geoMollweide\x3dfunction(){return d3Geo.geoProjection(mollweideRaw).scale(169.529)};exports.geoMollweideRaw\x3dmollweideRaw;exports.geoMtFlatPolarParabolic\x3d\nfunction(){return d3Geo.geoProjection(mtFlatPolarParabolicRaw).scale(164.859)};exports.geoMtFlatPolarParabolicRaw\x3dmtFlatPolarParabolicRaw;exports.geoMtFlatPolarQuartic\x3dfunction(){return d3Geo.geoProjection(mtFlatPolarQuarticRaw).scale(188.209)};exports.geoMtFlatPolarQuarticRaw\x3dmtFlatPolarQuarticRaw;exports.geoMtFlatPolarSinusoidal\x3dfunction(){return d3Geo.geoProjection(mtFlatPolarSinusoidalRaw).scale(166.518)};exports.geoMtFlatPolarSinusoidalRaw\x3dmtFlatPolarSinusoidalRaw;exports.geoNaturalEarth2\x3dfunction(){return d3Geo.geoProjection(naturalEarth2Raw).scale(175.295)};\nexports.geoNaturalEarth2Raw\x3dnaturalEarth2Raw;exports.geoNellHammer\x3dfunction(){return d3Geo.geoProjection(nellHammerRaw).scale(152.63)};exports.geoNellHammerRaw\x3dnellHammerRaw;exports.geoInterruptedQuarticAuthalic\x3dfunction(){return interrupt(hammerRaw(Infinity),lobes$6).rotate([20,0]).scale(152.63)};exports.geoNicolosi\x3dfunction(){return d3Geo.geoProjection(nicolosiRaw).scale(127.267)};exports.geoNicolosiRaw\x3dnicolosiRaw;exports.geoPatterson\x3dfunction(){return d3Geo.geoProjection(pattersonRaw).scale(139.319)};\nexports.geoPattersonRaw\x3dpattersonRaw;exports.geoPolyconic\x3dfunction(){return d3Geo.geoProjection(polyconicRaw).scale(103.74)};exports.geoPolyconicRaw\x3dpolyconicRaw;exports.geoPolyhedral\x3dpolyhedral;exports.geoPolyhedralButterfly\x3dfunction(faceProjection){faceProjection\x3dfaceProjection||function(face){face\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face});return d3Geo.geoGnomonic().scale(1).translate([0,0]).rotate([-face[0],-face[1]])};var faces\x3doctahedron$1.map(function(face){return{face,project:faceProjection(face)}});\n[-1,0,0,1,0,1,4,5].forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){return faces[lambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3ephi?3:1:0\x3ephi?7:5]}).angle(-30).scale(101.858).center([0,45])};exports.geoPolyhedralCollignon\x3dfunction(faceProjection){faceProjection\x3dfaceProjection||function(face){face\x3dd3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face});return d3Geo.geoProjection(collignonK).translate([0,\n0]).scale(1).rotate(0\x3cface[1]?[-face[0],0]:[180-face[0],180])};var faces\x3doctahedron$1.map(function(face){return{face,project:faceProjection(face)}});[-1,0,0,1,0,1,4,5].forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){return faces[lambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3ephi?3:1:0\x3ephi?7:5]}).angle(-30).scale(121.906).center([0,48.5904])};exports.geoPolyhedralWaterman\x3dfunction(faceProjection){faceProjection\x3d\nfaceProjection||function(face){face\x3d6\x3d\x3d\x3dface.length?d3Geo.geoCentroid({type:\x22MultiPoint\x22,coordinates:face}):face[0];return d3Geo.geoGnomonic().scale(1).translate([0,0]).rotate([-face[0],-face[1]])};var w5\x3doctahedron$1.map(function(face){face\x3dface.map(cartesian$jscomp$0);for(var n\x3dface.length,a\x3dface[n-1],b,hexagon\x3d[],i\x3d0;i\x3cn;++i)b\x3dface[i],hexagon.push(spherical([.9486832980505138*a[0]+.31622776601683794*b[0],.9486832980505138*a[1]+.31622776601683794*b[1],.9486832980505138*a[2]+.31622776601683794*b[2]]),\nspherical([.9486832980505138*b[0]+.31622776601683794*a[0],.9486832980505138*b[1]+.31622776601683794*a[1],.9486832980505138*b[2]+.31622776601683794*a[2]])),a\x3db;return hexagon}),cornerNormals\x3d[],parents\x3d[-1,0,0,1,0,1,4,5];w5.forEach(function(hexagon,j){for(var face\x3doctahedron$1[j],n\x3dface.length,normals\x3dcornerNormals[j]\x3d[],i\x3d0;i\x3cn;++i)w5.push([face[i],hexagon[(2*i+2)%(2*n)],hexagon[(2*i+1)%(2*n)]]),parents.push(j),normals.push(cross(cartesian$jscomp$0(hexagon[(2*i+2)%(2*n)]),cartesian$jscomp$0(hexagon[(2*\ni+1)%(2*n)])))});var faces\x3dw5.map(function(face){return{project:faceProjection(face),face}});parents.forEach(function(d,i){(d\x3dfaces[d])\x26\x26(d.children||(d.children\x3d[])).push(faces[i])});return polyhedral(faces[0],function(lambda,phi){var cosphi\x3dcos(phi);cosphi\x3d[cosphi*cos(lambda),cosphi*sin(lambda),sin(phi)];lambda\x3dlambda\x3c-pi$jscomp$0/2?0\x3ephi?6:4:0\x3elambda?0\x3ephi?2:0:lambda\x3cpi$jscomp$0/2?0\x3ephi?3:1:0\x3ephi?7:5;phi\x3dcornerNormals[lambda];return faces[0\x3edot(phi[0],cosphi)?8+3*lambda:0\x3edot(phi[1],cosphi)?3*\nlambda+9:0\x3edot(phi[2],cosphi)?3*lambda+10:lambda]}).angle(-30).scale(110.625).center([0,45])};exports.geoProject\x3dfunction(object,projection){projection\x3dprojection.stream;if(!projection)throw Error(\x22invalid projection\x22);switch(object\x26\x26object.type){case \x22Feature\x22:var project\x3dprojectFeature;break;case \x22FeatureCollection\x22:project\x3dprojectFeatureCollection;break;default:project\x3dprojectGeometry}return project(object,projection)};exports.geoGringortenQuincuncial\x3dfunction(){return quincuncial(gringortenRaw).scale(176.423)};\nexports.geoPeirceQuincuncial\x3dfunction(){return quincuncial(guyouRaw).scale(111.48)};exports.geoQuantize\x3dfunction(input$jscomp$0,digits){function quantizePoint(input){var n\x3dinput.length,i\x3d2,output\x3dArray(n);output[0]\x3d+input[0].toFixed(digits);for(output[1]\x3d+input[1].toFixed(digits);i\x3cn;)output[i]\x3dinput[i],++i;return output}function quantizePointsNoDuplicates(input){for(var point0\x3dquantizePoint(input[0]),output\x3d[point0],i\x3d1;i\x3cinput.length;i++){var point\x3dquantizePoint(input[i]);if(2\x3cpoint.length||point[0]!\x3d\npoint0[0]||point[1]!\x3dpoint0[1])output.push(point),point0\x3dpoint}1\x3d\x3d\x3doutput.length\x26\x261\x3cinput.length\x26\x26output.push(quantizePoint(input[input.length-1]));return output}function quantizePolygon(input){return input.map(quantizePointsNoDuplicates)}function quantizeGeometry(input){if(null\x3d\x3dinput)return input;switch(input.type){case \x22GeometryCollection\x22:var output\x3d{type:\x22GeometryCollection\x22,geometries:input.geometries.map(quantizeGeometry)};break;case \x22Point\x22:output\x3d{type:\x22Point\x22,coordinates:quantizePoint(input.coordinates)};\nbreak;case \x22MultiPoint\x22:output\x3d{type:input.type,coordinates:input.coordinates.map(quantizePoint)};break;case \x22LineString\x22:output\x3d{type:input.type,coordinates:quantizePointsNoDuplicates(input.coordinates)};break;case \x22MultiLineString\x22:case \x22Polygon\x22:output\x3d{type:input.type,coordinates:quantizePolygon(input.coordinates)};break;case \x22MultiPolygon\x22:output\x3d{type:\x22MultiPolygon\x22,coordinates:input.coordinates.map(quantizePolygon)};break;default:return input}null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}\nfunction quantizeFeature(input){var output\x3d{type:\x22Feature\x22,properties:input.properties,geometry:quantizeGeometry(input.geometry)};null!\x3dinput.id\x26\x26(output.id\x3dinput.id);null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output}if(!(0\x3c\x3d(digits\x3d+digits)\x26\x2620\x3e\x3ddigits))throw Error(\x22invalid digits\x22);if(null!\x3dinput$jscomp$0)switch(input$jscomp$0.type){case \x22Feature\x22:return quantizeFeature(input$jscomp$0);case \x22FeatureCollection\x22:var output$jscomp$0\x3d{type:\x22FeatureCollection\x22,features:input$jscomp$0.features.map(quantizeFeature)};\nnull!\x3dinput$jscomp$0.bbox\x26\x26(output$jscomp$0.bbox\x3dinput$jscomp$0.bbox);return output$jscomp$0;default:return quantizeGeometry(input$jscomp$0)}return input$jscomp$0};exports.geoQuincuncial\x3dquincuncial;exports.geoRectangularPolyconic\x3dfunction(){return parallel1(rectangularPolyconicRaw).scale(131.215)};exports.geoRectangularPolyconicRaw\x3drectangularPolyconicRaw;exports.geoRobinson\x3dfunction(){return d3Geo.geoProjection(robinsonRaw).scale(152.63)};exports.geoRobinsonRaw\x3drobinsonRaw;exports.geoSatellite\x3d\nfunction(){var distance\x3d2,omega\x3d0,m\x3dd3Geo.geoProjectionMutator(satelliteRaw),p\x3dm(distance,omega);p.distance\x3dfunction(_){return arguments.length?m(distance\x3d+_,omega):distance};p.tilt\x3dfunction(_){return arguments.length?m(distance,omega\x3d_*radians):omega*degrees};return p.scale(432.147).clipAngle(acos(1/distance)*degrees-1E-6)};exports.geoSatelliteRaw\x3dsatelliteRaw;exports.geoSinuMollweide\x3dfunction(){return d3Geo.geoProjection(sinuMollweideRaw).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};exports.geoSinuMollweideRaw\x3d\nsinuMollweideRaw;exports.geoSinusoidal\x3dfunction(){return d3Geo.geoProjection(sinusoidalRaw).scale(152.63)};exports.geoSinusoidalRaw\x3dsinusoidalRaw;exports.geoStitch\x3dfunction(input){if(null\x3d\x3dinput)return input;switch(input.type){case \x22Feature\x22:return stitchFeature(input);case \x22FeatureCollection\x22:var output\x3d{type:\x22FeatureCollection\x22,features:input.features.map(stitchFeature)};null!\x3dinput.bbox\x26\x26(output.bbox\x3dinput.bbox);return output;default:return stitchGeometry(input)}};exports.geoTimes\x3dfunction(){return d3Geo.geoProjection(timesRaw).scale(146.153)};\nexports.geoTimesRaw\x3dtimesRaw;exports.geoTwoPointAzimuthal\x3dtwoPointAzimuthal;exports.geoTwoPointAzimuthalRaw\x3dtwoPointAzimuthalRaw;exports.geoTwoPointAzimuthalUsa\x3dfunction(){return twoPointAzimuthal([-158,21.5],[-77,39]).clipAngle(60).scale(400)};exports.geoTwoPointEquidistant\x3dtwoPointEquidistant;exports.geoTwoPointEquidistantRaw\x3dtwoPointEquidistantRaw;exports.geoTwoPointEquidistantUsa\x3dfunction(){return twoPointEquidistant([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)};exports.geoVanDerGrinten\x3d\nfunction(){return d3Geo.geoProjection(vanDerGrintenRaw).scale(79.4183)};exports.geoVanDerGrintenRaw\x3dvanDerGrintenRaw;exports.geoVanDerGrinten2\x3dfunction(){return d3Geo.geoProjection(vanDerGrinten2Raw).scale(79.4183)};exports.geoVanDerGrinten2Raw\x3dvanDerGrinten2Raw;exports.geoVanDerGrinten3\x3dfunction(){return d3Geo.geoProjection(vanDerGrinten3Raw).scale(79.4183)};exports.geoVanDerGrinten3Raw\x3dvanDerGrinten3Raw;exports.geoVanDerGrinten4\x3dfunction(){return d3Geo.geoProjection(vanDerGrinten4Raw).scale(127.16)};\nexports.geoVanDerGrinten4Raw\x3dvanDerGrinten4Raw;exports.geoWagner\x3dwagner;exports.geoWagner7\x3dfunction(){return wagner().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)};exports.geoWagnerRaw\x3dwagnerRaw;exports.geoWagner4\x3dfunction(){return d3Geo.geoProjection(wagner4Raw).scale(176.84)};exports.geoWagner4Raw\x3dwagner4Raw;exports.geoWagner6\x3dfunction(){return d3Geo.geoProjection(wagner6Raw).scale(152.63)};exports.geoWagner6Raw\x3dwagner6Raw;exports.geoWiechel\x3dfunction(){return d3Geo.geoProjection(wiechelRaw).rotate([0,\n-90,45]).scale(124.75).clipAngle(179.999)};exports.geoWiechelRaw\x3dwiechelRaw;exports.geoWinkel3\x3dfunction(){return d3Geo.geoProjection(winkel3Raw).scale(158.837)};exports.geoWinkel3Raw\x3dwinkel3Raw;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_projection$build$vega_projection.js", true , "shadow$provide.module$node_modules$vega_projection$build$vega_projection\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_geo_projection$dist$d3_geo_projection\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-geo\x22,\x22d3-geo-projection\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?\nglobalThis:global||self,factory(global.vega\x3d{},global.d3,global.d3))})(this,function(exports,d3Geo,d3GeoProjection){function create(type,constructor){return function projection(){const p\x3dconstructor();p.type\x3dtype;p.path\x3dd3Geo.geoPath().projection(p);p.copy\x3dp.copy||function(){const c\x3dprojection();projectionProperties.forEach(prop\x3d\x3e{if(p[prop])c[prop](p[prop]())});c.path.pointRadius(p.path.pointRadius());return c};return p}}function projection$jscomp$0(type,proj){if(!type||\x22string\x22!\x3d\x3dtypeof type)throw Error(\x22Projection type must be a name string.\x22);\ntype\x3dtype.toLowerCase();return 1\x3carguments.length?(projections[type]\x3dcreate(type,proj),this):projections[type]||null}const defaultPath\x3dd3Geo.geoPath(),projectionProperties\x3d\x22clipAngle clipExtent scale translate center rotate parallels precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt\x22.split(\x22 \x22),projections\x3d{albers:d3Geo.geoAlbers,albersusa:d3Geo.geoAlbersUsa,azimuthalequalarea:d3Geo.geoAzimuthalEqualArea,azimuthalequidistant:d3Geo.geoAzimuthalEquidistant,\nconicconformal:d3Geo.geoConicConformal,conicequalarea:d3Geo.geoConicEqualArea,conicequidistant:d3Geo.geoConicEquidistant,equalEarth:d3Geo.geoEqualEarth,equirectangular:d3Geo.geoEquirectangular,gnomonic:d3Geo.geoGnomonic,identity:d3Geo.geoIdentity,mercator:d3Geo.geoMercator,mollweide:d3GeoProjection.geoMollweide,naturalEarth1:d3Geo.geoNaturalEarth1,orthographic:d3Geo.geoOrthographic,stereographic:d3Geo.geoStereographic,transversemercator:d3Geo.geoTransverseMercator};for(const key in projections)projection$jscomp$0(key,\nprojections[key]);exports.getProjectionPath\x3dfunction(proj){return proj\x26\x26proj.path||defaultPath};exports.projection\x3dprojection$jscomp$0;exports.projectionProperties\x3dprojectionProperties;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_geo$build$vega_geo.js", true , "shadow$provide.module$node_modules$vega_geo$build$vega_geo\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_projection$build$vega_projection\x22),\nrequire(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_color$dist$d3_color\x22),require(\x22module$node_modules$vega_canvas$build$vega_canvas_min\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-dataflow vega-util d3-array vega-statistics vega-projection d3-geo d3-color vega-canvas\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3,\nglobal.vega,global.vega,global.d3,global.d3,global.vega))})(this,function(exports,vegaDataflow,vegaUtil,d3Array,vegaStatistics,vegaProjection,d3Geo,d3Color,vegaCanvas){function noop(){}function contours$jscomp$0(){function contours(values,tz){return tz.map(value\x3d\x3econtour(values,value))}function contour(values,value){var polygons\x3d[],holes\x3d[];isorings(values,value,ring\x3d\x3e{smooth(ring,values,value);for(var i\x3d0,n\x3dring.length,area\x3dring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++i\x3cn;)area+\x3dring[i-1][1]*\nring[i][0]-ring[i-1][0]*ring[i][1];0\x3carea?polygons.push([ring]):holes.push(ring)});holes.forEach(hole$jscomp$0\x3d\x3e{for(var i\x3d0,n\x3dpolygons.length,polygon;i\x3cn;++i){a:{var JSCompiler_inline_result\x3d(polygon\x3dpolygons[i])[0];for(var hole\x3dhole$jscomp$0,i$jscomp$0\x3d-1,n$jscomp$0\x3dhole.length;++i$jscomp$0\x3cn$jscomp$0;){b:{var c\x3dJSCompiler_inline_result;for(var point\x3dhole[i$jscomp$0],x\x3dpoint[0],y\x3dpoint[1],contains\x3d-1,i$jscomp$1\x3d0,n$jscomp$1\x3dc.length,j\x3dn$jscomp$1-1;i$jscomp$1\x3cn$jscomp$1;j\x3di$jscomp$1++){var pi\x3dc[i$jscomp$1],\nxi\x3dpi[0],yi\x3dpi[1],pj\x3dc[j];j\x3dpj[0];var yj\x3dpj[1],i$jscomp$2,a\x3dpi;pi\x3dpj;pj\x3dpoint;if(i$jscomp$2\x3d(pi[0]-a[0])*(pj[1]-a[1])\x3d\x3d\x3d(pj[0]-a[0])*(pi[1]-a[1]))a\x3da[i$jscomp$2\x3d+(a[0]\x3d\x3d\x3dpi[0])],pj\x3dpj[i$jscomp$2],pi\x3dpi[i$jscomp$2],i$jscomp$2\x3da\x3c\x3dpj\x26\x26pj\x3c\x3dpi||pi\x3c\x3dpj\x26\x26pj\x3c\x3da;if(i$jscomp$2){c\x3d0;break b}yi\x3ey!\x3d\x3dyj\x3ey\x26\x26x\x3c(j-xi)*(y-yi)/(yj-yi)+xi\x26\x26(contains\x3d-contains)}c\x3dcontains}if(c){JSCompiler_inline_result\x3dc;break a}}JSCompiler_inline_result\x3d0}if(-1!\x3d\x3dJSCompiler_inline_result){polygon.push(hole$jscomp$0);break}}});return{type:\x22MultiPolygon\x22,\nvalue,coordinates:polygons}}function isorings(values,value,callback){function stitch(line){var start\x3d[line[0][0]+x,line[0][1]+y];line\x3d[line[1][0]+x,line[1][1]+y];var startIndex\x3d2*start[0]+start[1]*(dx+1)*4,endIndex\x3d2*line[0]+line[1]*(dx+1)*4,f,g;(f\x3dfragmentByEnd[startIndex])?(g\x3dfragmentByStart[endIndex])?(delete fragmentByEnd[f.end],delete fragmentByStart[g.start],f\x3d\x3d\x3dg?(f.ring.push(line),callback(f.ring)):fragmentByStart[f.start]\x3dfragmentByEnd[g.end]\x3d{start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):\n(delete fragmentByEnd[f.end],f.ring.push(line),fragmentByEnd[f.end\x3dendIndex]\x3df):(f\x3dfragmentByStart[endIndex])?(g\x3dfragmentByEnd[startIndex])?(delete fragmentByStart[f.start],delete fragmentByEnd[g.end],f\x3d\x3d\x3dg?(f.ring.push(line),callback(f.ring)):fragmentByStart[g.start]\x3dfragmentByEnd[f.end]\x3d{start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],f.ring.unshift(start),fragmentByStart[f.start\x3dstartIndex]\x3df):fragmentByStart[startIndex]\x3dfragmentByEnd[endIndex]\x3d{start:startIndex,\nend:endIndex,ring:[start,line]}}var fragmentByStart\x3d[],fragmentByEnd\x3d[],y;var x\x3dy\x3d-1;var t1\x3dvalues[0]\x3e\x3dvalue;for(cases[t1\x3c\x3c1].forEach(stitch);++x\x3cdx-1;){var t0\x3dt1;t1\x3dvalues[x+1]\x3e\x3dvalue;cases[t0|t1\x3c\x3c1].forEach(stitch)}for(cases[t1\x3c\x3c0].forEach(stitch);++y\x3cdy-1;){x\x3d-1;t1\x3dvalues[y*dx+dx]\x3e\x3dvalue;var t2\x3dvalues[y*dx]\x3e\x3dvalue;for(cases[t1\x3c\x3c1|t2\x3c\x3c2].forEach(stitch);++x\x3cdx-1;){t0\x3dt1;t1\x3dvalues[y*dx+dx+x+1]\x3e\x3dvalue;var t3\x3dt2;t2\x3dvalues[y*dx+x+1]\x3e\x3dvalue;cases[t0|t1\x3c\x3c1|t2\x3c\x3c2|t3\x3c\x3c3].forEach(stitch)}cases[t1|t2\x3c\x3c3].forEach(stitch)}x\x3d\n-1;t2\x3dvalues[y*dx]\x3e\x3dvalue;for(cases[t2\x3c\x3c2].forEach(stitch);++x\x3cdx-1;)t3\x3dt2,t2\x3dvalues[y*dx+x+1]\x3e\x3dvalue,cases[t2\x3c\x3c2|t3\x3c\x3c3].forEach(stitch);cases[t2\x3c\x3c3].forEach(stitch)}function smoothLinear(ring,values,value){ring.forEach(point\x3d\x3e{var x\x3dpoint[0],y\x3dpoint[1],xt\x3dx|0,yt\x3dy|0,v1\x3dvalues[yt*dx+xt];if(0\x3cx\x26\x26x\x3cdx\x26\x26xt\x3d\x3d\x3dx){var v0\x3dvalues[yt*dx+xt-1];point[0]\x3dx+(value-v0)/(v1-v0)-.5}0\x3cy\x26\x26y\x3cdy\x26\x26yt\x3d\x3d\x3dy\x26\x26(v0\x3dvalues[(yt-1)*dx+xt],point[1]\x3dy+(value-v0)/(v1-v0)-.5)})}var dx\x3d1,dy\x3d1,smooth\x3dsmoothLinear;contours.contour\x3dcontour;\ncontours.size\x3dfunction(_){if(!arguments.length)return[dx,dy];var _0\x3dMath.floor(_[0]),_1\x3dMath.floor(_[1]);0\x3c\x3d_0\x26\x260\x3c\x3d_1||vegaUtil.error(\x22invalid size\x22);return dx\x3d_0,dy\x3d_1,contours};contours.smooth\x3dfunction(_){return arguments.length?(smooth\x3d_?smoothLinear:noop,contours):smooth\x3d\x3d\x3dsmoothLinear};return contours}function quantize(k,nice,zero){return function(values){var ex\x3dvegaUtil.extent(values);values\x3dzero?Math.min(ex[0],0):ex[0];ex\x3dex[1];var span\x3dex-values;span\x3dnice?d3Array.tickStep(values,ex,k):span/\n(k+1);return d3Array.range(values+span,ex,span)}}function Isocontour(params){vegaDataflow.Transform.call(this,null,params)}function levels(values,f,_){const q\x3dquantize(_.levels||10,_.nice,!1!\x3d\x3d_.zero);return\x22shared\x22!\x3d\x3d_.resolve?q:q(values.map(t\x3d\x3ed3Array.max(f(t).values)))}function transformPaths(paths,grid,datum,_){var s\x3d_.scale||grid.scale;let t\x3d_.translate||grid.translate;vegaUtil.isFunction(s)\x26\x26(s\x3ds(datum,_));vegaUtil.isFunction(t)\x26\x26(t\x3dt(datum,_));if(1!\x3d\x3ds\x26\x26null!\x3ds||t)datum\x3d(vegaUtil.isNumber(s)?\ns:s[0])||1,s\x3d(vegaUtil.isNumber(s)?s:s[1])||1,paths.forEach(transform(grid,datum,s,t\x26\x26t[0]||0,t\x26\x26t[1]||0))}function transform(grid,sx,sy,tx,ty){function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){flip\x26\x26coordinates.reverse();coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]\x3d(coordinates[0]-x1)*sx+tx;coordinates[1]\x3d(coordinates[1]-y1)*sy+ty}const x1\x3dgrid.x1||0,y1\x3dgrid.y1||0,flip\x3d0\x3esx*sy;return function(geometry){geometry.coordinates.forEach(transformPolygon);\nreturn geometry}}function radius(bw,data,f){bw\x3d0\x3c\x3dbw?bw:vegaStatistics.bandwidthNRD(data,f);return Math.round((Math.sqrt(4*bw*bw+1)-1)/2)}function number(_){return vegaUtil.isFunction(_)?_:vegaUtil.constant(+_)}function density2D(){function density(data,counts){const rx\x3dradius(bandwidth[0],data,x)\x3e\x3ek,ry\x3dradius(bandwidth[1],data,y)\x3e\x3ek,ox\x3drx?rx+2:0,oy\x3dry?ry+2:0,n\x3d2*ox+(dx\x3e\x3ek),m\x3d2*oy+(dy\x3e\x3ek),values0\x3dnew Float32Array(n*m),values1\x3dnew Float32Array(n*m);let values\x3dvalues0;data.forEach(d\x3d\x3e{const xi\x3dox+(+x(d)\x3e\x3e\nk),yi\x3doy+(+y(d)\x3e\x3ek);0\x3c\x3dxi\x26\x26xi\x3cn\x26\x260\x3c\x3dyi\x26\x26yi\x3cm\x26\x26(values0[xi+yi*n]+\x3d+weight(d))});0\x3crx\x26\x260\x3cry?(blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry),blurX(n,m,values0,values1,rx),blurY(n,m,values1,values0,ry)):0\x3crx?(blurX(n,m,values0,values1,rx),blurX(n,m,values1,values0,rx),blurX(n,m,values0,values1,rx),values\x3dvalues1):0\x3cry\x26\x26(blurY(n,m,values0,values1,ry),blurY(n,m,values1,values0,ry),blurY(n,m,values0,values1,ry),values\x3dvalues1);data\x3d\ncounts?Math.pow(2,-2*k):1/d3Array.sum(values);for(let i\x3d0,sz\x3dn*m;i\x3csz;++i)values[i]*\x3ddata;return{values,scale:1\x3c\x3ck,width:n,height:m,x1:ox,y1:oy,x2:ox+(dx\x3e\x3ek),y2:oy+(dy\x3e\x3ek)}}var x\x3dd\x3d\x3ed[0],y\x3dd\x3d\x3ed[1],weight\x3dvegaUtil.one,bandwidth\x3d[-1,-1],dx\x3d960,dy\x3d500,k\x3d2;density.x\x3dfunction(_){return arguments.length?(x\x3dnumber(_),density):x};density.y\x3dfunction(_){return arguments.length?(y\x3dnumber(_),density):y};density.weight\x3dfunction(_){return arguments.length?(weight\x3dnumber(_),density):weight};density.size\x3dfunction(_){if(!arguments.length)return[dx,\ndy];var _0\x3d+_[0],_1\x3d+_[1];0\x3c\x3d_0\x26\x260\x3c\x3d_1||vegaUtil.error(\x22invalid size\x22);return dx\x3d_0,dy\x3d_1,density};density.cellSize\x3dfunction(_){if(!arguments.length)return 1\x3c\x3ck;1\x3c\x3d(_\x3d+_)||vegaUtil.error(\x22invalid cell size\x22);k\x3dMath.floor(Math.log(_)/Math.LN2);return density};density.bandwidth\x3dfunction(_){if(!arguments.length)return bandwidth;_\x3dvegaUtil.array(_);1\x3d\x3d\x3d_.length\x26\x26(_\x3d[+_[0],+_[0]]);2!\x3d\x3d_.length\x26\x26vegaUtil.error(\x22invalid bandwidth\x22);return bandwidth\x3d_,density};return density}function blurX(n,m,source,target,\nr){const w\x3d(r\x3c\x3c1)+1;for(let j\x3d0;j\x3cm;++j)for(let i\x3d0,sr\x3d0;i\x3cn+r;++i)i\x3cn\x26\x26(sr+\x3dsource[i+j*n]),i\x3e\x3dr\x26\x26(i\x3e\x3dw\x26\x26(sr-\x3dsource[i-w+j*n]),target[i-r+j*n]\x3dsr/Math.min(i+1,n-1+w-i,w))}function blurY(n,m,source,target,r){const w\x3d(r\x3c\x3c1)+1;for(let i\x3d0;i\x3cn;++i)for(let j\x3d0,sr\x3d0;j\x3cm+r;++j)j\x3cm\x26\x26(sr+\x3dsource[i+j*n]),j\x3e\x3dr\x26\x26(j\x3e\x3dw\x26\x26(sr-\x3dsource[i+(j-w)*n]),target[i+(j-r)*n]\x3dsr/Math.min(j+1,m-1+w-j,w))}function KDE2D(params){vegaDataflow.Transform.call(this,null,params)}function params$jscomp$0(obj,_){PARAMS.forEach(param\x3d\x3e\nnull!\x3d_[param]?obj[param](_[param]):0);return obj}function partition(data,groupby){var groups\x3d[],get\x3df\x3d\x3ef(t),n;if(null\x3d\x3dgroupby)groups.push(data);else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g));g.push(t)}}return groups}function Contour(params){vegaDataflow.Transform.call(this,null,params)}function GeoJSON(params){vegaDataflow.Transform.call(this,null,params)}function GeoPath(params){vegaDataflow.Transform.call(this,\nnull,params)}function initPath(path,pointRadius){const prev\x3dpath.pointRadius();path.context(null);null!\x3dpointRadius\x26\x26path.pointRadius(pointRadius);return prev}function GeoPoint(params){vegaDataflow.Transform.call(this,null,params)}function GeoShape(params){vegaDataflow.Transform.call(this,null,params)}function shapeGenerator(path,field,pointRadius){const shape\x3dnull\x3d\x3dpointRadius?_\x3d\x3epath(field(_)):_\x3d\x3e{var prev\x3dpath.pointRadius();_\x3dpath.pointRadius(pointRadius)(field(_));path.pointRadius(prev);return _};\nshape.context\x3d_\x3d\x3e{path.context(_);return shape};return shape}function Graticule(params){vegaDataflow.Transform.call(this,[],params);this.generator\x3dd3Geo.geoGraticule()}function Heatmap(params){vegaDataflow.Transform.call(this,null,params)}function color_(color,_){let f;vegaUtil.isFunction(color)?(f\x3dobj\x3d\x3ed3Color.rgb(color(obj,_)),f.dep\x3ddependency(color)):f\x3dvegaUtil.constant(d3Color.rgb(color||\x22#888\x22));return f}function opacity_(opacity,_){let f;vegaUtil.isFunction(opacity)?(f\x3dobj\x3d\x3eopacity(obj,_),f.dep\x3d\ndependency(opacity)):opacity?f\x3dvegaUtil.constant(opacity):(f\x3dobj\x3d\x3eobj.$value/obj.$max||0,f.dep\x3d!0);return f}function dependency(f){if(!vegaUtil.isFunction(f))return!1;f\x3dvegaUtil.toSet(vegaUtil.accessorFields(f));return f.$x||f.$y||f.$value||f.$max}function toCanvas(grid,obj,color,opacity){const n\x3dgrid.width;var m\x3dgrid.height;const x1\x3dgrid.x1||0,y1\x3dgrid.y1||0,x2\x3dgrid.x2||n;m\x3dgrid.y2||m;const val\x3dgrid.values;grid\x3dval?i\x3d\x3eval[i]:vegaUtil.zero;const can\x3dvegaCanvas.canvas(x2-x1,m-y1),ctx\x3dcan.getContext(\x222d\x22),\nimg\x3dctx.getImageData(0,0,x2-x1,m-y1),pix\x3dimg.data;for(let j\x3dy1,k\x3d0;j\x3cm;++j){obj.$y\x3dj-y1;for(let i\x3dx1,r\x3dj*n;i\x3cx2;++i,k+\x3d4){obj.$x\x3di-x1;obj.$value\x3dgrid(i+r);const v\x3dcolor(obj);pix[k+0]\x3dv.r;pix[k+1]\x3dv.g;pix[k+2]\x3dv.b;pix[k+3]\x3d~~(255*opacity(obj))}}ctx.putImageData(img,0,0);return can}function Projection(params){vegaDataflow.Transform.call(this,null,params);this.modified(!0)}function fit(proj,_){const data\x3dcollectGeoJSON(_.fit);_.extent?proj.fitExtent(_.extent,data):_.size?proj.fitSize(_.size,data):0}\nfunction create(type){const constructor\x3dvegaProjection.projection((type||\x22mercator\x22).toLowerCase());constructor||vegaUtil.error(\x22Unrecognized projection type: \x22+type);return constructor()}function collectGeoJSON(data){data\x3dvegaUtil.array(data);return 1\x3d\x3d\x3ddata.length?data[0]:{type:\x22FeatureCollection\x22,features:data.reduce((a,f)\x3d\x3ea.concat(featurize(f)),[])}}function featurize(f){return\x22FeatureCollection\x22\x3d\x3d\x3df.type?f.features:vegaUtil.array(f).filter(d\x3d\x3enull!\x3dd).map(d\x3d\x3e\x22Feature\x22\x3d\x3d\x3dd.type?d:{type:\x22Feature\x22,\ngeometry:d})}const cases\x3d[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];Isocontour.Definition\x3d{type:\x22Isocontour\x22,metadata:{generates:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22thresholds\x22,type:\x22number\x22,array:!0},{name:\x22levels\x22,type:\x22number\x22},\n{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\x22default\x22:\x22independent\x22},{name:\x22zero\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!0},{name:\x22scale\x22,type:\x22number\x22,expr:!0},{name:\x22translate\x22,type:\x22number\x22,array:!0,expr:!0},{name:\x22as\x22,type:\x22string\x22,\x22null\x22:!0,\x22default\x22:\x22contour\x22}]};vegaUtil.inherits(Isocontour,vegaDataflow.Transform,{transform(_,pulse){if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;\nvar out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);pulse\x3dpulse.materialize(pulse.SOURCE).source;var field\x3d_.field||vegaUtil.identity,contour\x3dcontours$jscomp$0().smooth(!1!\x3d\x3d_.smooth),tz\x3d_.thresholds||levels(pulse,field,_),as\x3dnull\x3d\x3d\x3d_.as?null:_.as||\x22contour\x22,values\x3d[];pulse.forEach(t\x3d\x3e{const grid\x3dfield(t),paths\x3dcontour.size([grid.width,grid.height])(grid.values,vegaUtil.isArray(tz)?tz:tz(grid.values));transformPaths(paths,grid,t,_);paths.forEach(p\x3d\x3e{values.push(vegaDataflow.rederive(t,vegaDataflow.ingest(null!\x3d\nas?{[as]:p}:p)))})});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3dvalues;return out}});KDE2D.Definition\x3d{type:\x22KDE2D\x22,metadata:{generates:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22weight\x22,type:\x22field\x22},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22cellSize\x22,type:\x22number\x22},{name:\x22bandwidth\x22,type:\x22number\x22,array:!0,length:2},{name:\x22counts\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,\ntype:\x22string\x22,\x22default\x22:\x22grid\x22}]};const PARAMS\x3d\x22x y weight size cellSize bandwidth\x22.split(\x22 \x22);vegaUtil.inherits(KDE2D,vegaDataflow.Transform,{transform(_,pulse){function set(t,vals){for(let i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dvals[i];return t}if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);pulse\x3dpulse.materialize(pulse.SOURCE).source;pulse\x3dpartition(pulse,_.groupby);var names\x3d(_.groupby||[]).map(vegaUtil.accessorName),\nkde\x3dparams$jscomp$0(density2D(),_),as\x3d_.as||\x22grid\x22,values\x3d[];values\x3dpulse.map(g\x3d\x3evegaDataflow.ingest(set({[as]:kde(g,_.counts)},g.dims)));this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3dvalues;return out}});Contour.Definition\x3d{type:\x22Contour\x22,metadata:{generates:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22values\x22,type:\x22number\x22,array:!0},{name:\x22x\x22,type:\x22field\x22},{name:\x22y\x22,type:\x22field\x22},{name:\x22weight\x22,type:\x22field\x22},{name:\x22cellSize\x22,type:\x22number\x22},{name:\x22bandwidth\x22,\ntype:\x22number\x22},{name:\x22count\x22,type:\x22number\x22},{name:\x22nice\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22thresholds\x22,type:\x22number\x22,array:!0},{name:\x22smooth\x22,type:\x22boolean\x22,\x22default\x22:!0}]};vegaUtil.inherits(Contour,vegaDataflow.Transform,{transform(_,pulse){if(this.value\x26\x26!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS),contour\x3dcontours$jscomp$0().smooth(!1!\x3d\x3d_.smooth),values\x3d_.values,thresh\x3d_.thresholds||quantize(_.count||10,_.nice,!!values),size\x3d\n_.size;if(!values){values\x3dpulse.materialize(pulse.SOURCE).source;_\x3dparams$jscomp$0(density2D(),_)(values,!0);var post\x3dtransform(_,_.scale||1,_.scale||1,0,0);size\x3d[_.width,_.height];values\x3d_.values}thresh\x3dvegaUtil.isArray(thresh)?thresh:thresh(values);values\x3dcontour.size(size)(values,thresh);post\x26\x26values.forEach(post);this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.source\x3dout.add\x3d(values||[]).map(vegaDataflow.ingest);return out}});GeoJSON.Definition\x3d{type:\x22GeoJSON\x22,metadata:{},params:[{name:\x22fields\x22,\ntype:\x22field\x22,array:!0,length:2},{name:\x22geojson\x22,type:\x22field\x22}]};vegaUtil.inherits(GeoJSON,vegaDataflow.Transform,{transform(_,pulse){var features\x3dthis._features,points\x3dthis._points,fields\x3d_.fields,lon\x3dfields\x26\x26fields[0],lat\x3dfields\x26\x26fields[1],geojson\x3d_.geojson||!fields\x26\x26vegaUtil.identity;fields\x3dpulse.ADD;_\x3d_.modified()||pulse.changed(pulse.REM)||pulse.modified(vegaUtil.accessorFields(geojson))||lon\x26\x26pulse.modified(vegaUtil.accessorFields(lon))||lat\x26\x26pulse.modified(vegaUtil.accessorFields(lat));if(!this.value||\n_)fields\x3dpulse.SOURCE,this._features\x3dfeatures\x3d[],this._points\x3dpoints\x3d[];geojson\x26\x26pulse.visit(fields,t\x3d\x3efeatures.push(geojson(t)));lon\x26\x26lat\x26\x26(pulse.visit(fields,t\x3d\x3e{var x\x3dlon(t);t\x3dlat(t);null!\x3dx\x26\x26null!\x3dt\x26\x26(x\x3d+x)\x3d\x3d\x3dx\x26\x26(t\x3d+t)\x3d\x3d\x3dt\x26\x26points.push([x,t])}),features\x3dfeatures.concat({type:\x22Feature\x22,geometry:{type:\x22MultiPoint\x22,coordinates:points}}));this.value\x3d{type:\x22FeatureCollection\x22,features}}});GeoPath.Definition\x3d{type:\x22GeoPath\x22,metadata:{modifies:!0},params:[{name:\x22projection\x22,type:\x22projection\x22},{name:\x22field\x22,\ntype:\x22field\x22},{name:\x22pointRadius\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};vegaUtil.inherits(GeoPath,vegaDataflow.Transform,{transform(_,pulse){var out\x3dpulse.fork(pulse.ALL),path\x3dthis.value,field\x3d_.field||vegaUtil.identity,as\x3d_.as||\x22path\x22,flag\x3dout.SOURCE;!path||_.modified()?(this.value\x3dpath\x3dvegaProjection.getProjectionPath(_.projection),out.materialize().reflow()):flag\x3dfield\x3d\x3d\x3dvegaUtil.identity||pulse.modified(field.fields)?out.ADD_MOD:out.ADD;_\x3dinitPath(path,_.pointRadius);\nout.visit(flag,t\x3d\x3et[as]\x3dpath(field(t)));path.pointRadius(_);return out.modifies(as)}});GeoPoint.Definition\x3d{type:\x22GeoPoint\x22,metadata:{modifies:!0},params:[{name:\x22projection\x22,type:\x22projection\x22,required:!0},{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:2,\x22default\x22:[\x22x\x22,\x22y\x22]}]};vegaUtil.inherits(GeoPoint,vegaDataflow.Transform,{transform(_,pulse){function set(t){const xy\x3dproj([lon(t),lat(t)]);xy?(t[x]\x3dxy[0],t[y]\x3dxy[1]):(t[x]\x3dvoid 0,t[y]\x3dvoid 0)}var proj\x3d\n_.projection,lon\x3d_.fields[0],lat\x3d_.fields[1],as\x3d_.as||[\x22x\x22,\x22y\x22],x\x3das[0],y\x3das[1];_.modified()?pulse\x3dpulse.materialize().reflow(!0).visit(pulse.SOURCE,set):(_\x3dpulse.modified(lon.fields)||pulse.modified(lat.fields),pulse.visit(_?pulse.ADD_MOD:pulse.ADD,set));return pulse.modifies(as)}});GeoShape.Definition\x3d{type:\x22GeoShape\x22,metadata:{modifies:!0,nomod:!0},params:[{name:\x22projection\x22,type:\x22projection\x22},{name:\x22field\x22,type:\x22field\x22,\x22default\x22:\x22datum\x22},{name:\x22pointRadius\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,\n\x22default\x22:\x22shape\x22}]};vegaUtil.inherits(GeoShape,vegaDataflow.Transform,{transform(_,pulse){pulse\x3dpulse.fork(pulse.ALL);var shape\x3dthis.value,as\x3d_.as||\x22shape\x22,flag\x3dpulse.ADD;if(!shape||_.modified())this.value\x3dshape\x3dshapeGenerator(vegaProjection.getProjectionPath(_.projection),_.field||vegaUtil.field(\x22datum\x22),_.pointRadius),pulse.materialize().reflow(),flag\x3dpulse.SOURCE;pulse.visit(flag,t\x3d\x3et[as]\x3dshape);return pulse.modifies(as)}});Graticule.Definition\x3d{type:\x22Graticule\x22,metadata:{changes:!0,generates:!0},\nparams:[{name:\x22extent\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,array:!0,length:2}},{name:\x22extentMajor\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,array:!0,length:2}},{name:\x22extentMinor\x22,type:\x22array\x22,array:!0,length:2,content:{type:\x22number\x22,array:!0,length:2}},{name:\x22step\x22,type:\x22number\x22,array:!0,length:2},{name:\x22stepMajor\x22,type:\x22number\x22,array:!0,length:2,\x22default\x22:[90,360]},{name:\x22stepMinor\x22,type:\x22number\x22,array:!0,length:2,\x22default\x22:[10,10]},{name:\x22precision\x22,type:\x22number\x22,\n\x22default\x22:2.5}]};vegaUtil.inherits(Graticule,vegaDataflow.Transform,{transform(_,pulse){var src\x3dthis.value,gen\x3dthis.generator;if(!src.length||_.modified())for(const prop in _)if(vegaUtil.isFunction(gen[prop]))gen[prop](_[prop]);_\x3dgen();src.length?pulse.mod.push(vegaDataflow.replace(src[0],_)):pulse.add.push(vegaDataflow.ingest(_));src[0]\x3d_;return pulse}});Heatmap.Definition\x3d{type:\x22heatmap\x22,metadata:{modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22color\x22,type:\x22string\x22,expr:!0},{name:\x22opacity\x22,\ntype:\x22number\x22,expr:!0},{name:\x22resolve\x22,type:\x22enum\x22,values:[\x22shared\x22,\x22independent\x22],\x22default\x22:\x22independent\x22},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22image\x22}]};vegaUtil.inherits(Heatmap,vegaDataflow.Transform,{transform(_,pulse){if(!pulse.changed()\x26\x26!_.modified())return pulse.StopPropagation;var source\x3dpulse.materialize(pulse.SOURCE).source,shared\x3d\x22shared\x22\x3d\x3d\x3d_.resolve,field\x3d_.field||vegaUtil.identity,opacity\x3dopacity_(_.opacity,_),color\x3dcolor_(_.color,_),as\x3d_.as||\x22image\x22,obj\x3d{$x:0,$y:0,$value:0,$max:shared?\nd3Array.max(source.map(t\x3d\x3ed3Array.max(field(t).values))):0};source.forEach(t\x3d\x3e{const v\x3dfield(t),o\x3dvegaUtil.extend({},t,obj);shared||(o.$max\x3dd3Array.max(v.values||[]));t[as]\x3dtoCanvas(v,o,color.dep?color:vegaUtil.constant(color(o)),opacity.dep?opacity:vegaUtil.constant(opacity(o)))});return pulse.reflow(!0).modifies(as)}});vegaUtil.inherits(Projection,vegaDataflow.Transform,{transform(_,pulse){let proj$jscomp$0\x3dthis.value;!proj$jscomp$0||_.modified(\x22type\x22)?(this.value\x3dproj$jscomp$0\x3dcreate(_.type),vegaProjection.projectionProperties.forEach(prop\x3d\x3e\n{if(null!\x3d_[prop]){var proj\x3dproj$jscomp$0,value\x3d_[prop];if(vegaUtil.isFunction(proj[prop]))proj[prop](value)}})):vegaProjection.projectionProperties.forEach(prop\x3d\x3e{if(_.modified(prop)){var proj\x3dproj$jscomp$0,value\x3d_[prop];if(vegaUtil.isFunction(proj[prop]))proj[prop](value)}});null!\x3d_.pointRadius\x26\x26proj$jscomp$0.path.pointRadius(_.pointRadius);_.fit\x26\x26fit(proj$jscomp$0,_);return pulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS)}});exports.contour\x3dContour;exports.geojson\x3dGeoJSON;exports.geopath\x3dGeoPath;exports.geopoint\x3d\nGeoPoint;exports.geoshape\x3dGeoShape;exports.graticule\x3dGraticule;exports.heatmap\x3dHeatmap;exports.isocontour\x3dIsocontour;exports.kde2d\x3dKDE2D;exports.projection\x3dProjection;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_quadtree$dist$d3_quadtree.js", true , "shadow$provide.module$node_modules$d3_quadtree$dist$d3_quadtree\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,node\x3dtree._root;d\x3d{data:d};var x0\x3dtree._x0,y0\x3d\ntree._y0,x1\x3dtree._x1,y1\x3dtree._y1,xm,ym,right,bottom;if(!node)return tree._root\x3dd,tree;for(;node.length;)if((right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3dxm,(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym,parent\x3dnode,!(node\x3dnode[right|\x3dbottom\x3c\x3c1]))return parent[right]\x3dd,tree;var xp\x3d+tree._x.call(null,node.data);var yp\x3d+tree._y.call(null,node.data);if(x\x3d\x3d\x3dxp\x26\x26y\x3d\x3d\x3dyp)return d.next\x3dnode,parent?parent[right]\x3dd:tree._root\x3dd,tree;do parent\x3dparent?parent[right]\x3dArray(4):tree._root\x3dArray(4),(right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3d\nxm,(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym;while((right|\x3dbottom\x3c\x3c1)\x3d\x3d\x3d(bottom\x3d(yp\x3e\x3dym)\x3c\x3c1|xp\x3e\x3dxm));return parent[bottom]\x3dnode,parent[right]\x3dd,tree}function Quad(node,x0,y0,x1,y1){this.node\x3dnode;this.x0\x3dx0;this.y0\x3dy0;this.x1\x3dx1;this.y1\x3dy1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function quadtree(nodes,x,y){x\x3dnew Quadtree(null\x3d\x3dx?defaultX:x,null\x3d\x3dy?defaultY:y,NaN,NaN,NaN,NaN);return null\x3d\x3dnodes?x:x.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x\x3dx;this._y\x3dy;this._x0\x3d\nx0;this._y0\x3dy0;this._x1\x3dx1;this._y1\x3dy1;this._root\x3dvoid 0}function leaf_copy(leaf){for(var copy\x3d{data:leaf.data},next\x3dcopy;leaf\x3dleaf.next;)next\x3dnext.next\x3d{data:leaf.data};return copy}var treeProto\x3dquadtree.prototype\x3dQuadtree.prototype;treeProto.copy\x3dfunction(){var copy\x3dnew Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node\x3dthis._root,nodes,child;if(!node)return copy;if(!node.length)return copy._root\x3dleaf_copy(node),copy;for(nodes\x3d[{source:node,target:copy._root\x3dArray(4)}];node\x3dnodes.pop();)for(var i\x3d\n0;4\x3ei;++i)if(child\x3dnode.source[i])child.length?nodes.push({source:child,target:node.target[i]\x3dArray(4)}):node.target[i]\x3dleaf_copy(child);return copy};treeProto.add\x3dfunction(d){const x\x3d+this._x.call(null,d),y\x3d+this._y.call(null,d);return add(this.cover(x,y),x,y,d)};treeProto.addAll\x3dfunction(data){var d,i,n\x3ddata.length,x,y,xz\x3dArray(n),yz\x3dArray(n),x0\x3dInfinity,y0\x3dInfinity,x1\x3d-Infinity,y1\x3d-Infinity;for(i\x3d0;i\x3cn;++i)isNaN(x\x3d+this._x.call(null,d\x3ddata[i]))||isNaN(y\x3d+this._y.call(null,d))||(xz[i]\x3dx,yz[i]\x3dy,\nx\x3cx0\x26\x26(x0\x3dx),x\x3ex1\x26\x26(x1\x3dx),y\x3cy0\x26\x26(y0\x3dy),y\x3ey1\x26\x26(y1\x3dy));if(x0\x3ex1||y0\x3ey1)return this;this.cover(x0,y0).cover(x1,y1);for(i\x3d0;i\x3cn;++i)add(this,xz[i],yz[i],data[i]);return this};treeProto.cover\x3dfunction(x,y){if(isNaN(x\x3d+x)||isNaN(y\x3d+y))return this;var x0\x3dthis._x0,y0\x3dthis._y0,x1\x3dthis._x1,y1\x3dthis._y1;if(isNaN(x0))x1\x3d(x0\x3dMath.floor(x))+1,y1\x3d(y0\x3dMath.floor(y))+1;else{for(var z\x3dx1-x0||1,node\x3dthis._root,parent,i;x0\x3ex||x\x3e\x3dx1||y0\x3ey||y\x3e\x3dy1;)switch(i\x3d(y\x3cy0)\x3c\x3c1|x\x3cx0,parent\x3dArray(4),parent[i]\x3dnode,node\x3dparent,z*\x3d2,\ni){case 0:x1\x3dx0+z;y1\x3dy0+z;break;case 1:x0\x3dx1-z;y1\x3dy0+z;break;case 2:x1\x3dx0+z;y0\x3dy1-z;break;case 3:x0\x3dx1-z,y0\x3dy1-z}this._root\x26\x26this._root.length\x26\x26(this._root\x3dnode)}this._x0\x3dx0;this._y0\x3dy0;this._x1\x3dx1;this._y1\x3dy1;return this};treeProto.data\x3dfunction(){var data\x3d[];this.visit(function(node){if(!node.length){do data.push(node.data);while(node\x3dnode.next)}});return data};treeProto.extent\x3dfunction(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,\nthis._y0],[this._x1,this._y1]]};treeProto.find\x3dfunction(x,y,radius){var x0\x3dthis._x0,y0\x3dthis._y0,x1,y1,x2,y2,x3\x3dthis._x1,y3\x3dthis._y1,quads\x3d[],node\x3dthis._root,q;node\x26\x26quads.push(new Quad(node,x0,y0,x3,y3));null\x3d\x3dradius?radius\x3dInfinity:(x0\x3dx-radius,y0\x3dy-radius,x3\x3dx+radius,y3\x3dy+radius,radius*\x3dradius);for(;q\x3dquads.pop();)if(!(!(node\x3dq.node)||(x1\x3dq.x0)\x3ex3||(y1\x3dq.y0)\x3ey3||(x2\x3dq.x1)\x3cx0||(y2\x3dq.y1)\x3cy0))if(node.length){q\x3d(x1+x2)/2;var ym\x3d(y1+y2)/2;quads.push(new Quad(node[3],q,ym,x2,y2),new Quad(node[2],x1,ym,\nq,y2),new Quad(node[1],q,y1,x2,ym),new Quad(node[0],x1,y1,q,ym));if(node\x3d(y\x3e\x3dym)\x3c\x3c1|x\x3e\x3dq)q\x3dquads[quads.length-1],quads[quads.length-1]\x3dquads[quads.length-1-node],quads[quads.length-1-node]\x3dq}else if(q\x3dx-+this._x.call(null,node.data),ym\x3dy-+this._y.call(null,node.data),q\x3dq*q+ym*ym,q\x3cradius){var data\x3dMath.sqrt(radius\x3dq);x0\x3dx-data;y0\x3dy-data;x3\x3dx+data;y3\x3dy+data;data\x3dnode.data}return data};treeProto.remove\x3dfunction(d){if(isNaN(x\x3d+this._x.call(null,d))||isNaN(y\x3d+this._y.call(null,d)))return this;var parent,\nnode\x3dthis._root,previous,x0\x3dthis._x0,y0\x3dthis._y0,x1\x3dthis._x1,y1\x3dthis._y1,x,y,xm,ym,right,bottom;if(!node)return this;if(node.length)for(;;){(right\x3dx\x3e\x3d(xm\x3d(x0+x1)/2))?x0\x3dxm:x1\x3dxm;(bottom\x3dy\x3e\x3d(ym\x3d(y0+y1)/2))?y0\x3dym:y1\x3dym;if(!(parent\x3dnode,node\x3dnode[right|\x3dbottom\x3c\x3c1]))return this;if(!node.length)break;if(parent[right+1\x263]||parent[right+2\x263]||parent[right+3\x263]){var retainer\x3dparent;var j\x3dright}}for(;node.data!\x3d\x3dd;)if(!(previous\x3dnode,node\x3dnode.next))return this;(d\x3dnode.next)\x26\x26delete node.next;if(previous)return d?\nprevious.next\x3dd:delete previous.next,this;if(!parent)return this._root\x3dd,this;d?parent[right]\x3dd:delete parent[right];(node\x3dparent[0]||parent[1]||parent[2]||parent[3])\x26\x26node\x3d\x3d\x3d(parent[3]||parent[2]||parent[1]||parent[0])\x26\x26!node.length\x26\x26(retainer?retainer[j]\x3dnode:this._root\x3dnode);return this};treeProto.removeAll\x3dfunction(data){for(var i\x3d0,n\x3ddata.length;i\x3cn;++i)this.remove(data[i]);return this};treeProto.root\x3dfunction(){return this._root};treeProto.size\x3dfunction(){var size\x3d0;this.visit(function(node){if(!node.length){do++size;\nwhile(node\x3dnode.next)}});return size};treeProto.visit\x3dfunction(callback){var quads\x3d[],q,node\x3dthis._root,child,x0,y0,x1;for(node\x26\x26quads.push(new Quad(node,this._x0,this._y0,this._x1,this._y1));q\x3dquads.pop();)if(!callback(node\x3dq.node,x0\x3dq.x0,y0\x3dq.y0,x1\x3dq.x1,q\x3dq.y1)\x26\x26node.length){var xm\x3d(x0+x1)/2,ym\x3d(y0+q)/2;(child\x3dnode[3])\x26\x26quads.push(new Quad(child,xm,ym,x1,q));(child\x3dnode[2])\x26\x26quads.push(new Quad(child,x0,ym,xm,q));(child\x3dnode[1])\x26\x26quads.push(new Quad(child,xm,y0,x1,ym));(child\x3dnode[0])\x26\x26quads.push(new Quad(child,\nx0,y0,xm,ym))}return this};treeProto.visitAfter\x3dfunction(callback){var quads\x3d[],next\x3d[],q;for(this._root\x26\x26quads.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));q\x3dquads.pop();){var node\x3dq.node;if(node.length){var child,x0\x3dq.x0,y0\x3dq.y0,x1\x3dq.x1,y1\x3dq.y1,xm\x3d(x0+x1)/2,ym\x3d(y0+y1)/2;(child\x3dnode[0])\x26\x26quads.push(new Quad(child,x0,y0,xm,ym));(child\x3dnode[1])\x26\x26quads.push(new Quad(child,xm,y0,x1,ym));(child\x3dnode[2])\x26\x26quads.push(new Quad(child,x0,ym,xm,y1));(child\x3dnode[3])\x26\x26quads.push(new Quad(child,\nxm,ym,x1,y1))}next.push(q)}for(;q\x3dnext.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this};treeProto.x\x3dfunction(_){return arguments.length?(this._x\x3d_,this):this._x};treeProto.y\x3dfunction(_){return arguments.length?(this._y\x3d_,this):this._y};exports.quadtree\x3dquadtree;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_dispatch$dist$d3_dispatch.js", true , "shadow$provide.module$node_modules$d3_dispatch$dist$d3_dispatch\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function dispatch(){for(var i\x3d0,n\x3darguments.length,_\x3d{},t;i\x3cn;++i){if(!(t\x3darguments[i]+\x22\x22)||t in _||/[\\s.]/.test(t))throw Error(\x22illegal type: \x22+\nt);_[t]\x3d[]}return new Dispatch(_)}function Dispatch(_){this._\x3d_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\\s+/).map(function(t){var name\x3d\x22\x22,i\x3dt.indexOf(\x22.\x22);0\x3c\x3di\x26\x26(name\x3dt.slice(i+1),t\x3dt.slice(0,i));if(t\x26\x26!types.hasOwnProperty(t))throw Error(\x22unknown type: \x22+t);return{type:t,name}})}function set(type,name,callback){for(var i\x3d0,n\x3dtype.length;i\x3cn;++i)if(type[i].name\x3d\x3d\x3dname){type[i]\x3dnoop;type\x3dtype.slice(0,i).concat(type.slice(i+1));break}null!\x3dcallback\x26\x26type.push({name,\nvalue:callback});return type}var noop\x3d{value:()\x3d\x3e{}};Dispatch.prototype\x3ddispatch.prototype\x3d{constructor:Dispatch,on:function(typename,callback){var _\x3dthis._,T\x3dparseTypenames(typename+\x22\x22,_),t,i\x3d-1,n\x3dT.length;if(2\x3earguments.length)for(;++i\x3cn;){var JSCompiler_temp;if(JSCompiler_temp\x3dt\x3d(typename\x3dT[i]).type){a:{JSCompiler_temp\x3d_[t];for(var i$jscomp$0\x3d0,n$jscomp$0\x3dJSCompiler_temp.length;i$jscomp$0\x3cn$jscomp$0;++i$jscomp$0)if((t\x3dJSCompiler_temp[i$jscomp$0]).name\x3d\x3d\x3dtypename.name){t\x3dt.value;break a}t\x3dvoid 0}JSCompiler_temp\x3d\nt}if(JSCompiler_temp)return t}else{if(null!\x3dcallback\x26\x26\x22function\x22!\x3d\x3dtypeof callback)throw Error(\x22invalid callback: \x22+callback);for(;++i\x3cn;)if(t\x3d(typename\x3dT[i]).type)_[t]\x3dset(_[t],typename.name,callback);else if(null\x3d\x3dcallback)for(t in _)_[t]\x3dset(_[t],typename.name,null);return this}},copy:function(){var copy\x3d{},_\x3dthis._,t;for(t in _)copy[t]\x3d_[t].slice();return new Dispatch(copy)},call:function(type,that){if(0\x3c(n\x3darguments.length-2))for(var args\x3dArray(n),i\x3d0,n,t;i\x3cn;++i)args[i]\x3darguments[i+2];if(!this._.hasOwnProperty(type))throw Error(\x22unknown type: \x22+\ntype);t\x3dthis._[type];i\x3d0;for(n\x3dt.length;i\x3cn;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw Error(\x22unknown type: \x22+type);type\x3dthis._[type];for(var i\x3d0,n\x3dtype.length;i\x3cn;++i)type[i].value.apply(that,args)}};exports.dispatch\x3ddispatch;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_timer$dist$d3_timer.js", true , "shadow$provide.module$node_modules$d3_timer$dist$d3_timer\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function now$jscomp$0(){return clockNow||(setFrame(clearNow),clockNow\x3dclock.now()+clockSkew)}function clearNow(){clockNow\x3d\n0}function Timer(){this._call\x3dthis._time\x3dthis._next\x3dnull}function timer(callback,delay,time){var t\x3dnew Timer;t.restart(callback,delay,time);return t}function timerFlush(){now$jscomp$0();++frame;for(var t\x3dtaskHead,e;t;)0\x3c\x3d(e\x3dclockNow-t._time)\x26\x26t._call.call(null,e),t\x3dt._next;--frame}function wake(){clockNow\x3d(clockLast\x3dclock.now())+clockSkew;frame\x3dtimeout\x3d0;try{timerFlush()}finally{frame\x3d0;for(var t0,t1\x3dtaskHead,t2,time\x3dInfinity;t1;)t1._call?(time\x3et1._time\x26\x26(time\x3dt1._time),t0\x3dt1,t1\x3dt1._next):(t2\x3dt1._next,\nt1._next\x3dnull,t1\x3dt0?t0._next\x3dt2:taskHead\x3dt2);taskTail\x3dt0;sleep(time);clockNow\x3d0}}function poke(){var now\x3dclock.now(),delay\x3dnow-clockLast;1E3\x3cdelay\x26\x26(clockSkew-\x3ddelay,clockLast\x3dnow)}function sleep(time){frame||(timeout\x26\x26(timeout\x3dclearTimeout(timeout)),24\x3ctime-clockNow?(Infinity\x3etime\x26\x26(timeout\x3dsetTimeout(wake,time-clock.now()-clockSkew)),interval\x26\x26(interval\x3dclearInterval(interval))):(interval||(clockLast\x3dclock.now(),interval\x3dsetInterval(poke,1E3)),frame\x3d1,setFrame(wake)))}var frame\x3d0,timeout\x3d0,interval\x3d\n0,taskHead,taskTail,clockLast\x3d0,clockNow\x3d0,clockSkew\x3d0,clock\x3d\x22object\x22\x3d\x3d\x3dtypeof performance\x26\x26performance.now?performance:Date,setFrame\x3d\x22object\x22\x3d\x3d\x3dtypeof window\x26\x26window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};Timer.prototype\x3dtimer.prototype\x3d{constructor:Timer,restart:function(callback,delay,time){if(\x22function\x22!\x3d\x3dtypeof callback)throw new TypeError(\x22callback is not a function\x22);time\x3d(null\x3d\x3dtime?now$jscomp$0():+time)+(null\x3d\x3ddelay?0:+delay);this._next||\ntaskTail\x3d\x3d\x3dthis||(taskTail?taskTail._next\x3dthis:taskHead\x3dthis,taskTail\x3dthis);this._call\x3dcallback;this._time\x3dtime;sleep()},stop:function(){this._call\x26\x26(this._call\x3dnull,this._time\x3dInfinity,sleep())}};exports.interval\x3dfunction(callback$jscomp$0,delay$jscomp$0,time$jscomp$0){var t\x3dnew Timer,total\x3ddelay$jscomp$0;if(null\x3d\x3ddelay$jscomp$0)return t.restart(callback$jscomp$0,delay$jscomp$0,time$jscomp$0),t;t._restart\x3dt.restart;t.restart\x3dfunction(callback,delay,time){delay\x3d+delay;time\x3dnull\x3d\x3dtime?now$jscomp$0():\n+time;t._restart(function tick(elapsed){elapsed+\x3dtotal;t._restart(tick,total+\x3ddelay,time);callback(elapsed)},delay,time)};t.restart(callback$jscomp$0,delay$jscomp$0,time$jscomp$0);return t};exports.now\x3dnow$jscomp$0;exports.timeout\x3dfunction(callback,delay,time){var t\x3dnew Timer;delay\x3dnull\x3d\x3ddelay?0:+delay;t.restart(elapsed\x3d\x3e{t.stop();callback(elapsed+delay)},delay,time);return t};exports.timer\x3dtimer;exports.timerFlush\x3dtimerFlush;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_force$dist$d3_force.js", true , "shadow$provide.module$node_modules$d3_force$dist$d3_force\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_quadtree$dist$d3_quadtree\x22),require(\x22module$node_modules$d3_dispatch$dist$d3_dispatch\x22),require(\x22module$node_modules$d3_timer$dist$d3_timer\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-quadtree\x22,\x22d3-dispatch\x22,\x22d3-timer\x22],\nfactory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{},global.d3,global.d3,global.d3))})(this,function(exports,d3Quadtree,d3Dispatch,d3Timer){function constant(x){return function(){return x}}function x$jscomp$0(d){return d.x+d.vx}function y$jscomp$0(d){return d.y+d.vy}function index(d){return d.index}function find(nodeById,nodeId){nodeById\x3dnodeById.get(nodeId);if(!nodeById)throw Error(\x22node not found: \x22+nodeId);return nodeById}function lcg(){let s\x3d1;return()\x3d\x3e(s\x3d(1664525*s+1013904223)%4294967296)/\n4294967296}function x$1(d){return d.x}function y$1(d){return d.y}var initialAngle\x3dMath.PI*(3-Math.sqrt(5));exports.forceCenter\x3dfunction(x,y){function force(){var i,n\x3dnodes.length,sx\x3d0,sy\x3d0;for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];sx+\x3dnode.x;sy+\x3dnode.y}sx\x3d(sx/n-x)*strength;sy\x3d(sy/n-y)*strength;for(i\x3d0;i\x3cn;++i)node\x3dnodes[i],node.x-\x3dsx,node.y-\x3dsy}var nodes,strength\x3d1;null\x3d\x3dx\x26\x26(x\x3d0);null\x3d\x3dy\x26\x26(y\x3d0);force.initialize\x3dfunction(_){nodes\x3d_};force.x\x3dfunction(_){return arguments.length?(x\x3d+_,force):x};force.y\x3dfunction(_){return arguments.length?\n(y\x3d+_,force):y};force.strength\x3dfunction(_){return arguments.length?(strength\x3d+_,force):strength};return force};exports.forceCollide\x3dfunction(radius){function force(){function apply(quad,x0,y0,x1,y1){var data\x3dquad.data;quad\x3dquad.r;var r\x3dri+quad;if(data)data.index\x3enode.index\x26\x26(x0\x3dxi-data.x-data.vx,y0\x3dyi-data.y-data.vy,x1\x3dx0*x0+y0*y0,x1\x3cr*r\x26\x26(0\x3d\x3d\x3dx0\x26\x26(x0\x3d1E-6*(random()-.5),x1+\x3dx0*x0),0\x3d\x3d\x3dy0\x26\x26(y0\x3d1E-6*(random()-.5),x1+\x3dy0*y0),x1\x3d(r-(x1\x3dMath.sqrt(x1)))/x1*strength,node.vx+\x3d(x0*\x3dx1)*(r\x3d(quad*\x3dquad)/(ri2+\nquad)),node.vy+\x3d(y0*\x3dx1)*r,data.vx-\x3dx0*(r\x3d1-r),data.vy-\x3dy0*r));else return x0\x3exi+r||x1\x3cxi-r||y0\x3eyi+r||y1\x3cyi-r}for(var i,n\x3dnodes.length,tree,node,xi,yi,ri,ri2,k\x3d0;k\x3citerations;++k)for(tree\x3dd3Quadtree.quadtree(nodes,x$jscomp$0,y$jscomp$0).visitAfter(prepare),i\x3d0;i\x3cn;++i)node\x3dnodes[i],ri\x3dradii[node.index],ri2\x3dri*ri,xi\x3dnode.x+node.vx,yi\x3dnode.y+node.vy,tree.visit(apply)}function prepare(quad){if(quad.data)return quad.r\x3dradii[quad.data.index];for(var i\x3dquad.r\x3d0;4\x3ei;++i)quad[i]\x26\x26quad[i].r\x3equad.r\x26\x26(quad.r\x3d\nquad[i].r)}function initialize(){if(nodes){var i,n\x3dnodes.length;radii\x3dArray(n);for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];radii[node.index]\x3d+radius(node,i,nodes)}}}var nodes,radii,random,strength\x3d1,iterations\x3d1;\x22function\x22!\x3d\x3dtypeof radius\x26\x26(radius\x3dconstant(null\x3d\x3dradius?1:+radius));force.initialize\x3dfunction(_nodes,_random){nodes\x3d_nodes;random\x3d_random;initialize()};force.iterations\x3dfunction(_){return arguments.length?(iterations\x3d+_,force):iterations};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\n+_,force):strength};force.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):radius};return force};exports.forceLink\x3dfunction(links){function force(alpha){for(var k\x3d0,n\x3dlinks.length;k\x3citerations;++k)for(var i\x3d0,link,source,x,y,l;i\x3cn;++i)link\x3dlinks[i],source\x3dlink.source,link\x3dlink.target,x\x3dlink.x+link.vx-source.x-source.vx||1E-6*(random()-.5),y\x3dlink.y+link.vy-source.y-source.vy||1E-6*(random()-.5),l\x3dMath.sqrt(x*x+y*y),l\x3d(l-distances[i])/l*alpha*\nstrengths[i],x*\x3dl,y*\x3dl,link.vx-\x3dx*(l\x3dbias[i]),link.vy-\x3dy*l,source.vx+\x3dx*(l\x3d1-l),source.vy+\x3dy*l}function initialize(){if(nodes){var n\x3dnodes.length,m\x3dlinks.length,nodeById\x3dnew Map(nodes.map((d,i)\x3d\x3e[id(d,i,nodes),d]));var i$jscomp$0\x3d0;for(count\x3dArray(n);i$jscomp$0\x3cm;++i$jscomp$0)n\x3dlinks[i$jscomp$0],n.index\x3di$jscomp$0,\x22object\x22!\x3d\x3dtypeof n.source\x26\x26(n.source\x3dfind(nodeById,n.source)),\x22object\x22!\x3d\x3dtypeof n.target\x26\x26(n.target\x3dfind(nodeById,n.target)),count[n.source.index]\x3d(count[n.source.index]||0)+1,count[n.target.index]\x3d\n(count[n.target.index]||0)+1;i$jscomp$0\x3d0;for(bias\x3dArray(m);i$jscomp$0\x3cm;++i$jscomp$0)n\x3dlinks[i$jscomp$0],bias[i$jscomp$0]\x3dcount[n.source.index]/(count[n.source.index]+count[n.target.index]);strengths\x3dArray(m);initializeStrength();distances\x3dArray(m);initializeDistance()}}function initializeStrength(){if(nodes)for(var i\x3d0,n\x3dlinks.length;i\x3cn;++i)strengths[i]\x3d+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i\x3d0,n\x3dlinks.length;i\x3cn;++i)distances[i]\x3d+distance(links[i],i,links)}\nvar id\x3dindex,strength\x3dfunction(link){return 1/Math.min(count[link.source.index],count[link.target.index])},strengths,distance\x3dconstant(30),distances,nodes,count,bias,random,iterations\x3d1;null\x3d\x3dlinks\x26\x26(links\x3d[]);force.initialize\x3dfunction(_nodes,_random){nodes\x3d_nodes;random\x3d_random;initialize()};force.links\x3dfunction(_){return arguments.length?(links\x3d_,initialize(),force):links};force.id\x3dfunction(_){return arguments.length?(id\x3d_,force):id};force.iterations\x3dfunction(_){return arguments.length?(iterations\x3d\n+_,force):iterations};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initializeStrength(),force):strength};force.distance\x3dfunction(_){return arguments.length?(distance\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initializeDistance(),force):distance};return force};exports.forceManyBody\x3dfunction(){function force(_){var n\x3dnodes.length,tree\x3dd3Quadtree.quadtree(nodes,x$1,y$1).visitAfter(accumulate);alpha\x3d_;for(_\x3d0;_\x3cn;++_)node$jscomp$0\x3dnodes[_],tree.visit(apply)}\nfunction initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];strengths[node.index]\x3d+strength$jscomp$0(node,i,nodes)}}}function accumulate(quad){var strength\x3d0,q,c,weight\x3d0,x,y,i;if(quad.length){for(x\x3dy\x3di\x3d0;4\x3ei;++i)(q\x3dquad[i])\x26\x26(c\x3dMath.abs(q.value))\x26\x26(strength+\x3dq.value,weight+\x3dc,x+\x3dc*q.x,y+\x3dc*q.y);quad.x\x3dx/weight;quad.y\x3dy/weight}else{q\x3dquad;q.x\x3dq.data.x;q.y\x3dq.data.y;do strength+\x3dstrengths[q.data.index];while(q\x3dq.next)}quad.value\x3dstrength}function apply(quad,\nx1,_,x2){if(!quad.value)return!0;_\x3dquad.x-node$jscomp$0.x;var y\x3dquad.y-node$jscomp$0.y;x1\x3dx2-x1;x2\x3d_*_+y*y;if(x1*x1/theta2\x3cx2)return x2\x3cdistanceMax2\x26\x26(0\x3d\x3d\x3d_\x26\x26(_\x3d1E-6*(random()-.5),x2+\x3d_*_),0\x3d\x3d\x3dy\x26\x26(y\x3d1E-6*(random()-.5),x2+\x3dy*y),x2\x3cdistanceMin2\x26\x26(x2\x3dMath.sqrt(distanceMin2*x2)),node$jscomp$0.vx+\x3d_*quad.value*alpha/x2,node$jscomp$0.vy+\x3dy*quad.value*alpha/x2),!0;if(!(quad.length||x2\x3e\x3ddistanceMax2)){if(quad.data!\x3d\x3dnode$jscomp$0||quad.next)0\x3d\x3d\x3d_\x26\x26(_\x3d1E-6*(random()-.5),x2+\x3d_*_),0\x3d\x3d\x3dy\x26\x26(y\x3d1E-6*(random()-.5),\nx2+\x3dy*y),x2\x3cdistanceMin2\x26\x26(x2\x3dMath.sqrt(distanceMin2*x2));do quad.data!\x3d\x3dnode$jscomp$0\x26\x26(x1\x3dstrengths[quad.data.index]*alpha/x2,node$jscomp$0.vx+\x3d_*x1,node$jscomp$0.vy+\x3dy*x1);while(quad\x3dquad.next)}}var nodes,node$jscomp$0,random,alpha,strength$jscomp$0\x3dconstant(-30),strengths,distanceMin2\x3d1,distanceMax2\x3dInfinity,theta2\x3d.81;force.initialize\x3dfunction(_nodes,_random){nodes\x3d_nodes;random\x3d_random;initialize()};force.strength\x3dfunction(_){return arguments.length?(strength$jscomp$0\x3d\x22function\x22\x3d\x3d\x3dtypeof _?\n_:constant(+_),initialize(),force):strength$jscomp$0};force.distanceMin\x3dfunction(_){return arguments.length?(distanceMin2\x3d_*_,force):Math.sqrt(distanceMin2)};force.distanceMax\x3dfunction(_){return arguments.length?(distanceMax2\x3d_*_,force):Math.sqrt(distanceMax2)};force.theta\x3dfunction(_){return arguments.length?(theta2\x3d_*_,force):Math.sqrt(theta2)};return force};exports.forceRadial\x3dfunction(radius,x,y){function force(alpha){for(var i\x3d0,n\x3dnodes.length;i\x3cn;++i){var node\x3dnodes[i],dx\x3dnode.x-x||1E-6,dy\x3dnode.y-\ny||1E-6,r\x3dMath.sqrt(dx*dx+dy*dy);r\x3d(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+\x3ddx*r;node.vy+\x3ddy*r}}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);radiuses\x3dArray(n);for(i\x3d0;i\x3cn;++i)radiuses[i]\x3d+radius(nodes[i],i,nodes),strengths[i]\x3disNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}var nodes,strength\x3dconstant(.1),strengths,radiuses;\x22function\x22!\x3d\x3dtypeof radius\x26\x26(radius\x3dconstant(+radius));null\x3d\x3dx\x26\x26(x\x3d0);null\x3d\x3dy\x26\x26(y\x3d0);force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3d\nfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.radius\x3dfunction(_){return arguments.length?(radius\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):radius};force.x\x3dfunction(_){return arguments.length?(x\x3d+_,force):x};force.y\x3dfunction(_){return arguments.length?(y\x3d+_,force):y};return force};exports.forceSimulation\x3dfunction(nodes){function step(){tick();event.call(\x22tick\x22,simulation);alpha\x3calphaMin\x26\x26(stepper.stop(),event.call(\x22end\x22,\nsimulation))}function tick(iterations){var i,n\x3dnodes.length;void 0\x3d\x3d\x3diterations\x26\x26(iterations\x3d1);for(var k\x3d0;k\x3citerations;++k)for(alpha+\x3d(alphaTarget-alpha)*alphaDecay,forces.forEach(function(force){force(alpha)}),i\x3d0;i\x3cn;++i){var node\x3dnodes[i];null\x3d\x3dnode.fx?node.x+\x3dnode.vx*\x3dvelocityDecay:(node.x\x3dnode.fx,node.vx\x3d0);null\x3d\x3dnode.fy?node.y+\x3dnode.vy*\x3dvelocityDecay:(node.y\x3dnode.fy,node.vy\x3d0)}return simulation}function initializeNodes(){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i){node\x3dnodes[i];node.index\x3di;\nnull!\x3dnode.fx\x26\x26(node.x\x3dnode.fx);null!\x3dnode.fy\x26\x26(node.y\x3dnode.fy);if(isNaN(node.x)||isNaN(node.y)){var radius\x3d10*Math.sqrt(.5+i),angle\x3di*initialAngle;node.x\x3dradius*Math.cos(angle);node.y\x3dradius*Math.sin(angle)}if(isNaN(node.vx)||isNaN(node.vy))node.vx\x3dnode.vy\x3d0}}function initializeForce(force){force.initialize\x26\x26force.initialize(nodes,random);return force}var simulation,alpha\x3d1,alphaMin\x3d.001,alphaDecay\x3d1-Math.pow(alphaMin,1/300),alphaTarget\x3d0,velocityDecay\x3d.6,forces\x3dnew Map,stepper\x3dd3Timer.timer(step),\nevent\x3dd3Dispatch.dispatch(\x22tick\x22,\x22end\x22),random\x3dlcg();null\x3d\x3dnodes\x26\x26(nodes\x3d[]);initializeNodes();return simulation\x3d{tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes\x3d_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha\x3d+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin\x3d+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?\n(alphaDecay\x3d+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget\x3d+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay\x3d1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random\x3d_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return 1\x3carguments.length?(null\x3d\x3d_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var i,\nn\x3dnodes.length;radius\x3dnull\x3d\x3dradius?Infinity:radius*radius;for(i\x3d0;i\x3cn;++i){var node\x3dnodes[i];var dx\x3dx-node.x;var dy\x3dy-node.y;dx\x3ddx*dx+dy*dy;if(dx\x3cradius){var closest\x3dnode;radius\x3ddx}}return closest},on:function(name,_){return 1\x3carguments.length?(event.on(name,_),simulation):event.on(name)}}};exports.forceX\x3dfunction(x){function force(alpha){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i)node\x3dnodes[i],node.vx+\x3d(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3d\nArray(n);xz\x3dArray(n);for(i\x3d0;i\x3cn;++i)strengths[i]\x3disNaN(xz[i]\x3d+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}var strength\x3dconstant(.1),nodes,strengths,xz;\x22function\x22!\x3d\x3dtypeof x\x26\x26(x\x3dconstant(null\x3d\x3dx?0:+x));force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3dfunction(_){return arguments.length?(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.x\x3dfunction(_){return arguments.length?(x\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):x};return force};\nexports.forceY\x3dfunction(y){function force(alpha){for(var i\x3d0,n\x3dnodes.length,node;i\x3cn;++i)node\x3dnodes[i],node.vy+\x3d(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n\x3dnodes.length;strengths\x3dArray(n);yz\x3dArray(n);for(i\x3d0;i\x3cn;++i)strengths[i]\x3disNaN(yz[i]\x3d+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}var strength\x3dconstant(.1),nodes,strengths,yz;\x22function\x22!\x3d\x3dtypeof y\x26\x26(y\x3dconstant(null\x3d\x3dy?0:+y));force.initialize\x3dfunction(_){nodes\x3d_;initialize()};force.strength\x3dfunction(_){return arguments.length?\n(strength\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):strength};force.y\x3dfunction(_){return arguments.length?(y\x3d\x22function\x22\x3d\x3d\x3dtypeof _?_:constant(+_),initialize(),force):y};return force};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_force$build$vega_force.js", true , "shadow$provide.module$node_modules$vega_force$build$vega_force\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_force$dist$d3_force\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\x22vega-util\x22,\x22d3-force\x22],\nfactory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Force){function Force(params){vegaDataflow.Transform.call(this,null,params)}function rerun(df,op){return()\x3d\x3edf.touch(op).run()}function simulation(nodes,_){nodes\x3dd3Force.forceSimulation(nodes);const stop\x3dnodes.stop,restart\x3dnodes.restart;let stopped\x3d!1;nodes.stopped\x3d()\x3d\x3estopped;nodes.restart\x3d\n()\x3d\x3e(stopped\x3d!1,restart());nodes.stop\x3d()\x3d\x3e(stopped\x3d!0,stop());return setup(nodes,_,!0).on(\x22end\x22,()\x3d\x3estopped\x3d!0)}function setup(sim,_$jscomp$0,init,pulse$jscomp$0){var f\x3dvegaUtil.array(_$jscomp$0.forces),n;var i\x3d0;for(n\x3dForceParams.length;i\x3cn;++i){var p\x3dForceParams[i];if(\x22forces\x22!\x3d\x3dp\x26\x26_$jscomp$0.modified(p))sim[p](_$jscomp$0[p])}i\x3d0;for(n\x3df.length;i\x3cn;++i){var name\x3d\x22forces\x22+i;if(init||_$jscomp$0.modified(\x22forces\x22,i)){p\x3dvoid 0;var _\x3df[i];vegaUtil.hasOwnProperty(ForceMap,_.force)||vegaUtil.error(\x22Unrecognized force: \x22+\n_.force);var f$jscomp$0\x3dForceMap[_.force]();for(p in _)vegaUtil.isFunction(f$jscomp$0[p])\x26\x26setForceParam(f$jscomp$0[p],_[p],_);p\x3df$jscomp$0}else{if(p\x3dpulse$jscomp$0)a:{f$jscomp$0\x3dp\x3dvoid 0;_\x3df[i];var pulse\x3dpulse$jscomp$0;for(f$jscomp$0 in _)if(vegaUtil.isFunction(p\x3d_[f$jscomp$0])\x26\x26pulse.modified(vegaUtil.accessorFields(p))){p\x3d1;break a}p\x3d0}p\x3dp?sim.force(name):null}p\x26\x26sim.force(name,p)}for(n\x3dsim.numForces||0;i\x3cn;++i)sim.force(\x22forces\x22+i,null);sim.numForces\x3df.length;return sim}function setForceParam(f,\nv,_){f(vegaUtil.isFunction(v)?d\x3d\x3ev(d,_):v)}const ForceMap\x3d{center:d3Force.forceCenter,collide:d3Force.forceCollide,nbody:d3Force.forceManyBody,link:d3Force.forceLink,x:d3Force.forceX,y:d3Force.forceY},ForceParams\x3d[\x22alpha\x22,\x22alphaMin\x22,\x22alphaTarget\x22,\x22velocityDecay\x22,\x22forces\x22],ForceConfig\x3d[\x22static\x22,\x22iterations\x22],ForceOutput\x3d[\x22x\x22,\x22y\x22,\x22vx\x22,\x22vy\x22];Force.Definition\x3d{type:\x22Force\x22,metadata:{modifies:!0},params:[{name:\x22static\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22restart\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22iterations\x22,\ntype:\x22number\x22,\x22default\x22:300},{name:\x22alpha\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22alphaMin\x22,type:\x22number\x22,\x22default\x22:.001},{name:\x22alphaTarget\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22velocityDecay\x22,type:\x22number\x22,\x22default\x22:.4},{name:\x22forces\x22,type:\x22param\x22,array:!0,params:[{key:{force:\x22center\x22},params:[{name:\x22x\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22y\x22,type:\x22number\x22,\x22default\x22:0}]},{key:{force:\x22collide\x22},params:[{name:\x22radius\x22,type:\x22number\x22,expr:!0},{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:.7},{name:\x22iterations\x22,type:\x22number\x22,\n\x22default\x22:1}]},{key:{force:\x22nbody\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:-30},{name:\x22theta\x22,type:\x22number\x22,\x22default\x22:.9},{name:\x22distanceMin\x22,type:\x22number\x22,\x22default\x22:1},{name:\x22distanceMax\x22,type:\x22number\x22}]},{key:{force:\x22link\x22},params:[{name:\x22links\x22,type:\x22data\x22},{name:\x22id\x22,type:\x22field\x22},{name:\x22distance\x22,type:\x22number\x22,\x22default\x22:30,expr:!0},{name:\x22strength\x22,type:\x22number\x22,expr:!0},{name:\x22iterations\x22,type:\x22number\x22,\x22default\x22:1}]},{key:{force:\x22x\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:.1},\n{name:\x22x\x22,type:\x22field\x22}]},{key:{force:\x22y\x22},params:[{name:\x22strength\x22,type:\x22number\x22,\x22default\x22:.1},{name:\x22y\x22,type:\x22field\x22}]}]},{name:\x22as\x22,type:\x22string\x22,array:!0,modify:!1,\x22default\x22:ForceOutput}]};vegaUtil.inherits(Force,vegaDataflow.Transform,{transform(_,pulse){var sim\x3dthis.value,change\x3dpulse.changed(pulse.ADD_REM),params\x3d_.modified(ForceParams),iters\x3d_.iterations||300;sim?(change\x26\x26(pulse.modifies(\x22index\x22),sim.nodes(pulse.source)),(params||pulse.changed(pulse.MOD))\x26\x26setup(sim,_,0,pulse)):(this.value\x3d\nsim\x3dsimulation(pulse.source,_),sim.on(\x22tick\x22,rerun(pulse.dataflow,this)),_.static||(change\x3d!0,sim.tick()),pulse.modifies(\x22index\x22));if(params||change||_.modified(ForceConfig)||pulse.changed()\x26\x26_.restart)if(sim.alpha(Math.max(sim.alpha(),_.alpha||1)).alphaDecay(1-Math.pow(sim.alphaMin(),1/iters)),_.static)for(sim.stop();0\x3c\x3d--iters;)sim.tick();else if(sim.stopped()\x26\x26sim.restart(),!change)return pulse.StopPropagation;return this.finish(_,pulse)},finish(_,pulse){const dataflow\x3dpulse.dataflow;for(let args\x3d\nthis._argops,j\x3d0,m\x3dargs.length,arg;j\x3cm;++j)if(arg\x3dargs[j],\x22forces\x22\x3d\x3d\x3darg.name\x26\x26\x22link\x22\x3d\x3d\x3darg.op._argval.force)for(var ops\x3darg.op._argops,i\x3d0,n\x3dops.length,op;i\x3cn;++i)if(\x22links\x22\x3d\x3d\x3dops[i].name\x26\x26(op\x3dops[i].op.source)){dataflow.pulse(op,dataflow.changeset().reflow());break}return pulse.reflow(_.modified()).modifies(ForceOutput)}});exports.force\x3dForce;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_hierarchy$dist$d3_hierarchy.js", true , "shadow$provide.module$node_modules$d3_hierarchy$dist$d3_hierarchy\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function defaultSeparation(a,b){return a.parent\x3d\x3d\x3db.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,\nc){return Math.max(y,c.y)}function leafLeft(node){for(var children;children\x3dnode.children;)node\x3dchildren[0];return node}function leafRight(node){for(var children;children\x3dnode.children;)node\x3dchildren[children.length-1];return node}function count(node){var sum\x3d0,children\x3dnode.children,i\x3dchildren\x26\x26children.length;if(i)for(;0\x3c\x3d--i;)sum+\x3dchildren[i].value;else sum\x3d1;node.value\x3dsum}function hierarchy(data,children){data instanceof Map?(data\x3d[void 0,data],void 0\x3d\x3d\x3dchildren\x26\x26(children\x3dmapChildren)):void 0\x3d\x3d\x3d\nchildren\x26\x26(children\x3dobjectChildren);data\x3dnew Node(data);for(var node,nodes\x3d[data],child,childs,i,n;node\x3dnodes.pop();)if((childs\x3dchildren(node.data))\x26\x26(n\x3d(childs\x3dArray.from(childs)).length))for(node.children\x3dchilds,i\x3dn-1;0\x3c\x3di;--i)nodes.push(child\x3dchilds[i]\x3dnew Node(childs[i])),child.parent\x3dnode,child.depth\x3dnode.depth+1;return data.eachBefore(computeHeight)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(node){void 0!\x3d\x3dnode.data.value\x26\x26\n(node.value\x3dnode.data.value);node.data\x3dnode.data.data}function computeHeight(node){var height\x3d0;do node.height\x3dheight;while((node\x3dnode.parent)\x26\x26node.height\x3c++height)}function Node(data){this.data\x3ddata;this.depth\x3dthis.height\x3d0;this.parent\x3dnull}function enclose(circles){var i\x3d0;circles\x3dArray.from(circles);for(var m\x3dcircles.length,t,i$jscomp$0;m;)i$jscomp$0\x3dMath.random()*m--|0,t\x3dcircles[m],circles[m]\x3dcircles[i$jscomp$0],circles[i$jscomp$0]\x3dt;m\x3dcircles.length;t\x3d[];for(var e;i\x3cm;)if(i$jscomp$0\x3dcircles[i],\ne\x26\x26enclosesWeak(e,i$jscomp$0))++i;else{a:if(i\x3dt,enclosesWeakAll(i$jscomp$0,i))i\x3d[i$jscomp$0];else{for(t\x3d0;t\x3ci.length;++t)if(enclosesNot(i$jscomp$0,i[t])\x26\x26enclosesWeakAll(encloseBasis2(i[t],i$jscomp$0),i)){i\x3d[i[t],i$jscomp$0];break a}for(t\x3d0;t\x3ci.length-1;++t)for(e\x3dt+1;e\x3ci.length;++e)if(enclosesNot(encloseBasis2(i[t],i[e]),i$jscomp$0)\x26\x26enclosesNot(encloseBasis2(i[t],i$jscomp$0),i[e])\x26\x26enclosesNot(encloseBasis2(i[e],i$jscomp$0),i[t])\x26\x26enclosesWeakAll(encloseBasis3(i[t],i[e],i$jscomp$0),i)){i\x3d[i[t],i[e],\ni$jscomp$0];break a}throw Error();}a:{i\x3dt\x3di;switch(i.length){case 1:i\x3di[0];i\x3d{x:i.x,y:i.y,r:i.r};break a;case 2:i\x3dencloseBasis2(i[0],i[1]);break a;case 3:i\x3dencloseBasis3(i[0],i[1],i[2]);break a}i\x3dvoid 0}e\x3di;i\x3d0}return e}function enclosesNot(a,b){var dr\x3da.r-b.r,dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3edr||dr*dr\x3cdx*dx+a*a}function enclosesWeak(a,b){var dr\x3da.r-b.r+1E-9*Math.max(a.r,b.r,1),dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3cdr\x26\x26dr*dr\x3edx*dx+a*a}function enclosesWeakAll(a,B){for(var i\x3d0;i\x3cB.length;++i)if(!enclosesWeak(a,\nB[i]))return!1;return!0}function encloseBasis2(a,b){var x1\x3da.x,y1\x3da.y;a\x3da.r;var x2\x3db.x,y2\x3db.y;b\x3db.r;var x21\x3dx2-x1,y21\x3dy2-y1,r21\x3db-a,l\x3dMath.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+a+b)/2}}function encloseBasis3(a,b,c){var x1\x3da.x,y1\x3da.y;a\x3da.r;var x2\x3db.x,y2\x3db.y,r2\x3db.r,x3\x3dc.x,y3\x3dc.y,r3\x3dc.r;c\x3dx1-x2;b\x3dx1-x3;var b2\x3dy1-y2,b3\x3dy1-y3,c2\x3dr2-a,c3\x3dr3-a,d1\x3dx1*x1+y1*y1-a*a;y2\x3dd1-x2*x2-y2*y2+r2*r2;y3\x3dd1-x3*x3-y3*y3+r3*r3;x3\x3db*b2-c*b3;x2\x3d(b2*y3-b3*y2)/(2*x3)-x1;b2\x3d(b3*c2-b2*c3)/\nx3;b3\x3d(b*y2-c*y3)/(2*x3)-y1;c\x3d(c*c3-b*c2)/x3;b\x3db2*b2+c*c-1;c2\x3d2*(a+x2*b2+b3*c);a\x3dx2*x2+b3*b3-a*a;a\x3d-(b?(c2+Math.sqrt(c2*c2-4*b*a))/(2*b):a/c2);return{x:x1+x2+b2*a,y:y1+b3+c*a,r:a}}function place(b,a,c){var dx\x3db.x-a.x,dy\x3db.y-a.y,d2\x3ddx*dx+dy*dy;if(d2){var a2\x3da.r+c.r;a2*\x3da2;var b2\x3db.r+c.r;b2*\x3db2;if(a2\x3eb2){var x\x3d(d2+b2-a2)/(2*d2);a2\x3dMath.sqrt(Math.max(0,b2/d2-x*x));c.x\x3db.x-x*dx-a2*dy;c.y\x3db.y-x*dy+a2*dx}else x\x3d(d2+a2-b2)/(2*d2),a2\x3dMath.sqrt(Math.max(0,a2/d2-x*x)),c.x\x3da.x+x*dx-a2*dy,c.y\x3da.y+x*dy+a2*dx}else c.x\x3d\na.x+c.r,c.y\x3da.y}function intersects(a,b){var dr\x3da.r+b.r-1E-6,dx\x3db.x-a.x;a\x3db.y-a.y;return 0\x3cdr\x26\x26dr*dr\x3edx*dx+a*a}function score(node){var a\x3dnode._,b\x3dnode.next._,ab\x3da.r+b.r;node\x3d(a.x*b.r+b.x*a.r)/ab;a\x3d(a.y*b.r+b.y*a.r)/ab;return node*node+a*a}function Node$1(circle){this._\x3dcircle;this.previous\x3dthis.next\x3dnull}function packEnclose(circles){if(!(n\x3d(circles\x3d\x22object\x22\x3d\x3d\x3dtypeof circles\x26\x26\x22length\x22in circles?circles:Array.from(circles)).length))return 0;var c,n;var a\x3dcircles[0];a.x\x3d0;a.y\x3d0;if(!(1\x3cn))return a.r;\nvar b\x3dcircles[1];a.x\x3d-b.r;b.x\x3da.r;b.y\x3d0;if(!(2\x3cn))return a.r+b.r;place(b,a,c\x3dcircles[2]);a\x3dnew Node$1(a);b\x3dnew Node$1(b);c\x3dnew Node$1(c);a.next\x3dc.previous\x3db;b.next\x3da.previous\x3dc;c.next\x3db.previous\x3da;var i\x3d3;a:for(;i\x3cn;++i){place(a._,b._,c\x3dcircles[i]);c\x3dnew Node$1(c);var aa\x3db.next;var ca\x3da.previous;var sj\x3db._.r;var sk\x3da._.r;do if(sj\x3c\x3dsk){if(intersects(aa._,c._)){b\x3daa;a.next\x3db;b.previous\x3da;--i;continue a}sj+\x3daa._.r;aa\x3daa.next}else{if(intersects(ca._,c._)){a\x3dca;a.next\x3db;b.previous\x3da;--i;continue a}sk+\x3d\nca._.r;ca\x3dca.previous}while(aa!\x3d\x3dca.next);c.previous\x3da;c.next\x3db;a.next\x3db.previous\x3db\x3dc;for(aa\x3dscore(a);(c\x3dc.next)!\x3d\x3db;)(ca\x3dscore(c))\x3caa\x26\x26(a\x3dc,aa\x3dca);b\x3da.next}a\x3d[b._];for(c\x3db;(c\x3dc.next)!\x3d\x3db;)a.push(c._);c\x3denclose(a);for(i\x3d0;i\x3cn;++i)a\x3dcircles[i],a.x-\x3dc.x,a.y-\x3dc.y;return c.r}function required(f){if(\x22function\x22!\x3d\x3dtypeof f)throw Error();return f}function constantZero(){return 0}function constant(x){return function(){return x}}function defaultRadius(d){return Math.sqrt(d.value)}function radiusLeaf(radius){return function(node){node.children||\n(node.r\x3dMath.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children\x3dnode.children){var children,i,n\x3dchildren.length,r\x3dpadding(node)*k||0;if(r)for(i\x3d0;i\x3cn;++i)children[i].r+\x3dr;var e\x3dpackEnclose(children);if(r)for(i\x3d0;i\x3cn;++i)children[i].r-\x3dr;node.r\x3de+r}}}function translateChild(k){return function(node){var parent\x3dnode.parent;node.r*\x3dk;parent\x26\x26(node.x\x3dparent.x+k*node.x,node.y\x3dparent.y+k*node.y)}}function roundNode(node){node.x0\x3dMath.round(node.x0);node.y0\x3dMath.round(node.y0);\nnode.x1\x3dMath.round(node.x1);node.y1\x3dMath.round(node.y1)}function treemapDice(parent,x0,y0,x1,y1){var nodes\x3dparent.children,i\x3d-1,n\x3dnodes.length;for(x1\x3dparent.value\x26\x26(x1-x0)/parent.value;++i\x3cn;)parent\x3dnodes[i],parent.y0\x3dy0,parent.y1\x3dy1,parent.x0\x3dx0,parent.x1\x3dx0+\x3dparent.value*x1}function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}function defaultSeparation$1(a,b){return a.parent\x3d\x3d\x3db.parent?1:2}function nextLeft(v){var children\x3dv.children;return children?children[0]:v.t}function nextRight(v){var children\x3d\nv.children;return children?children[children.length-1]:v.t}function TreeNode(node,i){this._\x3dnode;this.A\x3dthis.children\x3dthis.parent\x3dnull;this.a\x3dthis;this.s\x3dthis.c\x3dthis.m\x3dthis.z\x3d0;this.t\x3dnull;this.i\x3di}function treeRoot(root){root\x3dnew TreeNode(root,0);for(var node,nodes\x3d[root],child,children,i;node\x3dnodes.pop();)if(children\x3dnode._.children)for(node.children\x3dArray(child\x3dchildren.length),i\x3dchild-1;0\x3c\x3di;--i)nodes.push(child\x3dnode.children[i]\x3dnew TreeNode(children[i],i)),child.parent\x3dnode;(root.parent\x3dnew TreeNode(null,\n0)).children\x3d[root];return root}function treemapSlice(parent,x0,y0,x1,y1){var nodes\x3dparent.children,i\x3d-1,n\x3dnodes.length;for(y1\x3dparent.value\x26\x26(y1-y0)/parent.value;++i\x3cn;)parent\x3dnodes[i],parent.x0\x3dx0,parent.x1\x3dx1,parent.y0\x3dy0,parent.y1\x3dy0+\x3dparent.value*y1}function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var rows\x3d[],nodes\x3dparent.children,row,nodeValue,i1\x3drow\x3d0,n\x3dnodes.length,dy,value\x3dparent.value,sumValue,minValue,maxValue,newRatio,minRatio,alpha;row\x3cn;){parent\x3dx1-x0;dy\x3dy1-y0;do sumValue\x3dnodes[i1++].value;\nwhile(!sumValue\x26\x26i1\x3cn);minValue\x3dmaxValue\x3dsumValue;alpha\x3dMath.max(dy/parent,parent/dy)/(value*ratio);newRatio\x3dsumValue*sumValue*alpha;for(minRatio\x3dMath.max(maxValue/newRatio,newRatio/minValue);i1\x3cn;++i1){sumValue+\x3dnodeValue\x3dnodes[i1].value;nodeValue\x3cminValue\x26\x26(minValue\x3dnodeValue);nodeValue\x3emaxValue\x26\x26(maxValue\x3dnodeValue);newRatio\x3dsumValue*sumValue*alpha;newRatio\x3dMath.max(maxValue/newRatio,newRatio/minValue);if(newRatio\x3eminRatio){sumValue-\x3dnodeValue;break}minRatio\x3dnewRatio}rows.push(row\x3d{value:sumValue,\ndice:parent\x3cdy,children:nodes.slice(row,i1)});row.dice?treemapDice(row,x0,y0,x1,value?y0+\x3ddy*sumValue/value:y1):treemapSlice(row,x0,y0,value?x0+\x3dparent*sumValue/value:x1,y1);value-\x3dsumValue;row\x3di1}return rows}Node.prototype\x3dhierarchy.prototype\x3d{constructor:Node,count:function(){return this.eachAfter(count)},each:function(callback,that){let index\x3d-1;for(const node of this)callback.call(that,node,++index,this);return this},eachAfter:function(callback,that){for(var node,nodes\x3d[this],next\x3d[],i,n,index\x3d\n-1;node\x3dnodes.pop();)if(next.push(node),node\x3dnode.children)for(i\x3d0,n\x3dnode.length;i\x3cn;++i)nodes.push(node[i]);for(;node\x3dnext.pop();)callback.call(that,node,++index,this);return this},eachBefore:function(callback,that){for(var node,nodes\x3d[this],i,index\x3d-1;node\x3dnodes.pop();)if(callback.call(that,node,++index,this),node\x3dnode.children)for(i\x3dnode.length-1;0\x3c\x3di;--i)nodes.push(node[i]);return this},find:function(callback,that){let index\x3d-1;for(const node of this)if(callback.call(that,node,++index,this))return node},\nsum:function(value){return this.eachAfter(function(node){for(var sum\x3d+value(node.data)||0,children\x3dnode.children,i\x3dchildren\x26\x26children.length;0\x3c\x3d--i;)sum+\x3dchildren[i].value;node.value\x3dsum})},sort:function(compare){return this.eachBefore(function(node){node.children\x26\x26node.children.sort(compare)})},path:function(end){var start\x3dthis;var ancestor\x3dstart;var b\x3dend;if(ancestor!\x3d\x3db){var aNodes\x3dancestor.ancestors(),bNodes\x3db.ancestors(),c\x3dnull;ancestor\x3daNodes.pop();for(b\x3dbNodes.pop();ancestor\x3d\x3d\x3db;)c\x3dancestor,\nancestor\x3daNodes.pop(),b\x3dbNodes.pop();ancestor\x3dc}for(b\x3d[start];start!\x3d\x3dancestor;)start\x3dstart.parent,b.push(start);for(start\x3db.length;end!\x3d\x3dancestor;)b.splice(start,0,end),end\x3dend.parent;return b},ancestors:function(){for(var node\x3dthis,nodes\x3d[node];node\x3dnode.parent;)nodes.push(node);return nodes},descendants:function(){return Array.from(this)},leaves:function(){var leaves\x3d[];this.eachBefore(function(node){node.children||leaves.push(node)});return leaves},links:function(){var root\x3dthis,links\x3d[];root.each(function(node){node!\x3d\x3d\nroot\x26\x26links.push({source:node.parent,target:node})});return links},copy:function(){return hierarchy(this).eachBefore(copyData)},[Symbol.iterator]:function*(){var node,next\x3d[this],n;do{var current\x3dnext.reverse();for(next\x3d[];node\x3dcurrent.pop();)if(yield node,node\x3dnode.children){var i\x3d0;for(n\x3dnode.length;i\x3cn;++i)next.push(node[i])}}while(next.length)}};var preroot\x3d{depth:-1},ambiguous\x3d{};TreeNode.prototype\x3dObject.create(Node.prototype);var phi\x3d(1+Math.sqrt(5))/2,squarify\x3dfunction custom(ratio){function squarify(parent,\nx0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}squarify.ratio\x3dfunction(x){return custom(1\x3c(x\x3d+x)?x:1)};return squarify}(phi);phi\x3dfunction custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows\x3dparent._squarify)\x26\x26rows.ratio\x3d\x3d\x3dratio)for(var rows,nodes,i,j\x3d-1,n,m\x3drows.length,value\x3dparent.value;++j\x3cm;){parent\x3drows[j];nodes\x3dparent.children;i\x3dparent.value\x3d0;for(n\x3dnodes.length;i\x3cn;++i)parent.value+\x3dnodes[i].value;parent.dice?treemapDice(parent,x0,y0,x1,value?y0+\x3d(y1-y0)*parent.value/value:\ny1):treemapSlice(parent,x0,y0,value?x0+\x3d(x1-x0)*parent.value/value:x1,y1);value-\x3dparent.value}else parent._squarify\x3drows\x3dsquarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio\x3dratio}resquarify.ratio\x3dfunction(x){return custom(1\x3c(x\x3d+x)?x:1)};return resquarify}(phi);exports.cluster\x3dfunction(){function cluster(root){var previousNode,x\x3d0;root.eachAfter(function(node){var children\x3dnode.children;if(children){var JSCompiler_inline_result\x3dchildren.reduce(meanXReduce,0)/children.length;node.x\x3dJSCompiler_inline_result;\nnode.y\x3d1+children.reduce(maxYReduce,0)}else node.x\x3dpreviousNode?x+\x3dseparation(node,previousNode):0,node.y\x3d0,previousNode\x3dnode});var left\x3dleafLeft(root),right\x3dleafRight(root),x0\x3dleft.x-separation(left,right)/2,x1\x3dright.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x\x3d(node.x-root.x)*dx;node.y\x3d(root.y-node.y)*dy}:function(node){node.x\x3d(node.x-x0)/(x1-x0)*dx;node.y\x3d(1-(root.y?node.y/root.y:1))*dy})}var separation\x3ddefaultSeparation,dx\x3d1,dy\x3d1,nodeSize\x3d!1;cluster.separation\x3d\nfunction(x){return arguments.length?(separation\x3dx,cluster):separation};cluster.size\x3dfunction(x){return arguments.length?(nodeSize\x3d!1,dx\x3d+x[0],dy\x3d+x[1],cluster):nodeSize?null:[dx,dy]};cluster.nodeSize\x3dfunction(x){return arguments.length?(nodeSize\x3d!0,dx\x3d+x[0],dy\x3d+x[1],cluster):nodeSize?[dx,dy]:null};return cluster};exports.hierarchy\x3dhierarchy;exports.pack\x3dfunction(){function pack(root){root.x\x3ddx/2;root.y\x3ddy/2;radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):\nroot.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r)));return root}var radius\x3dnull,dx\x3d1,dy\x3d1,padding\x3dconstantZero;pack.radius\x3dfunction(x){return arguments.length?(radius\x3dnull\x3d\x3dx?null:required(x),pack):radius};pack.size\x3dfunction(x){return arguments.length?(dx\x3d+x[0],dy\x3d+x[1],pack):[dx,dy]};pack.padding\x3dfunction(x){return arguments.length?(padding\x3d\x22function\x22\x3d\x3d\x3dtypeof x?\nx:constant(+x),pack):padding};return pack};exports.packEnclose\x3denclose;exports.packSiblings\x3dfunction(circles){packEnclose(circles);return circles};exports.partition\x3dfunction(){function partition(root){var n\x3droot.height+1;root.x0\x3droot.y0\x3dpadding;root.x1\x3ddx;root.y1\x3ddy$jscomp$0/n;root.eachBefore(positionNode(dy$jscomp$0,n));round\x26\x26root.eachBefore(roundNode);return root}function positionNode(dy,n){return function(node){node.children\x26\x26treemapDice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+\n2)/n);var x0\x3dnode.x0,y0\x3dnode.y0,x1\x3dnode.x1-padding,y1\x3dnode.y1-padding;x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2);y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2);node.x0\x3dx0;node.y0\x3dy0;node.x1\x3dx1;node.y1\x3dy1}}var dx\x3d1,dy$jscomp$0\x3d1,padding\x3d0,round\x3d!1;partition.round\x3dfunction(x){return arguments.length?(round\x3d!!x,partition):round};partition.size\x3dfunction(x){return arguments.length?(dx\x3d+x[0],dy$jscomp$0\x3d+x[1],partition):[dx,dy$jscomp$0]};partition.padding\x3dfunction(x){return arguments.length?(padding\x3d+x,partition):padding};return partition};exports.stratify\x3d\nfunction(){function stratify(data){var nodes\x3dArray.from(data),n\x3dnodes.length,i,nodeId,nodeByKey\x3dnew Map;for(i\x3d0;i\x3cn;++i){var d\x3dnodes[i];var node$jscomp$0\x3dnodes[i]\x3dnew Node(d);if(null!\x3d(nodeId\x3did(d,i,data))\x26\x26(nodeId+\x3d\x22\x22)){var nodeKey\x3dnode$jscomp$0.id\x3dnodeId;nodeByKey.set(nodeKey,nodeByKey.has(nodeKey)?ambiguous:node$jscomp$0)}null!\x3d(nodeId\x3dparentId(d,i,data))\x26\x26(nodeId+\x3d\x22\x22)\x26\x26(node$jscomp$0.parent\x3dnodeId)}for(i\x3d0;i\x3cn;++i)if(node$jscomp$0\x3dnodes[i],nodeId\x3dnode$jscomp$0.parent){data\x3dnodeByKey.get(nodeId);\nif(!data)throw Error(\x22missing: \x22+nodeId);if(data\x3d\x3d\x3dambiguous)throw Error(\x22ambiguous: \x22+nodeId);data.children?data.children.push(node$jscomp$0):data.children\x3d[node$jscomp$0];node$jscomp$0.parent\x3ddata}else{if(root)throw Error(\x22multiple roots\x22);var root\x3dnode$jscomp$0}if(!root)throw Error(\x22no root\x22);root.parent\x3dpreroot;root.eachBefore(function(node){node.depth\x3dnode.parent.depth+1;--n}).eachBefore(computeHeight);root.parent\x3dnull;if(0\x3cn)throw Error(\x22cycle\x22);return root}var id\x3ddefaultId,parentId\x3ddefaultParentId;\nstratify.id\x3dfunction(x){return arguments.length?(id\x3drequired(x),stratify):id};stratify.parentId\x3dfunction(x){return arguments.length?(parentId\x3drequired(x),stratify):parentId};return stratify};exports.tree\x3dfunction(){function tree(root){var t\x3dtreeRoot(root);t.eachAfter(firstWalk);t.parent.m\x3d-t.z;t.eachBefore(secondWalk);if(nodeSize)root.eachBefore(sizeNode);else{var left\x3droot,right\x3droot,bottom\x3droot;root.eachBefore(function(node){node.x\x3cleft.x\x26\x26(left\x3dnode);node.x\x3eright.x\x26\x26(right\x3dnode);node.depth\x3ebottom.depth\x26\x26\n(bottom\x3dnode)});t\x3dleft\x3d\x3d\x3dright?1:separation(left,right)/2;var tx\x3dt-left.x,kx\x3ddx/(right.x+t+tx),ky\x3ddy/(bottom.depth||1);root.eachBefore(function(node){node.x\x3d(node.x+tx)*kx;node.y\x3dnode.depth*ky})}return root}function firstWalk(v){var children\x3dv.children,siblings\x3dv.parent.children,w\x3dv.i?siblings[v.i-1]:null;if(children){for(var shift\x3d0,change\x3d0,children$jscomp$0\x3dv.children,i\x3dchildren$jscomp$0.length,w$jscomp$0;0\x3c\x3d--i;)w$jscomp$0\x3dchildren$jscomp$0[i],w$jscomp$0.z+\x3dshift,w$jscomp$0.m+\x3dshift,shift+\x3dw$jscomp$0.s+\n(change+\x3dw$jscomp$0.c);children\x3d(children[0].z+children[children.length-1].z)/2;w?(v.z\x3dw.z+separation(v._,w._),v.m\x3dv.z-children):v.z\x3dchildren}else w\x26\x26(v.z\x3dw.z+separation(v._,w._));children\x3dv.parent;siblings\x3dv.parent.A||siblings[0];if(w){change\x3dshift\x3dv;children$jscomp$0\x3dshift.parent.children[0];i\x3dshift.m;w$jscomp$0\x3dchange.m;for(var sim\x3dw.m,som\x3dchildren$jscomp$0.m,shift$jscomp$0;w\x3dnextRight(w),shift\x3dnextLeft(shift),w\x26\x26shift;){children$jscomp$0\x3dnextLeft(children$jscomp$0);change\x3dnextRight(change);change.a\x3d\nv;shift$jscomp$0\x3dw.z+sim-shift.z-i+separation(w._,shift._);if(0\x3cshift$jscomp$0){var wm\x3dw.a.parent\x3d\x3d\x3dv.parent?w.a:siblings,wp\x3dv,shift$jscomp$1\x3dshift$jscomp$0,change$jscomp$0\x3dshift$jscomp$1/(wp.i-wm.i);wp.c-\x3dchange$jscomp$0;wp.s+\x3dshift$jscomp$1;wm.c+\x3dchange$jscomp$0;wp.z+\x3dshift$jscomp$1;wp.m+\x3dshift$jscomp$1;i+\x3dshift$jscomp$0;w$jscomp$0+\x3dshift$jscomp$0}sim+\x3dw.m;i+\x3dshift.m;som+\x3dchildren$jscomp$0.m;w$jscomp$0+\x3dchange.m}w\x26\x26!nextRight(change)\x26\x26(change.t\x3dw,change.m+\x3dsim-w$jscomp$0);shift\x26\x26!nextLeft(children$jscomp$0)\x26\x26\n(children$jscomp$0.t\x3dshift,children$jscomp$0.m+\x3di-som,siblings\x3dv)}children.A\x3dsiblings}function secondWalk(v){v._.x\x3dv.z+v.parent.m;v.m+\x3dv.parent.m}function sizeNode(node){node.x*\x3ddx;node.y\x3dnode.depth*dy}var separation\x3ddefaultSeparation$1,dx\x3d1,dy\x3d1,nodeSize\x3dnull;tree.separation\x3dfunction(x){return arguments.length?(separation\x3dx,tree):separation};tree.size\x3dfunction(x){return arguments.length?(nodeSize\x3d!1,dx\x3d+x[0],dy\x3d+x[1],tree):nodeSize?null:[dx,dy]};tree.nodeSize\x3dfunction(x){return arguments.length?\n(nodeSize\x3d!0,dx\x3d+x[0],dy\x3d+x[1],tree):nodeSize?[dx,dy]:null};return tree};exports.treemap\x3dfunction(){function treemap(root){root.x0\x3droot.y0\x3d0;root.x1\x3ddx;root.y1\x3ddy;root.eachBefore(positionNode);paddingStack\x3d[0];round\x26\x26root.eachBefore(roundNode);return root}function positionNode(node){var p\x3dpaddingStack[node.depth],x0\x3dnode.x0+p,y0\x3dnode.y0+p,x1\x3dnode.x1-p,y1\x3dnode.y1-p;x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2);y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2);node.x0\x3dx0;node.y0\x3dy0;node.x1\x3dx1;node.y1\x3dy1;node.children\x26\x26(p\x3dpaddingStack[node.depth+\n1]\x3dpaddingInner(node)/2,x0+\x3dpaddingLeft(node)-p,y0+\x3dpaddingTop(node)-p,x1-\x3dpaddingRight(node)-p,y1-\x3dpaddingBottom(node)-p,x1\x3cx0\x26\x26(x0\x3dx1\x3d(x0+x1)/2),y1\x3cy0\x26\x26(y0\x3dy1\x3d(y0+y1)/2),tile(node,x0,y0,x1,y1))}var tile\x3dsquarify,round\x3d!1,dx\x3d1,dy\x3d1,paddingStack\x3d[0],paddingInner\x3dconstantZero,paddingTop\x3dconstantZero,paddingRight\x3dconstantZero,paddingBottom\x3dconstantZero,paddingLeft\x3dconstantZero;treemap.round\x3dfunction(x){return arguments.length?(round\x3d!!x,treemap):round};treemap.size\x3dfunction(x){return arguments.length?\n(dx\x3d+x[0],dy\x3d+x[1],treemap):[dx,dy]};treemap.tile\x3dfunction(x){return arguments.length?(tile\x3drequired(x),treemap):tile};treemap.padding\x3dfunction(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()};treemap.paddingInner\x3dfunction(x){return arguments.length?(paddingInner\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingInner};treemap.paddingOuter\x3dfunction(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()};\ntreemap.paddingTop\x3dfunction(x){return arguments.length?(paddingTop\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingTop};treemap.paddingRight\x3dfunction(x){return arguments.length?(paddingRight\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingRight};treemap.paddingBottom\x3dfunction(x){return arguments.length?(paddingBottom\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):paddingBottom};treemap.paddingLeft\x3dfunction(x){return arguments.length?(paddingLeft\x3d\x22function\x22\x3d\x3d\x3dtypeof x?x:constant(+x),treemap):\npaddingLeft};return treemap};exports.treemapBinary\x3dfunction(parent,x0$jscomp$0,y0$jscomp$0,x1$jscomp$0,y1$jscomp$0){function partition(i,j,value,x0,y0,x1,y1){if(i\x3e\x3dj-1)i\x3dnodes[i],i.x0\x3dx0,i.y0\x3dy0,i.x1\x3dx1,i.y1\x3dy1;else{for(var valueOffset\x3dsums[i],valueTarget\x3dvalue/2+valueOffset,k\x3di+1,hi\x3dj-1;k\x3chi;){var mid\x3dk+hi\x3e\x3e\x3e1;sums[mid]\x3cvalueTarget?k\x3dmid+1:hi\x3dmid}valueTarget-sums[k-1]\x3csums[k]-valueTarget\x26\x26i+1\x3ck\x26\x26--k;valueOffset\x3dsums[k]-valueOffset;valueTarget\x3dvalue-valueOffset;x1-x0\x3ey1-y0?(value\x3dvalue?(x0*valueTarget+\nx1*valueOffset)/value:x1,partition(i,k,valueOffset,x0,y0,value,y1),partition(k,j,valueTarget,value,y0,x1,y1)):(value\x3dvalue?(y0*valueTarget+y1*valueOffset)/value:y1,partition(i,k,valueOffset,x0,y0,x1,value),partition(k,j,valueTarget,x0,value,x1,y1))}}var nodes\x3dparent.children,i$jscomp$0,n\x3dnodes.length,sum,sums\x3dArray(n+1);for(sums[0]\x3dsum\x3di$jscomp$0\x3d0;i$jscomp$0\x3cn;++i$jscomp$0)sums[i$jscomp$0+1]\x3dsum+\x3dnodes[i$jscomp$0].value;partition(0,n,parent.value,x0$jscomp$0,y0$jscomp$0,x1$jscomp$0,y1$jscomp$0)};\nexports.treemapDice\x3dtreemapDice;exports.treemapResquarify\x3dphi;exports.treemapSlice\x3dtreemapSlice;exports.treemapSliceDice\x3dfunction(parent,x0,y0,x1,y1){(parent.depth\x261?treemapSlice:treemapDice)(parent,x0,y0,x1,y1)};exports.treemapSquarify\x3dsquarify;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_hierarchy$build$vega_hierarchy.js", true , "shadow$provide.module$node_modules$vega_hierarchy$build$vega_hierarchy\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_hierarchy$dist$d3_hierarchy\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\n\x22vega-util\x22,\x22d3-hierarchy\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Hierarchy){function lookup(tree,key,filter){const map\x3d{};tree.each(node\x3d\x3e{const t\x3dnode.data;filter(t)\x26\x26(map[key(t)]\x3dnode)});tree.lookup\x3dmap;return tree}function Nest(params){vegaDataflow.Transform.call(this,null,params)}function nest$jscomp$0(){function apply(array,depth){if(depth\x3e\x3dkeys.length)return array;\nconst n\x3darray.length,key\x3dkeys[depth++],valuesByKey\x3d{},result\x3d{};let i\x3d-1,keyValue,value,values;for(;++i\x3cn;)keyValue\x3dkey(value\x3darray[i])+\x22\x22,(values\x3dvaluesByKey[keyValue])?values.push(value):valuesByKey[keyValue]\x3d[value];for(keyValue in valuesByKey)result[keyValue]\x3dapply(valuesByKey[keyValue],depth);return result}function entries(map,depth){if(++depth\x3ekeys.length)return map;const array\x3d[];for(const key in map)array.push({key,values:entries(map[key],depth)});return array}const keys\x3d[],nest\x3d{entries:array\x3d\x3e\nentries(apply(array,0),0),key:d\x3d\x3e(keys.push(d),nest)};return nest}function HierarchyLayout(params){vegaDataflow.Transform.call(this,null,params)}function setParams(layout,params,_){for(let p,i\x3d0,n\x3dparams.length;i\x3cn;++i)if(p\x3dparams[i],p in _)layout[p](_[p])}function Pack(params){HierarchyLayout.call(this,params)}function Partition(params){HierarchyLayout.call(this,params)}function Stratify(params){vegaDataflow.Transform.call(this,null,params)}function Tree(params){HierarchyLayout.call(this,params)}\nfunction TreeLinks(params){vegaDataflow.Transform.call(this,[],params)}function Treemap(params){HierarchyLayout.call(this,params)}Nest.Definition\x3d{type:\x22Nest\x22,metadata:{treesource:!0,changes:!0},params:[{name:\x22keys\x22,type:\x22field\x22,array:!0},{name:\x22generate\x22,type:\x22boolean\x22}]};const children\x3dn\x3d\x3en.values;vegaUtil.inherits(Nest,vegaDataflow.Transform,{transform(_,pulse){pulse.source||vegaUtil.error(\x22Nest transform requires an upstream data source.\x22);var gen\x3d_.generate,mod\x3d_.modified(),out\x3dpulse.clone(),\ntree\x3dthis.value;if(!tree||mod||pulse.changed())tree\x26\x26tree.each(node\x3d\x3e{node.children\x26\x26vegaDataflow.isTuple(node.data)\x26\x26out.rem.push(node.data)}),this.value\x3dtree\x3dd3Hierarchy.hierarchy({values:vegaUtil.array(_.keys).reduce((n,k)\x3d\x3e{n.key(k);return n},nest$jscomp$0()).entries(out.source)},children),gen\x26\x26tree.each(node\x3d\x3e{node.children\x26\x26(node\x3dvegaDataflow.ingest(node.data),out.add.push(node),out.source.push(node))}),lookup(tree,vegaDataflow.tupleid,vegaDataflow.tupleid);out.source.root\x3dtree;return out}});\nconst defaultSeparation\x3d(a,b)\x3d\x3ea.parent\x3d\x3d\x3db.parent?1:2;vegaUtil.inherits(HierarchyLayout,vegaDataflow.Transform,{transform(_,pulse){pulse.source\x26\x26pulse.source.root||vegaUtil.error(this.constructor.name+\x22 transform requires a backing tree data source.\x22);const layout\x3dthis.layout(_.method),fields\x3dthis.fields,root\x3dpulse.source.root,as\x3d_.as||fields;_.field?root.sum(_.field):root.count();_.sort\x26\x26root.sort(vegaDataflow.stableCompare(_.sort,d\x3d\x3ed.data));setParams(layout,this.params,_);layout.separation\x26\x26layout.separation(!1!\x3d\x3d\n_.separation?defaultSeparation:vegaUtil.one);try{this.value\x3dlayout(root)}catch(err){vegaUtil.error(err)}root.each(node\x3d\x3e{{const t\x3dnode.data,n\x3dfields.length-1;for(let i\x3d0;i\x3cn;++i)t[as[i]]\x3dnode[fields[i]];t[as[n]]\x3dnode.children?node.children.length:0}});return pulse.reflow(_.modified()).modifies(as).modifies(\x22leaf\x22)}});var Output\x3d[\x22x\x22,\x22y\x22,\x22r\x22,\x22depth\x22,\x22children\x22];Pack.Definition\x3d{type:\x22Pack\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22padding\x22,\ntype:\x22number\x22,\x22default\x22:0},{name:\x22radius\x22,type:\x22field\x22,\x22default\x22:null},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};vegaUtil.inherits(Pack,HierarchyLayout,{layout:d3Hierarchy.pack,params:[\x22radius\x22,\x22size\x22,\x22padding\x22],fields:Output});Output\x3d\x22x0 y0 x1 y1 depth children\x22.split(\x22 \x22);Partition.Definition\x3d{type:\x22Partition\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22padding\x22,\ntype:\x22number\x22,\x22default\x22:0},{name:\x22round\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};vegaUtil.inherits(Partition,HierarchyLayout,{layout:d3Hierarchy.partition,params:[\x22size\x22,\x22round\x22,\x22padding\x22],fields:Output});Stratify.Definition\x3d{type:\x22Stratify\x22,metadata:{treesource:!0},params:[{name:\x22key\x22,type:\x22field\x22,required:!0},{name:\x22parentKey\x22,type:\x22field\x22,required:!0}]};vegaUtil.inherits(Stratify,vegaDataflow.Transform,\n{transform(_,pulse){pulse.source||vegaUtil.error(\x22Stratify transform requires an upstream data source.\x22);let tree\x3dthis.value;const mod\x3d_.modified(),out\x3dpulse.fork(pulse.ALL).materialize(pulse.SOURCE);pulse\x3d!tree||mod||pulse.changed(pulse.ADD_REM)||pulse.modified(_.key.fields)||pulse.modified(_.parentKey.fields);out.source\x3dout.source.slice();pulse\x26\x26(tree\x3dout.source.length?lookup(d3Hierarchy.stratify().id(_.key).parentId(_.parentKey)(out.source),_.key,vegaUtil.truthy):lookup(d3Hierarchy.stratify()([{}]),\n_.key,_.key));out.source.root\x3dthis.value\x3dtree;return out}});const Layouts\x3d{tidy:d3Hierarchy.tree,cluster:d3Hierarchy.cluster};Output\x3d[\x22x\x22,\x22y\x22,\x22depth\x22,\x22children\x22];Tree.Definition\x3d{type:\x22Tree\x22,metadata:{tree:!0,modifies:!0},params:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22tidy\x22,values:[\x22tidy\x22,\x22cluster\x22]},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22nodeSize\x22,type:\x22number\x22,array:!0,length:2},{name:\x22separation\x22,type:\x22boolean\x22,\x22default\x22:!0},\n{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};vegaUtil.inherits(Tree,HierarchyLayout,{layout(method){method\x3dmethod||\x22tidy\x22;if(vegaUtil.hasOwnProperty(Layouts,method))return Layouts[method]();vegaUtil.error(\x22Unrecognized Tree layout method: \x22+method)},params:[\x22size\x22,\x22nodeSize\x22],fields:Output});TreeLinks.Definition\x3d{type:\x22TreeLinks\x22,metadata:{tree:!0,generates:!0,changes:!0},params:[]};vegaUtil.inherits(TreeLinks,vegaDataflow.Transform,{transform(_,pulse){_\x3dthis.value;const tree\x3d\npulse.source\x26\x26pulse.source.root,out\x3dpulse.fork(pulse.NO_SOURCE),lut\x3d{};tree||vegaUtil.error(\x22TreeLinks transform requires a tree data source.\x22);pulse.changed(pulse.ADD_REM)?(out.rem\x3d_,pulse.visit(pulse.SOURCE,t\x3d\x3elut[vegaDataflow.tupleid(t)]\x3d1),tree.each(node\x3d\x3e{const t\x3dnode.data;(node\x3dnode.parent\x26\x26node.parent.data)\x26\x26lut[vegaDataflow.tupleid(t)]\x26\x26lut[vegaDataflow.tupleid(node)]\x26\x26out.add.push(vegaDataflow.ingest({source:node,target:t}))}),this.value\x3dout.add):pulse.changed(pulse.MOD)\x26\x26(pulse.visit(pulse.MOD,\nt\x3d\x3elut[vegaDataflow.tupleid(t)]\x3d1),_.forEach(link\x3d\x3e{(lut[vegaDataflow.tupleid(link.source)]||lut[vegaDataflow.tupleid(link.target)])\x26\x26out.mod.push(link)}));return out}});const Tiles\x3d{binary:d3Hierarchy.treemapBinary,dice:d3Hierarchy.treemapDice,slice:d3Hierarchy.treemapSlice,slicedice:d3Hierarchy.treemapSliceDice,squarify:d3Hierarchy.treemapSquarify,resquarify:d3Hierarchy.treemapResquarify};Output\x3d\x22x0 y0 x1 y1 depth children\x22.split(\x22 \x22);Treemap.Definition\x3d{type:\x22Treemap\x22,metadata:{tree:!0,modifies:!0},\nparams:[{name:\x22field\x22,type:\x22field\x22},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22method\x22,type:\x22enum\x22,\x22default\x22:\x22squarify\x22,values:\x22squarify resquarify binary dice slice slicedice\x22.split(\x22 \x22)},{name:\x22padding\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingInner\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingOuter\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingTop\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingRight\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingBottom\x22,type:\x22number\x22,\x22default\x22:0},{name:\x22paddingLeft\x22,type:\x22number\x22,\x22default\x22:0},\n{name:\x22ratio\x22,type:\x22number\x22,\x22default\x22:1.618033988749895},{name:\x22round\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,\x22default\x22:Output}]};vegaUtil.inherits(Treemap,HierarchyLayout,{layout(){const x\x3dd3Hierarchy.treemap();x.ratio\x3d_\x3d\x3e{const t\x3dx.tile();t.ratio\x26\x26x.tile(t.ratio(_))};x.method\x3d_\x3d\x3e{vegaUtil.hasOwnProperty(Tiles,_)?x.tile(Tiles[_]):vegaUtil.error(\x22Unrecognized Treemap layout method: \x22+_)};return x},params:\x22method ratio size round padding paddingInner paddingOuter paddingTop paddingRight paddingBottom paddingLeft\x22.split(\x22 \x22),\nfields:Output});exports.nest\x3dNest;exports.pack\x3dPack;exports.partition\x3dPartition;exports.stratify\x3dStratify;exports.tree\x3dTree;exports.treelinks\x3dTreeLinks;exports.treemap\x3dTreemap;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_label$build$vega_label.js", true , "shadow$provide.module$node_modules$vega_label$build$vega_label\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_canvas$build$vega_canvas_min\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3d\ntypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-canvas\x22,\x22vega-dataflow\x22,\x22vega-scenegraph\x22,\x22vega-util\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega,global.vega))})(this,function(exports,vegaCanvas,vegaDataflow,vegaScenegraph,vegaUtil){function baseBitmaps($,data){const bitmap\x3d$.bitmap();(data||[]).forEach(d\x3d\x3ebitmap.set($(d.boundary[0]),$(d.boundary[3])));return[bitmap,\nvoid 0]}function markBitmaps($,avoidMarks,labelInside,isGroupArea){const width\x3d$.width,height\x3d$.height,border\x3dlabelInside||isGroupArea,context\x3dvegaCanvas.canvas(width,height).getContext(\x222d\x22);avoidMarks.forEach(items\x3d\x3edraw(context,items,border));avoidMarks\x3dnew Uint32Array(context.getImageData(0,0,width,height).data.buffer);labelInside\x3d$.bitmap();const layer2\x3dborder\x26\x26$.bitmap();let x,y,u,v,alpha;for(y\x3d0;y\x3cheight;++y)for(x\x3d0;x\x3cwidth;++x)if(alpha\x3davoidMarks[y*width+x]\x264278190080)u\x3d$(x),v\x3d$(y),isGroupArea||\nlabelInside.set(u,v),border\x26\x26alpha^268435456\x26\x26layer2.set(u,v);return[labelInside,layer2]}function draw(context,items,interior){if(items.length){var type\x3ditems[0].mark.marktype;\x22group\x22\x3d\x3d\x3dtype?items.forEach(group\x3d\x3e{group.items.forEach(mark\x3d\x3edraw(context,mark.items,interior))}):vegaScenegraph.Marks[type].draw(context,{items:interior?items.map(prepare):items})}}function prepare(source){source\x3dvegaDataflow.rederive(source,{});source.stroke\x26\x26(source.strokeOpacity\x3d1);source.fill\x26\x26(source.fillOpacity\x3d.0625,\nsource.stroke\x3d\x22#000\x22,source.strokeOpacity\x3d1,source.strokeWidth\x3d2);return source}function Bitmap(w,h){const array\x3dnew Uint32Array(~~((w*h+32)/32));return{array,get:(x,y)\x3d\x3e{x\x3dy*w+x;return array[x\x3e\x3e\x3e5]\x261\x3c\x3c(x\x2631)},set:(x,y)\x3d\x3e{x\x3dy*w+x;array[x\x3e\x3e\x3e5]|\x3d1\x3c\x3c(x\x2631)},clear:(x,y)\x3d\x3e{x\x3dy*w+x;array[x\x3e\x3e\x3e5]\x26\x3d~(1\x3c\x3c(x\x2631))},getRange:(x,y,x2,y2)\x3d\x3e{let end,indexStart,indexEnd;for(;y2\x3e\x3dy;--y2){var start\x3dy2*w+x;end\x3dy2*w+x2;indexStart\x3dstart\x3e\x3e\x3e5;indexEnd\x3dend\x3e\x3e\x3e5;if(indexStart\x3d\x3d\x3dindexEnd){if(array[indexStart]\x26RIGHT0[start\x2631]\x26\nRIGHT1[(end\x2631)+1])return!0}else{if(array[indexStart]\x26RIGHT0[start\x2631]||array[indexEnd]\x26RIGHT1[(end\x2631)+1])return!0;for(start\x3dindexStart+1;start\x3cindexEnd;++start)if(array[start])return!0}}return!1},setRange:(x,y,x2,y2)\x3d\x3e{let end,indexStart,indexEnd;for(;y\x3c\x3dy2;++y){var start\x3dy*w+x;end\x3dy*w+x2;indexStart\x3dstart\x3e\x3e\x3e5;indexEnd\x3dend\x3e\x3e\x3e5;if(indexStart\x3d\x3d\x3dindexEnd)array[indexStart]|\x3dRIGHT0[start\x2631]\x26RIGHT1[(end\x2631)+1];else for(array[indexStart]|\x3dRIGHT0[start\x2631],array[indexEnd]|\x3dRIGHT1[(end\x2631)+1],start\x3dindexStart+\n1;start\x3cindexEnd;++start)array[start]|\x3d4294967295}},clearRange:(x,y,x2,y2)\x3d\x3e{let end,indexStart,indexEnd;for(;y\x3c\x3dy2;++y){var start\x3dy*w+x;end\x3dy*w+x2;indexStart\x3dstart\x3e\x3e\x3e5;indexEnd\x3dend\x3e\x3e\x3e5;if(indexStart\x3d\x3d\x3dindexEnd)array[indexStart]\x26\x3dRIGHT1[start\x2631]|RIGHT0[(end\x2631)+1];else for(array[indexStart]\x26\x3dRIGHT1[start\x2631],array[indexEnd]\x26\x3dRIGHT0[(end\x2631)+1],start\x3dindexStart+1;start\x3cindexEnd;++start)array[start]\x26\x3d0}},outOfBounds:(x,y,x2,y2)\x3d\x3e0\x3ex||0\x3ey||y2\x3e\x3dh||x2\x3e\x3dw}}function scaler(width,height,padding){const ratio\x3d\nMath.max(1,Math.sqrt(width*height/1E6)),w\x3d~~((width+2*padding+ratio)/ratio),h\x3d~~((height+2*padding+ratio)/ratio),scale\x3d_\x3d\x3e~~((_+padding)/ratio);scale.invert\x3d_\x3d\x3e_*ratio-padding;scale.bitmap\x3d()\x3d\x3eBitmap(w,h);scale.ratio\x3dratio;scale.padding\x3dpadding;scale.width\x3dwidth;scale.height\x3dheight;return scale}function outOfBounds(x,y,textWidth,textHeight,width,height){textWidth/\x3d2;return 0\x3ex-textWidth||x+textWidth\x3ewidth||0\x3ey-(textWidth\x3dtextHeight/2)||y+textWidth\x3eheight}function collision($,x,y,textHeight,textWidth,\nh,bm0,bm1){textWidth\x3dtextWidth*h/(2*textHeight);textHeight\x3d$(x-textWidth);x\x3d$(x+textWidth);textWidth\x3d$(y-(h/\x3d2));$\x3d$(y+h);return bm0.outOfBounds(textHeight,textWidth,x,$)||bm0.getRange(textHeight,textWidth,x,$)||bm1\x26\x26bm1.getRange(textHeight,textWidth,x,$)}function placeMarkLabel($,bitmaps,anchors,offsets){const width\x3d$.width,height\x3d$.height,bm0$jscomp$0\x3dbitmaps[0],bm1$jscomp$0\x3dbitmaps[1],n\x3doffsets.length;return function(d){const boundary\x3dd.boundary,textHeight\x3dd.datum.fontSize;if(0\x3eboundary[2]||0\x3e\nboundary[5]||boundary[0]\x3ewidth||boundary[3]\x3eheight)return!1;let textWidth\x3d0,dx,dy;let insideFactor,x1;let y2;let yc;let _y1,_y2;for(let i\x3d0;i\x3cn;++i){dx\x3d(anchors[i]\x263)-1;dy\x3d(anchors[i]\x3e\x3e\x3e2\x263)-1;var isInside\x3d0\x3d\x3d\x3ddx\x26\x260\x3d\x3d\x3ddy||0\x3eoffsets[i];var sizeFactor\x3ddx\x26\x26dy?Math.SQRT1_2:1;insideFactor\x3d0\x3eoffsets[i]?-1:1;x1\x3dboundary[1+dx]+offsets[i]*dx*sizeFactor;yc\x3dboundary[4+dy]+insideFactor*textHeight*dy/2+offsets[i]*dy*sizeFactor;sizeFactor\x3dyc-textHeight/2;y2\x3dyc+textHeight/2;var _x1\x3d$(x1);_y1\x3d$(sizeFactor);_y2\x3d$(y2);\nif(!textWidth){var x2\x3d_x1;var xc\x3d_y1;var _x2\x3d_y2;var bm0\x3dbm0$jscomp$0,bm1\x3dbm1$jscomp$0,x1$jscomp$0\x3dx1,x2$jscomp$0\x3dx1,y1\x3dsizeFactor,y2$jscomp$0\x3dy2,boundary$jscomp$0\x3dboundary,isInside$jscomp$0\x3disInside;if(!bm0.outOfBounds(x2,xc,_x1,_x2)\x26\x26(isInside$jscomp$0\x26\x26bm1?!bm1.getRange(x2,xc,_x1,_x2)\x26\x26boundary$jscomp$0[0]\x3c\x3dx1$jscomp$0\x26\x26x2$jscomp$0\x3c\x3dboundary$jscomp$0[2]\x26\x26boundary$jscomp$0[3]\x3c\x3dy1\x26\x26y2$jscomp$0\x3c\x3dboundary$jscomp$0[5]:!bm0.getRange(x2,xc,_x1,_x2)))textWidth\x3dvegaScenegraph.textMetrics.width(d.datum,\nd.datum.text);else continue}xc\x3dx1+insideFactor*textWidth*dx/2;x1\x3dxc-textWidth/2;x2\x3dxc+textWidth/2;_x1\x3d$(x1);_x2\x3d$(x2);bm0\x3d_x1;bm1\x3d_x2;x1$jscomp$0\x3d_y1;x2$jscomp$0\x3d_y2;y1\x3dbm0$jscomp$0;y2$jscomp$0\x3dbm1$jscomp$0;boundary$jscomp$0\x3dx1;isInside$jscomp$0\x3dx2;var y1$jscomp$0\x3dsizeFactor,y2$jscomp$1\x3dy2,boundary$jscomp$1\x3dboundary;if(!y1.outOfBounds(bm0,x1$jscomp$0,bm1,x2$jscomp$0)\x26\x26(isInside\x26\x26y2$jscomp$0?!y2$jscomp$0.getRange(bm0,x1$jscomp$0,bm1,x2$jscomp$0)\x26\x26boundary$jscomp$1[0]\x3c\x3dboundary$jscomp$0\x26\x26isInside$jscomp$0\x3c\x3d\nboundary$jscomp$1[2]\x26\x26boundary$jscomp$1[3]\x3c\x3dy1$jscomp$0\x26\x26y2$jscomp$1\x3c\x3dboundary$jscomp$1[5]:!y1.getRange(bm0,x1$jscomp$0,bm1,x2$jscomp$0)))return d.x\x3ddx?0\x3edx*insideFactor?x2:x1:xc,d.y\x3ddy?0\x3edy*insideFactor?y2:sizeFactor:yc,d.align\x3dAligns[dx*insideFactor+1],d.baseline\x3dBaselines[dy*insideFactor+1],bm0$jscomp$0.setRange(_x1,_y1,_x2,_y2),!0}return!1}}function labelLayout(texts,size,compare,offset,anchor,avoidMarks,avoidBaseMark,lineAnchor,markIndex,padding,method){if(!texts.length)return texts;var positions\x3d\nMath.max(offset.length,anchor.length);offset\x3dgetOffsets(offset,positions);anchor\x3dgetAnchors(anchor,positions);positions\x3dmarkType(texts[0].datum);const grouptype\x3d\x22group\x22\x3d\x3d\x3dpositions\x26\x26texts[0].datum.items[markIndex].marktype,isGroupArea\x3d\x22area\x22\x3d\x3d\x3dgrouptype,boundary\x3dmarkBoundary(positions,grouptype,lineAnchor,markIndex);size\x3dscaler(size[0],size[1],padding);padding\x3disGroupArea\x26\x26\x22naive\x22\x3d\x3d\x3dmethod;lineAnchor\x3dtexts.map(d\x3d\x3e({datum:d,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:boundary(d)}));\nif(!padding){compare\x26\x26lineAnchor.sort((a,b)\x3d\x3ecompare(a.datum,b.datum));var bitmaps\x3d!1;for(padding\x3d0;padding\x3canchor.length\x26\x26!bitmaps;++padding)bitmaps\x3d5\x3d\x3d\x3danchor[padding]||0\x3eoffset[padding];positions\x26\x26(avoidBaseMark||isGroupArea)\x26\x26(avoidMarks\x3d[texts.map(d\x3d\x3ed.datum)].concat(avoidMarks));bitmaps\x3davoidMarks.length?markBitmaps(size,avoidMarks,bitmaps,isGroupArea):baseBitmaps(size,avoidBaseMark\x26\x26lineAnchor)}const place\x3disGroupArea?placeAreaLabel[method](size,bitmaps,avoidBaseMark,markIndex):placeMarkLabel(size,\nbitmaps,anchor,offset);lineAnchor.forEach(d\x3d\x3ed.opacity\x3d+place(d));return lineAnchor}function getOffsets(_,count){const offsets\x3dnew Float64Array(count),n\x3d_.length;for(let i\x3d0;i\x3cn;++i)offsets[i]\x3d_[i]||0;for(_\x3dn;_\x3ccount;++_)offsets[_]\x3doffsets[n-1];return offsets}function getAnchors(_,count){const anchors\x3dnew Int8Array(count),n\x3d_.length;for(let i\x3d0;i\x3cn;++i)anchors[i]|\x3danchorCode[_[i]];for(_\x3dn;_\x3ccount;++_)anchors[_]\x3danchors[n-1];return anchors}function markType(item){return item\x26\x26item.mark\x26\x26item.mark.marktype}\nfunction markBoundary(marktype,grouptype,lineAnchor,markIndex){const xy\x3dd\x3d\x3e[d.x,d.x,d.x,d.y,d.y,d.y];return marktype?\x22line\x22\x3d\x3d\x3dmarktype||\x22area\x22\x3d\x3d\x3dmarktype?d\x3d\x3exy(d.datum):\x22line\x22\x3d\x3d\x3dgrouptype?d\x3d\x3e{d\x3dd.datum.items[markIndex].items;return xy(d.length?d[\x22start\x22\x3d\x3d\x3dlineAnchor?0:d.length-1]:{x:NaN,y:NaN})}:d\x3d\x3e{d\x3dd.datum.bounds;return[d.x1,(d.x1+d.x2)/2,d.x2,d.y1,(d.y1+d.y2)/2,d.y2]}:xy}function Label(params){vegaDataflow.Transform.call(this,null,params)}const RIGHT0\x3dnew Uint32Array(33),RIGHT1\x3dnew Uint32Array(33);\nRIGHT1[0]\x3d0;RIGHT0[0]\x3d~RIGHT1[0];for(let i\x3d1;32\x3e\x3di;++i)RIGHT1[i]\x3dRIGHT1[i-1]\x3c\x3c1|1,RIGHT0[i]\x3d~RIGHT1[i];const X_DIR\x3d[-1,-1,1,1],Y_DIR\x3d[-1,1,-1,1],Aligns\x3d[\x22right\x22,\x22center\x22,\x22left\x22],Baselines\x3d[\x22bottom\x22,\x22middle\x22,\x22top\x22],anchorCode\x3d{\x22top-left\x22:0,top:1,\x22top-right\x22:2,left:4,middle:5,right:6,\x22bottom-left\x22:8,bottom:9,\x22bottom-right\x22:10},placeAreaLabel\x3d{naive:function($,bitmaps,avoidBaseMark,markIndex){const width\x3d$.width,height\x3d$.height;return function(d){const items\x3dd.datum.datum.items[markIndex].items,n\x3ditems.length,\ntextHeight\x3dd.datum.fontSize,textWidth\x3dvegaScenegraph.textMetrics.width(d.datum,d.datum.text);let maxAreaWidth\x3d0;let x2,y1,y2,x,y;for(let i\x3d0;i\x3cn;++i){var x1\x3ditems[i].x;y1\x3ditems[i].y;x2\x3dvoid 0\x3d\x3d\x3ditems[i].x2?x1:items[i].x2;y2\x3dvoid 0\x3d\x3d\x3ditems[i].y2?y1:items[i].y2;x\x3d(x1+x2)/2;y\x3d(y1+y2)/2;x1\x3dMath.abs(x2-x1+y2-y1);x1\x3e\x3dmaxAreaWidth\x26\x26(maxAreaWidth\x3dx1,d.x\x3dx,d.y\x3dy)}x\x3dtextWidth/2;y\x3dtextHeight/2;x1\x3dd.x-x;x2\x3dd.x+x;y1\x3dd.y-y;y2\x3dd.y+y;d.align\x3d\x22center\x22;0\x3ex1\x26\x26x2\x3c\x3dwidth?d.align\x3d\x22left\x22:0\x3c\x3dx1\x26\x26width\x3cx2\x26\x26(d.align\x3d\x22right\x22);\nd.baseline\x3d\x22middle\x22;0\x3ey1\x26\x26y2\x3c\x3dheight?d.baseline\x3d\x22top\x22:0\x3c\x3dy1\x26\x26height\x3cy2\x26\x26(d.baseline\x3d\x22bottom\x22);return!0}},\x22reduced-search\x22:function($,bitmaps,avoidBaseMark,markIndex){function tryLabel(_x,_y,maxSize,textWidth,textHeight){_x\x3d$.invert(_x);_y\x3d$.invert(_y);let lo\x3dmaxSize,hi\x3dheight,mid;if(!outOfBounds(_x,_y,textWidth,textHeight,width,height)\x26\x26!collision($,_x,_y,textHeight,textWidth,lo,bm0,bm1)\x26\x26!collision($,_x,_y,textHeight,textWidth,textHeight,bm0,null)){for(;1\x3c\x3dhi-lo;)mid\x3d(lo+hi)/2,collision($,_x,_y,\ntextHeight,textWidth,mid,bm0,bm1)?hi\x3dmid:lo\x3dmid;if(lo\x3emaxSize)return[_x,_y,lo,!0]}}const width\x3d$.width,height\x3d$.height,bm0\x3dbitmaps[0],bm1\x3dbitmaps[1];return function(d){const items\x3dd.datum.datum.items[markIndex].items,n\x3ditems.length,textHeight\x3dd.datum.fontSize,textWidth\x3dvegaScenegraph.textMetrics.width(d.datum,d.datum.text);let maxSize\x3davoidBaseMark?textHeight:0,labelPlaced\x3d!1,labelPlaced2\x3d!1,maxAreaWidth\x3d0;let x2;let y2;let _y,_x1,_xMid,_x2,_y1,_yMid,_y2,result;for(let i\x3d0;i\x3cn;++i){var x1\x3ditems[i].x;\nvar y1\x3ditems[i].y;x2\x3dvoid 0\x3d\x3d\x3ditems[i].x2?x1:items[i].x2;y2\x3dvoid 0\x3d\x3d\x3ditems[i].y2?y1:items[i].y2;if(x1\x3ex2){var _x\x3dx1;x1\x3dx2;x2\x3d_x}y1\x3ey2\x26\x26(_x\x3dy1,y1\x3dy2,y2\x3d_x);_x1\x3d$(x1);_x2\x3d$(x2);_xMid\x3d~~((_x1+_x2)/2);_y1\x3d$(y1);_y2\x3d$(y2);_yMid\x3d~~((_y1+_y2)/2);for(_x\x3d_xMid;_x\x3e\x3d_x1;--_x)for(_y\x3d_yMid;_y\x3e\x3d_y1;--_y)(result\x3dtryLabel(_x,_y,maxSize,textWidth,textHeight))\x26\x26([d.x,d.y,maxSize,labelPlaced]\x3dresult);for(_x\x3d_xMid;_x\x3c\x3d_x2;++_x)for(_y\x3d_yMid;_y\x3c\x3d_y2;++_y)(result\x3dtryLabel(_x,_y,maxSize,textWidth,textHeight))\x26\x26([d.x,d.y,\nmaxSize,labelPlaced]\x3dresult);labelPlaced||avoidBaseMark||(_x\x3dMath.abs(x2-x1+y2-y1),x1\x3d(x1+x2)/2,y1\x3d(y1+y2)/2,_x\x3e\x3dmaxAreaWidth\x26\x26!outOfBounds(x1,y1,textWidth,textHeight,width,height)\x26\x26!collision($,x1,y1,textHeight,textWidth,textHeight,bm0,null)\x26\x26(maxAreaWidth\x3d_x,d.x\x3dx1,d.y\x3dy1,labelPlaced2\x3d!0))}return labelPlaced||labelPlaced2?(x1\x3dtextWidth/2,y1\x3dtextHeight/2,bm0.setRange($(d.x-x1),$(d.y-y1),$(d.x+x1),$(d.y+y1)),d.align\x3d\x22center\x22,d.baseline\x3d\x22middle\x22,!0):!1}},floodfill:function($,bitmaps,avoidBaseMark,\nmarkIndex){const width\x3d$.width,height\x3d$.height,bm0\x3dbitmaps[0],bm1\x3dbitmaps[1],bm2\x3d$.bitmap();return function(d){const items\x3dd.datum.datum.items[markIndex].items,n\x3ditems.length,textHeight\x3dd.datum.fontSize,textWidth\x3dvegaScenegraph.textMetrics.width(d.datum,d.datum.text),stack\x3d[];let maxSize\x3davoidBaseMark?textHeight:0,labelPlaced\x3d!1,labelPlaced2\x3d!1,maxAreaWidth\x3d0,x1,x2,y1,y2,x,y;var mid;for(let i\x3d0;i\x3cn;++i){x1\x3ditems[i].x;y1\x3ditems[i].y;x2\x3dvoid 0\x3d\x3d\x3ditems[i].x2?x1:items[i].x2;y2\x3dvoid 0\x3d\x3d\x3ditems[i].y2?y1:\nitems[i].y2;for(stack.push([$((x1+x2)/2),$((y1+y2)/2)]);stack.length;)if([_x,_y]\x3dstack.pop(),!(bm0.get(_x,_y)||bm1.get(_x,_y)||bm2.get(_x,_y))){bm2.set(_x,_y);for(mid\x3d0;4\x3emid;++mid)x\x3d_x+X_DIR[mid],y\x3d_y+Y_DIR[mid],bm2.outOfBounds(x,y,x,y)||stack.push([x,y]);x\x3d$.invert(_x);y\x3d$.invert(_y);var _x\x3dmaxSize;var _y\x3dheight;if(!outOfBounds(x,y,textWidth,textHeight,width,height)\x26\x26!collision($,x,y,textHeight,textWidth,_x,bm0,bm1)\x26\x26!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)){for(;1\x3c\x3d_y-_x;)mid\x3d\n(_x+_y)/2,collision($,x,y,textHeight,textWidth,mid,bm0,bm1)?_y\x3dmid:_x\x3dmid;_x\x3emaxSize\x26\x26(d.x\x3dx,d.y\x3dy,maxSize\x3d_x,labelPlaced\x3d!0)}}labelPlaced||avoidBaseMark||(_x\x3dMath.abs(x2-x1+y2-y1),x\x3d(x1+x2)/2,y\x3d(y1+y2)/2,_x\x3e\x3dmaxAreaWidth\x26\x26!outOfBounds(x,y,textWidth,textHeight,width,height)\x26\x26!collision($,x,y,textHeight,textWidth,textHeight,bm0,null)\x26\x26(maxAreaWidth\x3d_x,d.x\x3dx,d.y\x3dy,labelPlaced2\x3d!0))}return labelPlaced||labelPlaced2?(x\x3dtextWidth/2,y\x3dtextHeight/2,bm0.setRange($(d.x-x),$(d.y-y),$(d.x+x),$(d.y+y)),d.align\x3d\n\x22center\x22,d.baseline\x3d\x22middle\x22,!0):!1}}},Output\x3d[\x22x\x22,\x22y\x22,\x22opacity\x22,\x22align\x22,\x22baseline\x22],Anchors\x3d\x22top-left left bottom-left top bottom top-right right bottom-right\x22.split(\x22 \x22);Label.Definition\x3d{type:\x22Label\x22,metadata:{modifies:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2,required:!0},{name:\x22sort\x22,type:\x22compare\x22},{name:\x22anchor\x22,type:\x22string\x22,array:!0,default:Anchors},{name:\x22offset\x22,type:\x22number\x22,array:!0,default:[1]},{name:\x22padding\x22,type:\x22number\x22,default:0},{name:\x22lineAnchor\x22,type:\x22string\x22,\nvalues:[\x22start\x22,\x22end\x22],default:\x22end\x22},{name:\x22markIndex\x22,type:\x22number\x22,default:0},{name:\x22avoidBaseMark\x22,type:\x22boolean\x22,default:!0},{name:\x22avoidMarks\x22,type:\x22data\x22,array:!0},{name:\x22method\x22,type:\x22string\x22,default:\x22naive\x22},{name:\x22as\x22,type:\x22string\x22,array:!0,length:Output.length,default:Output}]};vegaUtil.inherits(Label,vegaDataflow.Transform,{transform(_,pulse){function modp(param){param\x3d_[param];return vegaUtil.isFunction(param)\x26\x26pulse.modified(param.fields)}const mod\x3d_.modified();if(mod||pulse.changed(pulse.ADD_REM)||\nmodp(\x22sort\x22)){_.size\x26\x262\x3d\x3d\x3d_.size.length||vegaUtil.error(\x22Size parameter should be specified as a [width, height] array.\x22);var as\x3d_.as||Output;labelLayout(pulse.materialize(pulse.SOURCE).source,_.size,_.sort,vegaUtil.array(_.offset||1),vegaUtil.array(_.anchor||Anchors),_.avoidMarks||[],!1\x3d\x3d\x3d_.avoidBaseMark?!1:!0,_.lineAnchor||\x22end\x22,_.markIndex||0,_.padding||0,_.method||\x22naive\x22).forEach(l\x3d\x3e{const t\x3dl.datum;t[as[0]]\x3dl.x;t[as[1]]\x3dl.y;t[as[2]]\x3dl.opacity;t[as[3]]\x3dl.align;t[as[4]]\x3dl.baseline});return pulse.reflow(mod).modifies(as)}}});\nexports.label\x3dLabel;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_regression$build$vega_regression.js", true , "shadow$provide.module$node_modules$vega_regression$build$vega_regression\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-statistics\x22,\n\x22vega-dataflow\x22,\x22vega-util\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega))})(this,function(exports,vegaStatistics,vegaDataflow,vegaUtil){function partition(data,groupby){var groups\x3d[],get\x3dfunction(f){return f(t)},n;if(null\x3d\x3dgroupby)groups.push(data);else{var map\x3d{};var i\x3d0;for(n\x3ddata.length;i\x3cn;++i){var t\x3ddata[i];var k\x3dgroupby.map(get);var g\x3dmap[k];g||(map[k]\x3dg\x3d[],g.dims\x3dk,groups.push(g));g.push(t)}}return groups}\nfunction Loess(params){vegaDataflow.Transform.call(this,null,params)}function Regression(params){vegaDataflow.Transform.call(this,null,params)}Loess.Definition\x3d{type:\x22Loess\x22,metadata:{generates:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22bandwidth\x22,type:\x22number\x22,\x22default\x22:.3},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Loess,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE|\npulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){pulse\x3dpulse.materialize(pulse.SOURCE).source;pulse\x3dpartition(pulse,_.groupby);const names\x3d(_.groupby||[]).map(vegaUtil.accessorName),m\x3dnames.length,as\x3d_.as||[vegaUtil.accessorName(_.x),vegaUtil.accessorName(_.y)],values\x3d[];pulse.forEach(g\x3d\x3e{vegaStatistics.regressionLoess(g,_.x,_.y,_.bandwidth||.3).forEach(p\x3d\x3e{const t\x3d{};for(let i\x3d0;i\x3cm;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dp[0];t[as[1]]\x3dp[1];values.push(vegaDataflow.ingest(t))})});this.value\x26\x26\n(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3dvalues}return out}});const Methods\x3d{linear:vegaStatistics.regressionLinear,log:vegaStatistics.regressionLog,exp:vegaStatistics.regressionExp,pow:vegaStatistics.regressionPow,quad:vegaStatistics.regressionQuad,poly:vegaStatistics.regressionPoly};Regression.Definition\x3d{type:\x22Regression\x22,metadata:{generates:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22groupby\x22,type:\x22field\x22,array:!0},{name:\x22method\x22,type:\x22string\x22,\n\x22default\x22:\x22linear\x22,values:Object.keys(Methods)},{name:\x22order\x22,type:\x22number\x22,\x22default\x22:3},{name:\x22extent\x22,type:\x22number\x22,array:!0,length:2},{name:\x22params\x22,type:\x22boolean\x22,\x22default\x22:!1},{name:\x22as\x22,type:\x22string\x22,array:!0}]};vegaUtil.inherits(Regression,vegaDataflow.Transform,{transform(_,pulse){const out\x3dpulse.fork(pulse.NO_SOURCE|pulse.NO_FIELDS);if(!this.value||pulse.changed()||_.modified()){var source\x3dpulse.materialize(pulse.SOURCE).source;source\x3dpartition(source,_.groupby);const names\x3d(_.groupby||[]).map(vegaUtil.accessorName),\nmethod\x3d_.method||\x22linear\x22,order\x3d_.order||3,dof\x3d\x22poly\x22\x3d\x3d\x3dmethod?order:\x22quad\x22\x3d\x3d\x3dmethod?2:1,as\x3d_.as||[vegaUtil.accessorName(_.x),vegaUtil.accessorName(_.y)],fit\x3dMethods[method],values\x3d[];let domain\x3d_.extent;vegaUtil.hasOwnProperty(Methods,method)||vegaUtil.error(\x22Invalid regression method: \x22+method);null!\x3ddomain\x26\x26\x22log\x22\x3d\x3d\x3dmethod\x26\x260\x3e\x3ddomain[0]\x26\x26(pulse.dataflow.warn(\x22Ignoring extent with values \\x3c\\x3d 0 for log regression.\x22),domain\x3dnull);source.forEach(g\x3d\x3e{if(g.length\x3c\x3ddof)pulse.dataflow.warn(\x22Skipping regression with more parameters than data points.\x22);\nelse{var model\x3dfit(g,_.x,_.y,order);if(_.params)values.push(vegaDataflow.ingest({keys:g.dims,coef:model.coef,rSquared:model.rSquared}));else{var dom\x3ddomain||vegaUtil.extent(g,_.x),add\x3dp\x3d\x3e{const t\x3d{};for(let i\x3d0;i\x3cnames.length;++i)t[names[i]]\x3dg.dims[i];t[as[0]]\x3dp[0];t[as[1]]\x3dp[1];values.push(vegaDataflow.ingest(t))};\x22linear\x22\x3d\x3d\x3dmethod?dom.forEach(x\x3d\x3eadd([x,model.predict(x)])):vegaStatistics.sampleCurve(model.predict,dom,25,200).forEach(add)}}});this.value\x26\x26(out.rem\x3dthis.value);this.value\x3dout.add\x3dout.source\x3d\nvalues}return out}});exports.loess\x3dLoess;exports.regression\x3dRegression;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$d3_delaunay$dist$d3_delaunay.js", true , "shadow$provide.module$node_modules$d3_delaunay$dist$d3_delaunay\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3dglobal||self,factory(global.d3\x3dglobal.d3||{}))})(this,function(exports){function pseudoAngle(dx,dy){dx/\x3dMath.abs(dx)+Math.abs(dy);return(0\x3cdy?3-dx:1+dx)/4}function dist(ax,ay,bx,by){ax-\x3dbx;\nay-\x3dby;return ax*ax+ay*ay}function orientIfSure(px,py,rx,ry,qx,qy){ry\x3d(ry-py)*(qx-px);px\x3d(rx-px)*(qy-py);return Math.abs(ry-px)\x3e\x3d3.3306690738754716E-16*Math.abs(ry+px)?ry-px:0}function orient(rx,ry,qx,qy,px,py){return 0\x3e(orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry))}function quicksort(ids,dists,left,right){if(20\x3e\x3dright-left)for(var i\x3dleft+1;i\x3c\x3dright;i++){for(var temp\x3dids[i],tempDist\x3ddists[temp],j\x3di-1;j\x3e\x3dleft\x26\x26dists[ids[j]]\x3etempDist;)ids[j+1]\x3dids[j--];\nids[j+1]\x3dtemp}else{i\x3dleft+1;temp\x3dright;swap(ids,left+right\x3e\x3e1,i);dists[ids[left]]\x3edists[ids[right]]\x26\x26swap(ids,left,right);dists[ids[i]]\x3edists[ids[right]]\x26\x26swap(ids,i,right);dists[ids[left]]\x3edists[ids[i]]\x26\x26swap(ids,left,i);tempDist\x3dids[i];for(j\x3ddists[tempDist];;){do i++;while(dists[ids[i]]\x3cj);do temp--;while(dists[ids[temp]]\x3ej);if(temp\x3ci)break;swap(ids,i,temp)}ids[left+1]\x3dids[temp];ids[temp]\x3dtempDist;right-i+1\x3e\x3dtemp-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,temp-1)):(quicksort(ids,\ndists,left,temp-1),quicksort(ids,dists,i,right))}}function swap(arr,i,j){const tmp\x3darr[i];arr[i]\x3darr[j];arr[j]\x3dtmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}function pointX(p){return p[0]}function pointY(p){return p[1]}function collinear$jscomp$0(d){const {triangles,coords}\x3dd;for(d\x3d0;d\x3ctriangles.length;d+\x3d3){const a\x3d2*triangles[d],b\x3d2*triangles[d+1],c\x3d2*triangles[d+2];if(1E-10\x3c(coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+\n1]))return!1}return!0}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}function*flatIterable(points,fx,fy,that){let i\x3d0;for(const p of points)yield fx.call(that,p,i,points),yield fy.call(that,p,i,points),++i}const EPSILON\x3dMath.pow(2,-52),EDGE_STACK\x3dnew Uint32Array(512);class Delaunator{static from(points,getX\x3ddefaultGetX,getY\x3ddefaultGetY){const n\x3dpoints.length,coords\x3dnew Float64Array(2*n);for(let i\x3d0;i\x3cn;i++){const p\x3dpoints[i];coords[2*i]\x3dgetX(p);coords[2*i+1]\x3dgetY(p)}return new Delaunator(coords)}constructor(coords){const n\x3d\ncoords.length\x3e\x3e1;if(0\x3cn\x26\x26\x22number\x22!\x3d\x3dtypeof coords[0])throw Error(\x22Expected coords to contain numbers.\x22);this.coords\x3dcoords;coords\x3dMath.max(2*n-5,0);this._triangles\x3dnew Uint32Array(3*coords);this._halfedges\x3dnew Int32Array(3*coords);this._hashSize\x3dMath.ceil(Math.sqrt(n));this._hullPrev\x3dnew Uint32Array(n);this._hullNext\x3dnew Uint32Array(n);this._hullTri\x3dnew Uint32Array(n);this._hullHash\x3d(new Int32Array(this._hashSize)).fill(-1);this._ids\x3dnew Uint32Array(n);this._dists\x3dnew Float64Array(n);this.update()}update(){const {coords,\n_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}\x3dthis;var n\x3dcoords.length\x3e\x3e1,minX\x3dInfinity,minY\x3dInfinity,maxX\x3d-Infinity,maxY\x3d-Infinity;for(var i$jscomp$0\x3d0;i$jscomp$0\x3cn;i$jscomp$0++){var x\x3dcoords[2*i$jscomp$0];var JSCompiler_object_inline_x_6640\x3dcoords[2*i$jscomp$0+1];x\x3cminX\x26\x26(minX\x3dx);JSCompiler_object_inline_x_6640\x3cminY\x26\x26(minY\x3dJSCompiler_object_inline_x_6640);x\x3emaxX\x26\x26(maxX\x3dx);JSCompiler_object_inline_x_6640\x3emaxY\x26\x26(maxY\x3dJSCompiler_object_inline_x_6640);this._ids[i$jscomp$0]\x3d\ni$jscomp$0}maxX\x3d(minX+maxX)/2;minY\x3d(minY+maxY)/2;minX\x3dInfinity;for(maxY\x3d0;maxY\x3cn;maxY++)if(i$jscomp$0\x3ddist(maxX,minY,coords[2*maxY],coords[2*maxY+1]),i$jscomp$0\x3cminX){var i0\x3dmaxY;minX\x3di$jscomp$0}minY\x3dcoords[2*i0];maxY\x3dcoords[2*i0+1];minX\x3dInfinity;for(maxX\x3d0;maxX\x3cn;maxX++)if(maxX!\x3d\x3di0\x26\x26(i$jscomp$0\x3ddist(minY,maxY,coords[2*maxX],coords[2*maxX+1]),i$jscomp$0\x3cminX\x26\x260\x3ci$jscomp$0)){var i1\x3dmaxX;minX\x3di$jscomp$0}minX\x3dcoords[2*i1];maxX\x3dcoords[2*i1+1];JSCompiler_object_inline_x_6640\x3dInfinity;for(i$jscomp$0\x3d0;i$jscomp$0\x3c\nn;i$jscomp$0++)if(i$jscomp$0!\x3d\x3di0\x26\x26i$jscomp$0!\x3d\x3di1){x\x3dminX-minY;var dy\x3dmaxX-maxY;var JSCompiler_object_inline_y_6641\x3dcoords[2*i$jscomp$0]-minY;var ey\x3dcoords[2*i$jscomp$0+1]-maxY,bl\x3dx*x+dy*dy,cl\x3dJSCompiler_object_inline_y_6641*JSCompiler_object_inline_y_6641+ey*ey,d\x3d.5/(x*ey-dy*JSCompiler_object_inline_y_6641);dy\x3d(ey*bl-dy*cl)*d;x\x3d(x*cl-JSCompiler_object_inline_y_6641*bl)*d;x\x3ddy*dy+x*x;if(x\x3cJSCompiler_object_inline_x_6640){var i2\x3di$jscomp$0;JSCompiler_object_inline_x_6640\x3dx}}i$jscomp$0\x3dcoords[2*i2];\nx\x3dcoords[2*i2+1];if(Infinity\x3d\x3d\x3dJSCompiler_object_inline_x_6640){for(i0\x3d0;i0\x3cn;i0++)this._dists[i0]\x3dcoords[2*i0]-coords[0]||coords[2*i0+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);i0\x3dnew Uint32Array(n);i1\x3d0;for(let i\x3d0,d0\x3d-Infinity;i\x3cn;i++)i2\x3dthis._ids[i],this._dists[i2]\x3ed0\x26\x26(i0[i1++]\x3di2,d0\x3dthis._dists[i2]);this.hull\x3di0.subarray(0,i1);this.triangles\x3dnew Uint32Array(0);this.halfedges\x3dnew Uint32Array(0)}else{orient(minY,maxY,minX,maxX,i$jscomp$0,x)\x26\x26(JSCompiler_object_inline_x_6640\x3di1,JSCompiler_object_inline_y_6641\x3d\nminX,bl\x3dmaxX,i1\x3di2,minX\x3di$jscomp$0,maxX\x3dx,i2\x3dJSCompiler_object_inline_x_6640,i$jscomp$0\x3dJSCompiler_object_inline_y_6641,x\x3dbl);JSCompiler_object_inline_y_6641\x3dminX-minY;JSCompiler_object_inline_x_6640\x3dmaxX-maxY;bl\x3di$jscomp$0-minY;ey\x3dx-maxY;cl\x3dJSCompiler_object_inline_y_6641*JSCompiler_object_inline_y_6641+JSCompiler_object_inline_x_6640*JSCompiler_object_inline_x_6640;d\x3dbl*bl+ey*ey;dy\x3d.5/(JSCompiler_object_inline_y_6641*ey-JSCompiler_object_inline_x_6640*bl);JSCompiler_object_inline_x_6640\x3dminY+(ey*\ncl-JSCompiler_object_inline_x_6640*d)*dy;JSCompiler_object_inline_y_6641\x3dmaxY+(JSCompiler_object_inline_y_6641*d-bl*cl)*dy;this._cx\x3dJSCompiler_object_inline_x_6640;this._cy\x3dJSCompiler_object_inline_y_6641;for(bl\x3d0;bl\x3cn;bl++)this._dists[bl]\x3ddist(coords[2*bl],coords[2*bl+1],JSCompiler_object_inline_x_6640,JSCompiler_object_inline_y_6641);quicksort(this._ids,this._dists,0,n-1);this._hullStart\x3di0;n\x3d3;hullNext[i0]\x3dhullPrev[i2]\x3di1;hullNext[i1]\x3dhullPrev[i0]\x3di2;hullNext[i2]\x3dhullPrev[i1]\x3di0;hullTri[i0]\x3d0;\nhullTri[i1]\x3d1;hullTri[i2]\x3d2;hullHash.fill(-1);hullHash[this._hashKey(minY,maxY)]\x3di0;hullHash[this._hashKey(minX,maxX)]\x3di1;hullHash[this._hashKey(i$jscomp$0,x)]\x3di2;this.trianglesLen\x3d0;this._addTriangle(i0,i1,i2,-1,-1,-1);for(let k\x3d0,xp,yp;k\x3cthis._ids.length;k++){minY\x3dthis._ids[k];maxY\x3dcoords[2*minY];minX\x3dcoords[2*minY+1];if(0\x3ck\x26\x26Math.abs(maxY-xp)\x3c\x3dEPSILON\x26\x26Math.abs(minX-yp)\x3c\x3dEPSILON)continue;xp\x3dmaxY;yp\x3dminX;if(minY\x3d\x3d\x3di0||minY\x3d\x3d\x3di1||minY\x3d\x3d\x3di2)continue;maxX\x3d0;for(let j\x3d0,key\x3dthis._hashKey(maxY,minX);j\x3c\nthis._hashSize\x26\x26(maxX\x3dhullHash[(key+j)%this._hashSize],-1\x3d\x3d\x3dmaxX||maxX\x3d\x3d\x3dhullNext[maxX]);j++);i$jscomp$0\x3dmaxX\x3dhullPrev[maxX];let q;for(;q\x3dhullNext[i$jscomp$0],!orient(maxY,minX,coords[2*i$jscomp$0],coords[2*i$jscomp$0+1],coords[2*q],coords[2*q+1]);)if(i$jscomp$0\x3dq,i$jscomp$0\x3d\x3d\x3dmaxX){i$jscomp$0\x3d-1;break}if(-1!\x3d\x3di$jscomp$0){x\x3dthis._addTriangle(i$jscomp$0,minY,hullNext[i$jscomp$0],-1,-1,hullTri[i$jscomp$0]);hullTri[minY]\x3dthis._legalize(x+2);hullTri[i$jscomp$0]\x3dx;n++;for(JSCompiler_object_inline_x_6640\x3d\nhullNext[i$jscomp$0];q\x3dhullNext[JSCompiler_object_inline_x_6640],orient(maxY,minX,coords[2*JSCompiler_object_inline_x_6640],coords[2*JSCompiler_object_inline_x_6640+1],coords[2*q],coords[2*q+1]);)x\x3dthis._addTriangle(JSCompiler_object_inline_x_6640,minY,q,hullTri[minY],-1,hullTri[JSCompiler_object_inline_x_6640]),hullTri[minY]\x3dthis._legalize(x+2),hullNext[JSCompiler_object_inline_x_6640]\x3dJSCompiler_object_inline_x_6640,n--,JSCompiler_object_inline_x_6640\x3dq;if(i$jscomp$0\x3d\x3d\x3dmaxX)for(;q\x3dhullPrev[i$jscomp$0],\norient(maxY,minX,coords[2*q],coords[2*q+1],coords[2*i$jscomp$0],coords[2*i$jscomp$0+1]);)x\x3dthis._addTriangle(q,minY,i$jscomp$0,-1,hullTri[i$jscomp$0],hullTri[q]),this._legalize(x+2),hullTri[q]\x3dx,hullNext[i$jscomp$0]\x3di$jscomp$0,n--,i$jscomp$0\x3dq;this._hullStart\x3dhullPrev[minY]\x3di$jscomp$0;hullNext[i$jscomp$0]\x3dhullPrev[JSCompiler_object_inline_x_6640]\x3dminY;hullNext[minY]\x3dJSCompiler_object_inline_x_6640;hullHash[this._hashKey(maxY,minX)]\x3dminY;hullHash[this._hashKey(coords[2*i$jscomp$0],coords[2*i$jscomp$0+\n1])]\x3di$jscomp$0}}this.hull\x3dnew Uint32Array(n);for(let i\x3d0,e\x3dthis._hullStart;i\x3cn;i++)this.hull[i]\x3de,e\x3dhullNext[e];this.triangles\x3dthis._triangles.subarray(0,this.trianglesLen);this.halfedges\x3dthis._halfedges.subarray(0,this.trianglesLen)}}_hashKey(x,y){return Math.floor(pseudoAngle(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const {_triangles:triangles,_halfedges:halfedges,coords}\x3dthis;let i\x3d0;for(var ar;;){const b\x3dhalfedges[a];var a0\x3da-a%3;ar\x3da0+(a+2)%3;if(-1\x3d\x3d\x3db){if(0\x3d\x3d\x3di)break;\na\x3dEDGE_STACK[--i];continue}const b0\x3db-b%3,bl\x3db0+(b+2)%3;var p0\x3dtriangles[ar],pr\x3dtriangles[a],pl\x3dtriangles[a0+(a+1)%3];a0\x3dtriangles[bl];{var px\x3dcoords[2*a0],py\x3dcoords[2*a0+1];var JSCompiler_inline_result\x3dcoords[2*p0]-px;const dy\x3dcoords[2*p0+1]-py,ex\x3dcoords[2*pr]-px;pr\x3dcoords[2*pr+1]-py;px\x3dcoords[2*pl]-px;py\x3dcoords[2*pl+1]-py;pl\x3dex*ex+pr*pr;const cp\x3dpx*px+py*py;JSCompiler_inline_result\x3d0\x3eJSCompiler_inline_result*(pr*cp-pl*py)-dy*(ex*cp-pl*px)+(JSCompiler_inline_result*JSCompiler_inline_result+dy*dy)*\n(ex*py-pr*px)}if(JSCompiler_inline_result){triangles[a]\x3da0;triangles[b]\x3dp0;p0\x3dhalfedges[bl];if(-1\x3d\x3d\x3dp0){a0\x3dthis._hullStart;do{if(this._hullTri[a0]\x3d\x3d\x3dbl){this._hullTri[a0]\x3da;break}a0\x3dthis._hullPrev[a0]}while(a0!\x3d\x3dthis._hullStart)}this._link(a,p0);this._link(b,halfedges[ar]);this._link(ar,bl);ar\x3db0+(b+1)%3;i\x3cEDGE_STACK.length\x26\x26(EDGE_STACK[i++]\x3dar)}else{if(0\x3d\x3d\x3di)break;a\x3dEDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]\x3db;-1!\x3d\x3db\x26\x26(this._halfedges[b]\x3da)}_addTriangle(i0,i1,i2,a,b,c){const t\x3dthis.trianglesLen;\nthis._triangles[t]\x3di0;this._triangles[t+1]\x3di1;this._triangles[t+2]\x3di2;this._link(t,a);this._link(t+1,b);this._link(t+2,c);this.trianglesLen+\x3d3;return t}}class Path{constructor(){this._x0\x3dthis._y0\x3dthis._x1\x3dthis._y1\x3dnull;this._\x3d\x22\x22}moveTo(x,y){this._+\x3d`M${this._x0\x3dthis._x1\x3d+x},${this._y0\x3dthis._y1\x3d+y}`}closePath(){null!\x3d\x3dthis._x1\x26\x26(this._x1\x3dthis._x0,this._y1\x3dthis._y0,this._+\x3d\x22Z\x22)}lineTo(x,y){this._+\x3d`L${this._x1\x3d+x},${this._y1\x3d+y}`}arc(x,y,r){x\x3d+x;y\x3d+y;r\x3d+r;const x0\x3dx+r,y0\x3dy;if(0\x3er)throw Error(\x22negative radius\x22);\nif(null\x3d\x3d\x3dthis._x1)this._+\x3d`M${x0},${y0}`;else if(1E-6\x3cMath.abs(this._x1-x0)||1E-6\x3cMath.abs(this._y1-y0))this._+\x3d\x22L\x22+x0+\x22,\x22+y0;r\x26\x26(this._+\x3d`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1\x3dx0},${this._y1\x3dy0}`)}rect(x,y,w,h){this._+\x3d`M${this._x0\x3dthis._x1\x3d+x},${this._y0\x3dthis._y1\x3d+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._\x3d[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?\nthis._:null}}class Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]\x3d[0,0,960,500]){if(!((xmax\x3d+xmax)\x3e\x3d(xmin\x3d+xmin)\x26\x26(ymax\x3d+ymax)\x3e\x3d(ymin\x3d+ymin)))throw Error(\x22invalid bounds\x22);this.delaunay\x3ddelaunay;this._circumcenters\x3dnew Float64Array(2*delaunay.points.length);this.vectors\x3dnew Float64Array(2*delaunay.points.length);this.xmax\x3dxmax;this.xmin\x3dxmin;this.ymax\x3dymax;this.ymin\x3dymin;this._init()}update(){this.delaunay.update();this._init();return this}_init(){const {delaunay:{points,hull,triangles},vectors}\x3d\nthis;var circumcenters\x3dthis.circumcenters\x3dthis._circumcenters.subarray(0,triangles.length/3*2);for(let i\x3d0,j\x3d0,n\x3dtriangles.length,x,y;i\x3cn;i+\x3d3,j+\x3d2){var t1\x3d2*triangles[i],t2\x3d2*triangles[i+1],t3\x3d2*triangles[i+2],x1\x3dpoints[t1];t1\x3dpoints[t1+1];var x3\x3dpoints[t3],y3\x3dpoints[t3+1];t3\x3dpoints[t2]-x1;t2\x3dpoints[t2+1]-t1;var ex\x3dx3-x1;const ey\x3dy3-t1,bl\x3dt3*t3+t2*t2,cl\x3dex*ex+ey*ey,ab\x3d2*(t3*ey-t2*ex);ab?1E-8\x3eMath.abs(ab)?(x\x3d(x1+x3)/2,y\x3d(t1+y3)/2):(x3\x3d1/ab,x\x3dx1+(ey*bl-t2*cl)*x3,y\x3dt1+(t3*cl-ex*bl)*x3):(x\x3d(x1+x3)/2-\n1E8*ey,y\x3d(t1+y3)/2+1E8*ex);circumcenters[j]\x3dx;circumcenters[j+1]\x3dy}circumcenters\x3dhull[hull.length-1];t1\x3d4*circumcenters;t3\x3dpoints[2*circumcenters];t2\x3dpoints[2*circumcenters+1];vectors.fill(0);for(ex\x3d0;ex\x3chull.length;++ex)circumcenters\x3dhull[ex],x1\x3dt1,x3\x3dt3,y3\x3dt2,t1\x3d4*circumcenters,t3\x3dpoints[2*circumcenters],t2\x3dpoints[2*circumcenters+1],vectors[x1+2]\x3dvectors[t1]\x3dy3-t2,vectors[x1+3]\x3dvectors[t1+1]\x3dt3-x3}render(context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,{delaunay:{halfedges,inedges,hull},\ncircumcenters,vectors}\x3dthis;if(1\x3e\x3dhull.length)return null;for(let i\x3d0,n\x3dhalfedges.length;i\x3cn;++i){var j\x3dhalfedges[i];if(!(j\x3ci)){var ti\x3d2*Math.floor(i/3);j\x3d2*Math.floor(j/3);this._renderSegment(circumcenters[ti],circumcenters[ti+1],circumcenters[j],circumcenters[j+1],context)}}ti\x3dhull[hull.length-1];for(j\x3d0;j\x3chull.length;++j){var h0\x3dti;ti\x3dhull[j];var t\x3d2*Math.floor(inedges[ti]/3);const x\x3dcircumcenters[t];t\x3dcircumcenters[t+1];h0*\x3d4;(h0\x3dthis._project(x,t,vectors[h0+2],vectors[h0+3]))\x26\x26this._renderSegment(x,\nt,h0[0],h0[1],context)}return buffer\x26\x26buffer.value()}renderBounds(context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0;context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return buffer\x26\x26buffer.value()}renderCell(i$jscomp$0,context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0;i$jscomp$0\x3dthis._clip(i$jscomp$0);if(null!\x3d\x3di$jscomp$0\x26\x26i$jscomp$0.length){context.moveTo(i$jscomp$0[0],i$jscomp$0[1]);for(var n\x3di$jscomp$0.length;i$jscomp$0[0]\x3d\x3d\x3di$jscomp$0[n-2]\x26\x26i$jscomp$0[1]\x3d\x3d\x3d\ni$jscomp$0[n-1]\x26\x261\x3cn;)n-\x3d2;for(let i\x3d2;i\x3cn;i+\x3d2)i$jscomp$0[i]\x3d\x3d\x3di$jscomp$0[i-2]\x26\x26i$jscomp$0[i+1]\x3d\x3d\x3di$jscomp$0[i-1]||context.lineTo(i$jscomp$0[i],i$jscomp$0[i+1]);context.closePath();return buffer\x26\x26buffer.value()}}*cellPolygons(){var {delaunay:{points}}\x3dthis;for(let i\x3d0,n\x3dpoints.length/2;i\x3cn;++i)if(points\x3dthis.cellPolygon(i))points.index\x3di,yield points}cellPolygon(i){const polygon\x3dnew Polygon;this.renderCell(i,polygon);return polygon.value()}_renderSegment(x0,y0,x1,y1,context){const c0\x3dthis._regioncode(x0,\ny0),c1\x3dthis._regioncode(x1,y1);if(0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)context.moveTo(x0,y0),context.lineTo(x1,y1);else if(x0\x3dthis._clipSegment(x0,y0,x1,y1,c0,c1))context.moveTo(x0[0],x0[1]),context.lineTo(x0[2],x0[3])}contains(i,x,y){return(x\x3d+x,x!\x3d\x3dx)||(y\x3d+y,y!\x3d\x3dy)?!1:this.delaunay._step(i,x,y)\x3d\x3d\x3di}*neighbors(i){const ci\x3dthis._clip(i);if(ci)for(const j of this.delaunay.neighbors(i))if(i\x3dthis._clip(j))a:for(let ai\x3d0,li\x3dci.length;ai\x3cli;ai+\x3d2)for(let aj\x3d0,lj\x3di.length;aj\x3clj;aj+\x3d2)if(ci[ai]\x3d\x3di[aj]\x26\x26ci[ai+1]\x3d\x3di[aj+1]\x26\x26ci[(ai+\n2)%li]\x3d\x3di[(aj+lj-2)%lj]\x26\x26ci[(ai+3)%li]\x3d\x3di[(aj+lj-1)%lj]){yield j;break a}}_cell(i){const {circumcenters,delaunay:{inedges,halfedges,triangles}}\x3dthis,e0\x3dinedges[i];if(-1\x3d\x3d\x3de0)return null;const points\x3d[];let e\x3de0;do{const t\x3dMath.floor(e/3);points.push(circumcenters[2*t],circumcenters[2*t+1]);e\x3d2\x3d\x3d\x3de%3?e-2:e+1;if(triangles[e]!\x3d\x3di)break;e\x3dhalfedges[e]}while(e!\x3d\x3de0\x26\x26-1!\x3d\x3de);return points}_clip(i){if(0\x3d\x3d\x3di\x26\x261\x3d\x3d\x3dthis.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,\nthis.xmin,this.ymin];const points\x3dthis._cell(i);if(null\x3d\x3d\x3dpoints)return null;const {vectors:V}\x3dthis,v\x3d4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n\x3dpoints.length;let P\x3dnull;let x1\x3dpoints[n-2],y1\x3dpoints[n-1];let c1\x3dthis._regioncode(x1,y1),e1;for(let j\x3d0;j\x3cn;j+\x3d2){var x0\x3dx1;var y0\x3dy1;x1\x3dpoints[j];y1\x3dpoints[j+1];var c0\x3dc1;c1\x3dthis._regioncode(x1,y1);if(0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)e1\x3d0,P?P.push(x1,y1):P\x3d[x1,y1];else{let sx1,sy1;\nif(0\x3d\x3d\x3dc0){if(null\x3d\x3d\x3d(x0\x3dthis._clipSegment(x0,y0,x1,y1,c0,c1)))continue;[y0,c0,sx1,sy1]\x3dx0}else{if(null\x3d\x3d\x3d(x0\x3dthis._clipSegment(x1,y1,x0,y0,c1,c0)))continue;[sx1,sy1,y0,c0]\x3dx0;x0\x3de1;e1\x3dthis._edgecode(y0,c0);x0\x26\x26e1\x26\x26this._edge(i,x0,e1,P,P.length);P?P.push(y0,c0):P\x3d[y0,c0]}x0\x3de1;e1\x3dthis._edgecode(sx1,sy1);x0\x26\x26e1\x26\x26this._edge(i,x0,e1,P,P.length);P?P.push(sx1,sy1):P\x3d[sx1,sy1]}}if(P)x0\x3de1,e1\x3dthis._edgecode(P[0],P[1]),x0\x26\x26e1\x26\x26this._edge(i,x0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,\n(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P}_clipSegment(x0,y0,x1,y1,c0,c1){for(;;){if(0\x3d\x3d\x3dc0\x26\x260\x3d\x3d\x3dc1)return[x0,y0,x1,y1];if(c0\x26c1)return null;var x\x3dvoid 0;let y;x\x3dc0||c1;x\x268?(x\x3dx0+(x1-x0)*(this.ymax-y0)/(y1-y0),y\x3dthis.ymax):x\x264?(x\x3dx0+(x1-x0)*(this.ymin-y0)/(y1-y0),y\x3dthis.ymin):x\x262?(y\x3dy0+(y1-y0)*(this.xmax-x0)/(x1-x0),x\x3dthis.xmax):(y\x3dy0+(y1-y0)*(this.xmin-x0)/(x1-x0),x\x3dthis.xmin);c0?(x0\x3dx,y0\x3dy,c0\x3dthis._regioncode(x0,y0)):\n(x1\x3dx,y1\x3dy,c1\x3dthis._regioncode(x1,y1))}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){points\x3dArray.from(points);let p;(p\x3dthis._project(points[0],points[1],vx0,vy0))\x26\x26points.unshift(p[0],p[1]);(p\x3dthis._project(points[points.length-2],points[points.length-1],vxn,vyn))\x26\x26points.push(p[0],p[1]);if(points\x3dthis._clipFinite(i,points))for(let j\x3d0,n\x3dpoints.length,c0,c1\x3dthis._edgecode(points[n-2],points[n-1]);j\x3cn;j+\x3d2)c0\x3dc1,c1\x3dthis._edgecode(points[j],points[j+1]),c0\x26\x26c1\x26\x26(j\x3dthis._edge(i,c0,c1,points,j),n\x3dpoints.length);\nelse this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)\x26\x26(points\x3d[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return points}_edge(i,e0,e1,P,j){for(;e0!\x3d\x3de1;){let x,y;switch(e0){case 5:e0\x3d4;continue;case 4:e0\x3d6;x\x3dthis.xmax;y\x3dthis.ymin;break;case 6:e0\x3d2;continue;case 2:e0\x3d10;x\x3dthis.xmax;y\x3dthis.ymax;break;case 10:e0\x3d8;continue;case 8:e0\x3d9;x\x3dthis.xmin;y\x3dthis.ymax;break;case 9:e0\x3d1;continue;case 1:e0\x3d5,x\x3dthis.xmin,y\x3dthis.ymin}P[j]\x3d\x3d\x3dx\x26\x26P[j+1]\x3d\x3d\x3dy||!this.contains(i,\nx,y)||(P.splice(j,0,x,y),j+\x3d2)}if(4\x3cP.length)for(i\x3d0;i\x3cP.length;i+\x3d2)if(e0\x3d(i+2)%P.length,e1\x3d(i+4)%P.length,P[i]\x3d\x3d\x3dP[e0]\x26\x26P[e0]\x3d\x3d\x3dP[e1]||P[i+1]\x3d\x3d\x3dP[e0+1]\x26\x26P[e0+1]\x3d\x3d\x3dP[e1+1])P.splice(e0,2),i-\x3d2;return j}_project(x0,y0,vx,vy){let t\x3dInfinity,c,x,y;if(0\x3evy){if(y0\x3c\x3dthis.ymin)return null;(c\x3d(this.ymin-y0)/vy)\x3ct\x26\x26(y\x3dthis.ymin,x\x3dx0+(t\x3dc)*vx)}else if(0\x3cvy){if(y0\x3e\x3dthis.ymax)return null;(c\x3d(this.ymax-y0)/vy)\x3ct\x26\x26(y\x3dthis.ymax,x\x3dx0+(t\x3dc)*vx)}if(0\x3cvx){if(x0\x3e\x3dthis.xmax)return null;(c\x3d(this.xmax-x0)/vx)\x3ct\x26\x26(x\x3dthis.xmax,\ny\x3dy0+c*vy)}else if(0\x3evx){if(x0\x3c\x3dthis.xmin)return null;(c\x3d(this.xmin-x0)/vx)\x3ct\x26\x26(x\x3dthis.xmin,y\x3dy0+c*vy)}return[x,y]}_edgecode(x,y){return(x\x3d\x3d\x3dthis.xmin?1:x\x3d\x3d\x3dthis.xmax?2:0)|(y\x3d\x3d\x3dthis.ymin?4:y\x3d\x3d\x3dthis.ymax?8:0)}_regioncode(x,y){return(x\x3cthis.xmin?1:x\x3ethis.xmax?2:0)|(y\x3cthis.ymin?4:y\x3ethis.ymax?8:0)}}const tau\x3d2*Math.PI,pow\x3dMath.pow;class Delaunay{static from(points,fx\x3dpointX,fy\x3dpointY,that){if(\x22length\x22in points){{const n\x3dpoints.length,array\x3dnew Float64Array(2*n);for(let i\x3d0;i\x3cn;++i){const p\x3dpoints[i];\narray[2*i]\x3dfx.call(that,p,i,points);array[2*i+1]\x3dfy.call(that,p,i,points)}points\x3darray}}else points\x3dFloat64Array.from(flatIterable(points,fx,fy,that));return new Delaunay(points)}constructor(points){this._delaunator\x3dnew Delaunator(points);this.inedges\x3dnew Int32Array(points.length/2);this._hullIndex\x3dnew Int32Array(points.length/2);this.points\x3dthis._delaunator.coords;this._init()}update(){this._delaunator.update();this._init();return this}_init(){var d\x3dthis._delaunator;const points\x3dthis.points;if(d.hull\x26\x26\n2\x3cd.hull.length\x26\x26collinear$jscomp$0(d)){this.collinear\x3dInt32Array.from({length:points.length/2},(_,i)\x3d\x3ei).sort((i,j)\x3d\x3epoints[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]);d\x3dthis.collinear[0];var f\x3dthis.collinear[this.collinear.length-1];d\x3d[points[2*d],points[2*d+1],points[2*f],points[2*f+1]];d\x3d1E-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let i\x3d0,n\x3dpoints.length/2;i\x3cn;++i)f\x3djitter(points[2*i],points[2*i+1],d),points[2*i]\x3df[0],points[2*i+1]\x3df[1];this._delaunator\x3dnew Delaunator(points)}else delete this.collinear;\nd\x3dthis.halfedges\x3dthis._delaunator.halfedges;f\x3dthis.hull\x3dthis._delaunator.hull;const triangles\x3dthis.triangles\x3dthis._delaunator.triangles,inedges\x3dthis.inedges.fill(-1),hullIndex\x3dthis._hullIndex.fill(-1);for(let e\x3d0,n\x3dd.length;e\x3cn;++e){const p\x3dtriangles[2\x3d\x3d\x3de%3?e-2:e+1];if(-1\x3d\x3d\x3dd[e]||-1\x3d\x3d\x3dinedges[p])inedges[p]\x3de}for(let i\x3d0,n\x3df.length;i\x3cn;++i)hullIndex[f[i]]\x3di;2\x3e\x3df.length\x26\x260\x3cf.length\x26\x26(this.triangles\x3d(new Int32Array(3)).fill(-1),this.halfedges\x3d(new Int32Array(3)).fill(-1),this.triangles[0]\x3df[0],this.triangles[1]\x3d\nf[1],this.triangles[2]\x3df[1],inedges[f[0]]\x3d1,2\x3d\x3d\x3df.length\x26\x26(inedges[f[1]]\x3d0))}voronoi(bounds){return new Voronoi(this,bounds)}*neighbors(i){const {inedges,hull,_hullIndex,halfedges,triangles,collinear}\x3dthis;if(collinear){var l\x3dcollinear.indexOf(i);0\x3cl\x26\x26(yield collinear[l-1]);l\x3ccollinear.length-1\x26\x26(yield collinear[l+1])}else{var e0\x3dinedges[i];if(-1!\x3d\x3de0){var e\x3de0;do{yield(l\x3dtriangles[e]);e\x3d2\x3d\x3d\x3de%3?e-2:e+1;if(triangles[e]!\x3d\x3di)break;e\x3dhalfedges[e];if(-1\x3d\x3d\x3de){i\x3dhull[(_hullIndex[i]+1)%hull.length];i!\x3d\x3d\nl\x26\x26(yield i);break}}while(e!\x3d\x3de0)}}}find(x,y,i\x3d0){if((x\x3d+x,x!\x3d\x3dx)||(y\x3d+y,y!\x3d\x3dy))return-1;const i0\x3di;let c;for(;0\x3c\x3d(c\x3dthis._step(i,x,y))\x26\x26c!\x3d\x3di\x26\x26c!\x3d\x3di0;)i\x3dc;return c}_step(i,x,y){const {inedges,hull,_hullIndex,halfedges,triangles,points}\x3dthis;if(-1\x3d\x3d\x3dinedges[i]||!points.length)return(i+1)%(points.length\x3e\x3e1);let c\x3di,dc\x3dpow(x-points[2*i],2)+pow(y-points[2*i+1],2);const e0\x3dinedges[i];let e\x3de0;do{let t\x3dtriangles[e];const dt\x3dpow(x-points[2*t],2)+pow(y-points[2*t+1],2);dt\x3cdc\x26\x26(dc\x3ddt,c\x3dt);e\x3d2\x3d\x3d\x3de%3?e-2:e+\n1;if(triangles[e]!\x3d\x3di)break;e\x3dhalfedges[e];if(-1\x3d\x3d\x3de){e\x3dhull[(_hullIndex[i]+1)%hull.length];if(e!\x3d\x3dt\x26\x26pow(x-points[2*e],2)+pow(y-points[2*e+1],2)\x3cdc)return e;break}}while(e!\x3d\x3de0);return c}render(context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,{points,halfedges,triangles}\x3dthis;for(let i\x3d0,n\x3dhalfedges.length;i\x3cn;++i){var j\x3dhalfedges[i];if(j\x3ci)continue;const ti\x3d2*triangles[i];j\x3d2*triangles[j];context.moveTo(points[ti],points[ti+1]);context.lineTo(points[j],points[j+1])}this.renderHull(context);\nreturn buffer\x26\x26buffer.value()}renderPoints(context,r\x3d2){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,{points}\x3dthis;for(let i\x3d0,n\x3dpoints.length;i\x3cn;i+\x3d2){const x\x3dpoints[i],y\x3dpoints[i+1];context.moveTo(x+r,y);context.arc(x,y,r,0,tau)}return buffer\x26\x26buffer.value()}renderHull(context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,{hull,points}\x3dthis;var h$jscomp$0\x3d2*hull[0];const n\x3dhull.length;context.moveTo(points[h$jscomp$0],points[h$jscomp$0+1]);for(h$jscomp$0\x3d1;h$jscomp$0\x3cn;++h$jscomp$0){const h\x3d\n2*hull[h$jscomp$0];context.lineTo(points[h],points[h+1])}context.closePath();return buffer\x26\x26buffer.value()}hullPolygon(){const polygon\x3dnew Polygon;this.renderHull(polygon);return polygon.value()}renderTriangle(i,context){const buffer\x3dnull\x3d\x3dcontext?context\x3dnew Path:void 0,{points,triangles}\x3dthis,t0\x3d2*triangles[i*\x3d3],t1\x3d2*triangles[i+1];i\x3d2*triangles[i+2];context.moveTo(points[t0],points[t0+1]);context.lineTo(points[t1],points[t1+1]);context.lineTo(points[i],points[i+1]);context.closePath();return buffer\x26\x26\nbuffer.value()}*trianglePolygons(){const {triangles}\x3dthis;for(let i\x3d0,n\x3dtriangles.length/3;i\x3cn;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon\x3dnew Polygon;this.renderTriangle(i,polygon);return polygon.value()}}exports.Delaunay\x3dDelaunay;exports.Voronoi\x3dVoronoi;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_voronoi$build$vega_voronoi.js", true , "shadow$provide.module$node_modules$vega_voronoi$build$vega_voronoi\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$d3_delaunay$dist$d3_delaunay\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-dataflow\x22,\x22vega-util\x22,\n\x22d3-delaunay\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.d3))})(this,function(exports,vegaDataflow,vegaUtil,d3Delaunay){function Voronoi(params){vegaDataflow.Transform.call(this,null,params)}Voronoi.Definition\x3d{type:\x22Voronoi\x22,metadata:{modifies:!0},params:[{name:\x22x\x22,type:\x22field\x22,required:!0},{name:\x22y\x22,type:\x22field\x22,required:!0},{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},\n{name:\x22extent\x22,type:\x22array\x22,array:!0,length:2,\x22default\x22:[[-1E5,-1E5],[1E5,1E5]],content:{type:\x22number\x22,array:!0,length:2}},{name:\x22as\x22,type:\x22string\x22,\x22default\x22:\x22path\x22}]};const defaultExtent\x3d[-1E5,-1E5,1E5,1E5];vegaUtil.inherits(Voronoi,vegaDataflow.Transform,{transform(_,pulse){const as\x3d_.as||\x22path\x22,data\x3dpulse.source;if(!data||!data.length)return pulse;var s\x3d_.size;s\x3ds?[0,0,s[0],s[1]]:(s\x3d_.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:defaultExtent;s\x3dthis.value\x3dd3Delaunay.Delaunay.from(data,_.x,_.y).voronoi(s);\nfor(let i\x3d0,n$jscomp$0\x3ddata.length;i\x3cn$jscomp$0;++i){var polygon\x3ds.cellPolygon(i),JSCompiler_temp_const\x3ddata[i];if(polygon){{const x\x3dpolygon[0][0],y\x3dpolygon[0][1];let n\x3dpolygon.length-1;for(;polygon[n][0]\x3d\x3d\x3dx\x26\x26polygon[n][1]\x3d\x3d\x3dy;--n);polygon\x3d\x22M\x22+polygon.slice(0,n+1).join(\x22L\x22)+\x22Z\x22}}else polygon\x3dnull;JSCompiler_temp_const[as]\x3dpolygon}return pulse.reflow(_.modified()).modifies(as)}});exports.voronoi\x3dVoronoi;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_wordcloud$build$vega_wordcloud.js", true , "shadow$provide.module$node_modules$vega_wordcloud$build$vega_wordcloud\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_canvas$build$vega_canvas_min\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-canvas vega-dataflow vega-util vega-scale vega-statistics\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.vega,global.vega,global.vega,global.vega,global.vega))})(this,function(exports,vegaCanvas,vegaDataflow,vegaUtil,vegaScale,vegaStatistics){function cloud(){function getContext(canvas){canvas.width\x3dcanvas.height\x3d1;var ratio\x3dMath.sqrt(canvas.getContext(\x222d\x22).getImageData(0,\n0,1,1).data.length\x3e\x3e2);canvas.width\x3d2048/ratio;canvas.height\x3d2048/ratio;canvas\x3dcanvas.getContext(\x222d\x22);canvas.fillStyle\x3dcanvas.strokeStyle\x3d\x22red\x22;canvas.textAlign\x3d\x22center\x22;return{context:canvas,ratio}}function place(board,tag,bounds){for(var startX\x3dtag.x,startY\x3dtag.y,maxDelta\x3dMath.sqrt(size[0]*size[0]+size[1]*size[1]),s\x3dspiral(size),dt\x3d.5\x3erandom()?1:-1,t\x3d-dt,dxdy,dx;dxdy\x3ds(t+\x3ddt);){dx\x3d~~dxdy[0];dxdy\x3d~~dxdy[1];if(Math.min(Math.abs(dx),Math.abs(dxdy))\x3e\x3dmaxDelta)break;tag.x\x3dstartX+dx;tag.y\x3dstartY+dxdy;\nif(!(0\x3etag.x+tag.x0||0\x3etag.y+tag.y0||tag.x+tag.x1\x3esize[0]||tag.y+tag.y1\x3esize[1])){if(!(dx\x3d!bounds)){a:{dx\x3dsize[0];dx\x3e\x3e\x3d5;dxdy\x3dtag.sprite;var w\x3dtag.width\x3e\x3e5;var last\x3dtag.x-(w\x3c\x3c4);for(var sx\x3dlast\x26127,msx\x3d32-sx,h\x3dtag.y1-tag.y0,x\x3d(tag.y+tag.y0)*dx+(last\x3e\x3e5),j\x3d0;j\x3ch;j++){for(var i\x3dlast\x3d0;i\x3c\x3dw;i++)if((last\x3c\x3cmsx|(i\x3cw?(last\x3ddxdy[j*w+i])\x3e\x3e\x3esx:0))\x26board[x+i]){dx\x3d!0;break a}x+\x3ddx}dx\x3d!1}dx\x3d!dx}if(dx\x26\x26(!bounds||tag.x+tag.x1\x3ebounds[0].x\x26\x26tag.x+tag.x0\x3cbounds[1].x\x26\x26tag.y+tag.y1\x3ebounds[0].y\x26\x26tag.y+tag.y0\x3cbounds[1].y)){bounds\x3d\ntag.sprite;startX\x3dtag.width\x3e\x3e5;startY\x3dsize[0]\x3e\x3e5;t\x3dtag.x-(startX\x3c\x3c4);maxDelta\x3dt\x26127;s\x3d32-maxDelta;dt\x3dtag.y1-tag.y0;t\x3d(tag.y+tag.y0)*startY+(t\x3e\x3e5);for(dxdy\x3d0;dxdy\x3cdt;dxdy++){for(w\x3ddx\x3d0;w\x3c\x3dstartX;w++)board[t+w]\x3dboard[t+w]|dx\x3c\x3cs|(w\x3cstartX?(dx\x3dbounds[dxdy*startX+w])\x3e\x3e\x3emaxDelta:0);t+\x3dstartY}tag.sprite\x3dnull;return!0}}}return!1}var size\x3d[256,256],text,font,fontSize,fontStyle,fontWeight,rotate,padding,spiral\x3darchimedeanSpiral,words\x3d[],random\x3dMath.random,cloud\x3d{layout:function(){for(var contextAndRatio\x3dgetContext(vegaCanvas.canvas()),\nboard\x3dzeroArray((size[0]\x3e\x3e5)*size[1]),bounds\x3dnull,n\x3dwords.length,i\x3d-1,tags\x3d[],data\x3dwords.map(d\x3d\x3e({text:text(d),font:font(d),style:fontStyle(d),weight:fontWeight(d),rotate:rotate(d),size:~~(fontSize(d)+1E-14),padding:padding(d),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:d})).sort((a,b)\x3d\x3eb.size-a.size);++i\x3cn;){var d$jscomp$0\x3ddata[i];d$jscomp$0.x\x3dsize[0]*(random()+.5)\x3e\x3e1;d$jscomp$0.y\x3dsize[1]*(random()+.5)\x3e\x3e1;cloudSprite(contextAndRatio,d$jscomp$0,data,i);d$jscomp$0.hasText\x26\x26place(board,\nd$jscomp$0,bounds)\x26\x26(tags.push(d$jscomp$0),bounds?cloudBounds(bounds,d$jscomp$0):bounds\x3d[{x:d$jscomp$0.x+d$jscomp$0.x0,y:d$jscomp$0.y+d$jscomp$0.y0},{x:d$jscomp$0.x+d$jscomp$0.x1,y:d$jscomp$0.y+d$jscomp$0.y1}],d$jscomp$0.x-\x3dsize[0]\x3e\x3e1,d$jscomp$0.y-\x3dsize[1]\x3e\x3e1)}return tags},words:function(_){return arguments.length?(words\x3d_,cloud):words},size:function(_){return arguments.length?(size\x3d[+_[0],+_[1]],cloud):size},font:function(_){return arguments.length?(font\x3dfunctor(_),cloud):font},fontStyle:function(_){return arguments.length?\n(fontStyle\x3dfunctor(_),cloud):fontStyle},fontWeight:function(_){return arguments.length?(fontWeight\x3dfunctor(_),cloud):fontWeight},rotate:function(_){return arguments.length?(rotate\x3dfunctor(_),cloud):rotate},text:function(_){return arguments.length?(text\x3dfunctor(_),cloud):text},spiral:function(_){return arguments.length?(spiral\x3dspirals[_]||_,cloud):spiral},fontSize:function(_){return arguments.length?(fontSize\x3dfunctor(_),cloud):fontSize},padding:function(_){return arguments.length?(padding\x3dfunctor(_),\ncloud):padding},random:function(_){return arguments.length?(random\x3d_,cloud):random}};return cloud}function cloudSprite(contextAndRatio,d,data,di){if(!d.sprite){var c\x3dcontextAndRatio.context,ratio\x3dcontextAndRatio.ratio;c.clearRect(0,0,2048/ratio,2048/ratio);var y\x3dcontextAndRatio\x3d0,maxh\x3d0,n\x3ddata.length;for(--di;++di\x3cn;){d\x3ddata[di];c.save();c.font\x3dd.style+\x22 \x22+d.weight+\x22 \x22+~~((d.size+1)/ratio)+\x22px \x22+d.font;var w\x3dc.measureText(d.text+\x22m\x22).width*ratio;var h\x3dd.size\x3c\x3c1;if(d.rotate){var sr\x3dMath.sin(d.rotate*\ncloudRadians),cr\x3dMath.cos(d.rotate*cloudRadians),wcr\x3dw*cr,wsr\x3dw*sr;cr*\x3dh;w\x3dh*sr;w\x3dMath.max(Math.abs(wcr+w),Math.abs(wcr-w))+31\x3e\x3e5\x3c\x3c5;h\x3d~~Math.max(Math.abs(wsr+cr),Math.abs(wsr-cr))}else w\x3dw+31\x3e\x3e5\x3c\x3c5;h\x3emaxh\x26\x26(maxh\x3dh);2048\x3c\x3dcontextAndRatio+w\x26\x26(contextAndRatio\x3d0,y+\x3dmaxh,maxh\x3d0);if(2048\x3c\x3dy+h)break;c.translate((contextAndRatio+(w\x3e\x3e1))/ratio,(y+(h\x3e\x3e1))/ratio);d.rotate\x26\x26c.rotate(d.rotate*cloudRadians);c.fillText(d.text,0,0);d.padding\x26\x26(c.lineWidth\x3d2*d.padding,c.strokeText(d.text,0,0));c.restore();d.width\x3d\nw;d.height\x3dh;d.xoff\x3dcontextAndRatio;d.yoff\x3dy;d.x1\x3dw\x3e\x3e1;d.y1\x3dh\x3e\x3e1;d.x0\x3d-d.x1;d.y0\x3d-d.y1;d.hasText\x3d!0;contextAndRatio+\x3dw}n\x3dc.getImageData(0,0,2048/ratio,2048/ratio).data;for(wcr\x3d[];0\x3c\x3d--di;)if(d\x3ddata[di],d.hasText){w\x3dd.width;c\x3dw\x3e\x3e5;h\x3dd.y1-d.y0;for(ratio\x3d0;ratio\x3ch*c;ratio++)wcr[ratio]\x3d0;contextAndRatio\x3dd.xoff;if(null\x3d\x3dcontextAndRatio)break;y\x3dd.yoff;wsr\x3d0;sr\x3d-1;for(maxh\x3d0;maxh\x3ch;maxh++){for(ratio\x3d0;ratio\x3cw;ratio++)cr\x3dn[2048*(y+maxh)+(contextAndRatio+ratio)\x3c\x3c2]?1\x3c\x3c31-ratio%32:0,wcr[c*maxh+(ratio\x3e\x3e5)]|\x3d\ncr,wsr|\x3dcr;wsr?sr\x3dmaxh:(d.y0++,h--,maxh--,y++)}d.y1\x3dd.y0+sr;d.sprite\x3dwcr.slice(0,(d.y1-d.y0)*c)}}}function cloudBounds(bounds,d){var b0\x3dbounds[0];bounds\x3dbounds[1];d.x+d.x0\x3cb0.x\x26\x26(b0.x\x3dd.x+d.x0);d.y+d.y0\x3cb0.y\x26\x26(b0.y\x3dd.y+d.y0);d.x+d.x1\x3ebounds.x\x26\x26(bounds.x\x3dd.x+d.x1);d.y+d.y1\x3ebounds.y\x26\x26(bounds.y\x3dd.y+d.y1)}function archimedeanSpiral(size){var e\x3dsize[0]/size[1];return function(t){return[e*(t*\x3d.1)*Math.cos(t),t*Math.sin(t)]}}function zeroArray(n){for(var a\x3d[],i\x3d-1;++i\x3cn;)a[i]\x3d0;return a}function functor(d){return\x22function\x22\x3d\x3d\x3d\ntypeof d?d:function(){return d}}function Wordcloud(params){vegaDataflow.Transform.call(this,cloud(),params)}var cloudRadians\x3dMath.PI/180,spirals\x3d{archimedean:archimedeanSpiral,rectangular:function(size){var dx\x3d4*size[0]/size[1],x\x3d0,y\x3d0;return function(t){var sign\x3d0\x3et?-1:1;switch(Math.sqrt(1+4*sign*t)-sign\x263){case 0:x+\x3ddx;break;case 1:y+\x3d4;break;case 2:x-\x3ddx;break;default:y-\x3d4}return[x,y]}}};const Output\x3d\x22x y font fontSize fontStyle fontWeight angle\x22.split(\x22 \x22),Params\x3d\x22text font rotate fontSize fontStyle fontWeight\x22.split(\x22 \x22);\nWordcloud.Definition\x3d{type:\x22Wordcloud\x22,metadata:{modifies:!0},params:[{name:\x22size\x22,type:\x22number\x22,array:!0,length:2},{name:\x22font\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22sans-serif\x22},{name:\x22fontStyle\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22normal\x22},{name:\x22fontWeight\x22,type:\x22string\x22,expr:!0,\x22default\x22:\x22normal\x22},{name:\x22fontSize\x22,type:\x22number\x22,expr:!0,\x22default\x22:14},{name:\x22fontSizeRange\x22,type:\x22number\x22,array:\x22nullable\x22,\x22default\x22:[10,50]},{name:\x22rotate\x22,type:\x22number\x22,expr:!0,\x22default\x22:0},{name:\x22text\x22,type:\x22field\x22},{name:\x22spiral\x22,\ntype:\x22string\x22,values:[\x22archimedean\x22,\x22rectangular\x22]},{name:\x22padding\x22,type:\x22number\x22,expr:!0},{name:\x22as\x22,type:\x22string\x22,array:!0,length:7,\x22default\x22:Output}]};vegaUtil.inherits(Wordcloud,vegaDataflow.Transform,{transform(_,pulse){function modp(param){param\x3d_[param];return vegaUtil.isFunction(param)\x26\x26pulse.modified(param.fields)}!_.size||_.size[0]\x26\x26_.size[1]||vegaUtil.error(\x22Wordcloud size dimensions must be non-zero.\x22);const mod\x3d_.modified();if(mod||pulse.changed(pulse.ADD_REM)||Params.some(modp)){var data\x3d\npulse.materialize(pulse.SOURCE).source,layout\x3dthis.value,as\x3d_.as||Output,fontSize\x3d_.fontSize||14,range;vegaUtil.isFunction(fontSize)?range\x3d_.fontSizeRange:fontSize\x3dvegaUtil.constant(fontSize);if(range){const fsize\x3dfontSize,sizeScale\x3dvegaScale.scale(\x22sqrt\x22)().domain(vegaUtil.extent(data,fsize)).range(range);fontSize\x3dx\x3d\x3esizeScale(fsize(x))}data.forEach(t\x3d\x3e{t[as[0]]\x3dNaN;t[as[1]]\x3dNaN;t[as[3]]\x3d0});data\x3dlayout.words(data).text(_.text).size(_.size||[500,500]).padding(_.padding||1).spiral(_.spiral||\x22archimedean\x22).rotate(_.rotate||\n0).font(_.font||\x22sans-serif\x22).fontStyle(_.fontStyle||\x22normal\x22).fontWeight(_.fontWeight||\x22normal\x22).fontSize(fontSize).random(vegaStatistics.random).layout();fontSize\x3dlayout.size();layout\x3dfontSize[0]\x3e\x3e1;fontSize\x3dfontSize[1]\x3e\x3e1;range\x3ddata.length;for(let i\x3d0,w,t;i\x3crange;++i)w\x3ddata[i],t\x3dw.datum,t[as[0]]\x3dw.x+layout,t[as[1]]\x3dw.y+fontSize,t[as[2]]\x3dw.font,t[as[3]]\x3dw.size,t[as[4]]\x3dw.style,t[as[5]]\x3dw.weight,t[as[6]]\x3dw.rotate;return pulse.reflow(mod).modifies(as)}}});exports.wordcloud\x3dWordcloud;Object.defineProperty(exports,\n\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_crossfilter$build$vega_crossfilter.js", true , "shadow$provide.module$node_modules$vega_crossfilter$build$vega_crossfilter\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22d3-array\x22,\x22vega-dataflow\x22,\n\x22vega-util\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory((global.vega\x3dglobal.vega||{},global.vega.transforms\x3d{}),global.d3,global.vega,global.vega))})(this,function(exports,d3Array,vegaDataflow,vegaUtil){function Bitmaps(){let width\x3d8,data\x3d[],seen\x3dnew Uint32Array(0),curr\x3darray$jscomp$0(0,width),prev\x3darray$jscomp$0(0,width);return{data:()\x3d\x3edata,seen:()\x3d\x3e{var JSCompiler_inline_result\x3dseen;var length\x3ddata.length;JSCompiler_inline_result.length\x3e\x3dlength||(length\x3dnew JSCompiler_inline_result.constructor(length),\nlength.set(JSCompiler_inline_result),JSCompiler_inline_result\x3dlength);return seen\x3dJSCompiler_inline_result},add(array){for(let i\x3d0,j\x3ddata.length,n\x3darray.length,t;i\x3cn;++i)t\x3darray[i],t._index\x3dj++,data.push(t)},remove(num,map){const n\x3ddata.length;num\x3dArray(n-num);const reindex\x3ddata;let t,i,j;for(i\x3d0;!map[i]\x26\x26i\x3cn;++i)num[i]\x3ddata[i],reindex[i]\x3di;for(j\x3di;i\x3cn;++i)t\x3ddata[i],map[i]?reindex[i]\x3d-1:(reindex[i]\x3dj,curr[j]\x3dcurr[i],prev[j]\x3dprev[i],num[j]\x3dt,t._index\x3dj++),curr[i]\x3d0;data\x3dnum;return reindex},size:()\x3d\x3e\ndata.length,curr:()\x3d\x3ecurr,prev:()\x3d\x3eprev,reset:k\x3d\x3eprev[k]\x3dcurr[k],all:()\x3d\x3e257\x3ewidth?255:65537\x3ewidth?65535:4294967295,set(k,one){curr[k]|\x3done},clear(k,one){curr[k]\x26\x3d~one},resize(n,m){if(n\x3ecurr.length||m\x3ewidth)width\x3dMath.max(m,width),curr\x3darray$jscomp$0(n,width,curr),prev\x3darray$jscomp$0(n,width)}}}function array$jscomp$0(n,m,array){n\x3d(257\x3em?array8:65537\x3em?array16:array32)(n);array\x26\x26n.set(array);return n}function Dimension(index,i$jscomp$0,query){const bit\x3d1\x3c\x3ci$jscomp$0;return{one:bit,zero:~bit,range:query.slice(),\nbisect:index.bisect,index:index.index,size:index.size,onAdd(added,curr){var range\x3dthis.bisect(this.range,added.value);added\x3dadded.index;const lo\x3drange[0];range\x3drange[1];const n1\x3dadded.length;let i;for(i\x3d0;i\x3clo;++i)curr[added[i]]|\x3dbit;for(i\x3drange;i\x3cn1;++i)curr[added[i]]|\x3dbit;return this}}}function SortedIndex(){let index$jscomp$0\x3dnew Uint32Array(0),value$jscomp$0\x3d[],size\x3d0;return{insert:function(key,data,base){if(!data.length)return[];const n0\x3dsize,n1\x3ddata.length,addi\x3dnew Uint32Array(n1);let addv\x3d\nArray(n1);var i$jscomp$0;for(i$jscomp$0\x3d0;i$jscomp$0\x3cn1;++i$jscomp$0)addv[i$jscomp$0]\x3dkey(data[i$jscomp$0]),addi[i$jscomp$0]\x3di$jscomp$0;addv\x3dsort(addv,addi);if(n0){key\x3dvalue$jscomp$0;data\x3dindex$jscomp$0;value$jscomp$0\x3dArray(n0+n1);index$jscomp$0\x3dnew Uint32Array(n0+n1);{i$jscomp$0\x3daddv;var value\x3dvalue$jscomp$0,index\x3dindex$jscomp$0;let i0\x3d0,i1\x3d0,i;for(i\x3d0;i0\x3cn0\x26\x26i1\x3cn1;++i)key[i0]\x3ci$jscomp$0[i1]?(value[i]\x3dkey[i0],index[i]\x3ddata[i0++]):(value[i]\x3di$jscomp$0[i1],index[i]\x3daddi[i1++]+base);for(;i0\x3cn0;++i0,\n++i)value[i]\x3dkey[i0],index[i]\x3ddata[i0];for(;i1\x3cn1;++i1,++i)value[i]\x3di$jscomp$0[i1],index[i]\x3daddi[i1]+base}}else{if(0\x3cbase)for(i$jscomp$0\x3d0;i$jscomp$0\x3cn1;++i$jscomp$0)addi[i$jscomp$0]+\x3dbase;value$jscomp$0\x3daddv;index$jscomp$0\x3daddi}size\x3dn0+n1;return{index:addi,value:addv}},remove:function(num,map){const n\x3dsize;let idx,i,j;for(i\x3d0;!map[index$jscomp$0[i]]\x26\x26i\x3cn;++i);for(j\x3di;i\x3cn;++i)map[idx\x3dindex$jscomp$0[i]]||(index$jscomp$0[j]\x3didx,value$jscomp$0[j]\x3dvalue$jscomp$0[i],++j);size\x3dn-num},bisect:function(range,\narray){let n;array?n\x3darray.length:(array\x3dvalue$jscomp$0,n\x3dsize);return[d3Array.bisectLeft(array,range[0],0,n),d3Array.bisectRight(array,range[1],0,n)]},reindex:function(map){for(let i\x3d0,n\x3dsize;i\x3cn;++i)index$jscomp$0[i]\x3dmap[index$jscomp$0[i]]},index:()\x3d\x3eindex$jscomp$0,size:()\x3d\x3esize}}function sort(values,index){values.sort.call(index,(a,b)\x3d\x3e{a\x3dvalues[a];b\x3dvalues[b];return a\x3cb?-1:a\x3eb?1:0});return d3Array.permute(values,index)}function CrossFilter(params){vegaDataflow.Transform.call(this,Bitmaps(),params);\nthis._dims\x3dthis._indices\x3dnull}function ResolveFilter(params){vegaDataflow.Transform.call(this,null,params)}const array8\x3dn\x3d\x3enew Uint8Array(n),array16\x3dn\x3d\x3enew Uint16Array(n),array32\x3dn\x3d\x3enew Uint32Array(n);CrossFilter.Definition\x3d{type:\x22CrossFilter\x22,metadata:{},params:[{name:\x22fields\x22,type:\x22field\x22,array:!0,required:!0},{name:\x22query\x22,type:\x22array\x22,array:!0,required:!0,content:{type:\x22number\x22,array:!0,length:2}}]};vegaUtil.inherits(CrossFilter,vegaDataflow.Transform,{transform(_,pulse){return this._dims?_.modified(\x22fields\x22)||\n_.fields.some(f\x3d\x3epulse.modified(f.fields))?this.reinit(_,pulse):this.eval(_,pulse):this.init(_,pulse)},init(_,pulse){const fields\x3d_.fields,query\x3d_.query,indices\x3dthis._indices\x3d{},dims\x3dthis._dims\x3d[],m\x3dquery.length;let i\x3d0;for(var key;i\x3cm;++i)key\x3dfields[i].fname,key\x3dindices[key]||(indices[key]\x3dSortedIndex()),dims.push(Dimension(key,i,query[i]));return this.eval(_,pulse)},reinit(_,pulse){const output\x3dpulse.materialize().fork(),fields\x3d_.fields,query\x3d_.query,indices\x3dthis._indices,dims\x3dthis._dims,bits\x3dthis.value,\ncurr\x3dbits.curr(),prev\x3dbits.prev(),all\x3dbits.all(),out\x3doutput.rem\x3doutput.add,mod\x3doutput.mod,m\x3dquery.length,adds\x3d{};let index;var key;let remMap,modMap,i,f;prev.set(curr);pulse.rem.length\x26\x26(remMap\x3dthis.remove(_,pulse,output));pulse.add.length\x26\x26bits.add(pulse.add);if(pulse.mod.length){modMap\x3d{};var add\x3dpulse.mod;i\x3d0;for(key\x3dadd.length;i\x3ckey;++i)modMap[add[i]._index]\x3d1}for(i\x3d0;i\x3cm;++i)if(f\x3dfields[i],!dims[i]||_.modified(\x22fields\x22,i)||pulse.modified(f.fields))key\x3df.fname,(add\x3dadds[key])||(indices[key]\x3dindex\x3d\nSortedIndex(),adds[key]\x3dadd\x3dindex.insert(f,pulse.source,0)),dims[i]\x3dDimension(index,i,query[i]).onAdd(add,curr);i\x3d0;for(key\x3dbits.data().length;i\x3ckey;++i)remMap[i]||(prev[i]!\x3d\x3dcurr[i]?out.push(i):modMap[i]\x26\x26curr[i]!\x3d\x3dall\x26\x26mod.push(i));bits.mask\x3d(1\x3c\x3cm)-1;return output},eval(_,pulse){const output\x3dpulse.materialize().fork(),m\x3dthis._dims.length;let mask\x3d0;pulse.rem.length\x26\x26(this.remove(_,pulse,output),mask|\x3d(1\x3c\x3cm)-1);_.modified(\x22query\x22)\x26\x26!_.modified(\x22fields\x22)\x26\x26(mask|\x3dthis.update(_,pulse,output));pulse.add.length\x26\x26\n(this.insert(_,pulse,output),mask|\x3d(1\x3c\x3cm)-1);pulse.mod.length\x26\x26(this.modify(pulse,output),mask|\x3d(1\x3c\x3cm)-1);this.value.mask\x3dmask;return output},insert(_,pulse,output){pulse\x3dpulse.add;var bits\x3dthis.value;const dims\x3dthis._dims,indices\x3dthis._indices;_\x3d_.fields;const adds\x3d{};output\x3doutput.add;const n\x3dbits.size()+pulse.length,m\x3ddims.length;let k\x3dbits.size();bits.resize(n,m);bits.add(pulse);const curr\x3dbits.curr(),prev\x3dbits.prev(),all\x3dbits.all();for(bits\x3d0;bits\x3cm;++bits){var key\x3d_[bits].fname;key\x3dadds[key]||\n(adds[key]\x3dindices[key].insert(_[bits],pulse,k));dims[bits].onAdd(key,curr)}for(;k\x3cn;++k)prev[k]\x3dall,curr[k]!\x3d\x3dall\x26\x26output.push(k)},modify(pulse,output){output\x3doutput.mod;var bits\x3dthis.value;const curr\x3dbits.curr();bits\x3dbits.all();pulse\x3dpulse.mod;let i,n,k;i\x3d0;for(n\x3dpulse.length;i\x3cn;++i)k\x3dpulse[i]._index,curr[k]!\x3d\x3dbits\x26\x26output.push(k)},remove(_,pulse,output){_\x3dthis._indices;var bits\x3dthis.value;const curr\x3dbits.curr(),prev\x3dbits.prev();bits\x3dbits.all();const map\x3d{};output\x3doutput.rem;const tuples\x3dpulse.rem;\nlet i,n,k,f;i\x3d0;for(n\x3dtuples.length;i\x3cn;++i)k\x3dtuples[i]._index,map[k]\x3d1,prev[k]\x3df\x3dcurr[k],curr[k]\x3dbits,f!\x3d\x3dbits\x26\x26output.push(k);for(k in _)_[k].remove(n,map);this.reindex(pulse,n,map);return map},reindex(pulse,num,map){const indices\x3dthis._indices,bits\x3dthis.value;pulse.runAfter(()\x3d\x3e{const indexMap\x3dbits.remove(num,map);for(const key in indices)indices[key].reindex(indexMap)})},update(_,pulse,output){const dims\x3dthis._dims,query\x3d_.query;pulse\x3dpulse.stamp;const m\x3ddims.length;let mask\x3d0,i,q;for(q\x3doutput.filters\x3d\n0;q\x3cm;++q)_.modified(\x22query\x22,q)\x26\x26(i\x3dq,++mask);if(1\x3d\x3d\x3dmask)mask\x3ddims[i].one,this.incrementOne(dims[i],query[i],output.add,output.rem);else for(mask\x3dq\x3d0;q\x3cm;++q)_.modified(\x22query\x22,q)\x26\x26(mask|\x3ddims[q].one,this.incrementAll(dims[q],query[q],pulse,output.add),output.rem\x3doutput.add);return mask},incrementAll(dim,query,stamp,out){var bits\x3dthis.value;const seen\x3dbits.seen(),curr\x3dbits.curr();bits\x3dbits.prev();const index\x3ddim.index();var old\x3ddim.bisect(dim.range),range\x3ddim.bisect(query);const lo1\x3drange[0];range\x3d\nrange[1];const lo0\x3dold[0];old\x3dold[1];const one\x3ddim.one;let i,j,k;if(lo1\x3clo0)for(i\x3dlo1,j\x3dMath.min(lo0,range);i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;else if(lo1\x3elo0)for(i\x3dlo0,j\x3dMath.min(lo1,old);i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;if(range\x3eold)for(i\x3dMath.max(lo1,old),j\x3drange;i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;else if(range\x3cold)for(i\x3d\nMath.max(lo0,range),j\x3dold;i\x3cj;++i)k\x3dindex[i],seen[k]!\x3d\x3dstamp\x26\x26(bits[k]\x3dcurr[k],seen[k]\x3dstamp,out.push(k)),curr[k]^\x3done;dim.range\x3dquery.slice()},incrementOne(dim,query,add,rem){const curr\x3dthis.value.curr(),index\x3ddim.index();var old\x3ddim.bisect(dim.range),range\x3ddim.bisect(query);const lo1\x3drange[0];range\x3drange[1];const lo0\x3dold[0];old\x3dold[1];const one\x3ddim.one;let i,j,k;if(lo1\x3clo0)for(i\x3dlo1,j\x3dMath.min(lo0,range);i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,add.push(k);else if(lo1\x3elo0)for(i\x3dlo0,j\x3dMath.min(lo1,old);i\x3c\nj;++i)k\x3dindex[i],curr[k]^\x3done,rem.push(k);if(range\x3eold)for(i\x3dMath.max(lo1,old),j\x3drange;i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,add.push(k);else if(range\x3cold)for(i\x3dMath.max(lo0,range),j\x3dold;i\x3cj;++i)k\x3dindex[i],curr[k]^\x3done,rem.push(k);dim.range\x3dquery.slice()}});ResolveFilter.Definition\x3d{type:\x22ResolveFilter\x22,metadata:{},params:[{name:\x22ignore\x22,type:\x22number\x22,required:!0,description:\x22A bit mask indicating which filters to ignore.\x22},{name:\x22filter\x22,type:\x22object\x22,required:!0,description:\x22Per-tuple filter bitmaps from a CrossFilter transform.\x22}]};\nvegaUtil.inherits(ResolveFilter,vegaDataflow.Transform,{transform(_,pulse){const ignore\x3d~(_.ignore||0);_\x3d_.filter;const mask\x3d_.mask;if(0\x3d\x3d\x3d(mask\x26ignore))return pulse.StopPropagation;pulse\x3dpulse.fork(pulse.ALL);const data\x3d_.data(),curr\x3d_.curr(),prev\x3d_.prev(),pass\x3dk\x3d\x3ecurr[k]\x26ignore?null:data[k];pulse.filter(pulse.MOD,pass);mask\x26mask-1?(pulse.filter(pulse.ADD,k\x3d\x3e{const c\x3dcurr[k]\x26ignore;return!c\x26\x26c^prev[k]\x26ignore?data[k]:null}),pulse.filter(pulse.REM,k\x3d\x3e{const c\x3dcurr[k]\x26ignore;return!c||c^c^prev[k]\x26ignore?\nnull:data[k]})):(pulse.filter(pulse.ADD,pass),pulse.filter(pulse.REM,k\x3d\x3e(curr[k]\x26ignore)\x3d\x3d\x3dmask?data[k]:null));return pulse.filter(pulse.SOURCE,t\x3d\x3epass(t._index))}});exports.crossfilter\x3dCrossFilter;exports.resolvefilter\x3dResolveFilter;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_expression$build$vega_expression.js", true , "shadow$provide.module$node_modules$vega_expression$build$vega_expression\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega))})(this,function(exports,\nvegaUtil){function ASTNode(type){this.type\x3dtype}function children(node){switch(node.type){case \x22ArrayExpression\x22:return node.elements;case \x22BinaryExpression\x22:case \x22LogicalExpression\x22:return[node.left,node.right];case \x22CallExpression\x22:return[node.callee].concat(node.arguments);case \x22ConditionalExpression\x22:return[node.test,node.consequent,node.alternate];case \x22MemberExpression\x22:return[node.object,node.property];case \x22ObjectExpression\x22:return node.properties;case \x22Property\x22:return[node.key,node.value];\ncase \x22UnaryExpression\x22:return[node.argument];default:return[]}}function assert(condition,message){if(!condition)throw Error(\x22ASSERT: \x22+message);}function isDecimalDigit(ch){return 48\x3c\x3dch\x26\x2657\x3e\x3dch}function isHexDigit(ch){return 0\x3c\x3d\x220123456789abcdefABCDEF\x22.indexOf(ch)}function isOctalDigit(ch){return 0\x3c\x3d\x2201234567\x22.indexOf(ch)}function isLineTerminator(ch){return 10\x3d\x3d\x3dch||13\x3d\x3d\x3dch||8232\x3d\x3d\x3dch||8233\x3d\x3d\x3dch}function isIdentifierStart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3d\nch\x26\x26RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36\x3d\x3d\x3dch||95\x3d\x3d\x3dch||65\x3c\x3dch\x26\x2690\x3e\x3dch||97\x3c\x3dch\x26\x26122\x3e\x3dch||48\x3c\x3dch\x26\x2657\x3e\x3dch||92\x3d\x3d\x3dch||128\x3c\x3dch\x26\x26RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}function skipComment(){for(;index$jscomp$0\x3clength;){const ch\x3dsource.charCodeAt(index$jscomp$0);if(32\x3d\x3d\x3dch||9\x3d\x3d\x3dch||11\x3d\x3d\x3dch||12\x3d\x3d\x3dch||160\x3d\x3d\x3dch||5760\x3c\x3dch\x26\x260\x3c\x3d[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)||\nisLineTerminator(ch))++index$jscomp$0;else break}}function scanHexEscape(prefix){var code\x3d0;var len\x3d\x22u\x22\x3d\x3d\x3dprefix?4:2;for(prefix\x3d0;prefix\x3clen;++prefix)if(index$jscomp$0\x3clength\x26\x26isHexDigit(source[index$jscomp$0])){var ch\x3dsource[index$jscomp$0++];code\x3d16*code+\x220123456789abcdef\x22.indexOf(ch.toLowerCase())}else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return String.fromCharCode(code)}function getEscapedIdentifier(){var ch\x3dsource.charCodeAt(index$jscomp$0++);var id\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26\n(117!\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierStart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id\x3dch);for(;index$jscomp$0\x3clength;){ch\x3dsource.charCodeAt(index$jscomp$0);if(!isIdentifierPart(ch))break;++index$jscomp$0;id+\x3dString.fromCharCode(ch);92\x3d\x3d\x3dch\x26\x26(id\x3did.substr(0,id.length-1),117!\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),\n++index$jscomp$0,(ch\x3dscanHexEscape(\x22u\x22))\x26\x26\x22\\\\\x22!\x3d\x3dch\x26\x26isIdentifierPart(ch.charCodeAt(0))||throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22),id+\x3dch)}return id}function scanPunctuator(){var start\x3dindex$jscomp$0,code\x3dsource.charCodeAt(index$jscomp$0),ch1\x3dsource[index$jscomp$0];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$jscomp$0,{type:7,value:String.fromCharCode(code),start,end:index$jscomp$0};default:var code2\x3dsource.charCodeAt(index$jscomp$0+\n1);if(61\x3d\x3d\x3dcode2)switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$jscomp$0+\x3d2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start,end:index$jscomp$0};case 33:case 61:return index$jscomp$0+\x3d2,61\x3d\x3d\x3dsource.charCodeAt(index$jscomp$0)\x26\x26++index$jscomp$0,{type:7,value:source.slice(start,index$jscomp$0),start,end:index$jscomp$0}}}code\x3dsource.substr(index$jscomp$0,4);if(\x22\\x3e\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d4,{type:7,\nvalue:code,start,end:index$jscomp$0};code\x3dcode.substr(0,3);if(\x22\\x3e\\x3e\\x3e\x22\x3d\x3d\x3dcode||\x22\\x3c\\x3c\\x3d\x22\x3d\x3d\x3dcode||\x22\\x3e\\x3e\\x3d\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d3,{type:7,value:code,start,end:index$jscomp$0};code\x3dcode.substr(0,2);if(ch1\x3d\x3d\x3dcode[1]\x26\x260\x3c\x3d\x22+-\\x3c\\x3e\\x26|\x22.indexOf(ch1)||\x22\\x3d\\x3e\x22\x3d\x3d\x3dcode)return index$jscomp$0+\x3d2,{type:7,value:code,start,end:index$jscomp$0};\x22//\x22\x3d\x3d\x3dcode\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);if(0\x3c\x3d\x22\\x3c\\x3e\\x3d!+-*%\\x26|^/\x22.indexOf(ch1))return++index$jscomp$0,{type:7,value:ch1,\nstart,end:index$jscomp$0};throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}function scanNumericLiteral(){var ch\x3dsource[index$jscomp$0];assert(isDecimalDigit(ch.charCodeAt(0))||\x22.\x22\x3d\x3d\x3dch,\x22Numeric literal must start with a decimal digit or a decimal point\x22);var start\x3dindex$jscomp$0;var number\x3d\x22\x22;if(\x22.\x22!\x3d\x3dch){number\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0];if(\x220\x22\x3d\x3d\x3dnumber){if(\x22x\x22\x3d\x3d\x3dch||\x22X\x22\x3d\x3d\x3dch){++index$jscomp$0;for(number\x3d\x22\x22;index$jscomp$0\x3clength\x26\x26isHexDigit(source[index$jscomp$0]);)number+\x3d\nsource[index$jscomp$0++];0\x3d\x3d\x3dnumber.length\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);isIdentifierStart(source.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return start\x3d{type:6,value:parseInt(\x220x\x22+number,16),start,end:index$jscomp$0}}if(isOctalDigit(ch)){for(number\x3d\x220\x22+source[index$jscomp$0++];index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0]);)number+\x3dsource[index$jscomp$0++];(isIdentifierStart(source.charCodeAt(index$jscomp$0))||isDecimalDigit(source.charCodeAt(index$jscomp$0)))\x26\x26\nthrowError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return start\x3d{type:6,value:parseInt(number,8),octal:!0,start,end:index$jscomp$0}}ch\x26\x26isDecimalDigit(ch.charCodeAt(0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0]}if(\x22.\x22\x3d\x3d\x3dch){for(number+\x3dsource[index$jscomp$0++];isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0]}if(\x22e\x22\x3d\x3d\x3dch||\n\x22E\x22\x3d\x3d\x3dch){number+\x3dsource[index$jscomp$0++];ch\x3dsource[index$jscomp$0];if(\x22+\x22\x3d\x3d\x3dch||\x22-\x22\x3d\x3d\x3dch)number+\x3dsource[index$jscomp$0++];if(isDecimalDigit(source.charCodeAt(index$jscomp$0)))for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+\x3dsource[index$jscomp$0++];else throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22)}isIdentifierStart(source.charCodeAt(index$jscomp$0))\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:6,value:parseFloat(number),start,end:index$jscomp$0}}function testRegExp(pattern,\nflags){let tmp\x3dpattern;0\x3c\x3dflags.indexOf(\x22u\x22)\x26\x26(tmp\x3dtmp.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,($0,$1)\x3d\x3e{if(1114111\x3e\x3dparseInt($1,16))return\x22x\x22;throwError({},\x22Invalid regular expression\x22)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\x22x\x22));try{new RegExp(tmp)}catch(e){throwError({},\x22Invalid regular expression\x22)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function advance(){skipComment();if(index$jscomp$0\x3e\x3dlength)return{type:2,start:index$jscomp$0,end:index$jscomp$0};var ch\x3dsource.charCodeAt(index$jscomp$0);\nif(isIdentifierStart(ch)){ch\x3dindex$jscomp$0;if(92\x3d\x3d\x3dsource.charCodeAt(index$jscomp$0))var id\x3dgetEscapedIdentifier();else a:{for(id\x3dindex$jscomp$0++;index$jscomp$0\x3clength;){var ch$jscomp$0\x3dsource.charCodeAt(index$jscomp$0);if(92\x3d\x3d\x3dch$jscomp$0){index$jscomp$0\x3did;id\x3dgetEscapedIdentifier();break a}if(isIdentifierPart(ch$jscomp$0))++index$jscomp$0;else break}id\x3dsource.slice(id,index$jscomp$0)}return{type:1\x3d\x3d\x3did.length?3:keywords.hasOwnProperty(id)?4:\x22null\x22\x3d\x3d\x3did?5:\x22true\x22\x3d\x3d\x3did||\x22false\x22\x3d\x3d\x3did?1:3,value:id,\nstart:ch,end:index$jscomp$0}}if(40\x3d\x3d\x3dch||41\x3d\x3d\x3dch||59\x3d\x3d\x3dch)return scanPunctuator();if(39\x3d\x3d\x3dch||34\x3d\x3d\x3dch){var str\x3d\x22\x22;ch$jscomp$0\x3d!1;ch\x3dsource[index$jscomp$0];assert(\x22\x27\x22\x3d\x3d\x3dch||\x27\x22\x27\x3d\x3d\x3dch,\x22String literal must starts with a quote\x22);id\x3dindex$jscomp$0;for(++index$jscomp$0;index$jscomp$0\x3clength;){var ch$jscomp$1\x3dsource[index$jscomp$0++];if(ch$jscomp$1\x3d\x3d\x3dch){ch\x3d\x22\x22;break}else if(\x22\\\\\x22\x3d\x3d\x3dch$jscomp$1)if((ch$jscomp$1\x3dsource[index$jscomp$0++])\x26\x26isLineTerminator(ch$jscomp$1.charCodeAt(0)))\x22\\r\x22\x3d\x3d\x3dch$jscomp$1\x26\x26\x22\\n\x22\x3d\x3d\x3d\nsource[index$jscomp$0]\x26\x26++index$jscomp$0;else switch(ch$jscomp$1){case \x22u\x22:case \x22x\x22:if(\x22{\x22\x3d\x3d\x3dsource[index$jscomp$0]){++index$jscomp$0;var code\x3dsource[index$jscomp$0];ch$jscomp$1\x3d0;for(\x22}\x22\x3d\x3d\x3dcode\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);index$jscomp$0\x3clength;){code\x3dsource[index$jscomp$0++];if(!isHexDigit(code))break;ch$jscomp$1\x3d16*ch$jscomp$1+\x220123456789abcdef\x22.indexOf(code.toLowerCase())}(1114111\x3cch$jscomp$1||\x22}\x22!\x3d\x3dcode)\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);ch$jscomp$1\x3d65535\x3e\x3dch$jscomp$1?\nString.fromCharCode(ch$jscomp$1):String.fromCharCode((ch$jscomp$1-65536\x3e\x3e10)+55296,(ch$jscomp$1-65536\x261023)+56320);str+\x3dch$jscomp$1}else str+\x3dscanHexEscape(ch$jscomp$1);break;case \x22n\x22:str+\x3d\x22\\n\x22;break;case \x22r\x22:str+\x3d\x22\\r\x22;break;case \x22t\x22:str+\x3d\x22\\t\x22;break;case \x22b\x22:str+\x3d\x22\\b\x22;break;case \x22f\x22:str+\x3d\x22\\f\x22;break;case \x22v\x22:str+\x3d\x22\\x0B\x22;break;default:isOctalDigit(ch$jscomp$1)?(code\x3d\x2201234567\x22.indexOf(ch$jscomp$1),0!\x3d\x3dcode\x26\x26(ch$jscomp$0\x3d!0),index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0])\x26\x26(ch$jscomp$0\x3d!0,\ncode\x3d8*code+\x2201234567\x22.indexOf(source[index$jscomp$0++]),0\x3c\x3d\x220123\x22.indexOf(ch$jscomp$1)\x26\x26index$jscomp$0\x3clength\x26\x26isOctalDigit(source[index$jscomp$0])\x26\x26(code\x3d8*code+\x2201234567\x22.indexOf(source[index$jscomp$0++]))),str+\x3dString.fromCharCode(code)):str+\x3dch$jscomp$1}else if(isLineTerminator(ch$jscomp$1.charCodeAt(0)))break;else str+\x3dch$jscomp$1}\x22\x22!\x3d\x3dch\x26\x26throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22);return{type:8,value:str,octal:ch$jscomp$0,start:id,end:index$jscomp$0}}return 46\x3d\x3d\x3dch?isDecimalDigit(source.charCodeAt(index$jscomp$0+\n1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){const token\x3dlookahead;index$jscomp$0\x3dtoken.end;lookahead\x3dadvance();index$jscomp$0\x3dtoken.end;return token}function peek(){const pos\x3dindex$jscomp$0;lookahead\x3dadvance();index$jscomp$0\x3dpos}function finishBinaryExpression(operator,left,right){const node\x3dnew ASTNode(\x22||\x22\x3d\x3d\x3doperator||\x22\\x26\\x26\x22\x3d\x3d\x3doperator?\x22LogicalExpression\x22:\x22BinaryExpression\x22);node.operator\x3doperator;node.left\x3dleft;node.right\x3d\nright;return node}function finishIdentifier(name){const node\x3dnew ASTNode(\x22Identifier\x22);node.name\x3dname;return node}function finishLiteral(token){const node\x3dnew ASTNode(\x22Literal\x22);node.value\x3dtoken.value;node.raw\x3dsource.slice(token.start,token.end);token.regex\x26\x26(\x22//\x22\x3d\x3d\x3dnode.raw\x26\x26(node.raw\x3d\x22/(?:)/\x22),node.regex\x3dtoken.regex);return node}function finishMemberExpression(accessor,object,property){const node\x3dnew ASTNode(\x22MemberExpression\x22);node.computed\x3d\x22[\x22\x3d\x3d\x3daccessor;node.object\x3dobject;node.property\x3dproperty;\nnode.computed||(property.member\x3d!0);return node}function finishProperty(kind,key,value){const node\x3dnew ASTNode(\x22Property\x22);node.key\x3dkey;node.value\x3dvalue;node.kind\x3dkind;return node}function throwError(token,messageFormat){var args\x3dArray.prototype.slice.call(arguments,2),msg\x3dmessageFormat.replace(/%(\\d)/g,(whole,index)\x3d\x3e{assert(index\x3cargs.length,\x22Message reference must be in range\x22);return args[index]});var error\x3dError(msg);error.index\x3dindex$jscomp$0;error.description\x3dmsg;throw error;}function throwUnexpected(token){2\x3d\x3d\x3d\ntoken.type\x26\x26throwError(token,\x22Unexpected end of input\x22);6\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected number\x22);8\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected string\x22);3\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected identifier\x22);4\x3d\x3d\x3dtoken.type\x26\x26throwError(token,\x22Unexpected reserved word\x22);throwError(token,\x22Unexpected token %0\x22,token.value)}function expect(value){const token\x3dlex();7\x3d\x3d\x3dtoken.type\x26\x26token.value\x3d\x3d\x3dvalue||throwUnexpected(token)}function match(value){return 7\x3d\x3d\x3dlookahead.type\x26\x26lookahead.value\x3d\x3d\x3d\nvalue}function parseObjectPropertyKey(){index$jscomp$0\x3dlookahead.start;const token\x3dlex();return 8\x3d\x3d\x3dtoken.type||6\x3d\x3d\x3dtoken.type?(token.octal\x26\x26throwError(token,\x22Octal literals are not allowed in strict mode.\x22),finishLiteral(token)):finishIdentifier(token.value)}function parsePrimaryExpression(){if(match(\x22(\x22)){expect(\x22(\x22);var type\x3dparseExpression();expect(\x22)\x22);return type}if(match(\x22[\x22)){type\x3d[];index$jscomp$0\x3dlookahead.start;for(expect(\x22[\x22);!match(\x22]\x22);)match(\x22,\x22)?(lex(),type.push(null)):(type.push(parseConditionalExpression()),\nmatch(\x22]\x22)||expect(\x22,\x22));lex();var JSCompiler_object_inline_value_8164\x3dnew ASTNode(\x22ArrayExpression\x22);JSCompiler_object_inline_value_8164.elements\x3dtype;return type\x3dJSCompiler_object_inline_value_8164}if(match(\x22{\x22)){type\x3d[];JSCompiler_object_inline_value_8164\x3d{};var JSCompiler_object_inline_literal_8165\x3dString;index$jscomp$0\x3dlookahead.start;for(expect(\x22{\x22);!match(\x22}\x22);){index$jscomp$0\x3dlookahead.start;var JSCompiler_object_inline_value_8166\x3dlookahead;if(3\x3d\x3d\x3dJSCompiler_object_inline_value_8166.type){var JSCompiler_object_inline_literal_8167\x3d\nparseObjectPropertyKey();expect(\x22:\x22);JSCompiler_object_inline_value_8166\x3dparseConditionalExpression();JSCompiler_object_inline_value_8166\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8167,JSCompiler_object_inline_value_8166)}else 2\x3d\x3d\x3dJSCompiler_object_inline_value_8166.type||7\x3d\x3d\x3dJSCompiler_object_inline_value_8166.type?(throwUnexpected(JSCompiler_object_inline_value_8166),JSCompiler_object_inline_value_8166\x3dvoid 0):(JSCompiler_object_inline_literal_8167\x3dparseObjectPropertyKey(),expect(\x22:\x22),\nJSCompiler_object_inline_value_8166\x3dparseConditionalExpression(),JSCompiler_object_inline_value_8166\x3dfinishProperty(\x22init\x22,JSCompiler_object_inline_literal_8167,JSCompiler_object_inline_value_8166));JSCompiler_object_inline_literal_8167\x3d\x22Identifier\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8166.key.type?JSCompiler_object_inline_value_8166.key.name:JSCompiler_object_inline_literal_8165(JSCompiler_object_inline_value_8166.key.value);JSCompiler_object_inline_literal_8167\x3d\x22$\x22+JSCompiler_object_inline_literal_8167;\nObject.prototype.hasOwnProperty.call(JSCompiler_object_inline_value_8164,JSCompiler_object_inline_literal_8167)?throwError({},\x22Duplicate data property in object literal not allowed in strict mode\x22):JSCompiler_object_inline_value_8164[JSCompiler_object_inline_literal_8167]\x3d!0;type.push(JSCompiler_object_inline_value_8166);match(\x22}\x22)||expect(\x22,\x22)}expect(\x22}\x22);JSCompiler_object_inline_value_8164\x3dnew ASTNode(\x22ObjectExpression\x22);JSCompiler_object_inline_value_8164.properties\x3dtype;return type\x3dJSCompiler_object_inline_value_8164}type\x3d\nlookahead.type;index$jscomp$0\x3dlookahead.start;if(3\x3d\x3d\x3dtype||legalKeywords[lookahead.value])JSCompiler_object_inline_value_8164\x3dfinishIdentifier(lex().value);else if(8\x3d\x3d\x3dtype||6\x3d\x3d\x3dtype)lookahead.octal\x26\x26throwError(lookahead,\x22Octal literals are not allowed in strict mode.\x22),JSCompiler_object_inline_value_8164\x3dfinishLiteral(lex());else{if(4\x3d\x3d\x3dtype)throw Error(\x22Disabled.\x22);if(1\x3d\x3d\x3dtype)type\x3dlex(),type.value\x3d\x22true\x22\x3d\x3d\x3dtype.value,JSCompiler_object_inline_value_8164\x3dfinishLiteral(type);else if(5\x3d\x3d\x3dtype)type\x3d\nlex(),type.value\x3dnull,JSCompiler_object_inline_value_8164\x3dfinishLiteral(type);else if(match(\x22/\x22)||match(\x22/\\x3d\x22)){var value;lookahead\x3dnull;skipComment();type\x3dindex$jscomp$0;JSCompiler_object_inline_value_8164\x3dsource[index$jscomp$0];assert(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8164,\x22Regular expression literal must start with a slash\x22);JSCompiler_object_inline_literal_8165\x3dsource[index$jscomp$0++];for(JSCompiler_object_inline_literal_8167\x3dJSCompiler_object_inline_value_8166\x3d!1;index$jscomp$0\x3clength;)if(JSCompiler_object_inline_value_8164\x3d\nsource[index$jscomp$0++],JSCompiler_object_inline_literal_8165+\x3dJSCompiler_object_inline_value_8164,\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8164)JSCompiler_object_inline_value_8164\x3dsource[index$jscomp$0++],isLineTerminator(JSCompiler_object_inline_value_8164.charCodeAt(0))\x26\x26throwError({},\x22Invalid regular expression: missing /\x22),JSCompiler_object_inline_literal_8165+\x3dJSCompiler_object_inline_value_8164;else if(isLineTerminator(JSCompiler_object_inline_value_8164.charCodeAt(0)))throwError({},\x22Invalid regular expression: missing /\x22);\nelse if(JSCompiler_object_inline_value_8166)\x22]\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8164\x26\x26(JSCompiler_object_inline_value_8166\x3d!1);else if(\x22/\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8164){JSCompiler_object_inline_literal_8167\x3d!0;break}else\x22[\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8164\x26\x26(JSCompiler_object_inline_value_8166\x3d!0);JSCompiler_object_inline_literal_8167||throwError({},\x22Invalid regular expression: missing /\x22);JSCompiler_object_inline_value_8164\x3dJSCompiler_object_inline_literal_8165.substr(1,JSCompiler_object_inline_literal_8165.length-\n2);for(value\x3dJSCompiler_object_inline_literal_8167\x3d\x22\x22;index$jscomp$0\x3clength;){JSCompiler_object_inline_value_8166\x3dsource[index$jscomp$0];if(!isIdentifierPart(JSCompiler_object_inline_value_8166.charCodeAt(0)))break;++index$jscomp$0;\x22\\\\\x22\x3d\x3d\x3dJSCompiler_object_inline_value_8166\x26\x26index$jscomp$0\x3clength?throwError({},\x22Unexpected token %0\x22,\x22ILLEGAL\x22):(value+\x3dJSCompiler_object_inline_value_8166,JSCompiler_object_inline_literal_8167+\x3dJSCompiler_object_inline_value_8166)}0\x3c\x3dvalue.search(/[^gimuy]/g)\x26\x26throwError({},\n\x22Invalid regular expression\x22,value);JSCompiler_object_inline_value_8166\x3dvalue;value\x3dtestRegExp(JSCompiler_object_inline_value_8164,JSCompiler_object_inline_value_8166);JSCompiler_object_inline_value_8164\x3dfinishLiteral({literal:JSCompiler_object_inline_literal_8165+JSCompiler_object_inline_literal_8167,value,regex:{pattern:JSCompiler_object_inline_value_8164,flags:JSCompiler_object_inline_value_8166},start:type,end:index$jscomp$0});peek()}else throwUnexpected(lex())}return JSCompiler_object_inline_value_8164}\nfunction parsePostfixExpression(){var JSCompiler_inline_result;for(JSCompiler_inline_result\x3dparsePrimaryExpression();;)if(match(\x22.\x22)){expect(\x22.\x22);index$jscomp$0\x3dlookahead.start;var args\x3dlex();3\x3d\x3d\x3dargs.type||4\x3d\x3d\x3dargs.type||1\x3d\x3d\x3dargs.type||5\x3d\x3d\x3dargs.type||throwUnexpected(args);args\x3dfinishIdentifier(args.value);JSCompiler_inline_result\x3dfinishMemberExpression(\x22.\x22,JSCompiler_inline_result,args)}else if(match(\x22(\x22)){args\x3d[];expect(\x22(\x22);if(!match(\x22)\x22))for(;index$jscomp$0\x3clength;){args.push(parseConditionalExpression());\nif(match(\x22)\x22))break;expect(\x22,\x22)}expect(\x22)\x22);{const node\x3dnew ASTNode(\x22CallExpression\x22);node.callee\x3dJSCompiler_inline_result;node.arguments\x3dargs;JSCompiler_inline_result\x3dnode}}else if(match(\x22[\x22))expect(\x22[\x22),args\x3dparseExpression(),expect(\x22]\x22),JSCompiler_inline_result\x3dfinishMemberExpression(\x22[\x22,JSCompiler_inline_result,args);else break;if(7\x3d\x3d\x3dlookahead.type\x26\x26(match(\x22++\x22)||match(\x22--\x22)))throw Error(\x22Disabled.\x22);return JSCompiler_inline_result}function parseUnaryExpression(){if(7!\x3d\x3dlookahead.type\x26\x264!\x3d\x3dlookahead.type)var expr\x3d\nparsePostfixExpression();else{if(match(\x22++\x22)||match(\x22--\x22))throw Error(\x22Disabled.\x22);if(match(\x22+\x22)||match(\x22-\x22)||match(\x22~\x22)||match(\x22!\x22)){var token\x3dlex();expr\x3dparseUnaryExpression();{token\x3dtoken.value;const node\x3dnew ASTNode(\x22UnaryExpression\x22);node.operator\x3dtoken;node.argument\x3dexpr;node.prefix\x3d!0;expr\x3dnode}}else{if(4\x3d\x3d\x3dlookahead.type\x26\x26\x22delete\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22void\x22\x3d\x3d\x3dlookahead.value||4\x3d\x3d\x3dlookahead.type\x26\x26\x22typeof\x22\x3d\x3d\x3dlookahead.value)throw Error(\x22Disabled.\x22);expr\x3dparsePostfixExpression()}}return expr}\nfunction binaryPrecedence(token){let prec\x3d0;if(7!\x3d\x3dtoken.type\x26\x264!\x3d\x3dtoken.type)return 0;switch(token.value){case \x22||\x22:prec\x3d1;break;case \x22\\x26\\x26\x22:prec\x3d2;break;case \x22|\x22:prec\x3d3;break;case \x22^\x22:prec\x3d4;break;case \x22\\x26\x22:prec\x3d5;break;case \x22\\x3d\\x3d\x22:case \x22!\\x3d\x22:case \x22\\x3d\\x3d\\x3d\x22:case \x22!\\x3d\\x3d\x22:prec\x3d6;break;case \x22\\x3c\x22:case \x22\\x3e\x22:case \x22\\x3c\\x3d\x22:case \x22\\x3e\\x3d\x22:case \x22instanceof\x22:case \x22in\x22:prec\x3d7;break;case \x22\\x3c\\x3c\x22:case \x22\\x3e\\x3e\x22:case \x22\\x3e\\x3e\\x3e\x22:prec\x3d8;break;case \x22+\x22:case \x22-\x22:prec\x3d9;break;case \x22*\x22:case \x22/\x22:case \x22%\x22:prec\x3d\n11}return prec}function parseConditionalExpression(){var consequent\x3dlookahead;var expr\x3dparseUnaryExpression();var token\x3dlookahead;var alternate\x3dbinaryPrecedence(token);if(0\x3d\x3d\x3dalternate)var expr$jscomp$0\x3dexpr;else{token.prec\x3dalternate;lex();consequent\x3d[consequent,lookahead];var right\x3dparseUnaryExpression();for(expr$jscomp$0\x3d[expr,token,right];0\x3c(alternate\x3dbinaryPrecedence(lookahead));){for(;2\x3cexpr$jscomp$0.length\x26\x26alternate\x3c\x3dexpr$jscomp$0[expr$jscomp$0.length-2].prec;)right\x3dexpr$jscomp$0.pop(),token\x3d\nexpr$jscomp$0.pop().value,expr\x3dexpr$jscomp$0.pop(),consequent.pop(),expr\x3dfinishBinaryExpression(token,expr,right),expr$jscomp$0.push(expr);token\x3dlex();token.prec\x3dalternate;expr$jscomp$0.push(token);consequent.push(lookahead);expr\x3dparseUnaryExpression();expr$jscomp$0.push(expr)}alternate\x3dexpr$jscomp$0.length-1;expr\x3dexpr$jscomp$0[alternate];for(consequent.pop();1\x3calternate;)consequent.pop(),expr\x3dfinishBinaryExpression(expr$jscomp$0[alternate-1].value,expr$jscomp$0[alternate-2],expr),alternate-\x3d2;expr$jscomp$0\x3d\nexpr}match(\x22?\x22)\x26\x26(lex(),consequent\x3dparseConditionalExpression(),expect(\x22:\x22),alternate\x3dparseConditionalExpression(),expr\x3dnew ASTNode(\x22ConditionalExpression\x22),expr.test\x3dexpr$jscomp$0,expr.consequent\x3dconsequent,expr.alternate\x3dalternate,expr$jscomp$0\x3dexpr);return expr$jscomp$0}function parseExpression(){const expr\x3dparseConditionalExpression();if(match(\x22,\x22))throw Error(\x22Disabled.\x22);return expr}function Functions(codegen){function fn(name,cast,type){return args\x3d\x3e{{let obj\x3dcodegen(args[0]);cast\x26\x26(obj\x3dcast+\n\x22(\x22+obj+\x22)\x22,0\x3d\x3d\x3dcast.lastIndexOf(\x22new \x22,0)\x26\x26(obj\x3d\x22(\x22+obj+\x22)\x22));args\x3dobj+\x22.\x22+name+(0\x3etype?\x22\x22:0\x3d\x3d\x3dtype?\x22()\x22:\x22(\x22+args.slice(1).map(codegen).join(\x22,\x22)+\x22)\x22)}return args}}return{isNaN:\x22Number.isNaN\x22,isFinite:\x22Number.isFinite\x22,abs:\x22Math.abs\x22,acos:\x22Math.acos\x22,asin:\x22Math.asin\x22,atan:\x22Math.atan\x22,atan2:\x22Math.atan2\x22,ceil:\x22Math.ceil\x22,cos:\x22Math.cos\x22,exp:\x22Math.exp\x22,floor:\x22Math.floor\x22,log:\x22Math.log\x22,max:\x22Math.max\x22,min:\x22Math.min\x22,pow:\x22Math.pow\x22,random:\x22Math.random\x22,round:\x22Math.round\x22,sin:\x22Math.sin\x22,sqrt:\x22Math.sqrt\x22,\ntan:\x22Math.tan\x22,clamp:function(args){3\x3eargs.length\x26\x26vegaUtil.error(\x22Missing arguments to clamp function.\x22);3\x3cargs.length\x26\x26vegaUtil.error(\x22Too many arguments to clamp function.\x22);args\x3dargs.map(codegen);return\x22Math.max(\x22+args[1]+\x22, Math.min(\x22+args[2]+\x22,\x22+args[0]+\x22))\x22},now:\x22Date.now\x22,utc:\x22Date.UTC\x22,datetime:\x22new Date\x22,date:fn(\x22getDate\x22,\x22new Date\x22,0),day:fn(\x22getDay\x22,\x22new Date\x22,0),year:fn(\x22getFullYear\x22,\x22new Date\x22,0),month:fn(\x22getMonth\x22,\x22new Date\x22,0),hours:fn(\x22getHours\x22,\x22new Date\x22,0),minutes:fn(\x22getMinutes\x22,\n\x22new Date\x22,0),seconds:fn(\x22getSeconds\x22,\x22new Date\x22,0),milliseconds:fn(\x22getMilliseconds\x22,\x22new Date\x22,0),time:fn(\x22getTime\x22,\x22new Date\x22,0),timezoneoffset:fn(\x22getTimezoneOffset\x22,\x22new Date\x22,0),utcdate:fn(\x22getUTCDate\x22,\x22new Date\x22,0),utcday:fn(\x22getUTCDay\x22,\x22new Date\x22,0),utcyear:fn(\x22getUTCFullYear\x22,\x22new Date\x22,0),utcmonth:fn(\x22getUTCMonth\x22,\x22new Date\x22,0),utchours:fn(\x22getUTCHours\x22,\x22new Date\x22,0),utcminutes:fn(\x22getUTCMinutes\x22,\x22new Date\x22,0),utcseconds:fn(\x22getUTCSeconds\x22,\x22new Date\x22,0),utcmilliseconds:fn(\x22getUTCMilliseconds\x22,\n\x22new Date\x22,0),length:fn(\x22length\x22,null,-1),parseFloat:\x22parseFloat\x22,parseInt:\x22parseInt\x22,upper:fn(\x22toUpperCase\x22,\x22String\x22,0),lower:fn(\x22toLowerCase\x22,\x22String\x22,0),substring:fn(\x22substring\x22,\x22String\x22),split:fn(\x22split\x22,\x22String\x22),trim:fn(\x22trim\x22,\x22String\x22,0),regexp:\x22RegExp\x22,test:fn(\x22test\x22,\x22RegExp\x22),if:function(args){3\x3eargs.length\x26\x26vegaUtil.error(\x22Missing arguments to if function.\x22);3\x3cargs.length\x26\x26vegaUtil.error(\x22Too many arguments to if function.\x22);args\x3dargs.map(codegen);return\x22(\x22+args[0]+\x22?\x22+args[1]+\x22:\x22+args[2]+\n\x22)\x22}}}ASTNode.prototype.visit\x3dfunction(visitor){let c,i,n;if(visitor(this))return 1;c\x3dchildren(this);i\x3d0;for(n\x3dc.length;i\x3cn;++i)if(c[i].visit(visitor))return 1};var source,index$jscomp$0,length,lookahead,RegexNonAsciiIdentifierStart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\nRegexNonAsciiIdentifierPart\x3d/[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/;\nconst keywords\x3d{\x22if\x22:1,\x22in\x22:1,\x22do\x22:1,\x22var\x22:1,\x22for\x22:1,\x22new\x22:1,\x22try\x22:1,let:1,\x22this\x22:1,\x22else\x22:1,\x22case\x22:1,\x22void\x22:1,\x22with\x22:1,\x22enum\x22:1,\x22while\x22:1,\x22break\x22:1,\x22catch\x22:1,\x22throw\x22:1,\x22const\x22:1,yield:1,\x22class\x22:1,\x22super\x22:1,\x22return\x22:1,\x22typeof\x22:1,\x22delete\x22:1,\x22switch\x22:1,\x22export\x22:1,\x22import\x22:1,\x22public\x22:1,\x22static\x22:1,\x22default\x22:1,\x22finally\x22:1,\x22extends\x22:1,\x22package\x22:1,\x22private\x22:1,\x22function\x22:1,\x22continue\x22:1,\x22debugger\x22:1,\x22interface\x22:1,\x22protected\x22:1,\x22instanceof\x22:1,\x22implements\x22:1},legalKeywords\x3d{\x22if\x22:1};var Constants\x3d{NaN:\x22NaN\x22,\nE:\x22Math.E\x22,LN2:\x22Math.LN2\x22,LN10:\x22Math.LN10\x22,LOG2E:\x22Math.LOG2E\x22,LOG10E:\x22Math.LOG10E\x22,PI:\x22Math.PI\x22,SQRT1_2:\x22Math.SQRT1_2\x22,SQRT2:\x22Math.SQRT2\x22,MIN_VALUE:\x22Number.MIN_VALUE\x22,MAX_VALUE:\x22Number.MAX_VALUE\x22};exports.ASTNode\x3dASTNode;exports.ArrayExpression\x3d\x22ArrayExpression\x22;exports.BinaryExpression\x3d\x22BinaryExpression\x22;exports.CallExpression\x3d\x22CallExpression\x22;exports.ConditionalExpression\x3d\x22ConditionalExpression\x22;exports.Identifier\x3d\x22Identifier\x22;exports.Literal\x3d\x22Literal\x22;exports.LogicalExpression\x3d\x22LogicalExpression\x22;\nexports.MemberExpression\x3d\x22MemberExpression\x22;exports.ObjectExpression\x3d\x22ObjectExpression\x22;exports.Property\x3d\x22Property\x22;exports.RawCode\x3d\x22RawCode\x22;exports.UnaryExpression\x3d\x22UnaryExpression\x22;exports.codegen\x3dfunction(opt){function visit(ast){if(vegaUtil.isString(ast))return ast;const generator\x3dGenerators[ast.type];null\x3d\x3dgenerator\x26\x26vegaUtil.error(\x22Unsupported type: \x22+ast.type);return generator(ast)}function codegen(ast){ast\x3d{code:visit(ast),globals:Object.keys(globals),fields:Object.keys(fields)};globals\x3d\n{};fields\x3d{};return ast}opt\x3dopt||{};const allowed\x3dopt.allowed?vegaUtil.toSet(opt.allowed):{},forbidden\x3dopt.forbidden?vegaUtil.toSet(opt.forbidden):{},constants\x3dopt.constants||Constants,functions\x3d(opt.functions||Functions)(visit),globalvar\x3dopt.globalvar,fieldvar\x3dopt.fieldvar,outputGlobal\x3dvegaUtil.isFunction(globalvar)?globalvar:id\x3d\x3e`${globalvar}[\x22${id}\x22]`;let globals\x3d{},fields\x3d{},memberDepth\x3d0;const Generators\x3d{Literal:n\x3d\x3en.raw,Identifier:n\x3d\x3e{n\x3dn.name;if(0\x3cmemberDepth)return n;if(vegaUtil.hasOwnProperty(forbidden,\nn))return vegaUtil.error(\x22Illegal identifier: \x22+n);if(vegaUtil.hasOwnProperty(constants,n))return constants[n];if(vegaUtil.hasOwnProperty(allowed,n))return n;globals[n]\x3d1;return outputGlobal(n)},MemberExpression:n\x3d\x3e{const d\x3d!n.computed,o\x3dvisit(n.object);d\x26\x26(memberDepth+\x3d1);n\x3dvisit(n.property);if(o\x3d\x3d\x3dfieldvar){var JSCompiler_temp_const\x3dfields;var JSCompiler_inline_result\x3d(JSCompiler_inline_result\x3dn\x26\x26n.length-1)\x26\x26(\x27\x22\x27\x3d\x3d\x3dn[0]\x26\x26\x27\x22\x27\x3d\x3d\x3dn[JSCompiler_inline_result]||\x22\x27\x22\x3d\x3d\x3dn[0]\x26\x26\x22\x27\x22\x3d\x3d\x3dn[JSCompiler_inline_result])?\nn.slice(1,-1):n;JSCompiler_temp_const[JSCompiler_inline_result]\x3d1}d\x26\x26--memberDepth;return o+(d?\x22.\x22+n:\x22[\x22+n+\x22]\x22)},CallExpression:n\x3d\x3e{\x22Identifier\x22!\x3d\x3dn.callee.type\x26\x26vegaUtil.error(\x22Illegal callee type: \x22+n.callee.type);const callee\x3dn.callee.name;n\x3dn.arguments;const fn\x3dvegaUtil.hasOwnProperty(functions,callee)\x26\x26functions[callee];fn||vegaUtil.error(\x22Unrecognized function: \x22+callee);return vegaUtil.isFunction(fn)?fn(n):fn+\x22(\x22+n.map(visit).join(\x22,\x22)+\x22)\x22},ArrayExpression:n\x3d\x3e\x22[\x22+n.elements.map(visit).join(\x22,\x22)+\n\x22]\x22,BinaryExpression:n\x3d\x3e\x22(\x22+visit(n.left)+\x22 \x22+n.operator+\x22 \x22+visit(n.right)+\x22)\x22,UnaryExpression:n\x3d\x3e\x22(\x22+n.operator+visit(n.argument)+\x22)\x22,ConditionalExpression:n\x3d\x3e\x22(\x22+visit(n.test)+\x22?\x22+visit(n.consequent)+\x22:\x22+visit(n.alternate)+\x22)\x22,LogicalExpression:n\x3d\x3e\x22(\x22+visit(n.left)+n.operator+visit(n.right)+\x22)\x22,ObjectExpression:n\x3d\x3e\x22{\x22+n.properties.map(visit).join(\x22,\x22)+\x22}\x22,Property:n\x3d\x3e{memberDepth+\x3d1;const k\x3dvisit(n.key);--memberDepth;return k+\x22:\x22+visit(n.value)}};codegen.functions\x3dfunctions;codegen.constants\x3dconstants;\nreturn codegen};exports.constants\x3dConstants;exports.functions\x3dFunctions;exports.parse\x3dfunction(code){source\x3dcode;index$jscomp$0\x3d0;length\x3dsource.length;lookahead\x3dnull;peek();code\x3dparseExpression();if(2!\x3d\x3dlookahead.type)throw Error(\x22Unexpect token after expression.\x22);return code};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_selections$build$vega_selection.js", true , "shadow$provide.module$node_modules$vega_selections$build$vega_selection\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_expression$build$vega_expression\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-expression\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?\nglobalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega))})(this,function(exports,vegaUtil,vegaExpression){function ascendingComparator(f){return(d,x)\x3d\x3e{d\x3df(d);return d\x3cx?-1:d\x3ex?1:d\x3e\x3dx?0:NaN}}function testPoint(datum,entry){var fields\x3dentry.fields;entry\x3dentry.values;for(var n\x3dfields.length,i\x3d0,dval,f;i\x3cn;++i)if(f\x3dfields[i],f.getter\x3dvegaUtil.field.getter||vegaUtil.field(f.field),dval\x3df.getter(datum),vegaUtil.isDate(dval)\x26\x26(dval\x3dvegaUtil.toNumber(dval)),vegaUtil.isDate(entry[i])\x26\x26(entry[i]\x3d\nvegaUtil.toNumber(entry[i])),vegaUtil.isDate(entry[i][0])\x26\x26(entry[i]\x3dentry[i].map(vegaUtil.toNumber)),\x22E\x22\x3d\x3d\x3df.type){if(vegaUtil.isArray(entry[i])?0\x3eentry[i].indexOf(dval):dval!\x3d\x3dentry[i])return!1}else if(\x22R\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i]))return!1}else if(\x22R-RE\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i],!0,!1))return!1}else if(\x22R-E\x22\x3d\x3d\x3df.type){if(!vegaUtil.inrange(dval,entry[i],!1,!1))return!1}else if(\x22R-LE\x22\x3d\x3d\x3df.type\x26\x26!vegaUtil.inrange(dval,entry[i],!1,!0))return!1;return!0}const selectionId\x3d\nvegaUtil.field(\x22_vgsid_\x22),bisect\x3dfunction(f){function left(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);for(;lo\x3chi;){const mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ecompare(a[mid],x)?lo\x3dmid+1:hi\x3dmid}return lo}let delta\x3df,compare\x3df;1\x3d\x3d\x3df.length\x26\x26(delta\x3d(d,x)\x3d\x3ef(d)-x,compare\x3dascendingComparator(f));return{left,center:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);hi\x3dleft(a,x,lo,hi-1);return hi\x3elo\x26\x26delta(a[hi-1],x)\x3e-delta(a[hi],x)?hi-1:hi},right:function(a,x,lo,hi){null\x3d\x3dlo\x26\x26(lo\x3d0);null\x3d\x3dhi\x26\x26(hi\x3da.length);\nfor(;lo\x3chi;){const mid\x3dlo+hi\x3e\x3e\x3e1;0\x3ccompare(a[mid],x)?hi\x3dmid:lo\x3dmid+1}return lo}}}(selectionId),bisectLeft\x3dbisect.left,bisectRight\x3dbisect.right;var ops\x3d{E_union:function(base,value){if(!base.length)return value;for(var i\x3d0,n\x3dvalue.length;i\x3cn;++i)0\x3ebase.indexOf(value[i])\x26\x26base.push(value[i]);return base},E_intersect:function(base,value){return base.length?base.filter(v\x3d\x3e0\x3c\x3dvalue.indexOf(v)):value},R_union:function(base,value){var lo\x3dvegaUtil.toNumber(value[0]),hi\x3dvegaUtil.toNumber(value[1]);lo\x3ehi\x26\x26\n(lo\x3dvalue[1],hi\x3dvalue[0]);if(!base.length)return[lo,hi];base[0]\x3elo\x26\x26(base[0]\x3dlo);base[1]\x3chi\x26\x26(base[1]\x3dhi);return base},R_intersect:function(base,value){var lo\x3dvegaUtil.toNumber(value[0]),hi\x3dvegaUtil.toNumber(value[1]);lo\x3ehi\x26\x26(lo\x3dvalue[1],hi\x3dvalue[0]);if(!base.length)return[lo,hi];if(hi\x3cbase[0]||base[1]\x3clo)return[];base[0]\x3clo\x26\x26(base[0]\x3dlo);base[1]\x3ehi\x26\x26(base[1]\x3dhi);return base}};exports.selectionIdTest\x3dfunction(name,datum,op){var data\x3dthis.context.data[name];name\x3ddata?data.values.value:[];data\x3ddata?\ndata[\x22index:unit\x22]\x26\x26data[\x22index:unit\x22].value:void 0;op\x3d\x22intersect\x22\x3d\x3d\x3dop;datum\x3dselectionId(datum);const index\x3dbisectLeft(name,datum);if(index\x3d\x3d\x3dname.length||selectionId(name[index])!\x3d\x3ddatum)return!1;if(data\x26\x26op){if(1\x3d\x3d\x3ddata.size)return!0;if(bisectRight(name,datum)-index\x3cdata.size)return!1}return!0};exports.selectionResolve\x3dfunction(name,op,isMulti,vl5){name\x3d(name\x3dthis.context.data[name])?name.values.value:[];for(var resolved\x3d{},multiRes\x3d{},types\x3d{},entry,fields,unit$jscomp$0,field$jscomp$0,res,resUnit,\nn\x3dname.length,i\x3d0,j$jscomp$0,m;i\x3cn;++i){entry\x3dname[i];unit$jscomp$0\x3dentry.unit;fields\x3dentry.fields;entry\x3dentry.values;j$jscomp$0\x3d0;for(m\x3dfields.length;j$jscomp$0\x3cm;++j$jscomp$0)field$jscomp$0\x3dfields[j$jscomp$0],res\x3dresolved[field$jscomp$0.field]||(resolved[field$jscomp$0.field]\x3d{}),resUnit\x3dres[unit$jscomp$0]||(res[unit$jscomp$0]\x3d[]),types[field$jscomp$0.field]\x3dfield$jscomp$0\x3dfield$jscomp$0.type.charAt(0),field$jscomp$0\x3dops[field$jscomp$0+\x22_union\x22],res[unit$jscomp$0]\x3dfield$jscomp$0(resUnit,vegaUtil.array(entry[j$jscomp$0]));\nisMulti\x26\x26(resUnit\x3dmultiRes[unit$jscomp$0]||(multiRes[unit$jscomp$0]\x3d[]),resUnit.push(vegaUtil.array(entry).reduce((obj,curr,j)\x3d\x3e(obj[fields[j].field]\x3dcurr,obj),{})))}op\x3dop||\x22union\x22;Object.keys(resolved).forEach(field\x3d\x3e{resolved[field]\x3dObject.keys(resolved[field]).map(unit\x3d\x3eresolved[field][unit]).reduce((acc,curr)\x3d\x3evoid 0\x3d\x3d\x3dacc?curr:ops[types[field]+\x22_\x22+op](acc,curr))});name\x3dObject.keys(multiRes);isMulti\x26\x26name.length\x26\x26(resolved[vl5?\x22vlPoint\x22:\x22vlMulti\x22]\x3d\x22union\x22\x3d\x3d\x3dop?{[\x22or\x22]:name.reduce((acc,k)\x3d\x3e(acc.push(...multiRes[k]),\nacc),[])}:{[\x22and\x22]:name.map(k\x3d\x3e({[\x22or\x22]:multiRes[k]}))});return resolved};exports.selectionTest\x3dfunction(name,datum,op){var data\x3dthis.context.data[name];name\x3ddata?data.values.value:[];data\x3ddata?data[\x22index:unit\x22]\x26\x26data[\x22index:unit\x22].value:void 0;op\x3d\x22intersect\x22\x3d\x3d\x3dop;for(var n\x3dname.length,i\x3d0,entry,miss,count,unit;i\x3cn;++i)if(entry\x3dname[i],data\x26\x26op){if(miss\x3dmiss||{},count\x3dmiss[unit\x3dentry.unit]||0,-1!\x3d\x3dcount){entry\x3dtestPoint(datum,entry);miss[unit]\x3dentry?-1:++count;if(entry\x26\x261\x3d\x3d\x3ddata.size)return!0;if(!entry\x26\x26\ncount\x3d\x3d\x3ddata.get(unit).count)return!1}}else if(entry\x3dtestPoint(datum,entry),op^entry)return entry;return n\x26\x26op};exports.selectionTuples\x3dfunction(array,base){return array.map(x\x3d\x3evegaUtil.extend({values:base.fields.map(f\x3d\x3e(f.getter||(f.getter\x3dvegaUtil.field(f.field)))(x.datum))},base))};exports.selectionVisitor\x3dfunction(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to selection functions must be a string literal.\x22);name\x3dargs[0].value;args\x3d2\x3c\x3dargs.length\x26\x26\nvegaUtil.peek(args).value;const dataName\x3d\x22:\x22+name;\x22intersect\x22!\x3d\x3dargs||vegaUtil.hasOwnProperty(params,\x22@unit\x22)||(params[\x22@unit\x22]\x3dscope.getData(name).indataRef(scope,\x22unit\x22));vegaUtil.hasOwnProperty(params,dataName)||(params[dataName]\x3dscope.getData(name).tuplesRef())};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_functions$build$vega_functions.js", true , "shadow$provide.module$node_modules$vega_functions$build$vega_functions\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_expression$build$vega_expression\x22),require(\x22module$node_modules$d3_geo$dist$d3_geo\x22),require(\x22module$node_modules$d3_color$dist$d3_color\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),\nrequire(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$vega_selections$build$vega_selection\x22),require(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),require(\x22module$node_modules$vega_time$build$vega_time\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-expression d3-geo d3-color vega-dataflow vega-scale vega-scenegraph vega-selections vega-statistics vega-time d3-array\x22.split(\x22 \x22),\nfactory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.d3,global.d3,global.vega,global.vega,global.vega,global.vega,global.vega,global.vega,global.d3))})(this,function(exports,vegaUtil,vegaExpression,d3Geo,d3Color,vegaDataflow,vegaScale,vegaScenegraph,vegaSelections,vegaStatistics,vegaTime,d3Array){function data$jscomp$0(name){return(name\x3dthis.context.data[name])?name.values.value:[]}function indata(name,field,value){return(value\x3d\n(name\x3dthis.context.data[name][\x22index:\x22+field])?name.value.get(value):void 0)?value.count:value}function setdata(name,tuples){const df\x3dthis.context.dataflow;df.pulse(this.context.data[name].input,df.changeset().remove(vegaUtil.truthy).insert(tuples));return 1}function encode(item,name,retval){if(item){const df\x3dthis.context.dataflow;df.pulse(item.mark.source,df.changeset().encode(item,name))}return void 0!\x3d\x3dretval?retval:item}function time(month,day,specifier){if(!Number.isInteger(month)||!Number.isInteger(day))return\x22\x22;\ndateObj.setYear(2E3);dateObj.setMonth(month);dateObj.setDate(day);return timeFormat.call(this,dateObj,specifier)}function monthFormat(month){return time.call(this,month,1,\x22%B\x22)}function monthAbbrevFormat(month){return time.call(this,month,1,\x22%b\x22)}function dayFormat(day){return time.call(this,0,2+day,\x22%A\x22)}function dayAbbrevFormat(day){return time.call(this,0,2+day,\x22%a\x22)}function dataVisitor(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to data functions must be a string literal.\x22);\nname\x3dargs[0].value;args\x3d\x22:\x22+name;if(!vegaUtil.hasOwnProperty(args,params))try{params[args]\x3dscope.getData(name).tuplesRef()}catch(err){}}function indataVisitor(name,args,scope,params){args[0].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22First argument to indata must be a string literal.\x22);args[1].type!\x3d\x3dvegaExpression.Literal\x26\x26vegaUtil.error(\x22Second argument to indata must be a string literal.\x22);name\x3dargs[0].value;args\x3dargs[1].value;const indexName\x3d\x22@\x22+args;vegaUtil.hasOwnProperty(indexName,params)||\n(params[indexName]\x3dscope.getData(name).indataRef(scope,args))}function scaleVisitor(name,args,scope,params){if(args[0].type\x3d\x3d\x3dvegaExpression.Literal)addScaleDependency(scope,params,args[0].value);else for(name in scope.scales)addScaleDependency(scope,params,name)}function addScaleDependency(scope,params,name){const scaleName\x3d\x22%\x22+name;if(!vegaUtil.hasOwnProperty(params,scaleName))try{params[scaleName]\x3dscope.scaleRef(name)}catch(err){}}function getScale(name,ctx){let s;return vegaUtil.isFunction(name)?\nname:vegaUtil.isString(name)?(s\x3dctx.scales[name])\x26\x26s.value:void 0}function internalScaleFunctions(codegen,fnctx,visitors){fnctx.__bandwidth\x3ds\x3d\x3es\x26\x26s.bandwidth?s.bandwidth():0;visitors._bandwidth\x3dscaleVisitor;visitors._range\x3dscaleVisitor;visitors._scale\x3dscaleVisitor;const ref\x3darg\x3d\x3e\x22_[\x22+(arg.type\x3d\x3d\x3dvegaExpression.Literal?vegaUtil.stringValue(\x22%\x22+arg.value):vegaUtil.stringValue(\x22%\x22)+\x22+\x22+codegen(arg))+\x22]\x22;return{_bandwidth:args\x3d\x3e`this.__bandwidth(${ref(args[0])})`,_range:args\x3d\x3e`${ref(args[0])}.range()`,\n_scale:args\x3d\x3e`${ref(args[0])}(${codegen(args[1])})`}}function geoMethod(methodName,globalMethod){return function(projection,geojson,group){return projection?(projection\x3dgetScale(projection,(group||this).context))\x26\x26projection.path[methodName](geojson):globalMethod(geojson)}}function inScope(item){const group\x3dthis.context.group;let value\x3d!1;if(group)for(;item;){if(item\x3d\x3d\x3dgroup){value\x3d!0;break}item\x3ditem.mark.group}return value}function log(df,method,args){try{df[method].apply(df,[\x22EXPRESSION\x22].concat([].slice.call(args)))}catch(err){df.warn(err)}return args[args.length-\n1]}function warn(){return log(this.context.dataflow,\x22warn\x22,arguments)}function info(){return log(this.context.dataflow,\x22info\x22,arguments)}function debug(){return log(this.context.dataflow,\x22debug\x22,arguments)}function channel_luminance_value(channelValue){channelValue/\x3d255;return.03928\x3e\x3dchannelValue?channelValue/12.92:Math.pow((channelValue+.055)/1.055,2.4)}function luminance(color){var c\x3dd3Color.rgb(color);color\x3dchannel_luminance_value(c.r);const g\x3dchannel_luminance_value(c.g);c\x3dchannel_luminance_value(c.b);\nreturn.2126*color+.7152*g+.0722*c}function contrast(color1,color2){color1\x3dluminance(color1);color2\x3dluminance(color2);return(Math.max(color1,color2)+.05)/(Math.min(color1,color2)+.05)}function merge(){const args\x3d[].slice.call(arguments);args.unshift({});return vegaUtil.extend(...args)}function equal(a,b){if(a\x3d\x3d\x3db||a!\x3d\x3da\x26\x26b!\x3d\x3db)a\x3d!0;else if(vegaUtil.isArray(a))if(vegaUtil.isArray(b)\x26\x26a.length\x3d\x3d\x3db.length)a:{for(let i\x3d0,n\x3da.length;i\x3cn;++i)if(!equal(a[i],b[i])){a\x3d!1;break a}a\x3d!0}else a\x3d!1;else a\x3dvegaUtil.isObject(a)\x26\x26\nvegaUtil.isObject(b)?equalObject(a,b):!1;return a}function equalObject(a,b){for(const key in a)if(!equal(a[key],b[key]))return!1;return!0}function removePredicate(props){return _\x3d\x3eequalObject(props,_)}function modify$jscomp$0(name,insert,remove,toggle,modify,values){const df\x3dthis.context.dataflow,data\x3dthis.context.data[name],input\x3ddata.input;name\x3ddf.stamp();let changes\x3ddata.changes,key;if(!1\x3d\x3d\x3ddf._trigger||!(input.value.length||insert||toggle))return 0;if(!changes||changes.stamp\x3cname)data.changes\x3d\nchanges\x3ddf.changeset(),changes.stamp\x3dname,df.runAfter(()\x3d\x3e{data.modified\x3d!0;df.pulse(input,changes).run()},!0,1);remove\x26\x26(remove\x3d!0\x3d\x3d\x3dremove?vegaUtil.truthy:vegaUtil.isArray(remove)||vegaDataflow.isTuple(remove)?remove:removePredicate(remove),changes.remove(remove));insert\x26\x26changes.insert(insert);toggle\x26\x26(remove\x3dremovePredicate(toggle),input.value.some(remove)?changes.remove(remove):changes.insert(toggle));if(modify)for(key in values)changes.modify(modify,key,values[key]);return 1}function pinchDistance(event){var t\x3d\nevent.touches;event\x3dt[0].clientX-t[1].clientX;t\x3dt[0].clientY-t[1].clientY;return Math.sqrt(event*event+t*t)}function pinchAngle(event){event\x3devent.touches;return Math.atan2(event[0].clientY-event[1].clientY,event[0].clientX-event[1].clientX)}function pluck(data,name){name\x3daccessors[name]||(accessors[name]\x3dvegaUtil.field(name));return vegaUtil.isArray(data)?data.map(name):name(data)}function array(seq){return vegaUtil.isArray(seq)||ArrayBuffer.isView(seq)?seq:null}function sequence(seq){return array(seq)||\n(vegaUtil.isString(seq)?seq:null)}function join(seq,...args){return array(seq).join(...args)}function indexof(seq,...args){return sequence(seq).indexOf(...args)}function lastindexof(seq,...args){return sequence(seq).lastIndexOf(...args)}function slice(seq,...args){return sequence(seq).slice(...args)}function replace(str,pattern,repl){vegaUtil.isFunction(repl)\x26\x26vegaUtil.error(\x22Function argument passed to replace.\x22);return String(str).replace(pattern,repl)}function reverse(seq){return array(seq).slice().reverse()}\nfunction bandspace(count,paddingInner,paddingOuter){return vegaScale.bandSpace(count||0,paddingInner||0,paddingOuter||0)}function bandwidth(name,group){return(name\x3dgetScale(name,(group||this).context))\x26\x26name.bandwidth?name.bandwidth():0}function copy(name,group){return(name\x3dgetScale(name,(group||this).context))?name.copy():void 0}function domain(name,group){return(name\x3dgetScale(name,(group||this).context))?name.domain():[]}function invert(name,range,group){return(name\x3dgetScale(name,(group||this).context))?\nvegaUtil.isArray(range)?(name.invertRange||name.invert)(range):(name.invert||name.invertExtent)(range):void 0}function range$jscomp$0(name,group){return(name\x3dgetScale(name,(group||this).context))\x26\x26name.range?name.range():[]}function scale$jscomp$0(name,value,group){return(name\x3dgetScale(name,(group||this).context))?name(value):void 0}function scaleGradient(scale,p0,p1,count,group){scale\x3dgetScale(scale,(group||this).context);const gradient\x3dvegaScenegraph.Gradient(p0,p1);p0\x3dscale.domain();p1\x3dp0[0];group\x3d\nvegaUtil.peek(p0);let fraction\x3dvegaUtil.identity;group-p1?fraction\x3dvegaScale.scaleFraction(scale,p1,group):scale\x3d(scale.interpolator?vegaScale.scale(\x22sequential\x22)().interpolator(scale.interpolator()):vegaScale.scale(\x22linear\x22)().interpolate(scale.interpolate()).range(scale.range())).domain([p1\x3d0,group\x3d1]);scale.ticks\x26\x26(p0\x3dscale.ticks(+count||15),p1!\x3d\x3dp0[0]\x26\x26p0.unshift(p1),group!\x3d\x3dvegaUtil.peek(p0)\x26\x26p0.push(group));p0.forEach(_\x3d\x3egradient.stop(fraction(_),scale(_)));return gradient}function geoShape(projection,\ngeojson,group){const p\x3dgetScale(projection,(group||this).context);return function(context){return p?p.path.context(context)(geojson):\x22\x22}}function pathShape(path){let p\x3dnull;return function(context){return context?vegaScenegraph.pathRender(context,p\x3dp||vegaScenegraph.pathParse(path)):path}}function treeNodes(name,context){name\x3ddata$jscomp$0.call(context,name);return name.root\x26\x26name.root.lookup||{}}function treePath(name,source,target){name\x3dtreeNodes(name,this);source\x3dname[source];target\x3dname[target];\nreturn source\x26\x26target?source.path(target).map(datum):void 0}function treeAncestors(name,node){return(name\x3dtreeNodes(name,this)[node])?name.ancestors().map(datum):void 0}function screen(){const w\x3d\x22undefined\x22!\x3d\x3dtypeof window\x26\x26window||null;return w?w.screen:{}}function windowSize(){const w\x3d\x22undefined\x22!\x3d\x3dtypeof window\x26\x26window||null;return w?[w.innerWidth,w.innerHeight]:[void 0,void 0]}function containerSize(){var view\x3dthis.context.dataflow;return(view\x3dview.container\x26\x26view.container())?[view.clientWidth,\nview.clientHeight]:[void 0,void 0]}function filter(opt){let p\x3dnull;if(opt){const types\x3dvegaUtil.array(opt.marktype),names\x3dvegaUtil.array(opt.markname);p\x3d_\x3d\x3e(!types.length||types.some(t\x3d\x3e_.marktype\x3d\x3d\x3dt))\x26\x26(!names.length||names.some(s\x3d\x3e_.name\x3d\x3d\x3ds))}return p}function expressionFunction(name,fn,visitor){if(1\x3d\x3d\x3darguments.length)return functionContext[name];functionContext[name]\x3dfn;visitor\x26\x26(astVisitors[name]\x3dvisitor);codeGenerator\x26\x26(codeGenerator.functions[name]\x3d\x22this.\x22+name);return this}var wrap\x3dmethod\x3d\x3e\nfunction(value,spec){return this.context.dataflow.locale()[method](spec)(value)};const format\x3dwrap(\x22format\x22),timeFormat\x3dwrap(\x22timeFormat\x22),utcFormat\x3dwrap(\x22utcFormat\x22),timeParse\x3dwrap(\x22timeParse\x22);wrap\x3dwrap(\x22utcParse\x22);const dateObj\x3dnew Date(2E3,0,1),geoArea\x3dgeoMethod(\x22area\x22,d3Geo.geoArea),geoBounds\x3dgeoMethod(\x22bounds\x22,d3Geo.geoBounds);d3Geo\x3dgeoMethod(\x22centroid\x22,d3Geo.geoCentroid);const accessors\x3d{},datum\x3dd\x3d\x3ed.data,functionContext\x3d{random(){return vegaStatistics.random()},cumulativeNormal:vegaStatistics.cumulativeNormal,\ncumulativeLogNormal:vegaStatistics.cumulativeLogNormal,cumulativeUniform:vegaStatistics.cumulativeUniform,densityNormal:vegaStatistics.densityNormal,densityLogNormal:vegaStatistics.densityLogNormal,densityUniform:vegaStatistics.densityUniform,quantileNormal:vegaStatistics.quantileNormal,quantileLogNormal:vegaStatistics.quantileLogNormal,quantileUniform:vegaStatistics.quantileUniform,sampleNormal:vegaStatistics.sampleNormal,sampleLogNormal:vegaStatistics.sampleLogNormal,sampleUniform:vegaStatistics.sampleUniform,\nisArray:vegaUtil.isArray,isBoolean:vegaUtil.isBoolean,isDate:vegaUtil.isDate,isDefined(_){return void 0!\x3d\x3d_},isNumber:vegaUtil.isNumber,isObject:vegaUtil.isObject,isRegExp:vegaUtil.isRegExp,isString:vegaUtil.isString,isTuple:vegaDataflow.isTuple,isValid(_){return null!\x3d_\x26\x26_\x3d\x3d\x3d_},toBoolean:vegaUtil.toBoolean,toDate:vegaUtil.toDate,toNumber:vegaUtil.toNumber,toString:vegaUtil.toString,indexof,join,lastindexof,replace,reverse,slice,flush:vegaUtil.flush,lerp:vegaUtil.lerp,merge,pad:vegaUtil.pad,peek:vegaUtil.peek,\npluck,span:vegaUtil.span,inrange:vegaUtil.inrange,truncate:vegaUtil.truncate,rgb:d3Color.rgb,lab:d3Color.lab,hcl:d3Color.hcl,hsl:d3Color.hsl,luminance,contrast,sequence:d3Array.range,format,utcFormat,utcParse:wrap,utcOffset:vegaTime.utcOffset,utcSequence:vegaTime.utcSequence,timeFormat,timeParse,timeOffset:vegaTime.timeOffset,timeSequence:vegaTime.timeSequence,timeUnitSpecifier:vegaTime.timeUnitSpecifier,monthFormat,monthAbbrevFormat,dayFormat,dayAbbrevFormat,quarter:vegaUtil.quarter,utcquarter:vegaUtil.utcquarter,\nweek:vegaTime.week,utcweek:vegaTime.utcweek,dayofyear:vegaTime.dayofyear,utcdayofyear:vegaTime.utcdayofyear,warn,info,debug,extent:vegaUtil.extent,inScope,intersect:function(b,opt,group){if(!b)return[];const [u,v]\x3db;b\x3d(new vegaScenegraph.Bounds).set(u[0],u[1],v[0],v[1]);group\x3dgroup||this.context.dataflow.scenegraph().root;return vegaScenegraph.intersect(group,b,filter(opt))},clampRange:vegaUtil.clampRange,pinchDistance,pinchAngle,screen,containerSize,windowSize,bandspace,setdata,pathShape,panLinear:vegaUtil.panLinear,\npanLog:vegaUtil.panLog,panPow:vegaUtil.panPow,panSymlog:vegaUtil.panSymlog,zoomLinear:vegaUtil.zoomLinear,zoomLog:vegaUtil.zoomLog,zoomPow:vegaUtil.zoomPow,zoomSymlog:vegaUtil.zoomSymlog,encode,modify:modify$jscomp$0},eventFunctions\x3d\x22view item group xy x y\x22.split(\x22 \x22),astVisitors\x3d{},codegenParams\x3d{forbidden:[\x22_\x22],allowed:[\x22datum\x22,\x22event\x22,\x22item\x22],fieldvar:\x22datum\x22,globalvar:id\x3d\x3e`_[${vegaUtil.stringValue(\x22$\x22+id)}]`,functions:function(codegen){const fn\x3dvegaExpression.functions(codegen);eventFunctions.forEach(name\x3d\x3e\nfn[name]\x3d\x22event.vega.\x22+name);for(const name in functionContext)fn[name]\x3d\x22this.\x22+name;vegaUtil.extend(fn,internalScaleFunctions(codegen,functionContext,astVisitors));return fn},constants:vegaExpression.constants,visitors:astVisitors},codeGenerator\x3dvegaExpression.codegen(codegenParams);expressionFunction(\x22bandwidth\x22,bandwidth,scaleVisitor);expressionFunction(\x22copy\x22,copy,scaleVisitor);expressionFunction(\x22domain\x22,domain,scaleVisitor);expressionFunction(\x22range\x22,range$jscomp$0,scaleVisitor);expressionFunction(\x22invert\x22,\ninvert,scaleVisitor);expressionFunction(\x22scale\x22,scale$jscomp$0,scaleVisitor);expressionFunction(\x22gradient\x22,scaleGradient,scaleVisitor);expressionFunction(\x22geoArea\x22,geoArea,scaleVisitor);expressionFunction(\x22geoBounds\x22,geoBounds,scaleVisitor);expressionFunction(\x22geoCentroid\x22,d3Geo,scaleVisitor);expressionFunction(\x22geoShape\x22,geoShape,scaleVisitor);expressionFunction(\x22indata\x22,indata,indataVisitor);expressionFunction(\x22data\x22,data$jscomp$0,dataVisitor);expressionFunction(\x22treePath\x22,treePath,dataVisitor);\nexpressionFunction(\x22treeAncestors\x22,treeAncestors,dataVisitor);expressionFunction(\x22vlSelectionTest\x22,vegaSelections.selectionTest,vegaSelections.selectionVisitor);expressionFunction(\x22vlSelectionIdTest\x22,vegaSelections.selectionIdTest,vegaSelections.selectionVisitor);expressionFunction(\x22vlSelectionResolve\x22,vegaSelections.selectionResolve,vegaSelections.selectionVisitor);expressionFunction(\x22vlSelectionTuples\x22,vegaSelections.selectionTuples);exports.DataPrefix\x3d\x22:\x22;exports.IndexPrefix\x3d\x22@\x22;exports.ScalePrefix\x3d\n\x22%\x22;exports.SignalPrefix\x3d\x22$\x22;exports.bandspace\x3dbandspace;exports.bandwidth\x3dbandwidth;exports.codeGenerator\x3dcodeGenerator;exports.codegenParams\x3dcodegenParams;exports.containerSize\x3dcontainerSize;exports.contrast\x3dcontrast;exports.copy\x3dcopy;exports.data\x3ddata$jscomp$0;exports.dataVisitor\x3ddataVisitor;exports.dayAbbrevFormat\x3ddayAbbrevFormat;exports.dayFormat\x3ddayFormat;exports.debug\x3ddebug;exports.domain\x3ddomain;exports.encode\x3dencode;exports.expressionFunction\x3dexpressionFunction;exports.format\x3dformat;exports.functionContext\x3d\nfunctionContext;exports.geoArea\x3dgeoArea;exports.geoBounds\x3dgeoBounds;exports.geoCentroid\x3dd3Geo;exports.geoShape\x3dgeoShape;exports.inScope\x3dinScope;exports.indata\x3dindata;exports.indataVisitor\x3dindataVisitor;exports.indexof\x3dindexof;exports.info\x3dinfo;exports.invert\x3dinvert;exports.join\x3djoin;exports.lastindexof\x3dlastindexof;exports.luminance\x3dluminance;exports.merge\x3dmerge;exports.modify\x3dmodify$jscomp$0;exports.monthAbbrevFormat\x3dmonthAbbrevFormat;exports.monthFormat\x3dmonthFormat;exports.parseExpression\x3dfunction(expr,\nscope){const params\x3d{};let ast;try{expr\x3dvegaUtil.isString(expr)?expr:vegaUtil.stringValue(expr)+\x22\x22,ast\x3dvegaExpression.parse(expr)}catch(err){vegaUtil.error(\x22Expression parse error: \x22+expr)}ast.visit(node\x3d\x3e{if(node.type\x3d\x3d\x3dvegaExpression.CallExpression){var name\x3dnode.callee.name,visit\x3dcodegenParams.visitors[name];visit\x26\x26visit(name,node.arguments,scope,params)}});expr\x3dcodeGenerator(ast);expr.globals.forEach(name\x3d\x3e{const signalName\x3d\x22$\x22+name;!vegaUtil.hasOwnProperty(params,signalName)\x26\x26scope.getSignal(name)\x26\x26\n(params[signalName]\x3dscope.signalRef(name))});return{$expr:vegaUtil.extend({code:expr.code},scope.options.ast?{ast}:null),$fields:expr.fields,$params:params}};exports.pathShape\x3dpathShape;exports.pinchAngle\x3dpinchAngle;exports.pinchDistance\x3dpinchDistance;exports.pluck\x3dpluck;exports.range\x3drange$jscomp$0;exports.replace\x3dreplace;exports.reverse\x3dreverse;exports.scale\x3dscale$jscomp$0;exports.scaleGradient\x3dscaleGradient;exports.scaleVisitor\x3dscaleVisitor;exports.screen\x3dscreen;exports.setdata\x3dsetdata;exports.slice\x3d\nslice;exports.timeFormat\x3dtimeFormat;exports.timeParse\x3dtimeParse;exports.treeAncestors\x3dtreeAncestors;exports.treePath\x3dtreePath;exports.utcFormat\x3dutcFormat;exports.utcParse\x3dwrap;exports.warn\x3dwarn;exports.windowSize\x3dwindowSize;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_runtime$build$vega_runtime.js", true , "shadow$provide.module$node_modules$vega_runtime$build$vega_runtime\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22,\x22vega-util\x22,\x22vega-dataflow\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:\nglobal||self,factory(global.vega\x3d{},global.vega,global.vega))})(this,function(exports,vegaUtil,vegaDataflow){function expression(ctx,args,code){\x22;\x22!\x3d\x3dcode[code.length-1]\x26\x26(code\x3d\x22return(\x22+code+\x22);\x22);args\x3dFunction(...args.concat(code));return ctx\x26\x26ctx.functions?args.bind(ctx.functions):args}function parseParameter(spec,ctx,params){if(!spec||!vegaUtil.isObject(spec))return spec;for(let i\x3d0,n\x3dPARSERS.length,p;i\x3cn;++i)if(p\x3dPARSERS[i],vegaUtil.hasOwnProperty(spec,p.key))return p.parse(spec,ctx,params);\nreturn spec}function Context(df,transforms,functions,expr){this.dataflow\x3ddf;this.transforms\x3dtransforms;this.events\x3ddf.events.bind(df);this.expr\x3dexpr||expressionCodegen;this.signals\x3d{};this.scales\x3d{};this.nodes\x3d{};this.data\x3d{};this.fn\x3d{};functions\x26\x26(this.functions\x3dObject.create(functions),this.functions.context\x3dthis)}function Subcontext(ctx){this.dataflow\x3dctx.dataflow;this.transforms\x3dctx.transforms;this.events\x3dctx.events;this.expr\x3dctx.expr;this.signals\x3dObject.create(ctx.signals);this.scales\x3dObject.create(ctx.scales);\nthis.nodes\x3dObject.create(ctx.nodes);this.data\x3dObject.create(ctx.data);this.fn\x3dObject.create(ctx.fn);ctx.functions\x26\x26(this.functions\x3dObject.create(ctx.functions),this.functions.context\x3dthis)}const Skip\x3dvegaUtil.toSet([\x22rule\x22]),Swap\x3dvegaUtil.toSet([\x22group\x22,\x22image\x22,\x22rect\x22]);var expressionCodegen\x3d{operator:(ctx,expr)\x3d\x3eexpression(ctx,[\x22_\x22],expr.code),parameter:(ctx,expr)\x3d\x3eexpression(ctx,[\x22datum\x22,\x22_\x22],expr.code),event:(ctx,expr)\x3d\x3eexpression(ctx,[\x22event\x22],expr.code),handler:(ctx,expr)\x3d\x3eexpression(ctx,[\x22_\x22,\n\x22event\x22],`var datum\x3devent.item\x26\x26event.item.datum;return ${expr.code};`),encode:(ctx,encode)\x3d\x3e{const {marktype,channels}\x3dencode;encode\x3d\x22var o\\x3ditem,datum\\x3do.datum,m\\x3d0,$;\x22;for(var name in channels){const o\x3d\x22o[\x22+vegaUtil.stringValue(name)+\x22]\x22;encode+\x3d`$\x3d${channels[name].code};if(${o}!\x3d\x3d$)${o}\x3d$,m\x3d1;`}name\x3d\x22\x22;Skip[marktype]||(channels.x2\x26\x26(channels.x?(Swap[marktype]\x26\x26(name+\x3d\x22if(o.x\\x3eo.x2)$\\x3do.x,o.x\\x3do.x2,o.x2\\x3d$;\x22),name+\x3d\x22o.width\\x3do.x2-o.x;\x22):name+\x3d\x22o.x\\x3do.x2-(o.width||0);\x22),channels.xc\x26\x26\n(name+\x3d\x22o.x\\x3do.xc-(o.width||0)/2;\x22),channels.y2\x26\x26(channels.y?(Swap[marktype]\x26\x26(name+\x3d\x22if(o.y\\x3eo.y2)$\\x3do.y,o.y\\x3do.y2,o.y2\\x3d$;\x22),name+\x3d\x22o.height\\x3do.y2-o.y;\x22):name+\x3d\x22o.y\\x3do.y2-(o.height||0);\x22),channels.yc\x26\x26(name+\x3d\x22o.y\\x3do.yc-(o.height||0)/2;\x22));encode+\x3dname;return expression(ctx,[\x22item\x22,\x22_\x22],encode+\x22return m;\x22)},codegen:{get(path){path\x3d`[${path.map(vegaUtil.stringValue).join(\x22][\x22)}]`;const get\x3dFunction(\x22_\x22,`return _${path};`);get.path\x3dpath;return get},comparator(fields,orders){let t;fields\x3d\nFunction(\x22a\x22,\x22b\x22,\x22var u, v; return \x22+fields.map((f,i)\x3d\x3e{const o\x3dorders[i];let u;f.path?(u\x3d`a${f.path}`,f\x3d`b${f.path}`):((t\x3dt||{})[\x22f\x22+i]\x3df,u\x3d`this.f${i}(a)`,f\x3d`this.f${i}(b)`);i\x3d-o;return`((u \x3d ${u}) \x3c (v \x3d ${f}) || u \x3d\x3d null) \x26\x26 v !\x3d null ? ${i}\n  : (u \x3e v || v \x3d\x3d null) \x26\x26 u !\x3d null ? ${o}\n  : ((v \x3d v instanceof Date ? +v : v), (u \x3d u instanceof Date ? +u : u)) !\x3d\x3d u \x26\x26 v \x3d\x3d\x3d v ? ${i}\n  : v !\x3d\x3d v \x26\x26 u \x3d\x3d\x3d u ? ${o} : `}).join(\x22\x22)+\x220;\x22);return t?fields.bind(t):fields}}},PARSERS\x3d[{key:\x22$ref\x22,parse:function(_,ctx){return ctx.get(_.$ref)||vegaUtil.error(\x22Operator not defined: \x22+_.$ref)}},{key:\x22$key\x22,parse:function(_,ctx){const k\x3d\x22k:\x22+_.$key+\x22_\x22+!!_.$flat;return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.key(_.$key,_.$flat,ctx.expr.codegen))}},{key:\x22$expr\x22,parse:function(_,ctx,params){_.$params\x26\x26ctx.parseParameters(_.$params,params);params\x3d\x22e:\x22+_.$expr.code+\x22_\x22+_.$name;return ctx.fn[params]||(ctx.fn[params]\x3d\nvegaUtil.accessor(ctx.parameterExpression(_.$expr),_.$fields,_.$name))}},{key:\x22$field\x22,parse:function(_,ctx){if(!_.$field)return null;const k\x3d\x22f:\x22+_.$field+\x22_\x22+_.$name;return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.field(_.$field,_.$name,ctx.expr.codegen))}},{key:\x22$encode\x22,parse:function(_,ctx){_\x3d_.$encode;const encode\x3d{};for(const name in _){const enc\x3d_[name];encode[name]\x3dvegaUtil.accessor(ctx.encodeExpression(enc.$expr),enc.$fields);encode[name].output\x3denc.$output}return encode}},{key:\x22$compare\x22,parse:function(_$jscomp$0,\nctx){const k\x3d\x22c:\x22+_$jscomp$0.$compare+\x22_\x22+_$jscomp$0.$order,c\x3dvegaUtil.array(_$jscomp$0.$compare).map(_\x3d\x3e_\x26\x26_.$tupleid?vegaDataflow.tupleid:_);return ctx.fn[k]||(ctx.fn[k]\x3dvegaUtil.compare(c,_$jscomp$0.$order,ctx.expr.codegen))}},{key:\x22$context\x22,parse:function(_,ctx){return ctx}},{key:\x22$subflow\x22,parse:function(_,ctx){const spec\x3d_.$subflow;return function(dataflow,key,parent){const subctx\x3dctx.fork().parse(spec);dataflow\x3dsubctx.get(spec.operators[0].id);(key\x3dsubctx.signals.parent)\x26\x26key.set(parent);\ndataflow.detachSubflow\x3d()\x3d\x3ectx.detach(subctx);return dataflow}}},{key:\x22$tupleid\x22,parse:function(){return vegaDataflow.tupleid}}];const SKIP\x3d{skip:!0};Context.prototype\x3dSubcontext.prototype\x3d{fork(){const ctx\x3dnew Subcontext(this);(this.subcontext||(this.subcontext\x3d[])).push(ctx);return ctx},detach(ctx){this.subcontext\x3dthis.subcontext.filter(c\x3d\x3ec!\x3d\x3dctx);const keys\x3dObject.keys(ctx.nodes);for(const key of keys)ctx.nodes[key]._targets\x3dnull;for(const key of keys)ctx.nodes[key].detach();ctx.nodes\x3dnull},get(id){return this.nodes[id]},\nset(id,node){return this.nodes[id]\x3dnode},add(spec,op){const ctx\x3dthis,df\x3dctx.dataflow,data$jscomp$0\x3dspec.value;ctx.set(spec.id,op);\x22collect\x22\x3d\x3d\x3d(spec.type+\x22\x22).toLowerCase()\x26\x26data$jscomp$0\x26\x26(data$jscomp$0.$ingest?df.ingest(op,data$jscomp$0.$ingest,data$jscomp$0.$format):data$jscomp$0.$request?df.preload(op,data$jscomp$0.$request,data$jscomp$0.$format):df.pulse(op,df.changeset().insert(data$jscomp$0)));spec.root\x26\x26(ctx.root\x3dop);if(spec.parent){let p\x3dctx.get(spec.parent.$ref);p?(df.connect(p,[op]),op.targets().add(p)):\n(ctx.unresolved\x3dctx.unresolved||[]).push(()\x3d\x3e{p\x3dctx.get(spec.parent.$ref);df.connect(p,[op]);op.targets().add(p)})}spec.signal\x26\x26(ctx.signals[spec.signal]\x3dop);spec.scale\x26\x26(ctx.scales[spec.scale]\x3dop);if(spec.data)for(const name in spec.data){const data\x3dctx.data[name]||(ctx.data[name]\x3d{});spec.data[name].forEach(role\x3d\x3edata[role]\x3dop)}},resolve(){(this.unresolved||[]).forEach(fn\x3d\x3efn());delete this.unresolved;return this},operator(spec,update){this.add(spec,this.dataflow.add(spec.value,update))},transform(spec,\ntype){this.add(spec,this.dataflow.add(this.transforms[(type+\x22\x22).toLowerCase()]))},stream(spec,stream){this.set(spec.id,stream)},update(spec,stream,target,update,params){this.dataflow.on(stream,target,update,params,spec.options)},operatorExpression(expr){return this.expr.operator(this,expr)},parameterExpression(expr){return this.expr.parameter(this,expr)},eventExpression(expr){return this.expr.event(this,expr)},handlerExpression(expr){return this.expr.handler(this,expr)},encodeExpression(encode){return this.expr.encode(this,\nencode)},parse:function(spec){const ctx\x3dthis,operators\x3dspec.operators||[];spec.background\x26\x26(ctx.background\x3dspec.background);spec.eventConfig\x26\x26(ctx.eventConfig\x3dspec.eventConfig);spec.locale\x26\x26(ctx.locale\x3dspec.locale);operators.forEach(entry\x3d\x3ectx.parseOperator(entry));operators.forEach(entry\x3d\x3ectx.parseOperatorParameters(entry));(spec.streams||[]).forEach(entry\x3d\x3ectx.parseStream(entry));(spec.updates||[]).forEach(entry\x3d\x3ectx.parseUpdate(entry));return ctx.resolve()},parseOperator:function(spec){\x22operator\x22!\x3d\x3d\n(spec.type+\x22\x22).toLowerCase()\x26\x26spec.type?this.transform(spec,spec.type):this.operator(spec,spec.update?this.operatorExpression(spec.update):null)},parseOperatorParameters:function(spec){if(spec.params){const op\x3dthis.get(spec.id);op||vegaUtil.error(\x22Invalid operator id: \x22+spec.id);this.dataflow.connect(op,op.parameters(this.parseParameters(spec.params),spec.react,spec.initonly))}},parseParameters:function(spec,params){params\x3dparams||{};const ctx\x3dthis;for(const key in spec){const value\x3dspec[key];params[key]\x3d\nvegaUtil.isArray(value)?value.map(v\x3d\x3eparseParameter(v,ctx,params)):parseParameter(value,ctx,params)}return params},parseStream:function(spec){var ctx\x3dthis,filter\x3dnull!\x3dspec.filter?ctx.eventExpression(spec.filter):void 0,stream\x3dnull!\x3dspec.stream?ctx.get(spec.stream):void 0;if(spec.source)stream\x3dctx.events(spec.source,spec.type,filter);else if(spec.merge){var args\x3dspec.merge.map(_\x3d\x3ectx.get(_));stream\x3dargs[0].merge.apply(args[0],args.slice(1))}spec.between\x26\x26(args\x3dspec.between.map(_\x3d\x3ectx.get(_)),stream\x3d\nstream.between(args[0],args[1]));spec.filter\x26\x26(stream\x3dstream.filter(filter));null!\x3dspec.throttle\x26\x26(stream\x3dstream.throttle(+spec.throttle));null!\x3dspec.debounce\x26\x26(stream\x3dstream.debounce(+spec.debounce));null\x3d\x3dstream\x26\x26vegaUtil.error(\x22Invalid stream definition: \x22+JSON.stringify(spec));spec.consume\x26\x26stream.consume(!0);ctx.stream(spec,stream)},parseUpdate:function(spec){var srcid\x3dvegaUtil.isObject(srcid\x3dspec.source)?srcid.$ref:srcid;srcid\x3dthis.get(srcid);var update\x3dspec.update,params\x3dvoid 0;srcid||vegaUtil.error(\x22Source not defined: \x22+\nspec.source);var target\x3dspec.target\x26\x26spec.target.$expr?this.eventExpression(spec.target.$expr):this.get(spec.target);update\x26\x26update.$expr\x26\x26(update.$params\x26\x26(params\x3dthis.parseParameters(update.$params)),update\x3dthis.handlerExpression(update.$expr));this.update(spec,srcid,target,update,params)},getState:function(options){var ctx$jscomp$0\x3dthis,state\x3d{};if(options.signals){var signals\x3dstate.signals\x3d{};Object.keys(ctx$jscomp$0.signals).forEach(key\x3d\x3e{const op\x3dctx$jscomp$0.signals[key];options.signals(key,\nop)\x26\x26(signals[key]\x3dop.value)})}if(options.data){var data\x3dstate.data\x3d{};Object.keys(ctx$jscomp$0.data).forEach(key\x3d\x3e{const dataset\x3dctx$jscomp$0.data[key];options.data(key,dataset)\x26\x26(data[key]\x3ddataset.input.value)})}ctx$jscomp$0.subcontext\x26\x26!1!\x3d\x3doptions.recurse\x26\x26(state.subcontext\x3dctx$jscomp$0.subcontext.map(ctx\x3d\x3ectx.getState(options)));return state},setState:function(state){var ctx\x3dthis,df\x3dctx.dataflow,data\x3dstate.data,signals\x3dstate.signals;Object.keys(signals||{}).forEach(key\x3d\x3e{df.update(ctx.signals[key],\nsignals[key],SKIP)});Object.keys(data||{}).forEach(key\x3d\x3e{df.pulse(ctx.data[key].input,df.changeset().remove(vegaUtil.truthy).insert(data[key]))});(state.subcontext||[]).forEach((substate,i)\x3d\x3e{(i\x3dctx.subcontext[i])\x26\x26i.setState(substate)})}};exports.context\x3dfunction(df,transforms,functions,expr){return new Context(df,transforms,functions,expr)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_view$build$vega_view.js", true , "shadow$provide.module$node_modules$vega_view$build$vega_view\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),require(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),require(\x22module$node_modules$d3_array$dist$d3_array\x22),require(\x22module$node_modules$vega_functions$build$vega_functions\x22),\nrequire(\x22module$node_modules$vega_runtime$build$vega_runtime\x22),require(\x22module$node_modules$d3_timer$dist$d3_timer\x22),require(\x22module$node_modules$vega_format$build$vega_format\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-dataflow vega-scenegraph d3-array vega-functions vega-runtime d3-timer vega-format\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.d3,global.vega,global.vega,\nglobal.d3,global.vega))})(this,function(exports,vegaUtil,vegaDataflow,vegaScenegraph,d3Array,vegaFunctions,vegaRuntime,d3Timer,vegaFormat){function initializeAria(view){const el\x3dview.container();el\x26\x26(el.setAttribute(\x22role\x22,\x22graphics-document\x22),el.setAttribute(\x22aria-roleDescription\x22,\x22visualization\x22),ariaLabel(el,view.description()))}function ariaLabel(el,desc){el\x26\x26(null\x3d\x3ddesc?el.removeAttribute(\x22aria-label\x22):el.setAttribute(\x22aria-label\x22,desc))}function background(view){view.add(null,_\x3d\x3e{view._background\x3d\n_.bg;view._resize\x3d1;return _.bg},{bg:view._signals.background})}function cursor$jscomp$0(view){const cursor\x3dview._signals.cursor||(view._signals.cursor\x3dview.add({user:\x22default\x22,item:null}));view.on(view.events(\x22view\x22,\x22mousemove\x22),cursor,(_,event)\x3d\x3e{const user\x3d(_\x3dcursor.value)?vegaUtil.isString(_)?_:_.user:\x22default\x22;event\x3devent.item\x26\x26event.item.cursor||null;return _\x26\x26user\x3d\x3d\x3d_.user\x26\x26event\x3d\x3d_.item?_:{user,item:event}});view.add(null,function(_){_\x3d_.cursor;let item\x3dthis.value;vegaUtil.isString(_)||(item\x3d\n_.item,_\x3d_.user);setCursor(view,_\x26\x26\x22default\x22!\x3d\x3d_?_:item||_);return item},{cursor})}function setCursor(view,cursor){if(view\x3dview.globalCursor()?\x22undefined\x22!\x3d\x3dtypeof document\x26\x26document.body:view.container())return null\x3d\x3dcursor?view.style.removeProperty(\x22cursor\x22):view.style.cursor\x3dcursor}function dataref(view,name){view\x3dview._runtime.data;vegaUtil.hasOwnProperty(view,name)||vegaUtil.error(\x22Unrecognized data set: \x22+name);return view[name]}function change(name,changes){vegaDataflow.isChangeSet(changes)||\nvegaUtil.error(\x22Second argument to changes must be a changeset.\x22);name\x3ddataref(this,name);name.modified\x3d!0;return this.pulse(name.input,changes)}function width$jscomp$0(view){var padding\x3dview.padding();return Math.max(0,view._viewWidth+padding.left+padding.right)}function height$jscomp$0(view){var padding\x3dview.padding();return Math.max(0,view._viewHeight+padding.top+padding.bottom)}function offset(view){var padding\x3dview.padding();view\x3dview._origin;return[padding.left+view[0],padding.top+view[1]]}\nfunction resizeRenderer(view){var origin\x3doffset(view),w\x3dwidth$jscomp$0(view),h\x3dheight$jscomp$0(view);view._renderer.background(view.background());view._renderer.resize(w,h,origin);view._handler.origin(origin);view._resizeListeners.forEach(handler\x3d\x3e{try{handler(w,h)}catch(error){view.error(error)}})}function eventExtend(view,event,item){var r\x3dview._renderer;r\x3dr\x26\x26r.canvas();if(r){var translate\x3doffset(view);var p\x3devent.changedTouches?event.changedTouches[0]:event;p\x3dvegaScenegraph.point(p,r);p[0]-\x3dtranslate[0];\np[1]-\x3dtranslate[1]}event.dataflow\x3dview;event.item\x3ditem;event.vega\x3dextension(view,item,p);return event}function extension(view,item$jscomp$0,point){function group(name){var g\x3ditemGroup,i;if(name)for(i\x3ditem$jscomp$0;i;i\x3di.mark.group)if(i.mark.name\x3d\x3d\x3dname){g\x3di;break}return g\x26\x26g.mark\x26\x26g.mark.interactive?g:{}}function xy(item){if(!item)return point;vegaUtil.isString(item)\x26\x26(item\x3dgroup(item));const p\x3dpoint.slice();for(;item;)p[0]-\x3ditem.x||0,p[1]-\x3ditem.y||0,item\x3ditem.mark\x26\x26item.mark.group;return p}const itemGroup\x3d\nitem$jscomp$0?\x22group\x22\x3d\x3d\x3ditem$jscomp$0.mark.marktype?item$jscomp$0:item$jscomp$0.mark.group:null;return{view:vegaUtil.constant(view),item:vegaUtil.constant(item$jscomp$0||{}),group,xy,x:item\x3d\x3exy(item)[0],y:item\x3d\x3exy(item)[1]}}function initializeEventConfig(config){config\x3dvegaUtil.extend({defaults:{}},config);const unpack\x3d(obj,keys)\x3d\x3e{keys.forEach(k\x3d\x3e{vegaUtil.isArray(obj[k])\x26\x26(obj[k]\x3dvegaUtil.toSet(obj[k]))})};unpack(config.defaults,[\x22prevent\x22,\x22allow\x22]);unpack(config,[\x22view\x22,\x22window\x22,\x22selector\x22]);return config}\nfunction trackEventListener(view,sources,type,handler){view._eventListeners.push({type,sources:vegaUtil.array(sources),handler})}function permit(view,key,type){const rule\x3dview._eventConfig\x26\x26view._eventConfig[key];return!1\x3d\x3d\x3drule||vegaUtil.isObject(rule)\x26\x26!rule[type]?(view.warn(`Blocked ${key} ${type} event listener.`),!1):!0}function itemFilter(event){return event.item}function markTarget(event){return event.item.mark.source}function invoke(name){return function(_,event){return event.vega.view().changeset().encode(event.item,\nname)}}function element(tag,attr,text){tag\x3ddocument.createElement(tag);for(const key in attr)tag.setAttribute(key,attr[key]);null!\x3dtext\x26\x26(tag.textContent\x3dtext);return tag}function bind$jscomp$0(view,el,binding){if(el){var param\x3dbinding.param,bind\x3dbinding.state;bind||(bind\x3dbinding.state\x3d{elements:null,active:!1,set:null,update:value\x3d\x3e{value!\x3dview.signal(param.signal)\x26\x26view.runAsync(null,()\x3d\x3e{bind.source\x3d!0;view.signal(param.signal,value)})}},param.debounce\x26\x26(bind.update\x3dvegaUtil.debounce(param.debounce,\nbind.update)));(null\x3d\x3dparam.input\x26\x26param.element?target:generate)(bind,el,param,view);bind.active||(view.on(view._signals[param.signal],null,()\x3d\x3e{bind.source?bind.source\x3d!1:bind.set(view.signal(param.signal))}),bind.active\x3d!0);return bind}}function target(bind,node,param,view){const type\x3dparam.event||\x22input\x22,handler\x3d()\x3d\x3ebind.update(node.value);view.signal(param.signal,node.value);node.addEventListener(type,handler);trackEventListener(view,node,type,handler);bind.set\x3dvalue\x3d\x3e{node.value\x3dvalue;node.dispatchEvent(event$jscomp$0(type))}}\nfunction event$jscomp$0(type){return\x22undefined\x22!\x3d\x3dtypeof Event?new Event(type):{type}}function generate(bind,el,param,view){view\x3dview.signal(param.signal);const div\x3delement(\x22div\x22,{\x22class\x22:\x22vega-bind\x22}),wrapper\x3d\x22radio\x22\x3d\x3d\x3dparam.input?div:div.appendChild(element(\x22label\x22));wrapper.appendChild(element(\x22span\x22,{\x22class\x22:\x22vega-bind-name\x22},param.name||param.signal));el.appendChild(div);el\x3dform;switch(param.input){case \x22checkbox\x22:el\x3dcheckbox;break;case \x22select\x22:el\x3dselect;break;case \x22radio\x22:el\x3dradio;break;case \x22range\x22:el\x3d\nrange}el(bind,wrapper,param,view)}function form(bind,el,param,value$jscomp$0){const node\x3delement(\x22input\x22);for(const key in param)\x22signal\x22!\x3d\x3dkey\x26\x26\x22element\x22!\x3d\x3dkey\x26\x26node.setAttribute(\x22input\x22\x3d\x3d\x3dkey?\x22type\x22:key,param[key]);node.setAttribute(\x22name\x22,param.signal);node.value\x3dvalue$jscomp$0;el.appendChild(node);node.addEventListener(\x22input\x22,()\x3d\x3ebind.update(node.value));bind.elements\x3d[node];bind.set\x3dvalue\x3d\x3enode.value\x3dvalue}function checkbox(bind,el,param,value$jscomp$0){param\x3d{type:\x22checkbox\x22,name:param.signal};\nvalue$jscomp$0\x26\x26(param.checked\x3d!0);const node\x3delement(\x22input\x22,param);el.appendChild(node);node.addEventListener(\x22change\x22,()\x3d\x3ebind.update(node.checked));bind.elements\x3d[node];bind.set\x3dvalue\x3d\x3enode.checked\x3d!!value||null}function select(bind,el,param,value$jscomp$0){const node\x3delement(\x22select\x22,{name:param.signal}),labels\x3dparam.labels||[];param.options.forEach((option,i)\x3d\x3e{const attr\x3d{value:option};valuesEqual(option,value$jscomp$0)\x26\x26(attr.selected\x3d!0);node.appendChild(element(\x22option\x22,attr,(labels[i]||\noption)+\x22\x22))});el.appendChild(node);node.addEventListener(\x22change\x22,()\x3d\x3e{bind.update(param.options[node.selectedIndex])});bind.elements\x3d[node];bind.set\x3dvalue\x3d\x3e{for(let i\x3d0,n\x3dparam.options.length;i\x3cn;++i)if(valuesEqual(param.options[i],value)){node.selectedIndex\x3di;break}}}function radio(bind,el,param,value$jscomp$0){const group\x3delement(\x22span\x22,{\x22class\x22:\x22vega-bind-radio\x22}),labels\x3dparam.labels||[];el.appendChild(group);bind.elements\x3dparam.options.map((option,i)\x3d\x3e{var attr\x3d{type:\x22radio\x22,name:param.signal,\nvalue:option};valuesEqual(option,value$jscomp$0)\x26\x26(attr.checked\x3d!0);attr\x3delement(\x22input\x22,attr);attr.addEventListener(\x22change\x22,()\x3d\x3ebind.update(option));i\x3delement(\x22label\x22,{},(labels[i]||option)+\x22\x22);i.prepend(attr);group.appendChild(i);return attr});bind.set\x3dvalue\x3d\x3e{const nodes\x3dbind.elements,n\x3dnodes.length;for(let i\x3d0;i\x3cn;++i)valuesEqual(nodes[i].value,value)\x26\x26(nodes[i].checked\x3d!0)}}function range(bind,el,param,value$jscomp$0){value$jscomp$0\x3dvoid 0!\x3d\x3dvalue$jscomp$0?value$jscomp$0:(+param.max+ +param.min)/\n2;const max\x3dnull!\x3dparam.max?param.max:Math.max(100,+value$jscomp$0)||100,min\x3dparam.min||Math.min(0,max,+value$jscomp$0)||0,step\x3dparam.step||d3Array.tickStep(min,max,100),node\x3delement(\x22input\x22,{type:\x22range\x22,name:param.signal,min,max,step});node.value\x3dvalue$jscomp$0;const span\x3delement(\x22span\x22,{},+value$jscomp$0);el.appendChild(node);el.appendChild(span);el\x3d()\x3d\x3e{span.textContent\x3dnode.value;bind.update(+node.value)};node.addEventListener(\x22input\x22,el);node.addEventListener(\x22change\x22,el);bind.elements\x3d[node];\nbind.set\x3dvalue\x3d\x3e{node.value\x3dvalue;span.textContent\x3dvalue}}function valuesEqual(a,b){return a\x3d\x3d\x3db||a+\x22\x22\x3d\x3d\x3db+\x22\x22}function initializeRenderer(view,r,el,constructor,scaleFactor,opt){r\x3dr||new constructor(view.loader());return r.initialize(el,width$jscomp$0(view),height$jscomp$0(view),offset(view),scaleFactor,opt).background(view.background())}function trap(view,fn){return fn?function(){try{fn.apply(this,arguments)}catch(error){view.error(error)}}:null}function initializeHandler(view,prevHandler,el,constructor){const handler\x3d\n(new constructor(view.loader(),trap(view,view.tooltip()))).scene(view.scenegraph().root).initialize(el,offset(view),view);prevHandler\x26\x26prevHandler.handlers().forEach(h\x3d\x3e{handler.on(h.type,h.handler)});return handler}function lookup(view,el,clear){if(\x22string\x22\x3d\x3d\x3dtypeof el)if(\x22undefined\x22!\x3d\x3dtypeof document){if(el\x3ddocument.querySelector(el),!el)return view.error(\x22Signal bind element not found: \x22+el),null}else return view.error(\x22DOM document instance not found.\x22),null;if(el\x26\x26clear)try{el.innerHTML\x3d\x22\x22}catch(e){el\x3d\nnull,view.error(e)}return el}function padding$jscomp$0(_){vegaUtil.isObject(_)?_\x3d{top:+_.top||0,bottom:+_.bottom||0,left:+_.left||0,right:+_.right||0}:(_\x3d+_||0,_\x3d{top:_,bottom:_,left:_,right:_});return _}function renderHeadless(view,type,scaleFactor,opt){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var module\x3dvegaScenegraph.renderModule(type);(module\x3dmodule\x26\x26module.headless)||vegaUtil.error(\x22Unrecognized renderer type: \x22+type);yield view.runAsync();return initializeRenderer(view,\nnull,null,module,scaleFactor,opt).renderAsync(view._scenegraph.root)})}function runtime(view,spec,expr){return vegaRuntime.context(view,vegaDataflow.transforms,vegaFunctions.functionContext,expr).parse(spec)}function viewWidth$jscomp$0(view,width){var a\x3dview.autosize();view\x3dview.padding();return width-(a\x26\x26\x22padding\x22\x3d\x3d\x3da.contains?view.left+view.right:0)}function viewHeight$jscomp$0(view,height){var a\x3dview.autosize();view\x3dview.padding();return height-(a\x26\x26\x22padding\x22\x3d\x3d\x3da.contains?view.top+view.bottom:0)}\nfunction initializeResize(view){function resetSize(){view._autosize\x3dview._resize\x3d1}var s\x3dview._signals,w\x3ds.width,h\x3ds.height;s\x3ds.padding;view._resizeWidth\x3dview.add(null,_\x3d\x3e{view._width\x3d_.size;view._viewWidth\x3dviewWidth$jscomp$0(view,_.size);resetSize()},{size:w});view._resizeHeight\x3dview.add(null,_\x3d\x3e{view._height\x3d_.size;view._viewHeight\x3dviewHeight$jscomp$0(view,_.size);resetSize()},{size:h});const resizePadding\x3dview.add(null,resetSize,{pad:s});view._resizeWidth.rank\x3dw.rank+1;view._resizeHeight.rank\x3d\nh.rank+1;resizePadding.rank\x3ds.rank+1}function dataTest(name,data){return data.modified\x26\x26vegaUtil.isArray(data.input.value)\x26\x26name.indexOf(\x22_:vega:_\x22)}function signalTest(name,op){return!(\x22parent\x22\x3d\x3d\x3dname||op instanceof vegaDataflow.transforms.proxy)}function defaultTooltip(handler,event,item,value){(handler\x3dhandler.element())\x26\x26handler.setAttribute(\x22title\x22,formatTooltip(value))}function formatTooltip(value){return null\x3d\x3dvalue?\x22\x22:vegaUtil.isArray(value)?\x22[\x22+value.map(formatValue).join(\x22, \x22)+\x22]\x22:vegaUtil.isObject(value)\x26\x26\n!vegaUtil.isDate(value)?formatObject(value):value+\x22\x22}function formatObject(obj){return Object.keys(obj).map(key\x3d\x3e{const v\x3dobj[key];return key+\x22: \x22+(vegaUtil.isArray(v)?\x22[\x22+v.map(formatValue).join(\x22, \x22)+\x22]\x22:formatValue(v))}).join(\x22\\n\x22)}function formatValue(value){return vegaUtil.isArray(value)?\x22[\u2026]\x22:vegaUtil.isObject(value)\x26\x26!vegaUtil.isDate(value)?\x22{\u2026}\x22:value}function View(spec,options){options\x3doptions||{};vegaDataflow.Dataflow.call(this);options.loader\x26\x26this.loader(options.loader);options.logger\x26\x26\nthis.logger(options.logger);null!\x3doptions.logLevel\x26\x26this.logLevel(options.logLevel);if(options.locale||spec.locale){var loc\x3dvegaUtil.extend({},spec.locale,options.locale);this.locale(vegaFormat.locale(loc.number,loc.time))}this._elBind\x3dthis._el\x3dnull;this._renderType\x3doptions.renderer||vegaScenegraph.RenderType.Canvas;this._scenegraph\x3dnew vegaScenegraph.Scenegraph;loc\x3dthis._scenegraph.root;this._renderer\x3dnull;this._tooltip\x3doptions.tooltip||defaultTooltip;this._redraw\x3d!0;this._handler\x3d(new vegaScenegraph.CanvasHandler).scene(loc);\nthis._preventDefault\x3dthis._globalCursor\x3d!1;this._timers\x3d[];this._eventListeners\x3d[];this._resizeListeners\x3d[];this._eventConfig\x3dinitializeEventConfig(spec.eventConfig);this.globalCursor(this._eventConfig.globalCursor);const ctx\x3druntime(this,spec,options.expr);this._runtime\x3dctx;this._signals\x3dctx.signals;this._bind\x3d(spec.bindings||[]).map(_\x3d\x3e({state:null,param:vegaUtil.extend({},_)}));ctx.root\x26\x26ctx.root.set(loc);loc.source\x3dctx.data.root.input;this.pulse(ctx.data.root.input,this.changeset().insert(loc.items));\nthis._width\x3dthis.width();this._height\x3dthis.height();this._viewWidth\x3dviewWidth$jscomp$0(this,this._width);this._viewHeight\x3dviewHeight$jscomp$0(this,this._height);this._origin\x3d[0,0];this._resize\x3d0;this._autosize\x3d1;initializeResize(this);background(this);cursor$jscomp$0(this);this.description(spec.description);options.hover\x26\x26this.hover();options.container\x26\x26this.initialize(options.container,options.bind)}function lookupSignal(view,name){return vegaUtil.hasOwnProperty(view._signals,name)?view._signals[name]:\nvegaUtil.error(\x22Unrecognized signal name: \x22+vegaUtil.stringValue(name))}function findOperatorHandler(op$jscomp$0,handler){op$jscomp$0\x3d(op$jscomp$0._targets||[]).filter(op\x3d\x3eop._update\x26\x26op._update.handler\x3d\x3d\x3dhandler);return op$jscomp$0.length?op$jscomp$0[0]:null}function addOperatorListener(view,name,op,handler){let h\x3dfindOperatorHandler(op,handler);h||(h\x3dtrap(view,()\x3d\x3ehandler(name,op.value)),h.handler\x3dhandler,view.on(op,null,h));return view}function removeOperatorListener(view,op,handler){(handler\x3d\nfindOperatorHandler(op,handler))\x26\x26op._targets.remove(handler);return view}const NO_TRAP\x3d{trap:!1};var Skip\x3d{skip:!0};vegaUtil.inherits(View,vegaDataflow.Dataflow,{evaluate(encode,prerun,postrun){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){yield vegaDataflow.Dataflow.prototype.evaluate.call($jscomp$async$this,encode,prerun);if($jscomp$async$this._redraw||$jscomp$async$this._resize)try{$jscomp$async$this._renderer\x26\x26($jscomp$async$this._resize\x26\x26($jscomp$async$this._resize\x3d\n0,resizeRenderer($jscomp$async$this)),yield $jscomp$async$this._renderer.renderAsync($jscomp$async$this._scenegraph.root)),$jscomp$async$this._redraw\x3d!1}catch(e){$jscomp$async$this.error(e)}postrun\x26\x26vegaDataflow.asyncCallback($jscomp$async$this,postrun);return $jscomp$async$this})},dirty(item){this._redraw\x3d!0;this._renderer\x26\x26this._renderer.dirty(item)},description(text){if(arguments.length){const desc\x3dnull!\x3dtext?text+\x22\x22:null;desc!\x3d\x3dthis._desc\x26\x26ariaLabel(this._el,this._desc\x3ddesc);return this}return this._desc},\ncontainer(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(name,value,options){const op\x3dlookupSignal(this,name);return 1\x3d\x3d\x3darguments.length?op.value:this.update(op,value,options)},width(_){return arguments.length?this.signal(\x22width\x22,_):this.signal(\x22width\x22)},height(_){return arguments.length?this.signal(\x22height\x22,_):this.signal(\x22height\x22)},padding(_){return arguments.length?this.signal(\x22padding\x22,padding$jscomp$0(_)):padding$jscomp$0(this.signal(\x22padding\x22))},\nautosize(_){return arguments.length?this.signal(\x22autosize\x22,_):this.signal(\x22autosize\x22)},background(_){return arguments.length?this.signal(\x22background\x22,_):this.signal(\x22background\x22)},renderer(type){if(!arguments.length)return this._renderType;vegaScenegraph.renderModule(type)||vegaUtil.error(\x22Unrecognized renderer type: \x22+type);type!\x3d\x3dthis._renderType\x26\x26(this._renderType\x3dtype,this._resetRenderer());return this},tooltip(handler){if(!arguments.length)return this._tooltip;handler!\x3d\x3dthis._tooltip\x26\x26(this._tooltip\x3d\nhandler,this._resetRenderer());return this},loader(loader){if(!arguments.length)return this._loader;loader!\x3d\x3dthis._loader\x26\x26(vegaDataflow.Dataflow.prototype.loader.call(this,loader),this._resetRenderer());return this},resize(){this._autosize\x3d1;return this.touch(lookupSignal(this,\x22autosize\x22))},_resetRenderer(){this._renderer\x26\x26(this._renderer\x3dnull,this.initialize(this._el,this._elBind))},_resizeView:function(viewWidth,viewHeight,width,height,origin,auto){this.runAfter(view\x3d\x3e{let rerun\x3d0;view._autosize\x3d\n0;view.width()!\x3d\x3dwidth\x26\x26(rerun\x3d1,view.signal(\x22width\x22,width,Skip),view._resizeWidth.skip(!0));view.height()!\x3d\x3dheight\x26\x26(rerun\x3d1,view.signal(\x22height\x22,height,Skip),view._resizeHeight.skip(!0));view._viewWidth!\x3d\x3dviewWidth\x26\x26(view._resize\x3d1,view._viewWidth\x3dviewWidth);view._viewHeight!\x3d\x3dviewHeight\x26\x26(view._resize\x3d1,view._viewHeight\x3dviewHeight);if(view._origin[0]!\x3d\x3dorigin[0]||view._origin[1]!\x3d\x3dorigin[1])view._resize\x3d1,view._origin\x3dorigin;rerun\x26\x26view.run(\x22enter\x22);auto\x26\x26view.runAfter(v\x3d\x3ev.resize())},!1,1)},addEventListener(type,\nhandler,options){let callback\x3dhandler;options\x26\x26!1\x3d\x3d\x3doptions.trap||(callback\x3dtrap(this,handler),callback.raw\x3dhandler);this._handler.on(type,callback);return this},removeEventListener(type,handler){for(var handlers\x3dthis._handler.handlers(type),i\x3dhandlers.length,h,t;0\x3c\x3d--i;)if(t\x3dhandlers[i].type,h\x3dhandlers[i].handler,type\x3d\x3d\x3dt\x26\x26(handler\x3d\x3d\x3dh||handler\x3d\x3d\x3dh.raw)){this._handler.off(t,h);break}return this},addResizeListener(handler){const l\x3dthis._resizeListeners;0\x3el.indexOf(handler)\x26\x26l.push(handler);return this},\nremoveResizeListener(handler){var l\x3dthis._resizeListeners;handler\x3dl.indexOf(handler);0\x3c\x3dhandler\x26\x26l.splice(handler,1);return this},addSignalListener(name,handler){return addOperatorListener(this,name,lookupSignal(this,name),handler)},removeSignalListener(name,handler){return removeOperatorListener(this,lookupSignal(this,name),handler)},addDataListener(name,handler){return addOperatorListener(this,name,dataref(this,name).values,handler)},removeDataListener(name,handler){return removeOperatorListener(this,\ndataref(this,name).values,handler)},globalCursor(_){if(arguments.length){if(this._globalCursor!\x3d\x3d!!_){const prev\x3dsetCursor(this,null);this._globalCursor\x3d!!_;prev\x26\x26setCursor(this,prev)}return this}return this._globalCursor},preventDefault(_){return arguments.length?(this._preventDefault\x3d_,this):this._preventDefault},timer:function(callback,delay){this._timers.push(d3Timer.interval(function(elapsed){callback({timestamp:Date.now(),elapsed})},delay))},events:function(source,type,filter){var view\x3dthis,\ns\x3dnew vegaDataflow.EventStream(filter);filter\x3dfunction(e,item){view.runAsync(null,()\x3d\x3e{var JSCompiler_temp;if(JSCompiler_temp\x3d\x22view\x22\x3d\x3d\x3dsource){var def\x3dview._eventConfig.defaults;JSCompiler_temp\x3ddef.prevent;def\x3ddef.allow;JSCompiler_temp\x3d!1\x3d\x3d\x3dJSCompiler_temp||!0\x3d\x3d\x3ddef?!1:!0\x3d\x3d\x3dJSCompiler_temp||!1\x3d\x3d\x3ddef?!0:JSCompiler_temp?JSCompiler_temp[type]:def?!def[type]:view.preventDefault()}JSCompiler_temp\x26\x26e.preventDefault();s.receive(eventExtend(view,e,item))})};var sources;if(\x22timer\x22\x3d\x3d\x3dsource)permit(view,\x22timer\x22,\ntype)\x26\x26view.timer(filter,type);else if(\x22view\x22\x3d\x3d\x3dsource)permit(view,\x22view\x22,type)\x26\x26view.addEventListener(type,filter,NO_TRAP);else if(\x22window\x22\x3d\x3d\x3dsource?permit(view,\x22window\x22,type)\x26\x26\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(sources\x3d[window]):\x22undefined\x22!\x3d\x3dtypeof document\x26\x26permit(view,\x22selector\x22,type)\x26\x26(sources\x3ddocument.querySelectorAll(source)),sources){for(var i\x3d0,n\x3dsources.length;i\x3cn;++i)sources[i].addEventListener(type,filter);trackEventListener(view,sources,type,filter)}else view.warn(\x22Can not resolve event source: \x22+\nsource);return s},finalize:function(){var tooltip\x3dthis._tooltip,timers\x3dthis._timers,listeners\x3dthis._eventListeners,n;for(n\x3dtimers.length;0\x3c\x3d--n;)timers[n].stop();for(n\x3dlisteners.length;0\x3c\x3d--n;){var e\x3dlisteners[n];for(timers\x3de.sources.length;0\x3c\x3d--timers;)e.sources[timers].removeEventListener(e.type,e.handler)}tooltip\x26\x26tooltip.call(this,this._handler,null,null,null);return this},hover:function(hoverSet,leaveSet){hoverSet\x3d[hoverSet||\x22hover\x22];leaveSet\x3d[leaveSet||\x22update\x22,hoverSet[0]];this.on(this.events(\x22view\x22,\n\x22mouseover\x22,itemFilter),markTarget,invoke(hoverSet));this.on(this.events(\x22view\x22,\x22mouseout\x22,itemFilter),markTarget,invoke(leaveSet));return this},data:function(name,values){return 2\x3earguments.length?dataref(this,name).values.value:change.call(this,name,vegaDataflow.changeset().remove(vegaUtil.truthy).insert(values))},change,insert:function(name,_){return change.call(this,name,vegaDataflow.changeset().insert(_))},remove:function(name,_){return change.call(this,name,vegaDataflow.changeset().remove(_))},\nscale:function(name){var scales\x3dthis._runtime.scales;vegaUtil.hasOwnProperty(scales,name)||vegaUtil.error(\x22Unrecognized scale or projection: \x22+name);return scales[name].value},initialize:function(el,elBind){const view\x3dthis;var type\x3dview._renderType;const config\x3dview._eventConfig.bind;var module\x3dvegaScenegraph.renderModule(type);el\x3dview._el\x3del?lookup(view,el,!0):null;initializeAria(view);module||view.error(\x22Unrecognized renderer type: \x22+type);type\x3dmodule.handler||vegaScenegraph.CanvasHandler;module\x3d\nel?module.renderer:module.headless;view._renderer\x3dmodule?initializeRenderer(view,view._renderer,el,module):null;view._handler\x3dinitializeHandler(view,view._handler,el,type);view._redraw\x3d!0;el\x26\x26\x22none\x22!\x3d\x3dconfig\x26\x26(elBind\x3delBind?view._elBind\x3dlookup(view,elBind,!0):el.appendChild(element(\x22form\x22,{\x22class\x22:\x22vega-bindings\x22})),view._bind.forEach(_\x3d\x3e{_.param.element\x26\x26\x22container\x22!\x3d\x3dconfig\x26\x26(_.element\x3dlookup(view,_.param.element,!!_.param.input))}),view._bind.forEach(_\x3d\x3e{bind$jscomp$0(view,_.element||elBind,_)}));\nreturn view},toImageURL:function(type,scaleFactor){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){type!\x3d\x3dvegaScenegraph.RenderType.Canvas\x26\x26type!\x3d\x3dvegaScenegraph.RenderType.SVG\x26\x26type!\x3d\x3dvegaScenegraph.RenderType.PNG\x26\x26vegaUtil.error(\x22Unrecognized image type: \x22+type);var r\x3dyield renderHeadless($jscomp$async$this,type,scaleFactor);type\x3d\x3d\x3dvegaScenegraph.RenderType.SVG?(r\x3dr.svg(),r\x3dnew Blob([r],{type:\x22image/svg+xml\x22}),r\x3dwindow.URL.createObjectURL(r)):r\x3dr.canvas().toDataURL(\x22image/png\x22);\nreturn r})},toCanvas:function(scaleFactor,opt){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return(yield renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.Canvas,scaleFactor,opt)).canvas()})},toSVG:function(scaleFactor){const $jscomp$async$this\x3dthis;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return(yield renderHeadless($jscomp$async$this,vegaScenegraph.RenderType.SVG,scaleFactor)).svg()})},getState:function(options){return this._runtime.getState(options||\n{data:dataTest,signals:signalTest,recurse:!0})},setState:function(state){this.runAsync(null,v\x3d\x3e{v._trigger\x3d!1;v._runtime.setState(state)},v\x3d\x3e{v._trigger\x3d!0});return this}});exports.View\x3dView;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_event_selector$build$vega_event_selector.js", true , "shadow$provide.module$node_modules$vega_event_selector$build$vega_event_selector\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22exports\x22],factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{}))})(this,function(exports){function find(s,i,endChar,pushChar,popChar){const n\x3ds.length;let count\x3d\n0,c;for(;i\x3cn;++i)if(c\x3ds[i],count||c!\x3d\x3dendChar)popChar\x26\x260\x3c\x3dpopChar.indexOf(c)?--count:pushChar\x26\x260\x3c\x3dpushChar.indexOf(c)\x26\x26++count;else break;return i}function parseMerge(s){const output\x3d[],n\x3ds.length;let start\x3d0,i\x3d0;for(;i\x3cn;)i\x3dfind(s,i,\x22,\x22,\x22[{\x22,\x22]}\x22),output.push(s.substring(start,i).trim()),start\x3d++i;if(0\x3d\x3d\x3doutput.length)throw\x22Empty event selector: \x22+s;return output}function parseSelector(s){if(\x22[\x22\x3d\x3d\x3ds[0]){var JSCompiler_temp\x3ds;var n$jscomp$0\x3dJSCompiler_temp.length;s\x3dfind(JSCompiler_temp,1,\x22]\x22,\x22[\x22,\n\x22]\x22);if(s\x3d\x3d\x3dn$jscomp$0)throw\x22Empty between selector: \x22+JSCompiler_temp;n$jscomp$0\x3dparseMerge(JSCompiler_temp.substring(1,s));if(2!\x3d\x3dn$jscomp$0.length)throw\x22Between selector must have two elements: \x22+JSCompiler_temp;JSCompiler_temp\x3dJSCompiler_temp.slice(s+1).trim();if(\x22\\x3e\x22!\x3d\x3dJSCompiler_temp[0])throw\x22Expected \x27\\x3e\x27 after between selector: \x22+JSCompiler_temp;n$jscomp$0\x3dn$jscomp$0.map(parseSelector);JSCompiler_temp\x3dparseSelector(JSCompiler_temp.slice(1).trim());JSCompiler_temp.between?JSCompiler_temp\x3d\n{between:n$jscomp$0,stream:JSCompiler_temp}:JSCompiler_temp.between\x3dn$jscomp$0}else{{n$jscomp$0\x3d{source:DEFAULT_SOURCE};const source\x3d[];let throttle\x3d[0,0],markname\x3d0,start\x3d0,n\x3ds.length,i\x3d0,j;if(\x22}\x22\x3d\x3d\x3ds[n-1]){i\x3ds.lastIndexOf(\x22{\x22);if(0\x3c\x3di){try{throttle\x3dparseThrottle(s.substring(i+1,n-1))}catch(e){throw\x22Invalid throttle specification: \x22+s;}s\x3ds.slice(0,i).trim();n\x3ds.length}else throw\x22Unmatched right brace: \x22+s;i\x3d0}if(!n)throw s;\x22@\x22\x3d\x3d\x3ds[0]\x26\x26(markname\x3d++i);j\x3dfind(s,i,\x22:\x22);j\x3cn\x26\x26(source.push(s.substring(start,\nj).trim()),start\x3di\x3d++j);i\x3dfind(s,i,\x22[\x22);if(i\x3d\x3d\x3dn)source.push(s.substring(start,n).trim());else if(source.push(s.substring(start,i).trim()),JSCompiler_temp\x3d[],start\x3d++i,start\x3d\x3d\x3dn)throw\x22Unmatched left bracket: \x22+s;for(;i\x3cn;){i\x3dfind(s,i,\x22]\x22);if(i\x3d\x3d\x3dn)throw\x22Unmatched left bracket: \x22+s;JSCompiler_temp.push(s.substring(start,i).trim());if(i\x3cn-1\x26\x26\x22[\x22!\x3d\x3ds[++i])throw\x22Expected left bracket: \x22+s;start\x3d++i}if(!(n\x3dsource.length)||ILLEGAL.test(source[n-1]))throw\x22Invalid event selector: \x22+s;1\x3cn?(n$jscomp$0.type\x3d\nsource[1],markname?n$jscomp$0.markname\x3dsource[0].slice(1):MARKS[source[0]]?n$jscomp$0.marktype\x3dsource[0]:n$jscomp$0.source\x3dsource[0]):n$jscomp$0.type\x3dsource[0];\x22!\x22\x3d\x3d\x3dn$jscomp$0.type.slice(-1)\x26\x26(n$jscomp$0.consume\x3d!0,n$jscomp$0.type\x3dn$jscomp$0.type.slice(0,-1));null!\x3dJSCompiler_temp\x26\x26(n$jscomp$0.filter\x3dJSCompiler_temp);throttle[0]\x26\x26(n$jscomp$0.throttle\x3dthrottle[0]);throttle[1]\x26\x26(n$jscomp$0.debounce\x3dthrottle[1]);JSCompiler_temp\x3dn$jscomp$0}}return JSCompiler_temp}function parseThrottle(s){const a\x3ds.split(\x22,\x22);\nif(!s.length||2\x3ca.length)throw s;return a.map(_\x3d\x3e{_\x3d+_;if(_!\x3d\x3d_)throw s;return _})}const ILLEGAL\x3d/[[\\]{}]/,DEFAULT_MARKS\x3d{\x22*\x22:1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let DEFAULT_SOURCE,MARKS;exports.selector\x3dfunction(selector,source,marks){DEFAULT_SOURCE\x3dsource||\x22view\x22;MARKS\x3dmarks||DEFAULT_MARKS;return parseMerge(selector.trim()).map(parseSelector)};Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_parser$build$vega_parser.js", true , "shadow$provide.module$node_modules$vega_parser$build$vega_parser\x3dfunction(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module?factory(exports$jscomp$0,require(\x22module$node_modules$vega_util$build$vega_util\x22),require(\x22module$node_modules$vega_functions$build$vega_functions\x22),require(\x22module$node_modules$vega_event_selector$build$vega_event_selector\x22),require(\x22module$node_modules$vega_scale$build$vega_scale\x22),require(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22)):\n\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(\x22exports vega-util vega-functions vega-event-selector vega-scale vega-dataflow\x22.split(\x22 \x22),factory):(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,factory(global.vega\x3d{},global.vega,global.vega,global.vega,global.vega,global.vega))})(this,function(exports,vegaUtil,vegaFunctions,vegaEventSelector,vegaScale,vegaDataflow){function parseAutosize(spec){return vegaUtil.isObject(spec)?spec:{type:spec||\x22pad\x22}}function parsePadding(spec){vegaUtil.isObject(spec)?\nspec\x3dspec.signal?spec:{top:+spec.top||0,bottom:+spec.bottom||0,left:+spec.left||0,right:+spec.right||0}:(spec\x3d+spec||0,spec\x3d{top:spec,bottom:spec,left:spec,right:spec});return spec}function addEncode(object,name,value,set){return null!\x3dvalue?(vegaUtil.isObject(value)\x26\x26!vegaUtil.isArray(value)||vegaUtil.isArray(value)\x26\x26value.length\x26\x26vegaUtil.isObject(value[0])?object.update[name]\x3dvalue:object[set||\x22enter\x22][name]\x3d{value},1):0}function addEncoders(object,enter,update){for(const name in enter)addEncode(object,\nname,enter[name]);for(const name in update)addEncode(object,name,update[name],\x22update\x22)}function extendEncode(encode,extra,skip){for(const name in extra)skip\x26\x26vegaUtil.hasOwnProperty(skip,name)||(encode[name]\x3dvegaUtil.extend(encode[name]||{},extra[name]));return encode}function has(key,encode){return encode\x26\x26(encode.enter\x26\x26encode.enter[key]||encode.update\x26\x26encode.update[key])}function applyDefaults(encode,type,role,style,config){const defaults\x3d{},enter\x3d{};let update,key$jscomp$0;key$jscomp$0\x3d\x22lineBreak\x22;\n\x22text\x22!\x3d\x3dtype||null\x3d\x3dconfig[key$jscomp$0]||has(key$jscomp$0,encode)||applyDefault(defaults,key$jscomp$0,config[key$jscomp$0]);if(\x22legend\x22\x3d\x3drole||String(role).startsWith(\x22axis\x22))role\x3dnull;role\x3d\x22frame\x22\x3d\x3d\x3drole?config.group:\x22mark\x22\x3d\x3d\x3drole?vegaUtil.extend({},config.mark,config[type]):null;for(key$jscomp$0 in role)(type\x3dhas(key$jscomp$0,encode)||(\x22fill\x22\x3d\x3d\x3dkey$jscomp$0||\x22stroke\x22\x3d\x3d\x3dkey$jscomp$0)\x26\x26(has(\x22fill\x22,encode)||has(\x22stroke\x22,encode)))||applyDefault(defaults,key$jscomp$0,role[key$jscomp$0]);vegaUtil.array(style).forEach(name\x3d\x3e\n{name\x3dconfig.style\x26\x26config.style[name];for(const key in name)has(key,encode)||applyDefault(defaults,key,name[key])});encode\x3dvegaUtil.extend({},encode);for(key$jscomp$0 in defaults)role\x3ddefaults[key$jscomp$0],role.signal?(update\x3dupdate||{})[key$jscomp$0]\x3drole:enter[key$jscomp$0]\x3drole;encode.enter\x3dvegaUtil.extend(enter,encode.enter);update\x26\x26(encode.update\x3dvegaUtil.extend(update,encode.update));return encode}function applyDefault(defaults,key,value){defaults[key]\x3dvalue\x26\x26value.signal?{signal:value.signal}:\n{value}}function entry$jscomp$0(enc){if(null!\x3denc.gradient)return gradient(enc);if(enc.signal)var JSCompiler_temp\x3d`(${enc.signal})`;else enc.color?(JSCompiler_temp\x3denc.color,JSCompiler_temp\x3dJSCompiler_temp.c?_color(\x22hcl\x22,JSCompiler_temp.h,JSCompiler_temp.c,JSCompiler_temp.l):JSCompiler_temp.h||JSCompiler_temp.s?_color(\x22hsl\x22,JSCompiler_temp.h,JSCompiler_temp.s,JSCompiler_temp.l):JSCompiler_temp.l||JSCompiler_temp.a?_color(\x22lab\x22,JSCompiler_temp.l,JSCompiler_temp.a,JSCompiler_temp.b):JSCompiler_temp.r||\nJSCompiler_temp.g||JSCompiler_temp.b?_color(\x22rgb\x22,JSCompiler_temp.r,JSCompiler_temp.g,JSCompiler_temp.b):null):JSCompiler_temp\x3dnull!\x3denc.field?field$jscomp$0(enc.field):void 0!\x3d\x3denc.value?vegaUtil.stringValue(enc.value):void 0;if(null!\x3denc.scale){{const scale\x3dscaleRef(enc.scale);null!\x3denc.range?JSCompiler_temp\x3d`lerp(_range(${scale}), ${+enc.range})`:(void 0!\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3d`_scale(${scale}, ${JSCompiler_temp})`),enc.band\x26\x26(JSCompiler_temp\x3d(JSCompiler_temp?JSCompiler_temp+\x22+\x22:\x22\x22)+\n`_bandwidth(${scale})`+(1\x3d\x3d\x3d+enc.band?\x22\x22:\x22*\x22+property$jscomp$0(enc.band)),enc.extra\x26\x26(JSCompiler_temp\x3d`(datum.extra ? _scale(${scale}, datum.extra.value) : ${JSCompiler_temp})`)),null\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3d\x220\x22))}}void 0\x3d\x3d\x3dJSCompiler_temp\x26\x26(JSCompiler_temp\x3dnull);null!\x3denc.exponent\x26\x26(JSCompiler_temp\x3d`pow(${JSCompiler_temp},${property$jscomp$0(enc.exponent)})`);null!\x3denc.mult\x26\x26(JSCompiler_temp+\x3d`*${property$jscomp$0(enc.mult)}`);null!\x3denc.offset\x26\x26(JSCompiler_temp+\x3d`+${property$jscomp$0(enc.offset)}`);\nenc.round\x26\x26(JSCompiler_temp\x3d`round(${JSCompiler_temp})`);return JSCompiler_temp}function gradient(enc){const args\x3d[enc.start,enc.stop,enc.count].map(_\x3d\x3enull\x3d\x3d_?null:vegaUtil.stringValue(_));for(;args.length\x26\x26null\x3d\x3dvegaUtil.peek(args);)args.pop();args.unshift(scaleRef(enc.gradient));return`gradient(${args.join(\x22,\x22)})`}function property$jscomp$0(property){return vegaUtil.isObject(property)?\x22(\x22+entry$jscomp$0(property)+\x22)\x22:property}function field$jscomp$0(ref){return resolveField(vegaUtil.isObject(ref)?\nref:{datum:ref})}function resolveField(ref){let object;if(ref.signal){object\x3d\x22datum\x22;var level\x3dref.signal}else if(ref.group||ref.parent){level\x3dMath.max(1,ref.level||1);for(object\x3d\x22item\x22;0\x3clevel--;)object+\x3d\x22.mark.group\x22;ref.parent?(level\x3dref.parent,object+\x3d\x22.datum\x22):level\x3dref.group}else ref.datum?(object\x3d\x22datum\x22,level\x3dref.datum):vegaUtil.error(\x22Invalid field reference: \x22+vegaUtil.stringValue(ref));ref.signal||(level\x3dvegaUtil.isString(level)?vegaUtil.splitAccessPath(level).map(vegaUtil.stringValue).join(\x22][\x22):\nresolveField(level));return object+\x22[\x22+level+\x22]\x22}function rule$jscomp$0(enc){let code\x3d\x22\x22;enc.forEach(rule\x3d\x3e{const value\x3dentry$jscomp$0(rule);code+\x3drule.test?`(${rule.test})?${value}:`:value});\x22:\x22\x3d\x3d\x3dvegaUtil.peek(code)\x26\x26(code+\x3d\x22null\x22);return code}function parseEncode(encode,type,role,style,scope$jscomp$0,params$jscomp$0){const enc\x3d{};params$jscomp$0\x3dparams$jscomp$0||{};params$jscomp$0.encoders\x3d{$encode:enc};encode\x3dapplyDefaults(encode,type,role,style,scope$jscomp$0.config);for(const key in encode){{role\x3d\nencode[key];style\x3dtype;var params\x3dparams$jscomp$0,scope\x3dscope$jscomp$0;const channels\x3d{},fields\x3d{};for(const name in role)if(null!\x3drole[name]){var JSCompiler_inline_result\x3drole[name];JSCompiler_inline_result\x3dvegaUtil.isArray(JSCompiler_inline_result)?rule$jscomp$0(JSCompiler_inline_result):entry$jscomp$0(JSCompiler_inline_result);channels[name]\x3dparse(JSCompiler_inline_result,scope,params,fields)}role\x3d{$expr:{marktype:style,channels},$fields:Object.keys(fields),$output:Object.keys(role)}}enc[key]\x3d\nrole}return params$jscomp$0}function parse(code,scope,params,fields){code\x3dvegaFunctions.parseExpression(code,scope);code.$fields.forEach(name\x3d\x3efields[name]\x3d1);vegaUtil.extend(params,code.$params);return code.$expr}function outerError(prefix,name){vegaUtil.error(prefix+\x27 for \x22outer\x22 push: \x27+vegaUtil.stringValue(name))}function parseSignal(signal,scope){const name\x3dsignal.name;if(\x22outer\x22\x3d\x3d\x3dsignal.push)scope.signals[name]||outerError(\x22No prior signal definition\x22,name),OUTER_INVALID.forEach(prop\x3d\x3e{void 0!\x3d\x3d\nsignal[prop]\x26\x26outerError(\x22Invalid property \x22,prop)});else{const op\x3dscope.addSignal(name,signal.value);!1\x3d\x3d\x3dsignal.react\x26\x26(op.react\x3d!1);signal.bind\x26\x26scope.addBinding(name,signal.bind)}}function Entry(type,value,params,parent){this.id\x3d-1;this.type\x3dtype;this.value\x3dvalue;this.params\x3dparams;parent\x26\x26(this.parent\x3dparent)}function ref$jscomp$0(op){const ref\x3d{$ref:op.id};0\x3eop.id\x26\x26(op.refs\x3dop.refs||[]).push(ref);return ref}function fieldRef(field,name){return name?{$field:field,$name:name}:{$field:field}}function keyRef(fields,\nflat){fields\x3d{$key:fields};flat\x26\x26(fields.$flat\x3d!0);return fields}function aggrField(op,field){return(op\x26\x26op.signal?\x22$\x22+op.signal:op||\x22\x22)+(op\x26\x26field?\x22_\x22:\x22\x22)+(field\x26\x26field.signal?\x22$\x22+field.signal:field||\x22\x22)}function isSignal(_){return _\x26\x26_.signal}function hasSignal(_){if(isSignal(_))return!0;if(vegaUtil.isObject(_))for(const key in _)if(hasSignal(_[key]))return!0;return!1}function value$jscomp$0(specValue,defaultValue){return null!\x3dspecValue?specValue:defaultValue}function deref(v){return v\x26\x26v.signal||\nv}function parseStream(stream,scope){return(stream.merge?mergeStream:stream.stream?nestedStream:stream.type?eventStream:vegaUtil.error(\x22Invalid stream specification: \x22+vegaUtil.stringValue(stream)))(stream,scope)}function eventSource(source){return\x22scope\x22\x3d\x3d\x3dsource?\x22view\x22:source||\x22view\x22}function mergeStream(stream,scope){const list\x3dstream.merge.map(s\x3d\x3eparseStream(s,scope));stream\x3dstreamParameters({merge:list},stream,scope);return scope.addStream(stream).id}function nestedStream(stream,scope){const id\x3d\nparseStream(stream.stream,scope);stream\x3dstreamParameters({stream:id},stream,scope);return scope.addStream(stream).id}function eventStream(stream,scope){let id;\x22timer\x22\x3d\x3d\x3dstream.type?(id\x3dscope.event(\x22timer\x22,stream.throttle),stream\x3d{between:stream.between,filter:stream.filter}):id\x3dscope.event(eventSource(stream.source),stream.type);stream\x3dstreamParameters({stream:id},stream,scope);return 1\x3d\x3d\x3dObject.keys(stream).length?id:scope.addStream(stream).id}function streamParameters(entry,stream,scope){let param\x3d\nstream.between;param\x26\x26(2!\x3d\x3dparam.length\x26\x26vegaUtil.error(\x27Stream \x22between\x22 parameter must have 2 entries: \x27+vegaUtil.stringValue(stream)),entry.between\x3d[parseStream(param[0],scope),parseStream(param[1],scope)]);param\x3dstream.filter?[].concat(stream.filter):[];(stream.marktype||stream.markname||stream.markrole)\x26\x26param.push(filterMark(stream.marktype,stream.markname,stream.markrole));\x22scope\x22\x3d\x3d\x3dstream.source\x26\x26param.push(\x22inScope(event.item)\x22);param.length\x26\x26(entry.filter\x3dvegaFunctions.parseExpression(\x22(\x22+\nparam.join(\x22)\\x26\\x26(\x22)+\x22)\x22,scope).$expr);null!\x3d(param\x3dstream.throttle)\x26\x26(entry.throttle\x3d+param);null!\x3d(param\x3dstream.debounce)\x26\x26(entry.debounce\x3d+param);stream.consume\x26\x26(entry.consume\x3d!0);return entry}function filterMark(type,name,role){return\x22event.item\x22+(type\x26\x26\x22*\x22!\x3d\x3dtype?\x22\\x26\\x26event.item.mark.marktype\\x3d\\x3d\\x3d\x27\x22+type+\x22\x27\x22:\x22\x22)+(role?\x22\\x26\\x26event.item.mark.role\\x3d\\x3d\\x3d\x27\x22+role+\x22\x27\x22:\x22\x22)+(name?\x22\\x26\\x26event.item.mark.name\\x3d\\x3d\\x3d\x27\x22+name+\x22\x27\x22:\x22\x22)}function parseUpdate(spec,scope,target){const encode\x3d\nspec.encode,entry\x3d{target};target\x3dspec.events;let update\x3dspec.update,sources\x3d[];target||vegaUtil.error(\x22Signal update missing events specification.\x22);vegaUtil.isString(target)\x26\x26(target\x3dvegaEventSelector.selector(target,scope.isSubscope()?\x22scope\x22:\x22view\x22));target\x3dvegaUtil.array(target).filter(s\x3d\x3es.signal||s.scale?(sources.push(s),0):1);1\x3csources.length\x26\x26(sources\x3d[mergeSources(sources)]);target.length\x26\x26sources.push(1\x3ctarget.length?{merge:target}:target[0]);null!\x3dencode\x26\x26(update\x26\x26vegaUtil.error(\x22Signal encode and update are mutually exclusive.\x22),\nupdate\x3d\x22encode(item(),\x22+vegaUtil.stringValue(encode)+\x22)\x22);entry.update\x3dvegaUtil.isString(update)?vegaFunctions.parseExpression(update,scope):null!\x3dupdate.expr?vegaFunctions.parseExpression(update.expr,scope):null!\x3dupdate.value?update.value:null!\x3dupdate.signal?{$expr:OP_VALUE_EXPR,$params:{$value:scope.signalRef(update.signal)}}:vegaUtil.error(\x22Invalid signal update specification.\x22);spec.force\x26\x26(entry.options\x3d{force:!0});sources.forEach(source\x3d\x3escope.addUpdate(vegaUtil.extend(streamSource(source,scope),\nentry)))}function streamSource(stream,scope){return{source:stream.signal?scope.signalRef(stream.signal):stream.scale?scope.scaleRef(stream.scale):parseStream(stream,scope)}}function mergeSources(sources){return{signal:\x22[\x22+sources.map(s\x3d\x3es.scale?\x27scale(\x22\x27+s.scale+\x27\x22)\x27:s.signal)+\x22]\x22}}function parseSignalUpdates(signal,scope){const op\x3dscope.getSignal(signal.name);let expr\x3dsignal.update;signal.init\x26\x26(expr?vegaUtil.error(\x22Signals can not include both init and update expressions.\x22):(expr\x3dsignal.init,op.initonly\x3d\n!0));expr\x26\x26(expr\x3dvegaFunctions.parseExpression(expr,scope),op.update\x3dexpr.$expr,op.params\x3dexpr.$params);signal.on\x26\x26signal.on.forEach(_\x3d\x3eparseUpdate(_,scope,op.id))}function parseLiteral(v,scope){return vegaUtil.isObject(v)?v.signal?scope.signalRef(v.signal):vegaUtil.error(\x22Unsupported object: \x22+vegaUtil.stringValue(v)):v}function parseArray(v$jscomp$0,scope){return v$jscomp$0.signal?scope.signalRef(v$jscomp$0.signal):v$jscomp$0.map(v\x3d\x3eparseLiteral(v,scope))}function dataLookupError(name){vegaUtil.error(\x22Can not find data set: \x22+\nvegaUtil.stringValue(name))}function parseScaleDomain(domain,spec,scope){if(domain)return domain.signal?scope.signalRef(domain.signal):(vegaUtil.isArray(domain)?explicitDomain:domain.fields?multipleDomain:singularDomain)(domain,spec,scope);null\x3d\x3dspec.domainMin\x26\x26null\x3d\x3dspec.domainMax||vegaUtil.error(\x22No scale domain defined for domainMin/domainMax to override.\x22)}function explicitDomain(domain,spec,scope){return domain.map(v\x3d\x3eparseLiteral(v,scope))}function singularDomain(domain,spec,scope){const data\x3d\nscope.getData(domain.data);data||dataLookupError(domain.data);return vegaScale.isDiscrete(spec.type)?data.valuesRef(scope,domain.field,parseSort(domain.sort,!1)):vegaScale.isQuantile(spec.type)?data.domainRef(scope,domain.field):data.extentRef(scope,domain.field)}function multipleDomain(domain,spec,scope){const data$jscomp$0\x3ddomain.data,fields\x3ddomain.fields.reduce((dom,d)\x3d\x3e{if(vegaUtil.isString(d))d\x3d{data:data$jscomp$0,field:d};else if(vegaUtil.isArray(d)||d.signal){{var data\x3dd;d\x3d\x22_:vega:_\x22+FIELD_REF_ID++;\nconst coll\x3dCollect({});vegaUtil.isArray(data)?coll.value\x3d{$ingest:data}:data.signal\x26\x26(data\x3d\x22setdata(\x22+vegaUtil.stringValue(d)+\x22,\x22+data.signal+\x22)\x22,coll.params.input\x3dscope.signalRef(data));scope.addDataPipeline(d,[coll,Sieve({})]);d\x3d{data:d,field:\x22data\x22}}}dom.push(d);return dom},[]);return(vegaScale.isDiscrete(spec.type)?ordinalMultipleDomain:vegaScale.isQuantile(spec.type)?quantileMultipleDomain:numericMultipleDomain)(domain,scope,fields)}function ordinalMultipleDomain(domain,scope,fields){const sort\x3d\nparseSort(domain.sort,!0);domain\x3dfields.map(f\x3d\x3e{const data\x3dscope.getData(f.data);data||dataLookupError(f.data);return data.countsRef(scope,f.field,sort)});const p\x3d{groupby:keyFieldRef,pulse:domain};sort\x26\x26(domain\x3dsort.op||\x22count\x22,fields\x3dsort.field?aggrField(domain,sort.field):\x22count\x22,p.ops\x3d[MULTIDOMAIN_SORT_OPS[domain]],p.fields\x3d[scope.fieldRef(fields)],p.as\x3d[fields]);domain\x3dscope.add(Aggregate(p));domain\x3dscope.add(Collect({pulse:ref$jscomp$0(domain)}));fields\x3dscope.add(Values({field:keyFieldRef,sort:scope.sortRef(sort),\npulse:ref$jscomp$0(domain)}));return ref$jscomp$0(fields)}function parseSort(sort,multidomain){sort\x26\x26(sort.field||sort.op?sort.field||\x22count\x22\x3d\x3d\x3dsort.op?multidomain\x26\x26sort.field\x26\x26sort.op\x26\x26!MULTIDOMAIN_SORT_OPS[sort.op]\x26\x26vegaUtil.error(\x22Multiple domain scales can not be sorted using \x22+sort.op):vegaUtil.error(\x22No field provided for sort aggregate op: \x22+sort.op):vegaUtil.isObject(sort)?sort.field\x3d\x22key\x22:sort\x3d{field:\x22key\x22});return sort}function quantileMultipleDomain(domain,scope,fields){domain\x3dfields.map(f\x3d\x3e\n{const data\x3dscope.getData(f.data);data||dataLookupError(f.data);return data.domainRef(scope,f.field)});return ref$jscomp$0(scope.add(MultiValues({values:domain})))}function numericMultipleDomain(domain,scope,fields){domain\x3dfields.map(f\x3d\x3e{const data\x3dscope.getData(f.data);data||dataLookupError(f.data);return data.extentRef(scope,f.field)});return ref$jscomp$0(scope.add(MultiExtent({extents:domain})))}function parseScaleRange(spec,scope,params){const config\x3dscope.config.range;let range\x3dspec.range;if(range.signal)return scope.signalRef(range.signal);\nif(vegaUtil.isString(range)){if(config\x26\x26vegaUtil.hasOwnProperty(config,range))return spec\x3dvegaUtil.extend({},spec,{range:config[range]}),parseScaleRange(spec,scope,params);\x22width\x22\x3d\x3d\x3drange?range\x3d[0,{signal:\x22width\x22}]:\x22height\x22\x3d\x3d\x3drange?range\x3dvegaScale.isDiscrete(spec.type)?[0,{signal:\x22height\x22}]:[{signal:\x22height\x22},0]:vegaUtil.error(\x22Unrecognized scale range value: \x22+vegaUtil.stringValue(range))}else{if(range.scheme){params.scheme\x3dvegaUtil.isArray(range.scheme)?parseArray(range.scheme,scope):parseLiteral(range.scheme,\nscope);range.extent\x26\x26(params.schemeExtent\x3dparseArray(range.extent,scope));range.count\x26\x26(params.schemeCount\x3dparseLiteral(range.count,scope));return}if(range.step){params.rangeStep\x3dparseLiteral(range.step,scope);return}if(vegaScale.isDiscrete(spec.type)\x26\x26!vegaUtil.isArray(range))return parseScaleDomain(range,spec,scope);vegaUtil.isArray(range)||vegaUtil.error(\x22Unsupported range type: \x22+vegaUtil.stringValue(range))}return range.map(v\x3d\x3e(vegaUtil.isArray(v)?parseArray:parseLiteral)(v,scope))}function parseParameter(_$jscomp$0,\nname,scope){return vegaUtil.isArray(_$jscomp$0)?_$jscomp$0.map(_\x3d\x3eparseParameter(_,name,scope)):vegaUtil.isObject(_$jscomp$0)?_$jscomp$0.signal?scope.signalRef(_$jscomp$0.signal):\x22fit\x22\x3d\x3d\x3dname?_$jscomp$0:vegaUtil.error(\x22Unsupported parameter object: \x22+vegaUtil.stringValue(_$jscomp$0)):_$jscomp$0}function guideGroup(mark){mark.type\x3d\x22group\x22;mark.interactive\x3dmark.interactive||!1;return mark}function lookup$jscomp$0(spec,config){const _\x3d(name,dflt)\x3d\x3evalue$jscomp$0(spec[name],value$jscomp$0(config[name],\ndflt));_.isVertical\x3ds\x3d\x3e\x22vertical\x22\x3d\x3d\x3dvalue$jscomp$0(spec.direction,config.direction||(s?config.symbolDirection:config.gradientDirection));_.gradientLength\x3d()\x3d\x3evalue$jscomp$0(spec.gradientLength,config.gradientLength||config.gradientWidth);_.gradientThickness\x3d()\x3d\x3evalue$jscomp$0(spec.gradientThickness,config.gradientThickness||config.gradientHeight);_.entryColumns\x3d()\x3d\x3evalue$jscomp$0(spec.columns,value$jscomp$0(config.columns,+_.isVertical(!0)));return _}function getEncoding(name,encode){return(name\x3d\nencode\x26\x26(encode.update\x26\x26encode.update[name]||encode.enter\x26\x26encode.enter[name]))\x26\x26name.signal?name:name?name.value:null}function anchorExpr(s,e,m){return`item.anchor \x3d\x3d\x3d \x27${\x22start\x22}\x27 ? ${s} : item.anchor \x3d\x3d\x3d \x27${\x22end\x22}\x27 ? ${e} : ${m}`}function extendOffset(value,offset){return offset?value?vegaUtil.isObject(value)?Object.assign({},value,{offset:extendOffset(value.offset,offset)}):{value,offset}:offset:value}function guideMark(mark,extras){extras?(mark.name\x3dextras.name,mark.style\x3dextras.style||mark.style,\nmark.interactive\x3d!!extras.interactive,mark.encode\x3dextendEncode(mark.encode,extras,Skip)):mark.interactive\x3d!1;return mark}function legendGradient(spec,scale,config,userEncode){spec\x3dlookup$jscomp$0(spec,config);var vertical\x3dspec.isVertical();config\x3dspec.gradientThickness();const length\x3dspec.gradientLength();let enter,stop,width;vertical?(vertical\x3d[0,1],stop\x3d[0,0],width\x3dconfig,config\x3dlength):(vertical\x3d[0,0],stop\x3d[1,0],width\x3dlength);scale\x3d{enter:enter\x3d{opacity:zero$jscomp$0,x:zero$jscomp$0,y:zero$jscomp$0,\nwidth:encoder(width),height:encoder(config)},update:vegaUtil.extend({},enter,{opacity:one,fill:{gradient:scale,start:vertical,stop}}),exit:{opacity:zero$jscomp$0}};addEncoders(scale,{stroke:spec(\x22gradientStrokeColor\x22),strokeWidth:spec(\x22gradientStrokeWidth\x22)},{opacity:spec(\x22gradientOpacity\x22)});return guideMark({type:\x22rect\x22,role:\x22legend-gradient\x22,encode:scale},userEncode)}function legendGradientDiscrete(spec,scale,config,userEncode,dataRef){spec\x3dlookup$jscomp$0(spec,config);const vertical\x3dspec.isVertical();\nconfig\x3dspec.gradientThickness();const length\x3dspec.gradientLength();var u;let v,uu,vv,adjust\x3d\x22\x22;vertical?(u\x3d\x22y\x22,uu\x3d\x22y2\x22,v\x3d\x22x\x22,vv\x3d\x22width\x22,adjust\x3d\x221-\x22):(u\x3d\x22x\x22,uu\x3d\x22x2\x22,v\x3d\x22y\x22,vv\x3d\x22height\x22);scale\x3d{opacity:zero$jscomp$0,fill:{scale,field:\x22value\x22}};scale[u]\x3d{signal:adjust+\x22datum.perc\x22,mult:length};scale[v]\x3dzero$jscomp$0;scale[uu]\x3d{signal:adjust+\x22datum.perc2\x22,mult:length};scale[vv]\x3dencoder(config);u\x3d{enter:scale,update:vegaUtil.extend({},scale,{opacity:one}),exit:{opacity:zero$jscomp$0}};addEncoders(u,{stroke:spec(\x22gradientStrokeColor\x22),\nstrokeWidth:spec(\x22gradientStrokeWidth\x22)},{opacity:spec(\x22gradientOpacity\x22)});return guideMark({type:\x22rect\x22,role:\x22legend-band\x22,key:\x22value\x22,from:dataRef,encode:u},userEncode)}function legendGradientLabels(spec,config,userEncode,dataRef){const _\x3dlookup$jscomp$0(spec,config);var vertical\x3d_.isVertical();const thickness\x3dencoder(_.gradientThickness()),length\x3d_.gradientLength();let overlap\x3d_(\x22labelOverlap\x22),enter,update,v,adjust\x3d\x22\x22;const encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one,\ntext:{field:\x22label\x22}},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{fill:_(\x22labelColor\x22),fillOpacity:_(\x22labelOpacity\x22),font:_(\x22labelFont\x22),fontSize:_(\x22labelFontSize\x22),fontStyle:_(\x22labelFontStyle\x22),fontWeight:_(\x22labelFontWeight\x22),limit:value$jscomp$0(spec.labelLimit,config.gradientLabelLimit)});vertical?(enter.align\x3d{value:\x22left\x22},enter.baseline\x3dupdate.baseline\x3d{signal:\x27datum.perc\\x3c\\x3d0?\x22bottom\x22:datum.perc\\x3e\\x3d1?\x22top\x22:\x22middle\x22\x27},vertical\x3d\x22y\x22,v\x3d\x22x\x22,adjust\x3d\x221-\x22):(enter.align\x3dupdate.align\x3d{signal:\x27datum.perc\\x3c\\x3d0?\x22left\x22:datum.perc\\x3e\\x3d1?\x22right\x22:\x22center\x22\x27},\nenter.baseline\x3d{value:\x22top\x22},vertical\x3d\x22x\x22,v\x3d\x22y\x22);enter[vertical]\x3dupdate[vertical]\x3d{signal:adjust+\x22datum.perc\x22,mult:length};enter[v]\x3dupdate[v]\x3dthickness;thickness.offset\x3dvalue$jscomp$0(spec.labelOffset,config.gradientLabelOffset)||0;overlap\x3doverlap?{separation:_(\x22labelSeparation\x22),method:overlap,order:\x22datum.index\x22}:void 0;return guideMark({type:\x22text\x22,role:\x22legend-label\x22,style:\x22guide-label\x22,key:\x22value\x22,from:dataRef,encode,overlap},userEncode)}function legendSymbolGroups(spec,config,userEncode,dataRef,\ncolumns){var _\x3dlookup$jscomp$0(spec,config);const entries\x3duserEncode.entries,interactive\x3d!(!entries||!entries.interactive),name\x3dentries?entries.name:void 0,height\x3d_(\x22clipHeight\x22),symbolOffset\x3d_(\x22symbolOffset\x22),valueRef\x3d{data:\x22value\x22},xSignal\x3d`(${columns}) ? datum.${\x22offset\x22} : datum.${\x22size\x22}`,yEncode\x3dheight?encoder(height):{field:\x22size\x22},ncols\x3d`max(1, ${columns})`;let enter,update;yEncode.mult\x3d.5;var encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,x:{signal:xSignal,mult:.5,offset:symbolOffset},y:yEncode},\nupdate:update\x3d{opacity:one,x:enter.x,y:enter.y},exit:{opacity:zero$jscomp$0}};let baseFill\x3dnull,baseStroke\x3dnull;spec.fill||(baseFill\x3dconfig.symbolBaseFillColor,baseStroke\x3dconfig.symbolBaseStrokeColor);addEncoders(encode,{fill:_(\x22symbolFillColor\x22,baseFill),shape:_(\x22symbolType\x22),size:_(\x22symbolSize\x22),stroke:_(\x22symbolStrokeColor\x22,baseStroke),strokeDash:_(\x22symbolDash\x22),strokeDashOffset:_(\x22symbolDashOffset\x22),strokeWidth:_(\x22symbolStrokeWidth\x22)},{opacity:_(\x22symbolOpacity\x22)});LegendScales.forEach(scale\x3d\x3e{spec[scale]\x26\x26\n(update[scale]\x3denter[scale]\x3d{scale:spec[scale],field:\x22value\x22})});config\x3dguideMark({type:\x22symbol\x22,role:\x22legend-symbol\x22,key:\x22value\x22,from:valueRef,clip:height?!0:void 0,encode},userEncode.symbols);encode\x3dencoder(symbolOffset);encode.offset\x3d_(\x22labelOffset\x22);encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,x:{signal:xSignal,offset:encode},y:yEncode},update:update\x3d{opacity:one,text:{field:\x22label\x22},x:enter.x,y:enter.y},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{align:_(\x22labelAlign\x22),baseline:_(\x22labelBaseline\x22),\nfill:_(\x22labelColor\x22),fillOpacity:_(\x22labelOpacity\x22),font:_(\x22labelFont\x22),fontSize:_(\x22labelFontSize\x22),fontStyle:_(\x22labelFontStyle\x22),fontWeight:_(\x22labelFontWeight\x22),limit:_(\x22labelLimit\x22)});userEncode\x3dguideMark({type:\x22text\x22,role:\x22legend-label\x22,style:\x22guide-label\x22,key:\x22value\x22,from:valueRef,encode},userEncode.labels);encode\x3d{enter:{noBound:{value:!height},width:zero$jscomp$0,height:height?encoder(height):zero$jscomp$0,opacity:zero$jscomp$0},exit:{opacity:zero$jscomp$0},update:update\x3d{opacity:one,row:{signal:null},\ncolumn:{signal:null}}};_.isVertical(!0)?(_\x3d`ceil(item.mark.items.length / ${ncols})`,update.row.signal\x3d`${\x22datum.index\x22}%${_}`,update.column.signal\x3d`floor(${\x22datum.index\x22} / ${_})`,_\x3d{field:[\x22row\x22,\x22datum.index\x22]}):(update.row.signal\x3d`floor(${\x22datum.index\x22} / ${ncols})`,update.column.signal\x3d`${\x22datum.index\x22} % ${ncols}`,_\x3d{field:\x22datum.index\x22});update.column.signal\x3d`(${columns})?${update.column.signal}:${\x22datum.index\x22}`;dataRef\x3d{facet:{data:dataRef,name:\x22value\x22,groupby:\x22index\x22}};return guideGroup({role:\x22scope\x22,\nfrom:dataRef,encode:extendEncode(encode,entries,Skip),marks:[config,userEncode],name,interactive,sort:_})}function legendSymbolLayout(spec,config){spec\x3dlookup$jscomp$0(spec,config);return{align:spec(\x22gridAlign\x22),columns:spec.entryColumns(),center:{row:!0,column:!1},padding:{row:spec(\x22rowPadding\x22),column:spec(\x22columnPadding\x22)}}}function legendTitle(spec,config,userEncode,dataRef){config\x3dlookup$jscomp$0(spec,config);const encode\x3d{enter:{opacity:zero$jscomp$0},update:{opacity:one,x:{field:{group:\x22padding\x22}},\ny:{field:{group:\x22padding\x22}}},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{orient:config(\x22titleOrient\x22),_anchor:config(\x22titleAnchor\x22),anchor:{signal:\x27item._anchor || ((item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) ? \x22middle\x22 : \x22start\x22)\x27},angle:{signal:\x27datum.vgrad \\x26\\x26 (item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22) ? (item.orient \\x3d\\x3d\\x3d \x22left\x22 ? -90 : 90) : 0\x27},align:{signal:exprAlign},baseline:{signal:exprBaseline},text:spec.title,fill:config(\x22titleColor\x22),\nfillOpacity:config(\x22titleOpacity\x22),font:config(\x22titleFont\x22),fontSize:config(\x22titleFontSize\x22),fontStyle:config(\x22titleFontStyle\x22),fontWeight:config(\x22titleFontWeight\x22),limit:config(\x22titleLimit\x22),lineHeight:config(\x22titleLineHeight\x22)},{align:config(\x22titleAlign\x22),baseline:config(\x22titleBaseline\x22)});return guideMark({type:\x22text\x22,role:\x22legend-title\x22,style:\x22guide-title\x22,from:dataRef,encode},userEncode)}function clip$jscomp$0(clip,scope){let expr;vegaUtil.isObject(clip)\x26\x26(clip.signal?expr\x3dclip.signal:clip.path?\nexpr\x3d\x22pathShape(\x22+param$jscomp$0(clip.path)+\x22)\x22:clip.sphere\x26\x26(expr\x3d\x22geoShape(\x22+param$jscomp$0(clip.sphere)+\x27, {type: \x22Sphere\x22})\x27));return expr?scope.signalRef(expr):!!clip}function param$jscomp$0(value){return vegaUtil.isObject(value)\x26\x26value.signal?value.signal:vegaUtil.stringValue(value)}function getRole(spec){const role\x3dspec.role||\x22\x22;return role.indexOf(\x22axis\x22)\x26\x26role.indexOf(\x22legend\x22)\x26\x26role.indexOf(\x22title\x22)?\x22group\x22\x3d\x3d\x3dspec.type?\x22scope\x22:role||\x22mark\x22:role}function definition(spec){return{marktype:spec.type,\nname:spec.name||void 0,role:spec.role||getRole(spec),zindex:+spec.zindex||void 0,aria:spec.aria,description:spec.description}}function interactive$jscomp$0(spec,scope){return spec\x26\x26spec.signal?scope.signalRef(spec.signal):!1\x3d\x3d\x3dspec?!1:!0}function parseTransform(spec,scope){const def\x3dvegaDataflow.definition(spec.type);def||vegaUtil.error(\x22Unrecognized transform type: \x22+vegaUtil.stringValue(spec.type));var JSCompiler_inline_result\x3ddef.type.toLowerCase();var params\x3dparseParameters(def,spec,scope);JSCompiler_inline_result\x3d\nnew Entry(JSCompiler_inline_result,null,params,void 0);spec.signal\x26\x26scope.addSignal(spec.signal,scope.proxy(JSCompiler_inline_result));JSCompiler_inline_result.metadata\x3ddef.metadata||{};return JSCompiler_inline_result}function parseParameters(def,spec,scope){const params\x3d{},n\x3ddef.params.length;for(let i\x3d0;i\x3cn;++i){const pdef\x3ddef.params[i];params[pdef.name]\x3dparseParameter$1(pdef,spec,scope)}return params}function parseParameter$1(def,spec,scope){const type\x3ddef.type,value\x3dspec[def.name];if(\x22index\x22\x3d\x3d\x3d\ntype)return parseIndexParameter(def,spec,scope);if(void 0\x3d\x3d\x3dvalue)def.required\x26\x26vegaUtil.error(\x22Missing required \x22+vegaUtil.stringValue(spec.type)+\x22 parameter: \x22+vegaUtil.stringValue(def.name));else return\x22param\x22\x3d\x3d\x3dtype?parseSubParameters(def,spec,scope):\x22projection\x22\x3d\x3d\x3dtype?scope.projectionRef(spec[def.name]):def.array\x26\x26!isSignal(value)?value.map(v\x3d\x3eparameterValue(def,v,scope)):parameterValue(def,value,scope)}function parameterValue(def,value,scope){const type\x3ddef.type;return isSignal(value)?\x22expr\x22\x3d\x3d\x3d\ntype?vegaUtil.error(\x22Expression references can not be signals.\x22):\x22field\x22\x3d\x3d\x3dtype?scope.fieldRef(value):\x22compare\x22\x3d\x3d\x3dtype?scope.compareRef(value):scope.signalRef(value.signal):(def\x3ddef.expr||\x22field\x22\x3d\x3d\x3dtype)\x26\x26value\x26\x26value.expr?scope.exprRef(value.expr,value.as):def\x26\x26value\x26\x26value.field?fieldRef(value.field,value.as):\x22expr\x22\x3d\x3d\x3dtype?vegaFunctions.parseExpression(value,scope):\x22data\x22\x3d\x3d\x3dtype?ref$jscomp$0(scope.getData(value).values):\x22field\x22\x3d\x3d\x3dtype?fieldRef(value):\x22compare\x22\x3d\x3d\x3dtype?scope.compareRef(value):value}\nfunction parseIndexParameter(def,spec,scope){vegaUtil.isString(spec.from)||vegaUtil.error(\x27Lookup \x22from\x22 parameter must be a string literal.\x27);return scope.getData(spec.from).lookupRef(scope,spec.key)}function parseSubParameters(def,spec,scope){spec\x3dspec[def.name];return def.array?(vegaUtil.isArray(spec)||vegaUtil.error(\x22Expected an array of sub-parameters. Instead: \x22+vegaUtil.stringValue(spec)),spec.map(v\x3d\x3eparseSubParameter(def,v,scope))):parseSubParameter(def,spec,scope)}function parseSubParameter(def,\nvalue,scope){const n\x3ddef.params.length;let pdef;for(let i\x3d0;i\x3cn;++i){pdef\x3ddef.params[i];for(const k in pdef.key)if(pdef.key[k]!\x3d\x3dvalue[k]){pdef\x3dnull;break}if(pdef)break}pdef||vegaUtil.error(\x22Unsupported parameter: \x22+vegaUtil.stringValue(value));def\x3dvegaUtil.extend(parseParameters(pdef,value,scope),pdef.key);return ref$jscomp$0(scope.add(Params(def)))}function parseData(from,group,scope){let facet,key,dataRef,parent;if(!from)dataRef\x3dref$jscomp$0(scope.add(Collect(null,[{}])));else if(facet\x3dfrom.facet)group||\nvegaUtil.error(\x22Only group marks can be faceted.\x22),null!\x3dfacet.field?dataRef\x3dparent\x3dgetDataRef(facet,scope):(from.data?parent\x3dref$jscomp$0(scope.getData(from.data).aggregate):(group\x3dparseTransform(vegaUtil.extend({type:\x22aggregate\x22,groupby:vegaUtil.array(facet.groupby)},facet.aggregate),scope),group.params.key\x3dscope.keyRef(facet.groupby),group.params.pulse\x3dgetDataRef(facet,scope),dataRef\x3dparent\x3dref$jscomp$0(scope.add(group))),key\x3dscope.keyRef(facet.groupby,!0));dataRef||(dataRef\x3dgetDataRef(from,scope));\nreturn{key,pulse:dataRef,parent}}function getDataRef(from,scope){return from.$ref?from:from.data\x26\x26from.data.$ref?from.data:ref$jscomp$0(scope.getData(from.data).output)}function DataScope(scope,input,output,values,aggr){this.scope\x3dscope;this.input\x3dinput;this.output\x3doutput;this.values\x3dvalues;this.aggregate\x3daggr;this.index\x3d{}}function fieldKey(field){return vegaUtil.isString(field)?field:null}function addSortField(scope,p,sort){const as\x3daggrField(sort.op,sort.field);let s;if(p.ops)for(let i\x3d0,n\x3dp.as.length;i\x3c\nn;++i){if(p.as[i]\x3d\x3d\x3das)return}else p.ops\x3d[\x22count\x22],p.fields\x3d[null],p.as\x3d[\x22count\x22];sort.op\x26\x26(p.ops.push((s\x3dsort.op.signal)?scope.signalRef(s):sort.op),p.fields.push(scope.fieldRef(sort.field)),p.as.push(as))}function cache$jscomp$0(scope,ds,name,optype,field,counts,index){name\x3dds[name]||(ds[name]\x3d{});var JSCompiler_inline_result\x3dvegaUtil.isObject(counts)?(\x22descending\x22\x3d\x3d\x3dcounts.order?\x22-\x22:\x22+\x22)+aggrField(counts.op,counts.field):\x22\x22;let k\x3dfieldKey(field);if(null!\x3dk){scope\x3dds.scope;k+\x3dJSCompiler_inline_result?\n\x22|\x22+JSCompiler_inline_result:\x22\x22;var v\x3dname[k]}v||(v\x3dcounts?{field:keyFieldRef,pulse:ds.countsRef(scope,field,counts)}:{field:scope.fieldRef(field),pulse:ref$jscomp$0(ds.output)},JSCompiler_inline_result\x26\x26(v.sort\x3dscope.sortRef(counts)),scope\x3dscope.add(new Entry(optype,void 0,v,void 0)),index\x26\x26(ds.index[field]\x3dscope),v\x3dref$jscomp$0(scope),null!\x3dk\x26\x26(name[k]\x3dv));return v}function parseFacet(spec,scope,group){var facet\x3dspec.from.facet;const name\x3dfacet.name,data\x3dgetDataRef(facet,scope);let op;facet.name||\nvegaUtil.error(\x22Facet must have a name: \x22+vegaUtil.stringValue(facet));facet.data||vegaUtil.error(\x22Facet must reference a data set: \x22+vegaUtil.stringValue(facet));facet.field?op\x3dscope.add(PreFacet({field:scope.fieldRef(facet.field),pulse:data})):facet.groupby?op\x3dscope.add(Facet({key:scope.keyRef(facet.groupby),group:ref$jscomp$0(scope.proxy(group.parent)),pulse:data})):vegaUtil.error(\x22Facet must specify groupby or field: \x22+vegaUtil.stringValue(facet));scope\x3dscope.fork();group\x3dscope.add(Collect());\nfacet\x3dscope.add(Sieve({pulse:ref$jscomp$0(group)}));scope.addData(name,new DataScope(scope,group,group,facet));scope.addSignal(\x22parent\x22,null);op.params.subflow\x3d{$subflow:scope.parse(spec).toRuntime()}}function parseSubflow(spec,scope,input){input\x3dscope.add(PreFacet({pulse:input.pulse}));scope\x3dscope.fork();scope.add(Sieve());scope.addSignal(\x22parent\x22,null);input.params.subflow\x3d{$subflow:scope.parse(spec).toRuntime()}}function parseTrigger(spec,scope,name){const remove\x3dspec.remove,insert\x3dspec.insert,\ntoggle\x3dspec.toggle,modify\x3dspec.modify,values\x3dspec.values,op\x3dscope.add(new Entry(\x22operator\x22,void 0,void 0,void 0));spec\x3d\x22if(\x22+spec.trigger+\x27,modify(\x22\x27+name+\x27\x22,\x27+[insert,remove,toggle,modify,values].map(_\x3d\x3enull\x3d\x3d_?\x22null\x22:_).join(\x22,\x22)+\x22),0)\x22;scope\x3dvegaFunctions.parseExpression(spec,scope);op.update\x3dscope.$expr;op.params\x3dscope.$params}function parseMark(spec,scope){var role\x3dgetRole(spec),group\x3d\x22group\x22\x3d\x3d\x3dspec.type,facet\x3dspec.from\x26\x26spec.from.facet;const overlap\x3dspec.overlap;let layout\x3dspec.layout||\x22scope\x22\x3d\x3d\x3d\nrole||\x22frame\x22\x3d\x3d\x3drole,ops,op,store,enc,name,layoutRef;const nested\x3d\x22mark\x22\x3d\x3d\x3drole||layout||facet,input\x3dparseData(spec.from,group,scope);op\x3dscope.add(DataJoin({key:input.key||(spec.key?fieldRef(spec.key):void 0),pulse:input.pulse,clean:!group}));const joinRef\x3dref$jscomp$0(op);op\x3dstore\x3dscope.add(Collect({pulse:joinRef}));op\x3dscope.add(Mark({markdef:definition(spec),interactive:interactive$jscomp$0(spec.interactive,scope),clip:clip$jscomp$0(spec.clip,scope),context:{$context:!0},groups:scope.lookup(),parent:scope.signals.parent?\nscope.signalRef(\x22parent\x22):null,index:scope.markpath(),pulse:ref$jscomp$0(op)}));var boundRef\x3dref$jscomp$0(op);op\x3denc\x3dscope.add(Encode(parseEncode(spec.encode,spec.type,role,spec.style,scope,{mod:!1,pulse:boundRef})));op.params.parent\x3dscope.encode();spec.transform\x26\x26spec.transform.forEach(_\x3d\x3e{_\x3dparseTransform(_,scope);const md\x3d_.metadata;(md.generates||md.changes)\x26\x26vegaUtil.error(\x22Mark transforms should not generate new data.\x22);md.nomod||(enc.params.mod\x3d!0);_.params.pulse\x3dref$jscomp$0(op);scope.add(op\x3d\n_)});spec.sort\x26\x26(op\x3dscope.add(SortItems({sort:scope.compareRef(spec.sort),pulse:ref$jscomp$0(op)})));role\x3dref$jscomp$0(op);if(facet||layout)layout\x3dscope.add(ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,mark:boundRef,pulse:role})),layoutRef\x3dref$jscomp$0(layout);const bound\x3dscope.add(Bound({mark:boundRef,pulse:layoutRef||role}));boundRef\x3dref$jscomp$0(bound);group\x26\x26(nested\x26\x26(ops\x3dscope.operators,ops.pop(),layout\x26\x26ops.pop()),scope.pushState(role,layoutRef||boundRef,joinRef),\nfacet?parseFacet(spec,scope,input):nested?parseSubflow(spec,scope,input):scope.parse(spec),scope.popState(),nested\x26\x26(layout\x26\x26ops.push(layout),ops.push(bound)));overlap\x26\x26(boundRef\x3dparseOverlap(overlap,boundRef,scope));group\x3dscope.add(Render({pulse:boundRef}));facet\x3dscope.add(Sieve({pulse:ref$jscomp$0(group)},void 0,scope.parent()));null!\x3dspec.name\x26\x26(name\x3dspec.name,scope.addData(name,new DataScope(scope,store,group,facet)),spec.on\x26\x26spec.on.forEach(on\x3d\x3e{(on.insert||on.remove||on.toggle)\x26\x26vegaUtil.error(\x22Marks only support modify triggers.\x22);\nparseTrigger(on,scope,name)}))}function parseOverlap(overlap,source,scope){const method\x3doverlap.method,bound\x3doverlap.bound,sep\x3doverlap.separation;source\x3d{separation:isSignal(sep)?scope.signalRef(sep.signal):sep,method:isSignal(method)?scope.signalRef(method.signal):method,pulse:source};overlap.order\x26\x26(source.sort\x3dscope.compareRef({field:overlap.order}));bound\x26\x26(overlap\x3dbound.tolerance,source.boundTolerance\x3disSignal(overlap)?scope.signalRef(overlap.signal):+overlap,source.boundScale\x3dscope.scaleRef(bound.scale),\nsource.boundOrient\x3dbound.orient);return ref$jscomp$0(scope.add(Overlap(source)))}function parseLegend(spec,scope){const config\x3dscope.config.legend,encode\x3dspec.encode||{},_\x3dlookup$jscomp$0(spec,config),legendEncode\x3dencode.legend||{},name\x3dlegendEncode.name||void 0,interactive\x3dlegendEncode.interactive,style\x3dlegendEncode.style,scales\x3d{};let scale\x3d0,entryLayout,params;LegendScales.forEach(s\x3d\x3espec[s]?(scales[s]\x3dspec[s],scale\x3dscale||spec[s]):0);scale||vegaUtil.error(\x22Missing valid scale for legend.\x22);var children\x3d\nlegendType(spec,scope.scaleType(scale));const datum\x3d{title:null!\x3dspec.title,scales,type:children,vgrad:\x22symbol\x22!\x3d\x3dchildren\x26\x26_.isVertical()},dataRef\x3dref$jscomp$0(scope.add(Collect(null,[datum]))),entryRef\x3dref$jscomp$0(scope.add(LegendEntries(params\x3d{type:children,scale:scope.scaleRef(scale),count:scope.objectProperty(_(\x22tickCount\x22)),limit:scope.property(_(\x22symbolLimit\x22)),values:scope.objectProperty(spec.values),minstep:scope.property(spec.tickMinStep),formatType:scope.property(spec.formatType),formatSpecifier:scope.property(spec.format)})));\n\x22gradient\x22\x3d\x3d\x3dchildren?(children\x3d[legendGradient(spec,scale,config,encode.gradient),legendGradientLabels(spec,config,encode.labels,entryRef)],params.count\x3dparams.count||scope.signalRef(`max(2,2*floor((${deref(_.gradientLength())})/100))`)):\x22discrete\x22\x3d\x3d\x3dchildren?children\x3d[legendGradientDiscrete(spec,scale,config,encode.gradient,entryRef),legendGradientLabels(spec,config,encode.labels,entryRef)]:(entryLayout\x3dlegendSymbolLayout(spec,config),children\x3d[legendSymbolGroups(spec,config,encode,entryRef,deref(entryLayout.columns))],\nparams.size\x3dsizeExpression(spec,scope,children[0].marks));children\x3d[guideGroup({role:\x22legend-entry\x22,from:dataRef,encode:{enter:{x:{value:0},y:{value:0}}},marks:children,layout:entryLayout,interactive})];datum.title\x26\x26children.push(legendTitle(spec,config,encode.title,dataRef));return parseMark(guideGroup({role:\x22legend\x22,from:dataRef,encode:extendEncode(buildLegendEncode(_,spec,config),legendEncode,Skip),marks:children,aria:_(\x22aria\x22),description:_(\x22description\x22),zindex:_(\x22zindex\x22),name,interactive,style}),\nscope)}function legendType(spec,scaleType){let type\x3dspec.type||\x22symbol\x22;spec.type||1!\x3d\x3dscaleCount(spec)||!spec.fill\x26\x26!spec.stroke||(type\x3dvegaScale.isContinuous(scaleType)?\x22gradient\x22:vegaScale.isDiscretizing(scaleType)?\x22discrete\x22:\x22symbol\x22);return\x22gradient\x22!\x3d\x3dtype?type:vegaScale.isDiscretizing(scaleType)?\x22discrete\x22:\x22gradient\x22}function scaleCount(spec){return LegendScales.reduce((count,type)\x3d\x3ecount+(spec[type]?1:0),0)}function buildLegendEncode(_,spec,config){const encode\x3d{enter:{},update:{}};addEncoders(encode,\n{orient:_(\x22orient\x22),offset:_(\x22offset\x22),padding:_(\x22padding\x22),titlePadding:_(\x22titlePadding\x22),cornerRadius:_(\x22cornerRadius\x22),fill:_(\x22fillColor\x22),stroke:_(\x22strokeColor\x22),strokeWidth:config.strokeWidth,strokeDash:config.strokeDash,x:_(\x22legendX\x22),y:_(\x22legendY\x22),format:spec.format,formatType:spec.formatType});return encode}function sizeExpression(spec,scope,marks){const size\x3dderef(getChannel(\x22size\x22,spec,marks));spec\x3dderef(getChannel(\x22strokeWidth\x22,spec,marks));(marks\x3dgetEncoding(\x22fontSize\x22,marks[1].encode))||\n(marks\x3d(marks\x3dscope.config.style[\x22guide-label\x22])\x26\x26marks.fontSize);marks\x3dderef(marks);return vegaFunctions.parseExpression(`max(ceil(sqrt(${size})+${spec}),${marks})`,scope)}function getChannel(name,spec,marks){return spec[name]?`scale(\x22${spec[name]}\x22,datum)`:getEncoding(name,marks[0].encode)}function parseTitle(spec,scope){spec\x3dvegaUtil.isString(spec)?{text:spec}:spec;const _\x3dlookup$jscomp$0(spec,scope.config.title),encode\x3dspec.encode||{};var userEncode\x3dencode.group||{};const name\x3duserEncode.name||\nvoid 0,interactive\x3duserEncode.interactive,style\x3duserEncode.style,children\x3d[],dataRef\x3dref$jscomp$0(scope.add(Collect(null,[{}])));children.push(buildTitle(spec,_,titleEncode(spec),dataRef));spec.subtitle\x26\x26children.push(buildSubTitle(spec,_,encode.subtitle,dataRef));spec\x3d{enter:{},update:{}};addEncoders(spec,{orient:_(\x22orient\x22),anchor:_(\x22anchor\x22),align:{signal:alignExpr},angle:{signal:\x27item.orient\\x3d\\x3d\\x3d\x22left\x22?-90:item.orient\\x3d\\x3d\\x3d\x22right\x22?90:0\x27},limit:_(\x22limit\x22),frame:_(\x22frame\x22),offset:_(\x22offset\x22)||\n0,padding:_(\x22subtitlePadding\x22)});userEncode\x3dextendEncode(spec,userEncode,Skip);return parseMark(guideGroup({role:\x22title\x22,from:dataRef,encode:userEncode,marks:children,aria:_(\x22aria\x22),description:_(\x22description\x22),zindex:_(\x22zindex\x22),name,interactive,style}),scope)}function titleEncode(spec){const encode\x3dspec.encode;return encode\x26\x26encode.title||vegaUtil.extend({name:spec.name,interactive:spec.interactive,style:spec.style},encode)}function buildTitle(spec,_,userEncode,dataRef){var zero\x3d{value:0};zero\x3d\n{enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};addEncoders(zero,{text:spec.text,align:{signal:\x22item.mark.group.align\x22},angle:{signal:\x22item.mark.group.angle\x22},limit:{signal:\x22item.mark.group.limit\x22},baseline:\x22top\x22,dx:_(\x22dx\x22),dy:_(\x22dy\x22),fill:_(\x22color\x22),font:_(\x22font\x22),fontSize:_(\x22fontSize\x22),fontStyle:_(\x22fontStyle\x22),fontWeight:_(\x22fontWeight\x22),lineHeight:_(\x22lineHeight\x22)},{align:_(\x22align\x22),angle:_(\x22angle\x22),baseline:_(\x22baseline\x22)});return guideMark({type:\x22text\x22,role:\x22title-text\x22,style:\x22group-title\x22,\nfrom:dataRef,encode:zero},userEncode)}function buildSubTitle(spec,_,userEncode,dataRef){var zero\x3d{value:0};zero\x3d{enter:{opacity:zero},update:{opacity:{value:1}},exit:{opacity:zero}};addEncoders(zero,{text:spec.subtitle,align:{signal:\x22item.mark.group.align\x22},angle:{signal:\x22item.mark.group.angle\x22},limit:{signal:\x22item.mark.group.limit\x22},baseline:\x22top\x22,dx:_(\x22dx\x22),dy:_(\x22dy\x22),fill:_(\x22subtitleColor\x22),font:_(\x22subtitleFont\x22),fontSize:_(\x22subtitleFontSize\x22),fontStyle:_(\x22subtitleFontStyle\x22),fontWeight:_(\x22subtitleFontWeight\x22),\nlineHeight:_(\x22subtitleLineHeight\x22)},{align:_(\x22align\x22),angle:_(\x22angle\x22),baseline:_(\x22baseline\x22)});return guideMark({type:\x22text\x22,role:\x22title-subtitle\x22,style:\x22group-subtitle\x22,from:dataRef,encode:zero},userEncode)}function parseData$1(data,scope){const transforms\x3d[];data.transform\x26\x26data.transform.forEach(tx\x3d\x3e{transforms.push(parseTransform(tx,scope))});data.on\x26\x26data.on.forEach(on\x3d\x3e{parseTrigger(on,scope,data.name)});scope.addDataPipeline(data.name,analyze(data,scope,transforms))}function analyze(data,\nscope,ops){const output\x3d[];let source\x3dnull,modify\x3d!1,generate\x3d!1,upstream,n,t,m;data.values?isSignal(data.values)||hasSignal(data.format)?(output.push(load(scope,data)),output.push(source\x3dcollect())):output.push(source\x3dcollect({$ingest:data.values,$format:data.format})):data.url?hasSignal(data.url)||hasSignal(data.format)?(output.push(load(scope,data)),output.push(source\x3dcollect())):output.push(source\x3dcollect({$request:data.url,$format:data.format})):data.source\x26\x26(source\x3dupstream\x3dvegaUtil.array(data.source).map(d\x3d\x3e\nref$jscomp$0(scope.getData(d).output)),output.push(null));data\x3d0;for(n\x3dops.length;data\x3cn;++data)t\x3dops[data],m\x3dt.metadata,source||m.source||output.push(source\x3dcollect()),output.push(t),m.generates\x26\x26(generate\x3d!0),m.modifies\x26\x26!generate\x26\x26(modify\x3d!0),m.source?source\x3dt:m.changes\x26\x26(source\x3dnull);upstream\x26\x26(n\x3dupstream.length-1,output[0]\x3dRelay({derive:modify,pulse:n?upstream:upstream[0]}),(modify||n)\x26\x26output.splice(1,0,collect()));source||output.push(collect());output.push(Sieve({}));return output}function collect(values){values\x3d\nCollect({},values);values.metadata\x3d{source:!0};return values}function load(scope,data){return Load({url:data.url?scope.property(data.url):void 0,async:data.async?scope.property(data.async):void 0,values:data.values?scope.property(data.values):void 0,format:scope.objectProperty(data.format)})}function fallback(prop,config,axisConfig,style){let styleProp;if(config\x26\x26vegaUtil.hasOwnProperty(config,prop))return config[prop];if(vegaUtil.hasOwnProperty(axisConfig,prop))return axisConfig[prop];if(prop.startsWith(\x22title\x22)){switch(prop){case \x22titleColor\x22:styleProp\x3d\n\x22fill\x22;break;case \x22titleFont\x22:case \x22titleFontSize\x22:case \x22titleFontWeight\x22:styleProp\x3dprop[5].toLowerCase()+prop.slice(6)}return style[\x22guide-title\x22][styleProp]}if(prop.startsWith(\x22label\x22)){switch(prop){case \x22labelColor\x22:styleProp\x3d\x22fill\x22;break;case \x22labelFont\x22:case \x22labelFontSize\x22:styleProp\x3dprop[5].toLowerCase()+prop.slice(6)}return style[\x22guide-label\x22][styleProp]}return null}function keys(objects){const map\x3d{};for(const obj of objects)if(obj)for(const key in obj)map[key]\x3d1;return Object.keys(map)}\nfunction axisDomain(spec,config,userEncode,dataRef){var _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;let enter,update;const encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:_(\x22domainColor\x22),strokeCap:_(\x22domainCap\x22),strokeDash:_(\x22domainDash\x22),strokeDashOffset:_(\x22domainDashOffset\x22),strokeWidth:_(\x22domainWidth\x22),strokeOpacity:_(\x22domainOpacity\x22)});_\x3d{scale:spec.scale,range:0};spec\x3d{scale:spec.scale,range:1};enter.x\x3dupdate.x\x3d\nifX(config,_,zero$jscomp$0);enter.x2\x3dupdate.x2\x3difX(config,spec);enter.y\x3dupdate.y\x3difY(config,_,zero$jscomp$0);enter.y2\x3dupdate.y2\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-domain\x22,from:dataRef,encode},userEncode)}function axisGrid(spec,config,userEncode,dataRef,band){var _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;var vscale\x3dspec.gridScale;const sign\x3dgetSign(config,1,-1);a:{var JSCompiler_inline_result\x3dspec.offset;if(1!\x3d\x3dsign)if(vegaUtil.isObject(JSCompiler_inline_result)){for(var entry\x3d\nJSCompiler_inline_result\x3dvegaUtil.extend({},JSCompiler_inline_result);null!\x3dentry.mult;)if(vegaUtil.isObject(entry.mult))entry\x3dentry.mult\x3dvegaUtil.extend({},entry.mult);else{entry.mult\x3disSignal(sign)?{signal:`(${entry.mult}) * (${sign.signal})`}:entry.mult*sign;break a}entry.mult\x3dsign}else JSCompiler_inline_result\x3disSignal(sign)?{signal:`(${sign.signal}) * (${JSCompiler_inline_result||0})`}:sign*(JSCompiler_inline_result||0)}const offset\x3dJSCompiler_inline_result;let update;const encode\x3d{enter:JSCompiler_inline_result\x3d\n{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:entry\x3d{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:_(\x22gridColor\x22),strokeCap:_(\x22gridCap\x22),strokeDash:_(\x22gridDash\x22),strokeDashOffset:_(\x22gridDashOffset\x22),strokeOpacity:_(\x22gridOpacity\x22),strokeWidth:_(\x22gridWidth\x22)});spec\x3d{scale:spec.scale,field:\x22value\x22,band:band.band,extra:band.extra,offset:band.offset,round:_(\x22tickRound\x22)};_\x3difX(config,{signal:\x22height\x22},{signal:\x22width\x22});band\x3dvscale?{scale:vscale,range:0,mult:sign,offset}:{value:0,offset};\nvscale\x3dvscale?{scale:vscale,range:1,mult:sign,offset}:vegaUtil.extend(_,{mult:sign,offset});JSCompiler_inline_result.x\x3dupdate.x\x3difX(config,spec,band);JSCompiler_inline_result.y\x3dupdate.y\x3difY(config,spec,band);JSCompiler_inline_result.x2\x3dupdate.x2\x3difY(config,vscale);JSCompiler_inline_result.y2\x3dupdate.y2\x3difX(config,vscale);entry.x\x3difX(config,spec);entry.y\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-grid\x22,key:\x22value\x22,from:dataRef,encode},userEncode)}function axisTicks(spec,config,userEncode,\ndataRef,size,band){const _\x3dlookup$jscomp$0(spec,config);config\x3dspec.orient;const sign\x3dgetSign(config,-1,1);let enter,exit,update;const encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0},update:update\x3d{opacity:one},exit:exit\x3d{opacity:zero$jscomp$0}};addEncoders(encode,{stroke:_(\x22tickColor\x22),strokeCap:_(\x22tickCap\x22),strokeDash:_(\x22tickDash\x22),strokeDashOffset:_(\x22tickDashOffset\x22),strokeOpacity:_(\x22tickOpacity\x22),strokeWidth:_(\x22tickWidth\x22)});size\x3dencoder(size);size.mult\x3dsign;spec\x3d{scale:spec.scale,field:\x22value\x22,band:band.band,\nextra:band.extra,offset:band.offset,round:_(\x22tickRound\x22)};update.y\x3denter.y\x3difX(config,zero$jscomp$0,spec);update.y2\x3denter.y2\x3difX(config,size);exit.x\x3difX(config,spec);update.x\x3denter.x\x3difY(config,zero$jscomp$0,spec);update.x2\x3denter.x2\x3difY(config,size);exit.y\x3difY(config,spec);return guideMark({type:\x22rule\x22,role:\x22axis-tick\x22,key:\x22value\x22,from:dataRef,encode},userEncode)}function flushExpr(scale,threshold,a,b,c){return{signal:\x27flush(range(\x22\x27+scale+\x27\x22), scale(\x22\x27+scale+\x27\x22, datum.value), \x27+threshold+\x22,\x22+a+\x22,\x22+\nb+\x22,\x22+c+\x22)\x22}}function axisLabels(spec,config,userEncode,dataRef,size,band){config\x3dlookup$jscomp$0(spec,config);const orient\x3dspec.orient;spec\x3dspec.scale;var sign\x3dgetSign(orient,-1,1),flush\x3dderef(config(\x22labelFlush\x22)),flushOffset\x3dderef(config(\x22labelFlushOffset\x22)),labelAlign\x3dconfig(\x22labelAlign\x22),labelBaseline\x3dconfig(\x22labelBaseline\x22);let flushOn\x3d0\x3d\x3d\x3dflush||!!flush;var tickSize\x3dencoder(size);tickSize.mult\x3dsign;tickSize.offset\x3dencoder(config(\x22labelPadding\x22)||0);tickSize.offset.mult\x3dsign;sign\x3d{scale:spec,\nfield:\x22value\x22,band:.5,offset:extendOffset(band.offset,config(\x22labelOffset\x22))};band\x3dflushOn?flushExpr(spec,flush,\x27\x22left\x22\x27,\x27\x22right\x22\x27,\x27\x22center\x22\x27):{value:\x22center\x22};size\x3disSignal(orient)?ifExpr(`${orient.signal} \x3d\x3d\x3d \x27${\x22right\x22}\x27`,\x22left\x22,\x22right\x22):\x22right\x22\x3d\x3d\x3dorient?{value:\x22left\x22}:{value:\x22right\x22};band\x3difX(orient,band,size);size\x3difX(orient,ifTop(orient,\x22bottom\x22,\x22top\x22),flushOn?flushExpr(spec,flush,\x27\x22top\x22\x27,\x27\x22bottom\x22\x27,\x27\x22middle\x22\x27):{value:\x22middle\x22});flush\x3dflushExpr(spec,flush,`-(${flushOffset})`,flushOffset,0);\nflushOn\x3dflushOn\x26\x26flushOffset;tickSize\x3d{opacity:zero$jscomp$0,x:ifX(orient,sign,tickSize),y:ifY(orient,sign,tickSize)};tickSize\x3d{enter:tickSize,update:flushOffset\x3d{opacity:one,text:{field:\x22label\x22},x:tickSize.x,y:tickSize.y,align:band,baseline:size},exit:{opacity:zero$jscomp$0,x:tickSize.x,y:tickSize.y}};addEncoders(tickSize,{dx:!labelAlign\x26\x26flushOn?ifX(orient,flush):null,dy:!labelBaseline\x26\x26flushOn?ifY(orient,flush):null});addEncoders(tickSize,{angle:config(\x22labelAngle\x22),fill:config(\x22labelColor\x22),fillOpacity:config(\x22labelOpacity\x22),\nfont:config(\x22labelFont\x22),fontSize:config(\x22labelFontSize\x22),fontWeight:config(\x22labelFontWeight\x22),fontStyle:config(\x22labelFontStyle\x22),limit:config(\x22labelLimit\x22),lineHeight:config(\x22labelLineHeight\x22)},{align:labelAlign,baseline:labelBaseline});labelAlign\x3dconfig(\x22labelBound\x22);labelBaseline\x3d(labelBaseline\x3dconfig(\x22labelOverlap\x22))||labelAlign?{separation:config(\x22labelSeparation\x22),method:labelBaseline,order:\x22datum.index\x22,bound:labelAlign?{scale:spec,orient,tolerance:labelAlign}:null}:void 0;flushOffset.align!\x3d\x3d\nband\x26\x26(flushOffset.align\x3dpatch(flushOffset.align,band));flushOffset.baseline!\x3d\x3dsize\x26\x26(flushOffset.baseline\x3dpatch(flushOffset.baseline,size));return guideMark({type:\x22text\x22,role:\x22axis-label\x22,style:\x22guide-label\x22,key:\x22value\x22,from:dataRef,encode:tickSize,overlap:labelBaseline},userEncode)}function axisTitle(spec,config,userEncode,dataRef){config\x3dlookup$jscomp$0(spec,config);const orient\x3dspec.orient,sign\x3dgetSign(orient,-1,1);let enter,update;const encode\x3d{enter:enter\x3d{opacity:zero$jscomp$0,anchor:encoder(config(\x22titleAnchor\x22,\nnull)),align:{signal:alignExpr}},update:update\x3dvegaUtil.extend({},enter,{opacity:one,text:encoder(spec.title)}),exit:{opacity:zero$jscomp$0}};spec\x3d{signal:`lerp(range(\x22${spec.scale}\x22), ${anchorExpr(0,1,.5)})`};update.x\x3difX(orient,spec);update.y\x3difY(orient,spec);spec\x3disSignal(sign)?{signal:`(${sign.signal}) * ${90}`}:{value:90*sign};enter.angle\x3difX(orient,zero$jscomp$0,spec);enter.baseline\x3difX(orient,ifTop(orient,\x22bottom\x22,\x22top\x22),{value:\x22bottom\x22});update.angle\x3denter.angle;update.baseline\x3denter.baseline;\naddEncoders(encode,{fill:config(\x22titleColor\x22),fillOpacity:config(\x22titleOpacity\x22),font:config(\x22titleFont\x22),fontSize:config(\x22titleFontSize\x22),fontStyle:config(\x22titleFontStyle\x22),fontWeight:config(\x22titleFontWeight\x22),limit:config(\x22titleLimit\x22),lineHeight:config(\x22titleLineHeight\x22)},{align:config(\x22titleAlign\x22),angle:config(\x22titleAngle\x22),baseline:config(\x22titleBaseline\x22)});autoLayout(config,orient,encode,userEncode);encode.update.align\x3dpatch(encode.update.align,enter.align);encode.update.angle\x3dpatch(encode.update.angle,\nenter.angle);encode.update.baseline\x3dpatch(encode.update.baseline,enter.baseline);return guideMark({type:\x22text\x22,role:\x22axis-title\x22,style:\x22guide-title\x22,from:dataRef,encode},userEncode)}function autoLayout(_,orient,encode,userEncode){const auto\x3d(value,dim)\x3d\x3enull!\x3dvalue?(encode.update[dim]\x3dpatch(encoder(value),encode.update[dim]),!1):has(dim,userEncode)?!1:!0,autoY\x3dauto(_(\x22titleX\x22),\x22x\x22);_\x3dauto(_(\x22titleY\x22),\x22y\x22);encode.enter.auto\x3d_\x3d\x3d\x3dautoY?encoder(_):ifX(orient,encoder(_),encoder(autoY))}function parseScope(spec,\nscope,preprocessed){const signals\x3dvegaUtil.array(spec.signals),scales\x3dvegaUtil.array(spec.scales);preprocessed||signals.forEach(_\x3d\x3eparseSignal(_,scope));vegaUtil.array(spec.projections).forEach(_\x3d\x3e{{const config\x3dscope.config.projection||{},params\x3d{};for(const name in _)\x22name\x22!\x3d\x3dname\x26\x26(params[name]\x3dparseParameter(_[name],name,scope));for(const name in config)null\x3d\x3dparams[name]\x26\x26(params[name]\x3dparseParameter(config[name],name,scope));scope.addProjection(_.name,params)}});scales.forEach(_\x3d\x3e{{const type\x3d\n_.type||\x22linear\x22;vegaScale.isValidScaleType(type)||vegaUtil.error(\x22Unrecognized scale type: \x22+vegaUtil.stringValue(type));scope.addScale(_.name,{type,domain:void 0})}});vegaUtil.array(spec.data).forEach(_\x3d\x3eparseData$1(_,scope));scales.forEach(_\x3d\x3e{{const params\x3dscope.getScale(_.name).params;let key;params.domain\x3dparseScaleDomain(_.domain,_,scope);null!\x3d_.range\x26\x26(params.range\x3dparseScaleRange(_,scope,params));if(null!\x3d_.interpolate){var interpolate\x3d_.interpolate,params$jscomp$0\x3dparams;params$jscomp$0.interpolate\x3d\nparseLiteral(interpolate.type||interpolate);null!\x3dinterpolate.gamma\x26\x26(params$jscomp$0.interpolateGamma\x3dparseLiteral(interpolate.gamma))}null!\x3d_.nice\x26\x26(interpolate\x3d_.nice,interpolate\x3dvegaUtil.isObject(interpolate)?{interval:parseLiteral(interpolate.interval),step:parseLiteral(interpolate.step)}:parseLiteral(interpolate),params.nice\x3dinterpolate);null!\x3d_.bins\x26\x26(interpolate\x3d_.bins,interpolate\x3dinterpolate.signal||vegaUtil.isArray(interpolate)?parseArray(interpolate,scope):scope.objectProperty(interpolate),\nparams.bins\x3dinterpolate);for(key in _)vegaUtil.hasOwnProperty(params,key)||\x22name\x22\x3d\x3d\x3dkey||(params[key]\x3dparseLiteral(_[key],scope))}});(preprocessed||signals).forEach(_\x3d\x3eparseSignalUpdates(_,scope));vegaUtil.array(spec.axes).forEach(_\x3d\x3e{var config\x3dscope.config,style\x3dconfig.style,axis\x3dconfig.axis,band\x3d\x22band\x22\x3d\x3d\x3dscope.scaleType(_.scale)\x26\x26config.axisBand,orient\x3d_.orient;if(isSignal(orient)){var or\x3dkeys([config.axisX,config.axisY]);var orientKeys\x3dkeys([config.axisTop,config.axisBottom,config.axisLeft,config.axisRight]);\nvar JSCompiler_inline_result\x3d{};for(key of or)JSCompiler_inline_result[key]\x3difX(orient,fallback(key,config.axisX,axis,style),fallback(key,config.axisY,axis,style));or\x3d{};for(key of orientKeys){orientKeys\x3dor;var JSCompiler_temp_const\x3dkey;var JSCompiler_inline_result$jscomp$0\x3dorient.signal;var t\x3dfallback(key,config.axisTop,axis,style),b\x3dfallback(key,config.axisBottom,axis,style),l\x3dfallback(key,config.axisLeft,axis,style),r\x3dfallback(key,config.axisRight,axis,style);JSCompiler_inline_result$jscomp$0\x3d\n{signal:(null!\x3dl?`${JSCompiler_inline_result$jscomp$0} \x3d\x3d\x3d \x27${\x22left\x22}\x27 ? (${toExpr(l)}) : `:\x22\x22)+(null!\x3db?`${JSCompiler_inline_result$jscomp$0} \x3d\x3d\x3d \x27${\x22bottom\x22}\x27 ? (${toExpr(b)}) : `:\x22\x22)+(null!\x3dr?`${JSCompiler_inline_result$jscomp$0} \x3d\x3d\x3d \x27${\x22right\x22}\x27 ? (${toExpr(r)}) : `:\x22\x22)+(null!\x3dt?`${JSCompiler_inline_result$jscomp$0} \x3d\x3d\x3d \x27${\x22top\x22}\x27 ? (${toExpr(t)}) : `:\x22\x22)+\x22(null)\x22};orientKeys[JSCompiler_temp_const]\x3dJSCompiler_inline_result$jscomp$0}}else JSCompiler_inline_result\x3d\x22top\x22\x3d\x3d\x3dorient||\x22bottom\x22\x3d\x3d\x3dorient?\nconfig.axisX:config.axisY,or\x3dconfig[\x22axis\x22+orient[0].toUpperCase()+orient.slice(1)];JSCompiler_inline_result\x3dJSCompiler_inline_result||or||band?vegaUtil.extend({},axis,JSCompiler_inline_result,or,band):axis;var key\x3d_.encode||{};config\x3dkey.axis||{};style\x3dconfig.name||void 0;axis\x3dconfig.interactive;band\x3dconfig.style;JSCompiler_inline_result$jscomp$0\x3dorient\x3dlookup$jscomp$0(_,JSCompiler_inline_result);or\x3dJSCompiler_inline_result$jscomp$0(\x22tickBand\x22);orientKeys\x3dJSCompiler_inline_result$jscomp$0(\x22tickOffset\x22);\nor?or.signal?(JSCompiler_temp_const\x3d{signal:`(${or.signal}) \x3d\x3d\x3d \x27extent\x27 ? 1 : 0.5`},JSCompiler_inline_result$jscomp$0\x3d{signal:`(${or.signal}) \x3d\x3d\x3d \x27extent\x27`},vegaUtil.isObject(orientKeys)||(orientKeys\x3d{signal:`(${or.signal}) \x3d\x3d\x3d \x27extent\x27 ? 0 : ${orientKeys}`})):\x22extent\x22\x3d\x3d\x3dor?(JSCompiler_temp_const\x3d1,JSCompiler_inline_result$jscomp$0\x3d!0,orientKeys\x3d0):(JSCompiler_temp_const\x3d.5,JSCompiler_inline_result$jscomp$0\x3d!1):(JSCompiler_temp_const\x3dJSCompiler_inline_result$jscomp$0(\x22bandPosition\x22),JSCompiler_inline_result$jscomp$0\x3d\nJSCompiler_inline_result$jscomp$0(\x22tickExtra\x22));JSCompiler_temp_const\x3d{extra:JSCompiler_inline_result$jscomp$0,band:JSCompiler_temp_const,offset:orientKeys};JSCompiler_inline_result$jscomp$0\x3d{scale:_.scale,ticks:!!orient(\x22ticks\x22),labels:!!orient(\x22labels\x22),grid:!!orient(\x22grid\x22),domain:!!orient(\x22domain\x22),title:null!\x3d_.title};or\x3dref$jscomp$0(scope.add(Collect({},[JSCompiler_inline_result$jscomp$0])));t\x3dref$jscomp$0(scope.add(AxisTicks({scale:scope.scaleRef(_.scale),extra:scope.property(JSCompiler_temp_const.extra),\ncount:scope.objectProperty(_.tickCount),values:scope.objectProperty(_.values),minstep:scope.property(_.tickMinStep),formatType:scope.property(_.formatType),formatSpecifier:scope.property(_.format)})));orientKeys\x3d[];JSCompiler_inline_result$jscomp$0.grid\x26\x26orientKeys.push(axisGrid(_,JSCompiler_inline_result,key.grid,t,JSCompiler_temp_const));if(JSCompiler_inline_result$jscomp$0.ticks){var size\x3dorient(\x22tickSize\x22);orientKeys.push(axisTicks(_,JSCompiler_inline_result,key.ticks,t,size,JSCompiler_temp_const))}JSCompiler_inline_result$jscomp$0.labels\x26\x26\n(size\x3dJSCompiler_inline_result$jscomp$0.ticks?size:0,orientKeys.push(axisLabels(_,JSCompiler_inline_result,key.labels,t,size,JSCompiler_temp_const)));JSCompiler_inline_result$jscomp$0.domain\x26\x26orientKeys.push(axisDomain(_,JSCompiler_inline_result,key.domain,or));JSCompiler_inline_result$jscomp$0.title\x26\x26orientKeys.push(axisTitle(_,JSCompiler_inline_result,key.title,or));size\x3dorient;JSCompiler_inline_result\x3d{enter:{},update:{}};addEncoders(JSCompiler_inline_result,{orient:size(\x22orient\x22),offset:size(\x22offset\x22)||\n0,position:value$jscomp$0(_.position,0),titlePadding:size(\x22titlePadding\x22),minExtent:size(\x22minExtent\x22),maxExtent:size(\x22maxExtent\x22),range:{signal:`abs(span(range(\x22${_.scale}\x22)))`},translate:size(\x22translate\x22),format:_.format,formatType:_.formatType});_\x3dJSCompiler_inline_result;return _\x3dparseMark(guideGroup({role:\x22axis\x22,from:or,encode:extendEncode(_,config,Skip),marks:orientKeys,aria:orient(\x22aria\x22),description:orient(\x22description\x22),zindex:orient(\x22zindex\x22),name:style,interactive:axis,style:band}),scope)});\nvegaUtil.array(spec.marks).forEach(_\x3d\x3eparseMark(_,scope));vegaUtil.array(spec.legends).forEach(_\x3d\x3eparseLegend(_,scope));spec.title\x26\x26parseTitle(spec.title,scope);scope.parseLambdas();return scope}function parseView(spec,scope){var config\x3dscope.config;const root\x3dref$jscomp$0(scope.root\x3dscope.add(new Entry(\x22operator\x22,void 0,void 0,void 0))),signals\x3dcollectSignals(spec,config);signals.forEach(_\x3d\x3eparseSignal(_,scope));scope.description\x3dspec.description||config.description;scope.eventConfig\x3dconfig.events;\nscope.legends\x3dscope.objectProperty(config.legend\x26\x26config.legend.layout);scope.locale\x3dconfig.locale;config\x3dscope.add(Collect());const encode\x3dscope.add(Encode(parseEncode(extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:\x22width\x22},height:{signal:\x22height\x22}}},spec.encode),\x22group\x22,\x22frame\x22,spec.style,scope,{pulse:ref$jscomp$0(config)}))),parent\x3dscope.add(ViewLayout({layout:scope.objectProperty(spec.layout),legends:scope.legends,autosize:scope.signalRef(\x22autosize\x22),mark:root,pulse:ref$jscomp$0(encode)}));\nscope.operators.pop();scope.pushState(ref$jscomp$0(encode),ref$jscomp$0(parent),null);parseScope(spec,scope,signals);scope.operators.push(parent);spec\x3dscope.add(Bound({mark:root,pulse:ref$jscomp$0(parent)}));spec\x3dscope.add(Render({pulse:ref$jscomp$0(spec)}));spec\x3dscope.add(Sieve({pulse:ref$jscomp$0(spec)}));scope.addData(\x22root\x22,new DataScope(scope,config,config,spec));return scope}function signalObject(name,value){return value\x26\x26value.signal?{name,update:value.signal}:{name,value}}function collectSignals(spec,\nconfig){const _\x3dname\x3d\x3evalue$jscomp$0(spec[name],config[name]),signals\x3d[signalObject(\x22background\x22,_(\x22background\x22)),signalObject(\x22autosize\x22,parseAutosize(_(\x22autosize\x22))),signalObject(\x22padding\x22,parsePadding(_(\x22padding\x22))),signalObject(\x22width\x22,_(\x22width\x22)||0),signalObject(\x22height\x22,_(\x22height\x22)||0)],pre\x3dsignals.reduce((p,s)\x3d\x3e(p[s.name]\x3ds,p),{}),map\x3d{};vegaUtil.array(spec.signals).forEach(s\x3d\x3e{vegaUtil.hasOwnProperty(pre,s.name)?s\x3dvegaUtil.extend(pre[s.name],s):signals.push(s);map[s.name]\x3ds});vegaUtil.array(config.signals).forEach(s\x3d\x3e\n{vegaUtil.hasOwnProperty(map,s.name)||vegaUtil.hasOwnProperty(pre,s.name)||signals.push(s)});return signals}function Scope$1(config,options){this.config\x3dconfig||{};this.options\x3doptions||{};this.bindings\x3d[];this.field\x3d{};this.signals\x3d{};this.lambdas\x3d{};this.scales\x3d{};this.events\x3d{};this.data\x3d{};this.streams\x3d[];this.updates\x3d[];this.operators\x3d[];this.locale\x3dthis.eventConfig\x3dnull;this._subid\x3dthis._id\x3d0;this._nextsub\x3d[0];this._parent\x3d[];this._encode\x3d[];this._lookup\x3d[];this._markpath\x3d[]}function Subscope(scope){this.config\x3d\nscope.config;this.options\x3dscope.options;this.legends\x3dscope.legends;this.field\x3dObject.create(scope.field);this.signals\x3dObject.create(scope.signals);this.lambdas\x3dObject.create(scope.lambdas);this.scales\x3dObject.create(scope.scales);this.events\x3dObject.create(scope.events);this.data\x3dObject.create(scope.data);this.streams\x3d[];this.updates\x3d[];this.operators\x3d[];this._id\x3d0;this._subid\x3d++scope._nextsub[0];this._nextsub\x3dscope._nextsub;this._parent\x3dscope._parent.slice();this._encode\x3dscope._encode.slice();this._lookup\x3d\nscope._lookup.slice();this._markpath\x3dscope._markpath}function propertyLambda(spec){return(vegaUtil.isArray(spec)?arrayLambda:objectLambda)(spec)}function arrayLambda(array){const n\x3darray.length;let code\x3d\x22[\x22;for(let i\x3d0;i\x3cn;++i){const value\x3darray[i];code+\x3d(0\x3ci?\x22,\x22:\x22\x22)+(vegaUtil.isObject(value)?value.signal||propertyLambda(value):vegaUtil.stringValue(value))}return code+\x22]\x22}function objectLambda(obj){let code\x3d\x22{\x22,i\x3d0,key,value;for(key in obj)value\x3dobj[key],code+\x3d(1\x3c++i?\x22,\x22:\x22\x22)+vegaUtil.stringValue(key)+\n\x22:\x22+(vegaUtil.isObject(value)?value.signal||propertyLambda(value):vegaUtil.stringValue(value));return code+\x22}\x22}function defaults$jscomp$0(){return{description:\x22Vega visualization\x22,padding:0,autosize:\x22pad\x22,background:null,events:{defaults:{allow:[\x22wheel\x22]}},group:null,mark:null,arc:{fill:\x22#4c78a8\x22},area:{fill:\x22#4c78a8\x22},image:null,line:{stroke:\x22#4c78a8\x22,strokeWidth:2},path:{stroke:\x22#4c78a8\x22},rect:{fill:\x22#4c78a8\x22},rule:{stroke:\x22#000\x22},shape:{stroke:\x22#4c78a8\x22},symbol:{fill:\x22#4c78a8\x22,size:64},text:{fill:\x22#000\x22,\nfont:\x22sans-serif\x22,fontSize:11},trail:{fill:\x22#4c78a8\x22,size:2},style:{\x22guide-label\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:10},\x22guide-title\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:11,fontWeight:\x22bold\x22},\x22group-title\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:13,fontWeight:\x22bold\x22},\x22group-subtitle\x22:{fill:\x22#000\x22,font:\x22sans-serif\x22,fontSize:12},point:{size:30,strokeWidth:2,shape:\x22circle\x22},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:\x22square\x22},cell:{fill:\x22transparent\x22,stroke:\x22#ddd\x22}},\ntitle:{orient:\x22top\x22,anchor:\x22middle\x22,offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:\x22#888\x22,grid:!1,gridWidth:1,gridColor:\x22#ddd\x22,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:\x22#888\x22,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:\x22mercator\x22},legend:{orient:\x22right\x22,padding:0,gridAlign:\x22each\x22,columnPadding:10,rowPadding:2,symbolDirection:\x22vertical\x22,\ngradientDirection:\x22vertical\x22,gradientLength:200,gradientThickness:16,gradientStrokeColor:\x22#ddd\x22,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:\x22left\x22,labelBaseline:\x22middle\x22,labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:\x22circle\x22,symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:\x22transparent\x22,symbolBaseStrokeColor:\x22#888\x22,titleLimit:180,titleOrient:\x22top\x22,titlePadding:5,layout:{offset:18,direction:\x22horizontal\x22,left:{direction:\x22vertical\x22},right:{direction:\x22vertical\x22}}},\nrange:{category:{scheme:\x22tableau10\x22},ordinal:{scheme:\x22blues\x22},heatmap:{scheme:\x22yellowgreenblue\x22},ramp:{scheme:\x22blues\x22},diverging:{scheme:\x22blueorange\x22,extent:[1,0]},symbol:\x22circle square triangle-up cross diamond triangle-right triangle-down triangle-left\x22.split(\x22 \x22)}}}const encoder\x3d_\x3d\x3evegaUtil.isObject(_)\x26\x26!vegaUtil.isArray(_)?vegaUtil.extend({},_):{value:_},scaleRef\x3dscale\x3d\x3evegaUtil.isString(scale)?vegaUtil.stringValue(scale):scale.signal?`(${scale.signal})`:field$jscomp$0(scale),_color\x3d(type,x,y,\nz)\x3d\x3e`(${type}(${[x,y,z].map(entry$jscomp$0).join(\x22,\x22)})+\x27\x27)`,OUTER_INVALID\x3d[\x22value\x22,\x22update\x22,\x22init\x22,\x22react\x22,\x22bind\x22],keyFieldRef\x3dfieldRef(\x22key\x22),OP_VALUE_EXPR\x3d{code:\x22_.$value\x22,ast:{type:\x22Identifier\x22,value:\x22value\x22}},transform$jscomp$0\x3dname\x3d\x3e(params,value,parent)\x3d\x3enew Entry(name,value,params||void 0,parent),Aggregate\x3dtransform$jscomp$0(\x22aggregate\x22),AxisTicks\x3dtransform$jscomp$0(\x22axisticks\x22),Bound\x3dtransform$jscomp$0(\x22bound\x22),Collect\x3dtransform$jscomp$0(\x22collect\x22),Compare\x3dtransform$jscomp$0(\x22compare\x22),DataJoin\x3d\ntransform$jscomp$0(\x22datajoin\x22),Encode\x3dtransform$jscomp$0(\x22encode\x22),Expression\x3dtransform$jscomp$0(\x22expression\x22),Facet\x3dtransform$jscomp$0(\x22facet\x22),Field\x3dtransform$jscomp$0(\x22field\x22),Key\x3dtransform$jscomp$0(\x22key\x22),LegendEntries\x3dtransform$jscomp$0(\x22legendentries\x22),Load\x3dtransform$jscomp$0(\x22load\x22),Mark\x3dtransform$jscomp$0(\x22mark\x22),MultiExtent\x3dtransform$jscomp$0(\x22multiextent\x22),MultiValues\x3dtransform$jscomp$0(\x22multivalues\x22),Overlap\x3dtransform$jscomp$0(\x22overlap\x22),Params\x3dtransform$jscomp$0(\x22params\x22),PreFacet\x3dtransform$jscomp$0(\x22prefacet\x22),\nProjection\x3dtransform$jscomp$0(\x22projection\x22),Proxy\x3dtransform$jscomp$0(\x22proxy\x22),Relay\x3dtransform$jscomp$0(\x22relay\x22),Render\x3dtransform$jscomp$0(\x22render\x22),Scale\x3dtransform$jscomp$0(\x22scale\x22),Sieve\x3dtransform$jscomp$0(\x22sieve\x22),SortItems\x3dtransform$jscomp$0(\x22sortitems\x22),ViewLayout\x3dtransform$jscomp$0(\x22viewlayout\x22),Values\x3dtransform$jscomp$0(\x22values\x22);let FIELD_REF_ID\x3d0;const MULTIDOMAIN_SORT_OPS\x3d{min:\x22min\x22,max:\x22max\x22,count:\x22sum\x22},LegendScales\x3d\x22size shape fill stroke strokeWidth strokeDash opacity\x22.split(\x22 \x22),Skip\x3d\n{name:1,style:1,interactive:1},zero$jscomp$0\x3d{value:0},one\x3d{value:1},alignExpr\x3danchorExpr(vegaUtil.stringValue(\x22left\x22),vegaUtil.stringValue(\x22right\x22),vegaUtil.stringValue(\x22center\x22)),baseline\x3danchorExpr(\x27\x22top\x22\x27,\x27\x22bottom\x22\x27,\x27\x22middle\x22\x27),exprAlign\x3d`datum.vgrad \x26\x26 ${\x27item.orient \\x3d\\x3d\\x3d \x22right\x22\x27} ? (${anchorExpr(\x27\x22right\x22\x27,\x27\x22left\x22\x27,\x27\x22center\x22\x27)}) : (${\x27(item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22)\x27} \x26\x26 !(datum.vgrad \x26\x26 ${\x27item.orient \\x3d\\x3d\\x3d \x22left\x22\x27})) ? \x22left\x22 : ${alignExpr}`,\nexprBaseline\x3d`${\x27(item.orient \\x3d\\x3d\\x3d \x22left\x22 || item.orient \\x3d\\x3d\\x3d \x22right\x22)\x27} ? (datum.vgrad ? (${\x27item.orient \\x3d\\x3d\\x3d \x22right\x22\x27} ? \x22bottom\x22 : \x22top\x22) : ${baseline}) : \x22top\x22`;DataScope.fromEntries\x3dfunction(scope,entries){const n\x3dentries.length,values\x3dentries[n-1],output\x3dentries[n-2];let input\x3dentries[0],aggr\x3dnull,i\x3d1;input\x26\x26\x22load\x22\x3d\x3d\x3dinput.type\x26\x26(input\x3dentries[1]);for(scope.add(entries[0]);i\x3cn;++i)entries[i].params.pulse\x3dref$jscomp$0(entries[i-1]),scope.add(entries[i]),\x22aggregate\x22\x3d\x3d\x3d\nentries[i].type\x26\x26(aggr\x3dentries[i]);return new DataScope(scope,input,output,values,aggr)};DataScope.prototype\x3d{countsRef(scope,field,sort){const cache\x3dthis.counts||(this.counts\x3d{}),k\x3dfieldKey(field);if(null!\x3dk){scope\x3dthis.scope;var v\x3dcache[k]}v?sort\x26\x26sort.field\x26\x26addSortField(scope,v.agg.params,sort):(v\x3d{groupby:scope.fieldRef(field,\x22key\x22),pulse:ref$jscomp$0(this.output)},sort\x26\x26sort.field\x26\x26addSortField(scope,v,sort),sort\x3dscope.add(Aggregate(v)),v\x3dscope.add(Collect({pulse:ref$jscomp$0(sort)})),v\x3d{agg:sort,\nref:ref$jscomp$0(v)},null!\x3dk\x26\x26(cache[k]\x3dv));return v.ref},tuplesRef(){return ref$jscomp$0(this.values)},extentRef(scope,field){return cache$jscomp$0(scope,this,\x22extent\x22,\x22extent\x22,field,!1)},domainRef(scope,field){return cache$jscomp$0(scope,this,\x22domain\x22,\x22values\x22,field,!1)},valuesRef(scope,field,sort){return cache$jscomp$0(scope,this,\x22vals\x22,\x22values\x22,field,sort||!0)},lookupRef(scope,field){return cache$jscomp$0(scope,this,\x22lookup\x22,\x22tupleindex\x22,field,!1)},indataRef(scope,field){return cache$jscomp$0(scope,\nthis,\x22indata\x22,\x22tupleindex\x22,field,!0,!0)}};const getSign\x3d(orient,a,b)\x3d\x3e{isSignal(orient)?(orient\x3dorient.signal,a\x3difExpr(`${orient} \x3d\x3d\x3d \x27${\x22left\x22}\x27 || ${orient} \x3d\x3d\x3d \x27${\x22top\x22}\x27`,a,b)):a\x3d\x22left\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?a:b;return a},ifX\x3d(orient,a,b)\x3d\x3e{isSignal(orient)?(orient\x3dorient.signal,a\x3difEnc(`${orient} \x3d\x3d\x3d \x27${\x22top\x22}\x27 || ${orient} \x3d\x3d\x3d \x27${\x22bottom\x22}\x27`,a,b)):a\x3d\x22bottom\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?a:b;return a},ifY\x3d(orient,a,b)\x3d\x3e{isSignal(orient)?(orient\x3dorient.signal,a\x3difEnc(`${orient} !\x3d\x3d \x27${\x22top\x22}\x27 \x26\x26 ${orient} !\x3d\x3d \x27${\x22bottom\x22}\x27`,\na,b)):a\x3d\x22bottom\x22\x3d\x3d\x3dorient||\x22top\x22\x3d\x3d\x3dorient?b:a;return a},ifTop\x3d(orient,a,b)\x3d\x3eisSignal(orient)?ifExpr(`${orient.signal} \x3d\x3d\x3d \x27${\x22top\x22}\x27`,a,b):\x22top\x22\x3d\x3d\x3dorient?{value:a}:{value:b},ifEnc\x3d(test,a,b)\x3d\x3e{a\x3dnull!\x3da?encoder(a):a;b\x3dnull!\x3db?encoder(b):b;if(null!\x3da\x26\x261!\x3d\x3dObject.keys(a).length||null!\x3db\x26\x261!\x3d\x3dObject.keys(b).length)return[vegaUtil.extend({test},a)].concat(b||[]);a\x3da?a.signal||vegaUtil.stringValue(a.value):null;b\x3db?b.signal||vegaUtil.stringValue(b.value):null;return{signal:`${test} ? (${a}) : (${b})`}},\nifExpr\x3d(test,a,b)\x3d\x3e({signal:`${test} ? (${toExpr(a)}) : (${toExpr(b)})`}),toExpr\x3dv\x3d\x3eisSignal(v)?v.signal:null\x3d\x3dv?null:vegaUtil.stringValue(v),patch\x3d(value,base)\x3d\x3e{const s\x3dvalue.signal;return s\x26\x26s.endsWith(\x22(null)\x22)?{signal:s.slice(0,-6)+base.signal}:value};Scope$1.prototype\x3dSubscope.prototype\x3d{parse(spec){return parseScope(spec,this)},fork(){return new Subscope(this)},isSubscope(){return 0\x3cthis._subid},toRuntime(){this.finish();return{description:this.description,operators:this.operators,streams:this.streams,\nupdates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+\x22:\x22:0)+this._id++},add(op){this.operators.push(op);op.id\x3dthis.id();op.refs\x26\x26(op.refs.forEach(ref\x3d\x3e{ref.$ref\x3dop.id}),op.refs\x3dnull);return op},proxy(op){op\x3dop instanceof Entry?ref$jscomp$0(op):op;return this.add(Proxy({value:op}))},addStream(stream){this.streams.push(stream);stream.id\x3dthis.id();return stream},addUpdate(update){this.updates.push(update);return update},finish(){function annotate(op,\nname,type){op\x26\x26(op\x3dop.data||(op.data\x3d{}),name\x3dop[name]||(op[name]\x3d[]),name.push(type))}let name$jscomp$0,ds;this.root\x26\x26(this.root.root\x3d!0);for(name$jscomp$0 in this.signals)this.signals[name$jscomp$0].signal\x3dname$jscomp$0;for(name$jscomp$0 in this.scales)this.scales[name$jscomp$0].scale\x3dname$jscomp$0;for(name$jscomp$0 in this.data){ds\x3dthis.data[name$jscomp$0];annotate(ds.input,name$jscomp$0,\x22input\x22);annotate(ds.output,name$jscomp$0,\x22output\x22);annotate(ds.values,name$jscomp$0,\x22values\x22);for(const field in ds.index)annotate(ds.index[field],\nname$jscomp$0,\x22index:\x22+field)}return this},pushState(encode,parent,lookup){this._encode.push(ref$jscomp$0(this.add(Sieve({pulse:encode}))));this._parent.push(parent);this._lookup.push(lookup?ref$jscomp$0(this.proxy(lookup)):null);this._markpath.push(-1)},popState(){this._encode.pop();this._parent.pop();this._lookup.pop();this._markpath.pop()},parent(){return vegaUtil.peek(this._parent)},encode(){return vegaUtil.peek(this._encode)},lookup(){return vegaUtil.peek(this._lookup)},markpath(){const p\x3dthis._markpath;\nreturn++p[p.length-1]},fieldRef(field,name){if(vegaUtil.isString(field))return fieldRef(field,name);field.signal||vegaUtil.error(\x22Unsupported field reference: \x22+vegaUtil.stringValue(field));field\x3dfield.signal;var f\x3dthis.field[field];f||(f\x3d{name:this.signalRef(field)},name\x26\x26(f.as\x3dname),this.field[field]\x3df\x3dref$jscomp$0(this.add(Field(f))));return f},compareRef(cmp){let signal\x3d!1;const check\x3d_\x3d\x3eisSignal(_)?(signal\x3d!0,this.signalRef(_.signal)):_\x26\x26_.expr?(signal\x3d!0,this.exprRef(_.expr)):_,fields\x3dvegaUtil.array(cmp.field).map(check);\ncmp\x3dvegaUtil.array(cmp.order).map(check);return signal?ref$jscomp$0(this.add(Compare({fields,orders:cmp}))):{$compare:fields,$order:cmp}},keyRef(fields,flat){let signal\x3d!1;const sig\x3dthis.signals;fields\x3dvegaUtil.array(fields).map(_\x3d\x3eisSignal(_)?(signal\x3d!0,ref$jscomp$0(sig[_.signal])):_);return signal?ref$jscomp$0(this.add(Key({fields,flat}))):keyRef(fields,flat)},sortRef(sort){if(!sort)return sort;const a\x3daggrField(sort.op,sort.field);sort\x3dsort.order||\x22ascending\x22;return sort.signal?ref$jscomp$0(this.add(Compare({fields:a,\norders:this.signalRef(sort.signal)}))):{$compare:a,$order:sort}},event(source,type){const key\x3dsource+\x22:\x22+type;if(!this.events[key]){const id\x3dthis.id();this.streams.push({id,source,type});this.events[key]\x3did}return this.events[key]},hasOwnSignal(name){return vegaUtil.hasOwnProperty(this.signals,name)},addSignal(name,value){this.hasOwnSignal(name)\x26\x26vegaUtil.error(\x22Duplicate signal name: \x22+vegaUtil.stringValue(name));value\x3dvalue instanceof Entry?value:this.add(new Entry(\x22operator\x22,value,void 0,void 0));\nreturn this.signals[name]\x3dvalue},getSignal(name){this.signals[name]||vegaUtil.error(\x22Unrecognized signal name: \x22+vegaUtil.stringValue(name));return this.signals[name]},signalRef(s){if(this.signals[s])return ref$jscomp$0(this.signals[s]);vegaUtil.hasOwnProperty(this.lambdas,s)||(this.lambdas[s]\x3dthis.add(new Entry(\x22operator\x22,null,void 0,void 0)));return ref$jscomp$0(this.lambdas[s])},parseLambdas(){const code\x3dObject.keys(this.lambdas);for(let i\x3d0,n\x3dcode.length;i\x3cn;++i){var s\x3dcode[i];const e\x3dvegaFunctions.parseExpression(s,\nthis);s\x3dthis.lambdas[s];s.params\x3de.$params;s.update\x3de.$expr}},property(spec){return spec\x26\x26spec.signal?this.signalRef(spec.signal):spec},objectProperty(spec){return spec\x26\x26vegaUtil.isObject(spec)?this.signalRef(spec.signal||propertyLambda(spec)):spec},exprRef(code,name){code\x3d{expr:vegaFunctions.parseExpression(code,this)};name\x26\x26(code.expr.$name\x3dname);return ref$jscomp$0(this.add(Expression(code)))},addBinding(name,bind){this.bindings||vegaUtil.error(\x22Nested signals do not support binding: \x22+vegaUtil.stringValue(name));\nthis.bindings.push(vegaUtil.extend({signal:name},bind))},addScaleProj(name,transform){vegaUtil.hasOwnProperty(this.scales,name)\x26\x26vegaUtil.error(\x22Duplicate scale or projection name: \x22+vegaUtil.stringValue(name));this.scales[name]\x3dthis.add(transform)},addScale(name,params){this.addScaleProj(name,Scale(params))},addProjection(name,params){this.addScaleProj(name,Projection(params))},getScale(name){this.scales[name]||vegaUtil.error(\x22Unrecognized scale name: \x22+vegaUtil.stringValue(name));return this.scales[name]},\nscaleRef(name){return ref$jscomp$0(this.getScale(name))},scaleType(name){return this.getScale(name).params.type},projectionRef(name){return this.scaleRef(name)},projectionType(name){return this.scaleType(name)},addData(name,dataScope){vegaUtil.hasOwnProperty(this.data,name)\x26\x26vegaUtil.error(\x22Duplicate data set name: \x22+vegaUtil.stringValue(name));return this.data[name]\x3ddataScope},getData(name){this.data[name]||vegaUtil.error(\x22Undefined data set name: \x22+vegaUtil.stringValue(name));return this.data[name]},\naddDataPipeline(name,entries){vegaUtil.hasOwnProperty(this.data,name)\x26\x26vegaUtil.error(\x22Duplicate data set name: \x22+vegaUtil.stringValue(name));return this.addData(name,DataScope.fromEntries(this,entries))}};exports.AxisDomainRole\x3d\x22axis-domain\x22;exports.AxisGridRole\x3d\x22axis-grid\x22;exports.AxisLabelRole\x3d\x22axis-label\x22;exports.AxisRole\x3d\x22axis\x22;exports.AxisTickRole\x3d\x22axis-tick\x22;exports.AxisTitleRole\x3d\x22axis-title\x22;exports.DataScope\x3dDataScope;exports.FrameRole\x3d\x22frame\x22;exports.LegendEntryRole\x3d\x22legend-entry\x22;exports.LegendLabelRole\x3d\n\x22legend-label\x22;exports.LegendRole\x3d\x22legend\x22;exports.LegendSymbolRole\x3d\x22legend-symbol\x22;exports.LegendTitleRole\x3d\x22legend-title\x22;exports.MarkRole\x3d\x22mark\x22;exports.Scope\x3dScope$1;exports.ScopeRole\x3d\x22scope\x22;exports.config\x3ddefaults$jscomp$0;exports.parse\x3dfunction(spec,config,options){vegaUtil.isObject(spec)||vegaUtil.error(\x22Input Vega specification must be an object.\x22);config\x3dvegaUtil.mergeConfig(defaults$jscomp$0(),config,spec.config);return parseView(spec,new Scope$1(config,options)).toRuntime()};exports.signal\x3d\nparseSignal;exports.signalUpdates\x3dparseSignalUpdates;exports.stream\x3dparseStream;Object.defineProperty(exports,\x22__esModule\x22,{value:!0})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega$build$vega_node.js", true , "shadow$provide.module$node_modules$vega$build$vega_node\x3dfunction(global,require,module,exports){function _interopNamespace(e){if(e\x26\x26e.__esModule)return e;var n\x3dObject.create(null);e\x26\x26Object.keys(e).forEach(function(k){if(\x22default\x22!\x3d\x3dk){var d\x3dObject.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}});n[\x22default\x22]\x3de;return Object.freeze(n)}Object.defineProperty(exports,\x22__esModule\x22,{value:!0});var vegaUtil\x3drequire(\x22module$node_modules$vega_util$build$vega_util\x22),\nvegaDataflow\x3drequire(\x22module$node_modules$vega_dataflow$build$vega_dataflow\x22),tx\x3drequire(\x22module$node_modules$vega_transforms$build$vega_transforms\x22),vtx\x3drequire(\x22module$node_modules$vega_view_transforms$build$vega_view_transforms\x22),encode\x3drequire(\x22module$node_modules$vega_encode$build$vega_encode\x22),geo\x3drequire(\x22module$node_modules$vega_geo$build$vega_geo\x22),force\x3drequire(\x22module$node_modules$vega_force$build$vega_force\x22),tree\x3drequire(\x22module$node_modules$vega_hierarchy$build$vega_hierarchy\x22),label\x3d\nrequire(\x22module$node_modules$vega_label$build$vega_label\x22),reg\x3drequire(\x22module$node_modules$vega_regression$build$vega_regression\x22),voronoi\x3drequire(\x22module$node_modules$vega_voronoi$build$vega_voronoi\x22);module\x3drequire(\x22module$node_modules$vega_wordcloud$build$vega_wordcloud\x22);global\x3drequire(\x22module$node_modules$vega_crossfilter$build$vega_crossfilter\x22);var vegaStatistics\x3drequire(\x22module$node_modules$vega_statistics$build$vega_statistics\x22),vegaTime\x3drequire(\x22module$node_modules$vega_time$build$vega_time\x22),\nvegaLoader\x3drequire(\x22module$node_modules$vega_loader$build$vega_loader_min\x22),vegaScenegraph\x3drequire(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph\x22),vegaScale\x3drequire(\x22module$node_modules$vega_scale$build$vega_scale\x22),vegaProjection\x3drequire(\x22module$node_modules$vega_projection$build$vega_projection\x22),vegaView\x3drequire(\x22module$node_modules$vega_view$build$vega_view\x22),vegaFormat\x3drequire(\x22module$node_modules$vega_format$build$vega_format\x22),vegaFunctions\x3drequire(\x22module$node_modules$vega_functions$build$vega_functions\x22),\nvegaParser\x3drequire(\x22module$node_modules$vega_parser$build$vega_parser\x22),vegaRuntime\x3drequire(\x22module$node_modules$vega_runtime$build$vega_runtime\x22),vegaExpression\x3drequire(\x22module$node_modules$vega_expression$build$vega_expression\x22),vegaEventSelector\x3drequire(\x22module$node_modules$vega_event_selector$build$vega_event_selector\x22);require\x3d_interopNamespace(tx);vtx\x3d_interopNamespace(vtx);encode\x3d_interopNamespace(encode);geo\x3d_interopNamespace(geo);force\x3d_interopNamespace(force);tree\x3d_interopNamespace(tree);\nlabel\x3d_interopNamespace(label);reg\x3d_interopNamespace(reg);voronoi\x3d_interopNamespace(voronoi);module\x3d_interopNamespace(module);global\x3d_interopNamespace(global);vegaUtil.extend(vegaDataflow.transforms,require,vtx,encode,geo,force,label,tree,reg,voronoi,module,global);Object.defineProperty(exports,\x22Dataflow\x22,{enumerable:!0,get:function(){return vegaDataflow.Dataflow}});Object.defineProperty(exports,\x22EventStream\x22,{enumerable:!0,get:function(){return vegaDataflow.EventStream}});Object.defineProperty(exports,\n\x22MultiPulse\x22,{enumerable:!0,get:function(){return vegaDataflow.MultiPulse}});Object.defineProperty(exports,\x22Operator\x22,{enumerable:!0,get:function(){return vegaDataflow.Operator}});Object.defineProperty(exports,\x22Parameters\x22,{enumerable:!0,get:function(){return vegaDataflow.Parameters}});Object.defineProperty(exports,\x22Pulse\x22,{enumerable:!0,get:function(){return vegaDataflow.Pulse}});Object.defineProperty(exports,\x22Transform\x22,{enumerable:!0,get:function(){return vegaDataflow.Transform}});Object.defineProperty(exports,\n\x22changeset\x22,{enumerable:!0,get:function(){return vegaDataflow.changeset}});Object.defineProperty(exports,\x22definition\x22,{enumerable:!0,get:function(){return vegaDataflow.definition}});Object.defineProperty(exports,\x22ingest\x22,{enumerable:!0,get:function(){return vegaDataflow.ingest}});Object.defineProperty(exports,\x22isTuple\x22,{enumerable:!0,get:function(){return vegaDataflow.isTuple}});Object.defineProperty(exports,\x22transform\x22,{enumerable:!0,get:function(){return vegaDataflow.transform}});Object.defineProperty(exports,\n\x22transforms\x22,{enumerable:!0,get:function(){return vegaDataflow.transforms}});Object.defineProperty(exports,\x22tupleid\x22,{enumerable:!0,get:function(){return vegaDataflow.tupleid}});Object.defineProperty(exports,\x22interpolate\x22,{enumerable:!0,get:function(){return vegaScale.interpolate}});Object.defineProperty(exports,\x22interpolateColors\x22,{enumerable:!0,get:function(){return vegaScale.interpolateColors}});Object.defineProperty(exports,\x22interpolateRange\x22,{enumerable:!0,get:function(){return vegaScale.interpolateRange}});\nObject.defineProperty(exports,\x22quantizeInterpolator\x22,{enumerable:!0,get:function(){return vegaScale.quantizeInterpolator}});Object.defineProperty(exports,\x22scale\x22,{enumerable:!0,get:function(){return vegaScale.scale}});Object.defineProperty(exports,\x22scheme\x22,{enumerable:!0,get:function(){return vegaScale.scheme}});Object.defineProperty(exports,\x22projection\x22,{enumerable:!0,get:function(){return vegaProjection.projection}});Object.defineProperty(exports,\x22View\x22,{enumerable:!0,get:function(){return vegaView.View}});\nObject.defineProperty(exports,\x22defaultLocale\x22,{enumerable:!0,get:function(){return vegaFormat.defaultLocale}});Object.defineProperty(exports,\x22formatLocale\x22,{enumerable:!0,get:function(){return vegaFormat.numberFormatDefaultLocale}});Object.defineProperty(exports,\x22locale\x22,{enumerable:!0,get:function(){return vegaFormat.locale}});Object.defineProperty(exports,\x22resetDefaultLocale\x22,{enumerable:!0,get:function(){return vegaFormat.resetDefaultLocale}});Object.defineProperty(exports,\x22timeFormatLocale\x22,{enumerable:!0,\nget:function(){return vegaFormat.timeFormatDefaultLocale}});Object.defineProperty(exports,\x22expressionFunction\x22,{enumerable:!0,get:function(){return vegaFunctions.expressionFunction}});Object.defineProperty(exports,\x22parse\x22,{enumerable:!0,get:function(){return vegaParser.parse}});Object.defineProperty(exports,\x22runtimeContext\x22,{enumerable:!0,get:function(){return vegaRuntime.context}});Object.defineProperty(exports,\x22codegenExpression\x22,{enumerable:!0,get:function(){return vegaExpression.codegen}});Object.defineProperty(exports,\n\x22parseExpression\x22,{enumerable:!0,get:function(){return vegaExpression.parse}});Object.defineProperty(exports,\x22parseSelector\x22,{enumerable:!0,get:function(){return vegaEventSelector.selector}});exports.version\x3d\x225.20.2\x22;Object.keys(vegaUtil).forEach(function(k){\x22default\x22\x3d\x3d\x3dk||exports.hasOwnProperty(k)||Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaUtil[k]}})});Object.keys(vegaStatistics).forEach(function(k){\x22default\x22\x3d\x3d\x3dk||exports.hasOwnProperty(k)||Object.defineProperty(exports,\nk,{enumerable:!0,get:function(){return vegaStatistics[k]}})});Object.keys(vegaTime).forEach(function(k){\x22default\x22\x3d\x3d\x3dk||exports.hasOwnProperty(k)||Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaTime[k]}})});Object.keys(vegaLoader).forEach(function(k){\x22default\x22\x3d\x3d\x3dk||exports.hasOwnProperty(k)||Object.defineProperty(exports,k,{enumerable:!0,get:function(){return vegaLoader[k]}})});Object.keys(vegaScenegraph).forEach(function(k){\x22default\x22\x3d\x3d\x3dk||exports.hasOwnProperty(k)||Object.defineProperty(exports,\nk,{enumerable:!0,get:function(){return vegaScenegraph[k]}})})}");
SHADOW_ENV.evalLoad("module$node_modules$vega_embed$build$vega_embed.js", true , "shadow$provide.module$node_modules$vega_embed$build$vega_embed\x3dfunction(global$jscomp$0,require,module$jscomp$0,exports$jscomp$0){var process\x3drequire(\x22module$node_modules$process$browser\x22);(function(global,factory){\x22object\x22\x3d\x3d\x3dtypeof exports$jscomp$0\x26\x26\x22undefined\x22!\x3d\x3dtypeof module$jscomp$0?module$jscomp$0.exports\x3dfactory(require(\x22module$node_modules$vega$build$vega_node\x22),require(\x22module$node_modules$vega_lite$build$vega_lite\x22)):\x22function\x22\x3d\x3d\x3dtypeof define\x26\x26define.amd?define([\x22vega\x22,\x22vega-lite\x22],factory):\n(global\x3d\x22undefined\x22!\x3d\x3dtypeof globalThis?globalThis:global||self,global.vegaEmbed\x3dfactory(global.vega,global.vegaLite))})(this,function(vegaImport,vegaLiteImport){function _interopNamespace(e){if(e\x26\x26e.__esModule)return e;var n\x3dObject.create(null);e\x26\x26Object.keys(e).forEach(function(k){if(\x22default\x22!\x3d\x3dk){var d\x3dObject.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}});n[\x22default\x22]\x3de;return Object.freeze(n)}function __awaiter(thisArg,_arguments,\nP,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P\x3dPromise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator[\x22throw\x22](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator\x3dgenerator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,\nbody){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError(\x22Generator is already executing.\x22);for(;_;)try{if(f\x3d1,y\x26\x26(t\x3dop[0]\x262?y[\x22return\x22]:op[0]?y[\x22throw\x22]||((t\x3dy[\x22return\x22])\x26\x26t.call(y),0):y.next)\x26\x26!(t\x3dt.call(y,op[1])).done)return t;if(y\x3d0,t)op\x3d[op[0]\x262,t.value];switch(op[0]){case 0:case 1:t\x3dop;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++;y\x3dop[1];op\x3d[0];continue;case 7:op\x3d_.ops.pop();_.trys.pop();continue;default:if(!(t\x3d_.trys,t\x3d\n0\x3ct.length\x26\x26t[t.length-1])\x26\x26(6\x3d\x3d\x3dop[0]||2\x3d\x3d\x3dop[0])){_\x3d0;continue}if(3\x3d\x3d\x3dop[0]\x26\x26(!t||op[1]\x3et[0]\x26\x26op[1]\x3ct[3]))_.label\x3dop[1];else if(6\x3d\x3d\x3dop[0]\x26\x26_.label\x3ct[1])_.label\x3dt[1],t\x3dop;else if(t\x26\x26_.label\x3ct[2])_.label\x3dt[2],_.ops.push(op);else{t[2]\x26\x26_.ops.pop();_.trys.pop();continue}}op\x3dbody.call(thisArg,_)}catch(e){op\x3d[6,e],y\x3d0}finally{f\x3dt\x3d0}if(op[0]\x265)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var _\x3d{label:0,sent:function(){if(t[0]\x261)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g\x3d{next:verb(0),\n\x22throw\x22:verb(1),\x22return\x22:verb(2)},\x22function\x22\x3d\x3d\x3dtypeof Symbol\x26\x26(g[Symbol.iterator]\x3dfunction(){return this}),g}function _objectKeys(obj){if(Array.isArray(obj)){var keys\x3dArray(obj.length);for(obj\x3d0;obj\x3ckeys.length;obj++)keys[obj]\x3d\x22\x22+obj;return keys}if(Object.keys)return Object.keys(obj);keys\x3d[];for(var i in obj)_hasOwnProperty.call(obj,i)\x26\x26keys.push(i);return keys}function _deepClone(obj){switch(typeof obj){case \x22object\x22:return JSON.parse(JSON.stringify(obj));case \x22undefined\x22:return null;default:return obj}}\nfunction isInteger(str){for(var i\x3d0,len\x3dstr.length,charCode;i\x3clen;)if(charCode\x3dstr.charCodeAt(i),48\x3c\x3dcharCode\x26\x2657\x3e\x3dcharCode)i++;else return!1;return!0}function escapePathComponent(path){return-1\x3d\x3d\x3dpath.indexOf(\x22/\x22)\x26\x26-1\x3d\x3d\x3dpath.indexOf(\x22~\x22)?path:path.replace(/~/g,\x22~0\x22).replace(/\\//g,\x22~1\x22)}function unescapePathComponent(path){return path.replace(/~1/g,\x22/\x22).replace(/~0/g,\x22~\x22)}function hasUndefined(obj){if(void 0\x3d\x3d\x3dobj)return!0;if(obj)if(Array.isArray(obj))for(var i\x3d0,len\x3dobj.length;i\x3clen;i++){if(hasUndefined(obj[i]))return!0}else if(\x22object\x22\x3d\x3d\x3d\ntypeof obj){len\x3d_objectKeys(obj);var objKeysLength\x3dlen.length;for(i\x3d0;i\x3cobjKeysLength;i++)if(hasUndefined(obj[len[i]]))return!0}return!1}function patchErrorMessageFormatter(message,args){message\x3d[message];for(var key in args){var value\x3d\x22object\x22\x3d\x3d\x3dtypeof args[key]?JSON.stringify(args[key],null,2):args[key];\x22undefined\x22!\x3d\x3dtypeof value\x26\x26message.push(key+\x22: \x22+value)}return message.join(\x22\\n\x22)}function getValueByPointer(document,pointer){if(\x22\x22\x3d\x3dpointer)return document;pointer\x3d{op:\x22_get\x22,path:pointer};applyOperation(document,\npointer);return pointer.value}function applyOperation(document,operation,validateOperation,mutateDocument,banPrototypeModifications,index){void 0\x3d\x3d\x3dvalidateOperation\x26\x26(validateOperation\x3d!1);void 0\x3d\x3d\x3dmutateDocument\x26\x26(mutateDocument\x3d!0);void 0\x3d\x3d\x3dbanPrototypeModifications\x26\x26(banPrototypeModifications\x3d!0);void 0\x3d\x3d\x3dindex\x26\x26(index\x3d0);validateOperation\x26\x26(\x22function\x22\x3d\x3dtypeof validateOperation?validateOperation(operation,0,document,operation.path):validator(operation,0));if(\x22\x22\x3d\x3d\x3doperation.path){banPrototypeModifications\x3d\n{newDocument:document};if(\x22add\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3doperation.value,banPrototypeModifications;if(\x22replace\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3doperation.value,banPrototypeModifications.removed\x3ddocument,banPrototypeModifications;if(\x22move\x22\x3d\x3d\x3doperation.op||\x22copy\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.newDocument\x3dgetValueByPointer(document,operation.from),\x22move\x22\x3d\x3d\x3doperation.op\x26\x26(banPrototypeModifications.removed\x3ddocument),banPrototypeModifications;\nif(\x22test\x22\x3d\x3d\x3doperation.op){banPrototypeModifications.test\x3d_areEquals(document,operation.value);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);banPrototypeModifications.newDocument\x3ddocument;return banPrototypeModifications}if(\x22remove\x22\x3d\x3d\x3doperation.op)return banPrototypeModifications.removed\x3ddocument,banPrototypeModifications.newDocument\x3dnull,banPrototypeModifications;if(\x22_get\x22\x3d\x3d\x3doperation.op)return operation.value\x3d\ndocument,banPrototypeModifications;if(validateOperation)throw new JsonPatchError(\x22Operation `op` property is not one of operations defined in RFC-6902\x22,\x22OPERATION_OP_INVALID\x22,index,operation,document);return banPrototypeModifications}mutateDocument||(document\x3d_deepClone(document));mutateDocument\x3d(operation.path||\x22\x22).split(\x22/\x22);var obj\x3ddocument,t\x3d1,len\x3dmutateDocument.length,existingPathFragment\x3dvoid 0,validateFunction;for(validateFunction\x3d\x22function\x22\x3d\x3dtypeof validateOperation?validateOperation:validator;;){var key\x3d\nmutateDocument[t];if(banPrototypeModifications\x26\x26\x22__proto__\x22\x3d\x3dkey)throw new TypeError(\x22JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\x22);validateOperation\x26\x26void 0\x3d\x3d\x3dexistingPathFragment\x26\x26(void 0\x3d\x3d\x3dobj[key]?existingPathFragment\x3dmutateDocument.slice(0,t).join(\x22/\x22):t\x3d\x3dlen-1\x26\x26(existingPathFragment\x3doperation.path),void 0!\x3d\x3dexistingPathFragment\x26\x26\nvalidateFunction(operation,0,document,existingPathFragment));t++;if(Array.isArray(obj)){if(\x22-\x22\x3d\x3d\x3dkey)key\x3dobj.length;else{if(validateOperation\x26\x26!isInteger(key))throw new JsonPatchError(\x22Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\x22,\x22OPERATION_PATH_ILLEGAL_ARRAY_INDEX\x22,index,operation,document);isInteger(key)\x26\x26(key\x3d~~key)}if(t\x3e\x3dlen){if(validateOperation\x26\x26\x22add\x22\x3d\x3d\x3doperation.op\x26\x26key\x3eobj.length)throw new JsonPatchError(\x22The specified index MUST NOT be greater than the number of elements in the array\x22,\n\x22OPERATION_VALUE_OUT_OF_BOUNDS\x22,index,operation,document);banPrototypeModifications\x3darrOps[operation.op].call(operation,obj,key,document);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);return banPrototypeModifications}}else if(key\x26\x26-1!\x3dkey.indexOf(\x22~\x22)\x26\x26(key\x3dunescapePathComponent(key)),t\x3e\x3dlen){banPrototypeModifications\x3dobjOps[operation.op].call(operation,obj,key,document);if(!1\x3d\x3d\x3dbanPrototypeModifications.test)throw new JsonPatchError(\x22Test operation failed\x22,\n\x22TEST_OPERATION_FAILED\x22,index,operation,document);return banPrototypeModifications}obj\x3dobj[key]}}function applyPatch(document,patch,validateOperation,mutateDocument,banPrototypeModifications){void 0\x3d\x3d\x3dmutateDocument\x26\x26(mutateDocument\x3d!0);void 0\x3d\x3d\x3dbanPrototypeModifications\x26\x26(banPrototypeModifications\x3d!0);if(validateOperation\x26\x26!Array.isArray(patch))throw new JsonPatchError(\x22Patch sequence must be an array\x22,\x22SEQUENCE_NOT_AN_ARRAY\x22);mutateDocument||(document\x3d_deepClone(document));mutateDocument\x3dArray(patch.length);\nfor(var i\x3d0,length_1\x3dpatch.length;i\x3clength_1;i++)mutateDocument[i]\x3dapplyOperation(document,patch[i],validateOperation,!0,banPrototypeModifications,i),document\x3dmutateDocument[i].newDocument;mutateDocument.newDocument\x3ddocument;return mutateDocument}function validator(operation,index,document,existingPathFragment){if(\x22object\x22!\x3d\x3dtypeof operation||null\x3d\x3d\x3doperation||Array.isArray(operation))throw new JsonPatchError(\x22Operation is not an object\x22,\x22OPERATION_NOT_AN_OBJECT\x22,index,operation,document);if(objOps[operation.op]){if(\x22string\x22!\x3d\x3d\ntypeof operation.path)throw new JsonPatchError(\x22Operation `path` property is not a string\x22,\x22OPERATION_PATH_INVALID\x22,index,operation,document);if(0!\x3d\x3doperation.path.indexOf(\x22/\x22)\x26\x260\x3coperation.path.length)throw new JsonPatchError(\x27Operation `path` property must start with \x22/\x22\x27,\x22OPERATION_PATH_INVALID\x22,index,operation,document);if(\x22move\x22!\x3d\x3doperation.op\x26\x26\x22copy\x22!\x3d\x3doperation.op||\x22string\x22\x3d\x3d\x3dtypeof operation.from)if(\x22add\x22!\x3d\x3doperation.op\x26\x26\x22replace\x22!\x3d\x3doperation.op\x26\x26\x22test\x22!\x3d\x3doperation.op||void 0!\x3d\x3doperation.value){if((\x22add\x22\x3d\x3d\x3d\noperation.op||\x22replace\x22\x3d\x3d\x3doperation.op||\x22test\x22\x3d\x3d\x3doperation.op)\x26\x26hasUndefined(operation.value))throw new JsonPatchError(\x22Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\x22,\x22OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\x22,index,operation,document);if(document)if(\x22add\x22\x3d\x3doperation.op){var pathLen\x3doperation.path.split(\x22/\x22).length;existingPathFragment\x3dexistingPathFragment.split(\x22/\x22).length;if(pathLen!\x3d\x3dexistingPathFragment+1\x26\x26pathLen!\x3d\x3dexistingPathFragment)throw new JsonPatchError(\x22Cannot perform an `add` operation at the desired path\x22,\n\x22OPERATION_PATH_CANNOT_ADD\x22,index,operation,document);}else if(\x22replace\x22\x3d\x3d\x3doperation.op||\x22remove\x22\x3d\x3d\x3doperation.op||\x22_get\x22\x3d\x3d\x3doperation.op){if(operation.path!\x3d\x3dexistingPathFragment)throw new JsonPatchError(\x22Cannot perform the operation at a path that does not exist\x22,\x22OPERATION_PATH_UNRESOLVABLE\x22,index,operation,document);}else if((\x22move\x22\x3d\x3d\x3doperation.op||\x22copy\x22\x3d\x3d\x3doperation.op)\x26\x26(pathLen\x3dvalidate([{op:\x22_get\x22,path:operation.from,value:void 0}],document))\x26\x26\x22OPERATION_PATH_UNRESOLVABLE\x22\x3d\x3d\x3dpathLen.name)throw new JsonPatchError(\x22Cannot perform the operation from a path that does not exist\x22,\n\x22OPERATION_FROM_UNRESOLVABLE\x22,index,operation,document);}else throw new JsonPatchError(\x22Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\x22,\x22OPERATION_VALUE_REQUIRED\x22,index,operation,document);else throw new JsonPatchError(\x22Operation `from` property is not present (applicable in `move` and `copy` operations)\x22,\x22OPERATION_FROM_REQUIRED\x22,index,operation,document);}else throw new JsonPatchError(\x22Operation `op` property is not one of operations defined in RFC-6902\x22,\n\x22OPERATION_OP_INVALID\x22,index,operation,document);}function validate(sequence,document,externalValidator){try{if(!Array.isArray(sequence))throw new JsonPatchError(\x22Patch sequence must be an array\x22,\x22SEQUENCE_NOT_AN_ARRAY\x22);if(document)applyPatch(_deepClone(document),_deepClone(sequence),externalValidator||!0);else{externalValidator\x3dexternalValidator||validator;for(var i\x3d0;i\x3csequence.length;i++)externalValidator(sequence[i],i,document,void 0)}}catch(e){if(e instanceof JsonPatchError)return e;throw e;\n}}function _areEquals(a,b){if(a\x3d\x3d\x3db)return!0;if(a\x26\x26b\x26\x26\x22object\x22\x3d\x3dtypeof a\x26\x26\x22object\x22\x3d\x3dtypeof b){var arrA\x3dArray.isArray(a),arrB\x3dArray.isArray(b);if(arrA\x26\x26arrB){var length\x3da.length;if(length!\x3db.length)return!1;for(arrA\x3dlength;0!\x3d\x3darrA--;)if(!_areEquals(a[arrA],b[arrA]))return!1;return!0}if(arrA!\x3darrB)return!1;arrB\x3dObject.keys(a);length\x3darrB.length;if(length!\x3d\x3dObject.keys(b).length)return!1;for(arrA\x3dlength;0!\x3d\x3darrA--;)if(!b.hasOwnProperty(arrB[arrA]))return!1;for(arrA\x3dlength;0!\x3d\x3darrA--;)if(length\x3darrB[arrA],\n!_areEquals(a[length],b[length]))return!1;return!0}return a!\x3d\x3da\x26\x26b!\x3d\x3db}function generate(observer,invertible){void 0\x3d\x3d\x3dinvertible\x26\x26(invertible\x3d!1);var mirror\x3dbeforeDict.get(observer.object);_generate(mirror.value,observer.object,observer.patches,\x22\x22,invertible);observer.patches.length\x26\x26applyPatch(mirror.value,observer.patches);invertible\x3dobserver.patches;0\x3cinvertible.length\x26\x26(observer.patches\x3d[],observer.callback\x26\x26observer.callback(invertible));return invertible}function _generate(mirror,obj,patches,\npath,invertible){if(obj!\x3d\x3dmirror){\x22function\x22\x3d\x3d\x3dtypeof obj.toJSON\x26\x26(obj\x3dobj.toJSON());for(var newKeys\x3d_objectKeys(obj),oldKeys\x3d_objectKeys(mirror),deleted\x3d!1,t\x3doldKeys.length-1;0\x3c\x3dt;t--){var key\x3doldKeys[t],oldVal\x3dmirror[key];if(!_hasOwnProperty.call(obj,key)||void 0\x3d\x3d\x3dobj[key]\x26\x26void 0!\x3d\x3doldVal\x26\x26!1\x3d\x3d\x3dArray.isArray(obj))Array.isArray(mirror)\x3d\x3d\x3dArray.isArray(obj)?(invertible\x26\x26patches.push({op:\x22test\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:\x22remove\x22,path:path+\n\x22/\x22+escapePathComponent(key)}),deleted\x3d!0):(invertible\x26\x26patches.push({op:\x22test\x22,path,value:mirror}),patches.push({op:\x22replace\x22,path,value:obj}));else{var newVal\x3dobj[key];\x22object\x22\x3d\x3dtypeof oldVal\x26\x26null!\x3doldVal\x26\x26\x22object\x22\x3d\x3dtypeof newVal\x26\x26null!\x3dnewVal?_generate(oldVal,newVal,patches,path+\x22/\x22+escapePathComponent(key),invertible):oldVal!\x3d\x3dnewVal\x26\x26(invertible\x26\x26patches.push({op:\x22test\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(oldVal)}),patches.push({op:\x22replace\x22,path:path+\x22/\x22+escapePathComponent(key),\nvalue:_deepClone(newVal)}))}}if(deleted||newKeys.length!\x3doldKeys.length)for(t\x3d0;t\x3cnewKeys.length;t++)key\x3dnewKeys[t],_hasOwnProperty.call(mirror,key)||void 0\x3d\x3d\x3dobj[key]||patches.push({op:\x22add\x22,path:path+\x22/\x22+escapePathComponent(key),value:_deepClone(obj[key])})}}function Yallist(list){var self\x3dthis;self instanceof Yallist||(self\x3dnew Yallist);self.tail\x3dnull;self.head\x3dnull;self.length\x3d0;if(list\x26\x26\x22function\x22\x3d\x3d\x3dtypeof list.forEach)list.forEach(function(item){self.push(item)});else if(0\x3carguments.length)for(var i\x3d\n0,l\x3darguments.length;i\x3cl;i++)self.push(arguments[i]);return self}function Node(value,prev,next,list){if(!(this instanceof Node))return new Node(value,prev,next,list);this.list\x3dlist;this.value\x3dvalue;prev?(prev.next\x3dthis,this.prev\x3dprev):this.prev\x3dnull;next?(next.prev\x3dthis,this.next\x3dnext):this.next\x3dnull}function schemaParser(e){const [n,r]\x3d/\\/schema\\/([\\w-]+)\\/([\\w\\.\\-]+)\\.json$/g.exec(e).slice(1,3);return{library:n,version:r}}function accessor(fn,fields,name){fn.fields\x3dfields||[];fn.fname\x3dname;return fn}\nfunction getter(path){return 1\x3d\x3d\x3dpath.length?get1(path[0]):getN(path)}function splitAccessPath(p){function push(){path.push(s+p.substring(i,j));s\x3d\x22\x22;i\x3dj+1}const path\x3d[],n\x3dp.length;let q\x3dnull,b\x3d0,s\x3d\x22\x22,i,j,c;p+\x3d\x22\x22;for(i\x3dj\x3d0;j\x3cn;++j)if(c\x3dp[j],\x22\\\\\x22\x3d\x3d\x3dc)s+\x3dp.substring(i,j),s+\x3dp.substring(++j,++j),i\x3dj;else if(c\x3d\x3d\x3dq)push(),q\x3dnull,b\x3d-1;else if(!q)if(i\x3d\x3d\x3db\x26\x26\x27\x22\x27\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(i\x3d\x3d\x3db\x26\x26\x22\x27\x22\x3d\x3d\x3dc)i\x3dj+1,q\x3dc;else if(\x22.\x22\x3d\x3d\x3dc\x26\x26!b)j\x3ei?push():i\x3dj+1;else if(\x22[\x22\x3d\x3d\x3dc)j\x3ei\x26\x26push(),b\x3di\x3dj+1;else if(\x22]\x22\x3d\x3d\x3dc){if(!b)throw Error(\x22Access path missing open bracket: \x22+\np);0\x3cb\x26\x26push();b\x3d0;i\x3dj+1}if(b)throw Error(\x22Access path missing closing bracket: \x22+p);if(q)throw Error(\x22Access path missing closing quote: \x22+p);j\x3ei\x26\x26(j++,push());return path}function __rest(s,e){var t\x3d{},p;for(p in s)Object.prototype.hasOwnProperty.call(s,p)\x26\x260\x3ee.indexOf(p)\x26\x26(t[p]\x3ds[p]);if(null!\x3ds\x26\x26\x22function\x22\x3d\x3d\x3dtypeof Object.getOwnPropertySymbols){var i\x3d0;for(p\x3dObject.getOwnPropertySymbols(s);i\x3cp.length;i++)0\x3ee.indexOf(p[i])\x26\x26Object.prototype.propertyIsEnumerable.call(s,p[i])\x26\x26(t[p[i]]\x3ds[p[i]])}return t}\nfunction formatValue(value,valueToHtml,maxDepth){if(isArray(value))return`[${value.map(v\x3d\x3evalueToHtml(\x22string\x22\x3d\x3d\x3dtypeof v?v:JSON.stringify(v,replacer$jscomp$0(maxDepth)))).join(\x22, \x22)}]`;if(value\x3d\x3d\x3dObject(value)){let content\x3d\x22\x22;const {title,image}\x3dvalue;value\x3d__rest(value,[\x22title\x22,\x22image\x22]);title\x26\x26(content+\x3d`\x3ch2\x3e${valueToHtml(title)}\x3c/h2\x3e`);image\x26\x26(content+\x3d`\x3cimg src\x3d\x22${valueToHtml(image)}\x22\x3e`);var keys\x3dObject.keys(value);if(0\x3ckeys.length){content+\x3d\x22\\x3ctable\\x3e\x22;for(const key of keys)keys\x3dvalue[key],\nvoid 0!\x3d\x3dkeys\x26\x26(keys\x3d\x3d\x3dObject(keys)\x26\x26(keys\x3dJSON.stringify(keys,replacer$jscomp$0(maxDepth))),content+\x3d`\x3ctr\x3e\x3ctd class\x3d\x22key\x22\x3e${valueToHtml(key)}:\x3c/td\x3e\x3ctd class\x3d\x22value\x22\x3e${valueToHtml(keys)}\x3c/td\x3e\x3c/tr\x3e`);content+\x3d\x22\\x3c/table\\x3e\x22}return content||\x22{}\x22}return valueToHtml(value)}function replacer$jscomp$0(maxDepth){const stack\x3d[];return function(key,value){if(\x22object\x22!\x3d\x3dtypeof value||null\x3d\x3d\x3dvalue)return value;key\x3dstack.indexOf(this)+1;stack.length\x3dkey;if(stack.length\x3emaxDepth)return\x22[Object]\x22;if(0\x3c\x3dstack.indexOf(value))return\x22[Circular]\x22;\nstack.push(value);return value}}function post(window,url,data){function listen(evt){evt.source\x3d\x3d\x3deditor\x26\x26(count\x3d0,window.removeEventListener(\x22message\x22,listen,!1))}function send(){0\x3e\x3dcount||(editor.postMessage(data,origin),setTimeout(send,250),--count)}var editor\x3dwindow.open(url),origin\x3d(new URL(url)).origin,count\x3d40;window.addEventListener(\x22message\x22,listen,!1);setTimeout(send,250)}function mergeDeep(dest$jscomp$0){for(var src\x3d[],_i\x3d1;_i\x3carguments.length;_i++)src[_i-1]\x3darguments[_i];for(_i\x3d0;_i\x3csrc.length;_i++)for(var dest\x3d\ndest$jscomp$0,src$jscomp$0\x3dsrc[_i],_i$jscomp$0\x3d0,_a\x3dObject.keys(src$jscomp$0);_i$jscomp$0\x3c_a.length;_i$jscomp$0++){var property\x3d_a[_i$jscomp$0];vegaImport.writeConfig(dest,property,src$jscomp$0[property],!0)}return dest$jscomp$0}function viewSource(source,sourceHeader,sourceFooter,mode){sourceHeader\x3d\x22\\x3chtml\\x3e\\x3chead\\x3e\x22+sourceHeader+\x27\\x3c/head\\x3e\\x3cbody\\x3e\\x3cpre\\x3e\\x3ccode class\\x3d\x22json\x22\\x3e\x27;sourceFooter\x3d\x22\\x3c/code\\x3e\\x3c/pre\\x3e\x22+sourceFooter+\x22\\x3c/body\\x3e\\x3c/html\\x3e\x22;var win\x3dwindow.open(\x22\x22);\nwin.document.write(sourceHeader+source+sourceFooter);win.document.title\x3dNAMES[mode]+\x22 JSON Source\x22}function guessMode(spec,providedMode){var _a;return spec.$schema?(spec\x3dschemaParser(spec.$schema),providedMode\x26\x26providedMode!\x3d\x3dspec.library\x26\x26console.warn(\x22The given visualization spec is written in \x22+NAMES[spec.library]+\x22, but mode argument sets \x22+(null!\x3d\x3d(_a\x3dNAMES[providedMode])\x26\x26void 0!\x3d\x3d_a?_a:providedMode)+\x22.\x22),providedMode\x3dspec.library,semver.satisfies(VERSION[providedMode],\x22^\x22+spec.version.slice(1))||\nconsole.warn(\x22The input spec uses \x22+NAMES[providedMode]+\x22 \x22+spec.version+\x22, but the current version of \x22+NAMES[providedMode]+\x22 is v\x22+VERSION[providedMode]+\x22.\x22),providedMode):\x22mark\x22in spec||\x22encoding\x22in spec||\x22layer\x22in spec||\x22hconcat\x22in spec||\x22vconcat\x22in spec||\x22facet\x22in spec||\x22repeat\x22in spec?\x22vega-lite\x22:\x22marks\x22in spec||\x22signals\x22in spec||\x22scales\x22in spec||\x22axes\x22in spec?\x22vega\x22:null!\x3d\x3dprovidedMode\x26\x26void 0!\x3d\x3dprovidedMode?providedMode:\x22vega\x22}function createLoader(opts){return opts\x26\x26\x22load\x22in opts?opts:vega.loader(opts)}\nfunction embedOptionsFromUsermeta(parsedSpec){var _a;return null!\x3d\x3d(_a\x3dparsedSpec.usermeta\x26\x26parsedSpec.usermeta.embedOptions)\x26\x26void 0!\x3d\x3d_a?_a:{}}function embed(el,spec,opts){var _a,_b,_c;void 0\x3d\x3d\x3dopts\x26\x26(opts\x3d{});return __awaiter(this,void 0,void 0,function(){var parsedSpec,loader,_d,_e,usermetaLoader,usermetaOpts,parsedOpts,mergedOpts;return __generator(this,function(_f){switch(_f.label){case 0:if(!vegaImport.isString(spec))return[3,2];loader\x3dcreateLoader(opts.loader);_e\x3d(_d\x3dJSON).parse;return[4,\nloader.load(spec)];case 1:return parsedSpec\x3d_e.apply(_d,[_f.sent()]),[3,3];case 2:parsedSpec\x3dspec,_f.label\x3d3;case 3:usermetaLoader\x3dembedOptionsFromUsermeta(parsedSpec).loader;if(!loader||usermetaLoader)loader\x3dcreateLoader(null!\x3d\x3d(_a\x3dopts.loader)\x26\x26void 0!\x3d\x3d_a?_a:usermetaLoader);return[4,loadOpts(embedOptionsFromUsermeta(parsedSpec),loader)];case 4:return usermetaOpts\x3d_f.sent(),[4,loadOpts(opts,loader)];case 5:return parsedOpts\x3d_f.sent(),mergedOpts\x3d__assign(__assign({},mergeDeep(parsedOpts,usermetaOpts)),\n{config:vegaImport.mergeConfig(null!\x3d\x3d(_b\x3dparsedOpts.config)\x26\x26void 0!\x3d\x3d_b?_b:{},null!\x3d\x3d(_c\x3dusermetaOpts.config)\x26\x26void 0!\x3d\x3d_c?_c:{})}),[4,_embed(el,parsedSpec,mergedOpts,loader)];case 6:return[2,_f.sent()]}})})}function loadOpts(opt,loader){var _a;return __awaiter(this,void 0,void 0,function(){var config,_b,_c,_d,patch,_e,_f,_g;return __generator(this,function(_h){switch(_h.label){case 0:if(!vegaImport.isString(opt.config))return[3,2];_d\x3d(_c\x3dJSON).parse;return[4,loader.load(opt.config)];case 1:return _b\x3d\n_d.apply(_c,[_h.sent()]),[3,3];case 2:_b\x3dnull!\x3d\x3d(_a\x3dopt.config)\x26\x26void 0!\x3d\x3d_a?_a:{},_h.label\x3d3;case 3:config\x3d_b;if(!vegaImport.isString(opt.patch))return[3,5];_g\x3d(_f\x3dJSON).parse;return[4,loader.load(opt.patch)];case 4:return _e\x3d_g.apply(_f,[_h.sent()]),[3,6];case 5:_e\x3dopt.patch,_h.label\x3d6;case 6:return patch\x3d_e,[2,__assign(__assign(__assign({},opt),patch?{patch}:{}),config?{config}:{})]}})})}function getRoot(el){var _a;el\x3del.getRootNode?el.getRootNode():document;return el instanceof ShadowRoot?{root:el,\nrootContainer:el}:{root:document,rootContainer:null!\x3d\x3d(_a\x3ddocument.head)\x26\x26void 0!\x3d\x3d_a?_a:document.body}}function _embed(el,spec,opts,loader){var _a$jscomp$0,_b$jscomp$0,_c,_d,_e,_f;void 0\x3d\x3d\x3dopts\x26\x26(opts\x3d{});return __awaiter(this,void 0,void 0,function(){function finalize(){documentClickHandler\x26\x26document.removeEventListener(\x22click\x22,documentClickHandler);view.finalize()}var config,actions,i18n,renderer,logLevel,downloadFileName,element,_g,root,rootContainer,style,mode,vgSpec,parsed,container,chartWrapper,\npatch,ast,runtime,view,handler,hover,_h,hoverSet,updateSet,documentClickHandler,wrapper,details_1,summary,ctrl,_loop_1,_i,_j,ext$jscomp$0,viewSourceLink,compileLink,editorUrl_1,editorLink;return __generator(this,function(_k){switch(_k.label){case 0:config\x3dopts.theme?vegaImport.mergeConfig(themes[opts.theme],null!\x3d\x3d(_a$jscomp$0\x3dopts.config)\x26\x26void 0!\x3d\x3d_a$jscomp$0?_a$jscomp$0:{}):opts.config;actions\x3dvegaImport.isBoolean(opts.actions)?opts.actions:mergeDeep({},DEFAULT_ACTIONS,null!\x3d\x3d(_b$jscomp$0\x3dopts.actions)\x26\x26\nvoid 0!\x3d\x3d_b$jscomp$0?_b$jscomp$0:{});i18n\x3d__assign(__assign({},I18N),opts.i18n);renderer\x3dnull!\x3d\x3d(_c\x3dopts.renderer)\x26\x26void 0!\x3d\x3d_c?_c:\x22canvas\x22;logLevel\x3dnull!\x3d\x3d(_d\x3dopts.logLevel)\x26\x26void 0!\x3d\x3d_d?_d:vega.Warn;downloadFileName\x3dnull!\x3d\x3d(_e\x3dopts.downloadFileName)\x26\x26void 0!\x3d\x3d_e?_e:\x22visualization\x22;element\x3d\x22string\x22\x3d\x3d\x3dtypeof el?document.querySelector(el):el;if(!element)throw Error(el+\x22 does not exist\x22);!1!\x3d\x3dopts.defaultStyle\x26\x26(_g\x3dgetRoot(element),root\x3d_g.root,rootContainer\x3d_g.rootContainer,root.getElementById(\x22vega-embed-style\x22)||\n(style\x3ddocument.createElement(\x22style\x22),style.id\x3d\x22vega-embed-style\x22,style.innerText\x3dvoid 0\x3d\x3d\x3dopts.defaultStyle||!0\x3d\x3d\x3dopts.defaultStyle?\x27.vega-embed {\\n  position: relative;\\n  display: inline-block;\\n  box-sizing: border-box; }\\n  .vega-embed.has-actions {\\n    padding-right: 38px; }\\n  .vega-embed details:not([open]) \\x3e :not(summary) {\\n    display: none !important; }\\n  .vega-embed summary {\\n    list-style: none;\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    padding: 6px;\\n    z-index: 1000;\\n    background: white;\\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\\n    color: #1b1e23;\\n    border: 1px solid #aaa;\\n    border-radius: 999px;\\n    opacity: 0.2;\\n    transition: opacity 0.4s ease-in;\\n    outline: none;\\n    cursor: pointer;\\n    line-height: 0px; }\\n    .vega-embed summary::-webkit-details-marker {\\n      display: none; }\\n    .vega-embed summary:active {\\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\\n    .vega-embed summary svg {\\n      width: 14px;\\n      height: 14px; }\\n  .vega-embed details[open] summary {\\n    opacity: 0.7; }\\n  .vega-embed:hover summary,\\n  .vega-embed:focus summary {\\n    opacity: 1 !important;\\n    transition: opacity 0.2s ease; }\\n  .vega-embed .vega-actions {\\n    position: absolute;\\n    z-index: 1001;\\n    top: 35px;\\n    right: -9px;\\n    display: flex;\\n    flex-direction: column;\\n    padding-bottom: 8px;\\n    padding-top: 8px;\\n    border-radius: 4px;\\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\\n    border: 1px solid #d9d9d9;\\n    background: white;\\n    animation-duration: 0.15s;\\n    animation-name: scale-in;\\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\\n    text-align: left; }\\n    .vega-embed .vega-actions a {\\n      padding: 8px 16px;\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      font-weight: 600;\\n      white-space: nowrap;\\n      color: #434a56;\\n      text-decoration: none; }\\n      .vega-embed .vega-actions a:hover {\\n        background-color: #f7f7f9;\\n        color: black; }\\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\\n      content: \x22\x22;\\n      display: inline-block;\\n      position: absolute; }\\n    .vega-embed .vega-actions::before {\\n      left: auto;\\n      right: 14px;\\n      top: -16px;\\n      border: 8px solid #0000;\\n      border-bottom-color: #d9d9d9; }\\n    .vega-embed .vega-actions::after {\\n      left: auto;\\n      right: 15px;\\n      top: -14px;\\n      border: 7px solid #0000;\\n      border-bottom-color: #fff; }\\n  .vega-embed .chart-wrapper {\\n    width: 100%;\\n    height: 100%; }\\n\\n.vega-embed-wrapper {\\n  max-width: 100%;\\n  overflow: auto;\\n  padding-right: 14px; }\\n\\n@keyframes scale-in {\\n  from {\\n    opacity: 0;\\n    transform: scale(0.6); }\\n  to {\\n    opacity: 1;\\n    transform: scale(1); } }\\n\x27.toString():\nopts.defaultStyle,rootContainer.appendChild(style)));mode\x3dguessMode(spec,opts.mode);vgSpec\x3dPREPROCESSOR[mode](spec,config);\x22vega-lite\x22\x3d\x3d\x3dmode\x26\x26vgSpec.$schema\x26\x26(parsed\x3dschemaParser(vgSpec.$schema),semver.satisfies(VERSION.vega,\x22^\x22+parsed.version.slice(1))||console.warn(\x22The compiled spec uses Vega \x22+parsed.version+\x22, but current version is v\x22+VERSION.vega+\x22.\x22));element.classList.add(\x22vega-embed\x22);actions\x26\x26element.classList.add(\x22has-actions\x22);element.innerHTML\x3d\x22\x22;container\x3delement;actions\x26\x26(chartWrapper\x3d\ndocument.createElement(\x22div\x22),chartWrapper.classList.add(\x22chart-wrapper\x22),element.appendChild(chartWrapper),container\x3dchartWrapper);(patch\x3dopts.patch)\x26\x26(vgSpec\x3dpatch instanceof Function?patch(vgSpec):applyPatch(vgSpec,patch,!0,!1).newDocument);opts.formatLocale\x26\x26vega.formatLocale(opts.formatLocale);opts.timeFormatLocale\x26\x26vega.timeFormatLocale(opts.timeFormatLocale);ast\x3dopts.ast;runtime\x3dvega.parse(vgSpec,\x22vega-lite\x22\x3d\x3d\x3dmode?{}:config,{ast});view\x3dnew (opts.viewClass||vega.View)(runtime,__assign({loader,\nlogLevel,renderer},ast?{expr:vega.expressionInterpreter}:{}));!1!\x3d\x3dopts.tooltip\x26\x26(handler\x3dvoid 0,handler\x3d\x22function\x22\x3d\x3d\x3dtypeof opts.tooltip?opts.tooltip:(new Handler(!0\x3d\x3d\x3dopts.tooltip?{}:opts.tooltip)).call,view.tooltip(handler));hover\x3dopts.hover;void 0\x3d\x3d\x3dhover\x26\x26(hover\x3d\x22vega\x22\x3d\x3d\x3dmode);hover\x26\x26(_h\x3d\x22boolean\x22\x3d\x3d\x3dtypeof hover?{}:hover,hoverSet\x3d_h.hoverSet,updateSet\x3d_h.updateSet,view.hover(hoverSet,updateSet));opts\x26\x26(null!\x3dopts.width\x26\x26view.width(opts.width),null!\x3dopts.height\x26\x26view.height(opts.height),null!\x3d\nopts.padding\x26\x26view.padding(opts.padding));return[4,view.initialize(container,opts.bind).runAsync()];case 1:_k.sent();if(!1!\x3d\x3dactions){wrapper\x3delement;!1!\x3d\x3dopts.defaultStyle\x26\x26(details_1\x3ddocument.createElement(\x22details\x22),details_1.title\x3di18n.CLICK_TO_VIEW_ACTIONS,element.append(details_1),wrapper\x3ddetails_1,summary\x3ddocument.createElement(\x22summary\x22),summary.innerHTML\x3d\x27\\n\\x3csvg viewBox\\x3d\x220 0 16 16\x22 fill\\x3d\x22currentColor\x22 stroke\\x3d\x22none\x22 stroke-width\\x3d\x221\x22 stroke-linecap\\x3d\x22round\x22 stroke-linejoin\\x3d\x22round\x22\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x222\x22\\x3e\\x3c/circle\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x228\x22\\x3e\\x3c/circle\\x3e\\n  \\x3ccircle r\\x3d\x222\x22 cy\\x3d\x228\x22 cx\\x3d\x2214\x22\\x3e\\x3c/circle\\x3e\\n\\x3c/svg\\x3e\x27,\ndetails_1.append(summary),documentClickHandler\x3dfunction(ev){details_1.contains(ev.target)||details_1.removeAttribute(\x22open\x22)},document.addEventListener(\x22click\x22,documentClickHandler));ctrl\x3ddocument.createElement(\x22div\x22);wrapper.append(ctrl);ctrl.classList.add(\x22vega-actions\x22);if(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions[\x22export\x22])for(_loop_1\x3dfunction(ext){if(!0\x3d\x3d\x3dactions||!0\x3d\x3d\x3dactions[\x22export\x22]||actions[\x22export\x22][ext]){var i18nExportAction\x3di18n[ext.toUpperCase()+\x22_ACTION\x22],exportLink\x3ddocument.createElement(\x22a\x22);exportLink.text\x3d\ni18nExportAction;exportLink.href\x3d\x22#\x22;exportLink.target\x3d\x22_blank\x22;exportLink.download\x3ddownloadFileName+\x22.\x22+ext;exportLink.addEventListener(\x22mousedown\x22,function(e){return __awaiter(this,void 0,void 0,function(){var url;return __generator(this,function(_a){switch(_a.label){case 0:return e.preventDefault(),[4,view.toImageURL(ext,opts.scaleFactor)];case 1:return this.href\x3durl\x3d_a.sent(),[2]}})})});ctrl.append(exportLink)}},_i\x3d0,_j\x3d[\x22svg\x22,\x22png\x22];_i\x3c_j.length;_i++)ext$jscomp$0\x3d_j[_i],_loop_1(ext$jscomp$0);\nif(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions.source)viewSourceLink\x3ddocument.createElement(\x22a\x22),viewSourceLink.text\x3di18n.SOURCE_ACTION,viewSourceLink.href\x3d\x22#\x22,viewSourceLink.addEventListener(\x22click\x22,function(e){var _a,_b;viewSource(jsonStringifyPrettyCompact(spec),null!\x3d\x3d(_a\x3dopts.sourceHeader)\x26\x26void 0!\x3d\x3d_a?_a:\x22\x22,null!\x3d\x3d(_b\x3dopts.sourceFooter)\x26\x26void 0!\x3d\x3d_b?_b:\x22\x22,mode);e.preventDefault()}),ctrl.append(viewSourceLink);\x22vega-lite\x22!\x3d\x3dmode||!0!\x3d\x3dactions\x26\x26!1\x3d\x3d\x3dactions.compiled||(compileLink\x3ddocument.createElement(\x22a\x22),compileLink.text\x3d\ni18n.COMPILED_ACTION,compileLink.href\x3d\x22#\x22,compileLink.addEventListener(\x22click\x22,function(e){var _a,_b;viewSource(jsonStringifyPrettyCompact(vgSpec),null!\x3d\x3d(_a\x3dopts.sourceHeader)\x26\x26void 0!\x3d\x3d_a?_a:\x22\x22,null!\x3d\x3d(_b\x3dopts.sourceFooter)\x26\x26void 0!\x3d\x3d_b?_b:\x22\x22,\x22vega\x22);e.preventDefault()}),ctrl.append(compileLink));if(!0\x3d\x3d\x3dactions||!1!\x3d\x3dactions.editor)editorUrl_1\x3dnull!\x3d\x3d(_f\x3dopts.editorUrl)\x26\x26void 0!\x3d\x3d_f?_f:\x22https://vega.github.io/editor/\x22,editorLink\x3ddocument.createElement(\x22a\x22),editorLink.text\x3di18n.EDITOR_ACTION,editorLink.href\x3d\n\x22#\x22,editorLink.addEventListener(\x22click\x22,function(e){post(window,editorUrl_1,{config,mode,renderer,spec:jsonStringifyPrettyCompact(spec)});e.preventDefault()}),ctrl.append(editorLink)}return[2,{view,spec,vgSpec,finalize}]}})})}function container$jscomp$0(spec,opt){var _a;void 0\x3d\x3d\x3dopt\x26\x26(opt\x3d{});return __awaiter(this,void 0,void 0,function(){var wrapper,div,actions,result;return __generator(this,function(_b){switch(_b.label){case 0:return wrapper\x3ddocument.createElement(\x22div\x22),wrapper.classList.add(\x22vega-embed-wrapper\x22),\ndiv\x3ddocument.createElement(\x22div\x22),wrapper.appendChild(div),actions\x3d!0\x3d\x3d\x3dopt.actions||!1\x3d\x3d\x3dopt.actions?opt.actions:__assign({\x22export\x22:!0,source:!1,compiled:!0,editor:!0},null!\x3d\x3d(_a\x3dopt.actions)\x26\x26void 0!\x3d\x3d_a?_a:{}),[4,embed(div,spec,__assign({actions},null!\x3d\x3dopt\x26\x26void 0!\x3d\x3dopt?opt:{}))];case 1:return result\x3d_b.sent(),wrapper.value\x3dresult.view,[2,wrapper]}})})}var vegaImport__namespace\x3d_interopNamespace(vegaImport),vegaLiteImport__namespace\x3d_interopNamespace(vegaLiteImport),__assign\x3dfunction(){__assign\x3d\nObject.assign||function(t){for(var s,i\x3d1,n\x3darguments.length;i\x3cn;i++){s\x3darguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)\x26\x26(t[p]\x3ds[p])}return t};return __assign.apply(this,arguments)},__extends\x3dfunction(){var extendStatics\x3dfunction(d$jscomp$0,b$jscomp$0){extendStatics\x3dObject.setPrototypeOf||{__proto__:[]}instanceof Array\x26\x26function(d,b){d.__proto__\x3db}||function(d,b){for(var p in b)b.hasOwnProperty(p)\x26\x26(d[p]\x3db[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor\x3d\nd}extendStatics(d,b);d.prototype\x3dnull\x3d\x3d\x3db?Object.create(b):(__.prototype\x3db.prototype,new __)}}(),_hasOwnProperty\x3dObject.prototype.hasOwnProperty,PatchError\x3dfunction(_super){function PatchError(message,name,index,operation,tree){var _newTarget\x3dthis.constructor,_this\x3d_super.call(this,patchErrorMessageFormatter(message,{name,index,operation,tree}))||this;_this.name\x3dname;_this.index\x3dindex;_this.operation\x3doperation;_this.tree\x3dtree;Object.setPrototypeOf(_this,_newTarget.prototype);_this.message\x3dpatchErrorMessageFormatter(message,\n{name,index,operation,tree});return _this}__extends(PatchError,_super);return PatchError}(Error),JsonPatchError\x3dPatchError,objOps\x3d{add:function(obj,key,document){obj[key]\x3dthis.value;return{newDocument:document}},remove:function(obj,key,document){var removed\x3dobj[key];delete obj[key];return{newDocument:document,removed}},replace:function(obj,key,document){var removed\x3dobj[key];obj[key]\x3dthis.value;return{newDocument:document,removed}},move:function(obj,key,document){(obj\x3dgetValueByPointer(document,this.path))\x26\x26\n(obj\x3d_deepClone(obj));key\x3dapplyOperation(document,{op:\x22remove\x22,path:this.from}).removed;applyOperation(document,{op:\x22add\x22,path:this.path,value:key});return{newDocument:document,removed:obj}},copy:function(obj,key,document){obj\x3dgetValueByPointer(document,this.from);applyOperation(document,{op:\x22add\x22,path:this.path,value:_deepClone(obj)});return{newDocument:document}},test:function(obj,key,document){return{newDocument:document,test:_areEquals(obj[key],this.value)}},_get:function(obj,key,document){this.value\x3d\nobj[key];return{newDocument:document}}},arrOps\x3d{add:function(arr,i,document){isInteger(i)?arr.splice(i,0,this.value):arr[i]\x3dthis.value;return{newDocument:document,index:i}},remove:function(arr,i,document){arr\x3darr.splice(i,1);return{newDocument:document,removed:arr[0]}},replace:function(arr,i,document){var removed\x3darr[i];arr[i]\x3dthis.value;return{newDocument:document,removed}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get},core\x3dObject.freeze({__proto__:null,JsonPatchError,deepClone:_deepClone,\ngetValueByPointer,applyOperation,applyPatch,applyReducer:function(document,operation,index){var operationResult\x3dapplyOperation(document,operation);if(!1\x3d\x3d\x3doperationResult.test)throw new JsonPatchError(\x22Test operation failed\x22,\x22TEST_OPERATION_FAILED\x22,index,operation,document);return operationResult.newDocument},validator,validate,_areEquals}),beforeDict\x3dnew WeakMap,Mirror\x3dfunction(){return function(obj){this.observers\x3dnew Map;this.obj\x3dobj}}(),ObserverInfo\x3dfunction(){return function(callback,observer){this.callback\x3d\ncallback;this.observer\x3dobserver}}(),duplex\x3dObject.freeze({__proto__:null,unobserve:function(root,observer){observer.unobserve()},observe:function(obj,callback){var mirror\x3dbeforeDict.get(obj);if(mirror){var observerInfo\x3dmirror.observers.get(callback);var observer\x3dobserverInfo\x26\x26observerInfo.observer}else mirror\x3dnew Mirror(obj),beforeDict.set(obj,mirror);if(observer)return observer;observer\x3d{};mirror.value\x3d_deepClone(obj);if(callback){observer.callback\x3dcallback;observer.next\x3dnull;var dirtyCheck\x3dfunction(){generate(observer)},\nfastCheck\x3dfunction(){clearTimeout(observer.next);observer.next\x3dsetTimeout(dirtyCheck)};\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(window.addEventListener(\x22mouseup\x22,fastCheck),window.addEventListener(\x22keyup\x22,fastCheck),window.addEventListener(\x22mousedown\x22,fastCheck),window.addEventListener(\x22keydown\x22,fastCheck),window.addEventListener(\x22change\x22,fastCheck))}observer.patches\x3d[];observer.object\x3dobj;observer.unobserve\x3dfunction(){generate(observer);clearTimeout(observer.next);mirror.observers.delete(observer.callback);\n\x22undefined\x22!\x3d\x3dtypeof window\x26\x26(window.removeEventListener(\x22mouseup\x22,fastCheck),window.removeEventListener(\x22keyup\x22,fastCheck),window.removeEventListener(\x22mousedown\x22,fastCheck),window.removeEventListener(\x22keydown\x22,fastCheck),window.removeEventListener(\x22change\x22,fastCheck))};mirror.observers.set(callback,new ObserverInfo(callback,observer));return observer},generate,compare:function(tree1,tree2,invertible){void 0\x3d\x3d\x3dinvertible\x26\x26(invertible\x3d!1);var patches\x3d[];_generate(tree1,tree2,patches,\x22\x22,invertible);\nreturn patches}});Object.assign({},core,duplex,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent});var stringOrChar\x3d/(\x22(?:[^\\\\\x22]|\\\\.)*\x22)|[:,]/g,jsonStringifyPrettyCompact\x3dfunction(passedObj,options){options\x3doptions||{};var indent\x3dJSON.stringify([1],void 0,void 0\x3d\x3d\x3doptions.indent?2:options.indent).slice(2,-3);var maxLength\x3d\x22\x22\x3d\x3d\x3dindent?Infinity:void 0\x3d\x3d\x3doptions.maxLength?80:options.maxLength;var replacer\x3doptions.replacer;return function _stringify(obj,currentIndent,\nreserved){obj\x26\x26\x22function\x22\x3d\x3d\x3dtypeof obj.toJSON\x26\x26(obj\x3dobj.toJSON());var string\x3dJSON.stringify(obj,replacer);if(void 0\x3d\x3d\x3dstring)return string;reserved\x3dmaxLength-currentIndent.length-reserved;if(string.length\x3c\x3dreserved){var end\x3dstring.replace(stringOrChar,function(match,stringLiteral){return stringLiteral||match+\x22 \x22});if(end.length\x3c\x3dreserved)return end}null!\x3dreplacer\x26\x26(obj\x3dJSON.parse(string),replacer\x3dvoid 0);if(\x22object\x22\x3d\x3d\x3dtypeof obj\x26\x26null!\x3d\x3dobj){var nextIndent\x3dcurrentIndent+indent;var items\x3d[];var index\x3d\n0;if(Array.isArray(obj)){var start\x3d\x22[\x22;end\x3d\x22]\x22;for(reserved\x3dobj.length;index\x3creserved;index++)items.push(_stringify(obj[index],nextIndent,index\x3d\x3d\x3dreserved-1?0:1)||\x22null\x22)}else{start\x3d\x22{\x22;end\x3d\x22}\x22;var keys\x3dObject.keys(obj);for(reserved\x3dkeys.length;index\x3creserved;index++){var key\x3dkeys[index];var keyPart\x3dJSON.stringify(key)+\x22: \x22;key\x3d_stringify(obj[key],nextIndent,keyPart.length+(index\x3d\x3d\x3dreserved-1?0:1));void 0!\x3d\x3dkey\x26\x26items.push(keyPart+key)}}if(0\x3citems.length)return[start,indent+items.join(\x22,\\n\x22+nextIndent),\nend].join(\x22\\n\x22+currentIndent)}return string}(passedObj,\x22\x22,0)},constants\x3d{SEMVER_SPEC_VERSION:\x222.0.0\x22,MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},debug_1\x3d\x22object\x22\x3d\x3d\x3dtypeof process\x26\x26process.env\x26\x26process.env.NODE_DEBUG\x26\x26/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?(...args)\x3d\x3econsole.error(\x22SEMVER\x22,...args):()\x3d\x3e{},re_1\x3dfunction(fn){var module\x3d{exports:{}};return fn(module,module.exports),module.exports}(function(module,exports){const {MAX_SAFE_COMPONENT_LENGTH}\x3d\nconstants;exports\x3dmodule.exports\x3d{};const re\x3dexports.re\x3d[],src\x3dexports.src\x3d[],t\x3dexports.t\x3d{};let R\x3d0;module\x3d(name,value,isGlobal)\x3d\x3e{const index\x3dR++;debug_1(index,value);t[name]\x3dindex;src[index]\x3dvalue;re[index]\x3dnew RegExp(value,isGlobal?\x22g\x22:void 0)};module(\x22NUMERICIDENTIFIER\x22,\x220|[1-9]\\\\d*\x22);module(\x22NUMERICIDENTIFIERLOOSE\x22,\x22[0-9]+\x22);module(\x22NONNUMERICIDENTIFIER\x22,\x22\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\x22);module(\x22MAINVERSION\x22,`(${src[t.NUMERICIDENTIFIER]})\\\\.`+`(${src[t.NUMERICIDENTIFIER]})\\\\.`+`(${src[t.NUMERICIDENTIFIER]})`);\nmodule(\x22MAINVERSIONLOOSE\x22,`(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})`);module(\x22PRERELEASEIDENTIFIER\x22,`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);module(\x22PRERELEASEIDENTIFIERLOOSE\x22,`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);module(\x22PRERELEASE\x22,`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`);module(\x22PRERELEASELOOSE\x22,`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);\nmodule(\x22BUILDIDENTIFIER\x22,\x22[0-9A-Za-z-]+\x22);module(\x22BUILD\x22,`(?:\\\\+(${src[t.BUILDIDENTIFIER]}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`);module(\x22FULLPLAIN\x22,`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);module(\x22FULL\x22,`^${src[t.FULLPLAIN]}$`);module(\x22LOOSEPLAIN\x22,`[v\x3d\\\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);module(\x22LOOSE\x22,`^${src[t.LOOSEPLAIN]}$`);module(\x22GTLT\x22,\x22((?:\\x3c|\\x3e)?\\x3d?)\x22);module(\x22XRANGEIDENTIFIERLOOSE\x22,`${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`);\nmodule(\x22XRANGEIDENTIFIER\x22,`${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`);module(\x22XRANGEPLAIN\x22,`[v\x3d\\\\s]*(${src[t.XRANGEIDENTIFIER]})`+`(?:\\\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:\\\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?`+\x22)?)?\x22);module(\x22XRANGEPLAINLOOSE\x22,`[v\x3d\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?`+\x22)?)?\x22);module(\x22XRANGE\x22,`^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`);\nmodule(\x22XRANGELOOSE\x22,`^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`);module(\x22COERCE\x22,`${\x22(^|[^\\\\d])(\\\\d{1,\x22}${MAX_SAFE_COMPONENT_LENGTH}})`+`(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+\x22(?:$|[^\\\\d])\x22);module(\x22COERCERTL\x22,src[t.COERCE],!0);module(\x22LONETILDE\x22,\x22(?:~\\x3e?)\x22);module(\x22TILDETRIM\x22,`(\\\\s*)${src[t.LONETILDE]}\\\\s+`,!0);exports.tildeTrimReplace\x3d\x22$1~\x22;module(\x22TILDE\x22,`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);module(\x22TILDELOOSE\x22,`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);\nmodule(\x22LONECARET\x22,\x22(?:\\\\^)\x22);module(\x22CARETTRIM\x22,`(\\\\s*)${src[t.LONECARET]}\\\\s+`,!0);exports.caretTrimReplace\x3d\x22$1^\x22;module(\x22CARET\x22,`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);module(\x22CARETLOOSE\x22,`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);module(\x22COMPARATORLOOSE\x22,`^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`);module(\x22COMPARATOR\x22,`^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`);module(\x22COMPARATORTRIM\x22,`(\\\\s*)${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,!0);exports.comparatorTrimReplace\x3d\n\x22$1$2$3\x22;module(\x22HYPHENRANGE\x22,`^\\\\s*(${src[t.XRANGEPLAIN]})`+\x22\\\\s+-\\\\s+\x22+`(${src[t.XRANGEPLAIN]})`+\x22\\\\s*$\x22);module(\x22HYPHENRANGELOOSE\x22,`^\\\\s*(${src[t.XRANGEPLAINLOOSE]})`+\x22\\\\s+-\\\\s+\x22+`(${src[t.XRANGEPLAINLOOSE]})`+\x22\\\\s*$\x22);module(\x22STAR\x22,\x22(\\x3c|\\x3e)?\\x3d?\\\\s*\\\\*\x22);module(\x22GTE0\x22,\x22^\\\\s*\\x3e\\x3d\\\\s*0.0.0\\\\s*$\x22);module(\x22GTE0PRE\x22,\x22^\\\\s*\\x3e\\x3d\\\\s*0.0.0-0\\\\s*$\x22)});const opts$jscomp$0\x3d[\x22includePrerelease\x22,\x22loose\x22,\x22rtl\x22];var parseOptions_1\x3doptions$jscomp$0\x3d\x3eoptions$jscomp$0?\x22object\x22!\x3d\x3dtypeof options$jscomp$0?\n{loose:!0}:opts$jscomp$0.filter(k\x3d\x3eoptions$jscomp$0[k]).reduce((options,k)\x3d\x3e{options[k]\x3d!0;return options},{}):{};const numeric\x3d/^[0-9]+$/,compareIdentifiers$1\x3d(a,b)\x3d\x3e{const anum\x3dnumeric.test(a),bnum\x3dnumeric.test(b);anum\x26\x26bnum\x26\x26(a\x3d+a,b\x3d+b);return a\x3d\x3d\x3db?0:anum\x26\x26!bnum?-1:bnum\x26\x26!anum?1:a\x3cb?-1:1};var identifiers\x3d{compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:(a,b)\x3d\x3ecompareIdentifiers$1(b,a)};const {MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER}\x3dconstants,{re:re$4,t:t$4}\x3dre_1,{compareIdentifiers}\x3d\nidentifiers;class SemVer{constructor(version,options){options\x3dparseOptions_1(options);if(version instanceof SemVer){if(version.loose\x3d\x3d\x3d!!options.loose\x26\x26version.includePrerelease\x3d\x3d\x3d!!options.includePrerelease)return version;version\x3dversion.version}else if(\x22string\x22!\x3d\x3dtypeof version)throw new TypeError(`Invalid Version: ${version}`);if(version.length\x3eMAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug_1(\x22SemVer\x22,version,options);this.options\x3doptions;this.loose\x3d\n!!options.loose;this.includePrerelease\x3d!!options.includePrerelease;options\x3dversion.trim().match(options.loose?re$4[t$4.LOOSE]:re$4[t$4.FULL]);if(!options)throw new TypeError(`Invalid Version: ${version}`);this.raw\x3dversion;this.major\x3d+options[1];this.minor\x3d+options[2];this.patch\x3d+options[3];if(this.major\x3eMAX_SAFE_INTEGER||0\x3ethis.major)throw new TypeError(\x22Invalid major version\x22);if(this.minor\x3eMAX_SAFE_INTEGER||0\x3ethis.minor)throw new TypeError(\x22Invalid minor version\x22);if(this.patch\x3eMAX_SAFE_INTEGER||\n0\x3ethis.patch)throw new TypeError(\x22Invalid patch version\x22);this.prerelease\x3doptions[4]?options[4].split(\x22.\x22).map(id\x3d\x3e{if(/^[0-9]+$/.test(id)){const num\x3d+id;if(0\x3c\x3dnum\x26\x26num\x3cMAX_SAFE_INTEGER)return num}return id}):[];this.build\x3doptions[5]?options[5].split(\x22.\x22):[];this.format()}format(){this.version\x3d`${this.major}.${this.minor}.${this.patch}`;this.prerelease.length\x26\x26(this.version+\x3d`-${this.prerelease.join(\x22.\x22)}`);return this.version}toString(){return this.version}compare(other){debug_1(\x22SemVer.compare\x22,\nthis.version,this.options,other);if(!(other instanceof SemVer)){if(\x22string\x22\x3d\x3d\x3dtypeof other\x26\x26other\x3d\x3d\x3dthis.version)return 0;other\x3dnew SemVer(other,this.options)}return other.version\x3d\x3d\x3dthis.version?0:this.compareMain(other)||this.comparePre(other)}compareMain(other){other instanceof SemVer||(other\x3dnew SemVer(other,this.options));return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){other instanceof SemVer||\n(other\x3dnew SemVer(other,this.options));if(this.prerelease.length\x26\x26!other.prerelease.length)return-1;if(!this.prerelease.length\x26\x26other.prerelease.length)return 1;if(!this.prerelease.length\x26\x26!other.prerelease.length)return 0;let i\x3d0;do{const a\x3dthis.prerelease[i],b\x3dother.prerelease[i];debug_1(\x22prerelease compare\x22,i,a,b);if(void 0\x3d\x3d\x3da\x26\x26void 0\x3d\x3d\x3db)return 0;if(void 0\x3d\x3d\x3db)return 1;if(void 0\x3d\x3d\x3da)return-1;if(a!\x3d\x3db)return compareIdentifiers(a,b)}while(++i)}compareBuild(other){other instanceof SemVer||(other\x3d\nnew SemVer(other,this.options));let i\x3d0;do{const a\x3dthis.build[i],b\x3dother.build[i];debug_1(\x22prerelease compare\x22,i,a,b);if(void 0\x3d\x3d\x3da\x26\x26void 0\x3d\x3d\x3db)return 0;if(void 0\x3d\x3d\x3db)return 1;if(void 0\x3d\x3d\x3da)return-1;if(a!\x3d\x3db)return compareIdentifiers(a,b)}while(++i)}inc(release,identifier){switch(release){case \x22premajor\x22:this.minor\x3dthis.patch\x3dthis.prerelease.length\x3d0;this.major++;this.inc(\x22pre\x22,identifier);break;case \x22preminor\x22:this.patch\x3dthis.prerelease.length\x3d0;this.minor++;this.inc(\x22pre\x22,identifier);break;case \x22prepatch\x22:this.prerelease.length\x3d\n0;this.inc(\x22patch\x22,identifier);this.inc(\x22pre\x22,identifier);break;case \x22prerelease\x22:0\x3d\x3d\x3dthis.prerelease.length\x26\x26this.inc(\x22patch\x22,identifier);this.inc(\x22pre\x22,identifier);break;case \x22major\x22:0\x3d\x3d\x3dthis.minor\x26\x260\x3d\x3d\x3dthis.patch\x26\x260!\x3d\x3dthis.prerelease.length||this.major++;this.patch\x3dthis.minor\x3d0;this.prerelease\x3d[];break;case \x22minor\x22:0\x3d\x3d\x3dthis.patch\x26\x260!\x3d\x3dthis.prerelease.length||this.minor++;this.patch\x3d0;this.prerelease\x3d[];break;case \x22patch\x22:0\x3d\x3d\x3dthis.prerelease.length\x26\x26this.patch++;this.prerelease\x3d[];break;case \x22pre\x22:if(0\x3d\x3d\x3d\nthis.prerelease.length)this.prerelease\x3d[0];else{for(release\x3dthis.prerelease.length;0\x3c\x3d--release;)\x22number\x22\x3d\x3d\x3dtypeof this.prerelease[release]\x26\x26(this.prerelease[release]++,release\x3d-2);-1\x3d\x3d\x3drelease\x26\x26this.prerelease.push(0)}identifier\x26\x26(this.prerelease[0]\x3d\x3d\x3didentifier?isNaN(this.prerelease[1])\x26\x26(this.prerelease\x3d[identifier,0]):this.prerelease\x3d[identifier,0]);break;default:throw Error(`invalid increment argument: ${release}`);}this.format();this.raw\x3dthis.version;return this}}var semver$1\x3dSemVer;const {MAX_LENGTH}\x3d\nconstants,{re:re$3,t:t$3}\x3dre_1;var parse_1\x3d(version,options)\x3d\x3e{options\x3dparseOptions_1(options);if(version instanceof semver$1)return version;if(\x22string\x22!\x3d\x3dtypeof version||version.length\x3eMAX_LENGTH||!(options.loose?re$3[t$3.LOOSE]:re$3[t$3.FULL]).test(version))return null;try{return new semver$1(version,options)}catch(er){return null}},compare_1\x3d(a,b,loose)\x3d\x3e(new semver$1(a,loose)).compare(new semver$1(b,loose)),compareBuild_1\x3d(a,b,loose)\x3d\x3e{a\x3dnew semver$1(a,loose);b\x3dnew semver$1(b,loose);return a.compare(b)||\na.compareBuild(b)},gt_1\x3d(a,b,loose)\x3d\x3e0\x3ccompare_1(a,b,loose),lt_1\x3d(a,b,loose)\x3d\x3e0\x3ecompare_1(a,b,loose),gte_1\x3d(a,b,loose)\x3d\x3e0\x3c\x3dcompare_1(a,b,loose),lte_1\x3d(a,b,loose)\x3d\x3e0\x3e\x3dcompare_1(a,b,loose),cmp_1\x3d(a,op,b,loose)\x3d\x3e{switch(op){case \x22\\x3d\\x3d\\x3d\x22:return\x22object\x22\x3d\x3d\x3dtypeof a\x26\x26(a\x3da.version),\x22object\x22\x3d\x3d\x3dtypeof b\x26\x26(b\x3db.version),a\x3d\x3d\x3db;case \x22!\\x3d\\x3d\x22:return\x22object\x22\x3d\x3d\x3dtypeof a\x26\x26(a\x3da.version),\x22object\x22\x3d\x3d\x3dtypeof b\x26\x26(b\x3db.version),a!\x3d\x3db;case \x22\x22:case \x22\\x3d\x22:case \x22\\x3d\\x3d\x22:return 0\x3d\x3d\x3dcompare_1(a,b,loose);case \x22!\\x3d\x22:return 0!\x3d\x3d\ncompare_1(a,b,loose);case \x22\\x3e\x22:return 0\x3ccompare_1(a,b,loose);case \x22\\x3e\\x3d\x22:return 0\x3c\x3dcompare_1(a,b,loose);case \x22\\x3c\x22:return 0\x3ecompare_1(a,b,loose);case \x22\\x3c\\x3d\x22:return 0\x3e\x3dcompare_1(a,b,loose);default:throw new TypeError(`Invalid operator: ${op}`);}};const {re:re$2,t:t$2}\x3dre_1;var iterator\x3dfunction(Yallist){Yallist.prototype[Symbol.iterator]\x3dfunction*(){for(let walker\x3dthis.head;walker;walker\x3dwalker.next)yield walker.value}};Yallist.Node\x3dNode;Yallist.create\x3dYallist;Yallist.prototype.removeNode\x3d\nfunction(node){if(node.list!\x3d\x3dthis)throw Error(\x22removing node which does not belong to this list\x22);var next\x3dnode.next,prev\x3dnode.prev;next\x26\x26(next.prev\x3dprev);prev\x26\x26(prev.next\x3dnext);node\x3d\x3d\x3dthis.head\x26\x26(this.head\x3dnext);node\x3d\x3d\x3dthis.tail\x26\x26(this.tail\x3dprev);node.list.length--;node.next\x3dnull;node.prev\x3dnull;node.list\x3dnull;return next};Yallist.prototype.unshiftNode\x3dfunction(node){if(node!\x3d\x3dthis.head){node.list\x26\x26node.list.removeNode(node);var head\x3dthis.head;node.list\x3dthis;if(node.next\x3dhead)head.prev\x3dnode;this.head\x3d\nnode;this.tail||(this.tail\x3dnode);this.length++}};Yallist.prototype.pushNode\x3dfunction(node){if(node!\x3d\x3dthis.tail){node.list\x26\x26node.list.removeNode(node);var tail\x3dthis.tail;node.list\x3dthis;if(node.prev\x3dtail)tail.next\x3dnode;this.tail\x3dnode;this.head||(this.head\x3dnode);this.length++}};Yallist.prototype.push\x3dfunction(){for(var i\x3d0,l\x3darguments.length;i\x3cl;i++)this.tail\x3dnew Node(arguments[i],this.tail,null,this),this.head||(this.head\x3dthis.tail),this.length++;return this.length};Yallist.prototype.unshift\x3dfunction(){for(var i\x3d\n0,l\x3darguments.length;i\x3cl;i++)this.head\x3dnew Node(arguments[i],null,this.head,this),this.tail||(this.tail\x3dthis.head),this.length++;return this.length};Yallist.prototype.pop\x3dfunction(){if(this.tail){var res\x3dthis.tail.value;(this.tail\x3dthis.tail.prev)?this.tail.next\x3dnull:this.head\x3dnull;this.length--;return res}};Yallist.prototype.shift\x3dfunction(){if(this.head){var res\x3dthis.head.value;(this.head\x3dthis.head.next)?this.head.prev\x3dnull:this.tail\x3dnull;this.length--;return res}};Yallist.prototype.forEach\x3dfunction(fn,\nthisp){thisp\x3dthisp||this;for(var walker\x3dthis.head,i\x3d0;null!\x3d\x3dwalker;i++)fn.call(thisp,walker.value,i,this),walker\x3dwalker.next};Yallist.prototype.forEachReverse\x3dfunction(fn,thisp){thisp\x3dthisp||this;for(var walker\x3dthis.tail,i\x3dthis.length-1;null!\x3d\x3dwalker;i--)fn.call(thisp,walker.value,i,this),walker\x3dwalker.prev};Yallist.prototype.get\x3dfunction(n){for(var i\x3d0,walker\x3dthis.head;null!\x3d\x3dwalker\x26\x26i\x3cn;i++)walker\x3dwalker.next;if(i\x3d\x3d\x3dn\x26\x26null!\x3d\x3dwalker)return walker.value};Yallist.prototype.getReverse\x3dfunction(n){for(var i\x3d\n0,walker\x3dthis.tail;null!\x3d\x3dwalker\x26\x26i\x3cn;i++)walker\x3dwalker.prev;if(i\x3d\x3d\x3dn\x26\x26null!\x3d\x3dwalker)return walker.value};Yallist.prototype.map\x3dfunction(fn,thisp){thisp\x3dthisp||this;for(var res\x3dnew Yallist,walker\x3dthis.head;null!\x3d\x3dwalker;)res.push(fn.call(thisp,walker.value,this)),walker\x3dwalker.next;return res};Yallist.prototype.mapReverse\x3dfunction(fn,thisp){thisp\x3dthisp||this;for(var res\x3dnew Yallist,walker\x3dthis.tail;null!\x3d\x3dwalker;)res.push(fn.call(thisp,walker.value,this)),walker\x3dwalker.prev;return res};Yallist.prototype.reduce\x3d\nfunction(fn,initial){var walker\x3dthis.head;if(1\x3carguments.length)var acc\x3dinitial;else if(this.head)walker\x3dthis.head.next,acc\x3dthis.head.value;else throw new TypeError(\x22Reduce of empty list with no initial value\x22);for(var i\x3d0;null!\x3d\x3dwalker;i++)acc\x3dfn(acc,walker.value,i),walker\x3dwalker.next;return acc};Yallist.prototype.reduceReverse\x3dfunction(fn,initial){var walker\x3dthis.tail;if(1\x3carguments.length)var acc\x3dinitial;else if(this.tail)walker\x3dthis.tail.prev,acc\x3dthis.tail.value;else throw new TypeError(\x22Reduce of empty list with no initial value\x22);\nfor(var i\x3dthis.length-1;null!\x3d\x3dwalker;i--)acc\x3dfn(acc,walker.value,i),walker\x3dwalker.prev;return acc};Yallist.prototype.toArray\x3dfunction(){for(var arr\x3dArray(this.length),i\x3d0,walker\x3dthis.head;null!\x3d\x3dwalker;i++)arr[i]\x3dwalker.value,walker\x3dwalker.next;return arr};Yallist.prototype.toArrayReverse\x3dfunction(){for(var arr\x3dArray(this.length),i\x3d0,walker\x3dthis.tail;null!\x3d\x3dwalker;i++)arr[i]\x3dwalker.value,walker\x3dwalker.prev;return arr};Yallist.prototype.slice\x3dfunction(from,to){to\x3dto||this.length;0\x3eto\x26\x26(to+\x3dthis.length);\nfrom\x3dfrom||0;0\x3efrom\x26\x26(from+\x3dthis.length);var ret\x3dnew Yallist;if(to\x3cfrom||0\x3eto)return ret;0\x3efrom\x26\x26(from\x3d0);to\x3ethis.length\x26\x26(to\x3dthis.length);for(var i\x3d0,walker\x3dthis.head;null!\x3d\x3dwalker\x26\x26i\x3cfrom;i++)walker\x3dwalker.next;for(;null!\x3d\x3dwalker\x26\x26i\x3cto;i++,walker\x3dwalker.next)ret.push(walker.value);return ret};Yallist.prototype.sliceReverse\x3dfunction(from,to){to\x3dto||this.length;0\x3eto\x26\x26(to+\x3dthis.length);from\x3dfrom||0;0\x3efrom\x26\x26(from+\x3dthis.length);var ret\x3dnew Yallist;if(to\x3cfrom||0\x3eto)return ret;0\x3efrom\x26\x26(from\x3d0);to\x3ethis.length\x26\x26\n(to\x3dthis.length);for(var i\x3dthis.length,walker\x3dthis.tail;null!\x3d\x3dwalker\x26\x26i\x3eto;i--)walker\x3dwalker.prev;for(;null!\x3d\x3dwalker\x26\x26i\x3efrom;i--,walker\x3dwalker.prev)ret.push(walker.value);return ret};Yallist.prototype.splice\x3dfunction(start,deleteCount,...nodes){start\x3ethis.length\x26\x26(start\x3dthis.length-1);0\x3estart\x26\x26(start\x3dthis.length+start);for(var i\x3d0,walker\x3dthis.head;null!\x3d\x3dwalker\x26\x26i\x3cstart;i++)walker\x3dwalker.next;start\x3d[];for(i\x3d0;walker\x26\x26i\x3cdeleteCount;i++)start.push(walker.value),walker\x3dthis.removeNode(walker);null\x3d\x3d\x3d\nwalker\x26\x26(walker\x3dthis.tail);walker!\x3d\x3dthis.head\x26\x26walker!\x3d\x3dthis.tail\x26\x26(walker\x3dwalker.prev);for(i\x3d0;i\x3cnodes.length;i++)deleteCount\x3dwalker,walker\x3dnodes[i],deleteCount\x3ddeleteCount\x3d\x3d\x3dthis.head?new Node(walker,null,deleteCount,this):new Node(walker,deleteCount,deleteCount.next,this),null\x3d\x3d\x3ddeleteCount.next\x26\x26(this.tail\x3ddeleteCount),null\x3d\x3d\x3ddeleteCount.prev\x26\x26(this.head\x3ddeleteCount),this.length++,walker\x3ddeleteCount;return start};Yallist.prototype.reverse\x3dfunction(){for(var head\x3dthis.head,tail\x3dthis.tail,walker\x3d\nhead;null!\x3d\x3dwalker;walker\x3dwalker.prev){var p\x3dwalker.prev;walker.prev\x3dwalker.next;walker.next\x3dp}this.head\x3dtail;this.tail\x3dhead;return this};try{iterator(Yallist)}catch(er){}const MAX\x3dSymbol(\x22max\x22),LENGTH\x3dSymbol(\x22length\x22),LENGTH_CALCULATOR\x3dSymbol(\x22lengthCalculator\x22),ALLOW_STALE\x3dSymbol(\x22allowStale\x22),MAX_AGE\x3dSymbol(\x22maxAge\x22),DISPOSE\x3dSymbol(\x22dispose\x22),NO_DISPOSE_ON_SET\x3dSymbol(\x22noDisposeOnSet\x22),LRU_LIST\x3dSymbol(\x22lruList\x22),CACHE\x3dSymbol(\x22cache\x22),UPDATE_AGE_ON_GET\x3dSymbol(\x22updateAgeOnGet\x22),naiveLength\x3d()\x3d\x3e1;\nclass LRUCache{constructor(options){\x22number\x22\x3d\x3d\x3dtypeof options\x26\x26(options\x3d{max:options});options||(options\x3d{});if(options.max\x26\x26(\x22number\x22!\x3d\x3dtypeof options.max||0\x3eoptions.max))throw new TypeError(\x22max must be a non-negative number\x22);this[MAX]\x3doptions.max||Infinity;const lc\x3doptions.length||naiveLength;this[LENGTH_CALCULATOR]\x3d\x22function\x22!\x3d\x3dtypeof lc?naiveLength:lc;this[ALLOW_STALE]\x3doptions.stale||!1;if(options.maxAge\x26\x26\x22number\x22!\x3d\x3dtypeof options.maxAge)throw new TypeError(\x22maxAge must be a number\x22);this[MAX_AGE]\x3d\noptions.maxAge||0;this[DISPOSE]\x3doptions.dispose;this[NO_DISPOSE_ON_SET]\x3doptions.noDisposeOnSet||!1;this[UPDATE_AGE_ON_GET]\x3doptions.updateAgeOnGet||!1;this.reset()}set max(mL){if(\x22number\x22!\x3d\x3dtypeof mL||0\x3emL)throw new TypeError(\x22max must be a non-negative number\x22);this[MAX]\x3dmL||Infinity;trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]\x3d!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if(\x22number\x22!\x3d\x3dtypeof mA)throw new TypeError(\x22maxAge must be a non-negative number\x22);\nthis[MAX_AGE]\x3dmA;trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){\x22function\x22!\x3d\x3dtypeof lC\x26\x26(lC\x3dnaiveLength);lC!\x3d\x3dthis[LENGTH_CALCULATOR]\x26\x26(this[LENGTH_CALCULATOR]\x3dlC,this[LENGTH]\x3d0,this[LRU_LIST].forEach(hit\x3d\x3e{hit.length\x3dthis[LENGTH_CALCULATOR](hit.value,hit.key);this[LENGTH]+\x3dhit.length}));trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp\x3dthisp||this;for(let walker\x3d\nthis[LRU_LIST].tail;null!\x3d\x3dwalker;){const prev\x3dwalker.prev;forEachStep(this,fn,walker,thisp);walker\x3dprev}}forEach(fn,thisp){thisp\x3dthisp||this;for(let walker\x3dthis[LRU_LIST].head;null!\x3d\x3dwalker;){const next\x3dwalker.next;forEachStep(this,fn,walker,thisp);walker\x3dnext}}keys(){return this[LRU_LIST].toArray().map(k\x3d\x3ek.key)}values(){return this[LRU_LIST].toArray().map(k\x3d\x3ek.value)}reset(){this[DISPOSE]\x26\x26this[LRU_LIST]\x26\x26this[LRU_LIST].length\x26\x26this[LRU_LIST].forEach(hit\x3d\x3ethis[DISPOSE](hit.key,hit.value));this[CACHE]\x3d\nnew Map;this[LRU_LIST]\x3dnew Yallist;this[LENGTH]\x3d0}dump(){return this[LRU_LIST].map(hit\x3d\x3eisStale(this,hit)?!1:{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}).toArray().filter(h\x3d\x3eh)}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){if((maxAge\x3dmaxAge||this[MAX_AGE])\x26\x26\x22number\x22!\x3d\x3dtypeof maxAge)throw new TypeError(\x22maxAge must be a number\x22);const now\x3dmaxAge?Date.now():0,len\x3dthis[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len\x3ethis[MAX])return del(this,this[CACHE].get(key)),!1;const item\x3d\nthis[CACHE].get(key).value;if(this[DISPOSE]\x26\x26!this[NO_DISPOSE_ON_SET])this[DISPOSE](key,item.value);item.now\x3dnow;item.maxAge\x3dmaxAge;item.value\x3dvalue;this[LENGTH]+\x3dlen-item.length;item.length\x3dlen;this.get(key);trim(this);return!0}maxAge\x3dnew Entry(key,value,len,now,maxAge);if(maxAge.length\x3ethis[MAX]){if(this[DISPOSE])this[DISPOSE](key,value);return!1}this[LENGTH]+\x3dmaxAge.length;this[LRU_LIST].unshift(maxAge);this[CACHE].set(key,this[LRU_LIST].head);trim(this);return!0}has(key){if(!this[CACHE].has(key))return!1;\nkey\x3dthis[CACHE].get(key).value;return!isStale(this,key)}get(key){return get(this,key,!0)}peek(key){return get(this,key,!1)}pop(){const node\x3dthis[LRU_LIST].tail;if(!node)return null;del(this,node);return node.value}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now\x3dDate.now();for(let l\x3darr.length-1;0\x3c\x3dl;l--){const hit\x3darr[l];var expiresAt\x3dhit.e||0;0\x3d\x3d\x3dexpiresAt?this.set(hit.k,hit.v):(expiresAt-\x3dnow,0\x3cexpiresAt\x26\x26this.set(hit.k,hit.v,expiresAt))}}prune(){this[CACHE].forEach((value,\nkey)\x3d\x3eget(this,key,!1))}}const get\x3d(self,key,doUse)\x3d\x3e{if(key\x3dself[CACHE].get(key)){const hit\x3dkey.value;if(isStale(self,hit)){if(del(self,key),!self[ALLOW_STALE])return}else doUse\x26\x26(self[UPDATE_AGE_ON_GET]\x26\x26(key.value.now\x3dDate.now()),self[LRU_LIST].unshiftNode(key));return hit.value}},isStale\x3d(self,hit)\x3d\x3e{if(!hit||!hit.maxAge\x26\x26!self[MAX_AGE])return!1;const diff\x3dDate.now()-hit.now;return hit.maxAge?diff\x3ehit.maxAge:self[MAX_AGE]\x26\x26diff\x3eself[MAX_AGE]},trim\x3dself\x3d\x3e{if(self[LENGTH]\x3eself[MAX])for(let walker\x3d\nself[LRU_LIST].tail;self[LENGTH]\x3eself[MAX]\x26\x26null!\x3d\x3dwalker;){const prev\x3dwalker.prev;del(self,walker);walker\x3dprev}},del\x3d(self,node)\x3d\x3e{if(node){const hit\x3dnode.value;if(self[DISPOSE])self[DISPOSE](hit.key,hit.value);self[LENGTH]-\x3dhit.length;self[CACHE].delete(hit.key);self[LRU_LIST].removeNode(node)}};class Entry{constructor(key,value,length,now,maxAge){this.key\x3dkey;this.value\x3dvalue;this.length\x3dlength;this.now\x3dnow;this.maxAge\x3dmaxAge||0}}const forEachStep\x3d(self,fn,node,thisp)\x3d\x3e{let hit\x3dnode.value;isStale(self,\nhit)\x26\x26(del(self,node),self[ALLOW_STALE]||(hit\x3dvoid 0));hit\x26\x26fn.call(thisp,hit.value,hit.key,self)};class Range{constructor(range$jscomp$0,options){options\x3dparseOptions_1(options);if(range$jscomp$0 instanceof Range)return range$jscomp$0.loose\x3d\x3d\x3d!!options.loose\x26\x26range$jscomp$0.includePrerelease\x3d\x3d\x3d!!options.includePrerelease?range$jscomp$0:new Range(range$jscomp$0.raw,options);if(range$jscomp$0 instanceof comparator$jscomp$0)return this.raw\x3drange$jscomp$0.value,this.set\x3d[[range$jscomp$0]],this.format(),\nthis;this.options\x3doptions;this.loose\x3d!!options.loose;this.includePrerelease\x3d!!options.includePrerelease;this.raw\x3drange$jscomp$0;this.set\x3drange$jscomp$0.split(/\\s*\\|\\|\\s*/).map(range\x3d\x3ethis.parseRange(range.trim())).filter(c\x3d\x3ec.length);if(!this.set.length)throw new TypeError(`Invalid SemVer Range: ${range$jscomp$0}`);if(1\x3cthis.set.length)if(range$jscomp$0\x3dthis.set[0],this.set\x3dthis.set.filter(c\x3d\x3e\x22\\x3c0.0.0-0\x22!\x3d\x3dc[0].value),0\x3d\x3d\x3dthis.set.length)this.set\x3d[range$jscomp$0];else if(1\x3cthis.set.length)for(const c of this.set)if(1\x3d\x3d\x3d\nc.length\x26\x26\x22\x22\x3d\x3d\x3dc[0].value){this.set\x3d[c];break}this.format()}format(){return this.range\x3dthis.set.map(comps\x3d\x3ecomps.join(\x22 \x22).trim()).join(\x22||\x22).trim()}toString(){return this.range}parseRange(range){range\x3drange.trim();const memoKey\x3d`parseRange:${Object.keys(this.options).join(\x22,\x22)}:${range}`;var cached\x3dcache.get(memoKey);if(cached)return cached;cached\x3dthis.options.loose;range\x3drange.replace(cached?re$1[t$1.HYPHENRANGELOOSE]:re$1[t$1.HYPHENRANGE],hyphenReplace(this.options.includePrerelease));debug_1(\x22hyphen replace\x22,\nrange);range\x3drange.replace(re$1[t$1.COMPARATORTRIM],comparatorTrimReplace);debug_1(\x22comparator trim\x22,range,re$1[t$1.COMPARATORTRIM]);range\x3drange.replace(re$1[t$1.TILDETRIM],tildeTrimReplace);range\x3drange.replace(re$1[t$1.CARETTRIM],caretTrimReplace);range\x3drange.split(/\\s+/).join(\x22 \x22);const compRe\x3dcached?re$1[t$1.COMPARATORLOOSE]:re$1[t$1.COMPARATOR];range\x3drange.split(\x22 \x22).map(comp$jscomp$0\x3d\x3e{var comp\x3dcomp$jscomp$0;comp$jscomp$0\x3dthis.options;debug_1(\x22comp\x22,comp,comp$jscomp$0);comp\x3dreplaceCarets(comp,\ncomp$jscomp$0);debug_1(\x22caret\x22,comp);comp\x3dreplaceTildes(comp,comp$jscomp$0);debug_1(\x22tildes\x22,comp);comp\x3dreplaceXRanges(comp,comp$jscomp$0);debug_1(\x22xrange\x22,comp);debug_1(\x22replaceStars\x22,comp,comp$jscomp$0);comp\x3dcomp.trim().replace(re$1[t$1.STAR],\x22\x22);debug_1(\x22stars\x22,comp);return comp}).join(\x22 \x22).split(/\\s+/).map(comp\x3d\x3e{var options\x3dthis.options;debug_1(\x22replaceGTE0\x22,comp,options);return comp.trim().replace(re$1[options.includePrerelease?t$1.GTE0PRE:t$1.GTE0],\x22\x22)}).filter(this.options.loose?comp\x3d\x3e!!comp.match(compRe):\n()\x3d\x3e!0).map(comp\x3d\x3enew comparator$jscomp$0(comp,this.options));range.length;cached\x3dnew Map;for(var comp$jscomp$1 of range){if(\x22\\x3c0.0.0-0\x22\x3d\x3d\x3dcomp$jscomp$1.value)return[comp$jscomp$1];cached.set(comp$jscomp$1.value,comp$jscomp$1)}1\x3ccached.size\x26\x26cached.has(\x22\x22)\x26\x26cached.delete(\x22\x22);comp$jscomp$1\x3d[...cached.values()];cache.set(memoKey,comp$jscomp$1);return comp$jscomp$1}intersects(range,options){if(!(range instanceof Range))throw new TypeError(\x22a Range is required\x22);return this.set.some(thisComparators\x3d\x3e\nisSatisfiable(thisComparators,options)\x26\x26range.set.some(rangeComparators\x3d\x3eisSatisfiable(rangeComparators,options)\x26\x26thisComparators.every(thisComparator\x3d\x3erangeComparators.every(rangeComparator\x3d\x3ethisComparator.intersects(rangeComparator,options)))))}test(version$jscomp$0){if(!version$jscomp$0)return!1;if(\x22string\x22\x3d\x3d\x3dtypeof version$jscomp$0)try{version$jscomp$0\x3dnew semver$1(version$jscomp$0,this.options)}catch(er){return!1}for(let i\x3d0;i\x3cthis.set.length;i++){a:{var JSCompiler_inline_result\x3dthis.set[i];\nvar version\x3dversion$jscomp$0,options\x3dthis.options;for(var i$jscomp$0\x3d0;i$jscomp$0\x3cJSCompiler_inline_result.length;i$jscomp$0++)if(!JSCompiler_inline_result[i$jscomp$0].test(version)){JSCompiler_inline_result\x3d!1;break a}if(version.prerelease.length\x26\x26!options.includePrerelease){for(options\x3d0;options\x3cJSCompiler_inline_result.length;options++)if(debug_1(JSCompiler_inline_result[options].semver),JSCompiler_inline_result[options].semver!\x3d\x3dcomparator$jscomp$0.ANY\x26\x260\x3cJSCompiler_inline_result[options].semver.prerelease.length\x26\x26\n(i$jscomp$0\x3dJSCompiler_inline_result[options].semver,i$jscomp$0.major\x3d\x3d\x3dversion.major\x26\x26i$jscomp$0.minor\x3d\x3d\x3dversion.minor\x26\x26i$jscomp$0.patch\x3d\x3d\x3dversion.patch)){JSCompiler_inline_result\x3d!0;break a}JSCompiler_inline_result\x3d!1}else JSCompiler_inline_result\x3d!0}if(JSCompiler_inline_result)return!0}return!1}}var range$jscomp$1\x3dRange;const cache\x3dnew LRUCache({max:1E3}),{re:re$1,t:t$1,comparatorTrimReplace,tildeTrimReplace,caretTrimReplace}\x3dre_1,isSatisfiable\x3d(comparators,options)\x3d\x3e{let result\x3d!0;comparators\x3d\ncomparators.slice();let testComparator\x3dcomparators.pop();for(;result\x26\x26comparators.length;)result\x3dcomparators.every(otherComparator\x3d\x3etestComparator.intersects(otherComparator,options)),testComparator\x3dcomparators.pop();return result},isX\x3did\x3d\x3e!id||\x22x\x22\x3d\x3d\x3did.toLowerCase()||\x22*\x22\x3d\x3d\x3did,replaceTildes\x3d(comp$jscomp$0,options)\x3d\x3ecomp$jscomp$0.trim().split(/\\s+/).map(comp\x3d\x3ereplaceTilde(comp,options)).join(\x22 \x22),replaceTilde\x3d(comp,options)\x3d\x3ecomp.replace(options.loose?re$1[t$1.TILDELOOSE]:re$1[t$1.TILDE],(_,M,m,p,\npr)\x3d\x3e{debug_1(\x22tilde\x22,comp,_,M,m,p,pr);isX(M)?_\x3d\x22\x22:isX(m)?_\x3d`\x3e\x3d${M}.0.0 \x3c${+M+1}.0.0-0`:isX(p)?_\x3d`\x3e\x3d${M}.${m}.0 \x3c${M}.${+m+1}.0-0`:pr?(debug_1(\x22replaceTilde pr\x22,pr),_\x3d`\x3e\x3d${M}.${m}.${p}-${pr} \x3c${M}.${+m+1}.0-0`):_\x3d`\x3e\x3d${M}.${m}.${p} \x3c${M}.${+m+1}.0-0`;debug_1(\x22tilde return\x22,_);return _}),replaceCarets\x3d(comp$jscomp$0,options)\x3d\x3ecomp$jscomp$0.trim().split(/\\s+/).map(comp\x3d\x3ereplaceCaret(comp,options)).join(\x22 \x22),replaceCaret\x3d(comp,options)\x3d\x3e{debug_1(\x22caret\x22,comp,options);const z\x3doptions.includePrerelease?\n\x22-0\x22:\x22\x22;return comp.replace(options.loose?re$1[t$1.CARETLOOSE]:re$1[t$1.CARET],(_,M,m,p,pr)\x3d\x3e{debug_1(\x22caret\x22,comp,_,M,m,p,pr);isX(M)?_\x3d\x22\x22:isX(m)?_\x3d`\x3e\x3d${M}.0.0${z} \x3c${+M+1}.0.0-0`:isX(p)?_\x3d\x220\x22\x3d\x3d\x3dM?`\x3e\x3d${M}.${m}.0${z} \x3c${M}.${+m+1}.0-0`:`\x3e\x3d${M}.${m}.0${z} \x3c${+M+1}.0.0-0`:pr?(debug_1(\x22replaceCaret pr\x22,pr),_\x3d\x220\x22\x3d\x3d\x3dM?\x220\x22\x3d\x3d\x3dm?`\x3e\x3d${M}.${m}.${p}-${pr} \x3c${M}.${m}.${+p+1}-0`:`\x3e\x3d${M}.${m}.${p}-${pr} \x3c${M}.${+m+1}.0-0`:`\x3e\x3d${M}.${m}.${p}-${pr} \x3c${+M+1}.0.0-0`):(debug_1(\x22no pr\x22),_\x3d\x220\x22\x3d\x3d\x3dM?\x220\x22\x3d\x3d\x3dm?`\x3e\x3d${M}.${m}.${p}${z} \x3c${M}.${m}.${+p+\n1}-0`:`\x3e\x3d${M}.${m}.${p}${z} \x3c${M}.${+m+1}.0-0`:`\x3e\x3d${M}.${m}.${p} \x3c${+M+1}.0.0-0`);debug_1(\x22caret return\x22,_);return _})},replaceXRanges\x3d(comp$jscomp$0,options)\x3d\x3e{debug_1(\x22replaceXRanges\x22,comp$jscomp$0,options);return comp$jscomp$0.split(/\\s+/).map(comp\x3d\x3ereplaceXRange(comp,options)).join(\x22 \x22)},replaceXRange\x3d(comp,options)\x3d\x3e{comp\x3dcomp.trim();return comp.replace(options.loose?re$1[t$1.XRANGELOOSE]:re$1[t$1.XRANGE],(ret,gtlt,M,m,p,pr)\x3d\x3e{debug_1(\x22xRange\x22,comp,ret,gtlt,M,m,p,pr);const xM\x3disX(M),xm\x3dxM||isX(m);\np\x3dxm||isX(p);\x22\\x3d\x22\x3d\x3d\x3dgtlt\x26\x26p\x26\x26(gtlt\x3d\x22\x22);pr\x3doptions.includePrerelease?\x22-0\x22:\x22\x22;xM?ret\x3d\x22\\x3e\x22\x3d\x3d\x3dgtlt||\x22\\x3c\x22\x3d\x3d\x3dgtlt?\x22\\x3c0.0.0-0\x22:\x22*\x22:gtlt\x26\x26p?(xm\x26\x26(m\x3d0),p\x3d0,\x22\\x3e\x22\x3d\x3d\x3dgtlt?(gtlt\x3d\x22\\x3e\\x3d\x22,xm?(M\x3d+M+1,m\x3d0):m\x3d+m+1,p\x3d0):\x22\\x3c\\x3d\x22\x3d\x3d\x3dgtlt\x26\x26(gtlt\x3d\x22\\x3c\x22,xm?M\x3d+M+1:m\x3d+m+1),\x22\\x3c\x22\x3d\x3d\x3dgtlt\x26\x26(pr\x3d\x22-0\x22),ret\x3d`${gtlt+M}.${m}.${p}${pr}`):xm?ret\x3d`\x3e\x3d${M}.0.0${pr} \x3c${+M+1}.0.0-0`:p\x26\x26(ret\x3d`\x3e\x3d${M}.${m}.0${pr} \x3c${M}.${+m+1}.0-0`);debug_1(\x22xRange return\x22,ret);return ret})},hyphenReplace\x3dincPr\x3d\x3e($0,from,fM,fm,fp,fpr,fb,to,\ntM,tm,tp,tpr,tb)\x3d\x3e{from\x3disX(fM)?\x22\x22:isX(fm)?`\x3e\x3d${fM}.0.0${incPr?\x22-0\x22:\x22\x22}`:isX(fp)?`\x3e\x3d${fM}.${fm}.0${incPr?\x22-0\x22:\x22\x22}`:fpr?`\x3e\x3d${from}`:`\x3e\x3d${from}${incPr?\x22-0\x22:\x22\x22}`;to\x3disX(tM)?\x22\x22:isX(tm)?`\x3c${+tM+1}.0.0-0`:isX(tp)?`\x3c${tM}.${+tm+1}.0-0`:tpr?`\x3c\x3d${tM}.${tm}.${tp}-${tpr}`:incPr?`\x3c${tM}.${tm}.${+tp+1}-0`:`\x3c\x3d${to}`;return`${from} ${to}`.trim()},ANY$2\x3dSymbol(\x22SemVer ANY\x22);class Comparator{static get ANY(){return ANY$2}constructor(comp,options){options\x3dparseOptions_1(options);if(comp instanceof Comparator){if(comp.loose\x3d\x3d\x3d\n!!options.loose)return comp;comp\x3dcomp.value}debug_1(\x22comparator\x22,comp,options);this.options\x3doptions;this.loose\x3d!!options.loose;this.parse(comp);this.value\x3dthis.semver\x3d\x3d\x3dANY$2?\x22\x22:this.operator+this.semver.version;debug_1(\x22comp\x22,this)}parse(comp){const m\x3dcomp.match(this.options.loose?re$jscomp$0[t$jscomp$0.COMPARATORLOOSE]:re$jscomp$0[t$jscomp$0.COMPARATOR]);if(!m)throw new TypeError(`Invalid comparator: ${comp}`);this.operator\x3dvoid 0!\x3d\x3dm[1]?m[1]:\x22\x22;\x22\\x3d\x22\x3d\x3d\x3dthis.operator\x26\x26(this.operator\x3d\x22\x22);this.semver\x3d\nm[2]?new semver$1(m[2],this.options.loose):ANY$2}toString(){return this.value}test(version){debug_1(\x22Comparator.test\x22,version,this.options.loose);if(this.semver\x3d\x3d\x3dANY$2||version\x3d\x3d\x3dANY$2)return!0;if(\x22string\x22\x3d\x3d\x3dtypeof version)try{version\x3dnew semver$1(version,this.options)}catch(er){return!1}return cmp_1(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator))throw new TypeError(\x22a Comparator is required\x22);options\x26\x26\x22object\x22\x3d\x3d\x3dtypeof options||(options\x3d\n{loose:!!options,includePrerelease:!1});if(\x22\x22\x3d\x3d\x3dthis.operator)return\x22\x22\x3d\x3d\x3dthis.value?!0:(new range$jscomp$1(comp.value,options)).test(this.value);if(\x22\x22\x3d\x3d\x3dcomp.operator)return\x22\x22\x3d\x3d\x3dcomp.value?!0:(new range$jscomp$1(this.value,options)).test(comp.semver);const sameDirectionIncreasing\x3d(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3e\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3e\x22\x3d\x3d\x3dcomp.operator),sameDirectionDecreasing\x3d(\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\x22\x3d\x3d\x3d\ncomp.operator),sameSemVer\x3dthis.semver.version\x3d\x3d\x3dcomp.semver.version,differentDirectionsInclusive\x3d(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator),oppositeDirectionsLessThan\x3dcmp_1(this.semver,\x22\\x3c\x22,comp.semver,options)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3e\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dcomp.operator||\x22\\x3c\x22\x3d\x3d\x3dcomp.operator);comp\x3dcmp_1(this.semver,\x22\\x3e\x22,comp.semver,options)\x26\x26(\x22\\x3c\\x3d\x22\x3d\x3d\x3dthis.operator||\x22\\x3c\x22\x3d\x3d\x3dthis.operator)\x26\x26(\x22\\x3e\\x3d\x22\x3d\x3d\x3d\ncomp.operator||\x22\\x3e\x22\x3d\x3d\x3dcomp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer\x26\x26differentDirectionsInclusive||oppositeDirectionsLessThan||comp}}var comparator$jscomp$0\x3dComparator;const {re:re$jscomp$0,t:t$jscomp$0}\x3dre_1;var satisfies_1\x3d(version,range$1,options)\x3d\x3e{try{range$1\x3dnew range$jscomp$1(range$1,options)}catch(er){return!1}return range$1.test(version)};const {ANY:ANY$1}\x3dcomparator$jscomp$0;var outside_1\x3d(version,range$1,hilo,options)\x3d\x3e{version\x3dnew semver$1(version,\noptions);range$1\x3dnew range$jscomp$1(range$1,options);let gtfn,ltfn,comp,ecomp;switch(hilo){case \x22\\x3e\x22:gtfn\x3dgt_1;hilo\x3dlte_1;ltfn\x3dlt_1;comp\x3d\x22\\x3e\x22;ecomp\x3d\x22\\x3e\\x3d\x22;break;case \x22\\x3c\x22:gtfn\x3dlt_1;hilo\x3dgte_1;ltfn\x3dgt_1;comp\x3d\x22\\x3c\x22;ecomp\x3d\x22\\x3c\\x3d\x22;break;default:throw new TypeError(\x27Must provide a hilo val of \x22\\x3c\x22 or \x22\\x3e\x22\x27);}if(satisfies_1(version,range$1,options))return!1;for(let i\x3d0;i\x3crange$1.set.length;++i){let high\x3dnull,low\x3dnull;range$1.set[i].forEach(comparator$1\x3d\x3e{comparator$1.semver\x3d\x3d\x3dANY$1\x26\x26(comparator$1\x3d\nnew comparator$jscomp$0(\x22\\x3e\\x3d0.0.0\x22));high\x3dhigh||comparator$1;low\x3dlow||comparator$1;gtfn(comparator$1.semver,high.semver,options)?high\x3dcomparator$1:ltfn(comparator$1.semver,low.semver,options)\x26\x26(low\x3dcomparator$1)});if(high.operator\x3d\x3d\x3dcomp||high.operator\x3d\x3d\x3decomp||(!low.operator||low.operator\x3d\x3d\x3dcomp)\x26\x26hilo(version,low.semver)||low.operator\x3d\x3d\x3decomp\x26\x26ltfn(version,low.semver))return!1}return!0};const {ANY}\x3dcomparator$jscomp$0,simpleSubset\x3d(sub,dom,options)\x3d\x3e{if(sub\x3d\x3d\x3ddom)return!0;if(1\x3d\x3d\x3dsub.length\x26\x26\nsub[0].semver\x3d\x3d\x3dANY){if(1\x3d\x3d\x3ddom.length\x26\x26dom[0].semver\x3d\x3d\x3dANY)return!0;sub\x3doptions.includePrerelease?[new comparator$jscomp$0(\x22\\x3e\\x3d0.0.0-0\x22)]:[new comparator$jscomp$0(\x22\\x3e\\x3d0.0.0\x22)]}if(1\x3d\x3d\x3ddom.length\x26\x26dom[0].semver\x3d\x3d\x3dANY){if(options.includePrerelease)return!0;dom\x3d[new comparator$jscomp$0(\x22\\x3e\\x3d0.0.0\x22)]}var eqSet\x3dnew Set;let gt,lt;for(const c of sub)\x22\\x3e\x22\x3d\x3d\x3dc.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dc.operator?gt\x3dhigherGT(gt,c,options):\x22\\x3c\x22\x3d\x3d\x3dc.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dc.operator?lt\x3dlowerLT(lt,c,options):eqSet.add(c.semver);\nif(1\x3ceqSet.size)return null;let gtltComp;if(gt\x26\x26lt\x26\x26(gtltComp\x3dcompare_1(gt.semver,lt.semver,options),0\x3cgtltComp||0\x3d\x3d\x3dgtltComp\x26\x26(\x22\\x3e\\x3d\x22!\x3d\x3dgt.operator||\x22\\x3c\\x3d\x22!\x3d\x3dlt.operator)))return null;for(const eq of eqSet){if(gt\x26\x26!satisfies_1(eq,String(gt),options)||lt\x26\x26!satisfies_1(eq,String(lt),options))return null;for(const c of dom)if(!satisfies_1(eq,String(c),options))return!1;return!0}let hasDomLT,hasDomGT;sub\x3dlt\x26\x26!options.includePrerelease\x26\x26lt.semver.prerelease.length?lt.semver:!1;eqSet\x3dgt\x26\x26!options.includePrerelease\x26\x26\ngt.semver.prerelease.length?gt.semver:!1;sub\x26\x261\x3d\x3d\x3dsub.prerelease.length\x26\x26\x22\\x3c\x22\x3d\x3d\x3dlt.operator\x26\x260\x3d\x3d\x3dsub.prerelease[0]\x26\x26(sub\x3d!1);for(const c of dom){hasDomGT\x3dhasDomGT||\x22\\x3e\x22\x3d\x3d\x3dc.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dc.operator;hasDomLT\x3dhasDomLT||\x22\\x3c\x22\x3d\x3d\x3dc.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dc.operator;if(gt)if(eqSet\x26\x26c.semver.prerelease\x26\x26c.semver.prerelease.length\x26\x26c.semver.major\x3d\x3d\x3deqSet.major\x26\x26c.semver.minor\x3d\x3d\x3deqSet.minor\x26\x26c.semver.patch\x3d\x3d\x3deqSet.patch\x26\x26(eqSet\x3d!1),\x22\\x3e\x22\x3d\x3d\x3dc.operator||\x22\\x3e\\x3d\x22\x3d\x3d\x3dc.operator){if(dom\x3dhigherGT(gt,\nc,options),dom\x3d\x3d\x3dc\x26\x26dom!\x3d\x3dgt)return!1}else if(\x22\\x3e\\x3d\x22\x3d\x3d\x3dgt.operator\x26\x26!satisfies_1(gt.semver,String(c),options))return!1;if(lt)if(sub\x26\x26c.semver.prerelease\x26\x26c.semver.prerelease.length\x26\x26c.semver.major\x3d\x3d\x3dsub.major\x26\x26c.semver.minor\x3d\x3d\x3dsub.minor\x26\x26c.semver.patch\x3d\x3d\x3dsub.patch\x26\x26(sub\x3d!1),\x22\\x3c\x22\x3d\x3d\x3dc.operator||\x22\\x3c\\x3d\x22\x3d\x3d\x3dc.operator){if(dom\x3dlowerLT(lt,c,options),dom\x3d\x3d\x3dc\x26\x26dom!\x3d\x3dlt)return!1}else if(\x22\\x3c\\x3d\x22\x3d\x3d\x3dlt.operator\x26\x26!satisfies_1(lt.semver,String(c),options))return!1;if(!c.operator\x26\x26(lt||gt)\x26\x260!\x3d\x3dgtltComp)return!1}return gt\x26\x26\nhasDomLT\x26\x26!lt\x26\x260!\x3d\x3dgtltComp||lt\x26\x26hasDomGT\x26\x26!gt\x26\x260!\x3d\x3dgtltComp||eqSet||sub?!1:!0},higherGT\x3d(a,b,options)\x3d\x3e{if(!a)return b;options\x3dcompare_1(a.semver,b.semver,options);return 0\x3coptions?a:0\x3eoptions?b:\x22\\x3e\x22\x3d\x3d\x3db.operator\x26\x26\x22\\x3e\\x3d\x22\x3d\x3d\x3da.operator?b:a},lowerLT\x3d(a,b,options)\x3d\x3e{if(!a)return b;options\x3dcompare_1(a.semver,b.semver,options);return 0\x3eoptions?a:0\x3coptions?b:\x22\\x3c\x22\x3d\x3d\x3db.operator\x26\x26\x22\\x3c\\x3d\x22\x3d\x3d\x3da.operator?b:a};var semver\x3d{re:re_1.re,src:re_1.src,tokens:re_1.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,\nSemVer:semver$1,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers,parse:parse_1,valid:(version,options)\x3d\x3e(version\x3dparse_1(version,options))?version.version:null,clean:(version,options)\x3d\x3e(version\x3dparse_1(version.trim().replace(/^[\x3dv]+/,\x22\x22),options))?version.version:null,inc:(version,release,options,identifier)\x3d\x3e{\x22string\x22\x3d\x3d\x3dtypeof options\x26\x26(identifier\x3doptions,options\x3dvoid 0);try{return(new semver$1(version,options)).inc(release,identifier).version}catch(er){return null}},\ndiff:(version1,version2)\x3d\x3e{if(0\x3d\x3d\x3dcompare_1(version1,version2,void 0))return null;{version1\x3dparse_1(version1);version2\x3dparse_1(version2);var hasPre\x3dversion1.prerelease.length||version2.prerelease.length;const prefix\x3dhasPre?\x22pre\x22:\x22\x22;hasPre\x3dhasPre?\x22prerelease\x22:\x22\x22;for(const key in version1)if((\x22major\x22\x3d\x3d\x3dkey||\x22minor\x22\x3d\x3d\x3dkey||\x22patch\x22\x3d\x3d\x3dkey)\x26\x26version1[key]!\x3d\x3dversion2[key])return prefix+key;return hasPre}},major:(a,loose)\x3d\x3e(new semver$1(a,loose)).major,minor:(a,loose)\x3d\x3e(new semver$1(a,loose)).minor,patch:(a,\nloose)\x3d\x3e(new semver$1(a,loose)).patch,prerelease:(version,options)\x3d\x3e(version\x3dparse_1(version,options))\x26\x26version.prerelease.length?version.prerelease:null,compare:compare_1,rcompare:(a,b,loose)\x3d\x3ecompare_1(b,a,loose),compareLoose:(a,b)\x3d\x3ecompare_1(a,b,!0),compareBuild:compareBuild_1,sort:(list,loose)\x3d\x3elist.sort((a,b)\x3d\x3ecompareBuild_1(a,b,loose)),rsort:(list,loose)\x3d\x3elist.sort((a,b)\x3d\x3ecompareBuild_1(b,a,loose)),gt:gt_1,lt:lt_1,eq:(a,b,loose)\x3d\x3e0\x3d\x3d\x3dcompare_1(a,b,loose),neq:(a,b,loose)\x3d\x3e0!\x3d\x3dcompare_1(a,b,loose),\ngte:gte_1,lte:lte_1,cmp:cmp_1,coerce:(version,options)\x3d\x3e{if(version instanceof semver$1)return version;\x22number\x22\x3d\x3d\x3dtypeof version\x26\x26(version\x3dString(version));if(\x22string\x22!\x3d\x3dtypeof version)return null;options\x3doptions||{};let match\x3dnull;if(options.rtl){let next;for(;(next\x3dre$2[t$2.COERCERTL].exec(version))\x26\x26(!match||match.index+match[0].length!\x3d\x3dversion.length);)match\x26\x26next.index+next[0].length\x3d\x3d\x3dmatch.index+match[0].length||(match\x3dnext),re$2[t$2.COERCERTL].lastIndex\x3dnext.index+next[1].length+next[2].length;\nre$2[t$2.COERCERTL].lastIndex\x3d-1}else match\x3dversion.match(re$2[t$2.COERCE]);return null\x3d\x3d\x3dmatch?null:parse_1(`${match[2]}.${match[3]||\x220\x22}.${match[4]||\x220\x22}`,options)},Comparator:comparator$jscomp$0,Range:range$jscomp$1,satisfies:satisfies_1,toComparators:(range$1,options)\x3d\x3e(new range$jscomp$1(range$1,options)).set.map(comp\x3d\x3ecomp.map(c\x3d\x3ec.value).join(\x22 \x22).trim().split(\x22 \x22)),maxSatisfying:(versions,range$1,options)\x3d\x3e{let max\x3dnull,maxSV\x3dnull,rangeObj\x3dnull;try{rangeObj\x3dnew range$jscomp$1(range$1,options)}catch(er){return null}versions.forEach(v\x3d\x3e\n{!rangeObj.test(v)||max\x26\x26-1!\x3d\x3dmaxSV.compare(v)||(max\x3dv,maxSV\x3dnew semver$1(max,options))});return max},minSatisfying:(versions,range$1,options)\x3d\x3e{let min\x3dnull,minSV\x3dnull,rangeObj\x3dnull;try{rangeObj\x3dnew range$jscomp$1(range$1,options)}catch(er){return null}versions.forEach(v\x3d\x3e{!rangeObj.test(v)||min\x26\x261!\x3d\x3dminSV.compare(v)||(min\x3dv,minSV\x3dnew semver$1(min,options))});return min},minVersion:(range$1,loose)\x3d\x3e{range$1\x3dnew range$jscomp$1(range$1,loose);loose\x3dnew semver$1(\x220.0.0\x22);if(range$1.test(loose))return loose;\nloose\x3dnew semver$1(\x220.0.0-0\x22);if(range$1.test(loose))return loose;loose\x3dnull;for(let i\x3d0;i\x3crange$1.set.length;++i){let setMin\x3dnull;range$1.set[i].forEach(comparator\x3d\x3e{const compver\x3dnew semver$1(comparator.semver.version);switch(comparator.operator){case \x22\\x3e\x22:0\x3d\x3d\x3dcompver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw\x3dcompver.format();case \x22\x22:case \x22\\x3e\\x3d\x22:if(!setMin||0\x3ccompare_1(compver,setMin,void 0))setMin\x3dcompver;break;case \x22\\x3c\x22:case \x22\\x3c\\x3d\x22:break;default:throw Error(`Unexpected operation: ${comparator.operator}`);\n}});!setMin||loose\x26\x26!(0\x3ccompare_1(loose,setMin,void 0))||(loose\x3dsetMin)}return loose\x26\x26range$1.test(loose)?loose:null},validRange:(range$1,options)\x3d\x3e{try{return(new range$jscomp$1(range$1,options)).range||\x22*\x22}catch(er){return null}},outside:outside_1,gtr:(version,range,options)\x3d\x3eoutside_1(version,range,\x22\\x3e\x22,options),ltr:(version,range,options)\x3d\x3eoutside_1(version,range,\x22\\x3c\x22,options),intersects:(r1,r2,options)\x3d\x3e{r1\x3dnew range$jscomp$1(r1,options);r2\x3dnew range$jscomp$1(r2,options);return r1.intersects(r2)},\nsimplifyRange:(versions,range,options)\x3d\x3e{var set\x3d[],min$jscomp$0\x3dnull;let prev\x3dnull;versions\x3dversions.sort((a,b)\x3d\x3ecompare_1(a,b,options));for(const version of versions)satisfies_1(version,range,options)?(prev\x3dversion,min$jscomp$0||(min$jscomp$0\x3dversion)):(prev\x26\x26set.push([min$jscomp$0,prev]),min$jscomp$0\x3dprev\x3dnull);min$jscomp$0\x26\x26set.push([min$jscomp$0,null]);min$jscomp$0\x3d[];for(const [min,max]of set)min\x3d\x3d\x3dmax?min$jscomp$0.push(min):max||min!\x3d\x3dversions[0]?max?min\x3d\x3d\x3dversions[0]?min$jscomp$0.push(`\x3c\x3d${max}`):\nmin$jscomp$0.push(`${min} - ${max}`):min$jscomp$0.push(`\x3e\x3d${min}`):min$jscomp$0.push(\x22*\x22);set\x3dmin$jscomp$0.join(\x22 || \x22);return set.length\x3c(\x22string\x22\x3d\x3d\x3dtypeof range.raw?range.raw:String(range)).length?set:range},subset:(sub,dom,options\x3d{})\x3d\x3e{if(sub\x3d\x3d\x3ddom)return!0;sub\x3dnew range$jscomp$1(sub,options);dom\x3dnew range$jscomp$1(dom,options);let sawNonNull\x3d!1;a:for(const simpleSub of sub.set){for(const simpleDom of dom.set)if(sub\x3dsimpleSubset(simpleSub,simpleDom,options),sawNonNull\x3dsawNonNull||null!\x3d\x3dsub,sub)continue a;\nif(sawNonNull)return!1}return!0}};const colorSchemes\x3d{\x22category-6\x22:\x22#ec8431 #829eb1 #c89d29 #3580b1 #adc839 #ab7fb4\x22.split(\x22 \x22),\x22fire-7\x22:\x22#fbf2c7 #f9e39c #f8d36e #f4bb6a #e68a4f #d15a40 #ab4232\x22.split(\x22 \x22),\x22fireandice-6\x22:\x22#e68a4f #f4bb6a #f9e39c #dadfe2 #a6b7c6 #849eae\x22.split(\x22 \x22),\x22ice-7\x22:\x22#edefee #dadfe2 #c4ccd2 #a6b7c6 #849eae #607785 #47525d\x22.split(\x22 \x22)},colorSchemes$1\x3d{\x22main-colors\x22:\x22#1696d2 #d2d2d2 #000000 #fdbf11 #ec008b #55b748 #5c5859 #db2b27\x22.split(\x22 \x22),\x22shades-blue\x22:\x22#CFE8F3 #A2D4EC #73BFE2 #46ABDB #1696D2 #12719E #0A4C6A #062635\x22.split(\x22 \x22),\n\x22shades-gray\x22:\x22#F5F5F5 #ECECEC #E3E3E3 #DCDBDB #D2D2D2 #9D9D9D #696969 #353535\x22.split(\x22 \x22),\x22shades-yellow\x22:\x22#FFF2CF #FCE39E #FDD870 #FCCB41 #FDBF11 #E88E2D #CA5800 #843215\x22.split(\x22 \x22),\x22shades-magenta\x22:\x22#F5CBDF #EB99C2 #E46AA7 #E54096 #EC008B #AF1F6B #761548 #351123\x22.split(\x22 \x22),\x22shades-green\x22:\x22#DCEDD9 #BCDEB4 #98CF90 #78C26D #55B748 #408941 #2C5C2D #1A2E19\x22.split(\x22 \x22),\x22shades-black\x22:\x22#D5D5D4 #ADABAC #848081 #5C5859 #332D2F #262223 #1A1717 #0E0C0D\x22.split(\x22 \x22),\x22shades-red\x22:\x22#F8D5D4 #F1AAA9 #E9807D #E25552 #DB2B27 #A4201D #6E1614 #370B0A\x22.split(\x22 \x22),\n\x22one-group\x22:[\x22#1696d2\x22,\x22#000000\x22],\x22two-groups-cat-1\x22:[\x22#1696d2\x22,\x22#000000\x22],\x22two-groups-cat-2\x22:[\x22#1696d2\x22,\x22#fdbf11\x22],\x22two-groups-cat-3\x22:[\x22#1696d2\x22,\x22#db2b27\x22],\x22two-groups-seq\x22:[\x22#a2d4ec\x22,\x22#1696d2\x22],\x22three-groups-cat\x22:[\x22#1696d2\x22,\x22#fdbf11\x22,\x22#000000\x22],\x22three-groups-seq\x22:[\x22#a2d4ec\x22,\x22#1696d2\x22,\x22#0a4c6a\x22],\x22four-groups-cat-1\x22:[\x22#000000\x22,\x22#d2d2d2\x22,\x22#fdbf11\x22,\x22#1696d2\x22],\x22four-groups-cat-2\x22:[\x22#1696d2\x22,\x22#ec0008b\x22,\x22#fdbf11\x22,\x22#5c5859\x22],\x22four-groups-seq\x22:[\x22#cfe8f3\x22,\x22#73bf42\x22,\x22#1696d2\x22,\x22#0a4c6a\x22],\x22five-groups-cat-1\x22:[\x22#1696d2\x22,\n\x22#fdbf11\x22,\x22#d2d2d2\x22,\x22#ec008b\x22,\x22#000000\x22],\x22five-groups-cat-2\x22:[\x22#1696d2\x22,\x22#0a4c6a\x22,\x22#d2d2d2\x22,\x22#fdbf11\x22,\x22#332d2f\x22],\x22five-groups-seq\x22:[\x22#cfe8f3\x22,\x22#73bf42\x22,\x22#1696d2\x22,\x22#0a4c6a\x22,\x22#000000\x22],\x22six-groups-cat-1\x22:\x22#1696d2 #ec008b #fdbf11 #000000 #d2d2d2 #55b748\x22.split(\x22 \x22),\x22six-groups-cat-2\x22:\x22#1696d2 #d2d2d2 #ec008b #fdbf11 #332d2f #0a4c6a\x22.split(\x22 \x22),\x22six-groups-seq\x22:\x22#cfe8f3 #a2d4ec #73bfe2 #46abdb #1696d2 #12719e\x22.split(\x22 \x22),\x22diverging-colors\x22:\x22#ca5800 #fdbf11 #fdd870 #fff2cf #cfe8f3 #73bfe2 #1696d2 #0a4c6a\x22.split(\x22 \x22)};\nvar themes\x3dObject.freeze({__proto__:null,dark:{background:\x22#333\x22,title:{color:\x22#fff\x22,subtitleColor:\x22#fff\x22},style:{\x22guide-label\x22:{fill:\x22#fff\x22},\x22guide-title\x22:{fill:\x22#fff\x22}},axis:{domainColor:\x22#fff\x22,gridColor:\x22#888\x22,tickColor:\x22#fff\x22}},excel:{background:\x22#fff\x22,arc:{fill:\x22#4572a7\x22},area:{fill:\x22#4572a7\x22},line:{stroke:\x22#4572a7\x22,strokeWidth:2},path:{stroke:\x22#4572a7\x22},rect:{fill:\x22#4572a7\x22},shape:{stroke:\x22#4572a7\x22},symbol:{fill:\x22#4572a7\x22,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:\x22#000000\x22,\ngridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:\x22middle\x22,labelFontSize:11,symbolSize:50,symbolType:\x22square\x22},range:{category:\x22#4572a7 #aa4643 #8aa453 #71598e #4598ae #d98445 #94aace #d09393 #b9cc98 #a99cbc\x22.split(\x22 \x22)}},fivethirtyeight:{arc:{fill:\x22#30a2da\x22},area:{fill:\x22#30a2da\x22},axis:{domainColor:\x22#cbcbcb\x22,grid:!0,gridColor:\x22#cbcbcb\x22,gridWidth:1,labelColor:\x22#999\x22,labelFontSize:10,titleColor:\x22#333\x22,tickColor:\x22#cbcbcb\x22,tickSize:10,\ntitleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:\x22#f0f0f0\x22,group:{fill:\x22#f0f0f0\x22},legend:{labelColor:\x22#333\x22,labelFontSize:11,padding:1,symbolSize:30,symbolType:\x22square\x22,titleColor:\x22#333\x22,titleFontSize:14,titlePadding:10},line:{stroke:\x22#30a2da\x22,strokeWidth:2},path:{stroke:\x22#30a2da\x22,strokeWidth:.5},rect:{fill:\x22#30a2da\x22},range:{category:\x22#30a2da #fc4f30 #e5ae38 #6d904f #8b8b8b #b96db8 #ff9e27 #56cc60 #52d2ca #52689e #545454 #9fe4f8\x22.split(\x22 \x22),diverging:\x22#cc0020 #e77866 #f6e7e1 #d6e8ed #91bfd9 #1d78b5\x22.split(\x22 \x22),\nheatmap:[\x22#d6e8ed\x22,\x22#cee0e5\x22,\x22#91bfd9\x22,\x22#549cc6\x22,\x22#1d78b5\x22]},point:{filled:!0,shape:\x22circle\x22},shape:{stroke:\x22#30a2da\x22},bar:{binSpacing:2,fill:\x22#30a2da\x22,stroke:null},title:{anchor:\x22start\x22,fontSize:24,fontWeight:600,offset:20}},ggplot2:{group:{fill:\x22#e5e5e5\x22},arc:{fill:\x22#000\x22},area:{fill:\x22#000\x22},line:{stroke:\x22#000\x22},path:{stroke:\x22#000\x22},rect:{fill:\x22#000\x22},shape:{stroke:\x22#000\x22},symbol:{fill:\x22#000\x22,size:40},axis:{domain:!1,grid:!0,gridColor:\x22#FFFFFF\x22,gridOpacity:1,labelColor:\x22#7F7F7F\x22,labelPadding:4,\ntickColor:\x22#7F7F7F\x22,tickSize:5.67,titleFontSize:16,titleFontWeight:\x22normal\x22},legend:{labelBaseline:\x22middle\x22,labelFontSize:11,symbolSize:40},range:{category:\x22#000000 #7F7F7F #1A1A1A #999999 #333333 #B0B0B0 #4D4D4D #C9C9C9 #666666 #DCDCDC\x22.split(\x22 \x22)}},googlecharts:{arc:{fill:\x22#3366CC\x22},area:{fill:\x22#3366CC\x22},path:{stroke:\x22#3366CC\x22},rect:{fill:\x22#3366CC\x22},shape:{stroke:\x22#3366CC\x22},symbol:{stroke:\x22#3366CC\x22},circle:{fill:\x22#3366CC\x22},background:\x22#fff\x22,padding:{top:10,right:10,bottom:10,left:10},style:{\x22guide-label\x22:{font:\x22Arial, sans-serif\x22,\nfontSize:12},\x22guide-title\x22:{font:\x22Arial, sans-serif\x22,fontSize:12},\x22group-title\x22:{font:\x22Arial, sans-serif\x22,fontSize:12}},title:{font:\x22Arial, sans-serif\x22,fontSize:14,fontWeight:\x22bold\x22,dy:-3,anchor:\x22start\x22},axis:{gridColor:\x22#ccc\x22,tickColor:\x22#ccc\x22,domain:!1,grid:!0},range:{category:\x22#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B\x22.split(\x22 \x22),heatmap:[\x22#c6dafc\x22,\x22#5e97f6\x22,\x22#2a56c6\x22]}},latimes:{background:\x22#ffffff\x22,title:{anchor:\x22start\x22,color:\x22#000000\x22,font:\x22Benton Gothic Bold, sans-serif\x22,\nfontSize:22,fontWeight:\x22normal\x22},arc:{fill:\x22#82c6df\x22},area:{fill:\x22#82c6df\x22},line:{stroke:\x22#82c6df\x22,strokeWidth:2},path:{stroke:\x22#82c6df\x22},rect:{fill:\x22#82c6df\x22},shape:{stroke:\x22#82c6df\x22},symbol:{fill:\x22#82c6df\x22,size:30},axis:{labelFont:\x22Benton Gothic, sans-serif\x22,labelFontSize:11.5,labelFontWeight:\x22normal\x22,titleFont:\x22Benton Gothic Bold, sans-serif\x22,titleFontSize:13,titleFontWeight:\x22normal\x22},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:\x22middle\x22,maxExtent:45,minExtent:45,tickSize:2,\ntitleAlign:\x22left\x22,titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:\x22Benton Gothic, sans-serif\x22,labelFontSize:11.5,symbolType:\x22square\x22,titleFont:\x22Benton Gothic Bold, sans-serif\x22,titleFontSize:13,titleFontWeight:\x22normal\x22},range:{category:colorSchemes[\x22category-6\x22],diverging:colorSchemes[\x22fireandice-6\x22],heatmap:colorSchemes[\x22fire-7\x22],ordinal:colorSchemes[\x22fire-7\x22],ramp:colorSchemes[\x22fire-7\x22]}},quartz:{background:\x22#f9f9f9\x22,arc:{fill:\x22#ab5787\x22},area:{fill:\x22#ab5787\x22},line:{stroke:\x22#ab5787\x22},path:{stroke:\x22#ab5787\x22},\nrect:{fill:\x22#ab5787\x22},shape:{stroke:\x22#ab5787\x22},symbol:{fill:\x22#ab5787\x22,size:30},axis:{domainColor:\x22#979797\x22,domainWidth:.5,gridWidth:.2,labelColor:\x22#979797\x22,tickColor:\x22#979797\x22,tickWidth:.2,titleColor:\x22#979797\x22},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:\x22square\x22},range:{category:\x22#ab5787 #51b2e5 #703c5c #168dd9 #d190b6 #00609f #d365ba #154866 #666666 #c4c4c4\x22.split(\x22 \x22)}},urbaninstitute:{background:\x22#FFFFFF\x22,\ntitle:{anchor:\x22start\x22,fontSize:18,font:\x22Lato\x22},axisX:{domain:!0,domainColor:\x22#000000\x22,domainWidth:1,grid:!1,labelFontSize:12,labelFont:\x22Lato\x22,labelAngle:0,tickColor:\x22#000000\x22,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:\x22#DEDDDD\x22,gridWidth:1,labelFontSize:12,labelFont:\x22Lato\x22,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:\x22Lato\x22,symbolSize:100,\ntitleFontSize:12,titlePadding:10,titleFont:\x22Lato\x22,orient:\x22right\x22,offset:10},view:{stroke:\x22transparent\x22},range:{category:colorSchemes$1[\x22six-groups-cat-1\x22],diverging:colorSchemes$1[\x22diverging-colors\x22],heatmap:colorSchemes$1[\x22diverging-colors\x22],ordinal:colorSchemes$1[\x22six-groups-seq\x22],ramp:colorSchemes$1[\x22shades-blue\x22]},area:{fill:\x22#1696d2\x22},rect:{fill:\x22#1696d2\x22},line:{color:\x22#1696d2\x22,stroke:\x22#1696d2\x22,strokeWidth:5},trail:{color:\x22#1696d2\x22,stroke:\x22#1696d2\x22,strokeWidth:0,size:1},path:{stroke:\x22#1696d2\x22,\nstrokeWidth:.5},point:{filled:!0},text:{font:\x22Lato\x22,color:\x22#1696d2\x22,fontSize:11,align:\x22center\x22,fontWeight:400,size:11},style:{bar:{fill:\x22#1696d2\x22,stroke:null}},arc:{fill:\x22#1696d2\x22},shape:{stroke:\x22#1696d2\x22},symbol:{fill:\x22#1696d2\x22,size:30}},version:\x222.10.0\x22,vox:{background:\x22#fff\x22,arc:{fill:\x22#3e5c69\x22},area:{fill:\x22#3e5c69\x22},line:{stroke:\x22#3e5c69\x22},path:{stroke:\x22#3e5c69\x22},rect:{fill:\x22#3e5c69\x22},shape:{stroke:\x22#3e5c69\x22},symbol:{fill:\x22#3e5c69\x22},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,\ntitleFontWeight:\x22normal\x22},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:\x22square\x22},range:{category:\x22#3e5c69 #6793a6 #182429 #0570b0 #3690c0 #74a9cf #a6bddb #e2ddf2\x22.split(\x22 \x22)}}});const get1\x3dfield\x3d\x3efunction(obj){return obj[field]},getN\x3dpath\x3d\x3e{const len\x3dpath.length;return function(obj){for(let i\x3d0;i\x3clen;++i)obj\x3dobj[path[i]];return obj}};(function(field,name,opt){const path\x3dsplitAccessPath(field);field\x3d1\x3d\x3d\x3dpath.length?path[0]:\nfield;return accessor((opt\x26\x26opt.get||getter)(path),[field],name||field)})(\x22id\x22);accessor(_\x3d\x3e_,[],\x22identity\x22);accessor(()\x3d\x3e0,[],\x22zero\x22);accessor(()\x3d\x3e1,[],\x22one\x22);accessor(()\x3d\x3e!0,[],\x22true\x22);accessor(()\x3d\x3e!1,[],\x22false\x22);var isArray\x3dArray.isArray;const DEFAULT_OPTIONS\x3d{offsetX:10,offsetY:10,id:\x22vg-tooltip-element\x22,styleId:\x22vega-tooltip-style\x22,theme:\x22light\x22,disableDefaultStyle:!1,sanitize:function(value){return String(value).replace(/\x26/g,\x22\\x26amp;\x22).replace(/\x3c/g,\x22\\x26lt;\x22)},maxDepth:2};class Handler{constructor(options){this.options\x3d\nObject.assign(Object.assign({},DEFAULT_OPTIONS),options);var elementId\x3dthis.options.id;this.el\x3dnull;this.call\x3dthis.tooltipHandler.bind(this);if(!this.options.disableDefaultStyle\x26\x26!document.getElementById(this.options.styleId)){options\x3ddocument.createElement(\x22style\x22);options.setAttribute(\x22id\x22,this.options.styleId);if(!/^[A-Za-z]+[-:.\\w]*$/.test(elementId))throw Error(\x22Invalid HTML ID\x22);elementId\x3d\x22#vg-tooltip-element {\\n  visibility: hidden;\\n  padding: 8px;\\n  position: fixed;\\n  z-index: 1000;\\n  font-family: sans-serif;\\n  font-size: 11px;\\n  border-radius: 3px;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\\n  /* The default theme is the light theme. */\\n  background-color: rgba(255, 255, 255, 0.95);\\n  border: 1px solid #d9d9d9;\\n  color: black; }\\n  #vg-tooltip-element.visible {\\n    visibility: visible; }\\n  #vg-tooltip-element h2 {\\n    margin-top: 0;\\n    margin-bottom: 10px;\\n    font-size: 13px; }\\n  #vg-tooltip-element img {\\n    max-width: 200px;\\n    max-height: 200px; }\\n  #vg-tooltip-element table {\\n    border-spacing: 0; }\\n    #vg-tooltip-element table tr {\\n      border: none; }\\n      #vg-tooltip-element table tr td {\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        padding-top: 2px;\\n        padding-bottom: 2px; }\\n        #vg-tooltip-element table tr td.key {\\n          color: #808080;\\n          max-width: 150px;\\n          text-align: right;\\n          padding-right: 4px; }\\n        #vg-tooltip-element table tr td.value {\\n          display: block;\\n          max-width: 300px;\\n          max-height: 7em;\\n          text-align: left; }\\n  #vg-tooltip-element.dark-theme {\\n    background-color: rgba(32, 32, 32, 0.9);\\n    border: 1px solid #f5f5f5;\\n    color: white; }\\n    #vg-tooltip-element.dark-theme td.key {\\n      color: #bfbfbf; }\\n\x22.toString().replace(\x22vg-tooltip-element\x22,\nelementId);options.innerHTML\x3delementId;elementId\x3ddocument.head;0\x3celementId.childNodes.length?elementId.insertBefore(options,elementId.childNodes[0]):elementId.appendChild(options)}}tooltipHandler(handler,event,item,value){this.el\x3ddocument.getElementById(this.options.id);this.el||(this.el\x3ddocument.createElement(\x22div\x22),this.el.setAttribute(\x22id\x22,this.options.id),this.el.classList.add(\x22vg-tooltip\x22),document.body.appendChild(this.el));(null!\x3ddocument.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el);\nif(null\x3d\x3dvalue||\x22\x22\x3d\x3d\x3dvalue)this.el.classList.remove(\x22visible\x22,`${this.options.theme}-theme`);else{this.el.innerHTML\x3dformatValue(value,this.options.sanitize,this.options.maxDepth);this.el.classList.add(\x22visible\x22,`${this.options.theme}-theme`);handler\x3dthis.el.getBoundingClientRect();var offsetX\x3dthis.options.offsetX;item\x3dthis.options.offsetY;value\x3devent.clientX+offsetX;value+handler.width\x3ewindow.innerWidth\x26\x26(value\x3d+event.clientX-offsetX-handler.width);offsetX\x3devent.clientY+item;offsetX+handler.height\x3e\nwindow.innerHeight\x26\x26(offsetX\x3d+event.clientY-item-handler.height);event\x3d{x:value,y:offsetX};var {x,y}\x3devent;this.el.setAttribute(\x22style\x22,`top: ${y}px; left: ${x}px`)}}}String.prototype.startsWith||(String.prototype.startsWith\x3dfunction(search,pos){return this.substr(!pos||0\x3epos?0:+pos,search.length)\x3d\x3d\x3dsearch});var _a$jscomp$1,vega\x3dvegaImport__namespace,vegaLite\x3dvegaLiteImport__namespace,w\x3d\x22undefined\x22!\x3d\x3dtypeof window?window:void 0;void 0\x3d\x3d\x3dvegaLite\x26\x26(null\x3d\x3d\x3d(_a$jscomp$1\x3dnull\x3d\x3d\x3dw||void 0\x3d\x3d\x3dw?void 0:w.vl)||\nvoid 0\x3d\x3d\x3d_a$jscomp$1?0:_a$jscomp$1.compile)\x26\x26(vegaLite\x3dw.vl);var DEFAULT_ACTIONS\x3d{\x22export\x22:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I18N\x3d{CLICK_TO_VIEW_ACTIONS:\x22Click to view actions\x22,COMPILED_ACTION:\x22View Compiled Vega\x22,EDITOR_ACTION:\x22Open in Vega Editor\x22,PNG_ACTION:\x22Save as PNG\x22,SOURCE_ACTION:\x22View Source\x22,SVG_ACTION:\x22Save as SVG\x22},NAMES\x3d{vega:\x22Vega\x22,\x22vega-lite\x22:\x22Vega-Lite\x22},VERSION\x3d{vega:vega.version,\x22vega-lite\x22:vegaLite?vegaLite.version:\x22not available\x22},PREPROCESSOR\x3d{vega:function(vgSpec){return vgSpec},\n\x22vega-lite\x22:function(vlSpec,config){return vegaLite.compile(vlSpec,{config}).spec}},wrapper$jscomp$0\x3dfunction(){for(var args\x3d[],_i\x3d0;_i\x3carguments.length;_i++)args[_i]\x3darguments[_i];if(_i\x3d1\x3cargs.length){if(_i\x3dvegaImport.isString(args[0]))_i\x3dargs[0],_i\x3d!(_i.startsWith(\x22http://\x22)||_i.startsWith(\x22https://\x22)||_i.startsWith(\x22//\x22));_i\x3d_i||args[0]instanceof HTMLElement||3\x3d\x3d\x3dargs.length}return _i?embed(args[0],args[1],args[2]):container$jscomp$0(args[0],args[1])};wrapper$jscomp$0.vegaLite\x3dvegaLite;wrapper$jscomp$0.vl\x3d\nvegaLite;wrapper$jscomp$0.container\x3dcontainer$jscomp$0;wrapper$jscomp$0.embed\x3dembed;wrapper$jscomp$0.vega\x3dvega;wrapper$jscomp$0[\x22default\x22]\x3dembed;wrapper$jscomp$0.version\x3d\x226.17.0\x22;return wrapper$jscomp$0})}");
SHADOW_ENV.evalLoad("org.browjure.vega.base.js", true , "goog.provide(\x27org.browjure.vega.base\x27);\nvar module$node_modules$vega_lite$build$vega_lite\x3dshadow.js.require(\x22module$node_modules$vega_lite$build$vega_lite\x22, {});\nvar module$node_modules$vega_embed$build$vega_embed\x3dshadow.js.require(\x22module$node_modules$vega_embed$build$vega_embed\x22, {});\norg.browjure.vega.base.window_resolve \x3d (function org$browjure$vega$base$window_resolve(symbol){\nreturn cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__83114_SHARP_,p2__83115_SHARP_){\nreturn (p1__83114_SHARP_[p2__83115_SHARP_]);\n}),window,cljs.core.conj.cljs$core$IFn$_invoke$arity$2(clojure.string.split.cljs$core$IFn$_invoke$arity$2(clojure.string.replace(cljs.core.namespace(symbol),\x22-\x22,\x22_\x22),\x22.\x22),clojure.string.replace(cljs.core.name(symbol),\x22-\x22,\x22_\x22)));\n});\norg.browjure.vega.base.dataset_component \x3d (function org$browjure$vega$base$dataset_component(p__83116){\nvar map__83117 \x3d p__83116;\nvar map__83117__$1 \x3d (((((!((map__83117 \x3d\x3d null))))?(((((map__83117.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__83117.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__83117):map__83117);\nvar data__GT_vega_spec \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83117__$1,new cljs.core.Keyword(\x22vega\x22,\x22data-\x3evega-spec\x22,\x22vega/data-\x3evega-spec\x22,-155039939));\nvar dependencies \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83117__$1,new cljs.core.Keyword(\x22dataset\x22,\x22dependencies\x22,\x22dataset/dependencies\x22,2019679717));\nvar style \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83117__$1,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736));\nvar data__GT_vega_spec__$1 \x3d org.browjure.state.compile((data__GT_vega_spec[\x22rep\x22]),new cljs.core.Keyword(null,\x22bindings\x22,\x22bindings\x22,1271397192).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(org.browjure.base.registry)));\nvar data \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),style,new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),(function (c){\nreturn cljs.core.doall.cljs$core$IFn$_invoke$arity$1(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__83122){\nvar vec__83123 \x3d p__83122;\nvar dep_name \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__83123,(0),null);\nvar dep_path \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__83123,(1),null);\nreturn (function (){var fexpr__83126 \x3d org.browjure.vega.base.window_resolve(new cljs.core.Symbol(\x22org.browjure.state\x22,\x22get-or-create-subject\x22,\x22org.browjure.state/get-or-create-subject\x22,-573862634,null));\nreturn (fexpr__83126.cljs$core$IFn$_invoke$arity$2 ? fexpr__83126.cljs$core$IFn$_invoke$arity$2(dep_path,null) : fexpr__83126.call(null,dep_path,null));\n})().subscribe((function (r){\ncljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(data,cljs.core.assoc,dep_name,r);\n\nreturn module$node_modules$vega_embed$build$vega_embed.default(c,cljs.core.clj__GT_js((function (){var G__83127 \x3d cljs.core.deref(data);\nreturn (data__GT_vega_spec__$1.cljs$core$IFn$_invoke$arity$1 ? data__GT_vega_spec__$1.cljs$core$IFn$_invoke$arity$1(G__83127) : data__GT_vega_spec__$1.call(null,G__83127));\n})()));\n}));\n}),dependencies));\n})], null)], null);\n});\norg.browjure.vega.base.embed_component \x3d (function org$browjure$vega$base$embed_component(var_args){\nvar args__4742__auto__ \x3d [];\nvar len__4736__auto___83165 \x3d arguments.length;\nvar i__4737__auto___83166 \x3d (0);\nwhile(true){\nif((i__4737__auto___83166 \x3c len__4736__auto___83165)){\nargs__4742__auto__.push((arguments[i__4737__auto___83166]));\n\nvar G__83167 \x3d (i__4737__auto___83166 + (1));\ni__4737__auto___83166 \x3d G__83167;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4743__auto__ \x3d ((((0) \x3c args__4742__auto__.length))?(new cljs.core.IndexedSeq(args__4742__auto__.slice((0)),(0),null)):null);\nreturn org.browjure.vega.base.embed_component.cljs$core$IFn$_invoke$arity$variadic(argseq__4743__auto__);\n});\n\n(org.browjure.vega.base.embed_component.cljs$core$IFn$_invoke$arity$variadic \x3d (function (specs){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),(function (){var iter__4529__auto__ \x3d (function org$browjure$vega$base$iter__83136(s__83137){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__83137__$1 \x3d s__83137;\nwhile(true){\nvar temp__5753__auto__ \x3d cljs.core.seq(s__83137__$1);\nif(temp__5753__auto__){\nvar s__83137__$2 \x3d temp__5753__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__83137__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__83137__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__83139 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__83138 \x3d (0);\nwhile(true){\nif((i__83138 \x3c size__4528__auto__)){\nvar spec \x3d cljs.core._nth(c__4527__auto__,i__83138);\ncljs.core.chunk_append(b__83139,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),((function (i__83138,spec,c__4527__auto__,size__4528__auto__,b__83139,s__83137__$2,temp__5753__auto__){\nreturn (function (p1__83128_SHARP_){\nreturn module$node_modules$vega_embed$build$vega_embed.default(p1__83128_SHARP_,cljs.core.clj__GT_js(spec));\n});})(i__83138,spec,c__4527__auto__,size__4528__auto__,b__83139,s__83137__$2,temp__5753__auto__))\n], null)], null));\n\nvar G__83172 \x3d (i__83138 + (1));\ni__83138 \x3d G__83172;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__83139),org$browjure$vega$base$iter__83136(cljs.core.chunk_rest(s__83137__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__83139),null);\n}\n} else {\nvar spec \x3d cljs.core.first(s__83137__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22div\x22,\x22div\x22,1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967),((function (spec,s__83137__$2,temp__5753__auto__){\nreturn (function (p1__83128_SHARP_){\nreturn module$node_modules$vega_embed$build$vega_embed.default(p1__83128_SHARP_,cljs.core.clj__GT_js(spec));\n});})(spec,s__83137__$2,temp__5753__auto__))\n], null)], null),org$browjure$vega$base$iter__83136(cljs.core.rest(s__83137__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(specs);\n})()], null);\n}));\n\n(org.browjure.vega.base.embed_component.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(org.browjure.vega.base.embed_component.cljs$lang$applyTo \x3d (function (seq83129){\nvar self__4724__auto__ \x3d this;\nreturn self__4724__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq83129));\n}));\n\norg.browjure.vega.base.create_viz_node \x3d (function org$browjure$vega$base$create_viz_node(){\nvar node \x3d document.createElement(\x22div\x22);\nnode.setAttribute(\x22id\x22,\x22vega-viz\x22);\n\nreturn document.querySelector(\x22body\x22).appendChild(node);\n});\norg.browjure.vega.base.handler \x3d (function org$browjure$vega$base$handler(p__83146){\nvar map__83150 \x3d p__83146;\nvar map__83150__$1 \x3d (((((!((map__83150 \x3d\x3d null))))?(((((map__83150.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__83150.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__83150):map__83150);\nvar command \x3d map__83150__$1;\nvar id \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83150__$1,new cljs.core.Keyword(null,\x22id\x22,\x22id\x22,-1388402092));\nvar type \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83150__$1,new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348));\nvar payload \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__83150__$1,new cljs.core.Keyword(null,\x22payload\x22,\x22payload\x22,-383036092));\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(type,new cljs.core.Keyword(null,\x22register-plugin\x22,\x22register-plugin\x22,1705269136))){\ncljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic(org.browjure.base.registry,cljs.core.update,new cljs.core.Keyword(null,\x22bindings\x22,\x22bindings\x22,1271397192),cljs.core.merge,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Symbol(null,\x22vega-embed\x22,\x22vega-embed\x22,-424822024,null),module$node_modules$vega_embed$build$vega_embed.default], null)], 0));\n} else {\n}\n\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(type,new cljs.core.Keyword(null,\x22visualize\x22,\x22visualize\x22,-44099815))){\nconsole.log(\x22vega base handler\x22,command);\n\nif(cljs.core.truth_(document.getElementById(\x22#vega-viz\x22))){\nreturn module$node_modules$vega_embed$build$vega_embed.default(\x22#vega-viz\x22,cljs.core.clj__GT_js(payload));\n} else {\norg.browjure.vega.base.create_viz_node();\n\nreturn module$node_modules$vega_embed$build$vega_embed.default(\x22#vega-viz\x22,cljs.core.clj__GT_js(payload));\n}\n} else {\nreturn null;\n}\n});\n");
SHADOW_ENV.evalLoad("shadow.module.vega.append.js", false , ";\nSHADOW_ENV.setLoaded(\x22module$node_modules$base64_js$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$isarray$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$buffer$index.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_lite$build$vega_lite.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_util$build$vega_util.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_array$dist$d3_array.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_format$dist$d3_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_time$dist$d3_time.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_time$build$vega_time.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_time_format$dist$d3_time_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_format$build$vega_format.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_loader$build$vega_loader_min.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_dataflow$build$vega_dataflow.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_statistics$build$vega_statistics.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_transforms$build$vega_transforms.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_path$dist$d3_path.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_shape$dist$d3_shape.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_canvas$build$vega_canvas_min.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_color$dist$d3_color.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_interpolate$dist$d3_interpolate.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_scale$dist$d3_scale.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_scale$build$vega_scale.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_scenegraph$build$vega_scenegraph.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_view_transforms$build$vega_view_transforms.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_encode$build$vega_encode.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_geo$dist$d3_geo.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_geo_projection$dist$d3_geo_projection.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_projection$build$vega_projection.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_geo$build$vega_geo.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_quadtree$dist$d3_quadtree.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_dispatch$dist$d3_dispatch.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_timer$dist$d3_timer.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_force$dist$d3_force.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_force$build$vega_force.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_hierarchy$dist$d3_hierarchy.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_hierarchy$build$vega_hierarchy.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_label$build$vega_label.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_regression$build$vega_regression.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$d3_delaunay$dist$d3_delaunay.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_voronoi$build$vega_voronoi.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_wordcloud$build$vega_wordcloud.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_crossfilter$build$vega_crossfilter.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_expression$build$vega_expression.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_selections$build$vega_selection.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_functions$build$vega_functions.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_runtime$build$vega_runtime.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_view$build$vega_view.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_event_selector$build$vega_event_selector.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_parser$build$vega_parser.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega$build$vega_node.js\x22);\nSHADOW_ENV.setLoaded(\x22module$node_modules$vega_embed$build$vega_embed.js\x22);\nSHADOW_ENV.setLoaded(\x22org.browjure.vega.base.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.vega.append.js\x22);");